import{l as x,ay as E,u as S,j as o,r as e,k as b,az as R,a7 as j}from"./components-DuRBtGp8-CgeLxIBe.js";x.info("Element Call popout dev");const u=E.createRoot(document.getElementById("root"));let n=null;window.isSecureContext?navigator.mediaDevices||(n=new Error("Your browser does not support WebRTC.")):n=new Error(`This app cannot run in an insecure context. To fix this, access the app via a local loopback address, or serve it over HTTPS.
https://developer.mozilla.org/en-US/docs/Web/Security/Secure_Contexts`);if(n!==null)throw u.render(n.message),n;const y=j,s=new URLSearchParams(document.location.search),p=s.get("accessToken"),a=s.get("mediaType"),l=s.get("participantId"),m=s.get("livekitUrl"),i=new S,z=i.connect(m,p),C=()=>{e.use(z);const[r,w]=e.useState(),[f,g]=e.useState(),[h,v]=e.useState(window.innerHeight);e.useEffect(()=>{let t=0;return r===void 0&&(t=window.setTimeout(()=>{const d=i.remoteParticipants.get(l);g(d);const T=d?.getTrackPublication(a);w(T)},1e3)),()=>{t!=0&&window.clearTimeout(t)}},[a,l,i,r]);const c=e.useCallback(()=>{v(window.innerHeight)},[]);if(e.useEffect(()=>{const t=b(c);return t(),window.addEventListener("resize",t),()=>{window.removeEventListener("resize",t)}},[c]),r===void 0)return o.jsx("p",{children:" loading.... "});const k={participant:f,publication:r,source:a};return o.jsxs(R,{room:i,token:p,serverUrl:m,video:!1,audio:!1,children:[o.jsx(y,{muted:!0,autoPlay:!0,trackRef:k,height:h}),";"]})};u.render(o.jsx(e.StrictMode,{children:o.jsx(e.Suspense,{fallback:o.jsx("p",{children:"Connecting..."}),children:o.jsx(C,{})})}));
//# sourceMappingURL=popout-B-flGajp.js.map
