import{l as w,aJ as T,ac as E,j as i,a as t,aK as S,y as b,k as R,aL as j}from"./components-DuRBtGp8-DJ7deGYZ.js";setLKLogLevel("info");w.info("Element Call popout dev");const c=T.createRoot(document.getElementById("root"));let r=null;window.isSecureContext?navigator.mediaDevices||(r=new Error("Your browser does not support WebRTC.")):r=new Error(`This app cannot run in an insecure context. To fix this, access the app via a local loopback address, or serve it over HTTPS.
https://developer.mozilla.org/en-US/docs/Web/Security/Secure_Contexts`);if(r!==null)throw c.render(r.message),r;const y=styled(E,{shouldForwardProp:e=>e!=="height"})(({height:e})=>({height:e,width:"100%"})),z=()=>{const{accessToken:e,mediaType:a,participantId:d,livekitUrl:l}=S(),n=new b;t.use(n.connect(l,e));const[s,h]=t.useState(),[f,m]=t.useState(),[g,v]=t.useState(window.innerHeight);t.useEffect(()=>{let o=0;return s===void 0&&(o=window.setTimeout(()=>{const p=n.remoteParticipants.get(d);m(p);const k=p?.getTrackPublication(a);h(k)},1e3)),()=>{o!=0&&window.clearTimeout(o)}},[a,d,n,s]);const u=t.useCallback(()=>{v(window.innerHeight)},[]);if(t.useEffect(()=>{const o=R(u);return o(),window.addEventListener("resize",o),()=>{window.removeEventListener("resize",o)}},[u]),s===void 0)return i.jsx("p",{children:" loading.... "});const x={participant:f,publication:s,source:a};return i.jsxs(j,{room:n,token:e,serverUrl:l,video:!1,audio:!1,children:[i.jsx(y,{muted:!0,autoPlay:!0,trackRef:x,height:g}),";"]})};Initializer.initBeforeReact().then(()=>{c.render(i.jsx(t.StrictMode,{children:i.jsx(Suspense,{fallback:i.jsx("p",{children:"Connecting..."}),children:i.jsx(z,{})})}))}).catch(e=>{w.error("Failed to initialize app",e),c.render(e.message)});
//# sourceMappingURL=popout-CrfUYQ_w.js.map
