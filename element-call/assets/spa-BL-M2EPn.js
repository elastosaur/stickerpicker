import{l as t,ad as d}from"./components-DuRBtGp8-CgeLxIBe.js";import{C as n,f,i as g}from"./index-CIsGG1UJ.js";async function h(s,r){try{const e=s();if(!e)return t.log("No session stored; continuing without a client"),null;t.log("Using a standalone client");const{user_id:o,device_id:l,access_token:a,passwordlessUser:c}=e,u={baseUrl:n.defaultHomeserverUrl(),accessToken:a,userId:o,deviceId:l,fallbackICEServerAllowed:f,livekitServiceURL:n.get().livekit?.livekit_service_url};try{return{widgetApi:null,client:await g(u,!0),passwordlessUser:c}}catch(i){if(i instanceof d&&i.errcode==="M_UNKNOWN_TOKEN")return t.log("The session from local store is invalid; continuing without a client"),r(),null;throw i}}catch(e){throw r(),e}}export{h as initSPA};
//# sourceMappingURL=spa-BL-M2EPn.js.map
