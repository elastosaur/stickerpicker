const __vite__mapDeps=(i,m=__vite__mapDeps,d=(m.f||(m.f=["./spa-VixZ7a3F.js","./components-DuRBtGp8-CgeLxIBe.js","./polyfill-force-B9rLScZD.js","./decimal-CeJ0lJls.js","./polyfill-force-BfFSVkNa.js"])))=>i.map(i=>d[i]);
import{r as f,a as _D,g as Gl,j as h,R as X,b as Kl,i as K3,S as Wp,c as Mi,d as Wl,e as os,f as Pa,h as bD,k as wD,l as U,E as xE,s as vf,_ as zp,C as ei,M as Us,m as He,n as Cv,W as SD,o as CD,p as Ev,q as ED,U as sh,t as ht,P as Te,u as Yp,T as Ve,v as xD,w as ID,I as RD,x as s6,y as W3,z as LD,V as kD,A as TD,B as AD,D as IE,F as RE,G as a6,H as Cr,K as tn,J as LE,L as Jc,N as PD,O as MD,Q as ND,X as xv,Y as kE,Z as $D,$ as OD,a0 as jD,a1 as DD,a2 as Iv,a3 as TE,a4 as c6,a5 as FD,a6 as HD,a7 as UD,a8 as BD,a9 as Rv,aa as Lv,ab as cp,ac as z3,ad as AE,ae as VD,af as PE,ag as qD,ah as GD,ai as KD,aj as Yu,ak as WD,al as zD,am as YD,an as XD,ao as ZD,ap as ME,aq as l6,ar as QD,as as JD,at as u6,au as eF,av as tF,aw as NE,ax as nF,ay as rF}from"./components-DuRBtGp8-CgeLxIBe.js";var d6="popstate";function iF(e={}){function t(r,i){let{pathname:o,search:s,hash:a}=r.location;return kv("",{pathname:o,search:s,hash:a},i.state&&i.state.usr||null,i.state&&i.state.key||"default")}function n(r,i){return typeof i=="string"?i:Pd(i)}return sF(t,n,null,e)}function Nt(e,t){if(e===!1||e===null||typeof e>"u")throw new Error(t)}function Ni(e,t){if(!e){typeof console<"u"&&console.warn(t);try{throw new Error(t)}catch{}}}function oF(){return Math.random().toString(36).substring(2,10)}function f6(e,t){return{usr:e.state,key:e.key,idx:t}}function kv(e,t,n=null,r){return{pathname:typeof e=="string"?e:e.pathname,search:"",hash:"",...typeof t=="string"?zl(t):t,state:n,key:t&&t.key||r||oF()}}function Pd({pathname:e="/",search:t="",hash:n=""}){return t&&t!=="?"&&(e+=t.charAt(0)==="?"?t:"?"+t),n&&n!=="#"&&(e+=n.charAt(0)==="#"?n:"#"+n),e}function zl(e){let t={};if(e){let n=e.indexOf("#");n>=0&&(t.hash=e.substring(n),e=e.substring(0,n));let r=e.indexOf("?");r>=0&&(t.search=e.substring(r),e=e.substring(0,r)),e&&(t.pathname=e)}return t}function sF(e,t,n,r={}){let{window:i=document.defaultView,v5Compat:o=!1}=r,s=i.history,a="POP",c=null,l=u();l==null&&(l=0,s.replaceState({...s.state,idx:l},""));function u(){return(s.state||{idx:null}).idx}function d(){a="POP";let _=u(),y=_==null?null:_-l;l=_,c&&c({action:a,location:m.location,delta:y})}function p(_,y){a="PUSH";let w=kv(m.location,_,y);l=u()+1;let S=f6(w,l),b=m.createHref(w);try{s.pushState(S,"",b)}catch(C){if(C instanceof DOMException&&C.name==="DataCloneError")throw C;i.location.assign(b)}o&&c&&c({action:a,location:m.location,delta:1})}function g(_,y){a="REPLACE";let w=kv(m.location,_,y);l=u();let S=f6(w,l),b=m.createHref(w);s.replaceState(S,"",b),o&&c&&c({action:a,location:m.location,delta:0})}function v(_){return aF(_)}let m={get action(){return a},get location(){return e(i,s)},listen(_){if(c)throw new Error("A history only accepts one active listener");return i.addEventListener(d6,d),c=_,()=>{i.removeEventListener(d6,d),c=null}},createHref(_){return t(i,_)},createURL:v,encodeLocation(_){let y=v(_);return{pathname:y.pathname,search:y.search,hash:y.hash}},push:p,replace:g,go(_){return s.go(_)}};return m}function aF(e,t=!1){let n="http://localhost";typeof window<"u"&&(n=window.location.origin!=="null"?window.location.origin:window.location.href),Nt(n,"No window.location.(origin|href) available to create URL");let r=typeof e=="string"?e:Pd(e);return r=r.replace(/ $/,"%20"),!t&&r.startsWith("//")&&(r=n+r),new URL(r,n)}function Y3(e,t,n="/"){return cF(e,t,n,!1)}function cF(e,t,n,r){let i=typeof t=="string"?zl(t):t,o=Wo(i.pathname||"/",n);if(o==null)return null;let s=$E(e);lF(s);let a=null;for(let c=0;a==null&&c<s.length;++c){let l=bF(o);a=yF(s[c],l,r)}return a}function $E(e,t=[],n=[],r="",i=!1){let o=(s,a,c=i,l)=>{let u={relativePath:l===void 0?s.path||"":l,caseSensitive:s.caseSensitive===!0,childrenIndex:a,route:s};if(u.relativePath.startsWith("/")){if(!u.relativePath.startsWith(r)&&c)return;Nt(u.relativePath.startsWith(r),`Absolute route path "${u.relativePath}" nested under path "${r}" is not valid. An absolute child route path must start with the combined path of all its parent routes.`),u.relativePath=u.relativePath.slice(r.length)}let d=jo([r,u.relativePath]),p=n.concat(u);s.children&&s.children.length>0&&(Nt(s.index!==!0,`Index routes must not have child routes. Please remove all child routes from route path "${d}".`),$E(s.children,t,p,d,c)),!(s.path==null&&!s.index)&&t.push({path:d,score:mF(d,s.index),routesMeta:p})};return e.forEach((s,a)=>{if(s.path===""||!s.path?.includes("?"))o(s,a);else for(let c of OE(s.path))o(s,a,!0,c)}),t}function OE(e){let t=e.split("/");if(t.length===0)return[];let[n,...r]=t,i=n.endsWith("?"),o=n.replace(/\?$/,"");if(r.length===0)return i?[o,""]:[o];let s=OE(r.join("/")),a=[];return a.push(...s.map(c=>c===""?o:[o,c].join("/"))),i&&a.push(...s),a.map(c=>e.startsWith("/")&&c===""?"/":c)}function lF(e){e.sort((t,n)=>t.score!==n.score?n.score-t.score:vF(t.routesMeta.map(r=>r.childrenIndex),n.routesMeta.map(r=>r.childrenIndex)))}var uF=/^:[\w-]+$/,dF=3,fF=2,hF=1,pF=10,gF=-2,h6=e=>e==="*";function mF(e,t){let n=e.split("/"),r=n.length;return n.some(h6)&&(r+=gF),t&&(r+=fF),n.filter(i=>!h6(i)).reduce((i,o)=>i+(uF.test(o)?dF:o===""?hF:pF),r)}function vF(e,t){return e.length===t.length&&e.slice(0,-1).every((r,i)=>r===t[i])?e[e.length-1]-t[t.length-1]:0}function yF(e,t,n=!1){let{routesMeta:r}=e,i={},o="/",s=[];for(let a=0;a<r.length;++a){let c=r[a],l=a===r.length-1,u=o==="/"?t:t.slice(o.length)||"/",d=Xp({path:c.relativePath,caseSensitive:c.caseSensitive,end:l},u),p=c.route;if(!d&&l&&n&&!r[r.length-1].route.index&&(d=Xp({path:c.relativePath,caseSensitive:c.caseSensitive,end:!1},u)),!d)return null;Object.assign(i,d.params),s.push({params:i,pathname:jo([o,d.pathname]),pathnameBase:EF(jo([o,d.pathnameBase])),route:p}),d.pathnameBase!=="/"&&(o=jo([o,d.pathnameBase]))}return s}function Xp(e,t){typeof e=="string"&&(e={path:e,caseSensitive:!1,end:!0});let[n,r]=_F(e.path,e.caseSensitive,e.end),i=t.match(n);if(!i)return null;let o=i[0],s=o.replace(/(.)\/+$/,"$1"),a=i.slice(1);return{params:r.reduce((l,{paramName:u,isOptional:d},p)=>{if(u==="*"){let v=a[p]||"";s=o.slice(0,o.length-v.length).replace(/(.)\/+$/,"$1")}const g=a[p];return d&&!g?l[u]=void 0:l[u]=(g||"").replace(/%2F/g,"/"),l},{}),pathname:o,pathnameBase:s,pattern:e}}function _F(e,t=!1,n=!0){Ni(e==="*"||!e.endsWith("*")||e.endsWith("/*"),`Route path "${e}" will be treated as if it were "${e.replace(/\*$/,"/*")}" because the \`*\` character must always follow a \`/\` in the pattern. To get rid of this warning, please change the route path to "${e.replace(/\*$/,"/*")}".`);let r=[],i="^"+e.replace(/\/*\*?$/,"").replace(/^\/*/,"/").replace(/[\\.*+^${}|()[\]]/g,"\\$&").replace(/\/:([\w-]+)(\?)?/g,(s,a,c)=>(r.push({paramName:a,isOptional:c!=null}),c?"/?([^\\/]+)?":"/([^\\/]+)")).replace(/\/([\w-]+)\?(\/|$)/g,"(/$1)?$2");return e.endsWith("*")?(r.push({paramName:"*"}),i+=e==="*"||e==="/*"?"(.*)$":"(?:\\/(.+)|\\/*)$"):n?i+="\\/*$":e!==""&&e!=="/"&&(i+="(?:(?=\\/|$))"),[new RegExp(i,t?void 0:"i"),r]}function bF(e){try{return e.split("/").map(t=>decodeURIComponent(t).replace(/\//g,"%2F")).join("/")}catch(t){return Ni(!1,`The URL path "${e}" could not be decoded because it is a malformed URL segment. This is probably due to a bad percent encoding (${t}).`),e}}function Wo(e,t){if(t==="/")return e;if(!e.toLowerCase().startsWith(t.toLowerCase()))return null;let n=t.endsWith("/")?t.length-1:t.length,r=e.charAt(n);return r&&r!=="/"?null:e.slice(n)||"/"}var jE=/^(?:[a-z][a-z0-9+.-]*:|\/\/)/i,wF=e=>jE.test(e);function SF(e,t="/"){let{pathname:n,search:r="",hash:i=""}=typeof e=="string"?zl(e):e,o;if(n)if(wF(n))o=n;else{if(n.includes("//")){let s=n;n=n.replace(/\/\/+/g,"/"),Ni(!1,`Pathnames cannot have embedded double slashes - normalizing ${s} -> ${n}`)}n.startsWith("/")?o=p6(n.substring(1),"/"):o=p6(n,t)}else o=t;return{pathname:o,search:xF(r),hash:IF(i)}}function p6(e,t){let n=t.replace(/\/+$/,"").split("/");return e.split("/").forEach(i=>{i===".."?n.length>1&&n.pop():i!=="."&&n.push(i)}),n.length>1?n.join("/"):"/"}function r0(e,t,n,r){return`Cannot include a '${e}' character in a manually specified \`to.${t}\` field [${JSON.stringify(r)}].  Please separate it out to the \`to.${n}\` field. Alternatively you may provide the full path as a string in <Link to="..."> and the router will parse it for you.`}function CF(e){return e.filter((t,n)=>n===0||t.route.path&&t.route.path.length>0)}function DE(e){let t=CF(e);return t.map((n,r)=>r===t.length-1?n.pathname:n.pathnameBase)}function FE(e,t,n,r=!1){let i;typeof e=="string"?i=zl(e):(i={...e},Nt(!i.pathname||!i.pathname.includes("?"),r0("?","pathname","search",i)),Nt(!i.pathname||!i.pathname.includes("#"),r0("#","pathname","hash",i)),Nt(!i.search||!i.search.includes("#"),r0("#","search","hash",i)));let o=e===""||i.pathname==="",s=o?"/":i.pathname,a;if(s==null)a=n;else{let d=t.length-1;if(!r&&s.startsWith("..")){let p=s.split("/");for(;p[0]==="..";)p.shift(),d-=1;i.pathname=p.join("/")}a=d>=0?t[d]:"/"}let c=SF(i,a),l=s&&s!=="/"&&s.endsWith("/"),u=(o||s===".")&&n.endsWith("/");return!c.pathname.endsWith("/")&&(l||u)&&(c.pathname+="/"),c}var jo=e=>e.join("/").replace(/\/\/+/g,"/"),EF=e=>e.replace(/\/+$/,"").replace(/^\/*/,"/"),xF=e=>!e||e==="?"?"":e.startsWith("?")?e:"?"+e,IF=e=>!e||e==="#"?"":e.startsWith("#")?e:"#"+e,RF=class{constructor(e,t,n,r=!1){this.status=e,this.statusText=t||"",this.internal=r,n instanceof Error?(this.data=n.toString(),this.error=n):this.data=n}};function LF(e){return e!=null&&typeof e.status=="number"&&typeof e.statusText=="string"&&typeof e.internal=="boolean"&&"data"in e}function kF(e){return e.map(t=>t.route.path).filter(Boolean).join("/").replace(/\/\/*/g,"/")||"/"}var HE=typeof window<"u"&&typeof window.document<"u"&&typeof window.document.createElement<"u";function UE(e,t){let n=e;if(typeof n!="string"||!jE.test(n))return{absoluteURL:void 0,isExternal:!1,to:n};let r=n,i=!1;if(HE)try{let o=new URL(window.location.href),s=n.startsWith("//")?new URL(o.protocol+n):new URL(n),a=Wo(s.pathname,t);s.origin===o.origin&&a!=null?n=a+s.search+s.hash:i=!0}catch{Ni(!1,`<Link to="${n}"> contains an invalid URL which will probably break when clicked - please update to a valid URL path.`)}return{absoluteURL:r,isExternal:i,to:n}}Object.getOwnPropertyNames(Object.prototype).sort().join("\0");var BE=["POST","PUT","PATCH","DELETE"];new Set(BE);var TF=["GET",...BE];new Set(TF);var Yl=f.createContext(null);Yl.displayName="DataRouter";var ug=f.createContext(null);ug.displayName="DataRouterState";var AF=f.createContext(!1),VE=f.createContext({isTransitioning:!1});VE.displayName="ViewTransition";var PF=f.createContext(new Map);PF.displayName="Fetchers";var MF=f.createContext(null);MF.displayName="Await";var pi=f.createContext(null);pi.displayName="Navigation";var Xl=f.createContext(null);Xl.displayName="Location";var ss=f.createContext({outlet:null,matches:[],isDataRoute:!1});ss.displayName="Route";var X3=f.createContext(null);X3.displayName="RouteError";var qE="REACT_ROUTER_ERROR",NF="REDIRECT",$F="ROUTE_ERROR_RESPONSE";function OF(e){if(e.startsWith(`${qE}:${NF}:{`))try{let t=JSON.parse(e.slice(28));if(typeof t=="object"&&t&&typeof t.status=="number"&&typeof t.statusText=="string"&&typeof t.location=="string"&&typeof t.reloadDocument=="boolean"&&typeof t.replace=="boolean")return t}catch{}}function jF(e){if(e.startsWith(`${qE}:${$F}:{`))try{let t=JSON.parse(e.slice(40));if(typeof t=="object"&&t&&typeof t.status=="number"&&typeof t.statusText=="string")return new RF(t.status,t.statusText,t.data)}catch{}}function GE(e,{relative:t}={}){Nt(yf(),"useHref() may be used only in the context of a <Router> component.");let{basename:n,navigator:r}=f.useContext(pi),{hash:i,pathname:o,search:s}=_f(e,{relative:t}),a=o;return n!=="/"&&(a=o==="/"?n:jo([n,o])),r.createHref({pathname:a,search:s,hash:i})}function yf(){return f.useContext(Xl)!=null}function Nn(){return Nt(yf(),"useLocation() may be used only in the context of a <Router> component."),f.useContext(Xl).location}function DF(){return f.useContext(Xl).navigationType}var KE="You should call navigate() in a React.useEffect(), not when your component is first rendered.";function WE(e){f.useContext(pi).static||f.useLayoutEffect(e)}function uo(){let{isDataRoute:e}=f.useContext(ss);return e?ZF():FF()}function FF(){Nt(yf(),"useNavigate() may be used only in the context of a <Router> component.");let e=f.useContext(Yl),{basename:t,navigator:n}=f.useContext(pi),{matches:r}=f.useContext(ss),{pathname:i}=Nn(),o=JSON.stringify(DE(r)),s=f.useRef(!1);return WE(()=>{s.current=!0}),f.useCallback((c,l={})=>{if(Ni(s.current,KE),!s.current)return;if(typeof c=="number"){n.go(c);return}let u=FE(c,JSON.parse(o),i,l.relative==="path");e==null&&t!=="/"&&(u.pathname=u.pathname==="/"?t:jo([t,u.pathname])),(l.replace?n.replace:n.push)(u,l.state,l)},[t,n,o,i,e])}f.createContext(null);function _f(e,{relative:t}={}){let{matches:n}=f.useContext(ss),{pathname:r}=Nn(),i=JSON.stringify(DE(n));return f.useMemo(()=>FE(e,JSON.parse(i),r,t==="path"),[e,i,r,t])}function HF(e,t){return zE(e,t)}function zE(e,t,n,r,i){Nt(yf(),"useRoutes() may be used only in the context of a <Router> component.");let{navigator:o}=f.useContext(pi),{matches:s}=f.useContext(ss),a=s[s.length-1],c=a?a.params:{},l=a?a.pathname:"/",u=a?a.pathnameBase:"/",d=a&&a.route;{let w=d&&d.path||"";XE(l,!d||w.endsWith("*")||w.endsWith("*?"),`You rendered descendant <Routes> (or called \`useRoutes()\`) at "${l}" (under <Route path="${w}">) but the parent route path has no trailing "*". This means if you navigate deeper, the parent won't match anymore and therefore the child routes will never render.

Please change the parent <Route path="${w}"> to <Route path="${w==="/"?"*":`${w}/*`}">.`)}let p=Nn(),g;if(t){let w=typeof t=="string"?zl(t):t;Nt(u==="/"||w.pathname?.startsWith(u),`When overriding the location using \`<Routes location>\` or \`useRoutes(routes, location)\`, the location pathname must begin with the portion of the URL pathname that was matched by all parent routes. The current pathname base is "${u}" but pathname "${w.pathname}" was given in the \`location\` prop.`),g=w}else g=p;let v=g.pathname||"/",m=v;if(u!=="/"){let w=u.replace(/^\//,"").split("/");m="/"+v.replace(/^\//,"").split("/").slice(w.length).join("/")}let _=Y3(e,{pathname:m});Ni(d||_!=null,`No routes matched location "${g.pathname}${g.search}${g.hash}" `),Ni(_==null||_[_.length-1].route.element!==void 0||_[_.length-1].route.Component!==void 0||_[_.length-1].route.lazy!==void 0,`Matched leaf route at location "${g.pathname}${g.search}${g.hash}" does not have an element or Component. This means it will render an <Outlet /> with a null value by default resulting in an "empty" page.`);let y=GF(_&&_.map(w=>Object.assign({},w,{params:Object.assign({},c,w.params),pathname:jo([u,o.encodeLocation?o.encodeLocation(w.pathname.replace(/\?/g,"%3F").replace(/#/g,"%23")).pathname:w.pathname]),pathnameBase:w.pathnameBase==="/"?u:jo([u,o.encodeLocation?o.encodeLocation(w.pathnameBase.replace(/\?/g,"%3F").replace(/#/g,"%23")).pathname:w.pathnameBase])})),s,n,r,i);return t&&y?f.createElement(Xl.Provider,{value:{location:{pathname:"/",search:"",hash:"",state:null,key:"default",...g},navigationType:"POP"}},y):y}function UF(){let e=XF(),t=LF(e)?`${e.status} ${e.statusText}`:e instanceof Error?e.message:JSON.stringify(e),n=e instanceof Error?e.stack:null,r="rgba(200,200,200, 0.5)",i={padding:"0.5rem",backgroundColor:r},o={padding:"2px 4px",backgroundColor:r},s=null;return console.error("Error handled by React Router default ErrorBoundary:",e),s=f.createElement(f.Fragment,null,f.createElement("p",null,"ðŸ’¿ Hey developer ðŸ‘‹"),f.createElement("p",null,"You can provide a way better UX than this when your app throws errors by providing your own ",f.createElement("code",{style:o},"ErrorBoundary")," or"," ",f.createElement("code",{style:o},"errorElement")," prop on your route.")),f.createElement(f.Fragment,null,f.createElement("h2",null,"Unexpected Application Error!"),f.createElement("h3",{style:{fontStyle:"italic"}},t),n?f.createElement("pre",{style:i},n):null,s)}var BF=f.createElement(UF,null),YE=class extends f.Component{constructor(e){super(e),this.state={location:e.location,revalidation:e.revalidation,error:e.error}}static getDerivedStateFromError(e){return{error:e}}static getDerivedStateFromProps(e,t){return t.location!==e.location||t.revalidation!=="idle"&&e.revalidation==="idle"?{error:e.error,location:e.location,revalidation:e.revalidation}:{error:e.error!==void 0?e.error:t.error,location:t.location,revalidation:e.revalidation||t.revalidation}}componentDidCatch(e,t){this.props.onError?this.props.onError(e,t):console.error("React Router caught the following error during render",e)}render(){let e=this.state.error;if(this.context&&typeof e=="object"&&e&&"digest"in e&&typeof e.digest=="string"){const n=jF(e.digest);n&&(e=n)}let t=e!==void 0?f.createElement(ss.Provider,{value:this.props.routeContext},f.createElement(X3.Provider,{value:e,children:this.props.component})):this.props.children;return this.context?f.createElement(VF,{error:e},t):t}};YE.contextType=AF;var i0=new WeakMap;function VF({children:e,error:t}){let{basename:n}=f.useContext(pi);if(typeof t=="object"&&t&&"digest"in t&&typeof t.digest=="string"){let r=OF(t.digest);if(r){let i=i0.get(t);if(i)throw i;let o=UE(r.location,n);if(HE&&!i0.get(t))if(o.isExternal||r.reloadDocument)window.location.href=o.absoluteURL||o.to;else{const s=Promise.resolve().then(()=>window.__reactRouterDataRouter.navigate(o.to,{replace:r.replace}));throw i0.set(t,s),s}return f.createElement("meta",{httpEquiv:"refresh",content:`0;url=${o.absoluteURL||o.to}`})}}return e}function qF({routeContext:e,match:t,children:n}){let r=f.useContext(Yl);return r&&r.static&&r.staticContext&&(t.route.errorElement||t.route.ErrorBoundary)&&(r.staticContext._deepestRenderedBoundaryId=t.route.id),f.createElement(ss.Provider,{value:e},n)}function GF(e,t=[],n=null,r=null,i=null){if(e==null){if(!n)return null;if(n.errors)e=n.matches;else if(t.length===0&&!n.initialized&&n.matches.length>0)e=n.matches;else return null}let o=e,s=n?.errors;if(s!=null){let u=o.findIndex(d=>d.route.id&&s?.[d.route.id]!==void 0);Nt(u>=0,`Could not find a matching route for errors on route IDs: ${Object.keys(s).join(",")}`),o=o.slice(0,Math.min(o.length,u+1))}let a=!1,c=-1;if(n)for(let u=0;u<o.length;u++){let d=o[u];if((d.route.HydrateFallback||d.route.hydrateFallbackElement)&&(c=u),d.route.id){let{loaderData:p,errors:g}=n,v=d.route.loader&&!p.hasOwnProperty(d.route.id)&&(!g||g[d.route.id]===void 0);if(d.route.lazy||v){a=!0,c>=0?o=o.slice(0,c+1):o=[o[0]];break}}}let l=n&&r?(u,d)=>{r(u,{location:n.location,params:n.matches?.[0]?.params??{},unstable_pattern:kF(n.matches),errorInfo:d})}:void 0;return o.reduceRight((u,d,p)=>{let g,v=!1,m=null,_=null;n&&(g=s&&d.route.id?s[d.route.id]:void 0,m=d.route.errorElement||BF,a&&(c<0&&p===0?(XE("route-fallback",!1,"No `HydrateFallback` element provided to render during initial hydration"),v=!0,_=null):c===p&&(v=!0,_=d.route.hydrateFallbackElement||null)));let y=t.concat(o.slice(0,p+1)),w=()=>{let S;return g?S=m:v?S=_:d.route.Component?S=f.createElement(d.route.Component,null):d.route.element?S=d.route.element:S=u,f.createElement(qF,{match:d,routeContext:{outlet:u,matches:y,isDataRoute:n!=null},children:S})};return n&&(d.route.ErrorBoundary||d.route.errorElement||p===0)?f.createElement(YE,{location:n.location,revalidation:n.revalidation,component:m,error:g,children:w(),routeContext:{outlet:null,matches:y,isDataRoute:!0},onError:l}):w()},null)}function Z3(e){return`${e} must be used within a data router.  See https://reactrouter.com/en/main/routers/picking-a-router.`}function KF(e){let t=f.useContext(Yl);return Nt(t,Z3(e)),t}function WF(e){let t=f.useContext(ug);return Nt(t,Z3(e)),t}function zF(e){let t=f.useContext(ss);return Nt(t,Z3(e)),t}function Q3(e){let t=zF(e),n=t.matches[t.matches.length-1];return Nt(n.route.id,`${e} can only be used on routes that contain a unique "id"`),n.route.id}function YF(){return Q3("useRouteId")}function XF(){let e=f.useContext(X3),t=WF("useRouteError"),n=Q3("useRouteError");return e!==void 0?e:t.errors?.[n]}function ZF(){let{router:e}=KF("useNavigate"),t=Q3("useNavigate"),n=f.useRef(!1);return WE(()=>{n.current=!0}),f.useCallback(async(i,o={})=>{Ni(n.current,KE),n.current&&(typeof i=="number"?await e.navigate(i):await e.navigate(i,{fromRouteId:t,...o}))},[e,t])}var g6={};function XE(e,t,n){!t&&!g6[e]&&(g6[e]=!0,Ni(!1,n))}f.memo(QF);function QF({routes:e,future:t,state:n,onError:r}){return zE(e,void 0,n,r,t)}function ZE(e){Nt(!1,"A <Route> is only ever to be used as the child of <Routes> element, never rendered directly. Please wrap your <Route> in a <Routes>.")}function JF({basename:e="/",children:t=null,location:n,navigationType:r="POP",navigator:i,static:o=!1,unstable_useTransitions:s}){Nt(!yf(),"You cannot render a <Router> inside another <Router>. You should never have more than one in your app.");let a=e.replace(/^\/*/,"/"),c=f.useMemo(()=>({basename:a,navigator:i,static:o,unstable_useTransitions:s,future:{}}),[a,i,o,s]);typeof n=="string"&&(n=zl(n));let{pathname:l="/",search:u="",hash:d="",state:p=null,key:g="default"}=n,v=f.useMemo(()=>{let m=Wo(l,a);return m==null?null:{location:{pathname:m,search:u,hash:d,state:p,key:g},navigationType:r}},[a,l,u,d,p,g,r]);return Ni(v!=null,`<Router basename="${a}"> is not able to match the URL "${l}${u}${d}" because it does not start with the basename, so the <Router> won't render anything.`),v==null?null:f.createElement(pi.Provider,{value:c},f.createElement(Xl.Provider,{children:t,value:v}))}function eH({children:e,location:t}){return HF(Zp(e),t)}function Zp(e,t=[]){let n=[];return f.Children.forEach(e,(r,i)=>{if(!f.isValidElement(r))return;let o=[...t,i];if(r.type===f.Fragment){n.push.apply(n,Zp(r.props.children,o));return}Nt(r.type===ZE,`[${typeof r.type=="string"?r.type:r.type.name}] is not a <Route> component. All component children of <Routes> must be a <Route> or <React.Fragment>`),Nt(!r.props.index||!r.props.children,"An index route cannot have child routes.");let s={id:r.props.id||o.join("-"),caseSensitive:r.props.caseSensitive,element:r.props.element,Component:r.props.Component,index:r.props.index,path:r.props.path,middleware:r.props.middleware,loader:r.props.loader,action:r.props.action,hydrateFallbackElement:r.props.hydrateFallbackElement,HydrateFallback:r.props.HydrateFallback,errorElement:r.props.errorElement,ErrorBoundary:r.props.ErrorBoundary,hasErrorBoundary:r.props.hasErrorBoundary===!0||r.props.ErrorBoundary!=null||r.props.errorElement!=null,shouldRevalidate:r.props.shouldRevalidate,handle:r.props.handle,lazy:r.props.lazy};r.props.children&&(s.children=Zp(r.props.children,o)),n.push(s)}),n}var lp="get",up="application/x-www-form-urlencoded";function dg(e){return typeof HTMLElement<"u"&&e instanceof HTMLElement}function tH(e){return dg(e)&&e.tagName.toLowerCase()==="button"}function nH(e){return dg(e)&&e.tagName.toLowerCase()==="form"}function rH(e){return dg(e)&&e.tagName.toLowerCase()==="input"}function iH(e){return!!(e.metaKey||e.altKey||e.ctrlKey||e.shiftKey)}function oH(e,t){return e.button===0&&(!t||t==="_self")&&!iH(e)}var ah=null;function sH(){if(ah===null)try{new FormData(document.createElement("form"),0),ah=!1}catch{ah=!0}return ah}var aH=new Set(["application/x-www-form-urlencoded","multipart/form-data","text/plain"]);function o0(e){return e!=null&&!aH.has(e)?(Ni(!1,`"${e}" is not a valid \`encType\` for \`<Form>\`/\`<fetcher.Form>\` and will default to "${up}"`),null):e}function cH(e,t){let n,r,i,o,s;if(nH(e)){let a=e.getAttribute("action");r=a?Wo(a,t):null,n=e.getAttribute("method")||lp,i=o0(e.getAttribute("enctype"))||up,o=new FormData(e)}else if(tH(e)||rH(e)&&(e.type==="submit"||e.type==="image")){let a=e.form;if(a==null)throw new Error('Cannot submit a <button> or <input type="submit"> without a <form>');let c=e.getAttribute("formaction")||a.getAttribute("action");if(r=c?Wo(c,t):null,n=e.getAttribute("formmethod")||a.getAttribute("method")||lp,i=o0(e.getAttribute("formenctype"))||o0(a.getAttribute("enctype"))||up,o=new FormData(a,e),!sH()){let{name:l,type:u,value:d}=e;if(u==="image"){let p=l?`${l}.`:"";o.append(`${p}x`,"0"),o.append(`${p}y`,"0")}else l&&o.append(l,d)}}else{if(dg(e))throw new Error('Cannot submit element that is not <form>, <button>, or <input type="submit|image">');n=lp,r=null,i=up,s=e}return o&&i==="text/plain"&&(s=o,o=void 0),{action:r,method:n.toLowerCase(),encType:i,formData:o,body:s}}Object.getOwnPropertyNames(Object.prototype).sort().join("\0");function J3(e,t){if(e===!1||e===null||typeof e>"u")throw new Error(t)}function lH(e,t,n){let r=typeof e=="string"?new URL(e,typeof window>"u"?"server://singlefetch/":window.location.origin):e;return r.pathname==="/"?r.pathname=`_root.${n}`:t&&Wo(r.pathname,t)==="/"?r.pathname=`${t.replace(/\/$/,"")}/_root.${n}`:r.pathname=`${r.pathname.replace(/\/$/,"")}.${n}`,r}async function uH(e,t){if(e.id in t)return t[e.id];try{let n=await import(e.module);return t[e.id]=n,n}catch(n){return console.error(`Error loading route module \`${e.module}\`, reloading page...`),console.error(n),window.__reactRouterContext&&window.__reactRouterContext.isSpaMode,window.location.reload(),new Promise(()=>{})}}function dH(e){return e==null?!1:e.href==null?e.rel==="preload"&&typeof e.imageSrcSet=="string"&&typeof e.imageSizes=="string":typeof e.rel=="string"&&typeof e.href=="string"}async function fH(e,t,n){let r=await Promise.all(e.map(async i=>{let o=t.routes[i.route.id];if(o){let s=await uH(o,n);return s.links?s.links():[]}return[]}));return mH(r.flat(1).filter(dH).filter(i=>i.rel==="stylesheet"||i.rel==="preload").map(i=>i.rel==="stylesheet"?{...i,rel:"prefetch",as:"style"}:{...i,rel:"prefetch"}))}function m6(e,t,n,r,i,o){let s=(c,l)=>n[l]?c.route.id!==n[l].route.id:!0,a=(c,l)=>n[l].pathname!==c.pathname||n[l].route.path?.endsWith("*")&&n[l].params["*"]!==c.params["*"];return o==="assets"?t.filter((c,l)=>s(c,l)||a(c,l)):o==="data"?t.filter((c,l)=>{let u=r.routes[c.route.id];if(!u||!u.hasLoader)return!1;if(s(c,l)||a(c,l))return!0;if(c.route.shouldRevalidate){let d=c.route.shouldRevalidate({currentUrl:new URL(i.pathname+i.search+i.hash,window.origin),currentParams:n[0]?.params||{},nextUrl:new URL(e,window.origin),nextParams:c.params,defaultShouldRevalidate:!0});if(typeof d=="boolean")return d}return!0}):[]}function hH(e,t,{includeHydrateFallback:n}={}){return pH(e.map(r=>{let i=t.routes[r.route.id];if(!i)return[];let o=[i.module];return i.clientActionModule&&(o=o.concat(i.clientActionModule)),i.clientLoaderModule&&(o=o.concat(i.clientLoaderModule)),n&&i.hydrateFallbackModule&&(o=o.concat(i.hydrateFallbackModule)),i.imports&&(o=o.concat(i.imports)),o}).flat(1))}function pH(e){return[...new Set(e)]}function gH(e){let t={},n=Object.keys(e).sort();for(let r of n)t[r]=e[r];return t}function mH(e,t){let n=new Set;return new Set(t),e.reduce((r,i)=>{let o=JSON.stringify(gH(i));return n.has(o)||(n.add(o),r.push({key:o,link:i})),r},[])}function QE(){let e=f.useContext(Yl);return J3(e,"You must render this element inside a <DataRouterContext.Provider> element"),e}function vH(){let e=f.useContext(ug);return J3(e,"You must render this element inside a <DataRouterStateContext.Provider> element"),e}var e4=f.createContext(void 0);e4.displayName="FrameworkContext";function JE(){let e=f.useContext(e4);return J3(e,"You must render this element inside a <HydratedRouter> element"),e}function yH(e,t){let n=f.useContext(e4),[r,i]=f.useState(!1),[o,s]=f.useState(!1),{onFocus:a,onBlur:c,onMouseEnter:l,onMouseLeave:u,onTouchStart:d}=t,p=f.useRef(null);f.useEffect(()=>{if(e==="render"&&s(!0),e==="viewport"){let m=y=>{y.forEach(w=>{s(w.isIntersecting)})},_=new IntersectionObserver(m,{threshold:.5});return p.current&&_.observe(p.current),()=>{_.disconnect()}}},[e]),f.useEffect(()=>{if(r){let m=setTimeout(()=>{s(!0)},100);return()=>{clearTimeout(m)}}},[r]);let g=()=>{i(!0)},v=()=>{i(!1),s(!1)};return n?e!=="intent"?[o,p,{}]:[o,p,{onFocus:Eu(a,g),onBlur:Eu(c,v),onMouseEnter:Eu(l,g),onMouseLeave:Eu(u,v),onTouchStart:Eu(d,g)}]:[!1,p,{}]}function Eu(e,t){return n=>{e&&e(n),n.defaultPrevented||t(n)}}function _H({page:e,...t}){let{router:n}=QE(),r=f.useMemo(()=>Y3(n.routes,e,n.basename),[n.routes,e,n.basename]);return r?f.createElement(wH,{page:e,matches:r,...t}):null}function bH(e){let{manifest:t,routeModules:n}=JE(),[r,i]=f.useState([]);return f.useEffect(()=>{let o=!1;return fH(e,t,n).then(s=>{o||i(s)}),()=>{o=!0}},[e,t,n]),r}function wH({page:e,matches:t,...n}){let r=Nn(),{manifest:i,routeModules:o}=JE(),{basename:s}=QE(),{loaderData:a,matches:c}=vH(),l=f.useMemo(()=>m6(e,t,c,i,r,"data"),[e,t,c,i,r]),u=f.useMemo(()=>m6(e,t,c,i,r,"assets"),[e,t,c,i,r]),d=f.useMemo(()=>{if(e===r.pathname+r.search+r.hash)return[];let v=new Set,m=!1;if(t.forEach(y=>{let w=i.routes[y.route.id];!w||!w.hasLoader||(!l.some(S=>S.route.id===y.route.id)&&y.route.id in a&&o[y.route.id]?.shouldRevalidate||w.hasClientLoader?m=!0:v.add(y.route.id))}),v.size===0)return[];let _=lH(e,s,"data");return m&&v.size>0&&_.searchParams.set("_routes",t.filter(y=>v.has(y.route.id)).map(y=>y.route.id).join(",")),[_.pathname+_.search]},[s,a,r,i,l,t,e,o]),p=f.useMemo(()=>hH(u,i),[u,i]),g=bH(u);return f.createElement(f.Fragment,null,d.map(v=>f.createElement("link",{key:v,rel:"prefetch",as:"fetch",href:v,...n})),p.map(v=>f.createElement("link",{key:v,rel:"modulepreload",href:v,...n})),g.map(({key:v,link:m})=>f.createElement("link",{key:v,nonce:n.nonce,...m})))}function SH(...e){return t=>{e.forEach(n=>{typeof n=="function"?n(t):n!=null&&(n.current=t)})}}var CH=typeof window<"u"&&typeof window.document<"u"&&typeof window.document.createElement<"u";try{CH&&(window.__reactRouterVersion="7.11.0")}catch{}function EH({basename:e,children:t,unstable_useTransitions:n,window:r}){let i=f.useRef();i.current==null&&(i.current=iF({window:r,v5Compat:!0}));let o=i.current,[s,a]=f.useState({action:o.action,location:o.location}),c=f.useCallback(l=>{n===!1?a(l):f.startTransition(()=>a(l))},[n]);return f.useLayoutEffect(()=>o.listen(c),[o,c]),f.createElement(JF,{basename:e,children:t,location:s.location,navigationType:s.action,navigator:o,unstable_useTransitions:n})}var ex=/^(?:[a-z][a-z0-9+.-]*:|\/\/)/i,fg=f.forwardRef(function({onClick:t,discover:n="render",prefetch:r="none",relative:i,reloadDocument:o,replace:s,state:a,target:c,to:l,preventScrollReset:u,viewTransition:d,unstable_defaultShouldRevalidate:p,...g},v){let{basename:m,unstable_useTransitions:_}=f.useContext(pi),y=typeof l=="string"&&ex.test(l),w=UE(l,m);l=w.to;let S=GE(l,{relative:i}),[b,C,E]=yH(r,g),x=nx(l,{replace:s,state:a,target:c,preventScrollReset:u,relative:i,viewTransition:d,unstable_defaultShouldRevalidate:p,unstable_useTransitions:_});function I(R){t&&t(R),R.defaultPrevented||x(R)}let L=f.createElement("a",{...g,...E,href:w.absoluteURL||S,onClick:w.isExternal||o?t:I,ref:SH(v,C),target:c,"data-discover":!y&&n==="render"?"true":void 0});return b&&!y?f.createElement(f.Fragment,null,L,f.createElement(_H,{page:S})):L});fg.displayName="Link";var xH=f.forwardRef(function({"aria-current":t="page",caseSensitive:n=!1,className:r="",end:i=!1,style:o,to:s,viewTransition:a,children:c,...l},u){let d=_f(s,{relative:l.relative}),p=Nn(),g=f.useContext(ug),{navigator:v,basename:m}=f.useContext(pi),_=g!=null&&PH(d)&&a===!0,y=v.encodeLocation?v.encodeLocation(d).pathname:d.pathname,w=p.pathname,S=g&&g.navigation&&g.navigation.location?g.navigation.location.pathname:null;n||(w=w.toLowerCase(),S=S?S.toLowerCase():null,y=y.toLowerCase()),S&&m&&(S=Wo(S,m)||S);const b=y!=="/"&&y.endsWith("/")?y.length-1:y.length;let C=w===y||!i&&w.startsWith(y)&&w.charAt(b)==="/",E=S!=null&&(S===y||!i&&S.startsWith(y)&&S.charAt(y.length)==="/"),x={isActive:C,isPending:E,isTransitioning:_},I=C?t:void 0,L;typeof r=="function"?L=r(x):L=[r,C?"active":null,E?"pending":null,_?"transitioning":null].filter(Boolean).join(" ");let R=typeof o=="function"?o(x):o;return f.createElement(fg,{...l,"aria-current":I,className:L,ref:u,style:R,to:s,viewTransition:a},typeof c=="function"?c(x):c)});xH.displayName="NavLink";var IH=f.forwardRef(({discover:e="render",fetcherKey:t,navigate:n,reloadDocument:r,replace:i,state:o,method:s=lp,action:a,onSubmit:c,relative:l,preventScrollReset:u,viewTransition:d,unstable_defaultShouldRevalidate:p,...g},v)=>{let{unstable_useTransitions:m}=f.useContext(pi),_=TH(),y=AH(a,{relative:l}),w=s.toLowerCase()==="get"?"get":"post",S=typeof a=="string"&&ex.test(a),b=C=>{if(c&&c(C),C.defaultPrevented)return;C.preventDefault();let E=C.nativeEvent.submitter,x=E?.getAttribute("formmethod")||s,I=()=>_(E||C.currentTarget,{fetcherKey:t,method:x,navigate:n,replace:i,state:o,relative:l,preventScrollReset:u,viewTransition:d,unstable_defaultShouldRevalidate:p});m&&n!==!1?f.startTransition(()=>I()):I()};return f.createElement("form",{ref:v,method:w,action:y,onSubmit:r?c:b,...g,"data-discover":!S&&e==="render"?"true":void 0})});IH.displayName="Form";function RH(e){return`${e} must be used within a data router.  See https://reactrouter.com/en/main/routers/picking-a-router.`}function tx(e){let t=f.useContext(Yl);return Nt(t,RH(e)),t}function nx(e,{target:t,replace:n,state:r,preventScrollReset:i,relative:o,viewTransition:s,unstable_defaultShouldRevalidate:a,unstable_useTransitions:c}={}){let l=uo(),u=Nn(),d=_f(e,{relative:o});return f.useCallback(p=>{if(oH(p,t)){p.preventDefault();let g=n!==void 0?n:Pd(u)===Pd(d),v=()=>l(e,{replace:g,state:r,preventScrollReset:i,relative:o,viewTransition:s,unstable_defaultShouldRevalidate:a});c?f.startTransition(()=>v()):v()}},[u,l,d,n,r,t,e,i,o,s,a,c])}var LH=0,kH=()=>`__${String(++LH)}__`;function TH(){let{router:e}=tx("useSubmit"),{basename:t}=f.useContext(pi),n=YF(),r=e.fetch,i=e.navigate;return f.useCallback(async(o,s={})=>{let{action:a,method:c,encType:l,formData:u,body:d}=cH(o,t);if(s.navigate===!1){let p=s.fetcherKey||kH();await r(p,n,s.action||a,{unstable_defaultShouldRevalidate:s.unstable_defaultShouldRevalidate,preventScrollReset:s.preventScrollReset,formData:u,body:d,formMethod:s.method||c,formEncType:s.encType||l,flushSync:s.flushSync})}else await i(s.action||a,{unstable_defaultShouldRevalidate:s.unstable_defaultShouldRevalidate,preventScrollReset:s.preventScrollReset,formData:u,body:d,formMethod:s.method||c,formEncType:s.encType||l,replace:s.replace,state:s.state,fromRouteId:n,flushSync:s.flushSync,viewTransition:s.viewTransition})},[r,i,t,n])}function AH(e,{relative:t}={}){let{basename:n}=f.useContext(pi),r=f.useContext(ss);Nt(r,"useFormAction must be used inside a RouteContext");let[i]=r.matches.slice(-1),o={..._f(e||".",{relative:t})},s=Nn();if(e==null){o.search=s.search;let a=new URLSearchParams(o.search),c=a.getAll("index");if(c.some(u=>u==="")){a.delete("index"),c.filter(d=>d).forEach(d=>a.append("index",d));let u=a.toString();o.search=u?`?${u}`:""}}return(!e||e===".")&&i.route.index&&(o.search=o.search?o.search.replace(/^\?/,"?index&"):"?index"),n!=="/"&&(o.pathname=o.pathname==="/"?n:jo([n,o.pathname])),Pd(o)}function PH(e,{relative:t}={}){let n=f.useContext(VE);Nt(n!=null,"`useViewTransitionState` must be used within `react-router-dom`'s `RouterProvider`.  Did you accidentally import `RouterProvider` from `react-router`?");let{basename:r}=tx("useViewTransitionState"),i=_f(e,{relative:t});if(!n.isTransitioning)return!1;let o=Wo(n.currentLocation.pathname,r)||n.currentLocation.pathname,s=Wo(n.nextLocation.pathname,r)||n.nextLocation.pathname;return Xp(i.pathname,s)!=null||Xp(i.pathname,o)!=null}var Ya=_D();const rx=Gl(Ya),Ne=typeof __SENTRY_DEBUG__>"u"||__SENTRY_DEBUG__,Ea="8.55.0",Xe=globalThis;function hg(e,t,n){const r=n||Xe,i=r.__SENTRY__=r.__SENTRY__||{},o=i[Ea]=i[Ea]||{};return o[e]||(o[e]=t())}const Js=typeof __SENTRY_DEBUG__>"u"||__SENTRY_DEBUG__,MH="Sentry Logger ",Tv=["debug","info","warn","error","log","assert","trace"],Qp={};function Xa(e){if(!("console"in Xe))return e();const t=Xe.console,n={},r=Object.keys(Qp);r.forEach(i=>{const o=Qp[i];n[i]=t[i],t[i]=o});try{return e()}finally{r.forEach(i=>{t[i]=n[i]})}}function NH(){let e=!1;const t={enable:()=>{e=!0},disable:()=>{e=!1},isEnabled:()=>e};return Js?Tv.forEach(n=>{t[n]=(...r)=>{e&&Xa(()=>{Xe.console[n](`${MH}[${n}]:`,...r)})}}):Tv.forEach(n=>{t[n]=()=>{}}),t}const Q=hg("logger",NH),ix=50,Ma="?",v6=/\(error: (.*)\)/,y6=/captureMessage|captureException/;function ox(...e){const t=e.sort((n,r)=>n[0]-r[0]).map(n=>n[1]);return(n,r=0,i=0)=>{const o=[],s=n.split(`
`);for(let a=r;a<s.length;a++){const c=s[a];if(c.length>1024)continue;const l=v6.test(c)?c.replace(v6,"$1"):c;if(!l.match(/\S*Error: /)){for(const u of t){const d=u(l);if(d){o.push(d);break}}if(o.length>=ix+i)break}}return OH(o.slice(i))}}function $H(e){return Array.isArray(e)?ox(...e):e}function OH(e){if(!e.length)return[];const t=Array.from(e);return/sentryWrapped/.test(ch(t).function||"")&&t.pop(),t.reverse(),y6.test(ch(t).function||"")&&(t.pop(),y6.test(ch(t).function||"")&&t.pop()),t.slice(0,ix).map(n=>({...n,filename:n.filename||ch(t).filename,function:n.function||Ma}))}function ch(e){return e[e.length-1]||{}}const s0="<anonymous>";function zo(e){try{return!e||typeof e!="function"?s0:e.name||s0}catch{return s0}}function _6(e){const t=e.exception;if(t){const n=[];try{return t.values.forEach(r=>{r.stacktrace.frames&&n.push(...r.stacktrace.frames)}),n}catch{return}}}const dp={},b6={};function ea(e,t){dp[e]=dp[e]||[],dp[e].push(t)}function ta(e,t){if(!b6[e]){b6[e]=!0;try{t()}catch(n){Js&&Q.error(`Error while instrumenting ${e}`,n)}}}function ti(e,t){const n=e&&dp[e];if(n)for(const r of n)try{r(t)}catch(i){Js&&Q.error(`Error while triggering instrumentation handler.
Type: ${e}
Name: ${zo(r)}
Error:`,i)}}let a0=null;function sx(e){const t="error";ea(t,e),ta(t,jH)}function jH(){a0=Xe.onerror,Xe.onerror=function(e,t,n,r,i){return ti("error",{column:r,error:i,line:n,msg:e,url:t}),a0?a0.apply(this,arguments):!1},Xe.onerror.__SENTRY_INSTRUMENTED__=!0}let c0=null;function ax(e){const t="unhandledrejection";ea(t,e),ta(t,DH)}function DH(){c0=Xe.onunhandledrejection,Xe.onunhandledrejection=function(e){return ti("unhandledrejection",e),c0?c0.apply(this,arguments):!0},Xe.onunhandledrejection.__SENTRY_INSTRUMENTED__=!0}function Za(){return t4(Xe),Xe}function t4(e){const t=e.__SENTRY__=e.__SENTRY__||{};return t.version=t.version||Ea,t[Ea]=t[Ea]||{}}const cx=Object.prototype.toString;function pg(e){switch(cx.call(e)){case"[object Error]":case"[object Exception]":case"[object DOMException]":case"[object WebAssembly.Exception]":return!0;default:return Yo(e,Error)}}function Zl(e,t){return cx.call(e)===`[object ${t}]`}function lx(e){return Zl(e,"ErrorEvent")}function w6(e){return Zl(e,"DOMError")}function FH(e){return Zl(e,"DOMException")}function Do(e){return Zl(e,"String")}function n4(e){return typeof e=="object"&&e!==null&&"__sentry_template_string__"in e&&"__sentry_template_values__"in e}function r4(e){return e===null||n4(e)||typeof e!="object"&&typeof e!="function"}function vl(e){return Zl(e,"Object")}function gg(e){return typeof Event<"u"&&Yo(e,Event)}function HH(e){return typeof Element<"u"&&Yo(e,Element)}function UH(e){return Zl(e,"RegExp")}function mg(e){return!!(e&&e.then&&typeof e.then=="function")}function BH(e){return vl(e)&&"nativeEvent"in e&&"preventDefault"in e&&"stopPropagation"in e}function Yo(e,t){try{return e instanceof t}catch{return!1}}function ux(e){return!!(typeof e=="object"&&e!==null&&(e.__isVue||e._isVue))}const el=Xe,VH=80;function Na(e,t={}){if(!e)return"<unknown>";try{let n=e;const r=5,i=[];let o=0,s=0;const a=" > ",c=a.length;let l;const u=Array.isArray(t)?t:t.keyAttrs,d=!Array.isArray(t)&&t.maxStringLength||VH;for(;n&&o++<r&&(l=qH(n,u),!(l==="html"||o>1&&s+i.length*c+l.length>=d));)i.push(l),s+=l.length,n=n.parentNode;return i.reverse().join(a)}catch{return"<unknown>"}}function qH(e,t){const n=e,r=[];if(!n||!n.tagName)return"";if(el.HTMLElement&&n instanceof HTMLElement&&n.dataset){if(n.dataset.sentryComponent)return n.dataset.sentryComponent;if(n.dataset.sentryElement)return n.dataset.sentryElement}r.push(n.tagName.toLowerCase());const i=t&&t.length?t.filter(s=>n.getAttribute(s)).map(s=>[s,n.getAttribute(s)]):null;if(i&&i.length)i.forEach(s=>{r.push(`[${s[0]}="${s[1]}"]`)});else{n.id&&r.push(`#${n.id}`);const s=n.className;if(s&&Do(s)){const a=s.split(/\s+/);for(const c of a)r.push(`.${c}`)}}const o=["aria-label","type","name","title","alt"];for(const s of o){const a=n.getAttribute(s);a&&r.push(`[${s}="${a}"]`)}return r.join("")}function GH(){try{return el.document.location.href}catch{return""}}function KH(e){return el.document&&el.document.querySelector?el.document.querySelector(e):null}function dx(e){if(!el.HTMLElement)return null;let t=e;const n=5;for(let r=0;r<n;r++){if(!t)return null;if(t instanceof HTMLElement){if(t.dataset.sentryComponent)return t.dataset.sentryComponent;if(t.dataset.sentryElement)return t.dataset.sentryElement}t=t.parentNode}return null}function tl(e,t=0){return typeof e!="string"||t===0||e.length<=t?e:`${e.slice(0,t)}...`}function S6(e,t){if(!Array.isArray(e))return"";const n=[];for(let r=0;r<e.length;r++){const i=e[r];try{ux(i)?n.push("[VueViewModel]"):n.push(String(i))}catch{n.push("[value cannot be serialized]")}}return n.join(t)}function WH(e,t,n=!1){return Do(e)?UH(t)?t.test(e):Do(t)?n?e===t:e.includes(t):!1:!1}function xa(e,t=[],n=!1){return t.some(r=>WH(e,r,n))}function xr(e,t,n){if(!(t in e))return;const r=e[t],i=n(r);typeof i=="function"&&fx(i,r);try{e[t]=i}catch{Js&&Q.log(`Failed to replace method "${t}" in object`,e)}}function ci(e,t,n){try{Object.defineProperty(e,t,{value:n,writable:!0,configurable:!0})}catch{Js&&Q.log(`Failed to add non-enumerable property "${t}" to object`,e)}}function fx(e,t){try{const n=t.prototype||{};e.prototype=t.prototype=n,ci(e,"__sentry_original__",t)}catch{}}function i4(e){return e.__sentry_original__}function hx(e){if(pg(e))return{message:e.message,name:e.name,stack:e.stack,...E6(e)};if(gg(e)){const t={type:e.type,target:C6(e.target),currentTarget:C6(e.currentTarget),...E6(e)};return typeof CustomEvent<"u"&&Yo(e,CustomEvent)&&(t.detail=e.detail),t}else return e}function C6(e){try{return HH(e)?Na(e):Object.prototype.toString.call(e)}catch{return"<unknown>"}}function E6(e){if(typeof e=="object"&&e!==null){const t={};for(const n in e)Object.prototype.hasOwnProperty.call(e,n)&&(t[n]=e[n]);return t}else return{}}function zH(e,t=40){const n=Object.keys(hx(e));n.sort();const r=n[0];if(!r)return"[object has no keys]";if(r.length>=t)return tl(r,t);for(let i=n.length;i>0;i--){const o=n.slice(0,i).join(", ");if(!(o.length>t))return i===n.length?o:tl(o,t)}return""}function En(e){return Av(e,new Map)}function Av(e,t){if(YH(e)){const n=t.get(e);if(n!==void 0)return n;const r={};t.set(e,r);for(const i of Object.getOwnPropertyNames(e))typeof e[i]<"u"&&(r[i]=Av(e[i],t));return r}if(Array.isArray(e)){const n=t.get(e);if(n!==void 0)return n;const r=[];return t.set(e,r),e.forEach(i=>{r.push(Av(i,t))}),r}return e}function YH(e){if(!vl(e))return!1;try{const t=Object.getPrototypeOf(e).constructor.name;return!t||t==="Object"}catch{return!0}}const px=1e3;function bf(){return Date.now()/px}function XH(){const{performance:e}=Xe;if(!e||!e.now)return bf;const t=Date.now()-e.now(),n=e.timeOrigin==null?t:e.timeOrigin;return()=>(n+e.now())/px}const Bn=XH(),hr=(()=>{const{performance:e}=Xe;if(!e||!e.now)return;const t=3600*1e3,n=e.now(),r=Date.now(),i=e.timeOrigin?Math.abs(e.timeOrigin+n-r):t,o=i<t,s=e.timing&&e.timing.navigationStart,c=typeof s=="number"?Math.abs(s+n-r):t,l=c<t;return o||l?i<=c?e.timeOrigin:s:r})();function ni(){const e=Xe,t=e.crypto||e.msCrypto;let n=()=>Math.random()*16;try{if(t&&t.randomUUID)return t.randomUUID().replace(/-/g,"");t&&t.getRandomValues&&(n=()=>{const r=new Uint8Array(1);return t.getRandomValues(r),r[0]})}catch{}return("10000000100040008000"+1e11).replace(/[018]/g,r=>(r^(n()&15)>>r/4).toString(16))}function gx(e){return e.exception&&e.exception.values?e.exception.values[0]:void 0}function ws(e){const{message:t,event_id:n}=e;if(t)return t;const r=gx(e);return r?r.type&&r.value?`${r.type}: ${r.value}`:r.type||r.value||n||"<unknown>":n||"<unknown>"}function Pv(e,t,n){const r=e.exception=e.exception||{},i=r.values=r.values||[],o=i[0]=i[0]||{};o.value||(o.value=t||""),o.type||(o.type="Error")}function yl(e,t){const n=gx(e);if(!n)return;const r={type:"generic",handled:!0},i=n.mechanism;if(n.mechanism={...r,...i,...t},t&&"data"in t){const o={...i&&i.data,...t.data};n.mechanism.data=o}}function x6(e){if(ZH(e))return!0;try{ci(e,"__sentry_captured__",!0)}catch{}return!1}function ZH(e){try{return e.__sentry_captured__}catch{}}var Eo;(function(e){e[e.PENDING=0]="PENDING";const n=1;e[e.RESOLVED=n]="RESOLVED";const r=2;e[e.REJECTED=r]="REJECTED"})(Eo||(Eo={}));function $a(e){return new Vr(t=>{t(e)})}function Jp(e){return new Vr((t,n)=>{n(e)})}class Vr{constructor(t){Vr.prototype.__init.call(this),Vr.prototype.__init2.call(this),Vr.prototype.__init3.call(this),Vr.prototype.__init4.call(this),this._state=Eo.PENDING,this._handlers=[];try{t(this._resolve,this._reject)}catch(n){this._reject(n)}}then(t,n){return new Vr((r,i)=>{this._handlers.push([!1,o=>{if(!t)r(o);else try{r(t(o))}catch(s){i(s)}},o=>{if(!n)i(o);else try{r(n(o))}catch(s){i(s)}}]),this._executeHandlers()})}catch(t){return this.then(n=>n,t)}finally(t){return new Vr((n,r)=>{let i,o;return this.then(s=>{o=!1,i=s,t&&t()},s=>{o=!0,i=s,t&&t()}).then(()=>{if(o){r(i);return}n(i)})})}__init(){this._resolve=t=>{this._setResult(Eo.RESOLVED,t)}}__init2(){this._reject=t=>{this._setResult(Eo.REJECTED,t)}}__init3(){this._setResult=(t,n)=>{if(this._state===Eo.PENDING){if(mg(n)){n.then(this._resolve,this._reject);return}this._state=t,this._value=n,this._executeHandlers()}}}__init4(){this._executeHandlers=()=>{if(this._state===Eo.PENDING)return;const t=this._handlers.slice();this._handlers=[],t.forEach(n=>{n[0]||(this._state===Eo.RESOLVED&&n[1](this._value),this._state===Eo.REJECTED&&n[2](this._value),n[0]=!0)})}}}function QH(e){const t=Bn(),n={sid:ni(),init:!0,timestamp:t,started:t,duration:0,status:"ok",errors:0,ignoreDuration:!1,toJSON:()=>eU(n)};return e&&_l(n,e),n}function _l(e,t={}){if(t.user&&(!e.ipAddress&&t.user.ip_address&&(e.ipAddress=t.user.ip_address),!e.did&&!t.did&&(e.did=t.user.id||t.user.email||t.user.username)),e.timestamp=t.timestamp||Bn(),t.abnormal_mechanism&&(e.abnormal_mechanism=t.abnormal_mechanism),t.ignoreDuration&&(e.ignoreDuration=t.ignoreDuration),t.sid&&(e.sid=t.sid.length===32?t.sid:ni()),t.init!==void 0&&(e.init=t.init),!e.did&&t.did&&(e.did=`${t.did}`),typeof t.started=="number"&&(e.started=t.started),e.ignoreDuration)e.duration=void 0;else if(typeof t.duration=="number")e.duration=t.duration;else{const n=e.timestamp-e.started;e.duration=n>=0?n:0}t.release&&(e.release=t.release),t.environment&&(e.environment=t.environment),!e.ipAddress&&t.ipAddress&&(e.ipAddress=t.ipAddress),!e.userAgent&&t.userAgent&&(e.userAgent=t.userAgent),typeof t.errors=="number"&&(e.errors=t.errors),t.status&&(e.status=t.status)}function JH(e,t){let n={};e.status==="ok"&&(n={status:"exited"}),_l(e,n)}function eU(e){return En({sid:`${e.sid}`,init:e.init,started:new Date(e.started*1e3).toISOString(),timestamp:new Date(e.timestamp*1e3).toISOString(),status:e.status,errors:e.errors,did:typeof e.did=="number"||typeof e.did=="string"?`${e.did}`:void 0,duration:e.duration,abnormal_mechanism:e.abnormal_mechanism,attrs:{release:e.release,environment:e.environment,ip_address:e.ipAddress,user_agent:e.userAgent}})}function Bs(){return ni()}function Vs(){return ni().substring(16)}function vg(e,t,n=2){if(!t||typeof t!="object"||n<=0)return t;if(e&&t&&Object.keys(t).length===0)return e;const r={...e};for(const i in t)Object.prototype.hasOwnProperty.call(t,i)&&(r[i]=vg(r[i],t[i],n-1));return r}const Mv="_sentrySpan";function Md(e,t){t?ci(e,Mv,t):delete e[Mv]}function e1(e){return e[Mv]}const tU=100;class o4{constructor(){this._notifyingListeners=!1,this._scopeListeners=[],this._eventProcessors=[],this._breadcrumbs=[],this._attachments=[],this._user={},this._tags={},this._extra={},this._contexts={},this._sdkProcessingMetadata={},this._propagationContext={traceId:Bs(),spanId:Vs()}}clone(){const t=new o4;return t._breadcrumbs=[...this._breadcrumbs],t._tags={...this._tags},t._extra={...this._extra},t._contexts={...this._contexts},this._contexts.flags&&(t._contexts.flags={values:[...this._contexts.flags.values]}),t._user=this._user,t._level=this._level,t._session=this._session,t._transactionName=this._transactionName,t._fingerprint=this._fingerprint,t._eventProcessors=[...this._eventProcessors],t._requestSession=this._requestSession,t._attachments=[...this._attachments],t._sdkProcessingMetadata={...this._sdkProcessingMetadata},t._propagationContext={...this._propagationContext},t._client=this._client,t._lastEventId=this._lastEventId,Md(t,e1(this)),t}setClient(t){this._client=t}setLastEventId(t){this._lastEventId=t}getClient(){return this._client}lastEventId(){return this._lastEventId}addScopeListener(t){this._scopeListeners.push(t)}addEventProcessor(t){return this._eventProcessors.push(t),this}setUser(t){return this._user=t||{email:void 0,id:void 0,ip_address:void 0,username:void 0},this._session&&_l(this._session,{user:t}),this._notifyScopeListeners(),this}getUser(){return this._user}getRequestSession(){return this._requestSession}setRequestSession(t){return this._requestSession=t,this}setTags(t){return this._tags={...this._tags,...t},this._notifyScopeListeners(),this}setTag(t,n){return this._tags={...this._tags,[t]:n},this._notifyScopeListeners(),this}setExtras(t){return this._extra={...this._extra,...t},this._notifyScopeListeners(),this}setExtra(t,n){return this._extra={...this._extra,[t]:n},this._notifyScopeListeners(),this}setFingerprint(t){return this._fingerprint=t,this._notifyScopeListeners(),this}setLevel(t){return this._level=t,this._notifyScopeListeners(),this}setTransactionName(t){return this._transactionName=t,this._notifyScopeListeners(),this}setContext(t,n){return n===null?delete this._contexts[t]:this._contexts[t]=n,this._notifyScopeListeners(),this}setSession(t){return t?this._session=t:delete this._session,this._notifyScopeListeners(),this}getSession(){return this._session}update(t){if(!t)return this;const n=typeof t=="function"?t(this):t,[r,i]=n instanceof qs?[n.getScopeData(),n.getRequestSession()]:vl(n)?[t,t.requestSession]:[],{tags:o,extra:s,user:a,contexts:c,level:l,fingerprint:u=[],propagationContext:d}=r||{};return this._tags={...this._tags,...o},this._extra={...this._extra,...s},this._contexts={...this._contexts,...c},a&&Object.keys(a).length&&(this._user=a),l&&(this._level=l),u.length&&(this._fingerprint=u),d&&(this._propagationContext=d),i&&(this._requestSession=i),this}clear(){return this._breadcrumbs=[],this._tags={},this._extra={},this._user={},this._contexts={},this._level=void 0,this._transactionName=void 0,this._fingerprint=void 0,this._requestSession=void 0,this._session=void 0,Md(this,void 0),this._attachments=[],this.setPropagationContext({traceId:Bs()}),this._notifyScopeListeners(),this}addBreadcrumb(t,n){const r=typeof n=="number"?n:tU;if(r<=0)return this;const i={timestamp:bf(),...t};return this._breadcrumbs.push(i),this._breadcrumbs.length>r&&(this._breadcrumbs=this._breadcrumbs.slice(-r),this._client&&this._client.recordDroppedEvent("buffer_overflow","log_item")),this._notifyScopeListeners(),this}getLastBreadcrumb(){return this._breadcrumbs[this._breadcrumbs.length-1]}clearBreadcrumbs(){return this._breadcrumbs=[],this._notifyScopeListeners(),this}addAttachment(t){return this._attachments.push(t),this}clearAttachments(){return this._attachments=[],this}getScopeData(){return{breadcrumbs:this._breadcrumbs,attachments:this._attachments,contexts:this._contexts,tags:this._tags,extra:this._extra,user:this._user,level:this._level,fingerprint:this._fingerprint||[],eventProcessors:this._eventProcessors,propagationContext:this._propagationContext,sdkProcessingMetadata:this._sdkProcessingMetadata,transactionName:this._transactionName,span:e1(this)}}setSDKProcessingMetadata(t){return this._sdkProcessingMetadata=vg(this._sdkProcessingMetadata,t,2),this}setPropagationContext(t){return this._propagationContext={spanId:Vs(),...t},this}getPropagationContext(){return this._propagationContext}captureException(t,n){const r=n&&n.event_id?n.event_id:ni();if(!this._client)return Q.warn("No client configured on scope - will not capture exception!"),r;const i=new Error("Sentry syntheticException");return this._client.captureException(t,{originalException:t,syntheticException:i,...n,event_id:r},this),r}captureMessage(t,n,r){const i=r&&r.event_id?r.event_id:ni();if(!this._client)return Q.warn("No client configured on scope - will not capture message!"),i;const o=new Error(t);return this._client.captureMessage(t,n,{originalException:t,syntheticException:o,...r,event_id:i},this),i}captureEvent(t,n){const r=n&&n.event_id?n.event_id:ni();return this._client?(this._client.captureEvent(t,{...n,event_id:r},this),r):(Q.warn("No client configured on scope - will not capture event!"),r)}_notifyScopeListeners(){this._notifyingListeners||(this._notifyingListeners=!0,this._scopeListeners.forEach(t=>{t(this)}),this._notifyingListeners=!1)}}const qs=o4;function nU(){return hg("defaultCurrentScope",()=>new qs)}function rU(){return hg("defaultIsolationScope",()=>new qs)}class iU{constructor(t,n){let r;t?r=t:r=new qs;let i;n?i=n:i=new qs,this._stack=[{scope:r}],this._isolationScope=i}withScope(t){const n=this._pushScope();let r;try{r=t(n)}catch(i){throw this._popScope(),i}return mg(r)?r.then(i=>(this._popScope(),i),i=>{throw this._popScope(),i}):(this._popScope(),r)}getClient(){return this.getStackTop().client}getScope(){return this.getStackTop().scope}getIsolationScope(){return this._isolationScope}getStackTop(){return this._stack[this._stack.length-1]}_pushScope(){const t=this.getScope().clone();return this._stack.push({client:this.getClient(),scope:t}),t}_popScope(){return this._stack.length<=1?!1:!!this._stack.pop()}}function bl(){const e=Za(),t=t4(e);return t.stack=t.stack||new iU(nU(),rU())}function oU(e){return bl().withScope(e)}function sU(e,t){const n=bl();return n.withScope(()=>(n.getStackTop().scope=e,t(e)))}function I6(e){return bl().withScope(()=>e(bl().getIsolationScope()))}function aU(){return{withIsolationScope:I6,withScope:oU,withSetScope:sU,withSetIsolationScope:(e,t)=>I6(t),getCurrentScope:()=>bl().getScope(),getIsolationScope:()=>bl().getIsolationScope()}}function Ql(e){const t=t4(e);return t.acs?t.acs:aU()}function yt(){const e=Za();return Ql(e).getCurrentScope()}function fo(){const e=Za();return Ql(e).getIsolationScope()}function cU(){return hg("globalScope",()=>new qs)}function yg(...e){const t=Za(),n=Ql(t);if(e.length===2){const[r,i]=e;return r?n.withSetScope(r,i):n.withScope(i)}return n.withScope(e[0])}function tt(){return yt().getClient()}function lU(e){const t=e.getPropagationContext(),{traceId:n,spanId:r,parentSpanId:i}=t;return En({trace_id:n,span_id:r,parent_span_id:i})}const uU="_sentryMetrics";function Nv(e){const t=e[uU];if(!t)return;const n={};for(const[,[r,i]]of t)(n[r]||(n[r]=[])).push(En(i));return n}const Xr="sentry.source",mx="sentry.sample_rate",Xo="sentry.op",Qt="sentry.origin",$v="sentry.idle_span_finish_reason",_g="sentry.measurement_unit",bg="sentry.measurement_value",R6="sentry.custom_span_name",dU="sentry.profile_id",s4="sentry.exclusive_time",fU=0,vx=1,dn=2;function hU(e){if(e<400&&e>=100)return{code:vx};if(e>=400&&e<500)switch(e){case 401:return{code:dn,message:"unauthenticated"};case 403:return{code:dn,message:"permission_denied"};case 404:return{code:dn,message:"not_found"};case 409:return{code:dn,message:"already_exists"};case 413:return{code:dn,message:"failed_precondition"};case 429:return{code:dn,message:"resource_exhausted"};case 499:return{code:dn,message:"cancelled"};default:return{code:dn,message:"invalid_argument"}}if(e>=500&&e<600)switch(e){case 501:return{code:dn,message:"unimplemented"};case 503:return{code:dn,message:"unavailable"};case 504:return{code:dn,message:"deadline_exceeded"};default:return{code:dn,message:"internal_error"}}return{code:dn,message:"unknown_error"}}function yx(e,t){e.setAttribute("http.response.status_code",t);const n=hU(t);n.message!=="unknown_error"&&e.setStatus(n)}const a4="sentry-",pU=/^sentry-/,gU=8192;function _x(e){const t=vU(e);if(!t)return;const n=Object.entries(t).reduce((r,[i,o])=>{if(i.match(pU)){const s=i.slice(a4.length);r[s]=o}return r},{});if(Object.keys(n).length>0)return n}function mU(e){if(!e)return;const t=Object.entries(e).reduce((n,[r,i])=>(i&&(n[`${a4}${r}`]=i),n),{});return yU(t)}function vU(e){if(!(!e||!Do(e)&&!Array.isArray(e)))return Array.isArray(e)?e.reduce((t,n)=>{const r=L6(n);return Object.entries(r).forEach(([i,o])=>{t[i]=o}),t},{}):L6(e)}function L6(e){return e.split(",").map(t=>t.split("=").map(n=>decodeURIComponent(n.trim()))).reduce((t,[n,r])=>(n&&r&&(t[n]=r),t),{})}function yU(e){if(Object.keys(e).length!==0)return Object.entries(e).reduce((t,[n,r],i)=>{const o=`${encodeURIComponent(n)}=${encodeURIComponent(r)}`,s=i===0?o:`${t},${o}`;return s.length>gU?(Js&&Q.warn(`Not adding key: ${n} with val: ${r} to baggage header due to exceeding baggage size limits.`),t):s},"")}const bx=new RegExp("^[ \\t]*([0-9a-f]{32})?-?([0-9a-f]{16})?-?([01])?[ \\t]*$");function _U(e){if(!e)return;const t=e.match(bx);if(!t)return;let n;return t[3]==="1"?n=!0:t[3]==="0"&&(n=!1),{traceId:t[1],parentSampled:n,parentSpanId:t[2]}}function bU(e,t){const n=_U(e),r=_x(t);if(!n||!n.traceId)return{traceId:Bs(),spanId:Vs()};const{traceId:i,parentSpanId:o,parentSampled:s}=n,a=Vs();return{traceId:i,parentSpanId:o,spanId:a,sampled:s,dsc:r||{}}}function wx(e=Bs(),t=Vs(),n){let r="";return n!==void 0&&(r=n?"-1":"-0"),`${e}-${t}${r}`}const Sx=0,Cx=1;let k6=!1;function wU(e){const{spanId:t,traceId:n}=e.spanContext(),{data:r,op:i,parent_span_id:o,status:s,origin:a}=Je(e);return En({parent_span_id:o,span_id:t,trace_id:n,data:r,op:i,status:s,origin:a})}function SU(e){const{spanId:t,traceId:n,isRemote:r}=e.spanContext(),i=r?t:Je(e).parent_span_id,o=r?Vs():t;return En({parent_span_id:i,span_id:o,trace_id:n})}function CU(e){const{traceId:t,spanId:n}=e.spanContext(),r=Qa(e);return wx(t,n,r)}function Ia(e){return typeof e=="number"?T6(e):Array.isArray(e)?e[0]+e[1]/1e9:e instanceof Date?T6(e.getTime()):Bn()}function T6(e){return e>9999999999?e/1e3:e}function Je(e){if(xU(e))return e.getSpanJSON();try{const{spanId:t,traceId:n}=e.spanContext();if(EU(e)){const{attributes:r,startTime:i,name:o,endTime:s,parentSpanId:a,status:c}=e;return En({span_id:t,trace_id:n,data:r,description:o,parent_span_id:a,start_timestamp:Ia(i),timestamp:Ia(s)||void 0,status:Ex(c),op:r[Xo],origin:r[Qt],_metrics_summary:Nv(e)})}return{span_id:t,trace_id:n}}catch{return{}}}function EU(e){const t=e;return!!t.attributes&&!!t.startTime&&!!t.name&&!!t.endTime&&!!t.status}function xU(e){return typeof e.getSpanJSON=="function"}function Qa(e){const{traceFlags:t}=e.spanContext();return t===Cx}function Ex(e){if(!(!e||e.code===fU))return e.code===vx?"ok":e.message||"unknown_error"}const Ra="_sentryChildSpans",Ov="_sentryRootSpan";function xx(e,t){const n=e[Ov]||e;ci(t,Ov,n),e[Ra]?e[Ra].add(t):ci(e,Ra,new Set([t]))}function IU(e,t){e[Ra]&&e[Ra].delete(t)}function fp(e){const t=new Set;function n(r){if(!t.has(r)&&Qa(r)){t.add(r);const i=r[Ra]?Array.from(r[Ra]):[];for(const o of i)n(o)}}return n(e),Array.from(t)}function xn(e){return e[Ov]||e}function In(){const e=Za(),t=Ql(e);return t.getActiveSpan?t.getActiveSpan():e1(yt())}function Ix(){k6||(Xa(()=>{console.warn("[Sentry] Deprecation warning: Returning null from `beforeSendSpan` will be disallowed from SDK version 9.0.0 onwards. The callback will only support mutating spans. To drop certain spans, configure the respective integrations directly.")}),k6=!0)}let A6=!1;function RU(){A6||(A6=!0,sx(jv),ax(jv))}function jv(){const e=In(),t=e&&xn(e);if(t){const n="internal_error";Ne&&Q.log(`[Tracing] Root span: ${n} -> Global error occurred`),t.setStatus({code:dn,message:n})}}jv.tag="sentry_tracingErrorCallback";const Rx="_sentryScope",Lx="_sentryIsolationScope";function LU(e,t,n){e&&(ci(e,Lx,n),ci(e,Rx,t))}function P6(e){return{scope:e[Rx],isolationScope:e[Lx]}}function Gs(e){if(typeof __SENTRY_TRACING__=="boolean"&&!__SENTRY_TRACING__)return!1;const t=tt(),n=e||t&&t.getOptions();return!!n&&(n.enableTracing||"tracesSampleRate"in n||"tracesSampler"in n)}class Jl{constructor(t={}){this._traceId=t.traceId||Bs(),this._spanId=t.spanId||Vs()}spanContext(){return{spanId:this._spanId,traceId:this._traceId,traceFlags:Sx}}end(t){}setAttribute(t,n){return this}setAttributes(t){return this}setStatus(t){return this}updateName(t){return this}isRecording(){return!1}addEvent(t,n,r){return this}addLink(t){return this}addLinks(t){return this}recordException(t,n){}}const c4="production",kx="_frozenDsc";function M6(e,t){ci(e,kx,t)}function Tx(e,t){const n=t.getOptions(),{publicKey:r}=t.getDsn()||{},i=En({environment:n.environment||c4,release:n.release,public_key:r,trace_id:e});return t.emit("createDsc",i),i}function Ax(e,t){const n=t.getPropagationContext();return n.dsc||Tx(n.traceId,e)}function eu(e){const t=tt();if(!t)return{};const n=xn(e),r=n[kx];if(r)return r;const i=n.spanContext().traceState,o=i&&i.get("sentry.dsc"),s=o&&_x(o);if(s)return s;const a=Tx(e.spanContext().traceId,t),c=Je(n),l=c.data||{},u=l[mx];u!=null&&(a.sample_rate=`${u}`);const d=l[Xr],p=c.description;return d!=="url"&&p&&(a.transaction=p),Gs()&&(a.sampled=String(Qa(n))),t.emit("createDsc",a,n),a}function kU(e){if(!Ne)return;const{description:t="< unknown name >",op:n="< unknown op >",parent_span_id:r}=Je(e),{spanId:i}=e.spanContext(),o=Qa(e),s=xn(e),a=s===e,c=`[Tracing] Starting ${o?"sampled":"unsampled"} ${a?"root ":""}span`,l=[`op: ${n}`,`name: ${t}`,`ID: ${i}`];if(r&&l.push(`parent ID: ${r}`),!a){const{op:u,description:d}=Je(s);l.push(`root ID: ${s.spanContext().spanId}`),u&&l.push(`root op: ${u}`),d&&l.push(`root description: ${d}`)}Q.log(`${c}
  ${l.join(`
  `)}`)}function TU(e){if(!Ne)return;const{description:t="< unknown name >",op:n="< unknown op >"}=Je(e),{spanId:r}=e.spanContext(),o=xn(e)===e,s=`[Tracing] Finishing "${n}" ${o?"root ":""}span "${t}" with ID ${r}`;Q.log(s)}function Px(e){if(typeof e=="boolean")return Number(e);const t=typeof e=="string"?parseFloat(e):e;if(typeof t!="number"||isNaN(t)||t<0||t>1){Ne&&Q.warn(`[Tracing] Given sample rate is invalid. Sample rate must be a boolean or a number between 0 and 1. Got ${JSON.stringify(e)} of type ${JSON.stringify(typeof e)}.`);return}return t}function AU(e,t){if(!Gs(e))return[!1];const n=fo().getScopeData().sdkProcessingMetadata.normalizedRequest,r={...t,normalizedRequest:t.normalizedRequest||n};let i;typeof e.tracesSampler=="function"?i=e.tracesSampler(r):r.parentSampled!==void 0?i=r.parentSampled:typeof e.tracesSampleRate<"u"?i=e.tracesSampleRate:i=1;const o=Px(i);return o===void 0?(Ne&&Q.warn("[Tracing] Discarding transaction because of invalid sample rate."),[!1]):o?Math.random()<o?[!0,o]:(Ne&&Q.log(`[Tracing] Discarding transaction because it's not included in the random sample (sampling rate = ${Number(i)})`),[!1,o]):(Ne&&Q.log(`[Tracing] Discarding transaction because ${typeof e.tracesSampler=="function"?"tracesSampler returned 0 or false":"a negative sampling decision was inherited or tracesSampleRate is set to 0"}`),[!1,o])}const PU=/^(?:(\w+):)\/\/(?:(\w+)(?::(\w+)?)?@)([\w.-]+)(?::(\d+))?\/(.+)/;function MU(e){return e==="http"||e==="https"}function tu(e,t=!1){const{host:n,path:r,pass:i,port:o,projectId:s,protocol:a,publicKey:c}=e;return`${a}://${c}${t&&i?`:${i}`:""}@${n}${o?`:${o}`:""}/${r&&`${r}/`}${s}`}function NU(e){const t=PU.exec(e);if(!t){Xa(()=>{console.error(`Invalid Sentry Dsn: ${e}`)});return}const[n,r,i="",o="",s="",a=""]=t.slice(1);let c="",l=a;const u=l.split("/");if(u.length>1&&(c=u.slice(0,-1).join("/"),l=u.pop()),l){const d=l.match(/^\d+/);d&&(l=d[0])}return Mx({host:o,pass:i,path:c,projectId:l,port:s,protocol:n,publicKey:r})}function Mx(e){return{protocol:e.protocol,publicKey:e.publicKey||"",pass:e.pass||"",host:e.host,port:e.port||"",path:e.path||"",projectId:e.projectId}}function $U(e){if(!Js)return!0;const{port:t,projectId:n,protocol:r}=e;return["protocol","publicKey","host","projectId"].find(s=>e[s]?!1:(Q.error(`Invalid Sentry Dsn: ${s} missing`),!0))?!1:n.match(/^\d+$/)?MU(r)?t&&isNaN(parseInt(t,10))?(Q.error(`Invalid Sentry Dsn: Invalid port ${t}`),!1):!0:(Q.error(`Invalid Sentry Dsn: Invalid protocol ${r}`),!1):(Q.error(`Invalid Sentry Dsn: Invalid projectId ${n}`),!1)}function Nx(e){const t=typeof e=="string"?NU(e):Mx(e);if(!(!t||!$U(t)))return t}function OU(){const e=typeof WeakSet=="function",t=e?new WeakSet:[];function n(i){if(e)return t.has(i)?!0:(t.add(i),!1);for(let o=0;o<t.length;o++)if(t[o]===i)return!0;return t.push(i),!1}function r(i){if(e)t.delete(i);else for(let o=0;o<t.length;o++)if(t[o]===i){t.splice(o,1);break}}return[n,r]}function xo(e,t=100,n=1/0){try{return Dv("",e,t,n)}catch(r){return{ERROR:`**non-serializable** (${r})`}}}function $x(e,t=3,n=100*1024){const r=xo(e,t);return HU(r)>n?$x(e,t-1,n):r}function Dv(e,t,n=1/0,r=1/0,i=OU()){const[o,s]=i;if(t==null||["boolean","string"].includes(typeof t)||typeof t=="number"&&Number.isFinite(t))return t;const a=jU(e,t);if(!a.startsWith("[object "))return a;if(t.__sentry_skip_normalization__)return t;const c=typeof t.__sentry_override_normalization_depth__=="number"?t.__sentry_override_normalization_depth__:n;if(c===0)return a.replace("object ","");if(o(t))return"[Circular ~]";const l=t;if(l&&typeof l.toJSON=="function")try{const g=l.toJSON();return Dv("",g,c-1,r,i)}catch{}const u=Array.isArray(t)?[]:{};let d=0;const p=hx(t);for(const g in p){if(!Object.prototype.hasOwnProperty.call(p,g))continue;if(d>=r){u[g]="[MaxProperties ~]";break}const v=p[g];u[g]=Dv(g,v,c-1,r,i),d++}return s(t),u}function jU(e,t){try{if(e==="domain"&&t&&typeof t=="object"&&t._events)return"[Domain]";if(e==="domainEmitter")return"[DomainEmitter]";if(typeof global<"u"&&t===global)return"[Global]";if(typeof window<"u"&&t===window)return"[Window]";if(typeof document<"u"&&t===document)return"[Document]";if(ux(t))return"[VueViewModel]";if(BH(t))return"[SyntheticEvent]";if(typeof t=="number"&&!Number.isFinite(t))return`[${t}]`;if(typeof t=="function")return`[Function: ${zo(t)}]`;if(typeof t=="symbol")return`[${String(t)}]`;if(typeof t=="bigint")return`[BigInt: ${String(t)}]`;const n=DU(t);return/^HTML(\w*)Element$/.test(n)?`[HTMLElement: ${n}]`:`[object ${n}]`}catch(n){return`**non-serializable** (${n})`}}function DU(e){const t=Object.getPrototypeOf(e);return t?t.constructor.name:"null prototype"}function FU(e){return~-encodeURI(e).split(/%..|./).length}function HU(e){return FU(JSON.stringify(e))}function nu(e,t=[]){return[e,t]}function UU(e,t){const[n,r]=e;return[n,[...r,t]]}function N6(e,t){const n=e[1];for(const r of n){const i=r[0].type;if(t(r,i))return!0}return!1}function Fv(e){return Xe.__SENTRY__&&Xe.__SENTRY__.encodePolyfill?Xe.__SENTRY__.encodePolyfill(e):new TextEncoder().encode(e)}function BU(e){const[t,n]=e;let r=JSON.stringify(t);function i(o){typeof r=="string"?r=typeof o=="string"?r+o:[Fv(r),o]:r.push(typeof o=="string"?Fv(o):o)}for(const o of n){const[s,a]=o;if(i(`
${JSON.stringify(s)}
`),typeof a=="string"||a instanceof Uint8Array)i(a);else{let c;try{c=JSON.stringify(a)}catch{c=JSON.stringify(xo(a))}i(c)}}return typeof r=="string"?r:VU(r)}function VU(e){const t=e.reduce((i,o)=>i+o.length,0),n=new Uint8Array(t);let r=0;for(const i of e)n.set(i,r),r+=i.length;return n}function qU(e){return[{type:"span"},e]}function GU(e){const t=typeof e.data=="string"?Fv(e.data):e.data;return[En({type:"attachment",length:t.length,filename:e.filename,content_type:e.contentType,attachment_type:e.attachmentType}),t]}const KU={session:"session",sessions:"session",attachment:"attachment",transaction:"transaction",event:"error",client_report:"internal",user_report:"default",profile:"profile",profile_chunk:"profile",replay_event:"replay",replay_recording:"replay",check_in:"monitor",feedback:"feedback",span:"span",statsd:"metric_bucket",raw_security:"security"};function $6(e){return KU[e]}function Ox(e){if(!e||!e.sdk)return;const{name:t,version:n}=e.sdk;return{name:t,version:n}}function WU(e,t,n,r){const i=e.sdkProcessingMetadata&&e.sdkProcessingMetadata.dynamicSamplingContext;return{event_id:e.event_id,sent_at:new Date().toISOString(),...t&&{sdk:t},...!!n&&r&&{dsn:tu(r)},...i&&{trace:En({...i})}}}function zU(e,t){return t&&(e.sdk=e.sdk||{},e.sdk.name=e.sdk.name||t.name,e.sdk.version=e.sdk.version||t.version,e.sdk.integrations=[...e.sdk.integrations||[],...t.integrations||[]],e.sdk.packages=[...e.sdk.packages||[],...t.packages||[]]),e}function YU(e,t,n,r){const i=Ox(n),o={sent_at:new Date().toISOString(),...i&&{sdk:i},...!!r&&t&&{dsn:tu(t)}},s="aggregates"in e?[{type:"sessions"},e]:[{type:"session"},e.toJSON()];return nu(o,[s])}function XU(e,t,n,r){const i=Ox(n),o=e.type&&e.type!=="replay_event"?e.type:"event";zU(e,n&&n.sdk);const s=WU(e,i,r,t);return delete e.sdkProcessingMetadata,nu(s,[[{type:o},e]])}function ZU(e,t){function n(u){return!!u.trace_id&&!!u.public_key}const r=eu(e[0]),i=t&&t.getDsn(),o=t&&t.getOptions().tunnel,s={sent_at:new Date().toISOString(),...n(r)&&{trace:r},...!!o&&i&&{dsn:tu(i)}},a=t&&t.getOptions().beforeSendSpan,c=a?u=>{const d=a(Je(u));return d||Ix(),d}:u=>Je(u),l=[];for(const u of e){const d=c(u);d&&l.push(qU(d))}return nu(s,l)}function QU(e,t,n,r=In()){const i=r&&xn(r);i&&(Ne&&Q.log(`[Measurement] Setting measurement on root span: ${e} = ${t} ${n}`),i.addEvent(e,{[bg]:t,[_g]:n}))}function O6(e){if(!e||e.length===0)return;const t={};return e.forEach(n=>{const r=n.attributes||{},i=r[_g],o=r[bg];typeof i=="string"&&typeof o=="number"&&(t[n.name]={value:o,unit:i})}),t}const j6=1e3;class l4{constructor(t={}){this._traceId=t.traceId||Bs(),this._spanId=t.spanId||Vs(),this._startTime=t.startTimestamp||Bn(),this._attributes={},this.setAttributes({[Qt]:"manual",[Xo]:t.op,...t.attributes}),this._name=t.name,t.parentSpanId&&(this._parentSpanId=t.parentSpanId),"sampled"in t&&(this._sampled=t.sampled),t.endTimestamp&&(this._endTime=t.endTimestamp),this._events=[],this._isStandaloneSpan=t.isStandalone,this._endTime&&this._onSpanEnded()}addLink(t){return this}addLinks(t){return this}recordException(t,n){}spanContext(){const{_spanId:t,_traceId:n,_sampled:r}=this;return{spanId:t,traceId:n,traceFlags:r?Cx:Sx}}setAttribute(t,n){return n===void 0?delete this._attributes[t]:this._attributes[t]=n,this}setAttributes(t){return Object.keys(t).forEach(n=>this.setAttribute(n,t[n])),this}updateStartTime(t){this._startTime=Ia(t)}setStatus(t){return this._status=t,this}updateName(t){return this._name=t,this.setAttribute(Xr,"custom"),this}end(t){this._endTime||(this._endTime=Ia(t),TU(this),this._onSpanEnded())}getSpanJSON(){return En({data:this._attributes,description:this._name,op:this._attributes[Xo],parent_span_id:this._parentSpanId,span_id:this._spanId,start_timestamp:this._startTime,status:Ex(this._status),timestamp:this._endTime,trace_id:this._traceId,origin:this._attributes[Qt],_metrics_summary:Nv(this),profile_id:this._attributes[dU],exclusive_time:this._attributes[s4],measurements:O6(this._events),is_segment:this._isStandaloneSpan&&xn(this)===this||void 0,segment_id:this._isStandaloneSpan?xn(this).spanContext().spanId:void 0})}isRecording(){return!this._endTime&&!!this._sampled}addEvent(t,n,r){Ne&&Q.log("[Tracing] Adding an event to span:",t);const i=D6(n)?n:r||Bn(),o=D6(n)?{}:n||{},s={name:t,time:Ia(i),attributes:o};return this._events.push(s),this}isStandaloneSpan(){return!!this._isStandaloneSpan}_onSpanEnded(){const t=tt();if(t&&t.emit("spanEnd",this),!(this._isStandaloneSpan||this===xn(this)))return;if(this._isStandaloneSpan){this._sampled?eB(ZU([this],t)):(Ne&&Q.log("[Tracing] Discarding standalone span because its trace was not chosen to be sampled."),t&&t.recordDroppedEvent("sample_rate","span"));return}const r=this._convertSpanToTransaction();r&&(P6(this).scope||yt()).captureEvent(r)}_convertSpanToTransaction(){if(!F6(Je(this)))return;this._name||(Ne&&Q.warn("Transaction has no name, falling back to `<unlabeled transaction>`."),this._name="<unlabeled transaction>");const{scope:t,isolationScope:n}=P6(this),i=(t||yt()).getClient()||tt();if(this._sampled!==!0){Ne&&Q.log("[Tracing] Discarding transaction because its trace was not chosen to be sampled."),i&&i.recordDroppedEvent("sample_rate","transaction");return}const s=fp(this).filter(d=>d!==this&&!JU(d)).map(d=>Je(d)).filter(F6),a=this._attributes[Xr];delete this._attributes[R6],s.forEach(d=>{d.data&&delete d.data[R6]});const c={contexts:{trace:wU(this)},spans:s.length>j6?s.sort((d,p)=>d.start_timestamp-p.start_timestamp).slice(0,j6):s,start_timestamp:this._startTime,timestamp:this._endTime,transaction:this._name,type:"transaction",sdkProcessingMetadata:{capturedSpanScope:t,capturedSpanIsolationScope:n,...En({dynamicSamplingContext:eu(this)})},_metrics_summary:Nv(this),...a&&{transaction_info:{source:a}}},l=O6(this._events);return l&&Object.keys(l).length&&(Ne&&Q.log("[Measurements] Adding measurements to transaction event",JSON.stringify(l,void 0,2)),c.measurements=l),c}}function D6(e){return e&&typeof e=="number"||e instanceof Date||Array.isArray(e)}function F6(e){return!!e.start_timestamp&&!!e.timestamp&&!!e.span_id&&!!e.trace_id}function JU(e){return e instanceof l4&&e.isStandaloneSpan()}function eB(e){const t=tt();if(!t)return;const n=e[1];if(!n||n.length===0){t.recordDroppedEvent("before_send","span");return}t.sendEnvelope(e)}const jx="__SENTRY_SUPPRESS_TRACING__";function wf(e){const t=Fx();if(t.startInactiveSpan)return t.startInactiveSpan(e);const n=nB(e),{forceTransaction:r,parentSpan:i}=e;return(e.scope?s=>yg(e.scope,s):i!==void 0?s=>Dx(i,s):s=>s())(()=>{const s=yt(),a=iB(s);return e.onlyIfParent&&!a?new Jl:tB({parentSpan:a,spanArguments:n,forceTransaction:r,scope:s})})}function Dx(e,t){const n=Fx();return n.withActiveSpan?n.withActiveSpan(e,t):yg(r=>(Md(r,e||void 0),t(r)))}function tB({parentSpan:e,spanArguments:t,forceTransaction:n,scope:r}){if(!Gs())return new Jl;const i=fo();let o;if(e&&!n)o=rB(e,r,t),xx(e,o);else if(e){const s=eu(e),{traceId:a,spanId:c}=e.spanContext(),l=Qa(e);o=H6({traceId:a,parentSpanId:c,...t},r,l),M6(o,s)}else{const{traceId:s,dsc:a,parentSpanId:c,sampled:l}={...i.getPropagationContext(),...r.getPropagationContext()};o=H6({traceId:s,parentSpanId:c,...t},r,l),a&&M6(o,a)}return kU(o),LU(o,r,i),o}function nB(e){const n={isStandalone:(e.experimental||{}).standalone,...e};if(e.startTime){const r={...n};return r.startTimestamp=Ia(e.startTime),delete r.startTime,r}return n}function Fx(){const e=Za();return Ql(e)}function H6(e,t,n){const r=tt(),i=r&&r.getOptions()||{},{name:o="",attributes:s}=e,[a,c]=t.getScopeData().sdkProcessingMetadata[jx]?[!1]:AU(i,{name:o,parentSampled:n,attributes:s,transactionContext:{name:o,parentSampled:n}}),l=new l4({...e,attributes:{[Xr]:"custom",...e.attributes},sampled:a});return c!==void 0&&l.setAttribute(mx,c),r&&r.emit("spanStart",l),l}function rB(e,t,n){const{spanId:r,traceId:i}=e.spanContext(),o=t.getScopeData().sdkProcessingMetadata[jx]?!1:Qa(e),s=o?new l4({...n,parentSpanId:r,traceId:i,sampled:o}):new Jl({traceId:i});xx(e,s);const a=tt();return a&&(a.emit("spanStart",s),n.endTimestamp&&a.emit("spanEnd",s)),s}function iB(e){const t=e1(e);if(!t)return;const n=tt();return(n?n.getOptions():{}).parentSpanIsAlwaysRootSpan?xn(t):t}const hp={idleTimeout:1e3,finalTimeout:3e4,childSpanTimeout:15e3},oB="heartbeatFailed",sB="idleTimeout",aB="finalTimeout",cB="externalFinish";function Hx(e,t={}){const n=new Map;let r=!1,i,o=cB,s=!t.disableAutoFinish;const a=[],{idleTimeout:c=hp.idleTimeout,finalTimeout:l=hp.finalTimeout,childSpanTimeout:u=hp.childSpanTimeout,beforeSpanEnd:d}=t,p=tt();if(!p||!Gs())return new Jl;const g=yt(),v=In(),m=lB(e);m.end=new Proxy(m.end,{apply(E,x,I){d&&d(m);const[L,...R]=I,k=L||Bn(),A=Ia(k),P=fp(m).filter(N=>N!==m);if(!P.length)return C(A),Reflect.apply(E,x,[A,...R]);const O=P.map(N=>Je(N).timestamp).filter(N=>!!N),j=O.length?Math.max(...O):void 0,$=Je(m).start_timestamp,T=Math.min($?$+l/1e3:1/0,Math.max($||-1/0,Math.min(A,j||1/0)));return C(T),Reflect.apply(E,x,[T,...R])}});function _(){i&&(clearTimeout(i),i=void 0)}function y(E){_(),i=setTimeout(()=>{!r&&n.size===0&&s&&(o=sB,m.end(E))},c)}function w(E){i=setTimeout(()=>{!r&&s&&(o=oB,m.end(E))},u)}function S(E){_(),n.set(E,!0);const x=Bn();w(x+u/1e3)}function b(E){if(n.has(E)&&n.delete(E),n.size===0){const x=Bn();y(x+c/1e3)}}function C(E){r=!0,n.clear(),a.forEach(A=>A()),Md(g,v);const x=Je(m),{start_timestamp:I}=x;if(!I)return;(x.data||{})[$v]||m.setAttribute($v,o),Q.log(`[Tracing] Idle span "${x.op}" finished`);const R=fp(m).filter(A=>A!==m);let k=0;R.forEach(A=>{A.isRecording()&&(A.setStatus({code:dn,message:"cancelled"}),A.end(E),Ne&&Q.log("[Tracing] Cancelling span since span ended early",JSON.stringify(A,void 0,2)));const P=Je(A),{timestamp:O=0,start_timestamp:j=0}=P,$=j<=E,T=(l+c)/1e3,N=O-j<=T;if(Ne){const M=JSON.stringify(A,void 0,2);$?N||Q.log("[Tracing] Discarding span since it finished after idle span final timeout",M):Q.log("[Tracing] Discarding span since it happened after idle span was finished",M)}(!N||!$)&&(IU(m,A),k++)}),k>0&&m.setAttribute("sentry.idle_span_discarded_spans",k)}return a.push(p.on("spanStart",E=>{if(r||E===m||Je(E).timestamp)return;fp(m).includes(E)&&S(E.spanContext().spanId)})),a.push(p.on("spanEnd",E=>{r||b(E.spanContext().spanId)})),a.push(p.on("idleSpanEnableAutoFinish",E=>{E===m&&(s=!0,y(),n.size&&w())})),t.disableAutoFinish||y(),setTimeout(()=>{r||(m.setStatus({code:dn,message:"deadline_exceeded"}),o=aB,m.end())},l),m}function lB(e){const t=wf(e);return Md(yt(),t),Ne&&Q.log("[Tracing] Started span is an idle span"),t}function Hv(e,t,n,r=0){return new Vr((i,o)=>{const s=e[r];if(t===null||typeof s!="function")i(t);else{const a=s({...t},n);Ne&&s.id&&a===null&&Q.log(`Event processor "${s.id}" dropped event`),mg(a)?a.then(c=>Hv(e,c,n,r+1).then(i)).then(null,o):Hv(e,a,n,r+1).then(i).then(null,o)}})}let lh,U6,uh;function uB(e){const t=Xe._sentryDebugIds;if(!t)return{};const n=Object.keys(t);return uh&&n.length===U6||(U6=n.length,uh=n.reduce((r,i)=>{lh||(lh={});const o=lh[i];if(o)r[o[0]]=o[1];else{const s=e(i);for(let a=s.length-1;a>=0;a--){const c=s[a],l=c&&c.filename,u=t[i];if(l&&u){r[l]=u,lh[i]=[l,u];break}}}return r},{})),uh}function dB(e,t){const{fingerprint:n,span:r,breadcrumbs:i,sdkProcessingMetadata:o}=t;fB(e,t),r&&gB(e,r),mB(e,n),hB(e,i),pB(e,o)}function B6(e,t){const{extra:n,tags:r,user:i,contexts:o,level:s,sdkProcessingMetadata:a,breadcrumbs:c,fingerprint:l,eventProcessors:u,attachments:d,propagationContext:p,transactionName:g,span:v}=t;dh(e,"extra",n),dh(e,"tags",r),dh(e,"user",i),dh(e,"contexts",o),e.sdkProcessingMetadata=vg(e.sdkProcessingMetadata,a,2),s&&(e.level=s),g&&(e.transactionName=g),v&&(e.span=v),c.length&&(e.breadcrumbs=[...e.breadcrumbs,...c]),l.length&&(e.fingerprint=[...e.fingerprint,...l]),u.length&&(e.eventProcessors=[...e.eventProcessors,...u]),d.length&&(e.attachments=[...e.attachments,...d]),e.propagationContext={...e.propagationContext,...p}}function dh(e,t,n){e[t]=vg(e[t],n,1)}function fB(e,t){const{extra:n,tags:r,user:i,contexts:o,level:s,transactionName:a}=t,c=En(n);c&&Object.keys(c).length&&(e.extra={...c,...e.extra});const l=En(r);l&&Object.keys(l).length&&(e.tags={...l,...e.tags});const u=En(i);u&&Object.keys(u).length&&(e.user={...u,...e.user});const d=En(o);d&&Object.keys(d).length&&(e.contexts={...d,...e.contexts}),s&&(e.level=s),a&&e.type!=="transaction"&&(e.transaction=a)}function hB(e,t){const n=[...e.breadcrumbs||[],...t];e.breadcrumbs=n.length?n:void 0}function pB(e,t){e.sdkProcessingMetadata={...e.sdkProcessingMetadata,...t}}function gB(e,t){e.contexts={trace:SU(t),...e.contexts},e.sdkProcessingMetadata={dynamicSamplingContext:eu(t),...e.sdkProcessingMetadata};const n=xn(t),r=Je(n).description;r&&!e.transaction&&e.type==="transaction"&&(e.transaction=r)}function mB(e,t){e.fingerprint=e.fingerprint?Array.isArray(e.fingerprint)?e.fingerprint:[e.fingerprint]:[],t&&(e.fingerprint=e.fingerprint.concat(t)),e.fingerprint&&!e.fingerprint.length&&delete e.fingerprint}function vB(e,t,n,r,i,o){const{normalizeDepth:s=3,normalizeMaxBreadth:a=1e3}=e,c={...t,event_id:t.event_id||n.event_id||ni(),timestamp:t.timestamp||bf()},l=n.integrations||e.integrations.map(_=>_.name);yB(c,e),wB(c,l),i&&i.emit("applyFrameMetadata",t),t.type===void 0&&_B(c,e.stackParser);const u=CB(r,n.captureContext);n.mechanism&&yl(c,n.mechanism);const d=i?i.getEventProcessors():[],p=cU().getScopeData();if(o){const _=o.getScopeData();B6(p,_)}if(u){const _=u.getScopeData();B6(p,_)}const g=[...n.attachments||[],...p.attachments];g.length&&(n.attachments=g),dB(c,p);const v=[...d,...p.eventProcessors];return Hv(v,c,n).then(_=>(_&&bB(_),typeof s=="number"&&s>0?SB(_,s,a):_))}function yB(e,t){const{environment:n,release:r,dist:i,maxValueLength:o=250}=t;e.environment=e.environment||n||c4,!e.release&&r&&(e.release=r),!e.dist&&i&&(e.dist=i),e.message&&(e.message=tl(e.message,o));const s=e.exception&&e.exception.values&&e.exception.values[0];s&&s.value&&(s.value=tl(s.value,o));const a=e.request;a&&a.url&&(a.url=tl(a.url,o))}function _B(e,t){const n=uB(t);try{e.exception.values.forEach(r=>{r.stacktrace.frames.forEach(i=>{n&&i.filename&&(i.debug_id=n[i.filename])})})}catch{}}function bB(e){const t={};try{e.exception.values.forEach(r=>{r.stacktrace.frames.forEach(i=>{i.debug_id&&(i.abs_path?t[i.abs_path]=i.debug_id:i.filename&&(t[i.filename]=i.debug_id),delete i.debug_id)})})}catch{}if(Object.keys(t).length===0)return;e.debug_meta=e.debug_meta||{},e.debug_meta.images=e.debug_meta.images||[];const n=e.debug_meta.images;Object.entries(t).forEach(([r,i])=>{n.push({type:"sourcemap",code_file:r,debug_id:i})})}function wB(e,t){t.length>0&&(e.sdk=e.sdk||{},e.sdk.integrations=[...e.sdk.integrations||[],...t])}function SB(e,t,n){if(!e)return null;const r={...e,...e.breadcrumbs&&{breadcrumbs:e.breadcrumbs.map(i=>({...i,...i.data&&{data:xo(i.data,t,n)}}))},...e.user&&{user:xo(e.user,t,n)},...e.contexts&&{contexts:xo(e.contexts,t,n)},...e.extra&&{extra:xo(e.extra,t,n)}};return e.contexts&&e.contexts.trace&&r.contexts&&(r.contexts.trace=e.contexts.trace,e.contexts.trace.data&&(r.contexts.trace.data=xo(e.contexts.trace.data,t,n))),e.spans&&(r.spans=e.spans.map(i=>({...i,...i.data&&{data:xo(i.data,t,n)}}))),e.contexts&&e.contexts.flags&&r.contexts&&(r.contexts.flags=xo(e.contexts.flags,3,n)),r}function CB(e,t){if(!t)return e;const n=e?e.clone():new qs;return n.update(t),n}function EB(e){if(e)return xB(e)?{captureContext:e}:RB(e)?{captureContext:e}:e}function xB(e){return e instanceof qs||typeof e=="function"}const IB=["user","level","extra","contexts","tags","fingerprint","requestSession","propagationContext"];function RB(e){return Object.keys(e).some(t=>IB.includes(t))}function wg(e,t){return yt().captureException(e,EB(t))}function Ux(e,t){return yt().captureEvent(e,t)}function LB(e,t){fo().setContext(e,t)}function kB(){return fo().lastEventId()}function TB(){const e=tt();return!!e&&e.getOptions().enabled!==!1&&!!e.getTransport()}function V6(e){const t=tt(),n=fo(),r=yt(),{release:i,environment:o=c4}=t&&t.getOptions()||{},{userAgent:s}=Xe.navigator||{},a=QH({release:i,environment:o,user:r.getUser()||n.getUser(),...s&&{userAgent:s},...e}),c=n.getSession();return c&&c.status==="ok"&&_l(c,{status:"exited"}),Bx(),n.setSession(a),r.setSession(a),a}function Bx(){const e=fo(),t=yt(),n=t.getSession()||e.getSession();n&&JH(n),Vx(),e.setSession(),t.setSession()}function Vx(){const e=fo(),t=yt(),n=tt(),r=t.getSession()||e.getSession();r&&n&&n.captureSession(r)}function q6(e=!1){if(e){Bx();return}Vx()}const AB="7";function qx(e){const t=e.protocol?`${e.protocol}:`:"",n=e.port?`:${e.port}`:"";return`${t}//${e.host}${n}${e.path?`/${e.path}`:""}/api/`}function PB(e){return`${qx(e)}${e.projectId}/envelope/`}function MB(e,t){const n={sentry_version:AB};return e.publicKey&&(n.sentry_key=e.publicKey),t&&(n.sentry_client=`${t.name}/${t.version}`),new URLSearchParams(n).toString()}function NB(e,t,n){return t||`${PB(e)}?${MB(e,n)}`}function $B(e,t){const n=Nx(e);if(!n)return"";const r=`${qx(n)}embed/error-page/`;let i=`dsn=${tu(n)}`;for(const o in t)if(o!=="dsn"&&o!=="onClose")if(o==="user"){const s=t.user;if(!s)continue;s.name&&(i+=`&name=${encodeURIComponent(s.name)}`),s.email&&(i+=`&email=${encodeURIComponent(s.email)}`)}else i+=`&${encodeURIComponent(o)}=${encodeURIComponent(t[o])}`;return`${r}?${i}`}const G6=[];function OB(e){const t={};return e.forEach(n=>{const{name:r}=n,i=t[r];i&&!i.isDefaultInstance&&n.isDefaultInstance||(t[r]=n)}),Object.values(t)}function jB(e){const t=e.defaultIntegrations||[],n=e.integrations;t.forEach(s=>{s.isDefaultInstance=!0});let r;if(Array.isArray(n))r=[...t,...n];else if(typeof n=="function"){const s=n(t);r=Array.isArray(s)?s:[s]}else r=t;const i=OB(r),o=i.findIndex(s=>s.name==="Debug");if(o>-1){const[s]=i.splice(o,1);i.push(s)}return i}function DB(e,t){const n={};return t.forEach(r=>{r&&Gx(e,r,n)}),n}function K6(e,t){for(const n of t)n&&n.afterAllSetup&&n.afterAllSetup(e)}function Gx(e,t,n){if(n[t.name]){Ne&&Q.log(`Integration skipped because it was already installed: ${t.name}`);return}if(n[t.name]=t,G6.indexOf(t.name)===-1&&typeof t.setupOnce=="function"&&(t.setupOnce(),G6.push(t.name)),t.setup&&typeof t.setup=="function"&&t.setup(e),typeof t.preprocessEvent=="function"){const r=t.preprocessEvent.bind(t);e.on("preprocessEvent",(i,o)=>r(i,o,e))}if(typeof t.processEvent=="function"){const r=t.processEvent.bind(t),i=Object.assign((o,s)=>r(o,s,e),{id:t.name});e.addEventProcessor(i)}Ne&&Q.log(`Integration installed: ${t.name}`)}function FB(e,t,n){const r=[{type:"client_report"},{timestamp:bf(),discarded_events:e}];return nu(t?{dsn:t}:{},[r])}class Ii extends Error{constructor(t,n="warn"){super(t),this.message=t,this.logLevel=n}}const W6="Not capturing exception because it's already been captured.";class HB{constructor(t){if(this._options=t,this._integrations={},this._numProcessing=0,this._outcomes={},this._hooks={},this._eventProcessors=[],t.dsn?this._dsn=Nx(t.dsn):Ne&&Q.warn("No DSN provided, client will not send events."),this._dsn){const i=NB(this._dsn,t.tunnel,t._metadata?t._metadata.sdk:void 0);this._transport=t.transport({tunnel:this._options.tunnel,recordDroppedEvent:this.recordDroppedEvent.bind(this),...t.transportOptions,url:i})}const r=["enableTracing","tracesSampleRate","tracesSampler"].find(i=>i in t&&t[i]==null);r&&Xa(()=>{console.warn(`[Sentry] Deprecation warning: \`${r}\` is set to undefined, which leads to tracing being enabled. In v9, a value of \`undefined\` will result in tracing being disabled.`)})}captureException(t,n,r){const i=ni();if(x6(t))return Ne&&Q.log(W6),i;const o={event_id:i,...n};return this._process(this.eventFromException(t,o).then(s=>this._captureEvent(s,o,r))),o.event_id}captureMessage(t,n,r,i){const o={event_id:ni(),...r},s=n4(t)?t:String(t),a=r4(t)?this.eventFromMessage(s,n,o):this.eventFromException(t,o);return this._process(a.then(c=>this._captureEvent(c,o,i))),o.event_id}captureEvent(t,n,r){const i=ni();if(n&&n.originalException&&x6(n.originalException))return Ne&&Q.log(W6),i;const o={event_id:i,...n},a=(t.sdkProcessingMetadata||{}).capturedSpanScope;return this._process(this._captureEvent(t,o,a||r)),o.event_id}captureSession(t){typeof t.release!="string"?Ne&&Q.warn("Discarded session because of missing or non-string release"):(this.sendSession(t),_l(t,{init:!1}))}getDsn(){return this._dsn}getOptions(){return this._options}getSdkMetadata(){return this._options._metadata}getTransport(){return this._transport}flush(t){const n=this._transport;return n?(this.emit("flush"),this._isClientDoneProcessing(t).then(r=>n.flush(t).then(i=>r&&i))):$a(!0)}close(t){return this.flush(t).then(n=>(this.getOptions().enabled=!1,this.emit("close"),n))}getEventProcessors(){return this._eventProcessors}addEventProcessor(t){this._eventProcessors.push(t)}init(){(this._isEnabled()||this._options.integrations.some(({name:t})=>t.startsWith("Spotlight")))&&this._setupIntegrations()}getIntegrationByName(t){return this._integrations[t]}addIntegration(t){const n=this._integrations[t.name];Gx(this,t,this._integrations),n||K6(this,[t])}sendEvent(t,n={}){this.emit("beforeSendEvent",t,n);let r=XU(t,this._dsn,this._options._metadata,this._options.tunnel);for(const o of n.attachments||[])r=UU(r,GU(o));const i=this.sendEnvelope(r);i&&i.then(o=>this.emit("afterSendEvent",t,o),null)}sendSession(t){const n=YU(t,this._dsn,this._options._metadata,this._options.tunnel);this.sendEnvelope(n)}recordDroppedEvent(t,n,r){if(this._options.sendClientReports){const i=typeof r=="number"?r:1,o=`${t}:${n}`;Ne&&Q.log(`Recording outcome: "${o}"${i>1?` (${i} times)`:""}`),this._outcomes[o]=(this._outcomes[o]||0)+i}}on(t,n){const r=this._hooks[t]=this._hooks[t]||[];return r.push(n),()=>{const i=r.indexOf(n);i>-1&&r.splice(i,1)}}emit(t,...n){const r=this._hooks[t];r&&r.forEach(i=>i(...n))}sendEnvelope(t){return this.emit("beforeEnvelope",t),this._isEnabled()&&this._transport?this._transport.send(t).then(null,n=>(Ne&&Q.error("Error while sending envelope:",n),n)):(Ne&&Q.error("Transport disabled"),$a({}))}_setupIntegrations(){const{integrations:t}=this._options;this._integrations=DB(this,t),K6(this,t)}_updateSessionFromEvent(t,n){let r=n.level==="fatal",i=!1;const o=n.exception&&n.exception.values;if(o){i=!0;for(const c of o){const l=c.mechanism;if(l&&l.handled===!1){r=!0;break}}}const s=t.status==="ok";(s&&t.errors===0||s&&r)&&(_l(t,{...r&&{status:"crashed"},errors:t.errors||Number(i||r)}),this.captureSession(t))}_isClientDoneProcessing(t){return new Vr(n=>{let r=0;const i=1,o=setInterval(()=>{this._numProcessing==0?(clearInterval(o),n(!0)):(r+=i,t&&r>=t&&(clearInterval(o),n(!1)))},i)})}_isEnabled(){return this.getOptions().enabled!==!1&&this._transport!==void 0}_prepareEvent(t,n,r=yt(),i=fo()){const o=this.getOptions(),s=Object.keys(this._integrations);return!n.integrations&&s.length>0&&(n.integrations=s),this.emit("preprocessEvent",t,n),t.type||i.setLastEventId(t.event_id||n.event_id),vB(o,t,n,r,this,i).then(a=>{if(a===null)return a;a.contexts={trace:lU(r),...a.contexts};const c=Ax(this,r);return a.sdkProcessingMetadata={dynamicSamplingContext:c,...a.sdkProcessingMetadata},a})}_captureEvent(t,n={},r){return this._processEvent(t,n,r).then(i=>i.event_id,i=>{Ne&&(i instanceof Ii&&i.logLevel==="log"?Q.log(i.message):Q.warn(i))})}_processEvent(t,n,r){const i=this.getOptions(),{sampleRate:o}=i,s=Wx(t),a=Kx(t),c=t.type||"error",l=`before send for type \`${c}\``,u=typeof o>"u"?void 0:Px(o);if(a&&typeof u=="number"&&Math.random()>u)return this.recordDroppedEvent("sample_rate","error",t),Jp(new Ii(`Discarding event because it's not included in the random sample (sampling rate = ${o})`,"log"));const d=c==="replay_event"?"replay":c,g=(t.sdkProcessingMetadata||{}).capturedSpanIsolationScope;return this._prepareEvent(t,n,r,g).then(v=>{if(v===null)throw this.recordDroppedEvent("event_processor",d,t),new Ii("An event processor returned `null`, will not send event.","log");if(n.data&&n.data.__sentry__===!0)return v;const _=BB(this,i,v,n);return UB(_,l)}).then(v=>{if(v===null){if(this.recordDroppedEvent("before_send",d,t),s){const w=1+(t.spans||[]).length;this.recordDroppedEvent("before_send","span",w)}throw new Ii(`${l} returned \`null\`, will not send event.`,"log")}const m=r&&r.getSession();if(!s&&m&&this._updateSessionFromEvent(m,v),s){const y=v.sdkProcessingMetadata&&v.sdkProcessingMetadata.spanCountBeforeProcessing||0,w=v.spans?v.spans.length:0,S=y-w;S>0&&this.recordDroppedEvent("before_send","span",S)}const _=v.transaction_info;if(s&&_&&v.transaction!==t.transaction){const y="custom";v.transaction_info={..._,source:y}}return this.sendEvent(v,n),v}).then(null,v=>{throw v instanceof Ii?v:(this.captureException(v,{data:{__sentry__:!0},originalException:v}),new Ii(`Event processing pipeline threw an error, original event will not be sent. Details have been sent as a new event.
Reason: ${v}`))})}_process(t){this._numProcessing++,t.then(n=>(this._numProcessing--,n),n=>(this._numProcessing--,n))}_clearOutcomes(){const t=this._outcomes;return this._outcomes={},Object.entries(t).map(([n,r])=>{const[i,o]=n.split(":");return{reason:i,category:o,quantity:r}})}_flushOutcomes(){Ne&&Q.log("Flushing outcomes...");const t=this._clearOutcomes();if(t.length===0){Ne&&Q.log("No outcomes to send");return}if(!this._dsn){Ne&&Q.log("No dsn provided, will not send outcomes");return}Ne&&Q.log("Sending outcomes:",t);const n=FB(t,this._options.tunnel&&tu(this._dsn));this.sendEnvelope(n)}}function UB(e,t){const n=`${t} must return \`null\` or a valid event.`;if(mg(e))return e.then(r=>{if(!vl(r)&&r!==null)throw new Ii(n);return r},r=>{throw new Ii(`${t} rejected with ${r}`)});if(!vl(e)&&e!==null)throw new Ii(n);return e}function BB(e,t,n,r){const{beforeSend:i,beforeSendTransaction:o,beforeSendSpan:s}=t;if(Kx(n)&&i)return i(n,r);if(Wx(n)){if(n.spans&&s){const a=[];for(const c of n.spans){const l=s(c);l?a.push(l):(Ix(),e.recordDroppedEvent("before_send","span"))}n.spans=a}if(o){if(n.spans){const a=n.spans.length;n.sdkProcessingMetadata={...n.sdkProcessingMetadata,spanCountBeforeProcessing:a}}return o(n,r)}}return n}function Kx(e){return e.type===void 0}function Wx(e){return e.type==="transaction"}function VB(e,t){t.debug===!0&&(Ne?Q.enable():Xa(()=>{console.warn("[Sentry] Cannot initialize SDK with `debug` option using a non-debug bundle.")})),yt().update(t.initialScope);const r=new e(t);return qB(r),r.init(),r}function qB(e){yt().setClient(e)}function GB(e){const t=[];function n(){return e===void 0||t.length<e}function r(s){return t.splice(t.indexOf(s),1)[0]||Promise.resolve(void 0)}function i(s){if(!n())return Jp(new Ii("Not adding Promise because buffer limit was reached."));const a=s();return t.indexOf(a)===-1&&t.push(a),a.then(()=>r(a)).then(null,()=>r(a).then(null,()=>{})),a}function o(s){return new Vr((a,c)=>{let l=t.length;if(!l)return a(!0);const u=setTimeout(()=>{s&&s>0&&a(!1)},s);t.forEach(d=>{$a(d).then(()=>{--l||(clearTimeout(u),a(!0))},c)})})}return{$:t,add:i,drain:o}}const KB=60*1e3;function WB(e,t=Date.now()){const n=parseInt(`${e}`,10);if(!isNaN(n))return n*1e3;const r=Date.parse(`${e}`);return isNaN(r)?KB:r-t}function zB(e,t){return e[t]||e.all||0}function YB(e,t,n=Date.now()){return zB(e,t)>n}function XB(e,{statusCode:t,headers:n},r=Date.now()){const i={...e},o=n&&n["x-sentry-rate-limits"],s=n&&n["retry-after"];if(o)for(const a of o.trim().split(",")){const[c,l,,,u]=a.split(":",5),d=parseInt(c,10),p=(isNaN(d)?60:d)*1e3;if(!l)i.all=r+p;else for(const g of l.split(";"))g==="metric_bucket"?(!u||u.split(";").includes("custom"))&&(i[g]=r+p):i[g]=r+p}else s?i.all=r+WB(s,r):t===429&&(i.all=r+60*1e3);return i}const ZB=64;function QB(e,t,n=GB(e.bufferSize||ZB)){let r={};const i=s=>n.drain(s);function o(s){const a=[];if(N6(s,(d,p)=>{const g=$6(p);if(YB(r,g)){const v=z6(d,p);e.recordDroppedEvent("ratelimit_backoff",g,v)}else a.push(d)}),a.length===0)return $a({});const c=nu(s[0],a),l=d=>{N6(c,(p,g)=>{const v=z6(p,g);e.recordDroppedEvent(d,$6(g),v)})},u=()=>t({body:BU(c)}).then(d=>(d.statusCode!==void 0&&(d.statusCode<200||d.statusCode>=300)&&Ne&&Q.warn(`Sentry responded with status code ${d.statusCode} to sent event.`),r=XB(r,d),d),d=>{throw l("network_error"),d});return n.add(u).then(d=>d,d=>{if(d instanceof Ii)return Ne&&Q.error("Skipped sending event because buffer is full."),l("queue_overflow"),$a({});throw d})}return{send:o,flush:i}}function z6(e,t){if(!(t!=="event"&&t!=="transaction"))return Array.isArray(e)?e[1]:void 0}function zx(e,t,n=[t],r="npm"){const i=e._metadata||{};i.sdk||(i.sdk={name:`sentry.javascript.${t}`,packages:n.map(o=>({name:`${r}:@sentry/${o}`,version:Ea})),version:Ea}),e._metadata=i}function Yx(e={}){const t=tt();if(!TB()||!t)return{};const n=Za(),r=Ql(n);if(r.getTraceData)return r.getTraceData(e);const i=yt(),o=e.span||In(),s=o?CU(o):JB(i),a=o?eu(o):Ax(t,i),c=mU(a);return bx.test(s)?{"sentry-trace":s,baggage:c}:(Q.warn("Invalid sentry-trace data. Cannot generate trace data"),{})}function JB(e){const{traceId:t,sampled:n,spanId:r}=e.getPropagationContext();return wx(t,r,n)}const eV=100;function Oa(e,t){const n=tt(),r=fo();if(!n)return;const{beforeBreadcrumb:i=null,maxBreadcrumbs:o=eV}=n.getOptions();if(o<=0)return;const a={timestamp:bf(),...e},c=i?Xa(()=>i(a,t)):a;c!==null&&(n.emit&&n.emit("beforeAddBreadcrumb",c,t),r.addBreadcrumb(c,o))}let Y6;const tV="FunctionToString",X6=new WeakMap,nV=(()=>({name:tV,setupOnce(){Y6=Function.prototype.toString;try{Function.prototype.toString=function(...e){const t=i4(this),n=X6.has(tt())&&t!==void 0?t:this;return Y6.apply(n,e)}}catch{}},setup(e){X6.set(e,!0)}})),rV=nV,iV=[/^Script error\.?$/,/^Javascript error: Script error\.? on line 0$/,/^ResizeObserver loop completed with undelivered notifications.$/,/^Cannot redefine property: googletag$/,"undefined is not an object (evaluating 'a.L')",`can't redefine non-configurable property "solana"`,"vv().getRestrictions is not a function. (In 'vv().getRestrictions(1,a)', 'vv().getRestrictions' is undefined)","Can't find variable: _AutofillCallbackHandler",/^Non-Error promise rejection captured with value: Object Not Found Matching Id:\d+, MethodName:simulateEvent, ParamCount:\d+$/],oV="InboundFilters",sV=((e={})=>({name:oV,processEvent(t,n,r){const i=r.getOptions(),o=cV(e,i);return lV(t,o)?null:t}})),aV=sV;function cV(e={},t={}){return{allowUrls:[...e.allowUrls||[],...t.allowUrls||[]],denyUrls:[...e.denyUrls||[],...t.denyUrls||[]],ignoreErrors:[...e.ignoreErrors||[],...t.ignoreErrors||[],...e.disableErrorDefaults?[]:iV],ignoreTransactions:[...e.ignoreTransactions||[],...t.ignoreTransactions||[]],ignoreInternal:e.ignoreInternal!==void 0?e.ignoreInternal:!0}}function lV(e,t){return t.ignoreInternal&&gV(e)?(Ne&&Q.warn(`Event dropped due to being internal Sentry Error.
Event: ${ws(e)}`),!0):uV(e,t.ignoreErrors)?(Ne&&Q.warn(`Event dropped due to being matched by \`ignoreErrors\` option.
Event: ${ws(e)}`),!0):vV(e)?(Ne&&Q.warn(`Event dropped due to not having an error message, error type or stacktrace.
Event: ${ws(e)}`),!0):dV(e,t.ignoreTransactions)?(Ne&&Q.warn(`Event dropped due to being matched by \`ignoreTransactions\` option.
Event: ${ws(e)}`),!0):fV(e,t.denyUrls)?(Ne&&Q.warn(`Event dropped due to being matched by \`denyUrls\` option.
Event: ${ws(e)}.
Url: ${t1(e)}`),!0):hV(e,t.allowUrls)?!1:(Ne&&Q.warn(`Event dropped due to not being matched by \`allowUrls\` option.
Event: ${ws(e)}.
Url: ${t1(e)}`),!0)}function uV(e,t){return e.type||!t||!t.length?!1:pV(e).some(n=>xa(n,t))}function dV(e,t){if(e.type!=="transaction"||!t||!t.length)return!1;const n=e.transaction;return n?xa(n,t):!1}function fV(e,t){if(!t||!t.length)return!1;const n=t1(e);return n?xa(n,t):!1}function hV(e,t){if(!t||!t.length)return!0;const n=t1(e);return n?xa(n,t):!0}function pV(e){const t=[];e.message&&t.push(e.message);let n;try{n=e.exception.values[e.exception.values.length-1]}catch{}return n&&n.value&&(t.push(n.value),n.type&&t.push(`${n.type}: ${n.value}`)),t}function gV(e){try{return e.exception.values[0].type==="SentryError"}catch{}return!1}function mV(e=[]){for(let t=e.length-1;t>=0;t--){const n=e[t];if(n&&n.filename!=="<anonymous>"&&n.filename!=="[native code]")return n.filename||null}return null}function t1(e){try{let t;try{t=e.exception.values[0].stacktrace.frames}catch{}return t?mV(t):null}catch{return Ne&&Q.error(`Cannot extract url for event ${ws(e)}`),null}}function vV(e){return e.type||!e.exception||!e.exception.values||e.exception.values.length===0?!1:!e.message&&!e.exception.values.some(t=>t.stacktrace||t.type&&t.type!=="Error"||t.value)}function yV(e,t,n=250,r,i,o,s){if(!o.exception||!o.exception.values||!s||!Yo(s.originalException,Error))return;const a=o.exception.values.length>0?o.exception.values[o.exception.values.length-1]:void 0;a&&(o.exception.values=_V(Uv(e,t,i,s.originalException,r,o.exception.values,a,0),n))}function Uv(e,t,n,r,i,o,s,a){if(o.length>=n+1)return o;let c=[...o];if(Yo(r[i],Error)){Z6(s,a);const l=e(t,r[i]),u=c.length;Q6(l,i,u,a),c=Uv(e,t,n,r[i],i,[l,...c],l,u)}return Array.isArray(r.errors)&&r.errors.forEach((l,u)=>{if(Yo(l,Error)){Z6(s,a);const d=e(t,l),p=c.length;Q6(d,`errors[${u}]`,p,a),c=Uv(e,t,n,l,i,[d,...c],d,p)}}),c}function Z6(e,t){e.mechanism=e.mechanism||{type:"generic",handled:!0},e.mechanism={...e.mechanism,...e.type==="AggregateError"&&{is_exception_group:!0},exception_id:t}}function Q6(e,t,n,r){e.mechanism=e.mechanism||{type:"generic",handled:!0},e.mechanism={...e.mechanism,type:"chained",source:t,exception_id:n,parent_id:r}}function _V(e,t){return e.map(n=>(n.value&&(n.value=tl(n.value,t)),n))}function La(e){if(!e)return{};const t=e.match(/^(([^:/?#]+):)?(\/\/([^/?#]*))?([^?#]*)(\?([^#]*))?(#(.*))?$/);if(!t)return{};const n=t[6]||"",r=t[8]||"";return{host:t[4],path:t[5],protocol:t[2],search:n,hash:r,relative:t[5]+n+r}}function J6(e){return e.split(/\\?\//).filter(t=>t.length>0&&t!==",").length}function bV(e){const t="console";ea(t,e),ta(t,wV)}function wV(){"console"in Xe&&Tv.forEach(function(e){e in Xe.console&&xr(Xe.console,e,function(t){return Qp[e]=t,function(...n){ti("console",{args:n,level:e});const i=Qp[e];i&&i.apply(Xe.console,n)}})})}function SV(e){return e==="warn"?"warning":["fatal","error","warning","log","info","debug"].includes(e)?e:"log"}const CV="Dedupe",EV=(()=>{let e;return{name:CV,processEvent(t){if(t.type)return t;try{if(IV(t,e))return Ne&&Q.warn("Event dropped due to being a duplicate of previously captured event."),null}catch{}return e=t}}}),xV=EV;function IV(e,t){return t?!!(RV(e,t)||LV(e,t)):!1}function RV(e,t){const n=e.message,r=t.message;return!(!n&&!r||n&&!r||!n&&r||n!==r||!Zx(e,t)||!Xx(e,t))}function LV(e,t){const n=e5(t),r=e5(e);return!(!n||!r||n.type!==r.type||n.value!==r.value||!Zx(e,t)||!Xx(e,t))}function Xx(e,t){let n=_6(e),r=_6(t);if(!n&&!r)return!0;if(n&&!r||!n&&r||(n=n,r=r,r.length!==n.length))return!1;for(let i=0;i<r.length;i++){const o=r[i],s=n[i];if(o.filename!==s.filename||o.lineno!==s.lineno||o.colno!==s.colno||o.function!==s.function)return!1}return!0}function Zx(e,t){let n=e.fingerprint,r=t.fingerprint;if(!n&&!r)return!0;if(n&&!r||!n&&r)return!1;n=n,r=r;try{return n.join("")===r.join("")}catch{return!1}}function e5(e){return e.exception&&e.exception.values&&e.exception.values[0]}function kV(e,t,n,r,i="auto.http.browser"){if(!e.fetchData)return;const o=Gs()&&t(e.fetchData.url);if(e.endTimestamp&&o){const p=e.fetchData.__span;if(!p)return;const g=r[p];g&&(PV(g,e),delete r[p]);return}const{method:s,url:a}=e.fetchData,c=AV(a),l=c?La(c).host:void 0,u=!!In(),d=o&&u?wf({name:`${s} ${a}`,attributes:{url:a,type:"fetch","http.method":s,"http.url":c,"server.address":l,[Qt]:i,[Xo]:"http.client"}}):new Jl;if(e.fetchData.__span=d.spanContext().spanId,r[d.spanContext().spanId]=d,n(e.fetchData.url)){const p=e.args[0],g=e.args[1]||{},v=TV(p,g,Gs()&&u?d:void 0);v&&(e.args[1]=g,g.headers=v)}return d}function TV(e,t,n){const r=Yx({span:n}),i=r["sentry-trace"],o=r.baggage;if(!i)return;const s=t.headers||(MV(e)?e.headers:void 0);if(s)if(NV(s)){const a=new Headers(s);if(a.set("sentry-trace",i),o){const c=a.get("baggage");if(c){const l=fh(c);a.set("baggage",l?`${l},${o}`:o)}else a.set("baggage",o)}return a}else if(Array.isArray(s)){const a=[...s.filter(c=>!(Array.isArray(c)&&c[0]==="sentry-trace")).map(c=>{if(Array.isArray(c)&&c[0]==="baggage"&&typeof c[1]=="string"){const[l,u,...d]=c;return[l,fh(u),...d]}else return c}),["sentry-trace",i]];return o&&a.push(["baggage",o]),a}else{const a="baggage"in s?s.baggage:void 0;let c=[];return Array.isArray(a)?c=a.map(l=>typeof l=="string"?fh(l):l).filter(l=>l===""):a&&c.push(fh(a)),o&&c.push(o),{...s,"sentry-trace":i,baggage:c.length>0?c.join(","):void 0}}else return{...r}}function AV(e){try{return new URL(e).href}catch{return}}function PV(e,t){if(t.response){yx(e,t.response.status);const n=t.response&&t.response.headers&&t.response.headers.get("content-length");if(n){const r=parseInt(n);r>0&&e.setAttribute("http.response_content_length",r)}}else t.error&&e.setStatus({code:dn,message:"internal_error"});e.end()}function fh(e){return e.split(",").filter(t=>!t.split("=")[0].startsWith(a4)).join(",")}function MV(e){return typeof Request<"u"&&Yo(e,Request)}function NV(e){return typeof Headers<"u"&&Yo(e,Headers)}function Qx(e){if(e!==void 0)return e>=400&&e<500?"warning":e>=500?"error":void 0}const Bv=Xe;function Jx(){if(!("fetch"in Bv))return!1;try{return new Headers,new Request("http://www.example.com"),new Response,!0}catch{return!1}}function Vv(e){return e&&/^function\s+\w+\(\)\s+\{\s+\[native code\]\s+\}$/.test(e.toString())}function $V(){if(typeof EdgeRuntime=="string")return!0;if(!Jx())return!1;if(Vv(Bv.fetch))return!0;let e=!1;const t=Bv.document;if(t&&typeof t.createElement=="function")try{const n=t.createElement("iframe");n.hidden=!0,t.head.appendChild(n),n.contentWindow&&n.contentWindow.fetch&&(e=Vv(n.contentWindow.fetch)),t.head.removeChild(n)}catch(n){Js&&Q.warn("Could not create sandbox iframe for pure fetch check, bailing to window.fetch: ",n)}return e}function eI(e,t){const n="fetch";ea(n,e),ta(n,()=>tI(void 0,t))}function OV(e){const t="fetch-body-resolved";ea(t,e),ta(t,()=>tI(DV))}function tI(e,t=!1){t&&!$V()||xr(Xe,"fetch",function(n){return function(...r){const i=new Error,{method:o,url:s}=FV(r),a={args:r,fetchData:{method:o,url:s},startTimestamp:Bn()*1e3,virtualError:i};return e||ti("fetch",{...a}),n.apply(Xe,r).then(async c=>(e?e(c):ti("fetch",{...a,endTimestamp:Bn()*1e3,response:c}),c),c=>{throw ti("fetch",{...a,endTimestamp:Bn()*1e3,error:c}),pg(c)&&c.stack===void 0&&(c.stack=i.stack,ci(c,"framesToPop",1)),c})}})}async function jV(e,t){if(e&&e.body){const n=e.body,r=n.getReader(),i=setTimeout(()=>{n.cancel().then(null,()=>{})},90*1e3);let o=!0;for(;o;){let s;try{s=setTimeout(()=>{n.cancel().then(null,()=>{})},5e3);const{done:a}=await r.read();clearTimeout(s),a&&(t(),o=!1)}catch{o=!1}finally{clearTimeout(s)}}clearTimeout(i),r.releaseLock(),n.cancel().then(null,()=>{})}}function DV(e){let t;try{t=e.clone()}catch{return}jV(t,()=>{ti("fetch-body-resolved",{endTimestamp:Bn()*1e3,response:e})})}function qv(e,t){return!!e&&typeof e=="object"&&!!e[t]}function t5(e){return typeof e=="string"?e:e?qv(e,"url")?e.url:e.toString?e.toString():"":""}function FV(e){if(e.length===0)return{method:"GET",url:""};if(e.length===2){const[n,r]=e;return{url:t5(n),method:qv(r,"method")?String(r.method).toUpperCase():"GET"}}const t=e[0];return{url:t5(t),method:qv(t,"method")?String(t.method).toUpperCase():"GET"}}function HV(){return"npm"}const hh=Xe;function UV(){const e=hh.chrome,t=e&&e.app&&e.app.runtime,n="history"in hh&&!!hh.history.pushState&&!!hh.history.replaceState;return!t&&n}const _e=Xe;let Gv=0;function nI(){return Gv>0}function BV(){Gv++,setTimeout(()=>{Gv--})}function wl(e,t={}){function n(i){return typeof i=="function"}if(!n(e))return e;try{const i=e.__sentry_wrapped__;if(i)return typeof i=="function"?i:e;if(i4(e))return e}catch{return e}const r=function(...i){try{const o=i.map(s=>wl(s,t));return e.apply(this,o)}catch(o){throw BV(),yg(s=>{s.addEventProcessor(a=>(t.mechanism&&(Pv(a,void 0),yl(a,t.mechanism)),a.extra={...a.extra,arguments:i},a)),wg(o)}),o}};try{for(const i in e)Object.prototype.hasOwnProperty.call(e,i)&&(r[i]=e[i])}catch{}fx(r,e),ci(e,"__sentry_wrapped__",r);try{Object.getOwnPropertyDescriptor(r,"name").configurable&&Object.defineProperty(r,"name",{get(){return e.name}})}catch{}return r}const Ir=typeof __SENTRY_DEBUG__>"u"||__SENTRY_DEBUG__;function u4(e,t){const n=d4(e,t),r={type:WV(t),value:zV(t)};return n.length&&(r.stacktrace={frames:n}),r.type===void 0&&r.value===""&&(r.value="Unrecoverable error caught"),r}function VV(e,t,n,r){const i=tt(),o=i&&i.getOptions().normalizeDepth,s=JV(t),a={__serialized__:$x(t,o)};if(s)return{exception:{values:[u4(e,s)]},extra:a};const c={exception:{values:[{type:gg(t)?t.constructor.name:r?"UnhandledRejection":"Error",value:ZV(t,{isUnhandledRejection:r})}]},extra:a};if(n){const l=d4(e,n);l.length&&(c.exception.values[0].stacktrace={frames:l})}return c}function l0(e,t){return{exception:{values:[u4(e,t)]}}}function d4(e,t){const n=t.stacktrace||t.stack||"",r=GV(t),i=KV(t);try{return e(n,r,i)}catch{}return[]}const qV=/Minified React error #\d+;/i;function GV(e){return e&&qV.test(e.message)?1:0}function KV(e){return typeof e.framesToPop=="number"?e.framesToPop:0}function rI(e){return typeof WebAssembly<"u"&&typeof WebAssembly.Exception<"u"?e instanceof WebAssembly.Exception:!1}function WV(e){const t=e&&e.name;return!t&&rI(e)?e.message&&Array.isArray(e.message)&&e.message.length==2?e.message[0]:"WebAssembly.Exception":t}function zV(e){const t=e&&e.message;return t?t.error&&typeof t.error.message=="string"?t.error.message:rI(e)&&Array.isArray(e.message)&&e.message.length==2?e.message[1]:t:"No error message"}function YV(e,t,n,r){const i=n&&n.syntheticException||void 0,o=f4(e,t,i,r);return yl(o),o.level="error",n&&n.event_id&&(o.event_id=n.event_id),$a(o)}function XV(e,t,n="info",r,i){const o=r&&r.syntheticException||void 0,s=Kv(e,t,o,i);return s.level=n,r&&r.event_id&&(s.event_id=r.event_id),$a(s)}function f4(e,t,n,r,i){let o;if(lx(t)&&t.error)return l0(e,t.error);if(w6(t)||FH(t)){const s=t;if("stack"in t)o=l0(e,t);else{const a=s.name||(w6(s)?"DOMError":"DOMException"),c=s.message?`${a}: ${s.message}`:a;o=Kv(e,c,n,r),Pv(o,c)}return"code"in s&&(o.tags={...o.tags,"DOMException.code":`${s.code}`}),o}return pg(t)?l0(e,t):vl(t)||gg(t)?(o=VV(e,t,n,i),yl(o,{synthetic:!0}),o):(o=Kv(e,t,n,r),Pv(o,`${t}`),yl(o,{synthetic:!0}),o)}function Kv(e,t,n,r){const i={};if(r&&n){const o=d4(e,n);o.length&&(i.exception={values:[{value:t,stacktrace:{frames:o}}]}),yl(i,{synthetic:!0})}if(n4(t)){const{__sentry_template_string__:o,__sentry_template_values__:s}=t;return i.logentry={message:o,params:s},i}return i.message=t,i}function ZV(e,{isUnhandledRejection:t}){const n=zH(e),r=t?"promise rejection":"exception";return lx(e)?`Event \`ErrorEvent\` captured as ${r} with message \`${e.message}\``:gg(e)?`Event \`${QV(e)}\` (type=${e.type}) captured as ${r}`:`Object captured as ${r} with keys: ${n}`}function QV(e){try{const t=Object.getPrototypeOf(e);return t?t.constructor.name:void 0}catch{}}function JV(e){for(const t in e)if(Object.prototype.hasOwnProperty.call(e,t)){const n=e[t];if(n instanceof Error)return n}}function eq(e,{metadata:t,tunnel:n,dsn:r}){const i={event_id:e.event_id,sent_at:new Date().toISOString(),...t&&t.sdk&&{sdk:{name:t.sdk.name,version:t.sdk.version}},...!!n&&!!r&&{dsn:tu(r)}},o=tq(e);return nu(i,[o])}function tq(e){return[{type:"user_report"},e]}class nq extends HB{constructor(t){const n={parentSpanIsAlwaysRootSpan:!0,...t},r=_e.SENTRY_SDK_SOURCE||HV();zx(n,"browser",["browser"],r),super(n),n.sendClientReports&&_e.document&&_e.document.addEventListener("visibilitychange",()=>{_e.document.visibilityState==="hidden"&&this._flushOutcomes()})}eventFromException(t,n){return YV(this._options.stackParser,t,n,this._options.attachStacktrace)}eventFromMessage(t,n="info",r){return XV(this._options.stackParser,t,n,r,this._options.attachStacktrace)}captureUserFeedback(t){if(!this._isEnabled()){Ir&&Q.warn("SDK not enabled, will not capture user feedback.");return}const n=eq(t,{metadata:this.getSdkMetadata(),dsn:this.getDsn(),tunnel:this.getOptions().tunnel});this.sendEnvelope(n)}_prepareEvent(t,n,r){return t.platform=t.platform||"javascript",super._prepareEvent(t,n,r)}}const h4=typeof __SENTRY_DEBUG__>"u"||__SENTRY_DEBUG__,rq=(e,t)=>e>t[1]?"poor":e>t[0]?"needs-improvement":"good",ru=(e,t,n,r)=>{let i,o;return s=>{t.value>=0&&(s||r)&&(o=t.value-(i||0),(o||i===void 0)&&(i=t.value,t.delta=o,t.rating=rq(t.value,n),e(t)))}},be=Xe,iq=()=>`v4-${Date.now()}-${Math.floor(Math.random()*(9e12-1))+1e12}`,Sf=(e=!0)=>{const t=be.performance&&be.performance.getEntriesByType&&be.performance.getEntriesByType("navigation")[0];if(!e||t&&t.responseStart>0&&t.responseStart<performance.now())return t},Cf=()=>{const e=Sf();return e&&e.activationStart||0},iu=(e,t)=>{const n=Sf();let r="navigate";return n&&(be.document&&be.document.prerendering||Cf()>0?r="prerender":be.document&&be.document.wasDiscarded?r="restore":n.type&&(r=n.type.replace(/_/g,"-"))),{name:e,value:typeof t>"u"?-1:t,rating:"good",delta:0,entries:[],id:iq(),navigationType:r}},Ja=(e,t,n)=>{try{if(PerformanceObserver.supportedEntryTypes.includes(e)){const r=new PerformanceObserver(i=>{Promise.resolve().then(()=>{t(i.getEntries())})});return r.observe(Object.assign({type:e,buffered:!0},n||{})),r}}catch{}},ou=e=>{const t=n=>{(n.type==="pagehide"||be.document&&be.document.visibilityState==="hidden")&&e(n)};be.document&&(addEventListener("visibilitychange",t,!0),addEventListener("pagehide",t,!0))},Sg=e=>{let t=!1;return()=>{t||(e(),t=!0)}};let od=-1;const oq=()=>be.document.visibilityState==="hidden"&&!be.document.prerendering?0:1/0,n1=e=>{be.document.visibilityState==="hidden"&&od>-1&&(od=e.type==="visibilitychange"?e.timeStamp:0,aq())},sq=()=>{addEventListener("visibilitychange",n1,!0),addEventListener("prerenderingchange",n1,!0)},aq=()=>{removeEventListener("visibilitychange",n1,!0),removeEventListener("prerenderingchange",n1,!0)},Cg=()=>(be.document&&od<0&&(od=oq(),sq()),{get firstHiddenTime(){return od}}),Ef=e=>{be.document&&be.document.prerendering?addEventListener("prerenderingchange",()=>e(),!0):e()},cq=[1800,3e3],lq=(e,t={})=>{Ef(()=>{const n=Cg(),r=iu("FCP");let i;const s=Ja("paint",a=>{a.forEach(c=>{c.name==="first-contentful-paint"&&(s.disconnect(),c.startTime<n.firstHiddenTime&&(r.value=Math.max(c.startTime-Cf(),0),r.entries.push(c),i(!0)))})});s&&(i=ru(e,r,cq,t.reportAllChanges))})},uq=[.1,.25],dq=(e,t={})=>{lq(Sg(()=>{const n=iu("CLS",0);let r,i=0,o=[];const s=c=>{c.forEach(l=>{if(!l.hadRecentInput){const u=o[0],d=o[o.length-1];i&&u&&d&&l.startTime-d.startTime<1e3&&l.startTime-u.startTime<5e3?(i+=l.value,o.push(l)):(i=l.value,o=[l])}}),i>n.value&&(n.value=i,n.entries=o,r())},a=Ja("layout-shift",s);a&&(r=ru(e,n,uq,t.reportAllChanges),ou(()=>{s(a.takeRecords()),r(!0)}),setTimeout(r,0))}))},fq=[100,300],hq=(e,t={})=>{Ef(()=>{const n=Cg(),r=iu("FID");let i;const o=c=>{c.startTime<n.firstHiddenTime&&(r.value=c.processingStart-c.startTime,r.entries.push(c),i(!0))},s=c=>{c.forEach(o)},a=Ja("first-input",s);i=ru(e,r,fq,t.reportAllChanges),a&&ou(Sg(()=>{s(a.takeRecords()),a.disconnect()}))})};let iI=0,u0=1/0,ph=0;const pq=e=>{e.forEach(t=>{t.interactionId&&(u0=Math.min(u0,t.interactionId),ph=Math.max(ph,t.interactionId),iI=ph?(ph-u0)/7+1:0)})};let Wv;const gq=()=>Wv?iI:performance.interactionCount||0,mq=()=>{"interactionCount"in performance||Wv||(Wv=Ja("event",pq,{type:"event",buffered:!0,durationThreshold:0}))},Io=[],d0=new Map,vq=40;let yq=0;const _q=()=>gq()-yq,bq=()=>{const e=Math.min(Io.length-1,Math.floor(_q()/50));return Io[e]},f0=10,wq=[],Sq=e=>{if(wq.forEach(r=>r(e)),!(e.interactionId||e.entryType==="first-input"))return;const t=Io[Io.length-1],n=d0.get(e.interactionId);if(n||Io.length<f0||t&&e.duration>t.latency){if(n)e.duration>n.latency?(n.entries=[e],n.latency=e.duration):e.duration===n.latency&&e.startTime===(n.entries[0]&&n.entries[0].startTime)&&n.entries.push(e);else{const r={id:e.interactionId,latency:e.duration,entries:[e]};d0.set(r.id,r),Io.push(r)}Io.sort((r,i)=>i.latency-r.latency),Io.length>f0&&Io.splice(f0).forEach(r=>d0.delete(r.id))}},oI=e=>{const t=be.requestIdleCallback||be.setTimeout;let n=-1;return e=Sg(e),be.document&&be.document.visibilityState==="hidden"?e():(n=t(e),ou(e)),n},Cq=[200,500],Eq=(e,t={})=>{"PerformanceEventTiming"in be&&"interactionId"in PerformanceEventTiming.prototype&&Ef(()=>{mq();const n=iu("INP");let r;const i=s=>{oI(()=>{s.forEach(Sq);const a=bq();a&&a.latency!==n.value&&(n.value=a.latency,n.entries=a.entries,r())})},o=Ja("event",i,{durationThreshold:t.durationThreshold!=null?t.durationThreshold:vq});r=ru(e,n,Cq,t.reportAllChanges),o&&(o.observe({type:"first-input",buffered:!0}),ou(()=>{i(o.takeRecords()),r(!0)}))})},xq=[2500,4e3],n5={},Iq=(e,t={})=>{Ef(()=>{const n=Cg(),r=iu("LCP");let i;const o=a=>{t.reportAllChanges||(a=a.slice(-1)),a.forEach(c=>{c.startTime<n.firstHiddenTime&&(r.value=Math.max(c.startTime-Cf(),0),r.entries=[c],i())})},s=Ja("largest-contentful-paint",o);if(s){i=ru(e,r,xq,t.reportAllChanges);const a=Sg(()=>{n5[r.id]||(o(s.takeRecords()),s.disconnect(),n5[r.id]=!0,i(!0))});["keydown","click"].forEach(c=>{be.document&&addEventListener(c,()=>oI(a),{once:!0,capture:!0})}),ou(a)}})},Rq=[800,1800],zv=e=>{be.document&&be.document.prerendering?Ef(()=>zv(e)):be.document&&be.document.readyState!=="complete"?addEventListener("load",()=>zv(e),!0):setTimeout(e,0)},Lq=(e,t={})=>{const n=iu("TTFB"),r=ru(e,n,Rq,t.reportAllChanges);zv(()=>{const i=Sf();i&&(n.value=Math.max(i.responseStart-Cf(),0),n.entries=[i],r(!0))})},sd={},r1={};let sI,aI,cI,lI,uI;function dI(e,t=!1){return xf("cls",e,Mq,sI,t)}function kq(e,t=!1){return xf("lcp",e,$q,cI,t)}function Tq(e){return xf("fid",e,Nq,aI)}function Aq(e){return xf("ttfb",e,Oq,lI)}function Pq(e){return xf("inp",e,jq,uI)}function Nd(e,t){return fI(e,t),r1[e]||(Dq(e),r1[e]=!0),hI(e,t)}function su(e,t){const n=sd[e];if(!(!n||!n.length))for(const r of n)try{r(t)}catch(i){h4&&Q.error(`Error while triggering instrumentation handler.
Type: ${e}
Name: ${zo(r)}
Error:`,i)}}function Mq(){return dq(e=>{su("cls",{metric:e}),sI=e},{reportAllChanges:!0})}function Nq(){return hq(e=>{su("fid",{metric:e}),aI=e})}function $q(){return Iq(e=>{su("lcp",{metric:e}),cI=e},{reportAllChanges:!0})}function Oq(){return Lq(e=>{su("ttfb",{metric:e}),lI=e})}function jq(){return Eq(e=>{su("inp",{metric:e}),uI=e})}function xf(e,t,n,r,i=!1){fI(e,t);let o;return r1[e]||(o=n(),r1[e]=!0),r&&t({metric:r}),hI(e,t,i?o:void 0)}function Dq(e){const t={};e==="event"&&(t.durationThreshold=0),Ja(e,n=>{su(e,{entries:n})},t)}function fI(e,t){sd[e]=sd[e]||[],sd[e].push(t)}function hI(e,t,n){return()=>{n&&n();const r=sd[e];if(!r)return;const i=r.indexOf(t);i!==-1&&r.splice(i,1)}}function Fq(e){return"duration"in e}function h0(e){return typeof e=="number"&&isFinite(e)}function Zo(e,t,n,{...r}){const i=Je(e).start_timestamp;return i&&i>t&&typeof e.updateStartTime=="function"&&e.updateStartTime(t),Dx(e,()=>{const o=wf({startTime:t,...r});return o&&o.end(n),o})}function pI(e){const t=tt();if(!t)return;const{name:n,transaction:r,attributes:i,startTime:o}=e,{release:s,environment:a}=t.getOptions(),c=t.getIntegrationByName("Replay"),l=c&&c.getReplayId(),u=yt(),d=u.getUser(),p=d!==void 0?d.email||d.id||d.ip_address:void 0;let g;try{g=u.getScopeData().contexts.profile.profile_id}catch{}const v={release:s,environment:a,user:p||void 0,profile_id:g||void 0,replay_id:l||void 0,transaction:r,"user_agent.original":be.navigator&&be.navigator.userAgent,...i};return wf({name:n,attributes:v,startTime:o,experimental:{standalone:!0}})}function p4(){return be&&be.addEventListener&&be.performance}function Gt(e){return e/1e3}function gI(e){let t="unknown",n="unknown",r="";for(const i of e){if(i==="/"){[t,n]=e.split("/");break}if(!isNaN(Number(i))){t=r==="h"?"http":r,n=e.split(r)[1];break}r+=i}return r===e&&(t=r),{name:t,version:n}}function Hq(){let e=0,t,n;if(!Bq())return;let r=!1;function i(){r||(r=!0,n&&Uq(e,t,n),o())}const o=dI(({metric:s})=>{const a=s.entries[s.entries.length-1];a&&(e=s.value,t=a)},!0);ou(()=>{i()}),setTimeout(()=>{const s=tt();if(!s)return;const a=s.on("startNavigationSpan",()=>{i(),a&&a()}),c=In(),l=c&&xn(c),u=l&&Je(l);u&&u.op==="pageload"&&(n=l.spanContext().spanId)},0)}function Uq(e,t,n){h4&&Q.log(`Sending CLS span (${e})`);const r=Gt((hr||0)+(t&&t.startTime||0)),i=yt().getScopeData().transactionName,o=t?Na(t.sources[0]&&t.sources[0].node):"Layout shift",s=En({[Qt]:"auto.http.browser.cls",[Xo]:"ui.webvital.cls",[s4]:t&&t.duration||0,"sentry.pageload.span_id":n}),a=pI({name:o,transaction:i,attributes:s,startTime:r});a&&(a.addEvent("cls",{[_g]:"",[bg]:e}),a.end(r))}function Bq(){try{return PerformanceObserver.supportedEntryTypes.includes("layout-shift")}catch{return!1}}const Vq=2147483647;let r5=0,wn={},Qn,ad;function qq({recordClsStandaloneSpans:e}){const t=p4();if(t&&hr){t.mark&&be.performance.mark("sentry-tracing-init");const n=Xq(),r=Yq(),i=Zq(),o=e?Hq():zq();return()=>{n(),r(),i(),o&&o()}}return()=>{}}function Gq(){Nd("longtask",({entries:e})=>{const t=In();if(!t)return;const{op:n,start_timestamp:r}=Je(t);for(const i of e){const o=Gt(hr+i.startTime),s=Gt(i.duration);n==="navigation"&&r&&o<r||Zo(t,o,o+s,{name:"Main UI thread blocked",op:"ui.long-task",attributes:{[Qt]:"auto.ui.browser.metrics"}})}})}function Kq(){new PerformanceObserver(t=>{const n=In();if(n)for(const r of t.getEntries()){if(!r.scripts[0])continue;const i=Gt(hr+r.startTime),{start_timestamp:o,op:s}=Je(n);if(s==="navigation"&&o&&i<o)continue;const a=Gt(r.duration),c={[Qt]:"auto.ui.browser.metrics"},l=r.scripts[0],{invoker:u,invokerType:d,sourceURL:p,sourceFunctionName:g,sourceCharPosition:v}=l;c["browser.script.invoker"]=u,c["browser.script.invoker_type"]=d,p&&(c["code.filepath"]=p),g&&(c["code.function"]=g),v!==-1&&(c["browser.script.source_char_position"]=v),Zo(n,i,i+a,{name:"Main UI thread blocked",op:"ui.long-animation-frame",attributes:c})}}).observe({type:"long-animation-frame",buffered:!0})}function Wq(){Nd("event",({entries:e})=>{const t=In();if(t){for(const n of e)if(n.name==="click"){const r=Gt(hr+n.startTime),i=Gt(n.duration),o={name:Na(n.target),op:`ui.interaction.${n.name}`,startTime:r,attributes:{[Qt]:"auto.ui.browser.metrics"}},s=dx(n.target);s&&(o.attributes["ui.component_name"]=s),Zo(t,r,r+i,o)}}})}function zq(){return dI(({metric:e})=>{const t=e.entries[e.entries.length-1];t&&(wn.cls={value:e.value,unit:""},ad=t)},!0)}function Yq(){return kq(({metric:e})=>{const t=e.entries[e.entries.length-1];t&&(wn.lcp={value:e.value,unit:"millisecond"},Qn=t)},!0)}function Xq(){return Tq(({metric:e})=>{const t=e.entries[e.entries.length-1];if(!t)return;const n=Gt(hr),r=Gt(t.startTime);wn.fid={value:e.value,unit:"millisecond"},wn["mark.fid"]={value:n+r,unit:"second"}})}function Zq(){return Aq(({metric:e})=>{e.entries[e.entries.length-1]&&(wn.ttfb={value:e.value,unit:"millisecond"})})}function Qq(e,t){const n=p4();if(!n||!n.getEntries||!hr)return;const r=Gt(hr),i=n.getEntries(),{op:o,start_timestamp:s}=Je(e);if(i.slice(r5).forEach(a=>{const c=Gt(a.startTime),l=Gt(Math.max(0,a.duration));if(!(o==="navigation"&&s&&r+c<s))switch(a.entryType){case"navigation":{eG(e,a,r);break}case"mark":case"paint":case"measure":{Jq(e,a,c,l,r);const u=Cg(),d=a.startTime<u.firstHiddenTime;a.name==="first-paint"&&d&&(wn.fp={value:a.startTime,unit:"millisecond"}),a.name==="first-contentful-paint"&&d&&(wn.fcp={value:a.startTime,unit:"millisecond"});break}case"resource":{rG(e,a,a.name,c,l,r);break}}}),r5=Math.max(i.length-1,0),iG(e),o==="pageload"){sG(wn);const a=wn["mark.fid"];a&&wn.fid&&(Zo(e,a.value,a.value+Gt(wn.fid.value),{name:"first input delay",op:"ui.action",attributes:{[Qt]:"auto.ui.browser.metrics"}}),delete wn["mark.fid"]),(!("fcp"in wn)||!t.recordClsOnPageloadSpan)&&delete wn.cls,Object.entries(wn).forEach(([c,l])=>{QU(c,l.value,l.unit)}),e.setAttribute("performance.timeOrigin",r),e.setAttribute("performance.activationStart",Cf()),oG(e)}Qn=void 0,ad=void 0,wn={}}function Jq(e,t,n,r,i){const o=Sf(!1),s=Gt(o?o.requestStart:0),a=i+Math.max(n,s),c=i+n,l=c+r,u={[Qt]:"auto.resource.browser.metrics"};return a!==c&&(u["sentry.browser.measure_happened_before_request"]=!0,u["sentry.browser.measure_start_time"]=a),Zo(e,a,l,{name:t.name,op:t.entryType,attributes:u}),a}function eG(e,t,n){["unloadEvent","redirect","domContentLoadedEvent","loadEvent","connect"].forEach(r=>{gh(e,t,r,n)}),gh(e,t,"secureConnection",n,"TLS/SSL"),gh(e,t,"fetch",n,"cache"),gh(e,t,"domainLookup",n,"DNS"),nG(e,t,n)}function gh(e,t,n,r,i=n){const o=tG(n),s=t[o],a=t[`${n}Start`];!a||!s||Zo(e,r+Gt(a),r+Gt(s),{op:`browser.${i}`,name:t.name,attributes:{[Qt]:"auto.ui.browser.metrics"}})}function tG(e){return e==="secureConnection"?"connectEnd":e==="fetch"?"domainLookupStart":`${e}End`}function nG(e,t,n){const r=n+Gt(t.requestStart),i=n+Gt(t.responseEnd),o=n+Gt(t.responseStart);t.responseEnd&&(Zo(e,r,i,{op:"browser.request",name:t.name,attributes:{[Qt]:"auto.ui.browser.metrics"}}),Zo(e,o,i,{op:"browser.response",name:t.name,attributes:{[Qt]:"auto.ui.browser.metrics"}}))}function rG(e,t,n,r,i,o){if(t.initiatorType==="xmlhttprequest"||t.initiatorType==="fetch")return;const s=La(n),a={[Qt]:"auto.resource.browser.metrics"};p0(a,t,"transferSize","http.response_transfer_size"),p0(a,t,"encodedBodySize","http.response_content_length"),p0(a,t,"decodedBodySize","http.decoded_response_content_length");const c=t.deliveryType;c!=null&&(a["http.response_delivery_type"]=c);const l=t.renderBlockingStatus;l&&(a["resource.render_blocking_status"]=l),s.protocol&&(a["url.scheme"]=s.protocol.split(":").pop()),s.host&&(a["server.address"]=s.host),a["url.same_origin"]=n.includes(be.location.origin);const{name:u,version:d}=gI(t.nextHopProtocol);a["network.protocol.name"]=u,a["network.protocol.version"]=d;const p=o+r,g=p+i;Zo(e,p,g,{name:n.replace(be.location.origin,""),op:t.initiatorType?`resource.${t.initiatorType}`:"resource.other",attributes:a})}function iG(e){const t=be.navigator;if(!t)return;const n=t.connection;n&&(n.effectiveType&&e.setAttribute("effectiveConnectionType",n.effectiveType),n.type&&e.setAttribute("connectionType",n.type),h0(n.rtt)&&(wn["connection.rtt"]={value:n.rtt,unit:"millisecond"})),h0(t.deviceMemory)&&e.setAttribute("deviceMemory",`${t.deviceMemory} GB`),h0(t.hardwareConcurrency)&&e.setAttribute("hardwareConcurrency",String(t.hardwareConcurrency))}function oG(e){Qn&&(Qn.element&&e.setAttribute("lcp.element",Na(Qn.element)),Qn.id&&e.setAttribute("lcp.id",Qn.id),Qn.url&&e.setAttribute("lcp.url",Qn.url.trim().slice(0,200)),Qn.loadTime!=null&&e.setAttribute("lcp.loadTime",Qn.loadTime),Qn.renderTime!=null&&e.setAttribute("lcp.renderTime",Qn.renderTime),e.setAttribute("lcp.size",Qn.size)),ad&&ad.sources&&ad.sources.forEach((t,n)=>e.setAttribute(`cls.source.${n+1}`,Na(t.node)))}function p0(e,t,n,r){const i=t[n];i!=null&&i<Vq&&(e[r]=i)}function sG(e){const t=Sf(!1);if(!t)return;const{responseStart:n,requestStart:r}=t;r<=n&&(e["ttfb.requestTime"]={value:n-r,unit:"millisecond"})}const aG=1e3;let i5,Yv,Xv;function cG(e){ea("dom",e),ta("dom",lG)}function lG(){if(!be.document)return;const e=ti.bind(null,"dom"),t=o5(e,!0);be.document.addEventListener("click",t,!1),be.document.addEventListener("keypress",t,!1),["EventTarget","Node"].forEach(n=>{const i=be[n],o=i&&i.prototype;!o||!o.hasOwnProperty||!o.hasOwnProperty("addEventListener")||(xr(o,"addEventListener",function(s){return function(a,c,l){if(a==="click"||a=="keypress")try{const u=this.__sentry_instrumentation_handlers__=this.__sentry_instrumentation_handlers__||{},d=u[a]=u[a]||{refCount:0};if(!d.handler){const p=o5(e);d.handler=p,s.call(this,a,p,l)}d.refCount++}catch{}return s.call(this,a,c,l)}}),xr(o,"removeEventListener",function(s){return function(a,c,l){if(a==="click"||a=="keypress")try{const u=this.__sentry_instrumentation_handlers__||{},d=u[a];d&&(d.refCount--,d.refCount<=0&&(s.call(this,a,d.handler,l),d.handler=void 0,delete u[a]),Object.keys(u).length===0&&delete this.__sentry_instrumentation_handlers__)}catch{}return s.call(this,a,c,l)}}))})}function uG(e){if(e.type!==Yv)return!1;try{if(!e.target||e.target._sentryId!==Xv)return!1}catch{}return!0}function dG(e,t){return e!=="keypress"?!1:!t||!t.tagName?!0:!(t.tagName==="INPUT"||t.tagName==="TEXTAREA"||t.isContentEditable)}function o5(e,t=!1){return n=>{if(!n||n._sentryCaptured)return;const r=fG(n);if(dG(n.type,r))return;ci(n,"_sentryCaptured",!0),r&&!r._sentryId&&ci(r,"_sentryId",ni());const i=n.type==="keypress"?"input":n.type;uG(n)||(e({event:n,name:i,global:t}),Yv=n.type,Xv=r?r._sentryId:void 0),clearTimeout(i5),i5=be.setTimeout(()=>{Xv=void 0,Yv=void 0},aG)}}function fG(e){try{return e.target}catch{return null}}let mh;function g4(e){const t="history";ea(t,e),ta(t,hG)}function hG(){if(!UV())return;const e=be.onpopstate;be.onpopstate=function(...n){const r=be.location.href,i=mh;if(mh=r,ti("history",{from:i,to:r}),e)try{return e.apply(this,n)}catch{}};function t(n){return function(...r){const i=r.length>2?r[2]:void 0;if(i){const o=mh,s=String(i);mh=s,ti("history",{from:o,to:s})}return n.apply(this,r)}}xr(be.history,"pushState",t),xr(be.history,"replaceState",t)}const pp={};function pG(e){const t=pp[e];if(t)return t;let n=be[e];if(Vv(n))return pp[e]=n.bind(be);const r=be.document;if(r&&typeof r.createElement=="function")try{const i=r.createElement("iframe");i.hidden=!0,r.head.appendChild(i);const o=i.contentWindow;o&&o[e]&&(n=o[e]),r.head.removeChild(i)}catch(i){h4&&Q.warn(`Could not create sandbox iframe for ${e} check, bailing to window.${e}: `,i)}return n&&(pp[e]=n.bind(be))}function s5(e){pp[e]=void 0}const qc="__sentry_xhr_v3__";function mI(e){ea("xhr",e),ta("xhr",gG)}function gG(){if(!be.XMLHttpRequest)return;const e=XMLHttpRequest.prototype;e.open=new Proxy(e.open,{apply(t,n,r){const i=new Error,o=Bn()*1e3,s=Do(r[0])?r[0].toUpperCase():void 0,a=mG(r[1]);if(!s||!a)return t.apply(n,r);n[qc]={method:s,url:a,request_headers:{}},s==="POST"&&a.match(/sentry_key/)&&(n.__sentry_own_request__=!0);const c=()=>{const l=n[qc];if(l&&n.readyState===4){try{l.status_code=n.status}catch{}const u={endTimestamp:Bn()*1e3,startTimestamp:o,xhr:n,virtualError:i};ti("xhr",u)}};return"onreadystatechange"in n&&typeof n.onreadystatechange=="function"?n.onreadystatechange=new Proxy(n.onreadystatechange,{apply(l,u,d){return c(),l.apply(u,d)}}):n.addEventListener("readystatechange",c),n.setRequestHeader=new Proxy(n.setRequestHeader,{apply(l,u,d){const[p,g]=d,v=u[qc];return v&&Do(p)&&Do(g)&&(v.request_headers[p.toLowerCase()]=g),l.apply(u,d)}}),t.apply(n,r)}}),e.send=new Proxy(e.send,{apply(t,n,r){const i=n[qc];if(!i)return t.apply(n,r);r[0]!==void 0&&(i.body=r[0]);const o={startTimestamp:Bn()*1e3,xhr:n};return ti("xhr",o),t.apply(n,r)}})}function mG(e){if(Do(e))return e;try{return e.toString()}catch{}}const g0=[],gp=new Map;function vG(){if(p4()&&hr){const t=yG();return()=>{t()}}return()=>{}}const a5={click:"click",pointerdown:"click",pointerup:"click",mousedown:"click",mouseup:"click",touchstart:"click",touchend:"click",mouseover:"hover",mouseout:"hover",mouseenter:"hover",mouseleave:"hover",pointerover:"hover",pointerout:"hover",pointerenter:"hover",pointerleave:"hover",dragstart:"drag",dragend:"drag",drag:"drag",dragenter:"drag",dragleave:"drag",dragover:"drag",drop:"drag",keydown:"press",keyup:"press",keypress:"press",input:"press"};function yG(){return Pq(({metric:e})=>{if(e.value==null)return;const t=e.entries.find(v=>v.duration===e.value&&a5[v.name]);if(!t)return;const{interactionId:n}=t,r=a5[t.name],i=Gt(hr+t.startTime),o=Gt(e.value),s=In(),a=s?xn(s):void 0,l=(n!=null?gp.get(n):void 0)||a,u=l?Je(l).description:yt().getScopeData().transactionName,d=Na(t.target),p=En({[Qt]:"auto.http.browser.inp",[Xo]:`ui.interaction.${r}`,[s4]:t.duration}),g=pI({name:d,transaction:u,attributes:p,startTime:i});g&&(g.addEvent("inp",{[_g]:"millisecond",[bg]:e.value}),g.end(i+o))})}function _G(e){const t=({entries:n})=>{const r=In(),i=r&&xn(r);n.forEach(o=>{if(!Fq(o)||!i)return;const s=o.interactionId;if(s!=null&&!gp.has(s)){if(g0.length>10){const a=g0.shift();gp.delete(a)}g0.push(s),gp.set(s,i)}})};Nd("event",t),Nd("first-input",t)}function bG(e,t=pG("fetch")){let n=0,r=0;function i(o){const s=o.body.length;n+=s,r++;const a={body:o.body,method:"POST",referrerPolicy:"origin",headers:e.headers,keepalive:n<=6e4&&r<15,...e.fetchOptions};if(!t)return s5("fetch"),Jp("No fetch implementation available");try{return t(e.url,a).then(c=>(n-=s,r--,{statusCode:c.status,headers:{"x-sentry-rate-limits":c.headers.get("X-Sentry-Rate-Limits"),"retry-after":c.headers.get("Retry-After")}}))}catch(c){return s5("fetch"),n-=s,r--,Jp(c)}}return QB(e,i)}const wG=30,SG=50;function Zv(e,t,n,r){const i={filename:e,function:t==="<anonymous>"?Ma:t,in_app:!0};return n!==void 0&&(i.lineno=n),r!==void 0&&(i.colno=r),i}const CG=/^\s*at (\S+?)(?::(\d+))(?::(\d+))\s*$/i,EG=/^\s*at (?:(.+?\)(?: \[.+\])?|.*?) ?\((?:address at )?)?(?:async )?((?:<anonymous>|[-a-z]+:|.*bundle|\/)?.*?)(?::(\d+))?(?::(\d+))?\)?\s*$/i,xG=/\((\S*)(?::(\d+))(?::(\d+))\)/,IG=e=>{const t=CG.exec(e);if(t){const[,r,i,o]=t;return Zv(r,Ma,+i,+o)}const n=EG.exec(e);if(n){if(n[2]&&n[2].indexOf("eval")===0){const s=xG.exec(n[2]);s&&(n[2]=s[1],n[3]=s[2],n[4]=s[3])}const[i,o]=vI(n[1]||Ma,n[2]);return Zv(o,i,n[3]?+n[3]:void 0,n[4]?+n[4]:void 0)}},RG=[wG,IG],LG=/^\s*(.*?)(?:\((.*?)\))?(?:^|@)?((?:[-a-z]+)?:\/.*?|\[native code\]|[^@]*(?:bundle|\d+\.js)|\/[\w\-. /=]+)(?::(\d+))?(?::(\d+))?\s*$/i,kG=/(\S+) line (\d+)(?: > eval line \d+)* > eval/i,TG=e=>{const t=LG.exec(e);if(t){if(t[3]&&t[3].indexOf(" > eval")>-1){const o=kG.exec(t[3]);o&&(t[1]=t[1]||"eval",t[3]=o[1],t[4]=o[2],t[5]="")}let r=t[3],i=t[1]||Ma;return[i,r]=vI(i,r),Zv(r,i,t[4]?+t[4]:void 0,t[5]?+t[5]:void 0)}},AG=[SG,TG],PG=[RG,AG],MG=ox(...PG),vI=(e,t)=>{const n=e.indexOf("safari-extension")!==-1,r=e.indexOf("safari-web-extension")!==-1;return n||r?[e.indexOf("@")!==-1?e.split("@")[0]:Ma,n?`safari-extension:${t}`:`safari-web-extension:${t}`]:[e,t]},vh=1024,NG="Breadcrumbs",$G=((e={})=>{const t={console:!0,dom:!0,fetch:!0,history:!0,sentry:!0,xhr:!0,...e};return{name:NG,setup(n){t.console&&bV(FG(n)),t.dom&&cG(DG(n,t.dom)),t.xhr&&mI(HG(n)),t.fetch&&eI(UG(n)),t.history&&g4(BG(n)),t.sentry&&n.on("beforeSendEvent",jG(n))}}}),OG=$G;function jG(e){return function(n){tt()===e&&Oa({category:`sentry.${n.type==="transaction"?"transaction":"event"}`,event_id:n.event_id,level:n.level,message:ws(n)},{event:n})}}function DG(e,t){return function(r){if(tt()!==e)return;let i,o,s=typeof t=="object"?t.serializeAttribute:void 0,a=typeof t=="object"&&typeof t.maxStringLength=="number"?t.maxStringLength:void 0;a&&a>vh&&(Ir&&Q.warn(`\`dom.maxStringLength\` cannot exceed ${vh}, but a value of ${a} was configured. Sentry will use ${vh} instead.`),a=vh),typeof s=="string"&&(s=[s]);try{const l=r.event,u=VG(l)?l.target:l;i=Na(u,{keyAttrs:s,maxStringLength:a}),o=dx(u)}catch{i="<unknown>"}if(i.length===0)return;const c={category:`ui.${r.name}`,message:i};o&&(c.data={"ui.component_name":o}),Oa(c,{event:r.event,name:r.name,global:r.global})}}function FG(e){return function(n){if(tt()!==e)return;const r={category:"console",data:{arguments:n.args,logger:"console"},level:SV(n.level),message:S6(n.args," ")};if(n.level==="assert")if(n.args[0]===!1)r.message=`Assertion failed: ${S6(n.args.slice(1)," ")||"console.assert"}`,r.data.arguments=n.args.slice(1);else return;Oa(r,{input:n.args,level:n.level})}}function HG(e){return function(n){if(tt()!==e)return;const{startTimestamp:r,endTimestamp:i}=n,o=n.xhr[qc];if(!r||!i||!o)return;const{method:s,url:a,status_code:c,body:l}=o,u={method:s,url:a,status_code:c},d={xhr:n.xhr,input:l,startTimestamp:r,endTimestamp:i},p=Qx(c);Oa({category:"xhr",data:u,type:"http",level:p},d)}}function UG(e){return function(n){if(tt()!==e)return;const{startTimestamp:r,endTimestamp:i}=n;if(i&&!(n.fetchData.url.match(/sentry_key/)&&n.fetchData.method==="POST"))if(n.error){const o=n.fetchData,s={data:n.error,input:n.args,startTimestamp:r,endTimestamp:i};Oa({category:"fetch",data:o,level:"error",type:"http"},s)}else{const o=n.response,s={...n.fetchData,status_code:o&&o.status},a={input:n.args,response:o,startTimestamp:r,endTimestamp:i},c=Qx(s.status_code);Oa({category:"fetch",data:s,type:"http",level:c},a)}}}function BG(e){return function(n){if(tt()!==e)return;let r=n.from,i=n.to;const o=La(_e.location.href);let s=r?La(r):void 0;const a=La(i);(!s||!s.path)&&(s=o),o.protocol===a.protocol&&o.host===a.host&&(i=a.relative),o.protocol===s.protocol&&o.host===s.host&&(r=s.relative),Oa({category:"navigation",data:{from:r,to:i}})}}function VG(e){return!!e&&!!e.target}const qG=["EventTarget","Window","Node","ApplicationCache","AudioTrackList","BroadcastChannel","ChannelMergerNode","CryptoOperation","EventSource","FileReader","HTMLUnknownElement","IDBDatabase","IDBRequest","IDBTransaction","KeyOperation","MediaController","MessagePort","ModalWindow","Notification","SVGElementInstance","Screen","SharedWorker","TextTrack","TextTrackCue","TextTrackList","WebSocket","WebSocketWorker","Worker","XMLHttpRequest","XMLHttpRequestEventTarget","XMLHttpRequestUpload"],GG="BrowserApiErrors",KG=((e={})=>{const t={XMLHttpRequest:!0,eventTarget:!0,requestAnimationFrame:!0,setInterval:!0,setTimeout:!0,...e};return{name:GG,setupOnce(){t.setTimeout&&xr(_e,"setTimeout",c5),t.setInterval&&xr(_e,"setInterval",c5),t.requestAnimationFrame&&xr(_e,"requestAnimationFrame",zG),t.XMLHttpRequest&&"XMLHttpRequest"in _e&&xr(XMLHttpRequest.prototype,"send",YG);const n=t.eventTarget;n&&(Array.isArray(n)?n:qG).forEach(XG)}}}),WG=KG;function c5(e){return function(...t){const n=t[0];return t[0]=wl(n,{mechanism:{data:{function:zo(e)},handled:!1,type:"instrument"}}),e.apply(this,t)}}function zG(e){return function(t){return e.apply(this,[wl(t,{mechanism:{data:{function:"requestAnimationFrame",handler:zo(e)},handled:!1,type:"instrument"}})])}}function YG(e){return function(...t){const n=this;return["onload","onerror","onprogress","onreadystatechange"].forEach(i=>{i in n&&typeof n[i]=="function"&&xr(n,i,function(o){const s={mechanism:{data:{function:i,handler:zo(o)},handled:!1,type:"instrument"}},a=i4(o);return a&&(s.mechanism.data.handler=zo(a)),wl(o,s)})}),e.apply(this,t)}}function XG(e){const n=_e[e],r=n&&n.prototype;!r||!r.hasOwnProperty||!r.hasOwnProperty("addEventListener")||(xr(r,"addEventListener",function(i){return function(o,s,a){try{ZG(s)&&(s.handleEvent=wl(s.handleEvent,{mechanism:{data:{function:"handleEvent",handler:zo(s),target:e},handled:!1,type:"instrument"}}))}catch{}return i.apply(this,[o,wl(s,{mechanism:{data:{function:"addEventListener",handler:zo(s),target:e},handled:!1,type:"instrument"}}),a])}}),xr(r,"removeEventListener",function(i){return function(o,s,a){try{const c=s.__sentry_wrapped__;c&&i.call(this,o,c,a)}catch{}return i.call(this,o,s,a)}}))}function ZG(e){return typeof e.handleEvent=="function"}const QG=()=>({name:"BrowserSession",setupOnce(){if(typeof _e.document>"u"){Ir&&Q.warn("Using the `browserSessionIntegration` in non-browser environments is not supported.");return}V6({ignoreDuration:!0}),q6(),g4(({from:e,to:t})=>{e!==void 0&&e!==t&&(V6({ignoreDuration:!0}),q6())})}}),JG="GlobalHandlers",eK=((e={})=>{const t={onerror:!0,onunhandledrejection:!0,...e};return{name:JG,setupOnce(){Error.stackTraceLimit=50},setup(n){t.onerror&&(nK(n),l5("onerror")),t.onunhandledrejection&&(rK(n),l5("onunhandledrejection"))}}}),tK=eK;function nK(e){sx(t=>{const{stackParser:n,attachStacktrace:r}=yI();if(tt()!==e||nI())return;const{msg:i,url:o,line:s,column:a,error:c}=t,l=sK(f4(n,c||i,void 0,r,!1),o,s,a);l.level="error",Ux(l,{originalException:c,mechanism:{handled:!1,type:"onerror"}})})}function rK(e){ax(t=>{const{stackParser:n,attachStacktrace:r}=yI();if(tt()!==e||nI())return;const i=iK(t),o=r4(i)?oK(i):f4(n,i,void 0,r,!0);o.level="error",Ux(o,{originalException:i,mechanism:{handled:!1,type:"onunhandledrejection"}})})}function iK(e){if(r4(e))return e;try{if("reason"in e)return e.reason;if("detail"in e&&"reason"in e.detail)return e.detail.reason}catch{}return e}function oK(e){return{exception:{values:[{type:"UnhandledRejection",value:`Non-Error promise rejection captured with value: ${String(e)}`}]}}}function sK(e,t,n,r){const i=e.exception=e.exception||{},o=i.values=i.values||[],s=o[0]=o[0]||{},a=s.stacktrace=s.stacktrace||{},c=a.frames=a.frames||[],l=r,u=n,d=Do(t)&&t.length>0?t:GH();return c.length===0&&c.push({colno:l,filename:d,function:Ma,in_app:!0,lineno:u}),e}function l5(e){Ir&&Q.log(`Global Handler attached: ${e}`)}function yI(){const e=tt();return e&&e.getOptions()||{stackParser:()=>[],attachStacktrace:!1}}const aK=()=>({name:"HttpContext",preprocessEvent(e){if(!_e.navigator&&!_e.location&&!_e.document)return;const t=e.request&&e.request.url||_e.location&&_e.location.href,{referrer:n}=_e.document||{},{userAgent:r}=_e.navigator||{},i={...e.request&&e.request.headers,...n&&{Referer:n},...r&&{"User-Agent":r}},o={...e.request,...t&&{url:t},headers:i};e.request=o}}),cK="cause",lK=5,uK="LinkedErrors",dK=((e={})=>{const t=e.limit||lK,n=e.key||cK;return{name:uK,preprocessEvent(r,i,o){const s=o.getOptions();yV(u4,s.stackParser,s.maxValueLength,n,t,r,i)}}}),fK=dK;function hK(e){const t=[aV(),rV(),WG(),OG(),tK(),fK(),xV(),aK()];return e.autoSessionTracking!==!1&&t.push(QG()),t}function pK(e={}){const t={defaultIntegrations:hK(e),release:typeof __SENTRY_RELEASE__=="string"?__SENTRY_RELEASE__:_e.SENTRY_RELEASE&&_e.SENTRY_RELEASE.id?_e.SENTRY_RELEASE.id:void 0,autoSessionTracking:!0,sendClientReports:!0};return e.defaultIntegrations==null&&delete e.defaultIntegrations,{...t,...e}}function gK(){const e=typeof _e.window<"u"&&_e;if(!e)return!1;const t=e.chrome?"chrome":"browser",n=e[t],r=n&&n.runtime&&n.runtime.id,i=_e.location&&_e.location.href||"",o=["chrome-extension:","moz-extension:","ms-browser-extension:","safari-web-extension:"],s=!!r&&_e===_e.top&&o.some(c=>i.startsWith(`${c}//`)),a=typeof e.nw<"u";return!!r&&!s&&!a}function mK(e={}){const t=pK(e);if(!t.skipBrowserExtensionCheck&&gK()){Xa(()=>{console.error("[Sentry] You cannot run Sentry this way in a browser extension, check: https://docs.sentry.io/platforms/javascript/best-practices/browser-extensions/")});return}Ir&&(Jx()||Q.warn("No Fetch API detected. The Sentry SDK requires a Fetch API compatible environment to send events. Please add a Fetch API polyfill."));const n={...t,stackParser:$H(t.stackParser||MG),integrations:jB(t),transport:t.transport||bG};return VB(nq,n)}function u5(e={}){if(!_e.document){Ir&&Q.error("Global document not defined in showReportDialog call");return}const t=yt(),n=t.getClient(),r=n&&n.getDsn();if(!r){Ir&&Q.error("DSN not configured for showReportDialog call");return}if(t&&(e.user={...t.getUser(),...e.user}),!e.eventId){const a=kB();a&&(e.eventId=a)}const i=_e.document.createElement("script");i.async=!0,i.crossOrigin="anonymous",i.src=$B(r,e),e.onLoad&&(i.onload=e.onLoad);const{onClose:o}=e;if(o){const a=c=>{if(c.data==="__sentry_reportdialog_closed__")try{o()}finally{_e.removeEventListener("message",a)}};_e.addEventListener("message",a)}const s=_e.document.head||_e.document.body;s?s.appendChild(i):Ir&&Q.error("Not injecting report dialog. No injection point found in HTML")}const d5=new WeakMap,m0=new Map,mp={traceFetch:!0,traceXHR:!0,enableHTTPTimings:!0,trackFetchStreamPerformance:!1};function vK(e,t){const{traceFetch:n,traceXHR:r,trackFetchStreamPerformance:i,shouldCreateSpanForRequest:o,enableHTTPTimings:s,tracePropagationTargets:a}={traceFetch:mp.traceFetch,traceXHR:mp.traceXHR,trackFetchStreamPerformance:mp.trackFetchStreamPerformance,...t},c=typeof o=="function"?o:d=>!0,l=d=>bK(d,a),u={};n&&(e.addEventProcessor(d=>(d.type==="transaction"&&d.spans&&d.spans.forEach(p=>{if(p.op==="http.client"){const g=m0.get(p.span_id);g&&(p.timestamp=g/1e3,m0.delete(p.span_id))}}),d)),i&&OV(d=>{if(d.response){const p=d5.get(d.response);p&&d.endTimestamp&&m0.set(p,d.endTimestamp)}}),eI(d=>{const p=kV(d,c,l,u);if(d.response&&d.fetchData.__span&&d5.set(d.response,d.fetchData.__span),p){const g=_I(d.fetchData.url),v=g?La(g).host:void 0;p.setAttributes({"http.url":g,"server.address":v})}s&&p&&f5(p)})),r&&mI(d=>{const p=wK(d,c,l,u);s&&p&&f5(p)})}function yK(e){return e.entryType==="resource"&&"initiatorType"in e&&typeof e.nextHopProtocol=="string"&&(e.initiatorType==="fetch"||e.initiatorType==="xmlhttprequest")}function f5(e){const{url:t}=Je(e).data||{};if(!t||typeof t!="string")return;const n=Nd("resource",({entries:r})=>{r.forEach(i=>{yK(i)&&i.name.endsWith(t)&&(_K(i).forEach(s=>e.setAttribute(...s)),setTimeout(n))})})}function Gi(e=0){return((hr||performance.timeOrigin)+e)/1e3}function _K(e){const{name:t,version:n}=gI(e.nextHopProtocol),r=[];return r.push(["network.protocol.version",n],["network.protocol.name",t]),hr?[...r,["http.request.redirect_start",Gi(e.redirectStart)],["http.request.fetch_start",Gi(e.fetchStart)],["http.request.domain_lookup_start",Gi(e.domainLookupStart)],["http.request.domain_lookup_end",Gi(e.domainLookupEnd)],["http.request.connect_start",Gi(e.connectStart)],["http.request.secure_connection_start",Gi(e.secureConnectionStart)],["http.request.connection_end",Gi(e.connectEnd)],["http.request.request_start",Gi(e.requestStart)],["http.request.response_start",Gi(e.responseStart)],["http.request.response_end",Gi(e.responseEnd)]]:r}function bK(e,t){const n=_e.location&&_e.location.href;if(n){let r,i;try{r=new URL(e,n),i=new URL(n).origin}catch{return!1}const o=r.origin===i;return t?xa(r.toString(),t)||o&&xa(r.pathname,t):o}else{const r=!!e.match(/^\/(?!\/)/);return t?xa(e,t):r}}function wK(e,t,n,r){const i=e.xhr,o=i&&i[qc];if(!i||i.__sentry_own_request__||!o)return;const s=Gs()&&t(o.url);if(e.endTimestamp&&s){const d=i.__sentry_xhr_span_id__;if(!d)return;const p=r[d];p&&o.status_code!==void 0&&(yx(p,o.status_code),p.end(),delete r[d]);return}const a=_I(o.url),c=a?La(a).host:void 0,l=!!In(),u=s&&l?wf({name:`${o.method} ${o.url}`,attributes:{type:"xhr","http.method":o.method,"http.url":a,url:o.url,"server.address":c,[Qt]:"auto.http.browser",[Xo]:"http.client"}}):new Jl;return i.__sentry_xhr_span_id__=u.spanContext().spanId,r[i.__sentry_xhr_span_id__]=u,n(o.url)&&SK(i,Gs()&&l?u:void 0),u}function SK(e,t){const{"sentry-trace":n,baggage:r}=Yx({span:t});n&&CK(e,n,r)}function CK(e,t,n){try{e.setRequestHeader("sentry-trace",t),n&&e.setRequestHeader("baggage",n)}catch{}}function _I(e){try{return new URL(e,_e.location.origin).href}catch{return}}function EK(){_e&&_e.document?_e.document.addEventListener("visibilitychange",()=>{const e=In();if(!e)return;const t=xn(e);if(_e.document.hidden&&t){const n="cancelled",{op:r,status:i}=Je(t);Ir&&Q.log(`[Tracing] Transaction: ${n} -> since tab moved to the background, op: ${r}`),i||t.setStatus({code:dn,message:n}),t.setAttribute("sentry.cancellation_reason","document.hidden"),t.end()}}):Ir&&Q.warn("[Tracing] Could not set up background tab detection due to lack of global document")}const xK="BrowserTracing",IK={...hp,instrumentNavigation:!0,instrumentPageLoad:!0,markBackgroundSpan:!0,enableLongTask:!0,enableLongAnimationFrame:!0,enableInp:!0,_experiments:{},...mp},RK=((e={})=>{RU();const{enableInp:t,enableLongTask:n,enableLongAnimationFrame:r,_experiments:{enableInteractions:i,enableStandaloneClsSpans:o},beforeStartSpan:s,idleTimeout:a,finalTimeout:c,childSpanTimeout:l,markBackgroundSpan:u,traceFetch:d,traceXHR:p,trackFetchStreamPerformance:g,shouldCreateSpanForRequest:v,enableHTTPTimings:m,instrumentPageLoad:_,instrumentNavigation:y}={...IK,...e},w=qq({recordClsStandaloneSpans:o||!1});t&&vG(),r&&Xe.PerformanceObserver&&PerformanceObserver.supportedEntryTypes&&PerformanceObserver.supportedEntryTypes.includes("long-animation-frame")?Kq():n&&Gq(),i&&Wq();const S={name:void 0,source:void 0};function b(C,E){const x=E.op==="pageload",I=s?s(E):E,L=I.attributes||{};E.name!==I.name&&(L[Xr]="custom",I.attributes=L),S.name=I.name,S.source=L[Xr];const R=Hx(I,{idleTimeout:a,finalTimeout:c,childSpanTimeout:l,disableAutoFinish:x,beforeSpanEnd:A=>{w(),Qq(A,{recordClsOnPageloadSpan:!o})}});function k(){["interactive","complete"].includes(_e.document.readyState)&&C.emit("idleSpanEnableAutoFinish",R)}return x&&_e.document&&(_e.document.addEventListener("readystatechange",()=>{k()}),k()),R}return{name:xK,afterAllSetup(C){let E,x=_e.location&&_e.location.href;function I(){E&&!Je(E).timestamp&&(Ir&&Q.log(`[Tracing] Finishing current active span with op: ${Je(E).op}`),E.end())}C.on("startNavigationSpan",L=>{tt()===C&&(I(),E=b(C,{op:"navigation",...L}))}),C.on("startPageLoadSpan",(L,R={})=>{if(tt()!==C)return;I();const k=R.sentryTrace||h5("sentry-trace"),A=R.baggage||h5("baggage"),P=bU(k,A);yt().setPropagationContext(P),E=b(C,{op:"pageload",...L})}),C.on("spanEnd",L=>{const R=Je(L).op;if(L!==xn(L)||R!=="navigation"&&R!=="pageload")return;const k=yt(),A=k.getPropagationContext();k.setPropagationContext({...A,sampled:A.sampled!==void 0?A.sampled:Qa(L),dsc:A.dsc||eu(L)})}),_e.location&&(_&&bI(C,{name:_e.location.pathname,startTime:hr?hr/1e3:void 0,attributes:{[Xr]:"url",[Qt]:"auto.pageload.browser"}}),y&&g4(({to:L,from:R})=>{if(R===void 0&&x&&x.indexOf(L)!==-1){x=void 0;return}R!==L&&(x=void 0,wI(C,{name:_e.location.pathname,attributes:{[Xr]:"url",[Qt]:"auto.navigation.browser"}}))})),u&&EK(),i&&LK(a,c,l,S),t&&_G(),vK(C,{traceFetch:d,traceXHR:p,trackFetchStreamPerformance:g,tracePropagationTargets:C.getOptions().tracePropagationTargets,shouldCreateSpanForRequest:v,enableHTTPTimings:m})}}});function bI(e,t,n){e.emit("startPageLoadSpan",t,n),yt().setTransactionName(t.name);const r=In();return(r&&Je(r).op)==="pageload"?r:void 0}function wI(e,t){fo().setPropagationContext({traceId:Bs()}),yt().setPropagationContext({traceId:Bs()}),e.emit("startNavigationSpan",t),yt().setTransactionName(t.name);const n=In();return(n&&Je(n).op)==="navigation"?n:void 0}function h5(e){const t=KH(`meta[name=${e}]`);return t?t.getAttribute("content"):void 0}function LK(e,t,n,r){let i;const o=()=>{const s="ui.action.click",a=In(),c=a&&xn(a);if(c){const l=Je(c).op;if(["navigation","pageload"].includes(l)){Ir&&Q.warn(`[Tracing] Did not create ${s} span because a pageload or navigation span is in progress.`);return}}if(i&&(i.setAttribute($v,"interactionInterrupted"),i.end(),i=void 0),!r.name){Ir&&Q.warn(`[Tracing] Did not create ${s} transaction because _latestRouteName is missing.`);return}i=Hx({name:r.name,op:s,attributes:{[Xr]:r.source||"url"}},{idleTimeout:e,finalTimeout:t,childSpanTimeout:n})};_e.document&&addEventListener("click",o,{once:!1,capture:!0})}function kK(e){const t={...e};return zx(t,"react"),LB("react",{version:f.version}),mK(t)}function TK(e){const t=e.match(/^([^.]+)/);return t!==null&&parseInt(t[0])>=17}function AK(e,t){const n=new WeakSet;function r(i,o){if(!n.has(i)){if(i.cause)return n.add(i),r(i.cause,o);i.cause=o}}r(e,t)}function PK(e,{componentStack:t},n){if(TK(f.version)&&pg(e)&&t){const r=new Error(e.message);r.name=`React ErrorBoundary ${e.name}`,r.stack=t,AK(e,r)}return wg(e,{...n,captureContext:{contexts:{react:{componentStack:t}}}})}var v0={exports:{}},rt={};var p5;function MK(){if(p5)return rt;p5=1;var e=typeof Symbol=="function"&&Symbol.for,t=e?Symbol.for("react.element"):60103,n=e?Symbol.for("react.portal"):60106,r=e?Symbol.for("react.fragment"):60107,i=e?Symbol.for("react.strict_mode"):60108,o=e?Symbol.for("react.profiler"):60114,s=e?Symbol.for("react.provider"):60109,a=e?Symbol.for("react.context"):60110,c=e?Symbol.for("react.async_mode"):60111,l=e?Symbol.for("react.concurrent_mode"):60111,u=e?Symbol.for("react.forward_ref"):60112,d=e?Symbol.for("react.suspense"):60113,p=e?Symbol.for("react.suspense_list"):60120,g=e?Symbol.for("react.memo"):60115,v=e?Symbol.for("react.lazy"):60116,m=e?Symbol.for("react.block"):60121,_=e?Symbol.for("react.fundamental"):60117,y=e?Symbol.for("react.responder"):60118,w=e?Symbol.for("react.scope"):60119;function S(C){if(typeof C=="object"&&C!==null){var E=C.$$typeof;switch(E){case t:switch(C=C.type,C){case c:case l:case r:case o:case i:case d:return C;default:switch(C=C&&C.$$typeof,C){case a:case u:case v:case g:case s:return C;default:return E}}case n:return E}}}function b(C){return S(C)===l}return rt.AsyncMode=c,rt.ConcurrentMode=l,rt.ContextConsumer=a,rt.ContextProvider=s,rt.Element=t,rt.ForwardRef=u,rt.Fragment=r,rt.Lazy=v,rt.Memo=g,rt.Portal=n,rt.Profiler=o,rt.StrictMode=i,rt.Suspense=d,rt.isAsyncMode=function(C){return b(C)||S(C)===c},rt.isConcurrentMode=b,rt.isContextConsumer=function(C){return S(C)===a},rt.isContextProvider=function(C){return S(C)===s},rt.isElement=function(C){return typeof C=="object"&&C!==null&&C.$$typeof===t},rt.isForwardRef=function(C){return S(C)===u},rt.isFragment=function(C){return S(C)===r},rt.isLazy=function(C){return S(C)===v},rt.isMemo=function(C){return S(C)===g},rt.isPortal=function(C){return S(C)===n},rt.isProfiler=function(C){return S(C)===o},rt.isStrictMode=function(C){return S(C)===i},rt.isSuspense=function(C){return S(C)===d},rt.isValidElementType=function(C){return typeof C=="string"||typeof C=="function"||C===r||C===l||C===o||C===i||C===d||C===p||typeof C=="object"&&C!==null&&(C.$$typeof===v||C.$$typeof===g||C.$$typeof===s||C.$$typeof===a||C.$$typeof===u||C.$$typeof===_||C.$$typeof===y||C.$$typeof===w||C.$$typeof===m)},rt.typeOf=S,rt}var g5;function NK(){return g5||(g5=1,v0.exports=MK()),v0.exports}var y0,m5;function $K(){if(m5)return y0;m5=1;var e=NK(),t={childContextTypes:!0,contextType:!0,contextTypes:!0,defaultProps:!0,displayName:!0,getDefaultProps:!0,getDerivedStateFromError:!0,getDerivedStateFromProps:!0,mixins:!0,propTypes:!0,type:!0},n={name:!0,length:!0,prototype:!0,caller:!0,callee:!0,arguments:!0,arity:!0},r={$$typeof:!0,render:!0,defaultProps:!0,displayName:!0,propTypes:!0},i={$$typeof:!0,compare:!0,defaultProps:!0,displayName:!0,propTypes:!0,type:!0},o={};o[e.ForwardRef]=r,o[e.Memo]=i;function s(v){return e.isMemo(v)?i:o[v.$$typeof]||t}var a=Object.defineProperty,c=Object.getOwnPropertyNames,l=Object.getOwnPropertySymbols,u=Object.getOwnPropertyDescriptor,d=Object.getPrototypeOf,p=Object.prototype;function g(v,m,_){if(typeof m!="string"){if(p){var y=d(m);y&&y!==p&&g(v,y,_)}var w=c(m);l&&(w=w.concat(l(m)));for(var S=s(v),b=s(m),C=0;C<w.length;++C){var E=w[C];if(!n[E]&&!(_&&_[E])&&!(b&&b[E])&&!(S&&S[E])){var x=u(m,E);try{a(v,E,x)}catch{}}}}return v}return y0=g,y0}var OK=$K();const jK=Gl(OK),SI=typeof __SENTRY_DEBUG__>"u"||__SENTRY_DEBUG__,v5={componentStack:null,error:null,eventId:null};class Eg extends f.Component{constructor(t){super(t),Eg.prototype.__init.call(this),this.state=v5,this._openFallbackReportDialog=!0;const n=tt();n&&t.showDialog&&(this._openFallbackReportDialog=!1,this._cleanupHook=n.on("afterSendEvent",r=>{!r.type&&this._lastEventId&&r.event_id===this._lastEventId&&u5({...t.dialogOptions,eventId:this._lastEventId})}))}componentDidCatch(t,n){const{componentStack:r}=n,i=r??void 0,{beforeCapture:o,onError:s,showDialog:a,dialogOptions:c}=this.props;yg(l=>{o&&o(l,t,i);const u=this.props.handled!=null?this.props.handled:!!this.props.fallback,d=PK(t,n,{mechanism:{handled:u}});s&&s(t,i,d),a&&(this._lastEventId=d,this._openFallbackReportDialog&&u5({...c,eventId:d})),this.setState({error:t,componentStack:r,eventId:d})})}componentDidMount(){const{onMount:t}=this.props;t&&t()}componentWillUnmount(){const{error:t,componentStack:n,eventId:r}=this.state,{onUnmount:i}=this.props;i&&i(t,n,r),this._cleanupHook&&(this._cleanupHook(),this._cleanupHook=void 0)}__init(){this.resetErrorBoundary=()=>{const{onReset:t}=this.props,{error:n,componentStack:r,eventId:i}=this.state;t&&t(n,r,i),this.setState(v5)}}render(){const{fallback:t,children:n}=this.props,r=this.state;if(r.error){let i;return typeof t=="function"?i=f.createElement(t,{error:r.error,componentStack:r.componentStack,resetError:this.resetErrorBoundary,eventId:r.eventId}):i=t,f.isValidElement(i)?i:(t&&SI&&Q.warn("fallback did not produce a valid ReactElement"),null)}return typeof n=="function"?n():n}}let vp,yp,_p,bp,ja,Gc=!1;const CI=new WeakSet,_0=new Set;function DK(e,t){const n=RK({...e,instrumentPageLoad:!1,instrumentNavigation:!1}),{useEffect:r,useLocation:i,useNavigationType:o,createRoutesFromChildren:s,matchRoutes:a,stripBasename:c,instrumentPageLoad:l=!0,instrumentNavigation:u=!0}=e;return{...n,setup(){vp=r,yp=i,_p=o,ja=a,bp=s,Gc=c||!1},afterAllSetup(d){n.afterAllSetup(d);const p=_e&&_e.location&&_e.location.pathname;l&&p&&bI(d,{name:p,attributes:{[Xr]:"url",[Xo]:"pageload",[Qt]:`auto.pageload.react.reactrouter_v${t}`}}),u&&CI.add(d)}}}function FK(e){const{location:t,routes:n,navigationType:r,version:i,matches:o,basename:s,allRoutes:a}=e,c=Array.isArray(o)?o:ja(n,t,s),l=tt();if(!(!l||!CI.has(l))&&(r==="PUSH"||r==="POP")&&c){let u,d="url";const p=xI(t,a||n);p&&(u=$d(m4(a||n,t)),d="route"),(!p||!u)&&([u,d]=RI(n,t,c,s)),wI(l,{name:u,attributes:{[Xr]:d,[Xo]:"navigation",[Qt]:`auto.navigation.react.reactrouter_v${i}`}})}}function i1(e,t){if(!t||t==="/"||!e.toLowerCase().startsWith(t.toLowerCase()))return e;const n=t.endsWith("/")?t.length-1:t.length,r=e.charAt(n);return r&&r!=="/"?e:e.slice(n)||"/"}function HK(e,t,n){const r=e||Gc?i1(t,n):t;return[r[r.length-1]==="/"||r.slice(-2)==="/*"?r.slice(0,-1):r,"route"]}function EI(e){return e.endsWith("*")}function y5(e,t){return EI(e)&&t.route.children&&t.route.children.length>0||!1}function UK(e){return!!(!e.children&&e.element&&e.path&&e.path.endsWith("/*"))}function xI(e,t){const n=ja(t,e);if(n){for(const r of n)if(UK(r.route)&&VK(r))return!0}return!1}function II(e,t=new Set){return t.has(e)||(t.add(e),e.children&&!e.index&&e.children.forEach(n=>{II(n,t).forEach(i=>t.add(i))})),t}function BK(e){return qK(e.route.path||"")}function VK(e){return e.params["*"]||""}function qK(e){return e[e.length-1]==="*"?e.slice(0,-1):e}function cd(e){return e[e.length-1]==="/"?e.slice(0,-1):e}function $d(e){return e[0]==="/"?e:`/${e}`}function m4(e,t){const n=ja(e,t);if(!n||n.length===0)return"";for(const r of n)if(r.route.path&&r.route.path!=="*"){const i=BK(r),o=i1(t.pathname,$d(r.pathnameBase));return cd(cd(i||"")+$d(m4(e.filter(s=>s!==r.route),{pathname:o})))}return""}function RI(e,t,n,r=""){if(!e||e.length===0)return[Gc?i1(t.pathname,r):t.pathname,"url"];let i="";if(n)for(const s of n){const a=s.route;if(a){if(a.index)return HK(i,s.pathname,r);const c=a.path;if(c&&!y5(c,s)){const l=c[0]==="/"||i[i.length-1]==="/"?c:`/${c}`;if(i=cd(i)+$d(l),cd(t.pathname)===cd(r+s.pathname))return J6(i)!==J6(s.pathname)&&!EI(i)?[(Gc?"":r)+l,"route"]:(y5(i,s)&&(i=i.slice(0,-1)),[(Gc?"":r)+i,"route"])}}}return[Gc?i1(t.pathname,r):t.pathname||"/","url"]}function GK(e,t,n,r,i,o){const s=Array.isArray(r)?r:ja(o||n,t,i);if(s){let a,c="url";const l=xI(t,o||n);l&&(a=$d(m4(o||n,t)),c="route"),(!l||!a)&&([a,c]=RI(n,t,s,i)),yt().setTransactionName(a||"/"),e&&(e.updateName(a),e.setAttribute(Xr,c))}}function KK(e,t){if(!vp||!yp||!_p||!bp||!ja)return SI&&Q.warn(`reactRouterV6Instrumentation was unable to wrap Routes because of one or more missing parameters.
      useEffect: ${vp}. useLocation: ${yp}. useNavigationType: ${_p}.
      createRoutesFromChildren: ${bp}. matchRoutes: ${ja}.`),e;const n=r=>{const i=f.useRef(!0),o=yp(),s=_p();return vp(()=>{const a=bp(r.children);i.current?(a.forEach(c=>{II(c).forEach(u=>{_0.add(u)})}),GK(WK(),o,a,void 0,void 0,Array.from(_0)),i.current=!1):FK({location:o,routes:a,navigationType:s,version:t,allRoutes:Array.from(_0)})},[o,s]),f.createElement(e,{...r})};return jK(n,e),n}function WK(){const e=In(),t=e?xn(e):void 0;if(!t)return;const n=Je(t).op;return n==="navigation"||n==="pageload"?t:void 0}function zK(e){return DK(e,"7")}function YK(e){return KK(e,"7")}var b0={exports:{}};var _5;function XK(){return _5||(_5=1,(function(e){(function(){var t={}.hasOwnProperty;function n(){for(var o="",s=0;s<arguments.length;s++){var a=arguments[s];a&&(o=i(o,r(a)))}return o}function r(o){if(typeof o=="string"||typeof o=="number")return o;if(typeof o!="object")return"";if(Array.isArray(o))return n.apply(null,o);if(o.toString!==Object.prototype.toString&&!o.toString.toString().includes("[native code]"))return o.toString();var s="";for(var a in o)t.call(o,a)&&o[a]&&(s=i(s,a));return s}function i(o,s){return s?o?o+" "+s:o+s:o}e.exports?(n.default=n,e.exports=n):window.classNames=n})()})(b0)),b0.exports}var ZK=XK();const Z=Gl(ZK);function LI(e,t){return h.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",width:"1em",height:"1em",fill:"currentColor",viewBox:"0 0 24 24",ref:t,...e,children:h.jsx("path",{d:"m10.6 13.8-2.15-2.15a.95.95 0 0 0-.7-.275.95.95 0 0 0-.7.275.95.95 0 0 0-.275.7q0 .425.275.7L9.9 15.9q.3.3.7.3t.7-.3l5.65-5.65a.95.95 0 0 0 .275-.7.95.95 0 0 0-.275-.7.95.95 0 0 0-.7-.275.95.95 0 0 0-.7.275zM12 22a9.7 9.7 0 0 1-3.9-.788 10.1 10.1 0 0 1-3.175-2.137q-1.35-1.35-2.137-3.175A9.7 9.7 0 0 1 2 12q0-2.075.788-3.9a10.1 10.1 0 0 1 2.137-3.175q1.35-1.35 3.175-2.137A9.7 9.7 0 0 1 12 2q2.075 0 3.9.788a10.1 10.1 0 0 1 3.175 2.137q1.35 1.35 2.137 3.175A9.7 9.7 0 0 1 22 12a9.7 9.7 0 0 1-.788 3.9 10.1 10.1 0 0 1-2.137 3.175q-1.35 1.35-3.175 2.137A9.7 9.7 0 0 1 12 22m0-2q3.35 0 5.675-2.325T20 12t-2.325-5.675T12 4 6.325 6.325 4 12t2.325 5.675T12 20"})})}LI.displayName="CheckCircleIcon";const QK=f.forwardRef(LI);function kI(e,t){return h.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",width:"1em",height:"1em",fill:"currentColor",viewBox:"0 0 24 24",ref:t,...e,children:h.jsx("path",{d:"M12 17q.424 0 .713-.288A.97.97 0 0 0 13 16a.97.97 0 0 0-.287-.713A.97.97 0 0 0 12 15a.97.97 0 0 0-.713.287A.97.97 0 0 0 11 16q0 .424.287.712.288.288.713.288m0-4q.424 0 .713-.287A.97.97 0 0 0 13 12V8a.97.97 0 0 0-.287-.713A.97.97 0 0 0 12 7a.97.97 0 0 0-.713.287A.97.97 0 0 0 11 8v4q0 .424.287.713.288.287.713.287m0 9a9.7 9.7 0 0 1-3.9-.788 10.1 10.1 0 0 1-3.175-2.137q-1.35-1.35-2.137-3.175A9.7 9.7 0 0 1 2 12q0-2.075.788-3.9a10.1 10.1 0 0 1 2.137-3.175q1.35-1.35 3.175-2.137A9.7 9.7 0 0 1 12 2q2.075 0 3.9.788a10.1 10.1 0 0 1 3.175 2.137q1.35 1.35 2.137 3.175A9.7 9.7 0 0 1 22 12a9.7 9.7 0 0 1-.788 3.9 10.1 10.1 0 0 1-2.137 3.175q-1.35 1.35-3.175 2.137A9.7 9.7 0 0 1 12 22"})})}kI.displayName="ErrorSolidIcon";const If=f.forwardRef(kI);function TI(e,t){return h.jsxs("svg",{xmlns:"http://www.w3.org/2000/svg",width:"1em",height:"1em",fill:"currentColor",viewBox:"0 0 24 24",ref:t,...e,children:[h.jsx("path",{d:"M11.288 7.288A.97.97 0 0 1 12 7q.424 0 .713.287Q13 7.576 13 8t-.287.713A.97.97 0 0 1 12 9a.97.97 0 0 1-.713-.287A.97.97 0 0 1 11 8q0-.424.287-.713m.001 4.001A.97.97 0 0 1 12 11q.424 0 .713.287.287.288.287.713v4q0 .424-.287.712A.97.97 0 0 1 12 17a.97.97 0 0 1-.713-.288A.97.97 0 0 1 11 16v-4q0-.424.287-.713"}),h.jsx("path",{fillRule:"evenodd",d:"M22 12c0 5.523-4.477 10-10 10S2 17.523 2 12 6.477 2 12 2s10 4.477 10 10m-2 0a8 8 0 1 1-16 0 8 8 0 0 1 16 0",clipRule:"evenodd"})]})}TI.displayName="InfoIcon";const JK=f.forwardRef(TI);function AI(e,t){return h.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",width:"1em",height:"1em",fill:"currentColor",viewBox:"0 0 24 24",ref:t,...e,children:h.jsx("path",{d:"M6.293 6.293a1 1 0 0 1 1.414 0L12 10.586l4.293-4.293a1 1 0 1 1 1.414 1.414L13.414 12l4.293 4.293a1 1 0 0 1-1.414 1.414L12 13.414l-4.293 4.293a1 1 0 0 1-1.414-1.414L10.586 12 6.293 7.707a1 1 0 0 1 0-1.414"})})}AI.displayName="CloseIcon";const Rf=f.forwardRef(AI),eW="_alert_zx76t_10",tW="_content_zx76t_37",nW="_icon_zx76t_48",rW="_actions_zx76t_64",xc={alert:eW,content:tW,"text-content":"_text-content_zx76t_44",icon:nW,actions:rW},iW="_typography_6v6n8_153",b5={"font-body-xs-regular":"_font-body-xs-regular_6v6n8_12","font-body-xs-semibold":"_font-body-xs-semibold_6v6n8_17","font-body-xs-medium":"_font-body-xs-medium_6v6n8_22","font-body-sm-regular":"_font-body-sm-regular_6v6n8_31","font-body-sm-semibold":"_font-body-sm-semibold_6v6n8_36","font-body-sm-medium":"_font-body-sm-medium_6v6n8_41","font-body-md-regular":"_font-body-md-regular_6v6n8_50","font-body-md-semibold":"_font-body-md-semibold_6v6n8_55","font-body-md-medium":"_font-body-md-medium_6v6n8_60","font-body-lg-regular":"_font-body-lg-regular_6v6n8_69","font-body-lg-semibold":"_font-body-lg-semibold_6v6n8_74","font-body-lg-medium":"_font-body-lg-medium_6v6n8_79","font-heading-sm-regular":"_font-heading-sm-regular_6v6n8_88","font-heading-sm-semibold":"_font-heading-sm-semibold_6v6n8_93","font-heading-sm-medium":"_font-heading-sm-medium_6v6n8_98","font-heading-md-regular":"_font-heading-md-regular_6v6n8_107","font-heading-md-semibold":"_font-heading-md-semibold_6v6n8_112","font-heading-lg-regular":"_font-heading-lg-regular_6v6n8_121","font-heading-lg-semibold":"_font-heading-lg-semibold_6v6n8_126","font-heading-xl-regular":"_font-heading-xl-regular_6v6n8_135","font-heading-xl-semibold":"_font-heading-xl-semibold_6v6n8_140",typography:iW},PI=({as:e,children:t,type:n="body",weight:r="regular",size:i="md",className:o,...s})=>{const a=e||"p";return h.jsx(a,{...s,className:Z(b5.typography,b5[`font-${n}-${i}-${r}`],o),children:t})},Ye=({as:e="p",children:t,...n})=>h.jsx(PI,{as:e,type:"body",...n,children:t}),oW="_destructive_1pz9o_95",w0={"icon-button":"_icon-button_1pz9o_8","no-background":"_no-background_1pz9o_42",destructive:oW},MI=f.forwardRef(function({as:t,children:n,className:r,disabled:i,...o},s){const a=t||"button",{onClick:c,onSubmit:l,onPointerDown:u,onPointerUp:d,onKeyDown:p,onKeyUp:g,onKeyPress:v,...m}=o,_=i?{}:{onClick:c,onSubmit:l,onPointerDown:u,onPointerUp:d,onKeyDown:p,onKeyUp:g,onKeyPress:v};return h.jsx(a,{ref:s,className:r,role:t==="a"?"link":"button",tabIndex:0,"aria-disabled":i,...m,..._,children:n})}),sW={"indicator-icon":"_indicator-icon_147l5_17"},aW=f.forwardRef(function({children:t,className:n,size:r="100%",colour:i,indicator:o},s){const a=Z(sW["indicator-icon"],n);return h.jsx("div",{ref:s,className:a,"data-indicator":o,style:{"--cpd-icon-button-size":r,"--cpd-color-icon-tertiary":i},children:X.Children.only(t)})}),NI=f.createContext(null);function v4(){const e=f.useContext(NI);if(e==null)throw new Error("Tooltip components must be wrapped in <Tooltip />");return e}function xg(){return typeof window<"u"}function au(e){return $I(e)?(e.nodeName||"").toLowerCase():"#document"}function cr(e){var t;return(e==null||(t=e.ownerDocument)==null?void 0:t.defaultView)||window}function ho(e){var t;return(t=($I(e)?e.ownerDocument:e.document)||window.document)==null?void 0:t.documentElement}function $I(e){return xg()?e instanceof Node||e instanceof cr(e).Node:!1}function pt(e){return xg()?e instanceof Element||e instanceof cr(e).Element:!1}function Lr(e){return xg()?e instanceof HTMLElement||e instanceof cr(e).HTMLElement:!1}function Qv(e){return!xg()||typeof ShadowRoot>"u"?!1:e instanceof ShadowRoot||e instanceof cr(e).ShadowRoot}function Lf(e){const{overflow:t,overflowX:n,overflowY:r,display:i}=kr(e);return/auto|scroll|overlay|hidden|clip/.test(t+r+n)&&!["inline","contents"].includes(i)}function cW(e){return["table","td","th"].includes(au(e))}function Ig(e){return[":popover-open",":modal"].some(t=>{try{return e.matches(t)}catch{return!1}})}function y4(e){const t=Rg(),n=pt(e)?kr(e):e;return["transform","translate","scale","rotate","perspective"].some(r=>n[r]?n[r]!=="none":!1)||(n.containerType?n.containerType!=="normal":!1)||!t&&(n.backdropFilter?n.backdropFilter!=="none":!1)||!t&&(n.filter?n.filter!=="none":!1)||["transform","translate","scale","rotate","perspective","filter"].some(r=>(n.willChange||"").includes(r))||["paint","layout","strict","content"].some(r=>(n.contain||"").includes(r))}function lW(e){let t=Qo(e);for(;Lr(t)&&!Fo(t);){if(y4(t))return t;if(Ig(t))return null;t=Qo(t)}return null}function Rg(){return typeof CSS>"u"||!CSS.supports?!1:CSS.supports("-webkit-backdrop-filter","none")}function Fo(e){return["html","body","#document"].includes(au(e))}function kr(e){return cr(e).getComputedStyle(e)}function Lg(e){return pt(e)?{scrollLeft:e.scrollLeft,scrollTop:e.scrollTop}:{scrollLeft:e.scrollX,scrollTop:e.scrollY}}function Qo(e){if(au(e)==="html")return e;const t=e.assignedSlot||e.parentNode||Qv(e)&&e.host||ho(e);return Qv(t)?t.host:t}function OI(e){const t=Qo(e);return Fo(t)?e.ownerDocument?e.ownerDocument.body:e.body:Lr(t)&&Lf(t)?t:OI(t)}function Ps(e,t,n){var r;t===void 0&&(t=[]),n===void 0&&(n=!0);const i=OI(e),o=i===((r=e.ownerDocument)==null?void 0:r.body),s=cr(i);if(o){const a=Jv(s);return t.concat(s,s.visualViewport||[],Lf(i)?i:[],a&&n?Ps(a):[])}return t.concat(i,Ps(i,[],n))}function Jv(e){return e.parent&&Object.getPrototypeOf(e.parent)?e.frameElement:null}function ey(e){let t=e.activeElement;for(;((n=t)==null||(n=n.shadowRoot)==null?void 0:n.activeElement)!=null;){var n;t=t.shadowRoot.activeElement}return t}function Sl(e,t){if(!e||!t)return!1;const n=t.getRootNode==null?void 0:t.getRootNode();if(e.contains(t))return!0;if(n&&Qv(n)){let r=t;for(;r;){if(e===r)return!0;r=r.parentNode||r.host}}return!1}function jI(){const e=navigator.userAgentData;return e!=null&&e.platform?e.platform:navigator.platform}function DI(){const e=navigator.userAgentData;return e&&Array.isArray(e.brands)?e.brands.map(t=>{let{brand:n,version:r}=t;return n+"/"+r}).join(" "):navigator.userAgent}function uW(e){return fW()?!1:!w5()&&e.width===0&&e.height===0||w5()&&e.width===1&&e.height===1&&e.pressure===0&&e.detail===0&&e.pointerType==="mouse"||e.width<1&&e.height<1&&e.pressure===0&&e.detail===0&&e.pointerType==="touch"}function FI(){return/apple/i.test(navigator.vendor)}function w5(){const e=/android/i;return e.test(jI())||e.test(DI())}function dW(){return jI().toLowerCase().startsWith("mac")&&!navigator.maxTouchPoints}function fW(){return DI().includes("jsdom/")}function ty(e,t){const n=["mouse","pen"];return n.push("",void 0),n.includes(e)}function hW(e){return"nativeEvent"in e}function pW(e){return e.matches("html,body")}function Rs(e){return e?.ownerDocument||document}function S0(e,t){if(t==null)return!1;if("composedPath"in e)return e.composedPath().includes(t);const n=e;return n.target!=null&&t.contains(n.target)}function Uc(e){return"composedPath"in e?e.composedPath()[0]:e.target}const gW="input:not([type='hidden']):not([disabled]),[contenteditable]:not([contenteditable='false']),textarea:not([disabled])";function mW(e){return Lr(e)&&e.matches(gW)}const vW=["top","right","bottom","left"],Ks=Math.min,Er=Math.max,o1=Math.round,yh=Math.floor,no=e=>({x:e,y:e}),yW={left:"right",right:"left",bottom:"top",top:"bottom"},_W={start:"end",end:"start"};function ny(e,t,n){return Er(e,Ks(t,n))}function Jo(e,t){return typeof e=="function"?e(t):e}function es(e){return e.split("-")[0]}function cu(e){return e.split("-")[1]}function _4(e){return e==="x"?"y":"x"}function b4(e){return e==="y"?"height":"width"}function Ws(e){return["top","bottom"].includes(es(e))?"y":"x"}function w4(e){return _4(Ws(e))}function bW(e,t,n){n===void 0&&(n=!1);const r=cu(e),i=w4(e),o=b4(i);let s=i==="x"?r===(n?"end":"start")?"right":"left":r==="start"?"bottom":"top";return t.reference[o]>t.floating[o]&&(s=s1(s)),[s,s1(s)]}function wW(e){const t=s1(e);return[ry(e),t,ry(t)]}function ry(e){return e.replace(/start|end/g,t=>_W[t])}function SW(e,t,n){const r=["left","right"],i=["right","left"],o=["top","bottom"],s=["bottom","top"];switch(e){case"top":case"bottom":return n?t?i:r:t?r:i;case"left":case"right":return t?o:s;default:return[]}}function CW(e,t,n,r){const i=cu(e);let o=SW(es(e),n==="start",r);return i&&(o=o.map(s=>s+"-"+i),t&&(o=o.concat(o.map(ry)))),o}function s1(e){return e.replace(/left|right|bottom|top/g,t=>yW[t])}function EW(e){return{top:0,right:0,bottom:0,left:0,...e}}function HI(e){return typeof e!="number"?EW(e):{top:e,right:e,bottom:e,left:e}}function a1(e){const{x:t,y:n,width:r,height:i}=e;return{width:r,height:i,top:n,left:t,right:t+r,bottom:n+i,x:t,y:n}}var xW=["input:not([inert])","select:not([inert])","textarea:not([inert])","a[href]:not([inert])","button:not([inert])","[tabindex]:not(slot):not([inert])","audio[controls]:not([inert])","video[controls]:not([inert])",'[contenteditable]:not([contenteditable="false"]):not([inert])',"details>summary:first-of-type:not([inert])","details:not([inert])"],iy=xW.join(","),UI=typeof Element>"u",Od=UI?function(){}:Element.prototype.matches||Element.prototype.msMatchesSelector||Element.prototype.webkitMatchesSelector,c1=!UI&&Element.prototype.getRootNode?function(e){var t;return e==null||(t=e.getRootNode)===null||t===void 0?void 0:t.call(e)}:function(e){return e?.ownerDocument},l1=function e(t,n){var r;n===void 0&&(n=!0);var i=t==null||(r=t.getAttribute)===null||r===void 0?void 0:r.call(t,"inert"),o=i===""||i==="true",s=o||n&&t&&e(t.parentNode);return s},IW=function(t){var n,r=t==null||(n=t.getAttribute)===null||n===void 0?void 0:n.call(t,"contenteditable");return r===""||r==="true"},RW=function(t,n,r){if(l1(t))return[];var i=Array.prototype.slice.apply(t.querySelectorAll(iy));return n&&Od.call(t,iy)&&i.unshift(t),i=i.filter(r),i},LW=function e(t,n,r){for(var i=[],o=Array.from(t);o.length;){var s=o.shift();if(!l1(s,!1))if(s.tagName==="SLOT"){var a=s.assignedElements(),c=a.length?a:s.children,l=e(c,!0,r);r.flatten?i.push.apply(i,l):i.push({scopeParent:s,candidates:l})}else{var u=Od.call(s,iy);u&&r.filter(s)&&(n||!t.includes(s))&&i.push(s);var d=s.shadowRoot||typeof r.getShadowRoot=="function"&&r.getShadowRoot(s),p=!l1(d,!1)&&(!r.shadowRootFilter||r.shadowRootFilter(s));if(d&&p){var g=e(d===!0?s.children:d.children,!0,r);r.flatten?i.push.apply(i,g):i.push({scopeParent:s,candidates:g})}else o.unshift.apply(o,s.children)}}return i},BI=function(t){return!isNaN(parseInt(t.getAttribute("tabindex"),10))},VI=function(t){if(!t)throw new Error("No node provided");return t.tabIndex<0&&(/^(AUDIO|VIDEO|DETAILS)$/.test(t.tagName)||IW(t))&&!BI(t)?0:t.tabIndex},kW=function(t,n){var r=VI(t);return r<0&&n&&!BI(t)?0:r},TW=function(t,n){return t.tabIndex===n.tabIndex?t.documentOrder-n.documentOrder:t.tabIndex-n.tabIndex},qI=function(t){return t.tagName==="INPUT"},AW=function(t){return qI(t)&&t.type==="hidden"},PW=function(t){var n=t.tagName==="DETAILS"&&Array.prototype.slice.apply(t.children).some(function(r){return r.tagName==="SUMMARY"});return n},MW=function(t,n){for(var r=0;r<t.length;r++)if(t[r].checked&&t[r].form===n)return t[r]},NW=function(t){if(!t.name)return!0;var n=t.form||c1(t),r=function(a){return n.querySelectorAll('input[type="radio"][name="'+a+'"]')},i;if(typeof window<"u"&&typeof window.CSS<"u"&&typeof window.CSS.escape=="function")i=r(window.CSS.escape(t.name));else try{i=r(t.name)}catch(s){return console.error("Looks like you have a radio button with a name attribute containing invalid CSS selector characters and need the CSS.escape polyfill: %s",s.message),!1}var o=MW(i,t.form);return!o||o===t},$W=function(t){return qI(t)&&t.type==="radio"},OW=function(t){return $W(t)&&!NW(t)},jW=function(t){var n,r=t&&c1(t),i=(n=r)===null||n===void 0?void 0:n.host,o=!1;if(r&&r!==t){var s,a,c;for(o=!!((s=i)!==null&&s!==void 0&&(a=s.ownerDocument)!==null&&a!==void 0&&a.contains(i)||t!=null&&(c=t.ownerDocument)!==null&&c!==void 0&&c.contains(t));!o&&i;){var l,u,d;r=c1(i),i=(l=r)===null||l===void 0?void 0:l.host,o=!!((u=i)!==null&&u!==void 0&&(d=u.ownerDocument)!==null&&d!==void 0&&d.contains(i))}}return o},S5=function(t){var n=t.getBoundingClientRect(),r=n.width,i=n.height;return r===0&&i===0},DW=function(t,n){var r=n.displayCheck,i=n.getShadowRoot;if(getComputedStyle(t).visibility==="hidden")return!0;var o=Od.call(t,"details>summary:first-of-type"),s=o?t.parentElement:t;if(Od.call(s,"details:not([open]) *"))return!0;if(!r||r==="full"||r==="legacy-full"){if(typeof i=="function"){for(var a=t;t;){var c=t.parentElement,l=c1(t);if(c&&!c.shadowRoot&&i(c)===!0)return S5(t);t.assignedSlot?t=t.assignedSlot:!c&&l!==t.ownerDocument?t=l.host:t=c}t=a}if(jW(t))return!t.getClientRects().length;if(r!=="legacy-full")return!0}else if(r==="non-zero-area")return S5(t);return!1},FW=function(t){if(/^(INPUT|BUTTON|SELECT|TEXTAREA)$/.test(t.tagName))for(var n=t.parentElement;n;){if(n.tagName==="FIELDSET"&&n.disabled){for(var r=0;r<n.children.length;r++){var i=n.children.item(r);if(i.tagName==="LEGEND")return Od.call(n,"fieldset[disabled] *")?!0:!i.contains(t)}return!0}n=n.parentElement}return!1},HW=function(t,n){return!(n.disabled||l1(n)||AW(n)||DW(n,t)||PW(n)||FW(n))},C5=function(t,n){return!(OW(n)||VI(n)<0||!HW(t,n))},UW=function(t){var n=parseInt(t.getAttribute("tabindex"),10);return!!(isNaN(n)||n>=0)},BW=function e(t){var n=[],r=[];return t.forEach(function(i,o){var s=!!i.scopeParent,a=s?i.scopeParent:i,c=kW(a,s),l=s?e(i.candidates):a;c===0?s?n.push.apply(n,l):n.push(a):r.push({documentOrder:o,tabIndex:c,item:i,isScope:s,content:l})}),r.sort(TW).reduce(function(i,o){return o.isScope?i.push.apply(i,o.content):i.push(o.content),i},[]).concat(n)},GI=function(t,n){n=n||{};var r;return n.getShadowRoot?r=LW([t],n.includeContainer,{filter:C5.bind(null,n),flatten:!1,getShadowRoot:n.getShadowRoot,shadowRootFilter:UW}):r=RW(t,n.includeContainer,C5.bind(null,n)),BW(r)};function E5(e,t,n){let{reference:r,floating:i}=e;const o=Ws(t),s=w4(t),a=b4(s),c=es(t),l=o==="y",u=r.x+r.width/2-i.width/2,d=r.y+r.height/2-i.height/2,p=r[a]/2-i[a]/2;let g;switch(c){case"top":g={x:u,y:r.y-i.height};break;case"bottom":g={x:u,y:r.y+r.height};break;case"right":g={x:r.x+r.width,y:d};break;case"left":g={x:r.x-i.width,y:d};break;default:g={x:r.x,y:r.y}}switch(cu(t)){case"start":g[s]-=p*(n&&l?-1:1);break;case"end":g[s]+=p*(n&&l?-1:1);break}return g}const VW=async(e,t,n)=>{const{placement:r="bottom",strategy:i="absolute",middleware:o=[],platform:s}=n,a=o.filter(Boolean),c=await(s.isRTL==null?void 0:s.isRTL(t));let l=await s.getElementRects({reference:e,floating:t,strategy:i}),{x:u,y:d}=E5(l,r,c),p=r,g={},v=0;for(let m=0;m<a.length;m++){const{name:_,fn:y}=a[m],{x:w,y:S,data:b,reset:C}=await y({x:u,y:d,initialPlacement:r,placement:p,strategy:i,middlewareData:g,rects:l,platform:s,elements:{reference:e,floating:t}});u=w??u,d=S??d,g={...g,[_]:{...g[_],...b}},C&&v<=50&&(v++,typeof C=="object"&&(C.placement&&(p=C.placement),C.rects&&(l=C.rects===!0?await s.getElementRects({reference:e,floating:t,strategy:i}):C.rects),{x:u,y:d}=E5(l,p,c)),m=-1)}return{x:u,y:d,placement:p,strategy:i,middlewareData:g}};async function jd(e,t){var n;t===void 0&&(t={});const{x:r,y:i,platform:o,rects:s,elements:a,strategy:c}=e,{boundary:l="clippingAncestors",rootBoundary:u="viewport",elementContext:d="floating",altBoundary:p=!1,padding:g=0}=Jo(t,e),v=HI(g),_=a[p?d==="floating"?"reference":"floating":d],y=a1(await o.getClippingRect({element:(n=await(o.isElement==null?void 0:o.isElement(_)))==null||n?_:_.contextElement||await(o.getDocumentElement==null?void 0:o.getDocumentElement(a.floating)),boundary:l,rootBoundary:u,strategy:c})),w=d==="floating"?{x:r,y:i,width:s.floating.width,height:s.floating.height}:s.reference,S=await(o.getOffsetParent==null?void 0:o.getOffsetParent(a.floating)),b=await(o.isElement==null?void 0:o.isElement(S))?await(o.getScale==null?void 0:o.getScale(S))||{x:1,y:1}:{x:1,y:1},C=a1(o.convertOffsetParentRelativeRectToViewportRelativeRect?await o.convertOffsetParentRelativeRectToViewportRelativeRect({elements:a,rect:w,offsetParent:S,strategy:c}):w);return{top:(y.top-C.top+v.top)/b.y,bottom:(C.bottom-y.bottom+v.bottom)/b.y,left:(y.left-C.left+v.left)/b.x,right:(C.right-y.right+v.right)/b.x}}const qW=e=>({name:"arrow",options:e,async fn(t){const{x:n,y:r,placement:i,rects:o,platform:s,elements:a,middlewareData:c}=t,{element:l,padding:u=0}=Jo(e,t)||{};if(l==null)return{};const d=HI(u),p={x:n,y:r},g=w4(i),v=b4(g),m=await s.getDimensions(l),_=g==="y",y=_?"top":"left",w=_?"bottom":"right",S=_?"clientHeight":"clientWidth",b=o.reference[v]+o.reference[g]-p[g]-o.floating[v],C=p[g]-o.reference[g],E=await(s.getOffsetParent==null?void 0:s.getOffsetParent(l));let x=E?E[S]:0;(!x||!await(s.isElement==null?void 0:s.isElement(E)))&&(x=a.floating[S]||o.floating[v]);const I=b/2-C/2,L=x/2-m[v]/2-1,R=Ks(d[y],L),k=Ks(d[w],L),A=R,P=x-m[v]-k,O=x/2-m[v]/2+I,j=ny(A,O,P),$=!c.arrow&&cu(i)!=null&&O!==j&&o.reference[v]/2-(O<A?R:k)-m[v]/2<0,T=$?O<A?O-A:O-P:0;return{[g]:p[g]+T,data:{[g]:j,centerOffset:O-j-T,...$&&{alignmentOffset:T}},reset:$}}}),GW=function(e){return e===void 0&&(e={}),{name:"flip",options:e,async fn(t){var n,r;const{placement:i,middlewareData:o,rects:s,initialPlacement:a,platform:c,elements:l}=t,{mainAxis:u=!0,crossAxis:d=!0,fallbackPlacements:p,fallbackStrategy:g="bestFit",fallbackAxisSideDirection:v="none",flipAlignment:m=!0,..._}=Jo(e,t);if((n=o.arrow)!=null&&n.alignmentOffset)return{};const y=es(i),w=Ws(a),S=es(a)===a,b=await(c.isRTL==null?void 0:c.isRTL(l.floating)),C=p||(S||!m?[s1(a)]:wW(a)),E=v!=="none";!p&&E&&C.push(...CW(a,m,v,b));const x=[a,...C],I=await jd(t,_),L=[];let R=((r=o.flip)==null?void 0:r.overflows)||[];if(u&&L.push(I[y]),d){const O=bW(i,s,b);L.push(I[O[0]],I[O[1]])}if(R=[...R,{placement:i,overflows:L}],!L.every(O=>O<=0)){var k,A;const O=(((k=o.flip)==null?void 0:k.index)||0)+1,j=x[O];if(j)return{data:{index:O,overflows:R},reset:{placement:j}};let $=(A=R.filter(T=>T.overflows[0]<=0).sort((T,N)=>T.overflows[1]-N.overflows[1])[0])==null?void 0:A.placement;if(!$)switch(g){case"bestFit":{var P;const T=(P=R.filter(N=>{if(E){const M=Ws(N.placement);return M===w||M==="y"}return!0}).map(N=>[N.placement,N.overflows.filter(M=>M>0).reduce((M,B)=>M+B,0)]).sort((N,M)=>N[1]-M[1])[0])==null?void 0:P[0];T&&($=T);break}case"initialPlacement":$=a;break}if(i!==$)return{reset:{placement:$}}}return{}}}};function x5(e,t){return{top:e.top-t.height,right:e.right-t.width,bottom:e.bottom-t.height,left:e.left-t.width}}function I5(e){return vW.some(t=>e[t]>=0)}const KW=function(e){return e===void 0&&(e={}),{name:"hide",options:e,async fn(t){const{rects:n}=t,{strategy:r="referenceHidden",...i}=Jo(e,t);switch(r){case"referenceHidden":{const o=await jd(t,{...i,elementContext:"reference"}),s=x5(o,n.reference);return{data:{referenceHiddenOffsets:s,referenceHidden:I5(s)}}}case"escaped":{const o=await jd(t,{...i,altBoundary:!0}),s=x5(o,n.floating);return{data:{escapedOffsets:s,escaped:I5(s)}}}default:return{}}}}};async function WW(e,t){const{placement:n,platform:r,elements:i}=e,o=await(r.isRTL==null?void 0:r.isRTL(i.floating)),s=es(n),a=cu(n),c=Ws(n)==="y",l=["left","top"].includes(s)?-1:1,u=o&&c?-1:1,d=Jo(t,e);let{mainAxis:p,crossAxis:g,alignmentAxis:v}=typeof d=="number"?{mainAxis:d,crossAxis:0,alignmentAxis:null}:{mainAxis:d.mainAxis||0,crossAxis:d.crossAxis||0,alignmentAxis:d.alignmentAxis};return a&&typeof v=="number"&&(g=a==="end"?v*-1:v),c?{x:g*u,y:p*l}:{x:p*l,y:g*u}}const zW=function(e){return e===void 0&&(e=0),{name:"offset",options:e,async fn(t){var n,r;const{x:i,y:o,placement:s,middlewareData:a}=t,c=await WW(t,e);return s===((n=a.offset)==null?void 0:n.placement)&&(r=a.arrow)!=null&&r.alignmentOffset?{}:{x:i+c.x,y:o+c.y,data:{...c,placement:s}}}}},YW=function(e){return e===void 0&&(e={}),{name:"shift",options:e,async fn(t){const{x:n,y:r,placement:i}=t,{mainAxis:o=!0,crossAxis:s=!1,limiter:a={fn:_=>{let{x:y,y:w}=_;return{x:y,y:w}}},...c}=Jo(e,t),l={x:n,y:r},u=await jd(t,c),d=Ws(es(i)),p=_4(d);let g=l[p],v=l[d];if(o){const _=p==="y"?"top":"left",y=p==="y"?"bottom":"right",w=g+u[_],S=g-u[y];g=ny(w,g,S)}if(s){const _=d==="y"?"top":"left",y=d==="y"?"bottom":"right",w=v+u[_],S=v-u[y];v=ny(w,v,S)}const m=a.fn({...t,[p]:g,[d]:v});return{...m,data:{x:m.x-n,y:m.y-r,enabled:{[p]:o,[d]:s}}}}}},XW=function(e){return e===void 0&&(e={}),{options:e,fn(t){const{x:n,y:r,placement:i,rects:o,middlewareData:s}=t,{offset:a=0,mainAxis:c=!0,crossAxis:l=!0}=Jo(e,t),u={x:n,y:r},d=Ws(i),p=_4(d);let g=u[p],v=u[d];const m=Jo(a,t),_=typeof m=="number"?{mainAxis:m,crossAxis:0}:{mainAxis:0,crossAxis:0,...m};if(c){const S=p==="y"?"height":"width",b=o.reference[p]-o.floating[S]+_.mainAxis,C=o.reference[p]+o.reference[S]-_.mainAxis;g<b?g=b:g>C&&(g=C)}if(l){var y,w;const S=p==="y"?"width":"height",b=["top","left"].includes(es(i)),C=o.reference[d]-o.floating[S]+(b&&((y=s.offset)==null?void 0:y[d])||0)+(b?0:_.crossAxis),E=o.reference[d]+o.reference[S]+(b?0:((w=s.offset)==null?void 0:w[d])||0)-(b?_.crossAxis:0);v<C?v=C:v>E&&(v=E)}return{[p]:g,[d]:v}}}},ZW=function(e){return e===void 0&&(e={}),{name:"size",options:e,async fn(t){var n,r;const{placement:i,rects:o,platform:s,elements:a}=t,{apply:c=()=>{},...l}=Jo(e,t),u=await jd(t,l),d=es(i),p=cu(i),g=Ws(i)==="y",{width:v,height:m}=o.floating;let _,y;d==="top"||d==="bottom"?(_=d,y=p===(await(s.isRTL==null?void 0:s.isRTL(a.floating))?"start":"end")?"left":"right"):(y=d,_=p==="end"?"top":"bottom");const w=m-u.top-u.bottom,S=v-u.left-u.right,b=Ks(m-u[_],w),C=Ks(v-u[y],S),E=!t.middlewareData.shift;let x=b,I=C;if((n=t.middlewareData.shift)!=null&&n.enabled.x&&(I=S),(r=t.middlewareData.shift)!=null&&r.enabled.y&&(x=w),E&&!p){const R=Er(u.left,0),k=Er(u.right,0),A=Er(u.top,0),P=Er(u.bottom,0);g?I=v-2*(R!==0||k!==0?R+k:Er(u.left,u.right)):x=m-2*(A!==0||P!==0?A+P:Er(u.top,u.bottom))}await c({...t,availableWidth:I,availableHeight:x});const L=await s.getDimensions(a.floating);return v!==L.width||m!==L.height?{reset:{rects:!0}}:{}}}};function KI(e){const t=kr(e);let n=parseFloat(t.width)||0,r=parseFloat(t.height)||0;const i=Lr(e),o=i?e.offsetWidth:n,s=i?e.offsetHeight:r,a=o1(n)!==o||o1(r)!==s;return a&&(n=o,r=s),{width:n,height:r,$:a}}function S4(e){return pt(e)?e:e.contextElement}function nl(e){const t=S4(e);if(!Lr(t))return no(1);const n=t.getBoundingClientRect(),{width:r,height:i,$:o}=KI(t);let s=(o?o1(n.width):n.width)/r,a=(o?o1(n.height):n.height)/i;return(!s||!Number.isFinite(s))&&(s=1),(!a||!Number.isFinite(a))&&(a=1),{x:s,y:a}}const QW=no(0);function WI(e){const t=cr(e);return!Rg()||!t.visualViewport?QW:{x:t.visualViewport.offsetLeft,y:t.visualViewport.offsetTop}}function JW(e,t,n){return t===void 0&&(t=!1),!n||t&&n!==cr(e)?!1:t}function Da(e,t,n,r){t===void 0&&(t=!1),n===void 0&&(n=!1);const i=e.getBoundingClientRect(),o=S4(e);let s=no(1);t&&(r?pt(r)&&(s=nl(r)):s=nl(e));const a=JW(o,n,r)?WI(o):no(0);let c=(i.left+a.x)/s.x,l=(i.top+a.y)/s.y,u=i.width/s.x,d=i.height/s.y;if(o){const p=cr(o),g=r&&pt(r)?cr(r):r;let v=p,m=Jv(v);for(;m&&r&&g!==v;){const _=nl(m),y=m.getBoundingClientRect(),w=kr(m),S=y.left+(m.clientLeft+parseFloat(w.paddingLeft))*_.x,b=y.top+(m.clientTop+parseFloat(w.paddingTop))*_.y;c*=_.x,l*=_.y,u*=_.x,d*=_.y,c+=S,l+=b,v=cr(m),m=Jv(v)}}return a1({width:u,height:d,x:c,y:l})}function C4(e,t){const n=Lg(e).scrollLeft;return t?t.left+n:Da(ho(e)).left+n}function zI(e,t,n){n===void 0&&(n=!1);const r=e.getBoundingClientRect(),i=r.left+t.scrollLeft-(n?0:C4(e,r)),o=r.top+t.scrollTop;return{x:i,y:o}}function ez(e){let{elements:t,rect:n,offsetParent:r,strategy:i}=e;const o=i==="fixed",s=ho(r),a=t?Ig(t.floating):!1;if(r===s||a&&o)return n;let c={scrollLeft:0,scrollTop:0},l=no(1);const u=no(0),d=Lr(r);if((d||!d&&!o)&&((au(r)!=="body"||Lf(s))&&(c=Lg(r)),Lr(r))){const g=Da(r);l=nl(r),u.x=g.x+r.clientLeft,u.y=g.y+r.clientTop}const p=s&&!d&&!o?zI(s,c,!0):no(0);return{width:n.width*l.x,height:n.height*l.y,x:n.x*l.x-c.scrollLeft*l.x+u.x+p.x,y:n.y*l.y-c.scrollTop*l.y+u.y+p.y}}function tz(e){return Array.from(e.getClientRects())}function nz(e){const t=ho(e),n=Lg(e),r=e.ownerDocument.body,i=Er(t.scrollWidth,t.clientWidth,r.scrollWidth,r.clientWidth),o=Er(t.scrollHeight,t.clientHeight,r.scrollHeight,r.clientHeight);let s=-n.scrollLeft+C4(e);const a=-n.scrollTop;return kr(r).direction==="rtl"&&(s+=Er(t.clientWidth,r.clientWidth)-i),{width:i,height:o,x:s,y:a}}function rz(e,t){const n=cr(e),r=ho(e),i=n.visualViewport;let o=r.clientWidth,s=r.clientHeight,a=0,c=0;if(i){o=i.width,s=i.height;const l=Rg();(!l||l&&t==="fixed")&&(a=i.offsetLeft,c=i.offsetTop)}return{width:o,height:s,x:a,y:c}}function iz(e,t){const n=Da(e,!0,t==="fixed"),r=n.top+e.clientTop,i=n.left+e.clientLeft,o=Lr(e)?nl(e):no(1),s=e.clientWidth*o.x,a=e.clientHeight*o.y,c=i*o.x,l=r*o.y;return{width:s,height:a,x:c,y:l}}function R5(e,t,n){let r;if(t==="viewport")r=rz(e,n);else if(t==="document")r=nz(ho(e));else if(pt(t))r=iz(t,n);else{const i=WI(e);r={x:t.x-i.x,y:t.y-i.y,width:t.width,height:t.height}}return a1(r)}function YI(e,t){const n=Qo(e);return n===t||!pt(n)||Fo(n)?!1:kr(n).position==="fixed"||YI(n,t)}function oz(e,t){const n=t.get(e);if(n)return n;let r=Ps(e,[],!1).filter(a=>pt(a)&&au(a)!=="body"),i=null;const o=kr(e).position==="fixed";let s=o?Qo(e):e;for(;pt(s)&&!Fo(s);){const a=kr(s),c=y4(s);!c&&a.position==="fixed"&&(i=null),(o?!c&&!i:!c&&a.position==="static"&&!!i&&["absolute","fixed"].includes(i.position)||Lf(s)&&!c&&YI(e,s))?r=r.filter(u=>u!==s):i=a,s=Qo(s)}return t.set(e,r),r}function sz(e){let{element:t,boundary:n,rootBoundary:r,strategy:i}=e;const s=[...n==="clippingAncestors"?Ig(t)?[]:oz(t,this._c):[].concat(n),r],a=s[0],c=s.reduce((l,u)=>{const d=R5(t,u,i);return l.top=Er(d.top,l.top),l.right=Ks(d.right,l.right),l.bottom=Ks(d.bottom,l.bottom),l.left=Er(d.left,l.left),l},R5(t,a,i));return{width:c.right-c.left,height:c.bottom-c.top,x:c.left,y:c.top}}function az(e){const{width:t,height:n}=KI(e);return{width:t,height:n}}function cz(e,t,n){const r=Lr(t),i=ho(t),o=n==="fixed",s=Da(e,!0,o,t);let a={scrollLeft:0,scrollTop:0};const c=no(0);if(r||!r&&!o)if((au(t)!=="body"||Lf(i))&&(a=Lg(t)),r){const p=Da(t,!0,o,t);c.x=p.x+t.clientLeft,c.y=p.y+t.clientTop}else i&&(c.x=C4(i));const l=i&&!r&&!o?zI(i,a):no(0),u=s.left+a.scrollLeft-c.x-l.x,d=s.top+a.scrollTop-c.y-l.y;return{x:u,y:d,width:s.width,height:s.height}}function C0(e){return kr(e).position==="static"}function L5(e,t){if(!Lr(e)||kr(e).position==="fixed")return null;if(t)return t(e);let n=e.offsetParent;return ho(e)===n&&(n=n.ownerDocument.body),n}function XI(e,t){const n=cr(e);if(Ig(e))return n;if(!Lr(e)){let i=Qo(e);for(;i&&!Fo(i);){if(pt(i)&&!C0(i))return i;i=Qo(i)}return n}let r=L5(e,t);for(;r&&cW(r)&&C0(r);)r=L5(r,t);return r&&Fo(r)&&C0(r)&&!y4(r)?n:r||lW(e)||n}const lz=async function(e){const t=this.getOffsetParent||XI,n=this.getDimensions,r=await n(e.floating);return{reference:cz(e.reference,await t(e.floating),e.strategy),floating:{x:0,y:0,width:r.width,height:r.height}}};function uz(e){return kr(e).direction==="rtl"}const dz={convertOffsetParentRelativeRectToViewportRelativeRect:ez,getDocumentElement:ho,getClippingRect:sz,getOffsetParent:XI,getElementRects:lz,getClientRects:tz,getDimensions:az,getScale:nl,isElement:pt,isRTL:uz};function ZI(e,t){return e.x===t.x&&e.y===t.y&&e.width===t.width&&e.height===t.height}function fz(e,t){let n=null,r;const i=ho(e);function o(){var a;clearTimeout(r),(a=n)==null||a.disconnect(),n=null}function s(a,c){a===void 0&&(a=!1),c===void 0&&(c=1),o();const l=e.getBoundingClientRect(),{left:u,top:d,width:p,height:g}=l;if(a||t(),!p||!g)return;const v=yh(d),m=yh(i.clientWidth-(u+p)),_=yh(i.clientHeight-(d+g)),y=yh(u),S={rootMargin:-v+"px "+-m+"px "+-_+"px "+-y+"px",threshold:Er(0,Ks(1,c))||1};let b=!0;function C(E){const x=E[0].intersectionRatio;if(x!==c){if(!b)return s();x?s(!1,x):r=setTimeout(()=>{s(!1,1e-7)},1e3)}x===1&&!ZI(l,e.getBoundingClientRect())&&s(),b=!1}try{n=new IntersectionObserver(C,{...S,root:i.ownerDocument})}catch{n=new IntersectionObserver(C,S)}n.observe(e)}return s(!0),o}function E4(e,t,n,r){r===void 0&&(r={});const{ancestorScroll:i=!0,ancestorResize:o=!0,elementResize:s=typeof ResizeObserver=="function",layoutShift:a=typeof IntersectionObserver=="function",animationFrame:c=!1}=r,l=S4(e),u=i||o?[...l?Ps(l):[],...Ps(t)]:[];u.forEach(y=>{i&&y.addEventListener("scroll",n,{passive:!0}),o&&y.addEventListener("resize",n)});const d=l&&a?fz(l,n):null;let p=-1,g=null;s&&(g=new ResizeObserver(y=>{let[w]=y;w&&w.target===l&&g&&(g.unobserve(t),cancelAnimationFrame(p),p=requestAnimationFrame(()=>{var S;(S=g)==null||S.observe(t)})),n()}),l&&!c&&g.observe(l),g.observe(t));let v,m=c?Da(e):null;c&&_();function _(){const y=Da(e);m&&!ZI(m,y)&&n(),m=y,v=requestAnimationFrame(_)}return n(),()=>{var y;u.forEach(w=>{i&&w.removeEventListener("scroll",n),o&&w.removeEventListener("resize",n)}),d?.(),(y=g)==null||y.disconnect(),g=null,c&&cancelAnimationFrame(v)}}const hz=zW,pz=YW,gz=GW,mz=ZW,vz=KW,k5=qW,yz=XW,_z=(e,t,n)=>{const r=new Map,i={platform:dz,...n},o={...i.platform,_c:r};return VW(e,t,{...i,platform:o})};var wp=typeof document<"u"?f.useLayoutEffect:f.useEffect;function u1(e,t){if(e===t)return!0;if(typeof e!=typeof t)return!1;if(typeof e=="function"&&e.toString()===t.toString())return!0;let n,r,i;if(e&&t&&typeof e=="object"){if(Array.isArray(e)){if(n=e.length,n!==t.length)return!1;for(r=n;r--!==0;)if(!u1(e[r],t[r]))return!1;return!0}if(i=Object.keys(e),n=i.length,n!==Object.keys(t).length)return!1;for(r=n;r--!==0;)if(!{}.hasOwnProperty.call(t,i[r]))return!1;for(r=n;r--!==0;){const o=i[r];if(!(o==="_owner"&&e.$$typeof)&&!u1(e[o],t[o]))return!1}return!0}return e!==e&&t!==t}function QI(e){return typeof window>"u"?1:(e.ownerDocument.defaultView||window).devicePixelRatio||1}function T5(e,t){const n=QI(e);return Math.round(t*n)/n}function E0(e){const t=f.useRef(e);return wp(()=>{t.current=e}),t}function x4(e){e===void 0&&(e={});const{placement:t="bottom",strategy:n="absolute",middleware:r=[],platform:i,elements:{reference:o,floating:s}={},transform:a=!0,whileElementsMounted:c,open:l}=e,[u,d]=f.useState({x:0,y:0,strategy:n,placement:t,middlewareData:{},isPositioned:!1}),[p,g]=f.useState(r);u1(p,r)||g(r);const[v,m]=f.useState(null),[_,y]=f.useState(null),w=f.useCallback(N=>{N!==E.current&&(E.current=N,m(N))},[]),S=f.useCallback(N=>{N!==x.current&&(x.current=N,y(N))},[]),b=o||v,C=s||_,E=f.useRef(null),x=f.useRef(null),I=f.useRef(u),L=c!=null,R=E0(c),k=E0(i),A=E0(l),P=f.useCallback(()=>{if(!E.current||!x.current)return;const N={placement:t,strategy:n,middleware:p};k.current&&(N.platform=k.current),_z(E.current,x.current,N).then(M=>{const B={...M,isPositioned:A.current!==!1};O.current&&!u1(I.current,B)&&(I.current=B,Ya.flushSync(()=>{d(B)}))})},[p,t,n,k,A]);wp(()=>{l===!1&&I.current.isPositioned&&(I.current.isPositioned=!1,d(N=>({...N,isPositioned:!1})))},[l]);const O=f.useRef(!1);wp(()=>(O.current=!0,()=>{O.current=!1}),[]),wp(()=>{if(b&&(E.current=b),C&&(x.current=C),b&&C){if(R.current)return R.current(b,C,P);P()}},[b,C,P,R,L]);const j=f.useMemo(()=>({reference:E,floating:x,setReference:w,setFloating:S}),[w,S]),$=f.useMemo(()=>({reference:b,floating:C}),[b,C]),T=f.useMemo(()=>{const N={position:n,left:0,top:0};if(!$.floating)return N;const M=T5($.floating,u.x),B=T5($.floating,u.y);return a?{...N,transform:"translate("+M+"px, "+B+"px)",...QI($.floating)>=1.5&&{willChange:"transform"}}:{position:n,left:M,top:B}},[n,a,$.floating,u.x,u.y]);return f.useMemo(()=>({...u,update:P,refs:j,elements:$,floatingStyles:T}),[u,P,j,$,T])}const bz=e=>{function t(n){return{}.hasOwnProperty.call(n,"current")}return{name:"arrow",options:e,fn(n){const{element:r,padding:i}=typeof e=="function"?e(n):e;return r&&t(r)?r.current!=null?k5({element:r.current,padding:i}).fn(n):{}:r?k5({element:r,padding:i}).fn(n):{}}}},I4=(e,t)=>({...hz(e),options:[e,t]}),R4=(e,t)=>({...pz(e),options:[e,t]}),JI=(e,t)=>({...yz(e),options:[e,t]}),L4=(e,t)=>({...gz(e),options:[e,t]}),eR=(e,t)=>({...mz(e),options:[e,t]}),tR=(e,t)=>({...vz(e),options:[e,t]}),k4=(e,t)=>({...bz(e),options:[e,t]});function nR(e){return f.useMemo(()=>e.every(t=>t==null)?null:t=>{e.forEach(n=>{typeof n=="function"?n(t):n!=null&&(n.current=t)})},e)}const rR={...Kl},wz=rR.useInsertionEffect,Sz=wz||(e=>e());function Mo(e){const t=f.useRef(()=>{});return Sz(()=>{t.current=e}),f.useCallback(function(){for(var n=arguments.length,r=new Array(n),i=0;i<n;i++)r[i]=arguments[i];return t.current==null?void 0:t.current(...r)},[])}var Vn=typeof document<"u"?f.useLayoutEffect:f.useEffect;let A5=!1,Cz=0;const P5=()=>"floating-ui-"+Math.random().toString(36).slice(2,6)+Cz++;function Ez(){const[e,t]=f.useState(()=>A5?P5():void 0);return Vn(()=>{e==null&&t(P5())},[]),f.useEffect(()=>{A5=!0},[]),e}const xz=rR.useId,Cl=xz||Ez,Iz=f.forwardRef(function(t,n){const{context:{placement:r,elements:{floating:i},middlewareData:{arrow:o,shift:s}},width:a=14,height:c=7,tipRadius:l=0,strokeWidth:u=0,staticOffset:d,stroke:p,d:g,style:{transform:v,...m}={},..._}=t,y=Cl(),[w,S]=f.useState(!1);if(Vn(()=>{if(!i)return;kr(i).direction==="rtl"&&S(!0)},[i]),!i)return null;const[b,C]=r.split("-"),E=b==="top"||b==="bottom";let x=d;(E&&s!=null&&s.x||!E&&s!=null&&s.y)&&(x=null);const I=u*2,L=I/2,R=a/2*(l/-8+1),k=c/2*l/4,A=!!g,P=x&&C==="end"?"bottom":"top";let O=x&&C==="end"?"right":"left";x&&w&&(O=C==="end"?"left":"right");const j=o?.x!=null?x||o.x:"",$=o?.y!=null?x||o.y:"",T=g||"M0,0"+(" H"+a)+(" L"+(a-R)+","+(c-k))+(" Q"+a/2+","+c+" "+R+","+(c-k))+" Z",N={top:A?"rotate(180deg)":"",left:A?"rotate(90deg)":"rotate(-90deg)",bottom:A?"":"rotate(180deg)",right:A?"rotate(-90deg)":"rotate(90deg)"}[b];return h.jsxs("svg",{..._,"aria-hidden":!0,ref:n,width:A?a:a+I,height:a,viewBox:"0 0 "+a+" "+(c>a?c:a),style:{position:"absolute",pointerEvents:"none",[O]:j,[P]:$,[b]:E||A?"100%":"calc(100% - "+I/2+"px)",transform:[N,v].filter(M=>!!M).join(" "),...m},children:[I>0&&h.jsx("path",{clipPath:"url(#"+y+")",fill:"none",stroke:p,strokeWidth:I+(g?0:1),d:T}),h.jsx("path",{stroke:I&&!g?_.fill:"none",d:T}),h.jsx("clipPath",{id:y,children:h.jsx("rect",{x:-L,y:L*(A?-1:1),width:a+I,height:a})})]})});function Rz(){const e=new Map;return{emit(t,n){var r;(r=e.get(t))==null||r.forEach(i=>i(n))},on(t,n){e.set(t,[...e.get(t)||[],n])},off(t,n){var r;e.set(t,((r=e.get(t))==null?void 0:r.filter(i=>i!==n))||[])}}}const Lz=f.createContext(null),kz=f.createContext(null),T4=()=>{var e;return((e=f.useContext(Lz))==null?void 0:e.id)||null},A4=()=>f.useContext(kz);function kf(e){return"data-floating-ui-"+e}function x0(e){const t=f.useRef(e);return Vn(()=>{t.current=e}),t}const M5=kf("safe-polygon");function Sp(e,t,n){return n&&!ty(n)?0:typeof e=="number"?e:e?.[t]}function Tz(e,t){t===void 0&&(t={});const{open:n,onOpenChange:r,dataRef:i,events:o,elements:s}=e,{enabled:a=!0,delay:c=0,handleClose:l=null,mouseOnly:u=!1,restMs:d=0,move:p=!0}=t,g=A4(),v=T4(),m=x0(l),_=x0(c),y=x0(n),w=f.useRef(),S=f.useRef(-1),b=f.useRef(),C=f.useRef(-1),E=f.useRef(!0),x=f.useRef(!1),I=f.useRef(()=>{}),L=f.useRef(!1),R=f.useCallback(()=>{var T;const N=(T=i.current.openEvent)==null?void 0:T.type;return N?.includes("mouse")&&N!=="mousedown"},[i]);f.useEffect(()=>{if(!a)return;function T(N){let{open:M}=N;M||(clearTimeout(S.current),clearTimeout(C.current),E.current=!0,L.current=!1)}return o.on("openchange",T),()=>{o.off("openchange",T)}},[a,o]),f.useEffect(()=>{if(!a||!m.current||!n)return;function T(M){R()&&r(!1,M,"hover")}const N=Rs(s.floating).documentElement;return N.addEventListener("mouseleave",T),()=>{N.removeEventListener("mouseleave",T)}},[s.floating,n,r,a,m,R]);const k=f.useCallback(function(T,N,M){N===void 0&&(N=!0),M===void 0&&(M="hover");const B=Sp(_.current,"close",w.current);B&&!b.current?(clearTimeout(S.current),S.current=window.setTimeout(()=>r(!1,T,M),B)):N&&(clearTimeout(S.current),r(!1,T,M))},[_,r]),A=Mo(()=>{I.current(),b.current=void 0}),P=Mo(()=>{if(x.current){const T=Rs(s.floating).body;T.style.pointerEvents="",T.removeAttribute(M5),x.current=!1}}),O=Mo(()=>i.current.openEvent?["click","mousedown"].includes(i.current.openEvent.type):!1);f.useEffect(()=>{if(!a)return;function T(F){if(clearTimeout(S.current),E.current=!1,u&&!ty(w.current)||d>0&&!Sp(_.current,"open"))return;const K=Sp(_.current,"open",w.current);K?S.current=window.setTimeout(()=>{y.current||r(!0,F,"hover")},K):n||r(!0,F,"hover")}function N(F){if(O())return;I.current();const K=Rs(s.floating);if(clearTimeout(C.current),L.current=!1,m.current&&i.current.floatingContext){n||clearTimeout(S.current),b.current=m.current({...i.current.floatingContext,tree:g,x:F.clientX,y:F.clientY,onClose(){P(),A(),O()||k(F,!0,"safe-polygon")}});const oe=b.current;K.addEventListener("mousemove",oe),I.current=()=>{K.removeEventListener("mousemove",oe)};return}(w.current!=="touch"||!Sl(s.floating,F.relatedTarget))&&k(F)}function M(F){O()||i.current.floatingContext&&(m.current==null||m.current({...i.current.floatingContext,tree:g,x:F.clientX,y:F.clientY,onClose(){P(),A(),O()||k(F)}})(F))}if(pt(s.domReference)){var B;const F=s.domReference;return n&&F.addEventListener("mouseleave",M),(B=s.floating)==null||B.addEventListener("mouseleave",M),p&&F.addEventListener("mousemove",T,{once:!0}),F.addEventListener("mouseenter",T),F.addEventListener("mouseleave",N),()=>{var K;n&&F.removeEventListener("mouseleave",M),(K=s.floating)==null||K.removeEventListener("mouseleave",M),p&&F.removeEventListener("mousemove",T),F.removeEventListener("mouseenter",T),F.removeEventListener("mouseleave",N)}}},[s,a,e,u,d,p,k,A,P,r,n,y,g,_,m,i,O]),Vn(()=>{var T;if(a&&n&&(T=m.current)!=null&&T.__options.blockPointerEvents&&R()){x.current=!0;const M=s.floating;if(pt(s.domReference)&&M){var N;const B=Rs(s.floating).body;B.setAttribute(M5,"");const F=s.domReference,K=g==null||(N=g.nodesRef.current.find(te=>te.id===v))==null||(N=N.context)==null?void 0:N.elements.floating;return K&&(K.style.pointerEvents=""),B.style.pointerEvents="none",F.style.pointerEvents="auto",M.style.pointerEvents="auto",()=>{B.style.pointerEvents="",F.style.pointerEvents="",M.style.pointerEvents=""}}}},[a,n,v,s,g,m,R]),Vn(()=>{n||(w.current=void 0,L.current=!1,A(),P())},[n,A,P]),f.useEffect(()=>()=>{A(),clearTimeout(S.current),clearTimeout(C.current),P()},[a,s.domReference,A,P]);const j=f.useMemo(()=>{function T(N){w.current=N.pointerType}return{onPointerDown:T,onPointerEnter:T,onMouseMove(N){const{nativeEvent:M}=N;function B(){!E.current&&!y.current&&r(!0,M,"hover")}u&&!ty(w.current)||n||d===0||L.current&&N.movementX**2+N.movementY**2<2||(clearTimeout(C.current),w.current==="touch"?B():(L.current=!0,C.current=window.setTimeout(B,d)))}}},[u,r,n,y,d]),$=f.useMemo(()=>({onMouseEnter(){clearTimeout(S.current)},onMouseLeave(T){O()||k(T.nativeEvent,!1)}}),[k,O]);return f.useMemo(()=>a?{reference:j,floating:$}:{},[a,j,$])}const oy=()=>{},iR=f.createContext({delay:0,initialDelay:0,timeoutMs:0,currentId:null,setCurrentId:oy,setState:oy,isInstantPhase:!1}),Az=()=>f.useContext(iR);function Pz(e){const{children:t,delay:n,timeoutMs:r=0}=e,[i,o]=f.useReducer((c,l)=>({...c,...l}),{delay:n,timeoutMs:r,initialDelay:n,currentId:null,isInstantPhase:!1}),s=f.useRef(null),a=f.useCallback(c=>{o({currentId:c})},[]);return Vn(()=>{i.currentId?s.current===null?s.current=i.currentId:i.isInstantPhase||o({isInstantPhase:!0}):(i.isInstantPhase&&o({isInstantPhase:!1}),s.current=null)},[i.currentId,i.isInstantPhase]),h.jsx(iR.Provider,{value:f.useMemo(()=>({...i,setState:o,setCurrentId:a}),[i,a]),children:t})}function Mz(e,t){t===void 0&&(t={});const{open:n,onOpenChange:r,floatingId:i}=e,{id:o,enabled:s=!0}=t,a=o??i,c=Az(),{currentId:l,setCurrentId:u,initialDelay:d,setState:p,timeoutMs:g}=c;return Vn(()=>{s&&l&&(p({delay:{open:1,close:Sp(d,"close")}}),l!==a&&r(!1))},[s,a,r,p,l,d]),Vn(()=>{function v(){r(!1),p({delay:d,currentId:null})}if(s&&l&&!n&&l===a){if(g){const m=window.setTimeout(v,g);return()=>{clearTimeout(m)}}v()}},[s,n,p,l,a,r,d,g]),Vn(()=>{s&&(u===oy||!n||u(a))},[s,n,u,a]),c}function I0(e,t){let n=e.filter(i=>{var o;return i.parentId===t&&((o=i.context)==null?void 0:o.open)}),r=n;for(;r.length;)r=e.filter(i=>{var o;return(o=r)==null?void 0:o.some(s=>{var a;return i.parentId===s.id&&((a=i.context)==null?void 0:a.open)})}),n=n.concat(r);return n}const oR=()=>({getShadowRoot:!0,displayCheck:typeof ResizeObserver=="function"&&ResizeObserver.toString().includes("[native code]")?"full":"none"});function sR(e,t){const n=GI(e,oR());t==="prev"&&n.reverse();const r=n.indexOf(ey(Rs(e)));return n.slice(r+1)[0]}function Nz(){return sR(document.body,"next")}function $z(){return sR(document.body,"prev")}function R0(e,t){const n=t||e.currentTarget,r=e.relatedTarget;return!r||!Sl(n,r)}function Oz(e){GI(e,oR()).forEach(n=>{n.dataset.tabindex=n.getAttribute("tabindex")||"",n.setAttribute("tabindex","-1")})}function N5(e){e.querySelectorAll("[data-tabindex]").forEach(n=>{const r=n.dataset.tabindex;delete n.dataset.tabindex,r?n.setAttribute("tabindex",r):n.removeAttribute("tabindex")})}const aR={border:0,clip:"rect(0 0 0 0)",height:"1px",margin:"-1px",overflow:"hidden",padding:0,position:"fixed",whiteSpace:"nowrap",width:"1px",top:0,left:0};let jz;function $5(e){e.key==="Tab"&&(e.target,clearTimeout(jz))}const O5=f.forwardRef(function(t,n){const[r,i]=f.useState();Vn(()=>(FI()&&i("button"),document.addEventListener("keydown",$5),()=>{document.removeEventListener("keydown",$5)}),[]);const o={ref:n,tabIndex:0,role:r,"aria-hidden":r?void 0:!0,[kf("focus-guard")]:"",style:aR};return h.jsx("span",{...t,...o})}),cR=f.createContext(null),j5=kf("portal");function Dz(e){e===void 0&&(e={});const{id:t,root:n}=e,r=Cl(),i=Hz(),[o,s]=f.useState(null),a=f.useRef(null);return Vn(()=>()=>{o?.remove(),queueMicrotask(()=>{a.current=null})},[o]),Vn(()=>{if(!r||a.current)return;const c=t?document.getElementById(t):null;if(!c)return;const l=document.createElement("div");l.id=r,l.setAttribute(j5,""),c.appendChild(l),a.current=l,s(l)},[t,r]),Vn(()=>{if(n===null||!r||a.current)return;let c=n||i?.portalNode;c&&!pt(c)&&(c=c.current),c=c||document.body;let l=null;t&&(l=document.createElement("div"),l.id=t,c.appendChild(l));const u=document.createElement("div");u.id=r,u.setAttribute(j5,""),c=l||c,c.appendChild(u),a.current=u,s(u)},[t,n,r,i]),o}function Fz(e){const{children:t,id:n,root:r,preserveTabOrder:i=!0}=e,o=Dz({id:n,root:r}),[s,a]=f.useState(null),c=f.useRef(null),l=f.useRef(null),u=f.useRef(null),d=f.useRef(null),p=s?.modal,g=s?.open,v=!!s&&!s.modal&&s.open&&i&&!!(r||o);return f.useEffect(()=>{if(!o||!i||p)return;function m(_){o&&R0(_)&&(_.type==="focusin"?N5:Oz)(o)}return o.addEventListener("focusin",m,!0),o.addEventListener("focusout",m,!0),()=>{o.removeEventListener("focusin",m,!0),o.removeEventListener("focusout",m,!0)}},[o,i,p]),f.useEffect(()=>{o&&(g||N5(o))},[g,o]),h.jsxs(cR.Provider,{value:f.useMemo(()=>({preserveTabOrder:i,beforeOutsideRef:c,afterOutsideRef:l,beforeInsideRef:u,afterInsideRef:d,portalNode:o,setFocusManagerState:a}),[i,o]),children:[v&&o&&h.jsx(O5,{"data-type":"outside",ref:c,onFocus:m=>{if(R0(m,o)){var _;(_=u.current)==null||_.focus()}else{const y=$z()||s?.domReference;y?.focus()}}}),v&&o&&h.jsx("span",{"aria-owns":o.id,style:aR}),o&&Ya.createPortal(t,o),v&&o&&h.jsx(O5,{"data-type":"outside",ref:l,onFocus:m=>{if(R0(m,o)){var _;(_=d.current)==null||_.focus()}else{const y=Nz()||s?.domReference;y?.focus(),s?.closeOnFocusOut&&s?.onOpenChange(!1,m.nativeEvent,"focus-out")}}})]})}const Hz=()=>f.useContext(cR),Uz="data-floating-ui-focusable",Bz={pointerdown:"onPointerDown",mousedown:"onMouseDown",click:"onClick"},Vz={pointerdown:"onPointerDownCapture",mousedown:"onMouseDownCapture",click:"onClickCapture"},D5=e=>{var t,n;return{escapeKey:typeof e=="boolean"?e:(t=e?.escapeKey)!=null?t:!1,outsidePress:typeof e=="boolean"?e:(n=e?.outsidePress)!=null?n:!0}};function qz(e,t){t===void 0&&(t={});const{open:n,onOpenChange:r,elements:i,dataRef:o}=e,{enabled:s=!0,escapeKey:a=!0,outsidePress:c=!0,outsidePressEvent:l="pointerdown",referencePress:u=!1,referencePressEvent:d="pointerdown",ancestorScroll:p=!1,bubbles:g,capture:v}=t,m=A4(),_=Mo(typeof c=="function"?c:()=>!1),y=typeof c=="function"?_:c,w=f.useRef(!1),S=f.useRef(!1),{escapeKey:b,outsidePress:C}=D5(g),{escapeKey:E,outsidePress:x}=D5(v),I=f.useRef(!1),L=Mo(j=>{var $;if(!n||!s||!a||j.key!=="Escape"||I.current)return;const T=($=o.current.floatingContext)==null?void 0:$.nodeId,N=m?I0(m.nodesRef.current,T):[];if(!b&&(j.stopPropagation(),N.length>0)){let M=!0;if(N.forEach(B=>{var F;if((F=B.context)!=null&&F.open&&!B.context.dataRef.current.__escapeKeyBubbles){M=!1;return}}),!M)return}r(!1,hW(j)?j.nativeEvent:j,"escape-key")}),R=Mo(j=>{var $;const T=()=>{var N;L(j),(N=Uc(j))==null||N.removeEventListener("keydown",T)};($=Uc(j))==null||$.addEventListener("keydown",T)}),k=Mo(j=>{var $;const T=w.current;w.current=!1;const N=S.current;if(S.current=!1,l==="click"&&N||T||typeof y=="function"&&!y(j))return;const M=Uc(j),B="["+kf("inert")+"]",F=Rs(i.floating).querySelectorAll(B);let K=pt(M)?M:null;for(;K&&!Fo(K);){const ne=Qo(K);if(Fo(ne)||!pt(ne))break;K=ne}if(F.length&&pt(M)&&!pW(M)&&!Sl(M,i.floating)&&Array.from(F).every(ne=>!Sl(K,ne)))return;if(Lr(M)&&O){const ne=Fo(M),z=kr(M),re=/auto|scroll/,Re=ne||re.test(z.overflowX),Le=ne||re.test(z.overflowY),Se=Re&&M.clientWidth>0&&M.scrollWidth>M.clientWidth,xt=Le&&M.clientHeight>0&&M.scrollHeight>M.clientHeight,ct=z.direction==="rtl",we=xt&&(ct?j.offsetX<=M.offsetWidth-M.clientWidth:j.offsetX>M.clientWidth),Rn=Se&&j.offsetY>M.clientHeight;if(we||Rn)return}const te=($=o.current.floatingContext)==null?void 0:$.nodeId,oe=m&&I0(m.nodesRef.current,te).some(ne=>{var z;return S0(j,(z=ne.context)==null?void 0:z.elements.floating)});if(S0(j,i.floating)||S0(j,i.domReference)||oe)return;const pe=m?I0(m.nodesRef.current,te):[];if(pe.length>0){let ne=!0;if(pe.forEach(z=>{var re;if((re=z.context)!=null&&re.open&&!z.context.dataRef.current.__outsidePressBubbles){ne=!1;return}}),!ne)return}r(!1,j,"outside-press")}),A=Mo(j=>{var $;const T=()=>{var N;k(j),(N=Uc(j))==null||N.removeEventListener(l,T)};($=Uc(j))==null||$.addEventListener(l,T)});f.useEffect(()=>{if(!n||!s)return;o.current.__escapeKeyBubbles=b,o.current.__outsidePressBubbles=C;let j=-1;function $(F){r(!1,F,"ancestor-scroll")}function T(){window.clearTimeout(j),I.current=!0}function N(){j=window.setTimeout(()=>{I.current=!1},Rg()?5:0)}const M=Rs(i.floating);a&&(M.addEventListener("keydown",E?R:L,E),M.addEventListener("compositionstart",T),M.addEventListener("compositionend",N)),y&&M.addEventListener(l,x?A:k,x);let B=[];return p&&(pt(i.domReference)&&(B=Ps(i.domReference)),pt(i.floating)&&(B=B.concat(Ps(i.floating))),!pt(i.reference)&&i.reference&&i.reference.contextElement&&(B=B.concat(Ps(i.reference.contextElement)))),B=B.filter(F=>{var K;return F!==((K=M.defaultView)==null?void 0:K.visualViewport)}),B.forEach(F=>{F.addEventListener("scroll",$,{passive:!0})}),()=>{a&&(M.removeEventListener("keydown",E?R:L,E),M.removeEventListener("compositionstart",T),M.removeEventListener("compositionend",N)),y&&M.removeEventListener(l,x?A:k,x),B.forEach(F=>{F.removeEventListener("scroll",$)}),window.clearTimeout(j)}},[o,i,a,y,l,n,r,p,s,b,C,L,E,R,k,x,A]),f.useEffect(()=>{w.current=!1},[y,l]);const P=f.useMemo(()=>({onKeyDown:L,...u&&{[Bz[d]]:j=>{r(!1,j.nativeEvent,"reference-press")},...d!=="click"&&{onClick(j){r(!1,j.nativeEvent,"reference-press")}}}}),[L,r,u,d]),O=f.useMemo(()=>({onKeyDown:L,onMouseDown(){S.current=!0},onMouseUp(){S.current=!0},[Vz[l]]:()=>{w.current=!0}}),[L,l]);return f.useMemo(()=>s?{reference:P,floating:O}:{},[s,P,O])}function Gz(e){const{open:t=!1,onOpenChange:n,elements:r}=e,i=Cl(),o=f.useRef({}),[s]=f.useState(()=>Rz()),a=T4()!=null,[c,l]=f.useState(r.reference),u=Mo((g,v,m)=>{o.current.openEvent=g?v:void 0,s.emit("openchange",{open:g,event:v,reason:m,nested:a}),n?.(g,v,m)}),d=f.useMemo(()=>({setPositionReference:l}),[]),p=f.useMemo(()=>({reference:c||r.reference||null,floating:r.floating||null,domReference:r.reference}),[c,r.reference,r.floating]);return f.useMemo(()=>({dataRef:o,open:t,onOpenChange:u,elements:p,events:s,floatingId:i,refs:d}),[t,u,p,s,i,d])}function Kz(e){e===void 0&&(e={});const{nodeId:t}=e,n=Gz({...e,elements:{reference:null,floating:null,...e.elements}}),r=e.rootContext||n,i=r.elements,[o,s]=f.useState(null),[a,c]=f.useState(null),u=i?.domReference||o,d=f.useRef(null),p=A4();Vn(()=>{u&&(d.current=u)},[u]);const g=x4({...e,elements:{...i,...a&&{reference:a}}}),v=f.useCallback(S=>{const b=pt(S)?{getBoundingClientRect:()=>S.getBoundingClientRect(),contextElement:S}:S;c(b),g.refs.setReference(b)},[g.refs]),m=f.useCallback(S=>{(pt(S)||S===null)&&(d.current=S,s(S)),(pt(g.refs.reference.current)||g.refs.reference.current===null||S!==null&&!pt(S))&&g.refs.setReference(S)},[g.refs]),_=f.useMemo(()=>({...g.refs,setReference:m,setPositionReference:v,domReference:d}),[g.refs,m,v]),y=f.useMemo(()=>({...g.elements,domReference:u}),[g.elements,u]),w=f.useMemo(()=>({...g,...r,refs:_,elements:y,nodeId:t}),[g,_,y,t,r]);return Vn(()=>{r.dataRef.current.floatingContext=w;const S=p?.nodesRef.current.find(b=>b.id===t);S&&(S.context=w)}),f.useMemo(()=>({...g,context:w,refs:_,elements:y}),[g,_,y,w])}function Wz(e,t){t===void 0&&(t={});const{open:n,onOpenChange:r,events:i,dataRef:o,elements:s}=e,{enabled:a=!0,visibleOnly:c=!0}=t,l=f.useRef(!1),u=f.useRef(),d=f.useRef(!0);f.useEffect(()=>{if(!a)return;const g=cr(s.domReference);function v(){!n&&Lr(s.domReference)&&s.domReference===ey(Rs(s.domReference))&&(l.current=!0)}function m(){d.current=!0}return g.addEventListener("blur",v),g.addEventListener("keydown",m,!0),()=>{g.removeEventListener("blur",v),g.removeEventListener("keydown",m,!0)}},[s.domReference,n,a]),f.useEffect(()=>{if(!a)return;function g(v){let{reason:m}=v;(m==="reference-press"||m==="escape-key")&&(l.current=!0)}return i.on("openchange",g),()=>{i.off("openchange",g)}},[i,a]),f.useEffect(()=>()=>{clearTimeout(u.current)},[]);const p=f.useMemo(()=>({onPointerDown(g){uW(g.nativeEvent)||(d.current=!1)},onMouseLeave(){l.current=!1},onFocus(g){if(l.current)return;const v=Uc(g.nativeEvent);if(c&&pt(v))try{if(FI()&&dW())throw Error();if(!v.matches(":focus-visible"))return}catch{if(!d.current&&!mW(v))return}r(!0,g.nativeEvent,"focus")},onBlur(g){l.current=!1;const v=g.relatedTarget,m=g.nativeEvent,_=pt(v)&&v.hasAttribute(kf("focus-guard"))&&v.getAttribute("data-type")==="outside";u.current=window.setTimeout(()=>{var y;const w=ey(s.domReference?s.domReference.ownerDocument:document);!v&&w===s.domReference||Sl((y=o.current.floatingContext)==null?void 0:y.refs.floating.current,w)||Sl(s.domReference,w)||_||r(!1,m,"focus")})}}),[o,s.domReference,r,c]);return f.useMemo(()=>a?{reference:p}:{},[a,p])}const F5="active",H5="selected";function L0(e,t,n){const r=new Map,i=n==="item";let o=e;if(i&&e){const{[F5]:s,[H5]:a,...c}=e;o=c}return{...n==="floating"&&{tabIndex:-1,[Uz]:""},...o,...t.map(s=>{const a=s?s[n]:null;return typeof a=="function"?e?a(e):null:a}).concat(e).reduce((s,a)=>(a&&Object.entries(a).forEach(c=>{let[l,u]=c;if(!(i&&[F5,H5].includes(l)))if(l.indexOf("on")===0){if(r.has(l)||r.set(l,[]),typeof u=="function"){var d;(d=r.get(l))==null||d.push(u),s[l]=function(){for(var p,g=arguments.length,v=new Array(g),m=0;m<g;m++)v[m]=arguments[m];return(p=r.get(l))==null?void 0:p.map(_=>_(...v)).find(_=>_!==void 0)}}}else s[l]=u}),s),{})}}function zz(e){e===void 0&&(e=[]);const t=e.map(a=>a?.reference),n=e.map(a=>a?.floating),r=e.map(a=>a?.item),i=f.useCallback(a=>L0(a,e,"reference"),t),o=f.useCallback(a=>L0(a,e,"floating"),n),s=f.useCallback(a=>L0(a,e,"item"),r);return f.useMemo(()=>({getReferenceProps:i,getFloatingProps:o,getItemProps:s}),[i,o,s])}const Yz=new Map([["select","listbox"],["combobox","listbox"],["label",!1]]);function Xz(e,t){var n;t===void 0&&(t={});const{open:r,floatingId:i}=e,{enabled:o=!0,role:s="dialog"}=t,a=(n=Yz.get(s))!=null?n:s,c=Cl(),u=T4()!=null,d=f.useMemo(()=>a==="tooltip"||s==="label"?{["aria-"+(s==="label"?"labelledby":"describedby")]:r?i:void 0}:{"aria-expanded":r?"true":"false","aria-haspopup":a==="alertdialog"?"dialog":a,"aria-controls":r?i:void 0,...a==="listbox"&&{role:"combobox"},...a==="menu"&&{id:c},...a==="menu"&&u&&{role:"menuitem"},...s==="select"&&{"aria-autocomplete":"none"},...s==="combobox"&&{"aria-autocomplete":"list"}},[a,i,u,r,c,s]),p=f.useMemo(()=>{const v={id:i,...a&&{role:a}};return a==="tooltip"||s==="label"?v:{...v,...a==="menu"&&{"aria-labelledby":c}}},[a,i,c,s]),g=f.useCallback(v=>{let{active:m,selected:_}=v;const y={role:"option",...m&&{id:i+"-option"}};switch(s){case"select":return{...y,"aria-selected":m&&_};case"combobox":return{...y,...m&&{"aria-selected":!0}}}return{}},[i,s]);return f.useMemo(()=>o?{reference:d,floating:p,item:g}:{},[o,d,p,g])}const Zz="_tooltip_1nqnq_8",Qz="_invisible_1nqnq_21",Jz="_caption_1nqnq_28",eY="_arrow_1nqnq_33",Cp={tooltip:Zz,invisible:Qz,caption:Jz,arrow:eY},lR={open:300,close:0},uR=({children:e})=>h.jsx(Pz,{delay:lR,timeoutMs:300,children:e});uR.displayName="TooltipProvider";function tY({open:e,disabled:t=!1,onOpenChange:n,placement:r="bottom",isTriggerInteractive:i,caption:o,"aria-atomic":s,"aria-live":a,...c}){const l=Cl(),u=Cl(),d=f.useRef(null),[p,g]=f.useState(!1),v=t?!1:e??p,m=(P,O,j)=>{n?.(P,O,j),e===void 0&&g(P)},_=Kz({placement:r,open:v,onOpenChange:m,whileElementsMounted:E4,middleware:[I4(6),L4({crossAxis:r.includes("-"),fallbackAxisSideDirection:"start",padding:5}),R4({padding:5}),k4({element:d})]}),y=_.context,{delay:w,initialDelay:S}=Mz(y);if(S!==lR)throw new Error("Tooltips must be wrapped in a global <TooltipProvider>");const b=Tz(y,{move:!1,enabled:e===void 0,delay:i?w:{},mouseOnly:!0}),C=Wz(y,{enabled:e===void 0}),E=f.useRef(void 0);f.useEffect(()=>()=>window.clearTimeout(E.current),[]);const x=f.useMemo(()=>{const P=()=>{E.current===void 0?E.current=window.setTimeout(()=>{m(!1),E.current=void 0},1500):window.clearTimeout(E.current)};return{reference:{onTouchStart:()=>{E.current!==void 0&&window.clearTimeout(E.current),E.current=window.setTimeout(()=>{m(!0),E.current=void 0},500)},onTouchEnd:P,onTouchCancel:P}}},[]),I=qz(y),L="label"in c?"label":"description",R=Xz(y,{enabled:L==="description",role:"tooltip"}),k=f.useMemo(()=>L==="label"?{reference:{"aria-labelledby":l,"aria-describedby":o?u:void 0}}:{},[L,l,u]),A=zz([b,C,x,I,R,k]);return f.useMemo(()=>({labelId:l,captionId:o?u:void 0,caption:o,purpose:L,open:v,setOpen:m,tooltipProps:{"aria-atomic":s,"aria-live":a},...A,..._,arrowRef:d}),[l,u,o,R,v,m,A,_,d])}const nY=e=>"label"in e&&!!e.label;function sn({children:e,isTriggerInteractive:t=!0,nonInteractiveTriggerTabIndex:n=0,...r}){const i=tY({isTriggerInteractive:t,...r});return h.jsxs(NI.Provider,{value:i,children:[h.jsx(oY,{isTriggerInteractive:t,nonInteractiveTriggerTabIndex:n,children:e}),h.jsxs(iY,{children:[h.jsx("span",{id:i.labelId,children:nY(r)?r.label:r.description}),h.jsx(rY,{})]})]})}function rY(){const{caption:e,captionId:t}=v4();if(!e)return null;const r=typeof e=="string"?"span":"div";return h.jsx(r,{id:t,className:Z(Cp.caption,"cpd-theme-dark"),children:e})}function iY({children:e}){const{context:t,open:n,arrowRef:r,purpose:i,...o}=v4();return!n&&i!=="label"?null:h.jsx(Fz,{children:h.jsxs("div",{ref:o.refs.setFloating,style:o.floatingStyles,...o.tooltipProps,...o.getFloatingProps(),className:Z(Cp.tooltip,{[Cp.invisible]:i==="label"&&!n}),children:[h.jsx(Iz,{ref:r,context:t,width:10,height:6,className:Cp.arrow}),e]})})}const oY=({children:e,isTriggerInteractive:t,nonInteractiveTriggerTabIndex:n})=>{const r=v4(),i=e?.ref,o=nR([r.refs.setReference,i]),s=f.useMemo(()=>{if(f.isValidElement(e))if(t){const a=r.getReferenceProps({...typeof e.props=="object"?e.props:{},ref:o});return f.cloneElement(e,a)}else{const a=r.getReferenceProps({ref:o,tabIndex:n}),{"aria-labelledby":c,"aria-describedby":l,...u}=a;return h.jsx("span",{tabIndex:n,...u,children:f.cloneElement(e,{"aria-labelledby":c,"aria-describedby":l})})}},[r,o,e]);if(!s)throw new Error("Tooltip anchor must be a single valid React element");return s},kg=f.forwardRef(function({kind:t="primary",children:n,className:r,indicator:i,size:o="32px",style:s,disabled:a,destructive:c,tooltip:l,noBackground:u=!1,...d},p){const g=Z(w0["icon-button"],r,{[w0.destructive]:c,[w0["no-background"]]:u}),v=h.jsx(MI,{as:"button",ref:p,className:g,style:{"--cpd-icon-button-size":o,...s},disabled:a,...d,"data-indicator":i,"data-kind":t,children:h.jsx(aW,{indicator:i,colour:a?"var(--cpd-color-icon-disabled)":void 0,children:X.Children.only(n)})});return l?h.jsx(sn,{label:l,children:v}):v}),sY=({type:e,title:t,children:n,className:r,actions:i,onClose:o,...s})=>{const a=Z(xc.alert,r),c=f.useCallback(l=>{switch(e){case"critical":return h.jsx(If,{...l});case"info":return h.jsx(JK,{...l});case"success":return h.jsx(QK,{...l})}},[e]);return h.jsxs("div",{...s,className:a,"data-type":e,children:[c({width:24,height:24,className:xc.icon,"aria-hidden":!0}),h.jsxs("div",{className:xc.content,children:[h.jsxs("div",{className:xc["text-content"],children:[h.jsx(Ye,{size:"md",weight:"semibold",children:t}),h.jsx(Ye,{size:"sm",weight:"regular",children:n})]}),i&&h.jsx("div",{className:xc.actions,children:i})]}),o&&h.jsx(kg,{onClick:o,"aria-label":"Close",role:"button",className:xc.close,children:h.jsx(Rf,{})})]})},aY="@",cY="#",lY="+",uY=new Intl.Segmenter;function dY(e){if(e.length<1)return"";const t=e[0];[aY,cY,lY].includes(t)&&(e=e.substring(1));const n=uY.segment(e)[Symbol.iterator]().next();return n.done?"":n.value.segment}const fY="_avatar_zysgz_8",hY="_image_zysgz_43",k0={avatar:fY,image:hY,"avatar-imageless":"_avatar-imageless_zysgz_55"};function pY(e){return e.split("").reduce((i,o)=>i+o.charCodeAt(0),0)%6+1}function gY(e){return!!(e.onClick||e.onKeyDown||e.onKeyUp)}const mY=f.forwardRef(function({src:t,id:n,name:r="",type:i="round",className:o="",size:s,style:a={},onError:c,...l},u){return X.createElement(gY(l)?"button":"span",{ref:u,role:"img","aria-label":n,...l,"data-type":i,"data-color":pY(n),className:Z(k0.avatar,o,{[k0["avatar-imageless"]]:!t}),style:{...a,"--cpd-avatar-size":s}},h.jsx(X.Fragment,{children:t?h.jsx("img",{loading:"lazy",alt:"",src:t,referrerPolicy:"no-referrer",className:Z(k0.image),"data-type":i,style:a,width:s,height:s,onError:c}):dY(r)}))});function Ie(e,t,{checkForDefaultPrevented:n=!0}={}){return function(i){if(e?.(i),n===!1||!i.defaultPrevented)return t?.(i)}}function vY(e,t){const n=f.createContext(t),r=o=>{const{children:s,...a}=o,c=f.useMemo(()=>a,Object.values(a));return h.jsx(n.Provider,{value:c,children:s})};r.displayName=e+"Provider";function i(o){const s=f.useContext(n);if(s)return s;if(t!==void 0)return t;throw new Error(`\`${o}\` must be used within \`${e}\``)}return[r,i]}function ec(e,t=[]){let n=[];function r(o,s){const a=f.createContext(s),c=n.length;n=[...n,s];const l=d=>{const{scope:p,children:g,...v}=d,m=p?.[e]?.[c]||a,_=f.useMemo(()=>v,Object.values(v));return h.jsx(m.Provider,{value:_,children:g})};l.displayName=o+"Provider";function u(d,p){const g=p?.[e]?.[c]||a,v=f.useContext(g);if(v)return v;if(s!==void 0)return s;throw new Error(`\`${d}\` must be used within \`${o}\``)}return[l,u]}const i=()=>{const o=n.map(s=>f.createContext(s));return function(a){const c=a?.[e]||o;return f.useMemo(()=>({[`__scope${e}`]:{...a,[e]:c}}),[a,c])}};return i.scopeName=e,[r,yY(i,...t)]}function yY(...e){const t=e[0];if(e.length===1)return t;const n=()=>{const r=e.map(i=>({useScope:i(),scopeName:i.scopeName}));return function(o){const s=r.reduce((a,{useScope:c,scopeName:l})=>{const d=c(o)[`__scope${l}`];return{...a,...d}},{});return f.useMemo(()=>({[`__scope${t.scopeName}`]:s}),[s])}};return n.scopeName=t.scopeName,n}function U5(e,t){if(typeof e=="function")return e(t);e!=null&&(e.current=t)}function Tg(...e){return t=>{let n=!1;const r=e.map(i=>{const o=U5(i,t);return!n&&typeof o=="function"&&(n=!0),o});if(n)return()=>{for(let i=0;i<r.length;i++){const o=r[i];typeof o=="function"?o():U5(e[i],null)}}}}function Ot(...e){return f.useCallback(Tg(...e),e)}function pr(e){const t=_Y(e),n=f.forwardRef((r,i)=>{const{children:o,...s}=r,a=f.Children.toArray(o),c=a.find(wY);if(c){const l=c.props.children,u=a.map(d=>d===c?f.Children.count(l)>1?f.Children.only(null):f.isValidElement(l)?l.props.children:null:d);return h.jsx(t,{...s,ref:i,children:f.isValidElement(l)?f.cloneElement(l,void 0,u):null})}return h.jsx(t,{...s,ref:i,children:o})});return n.displayName=`${e}.Slot`,n}function _Y(e){const t=f.forwardRef((n,r)=>{const{children:i,...o}=n;if(f.isValidElement(i)){const s=CY(i),a=SY(o,i.props);return i.type!==f.Fragment&&(a.ref=r?Tg(r,s):s),f.cloneElement(i,a)}return f.Children.count(i)>1?f.Children.only(null):null});return t.displayName=`${e}.SlotClone`,t}var bY=Symbol("radix.slottable");function wY(e){return f.isValidElement(e)&&typeof e.type=="function"&&"__radixId"in e.type&&e.type.__radixId===bY}function SY(e,t){const n={...t};for(const r in t){const i=e[r],o=t[r];/^on[A-Z]/.test(r)?i&&o?n[r]=(...a)=>{const c=o(...a);return i(...a),c}:i&&(n[r]=i):r==="style"?n[r]={...i,...o}:r==="className"&&(n[r]=[i,o].filter(Boolean).join(" "))}return{...e,...n}}function CY(e){let t=Object.getOwnPropertyDescriptor(e.props,"ref")?.get,n=t&&"isReactWarning"in t&&t.isReactWarning;return n?e.ref:(t=Object.getOwnPropertyDescriptor(e,"ref")?.get,n=t&&"isReactWarning"in t&&t.isReactWarning,n?e.props.ref:e.props.ref||e.ref)}var EY=["a","button","div","form","h2","h3","img","input","label","li","nav","ol","p","select","span","svg","ul"],xY=EY.reduce((e,t)=>{const n=pr(`Primitive.${t}`),r=f.forwardRef((i,o)=>{const{asChild:s,...a}=i,c=s?n:t;return typeof window<"u"&&(window[Symbol.for("radix-ui")]=!0),h.jsx(c,{...a,ref:o})});return r.displayName=`Primitive.${t}`,{...e,[t]:r}},{});function P4(e){const t=e+"CollectionProvider",[n,r]=ec(t),[i,o]=n(t,{collectionRef:{current:null},itemMap:new Map}),s=m=>{const{scope:_,children:y}=m,w=X.useRef(null),S=X.useRef(new Map).current;return h.jsx(i,{scope:_,itemMap:S,collectionRef:w,children:y})};s.displayName=t;const a=e+"CollectionSlot",c=pr(a),l=X.forwardRef((m,_)=>{const{scope:y,children:w}=m,S=o(a,y),b=Ot(_,S.collectionRef);return h.jsx(c,{ref:b,children:w})});l.displayName=a;const u=e+"CollectionItemSlot",d="data-radix-collection-item",p=pr(u),g=X.forwardRef((m,_)=>{const{scope:y,children:w,...S}=m,b=X.useRef(null),C=Ot(_,b),E=o(u,y);return X.useEffect(()=>(E.itemMap.set(b,{ref:b,...S}),()=>{E.itemMap.delete(b)})),h.jsx(p,{[d]:"",ref:C,children:w})});g.displayName=u;function v(m){const _=o(e+"CollectionConsumer",m);return X.useCallback(()=>{const w=_.collectionRef.current;if(!w)return[];const S=Array.from(w.querySelectorAll(`[${d}]`));return Array.from(_.itemMap.values()).sort((E,x)=>S.indexOf(E.ref.current)-S.indexOf(x.ref.current))},[_.collectionRef,_.itemMap])}return[{Provider:s,Slot:l,ItemSlot:g},v,r]}var IY=f.createContext(void 0);function M4(e){const t=f.useContext(IY);return e||t||"ltr"}var RY=["a","button","div","form","h2","h3","img","input","label","li","nav","ol","p","select","span","svg","ul"],dR=RY.reduce((e,t)=>{const n=pr(`Primitive.${t}`),r=f.forwardRef((i,o)=>{const{asChild:s,...a}=i,c=s?n:t;return typeof window<"u"&&(window[Symbol.for("radix-ui")]=!0),h.jsx(c,{...a,ref:o})});return r.displayName=`Primitive.${t}`,{...e,[t]:r}},{});function LY(e,t){e&&Ya.flushSync(()=>e.dispatchEvent(t))}function oo(e){const t=f.useRef(e);return f.useEffect(()=>{t.current=e}),f.useMemo(()=>(...n)=>t.current?.(...n),[])}function kY(e,t=globalThis?.document){const n=oo(e);f.useEffect(()=>{const r=i=>{i.key==="Escape"&&n(i)};return t.addEventListener("keydown",r,{capture:!0}),()=>t.removeEventListener("keydown",r,{capture:!0})},[n,t])}var TY="DismissableLayer",sy="dismissableLayer.update",AY="dismissableLayer.pointerDownOutside",PY="dismissableLayer.focusOutside",B5,fR=f.createContext({layers:new Set,layersWithOutsidePointerEventsDisabled:new Set,branches:new Set}),Ag=f.forwardRef((e,t)=>{const{disableOutsidePointerEvents:n=!1,onEscapeKeyDown:r,onPointerDownOutside:i,onFocusOutside:o,onInteractOutside:s,onDismiss:a,...c}=e,l=f.useContext(fR),[u,d]=f.useState(null),p=u?.ownerDocument??globalThis?.document,[,g]=f.useState({}),v=Ot(t,x=>d(x)),m=Array.from(l.layers),[_]=[...l.layersWithOutsidePointerEventsDisabled].slice(-1),y=m.indexOf(_),w=u?m.indexOf(u):-1,S=l.layersWithOutsidePointerEventsDisabled.size>0,b=w>=y,C=$Y(x=>{const I=x.target,L=[...l.branches].some(R=>R.contains(I));!b||L||(i?.(x),s?.(x),x.defaultPrevented||a?.())},p),E=OY(x=>{const I=x.target;[...l.branches].some(R=>R.contains(I))||(o?.(x),s?.(x),x.defaultPrevented||a?.())},p);return kY(x=>{w===l.layers.size-1&&(r?.(x),!x.defaultPrevented&&a&&(x.preventDefault(),a()))},p),f.useEffect(()=>{if(u)return n&&(l.layersWithOutsidePointerEventsDisabled.size===0&&(B5=p.body.style.pointerEvents,p.body.style.pointerEvents="none"),l.layersWithOutsidePointerEventsDisabled.add(u)),l.layers.add(u),V5(),()=>{n&&l.layersWithOutsidePointerEventsDisabled.size===1&&(p.body.style.pointerEvents=B5)}},[u,p,n,l]),f.useEffect(()=>()=>{u&&(l.layers.delete(u),l.layersWithOutsidePointerEventsDisabled.delete(u),V5())},[u,l]),f.useEffect(()=>{const x=()=>g({});return document.addEventListener(sy,x),()=>document.removeEventListener(sy,x)},[]),h.jsx(dR.div,{...c,ref:v,style:{pointerEvents:S?b?"auto":"none":void 0,...e.style},onFocusCapture:Ie(e.onFocusCapture,E.onFocusCapture),onBlurCapture:Ie(e.onBlurCapture,E.onBlurCapture),onPointerDownCapture:Ie(e.onPointerDownCapture,C.onPointerDownCapture)})});Ag.displayName=TY;var MY="DismissableLayerBranch",NY=f.forwardRef((e,t)=>{const n=f.useContext(fR),r=f.useRef(null),i=Ot(t,r);return f.useEffect(()=>{const o=r.current;if(o)return n.branches.add(o),()=>{n.branches.delete(o)}},[n.branches]),h.jsx(dR.div,{...e,ref:i})});NY.displayName=MY;function $Y(e,t=globalThis?.document){const n=oo(e),r=f.useRef(!1),i=f.useRef(()=>{});return f.useEffect(()=>{const o=a=>{if(a.target&&!r.current){let c=function(){hR(AY,n,l,{discrete:!0})};const l={originalEvent:a};a.pointerType==="touch"?(t.removeEventListener("click",i.current),i.current=c,t.addEventListener("click",i.current,{once:!0})):c()}else t.removeEventListener("click",i.current);r.current=!1},s=window.setTimeout(()=>{t.addEventListener("pointerdown",o)},0);return()=>{window.clearTimeout(s),t.removeEventListener("pointerdown",o),t.removeEventListener("click",i.current)}},[t,n]),{onPointerDownCapture:()=>r.current=!0}}function OY(e,t=globalThis?.document){const n=oo(e),r=f.useRef(!1);return f.useEffect(()=>{const i=o=>{o.target&&!r.current&&hR(PY,n,{originalEvent:o},{discrete:!1})};return t.addEventListener("focusin",i),()=>t.removeEventListener("focusin",i)},[t,n]),{onFocusCapture:()=>r.current=!0,onBlurCapture:()=>r.current=!1}}function V5(){const e=new CustomEvent(sy);document.dispatchEvent(e)}function hR(e,t,n,{discrete:r}){const i=n.originalEvent.target,o=new CustomEvent(e,{bubbles:!1,cancelable:!0,detail:n});t&&i.addEventListener(e,t,{once:!0}),r?LY(i,o):i.dispatchEvent(o)}var T0=0;function N4(){f.useEffect(()=>{const e=document.querySelectorAll("[data-radix-focus-guard]");return document.body.insertAdjacentElement("afterbegin",e[0]??q5()),document.body.insertAdjacentElement("beforeend",e[1]??q5()),T0++,()=>{T0===1&&document.querySelectorAll("[data-radix-focus-guard]").forEach(t=>t.remove()),T0--}},[])}function q5(){const e=document.createElement("span");return e.setAttribute("data-radix-focus-guard",""),e.tabIndex=0,e.style.outline="none",e.style.opacity="0",e.style.position="fixed",e.style.pointerEvents="none",e}var jY=["a","button","div","form","h2","h3","img","input","label","li","nav","ol","p","select","span","svg","ul"],DY=jY.reduce((e,t)=>{const n=pr(`Primitive.${t}`),r=f.forwardRef((i,o)=>{const{asChild:s,...a}=i,c=s?n:t;return typeof window<"u"&&(window[Symbol.for("radix-ui")]=!0),h.jsx(c,{...a,ref:o})});return r.displayName=`Primitive.${t}`,{...e,[t]:r}},{}),A0="focusScope.autoFocusOnMount",P0="focusScope.autoFocusOnUnmount",G5={bubbles:!1,cancelable:!0},FY="FocusScope",$4=f.forwardRef((e,t)=>{const{loop:n=!1,trapped:r=!1,onMountAutoFocus:i,onUnmountAutoFocus:o,...s}=e,[a,c]=f.useState(null),l=oo(i),u=oo(o),d=f.useRef(null),p=Ot(t,m=>c(m)),g=f.useRef({paused:!1,pause(){this.paused=!0},resume(){this.paused=!1}}).current;f.useEffect(()=>{if(r){let m=function(S){if(g.paused||!a)return;const b=S.target;a.contains(b)?d.current=b:_s(d.current,{select:!0})},_=function(S){if(g.paused||!a)return;const b=S.relatedTarget;b!==null&&(a.contains(b)||_s(d.current,{select:!0}))},y=function(S){if(document.activeElement===document.body)for(const C of S)C.removedNodes.length>0&&_s(a)};document.addEventListener("focusin",m),document.addEventListener("focusout",_);const w=new MutationObserver(y);return a&&w.observe(a,{childList:!0,subtree:!0}),()=>{document.removeEventListener("focusin",m),document.removeEventListener("focusout",_),w.disconnect()}}},[r,a,g.paused]),f.useEffect(()=>{if(a){W5.add(g);const m=document.activeElement;if(!a.contains(m)){const y=new CustomEvent(A0,G5);a.addEventListener(A0,l),a.dispatchEvent(y),y.defaultPrevented||(HY(GY(pR(a)),{select:!0}),document.activeElement===m&&_s(a))}return()=>{a.removeEventListener(A0,l),setTimeout(()=>{const y=new CustomEvent(P0,G5);a.addEventListener(P0,u),a.dispatchEvent(y),y.defaultPrevented||_s(m??document.body,{select:!0}),a.removeEventListener(P0,u),W5.remove(g)},0)}}},[a,l,u,g]);const v=f.useCallback(m=>{if(!n&&!r||g.paused)return;const _=m.key==="Tab"&&!m.altKey&&!m.ctrlKey&&!m.metaKey,y=document.activeElement;if(_&&y){const w=m.currentTarget,[S,b]=UY(w);S&&b?!m.shiftKey&&y===b?(m.preventDefault(),n&&_s(S,{select:!0})):m.shiftKey&&y===S&&(m.preventDefault(),n&&_s(b,{select:!0})):y===w&&m.preventDefault()}},[n,r,g.paused]);return h.jsx(DY.div,{tabIndex:-1,...s,ref:p,onKeyDown:v})});$4.displayName=FY;function HY(e,{select:t=!1}={}){const n=document.activeElement;for(const r of e)if(_s(r,{select:t}),document.activeElement!==n)return}function UY(e){const t=pR(e),n=K5(t,e),r=K5(t.reverse(),e);return[n,r]}function pR(e){const t=[],n=document.createTreeWalker(e,NodeFilter.SHOW_ELEMENT,{acceptNode:r=>{const i=r.tagName==="INPUT"&&r.type==="hidden";return r.disabled||r.hidden||i?NodeFilter.FILTER_SKIP:r.tabIndex>=0?NodeFilter.FILTER_ACCEPT:NodeFilter.FILTER_SKIP}});for(;n.nextNode();)t.push(n.currentNode);return t}function K5(e,t){for(const n of e)if(!BY(n,{upTo:t}))return n}function BY(e,{upTo:t}){if(getComputedStyle(e).visibility==="hidden")return!0;for(;e;){if(t!==void 0&&e===t)return!1;if(getComputedStyle(e).display==="none")return!0;e=e.parentElement}return!1}function VY(e){return e instanceof HTMLInputElement&&"select"in e}function _s(e,{select:t=!1}={}){if(e&&e.focus){const n=document.activeElement;e.focus({preventScroll:!0}),e!==n&&VY(e)&&t&&e.select()}}var W5=qY();function qY(){let e=[];return{add(t){const n=e[0];t!==n&&n?.pause(),e=z5(e,t),e.unshift(t)},remove(t){e=z5(e,t),e[0]?.resume()}}}function z5(e,t){const n=[...e],r=n.indexOf(t);return r!==-1&&n.splice(r,1),n}function GY(e){return e.filter(t=>t.tagName!=="A")}var ts=globalThis?.document?f.useLayoutEffect:()=>{},KY=["a","button","div","form","h2","h3","img","input","label","li","nav","ol","p","select","span","svg","ul"],WY=KY.reduce((e,t)=>{const n=pr(`Primitive.${t}`),r=f.forwardRef((i,o)=>{const{asChild:s,...a}=i,c=s?n:t;return typeof window<"u"&&(window[Symbol.for("radix-ui")]=!0),h.jsx(c,{...a,ref:o})});return r.displayName=`Primitive.${t}`,{...e,[t]:r}},{}),zY="Arrow",gR=f.forwardRef((e,t)=>{const{children:n,width:r=10,height:i=5,...o}=e;return h.jsx(WY.svg,{...o,ref:t,width:r,height:i,viewBox:"0 0 30 10",preserveAspectRatio:"none",children:e.asChild?n:h.jsx("polygon",{points:"0,0 30,0 15,10"})})});gR.displayName=zY;var YY=gR,XY=["a","button","div","form","h2","h3","img","input","label","li","nav","ol","p","select","span","svg","ul"],mR=XY.reduce((e,t)=>{const n=pr(`Primitive.${t}`),r=f.forwardRef((i,o)=>{const{asChild:s,...a}=i,c=s?n:t;return typeof window<"u"&&(window[Symbol.for("radix-ui")]=!0),h.jsx(c,{...a,ref:o})});return r.displayName=`Primitive.${t}`,{...e,[t]:r}},{});function vR(e){const[t,n]=f.useState(void 0);return ts(()=>{if(e){n({width:e.offsetWidth,height:e.offsetHeight});const r=new ResizeObserver(i=>{if(!Array.isArray(i)||!i.length)return;const o=i[0];let s,a;if("borderBoxSize"in o){const c=o.borderBoxSize,l=Array.isArray(c)?c[0]:c;s=l.inlineSize,a=l.blockSize}else s=e.offsetWidth,a=e.offsetHeight;n({width:s,height:a})});return r.observe(e,{box:"border-box"}),()=>r.unobserve(e)}else n(void 0)},[e]),t}var O4="Popper",[yR,_R]=ec(O4),[ZY,bR]=yR(O4),wR=e=>{const{__scopePopper:t,children:n}=e,[r,i]=f.useState(null);return h.jsx(ZY,{scope:t,anchor:r,onAnchorChange:i,children:n})};wR.displayName=O4;var SR="PopperAnchor",CR=f.forwardRef((e,t)=>{const{__scopePopper:n,virtualRef:r,...i}=e,o=bR(SR,n),s=f.useRef(null),a=Ot(t,s),c=f.useRef(null);return f.useEffect(()=>{const l=c.current;c.current=r?.current||s.current,l!==c.current&&o.onAnchorChange(c.current)}),r?null:h.jsx(mR.div,{...i,ref:a})});CR.displayName=SR;var j4="PopperContent",[QY,JY]=yR(j4),ER=f.forwardRef((e,t)=>{const{__scopePopper:n,side:r="bottom",sideOffset:i=0,align:o="center",alignOffset:s=0,arrowPadding:a=0,avoidCollisions:c=!0,collisionBoundary:l=[],collisionPadding:u=0,sticky:d="partial",hideWhenDetached:p=!1,updatePositionStrategy:g="optimized",onPlaced:v,...m}=e,_=bR(j4,n),[y,w]=f.useState(null),S=Ot(t,z=>w(z)),[b,C]=f.useState(null),E=vR(b),x=E?.width??0,I=E?.height??0,L=r+(o!=="center"?"-"+o:""),R=typeof u=="number"?u:{top:0,right:0,bottom:0,left:0,...u},k=Array.isArray(l)?l:[l],A=k.length>0,P={padding:R,boundary:k.filter(tX),altBoundary:A},{refs:O,floatingStyles:j,placement:$,isPositioned:T,middlewareData:N}=x4({strategy:"fixed",placement:L,whileElementsMounted:(...z)=>E4(...z,{animationFrame:g==="always"}),elements:{reference:_.anchor},middleware:[I4({mainAxis:i+I,alignmentAxis:s}),c&&R4({mainAxis:!0,crossAxis:!1,limiter:d==="partial"?JI():void 0,...P}),c&&L4({...P}),eR({...P,apply:({elements:z,rects:re,availableWidth:Re,availableHeight:Le})=>{const{width:Se,height:xt}=re.reference,ct=z.floating.style;ct.setProperty("--radix-popper-available-width",`${Re}px`),ct.setProperty("--radix-popper-available-height",`${Le}px`),ct.setProperty("--radix-popper-anchor-width",`${Se}px`),ct.setProperty("--radix-popper-anchor-height",`${xt}px`)}}),b&&k4({element:b,padding:a}),nX({arrowWidth:x,arrowHeight:I}),p&&tR({strategy:"referenceHidden",...P})]}),[M,B]=RR($),F=oo(v);ts(()=>{T&&F?.()},[T,F]);const K=N.arrow?.x,te=N.arrow?.y,oe=N.arrow?.centerOffset!==0,[pe,ne]=f.useState();return ts(()=>{y&&ne(window.getComputedStyle(y).zIndex)},[y]),h.jsx("div",{ref:O.setFloating,"data-radix-popper-content-wrapper":"",style:{...j,transform:T?j.transform:"translate(0, -200%)",minWidth:"max-content",zIndex:pe,"--radix-popper-transform-origin":[N.transformOrigin?.x,N.transformOrigin?.y].join(" "),...N.hide?.referenceHidden&&{visibility:"hidden",pointerEvents:"none"}},dir:e.dir,children:h.jsx(QY,{scope:n,placedSide:M,onArrowChange:C,arrowX:K,arrowY:te,shouldHideArrow:oe,children:h.jsx(mR.div,{"data-side":M,"data-align":B,...m,ref:S,style:{...m.style,animation:T?void 0:"none"}})})})});ER.displayName=j4;var xR="PopperArrow",eX={top:"bottom",right:"left",bottom:"top",left:"right"},IR=f.forwardRef(function(t,n){const{__scopePopper:r,...i}=t,o=JY(xR,r),s=eX[o.placedSide];return h.jsx("span",{ref:o.onArrowChange,style:{position:"absolute",left:o.arrowX,top:o.arrowY,[s]:0,transformOrigin:{top:"",right:"0 0",bottom:"center 0",left:"100% 0"}[o.placedSide],transform:{top:"translateY(100%)",right:"translateY(50%) rotate(90deg) translateX(-50%)",bottom:"rotate(180deg)",left:"translateY(50%) rotate(-90deg) translateX(50%)"}[o.placedSide],visibility:o.shouldHideArrow?"hidden":void 0},children:h.jsx(YY,{...i,ref:n,style:{...i.style,display:"block"}})})});IR.displayName=xR;function tX(e){return e!==null}var nX=e=>({name:"transformOrigin",options:e,fn(t){const{placement:n,rects:r,middlewareData:i}=t,s=i.arrow?.centerOffset!==0,a=s?0:e.arrowWidth,c=s?0:e.arrowHeight,[l,u]=RR(n),d={start:"0%",center:"50%",end:"100%"}[u],p=(i.arrow?.x??0)+a/2,g=(i.arrow?.y??0)+c/2;let v="",m="";return l==="bottom"?(v=s?d:`${p}px`,m=`${-c}px`):l==="top"?(v=s?d:`${p}px`,m=`${r.floating.height+c}px`):l==="right"?(v=`${-c}px`,m=s?d:`${g}px`):l==="left"&&(v=`${r.floating.width+c}px`,m=s?d:`${g}px`),{data:{x:v,y:m}}}});function RR(e){const[t,n="center"]=e.split("-");return[t,n]}var rX=wR,iX=CR,oX=ER,sX=IR,aX=["a","button","div","form","h2","h3","img","input","label","li","nav","ol","p","select","span","svg","ul"],cX=aX.reduce((e,t)=>{const n=pr(`Primitive.${t}`),r=f.forwardRef((i,o)=>{const{asChild:s,...a}=i,c=s?n:t;return typeof window<"u"&&(window[Symbol.for("radix-ui")]=!0),h.jsx(c,{...a,ref:o})});return r.displayName=`Primitive.${t}`,{...e,[t]:r}},{}),lX="Portal",D4=f.forwardRef((e,t)=>{const{container:n,...r}=e,[i,o]=f.useState(!1);ts(()=>o(!0),[]);const s=n||i&&globalThis?.document?.body;return s?rx.createPortal(h.jsx(cX.div,{...r,ref:t}),s):null});D4.displayName=lX;function uX(e,t){return f.useReducer((n,r)=>t[n][r]??n,e)}var na=e=>{const{present:t,children:n}=e,r=dX(t),i=typeof n=="function"?n({present:r.isPresent}):f.Children.only(n),o=Ot(r.ref,fX(i));return typeof n=="function"||r.isPresent?f.cloneElement(i,{ref:o}):null};na.displayName="Presence";function dX(e){const[t,n]=f.useState(),r=f.useRef(null),i=f.useRef(e),o=f.useRef("none"),s=e?"mounted":"unmounted",[a,c]=uX(s,{mounted:{UNMOUNT:"unmounted",ANIMATION_OUT:"unmountSuspended"},unmountSuspended:{MOUNT:"mounted",ANIMATION_END:"unmounted"},unmounted:{MOUNT:"mounted"}});return f.useEffect(()=>{const l=_h(r.current);o.current=a==="mounted"?l:"none"},[a]),ts(()=>{const l=r.current,u=i.current;if(u!==e){const p=o.current,g=_h(l);e?c("MOUNT"):g==="none"||l?.display==="none"?c("UNMOUNT"):c(u&&p!==g?"ANIMATION_OUT":"UNMOUNT"),i.current=e}},[e,c]),ts(()=>{if(t){let l;const u=t.ownerDocument.defaultView??window,d=g=>{const m=_h(r.current).includes(CSS.escape(g.animationName));if(g.target===t&&m&&(c("ANIMATION_END"),!i.current)){const _=t.style.animationFillMode;t.style.animationFillMode="forwards",l=u.setTimeout(()=>{t.style.animationFillMode==="forwards"&&(t.style.animationFillMode=_)})}},p=g=>{g.target===t&&(o.current=_h(r.current))};return t.addEventListener("animationstart",p),t.addEventListener("animationcancel",d),t.addEventListener("animationend",d),()=>{u.clearTimeout(l),t.removeEventListener("animationstart",p),t.removeEventListener("animationcancel",d),t.removeEventListener("animationend",d)}}else c("ANIMATION_END")},[t,c]),{isPresent:["mounted","unmountSuspended"].includes(a),ref:f.useCallback(l=>{r.current=l?getComputedStyle(l):null,n(l)},[])}}function _h(e){return e?.animationName||"none"}function fX(e){let t=Object.getOwnPropertyDescriptor(e.props,"ref")?.get,n=t&&"isReactWarning"in t&&t.isReactWarning;return n?e.ref:(t=Object.getOwnPropertyDescriptor(e,"ref")?.get,n=t&&"isReactWarning"in t&&t.isReactWarning,n?e.props.ref:e.props.ref||e.ref)}var hX=["a","button","div","form","h2","h3","img","input","label","li","nav","ol","p","select","span","svg","ul"],Tf=hX.reduce((e,t)=>{const n=pr(`Primitive.${t}`),r=f.forwardRef((i,o)=>{const{asChild:s,...a}=i,c=s?n:t;return typeof window<"u"&&(window[Symbol.for("radix-ui")]=!0),h.jsx(c,{...a,ref:o})});return r.displayName=`Primitive.${t}`,{...e,[t]:r}},{});function pX(e,t){e&&Ya.flushSync(()=>e.dispatchEvent(t))}var gX=Kl[" useId ".trim().toString()]||(()=>{}),mX=0;function vX(e){const[t,n]=f.useState(gX());return ts(()=>{n(r=>r??String(mX++))},[e]),t?`radix-${t}`:""}var yX=["a","button","div","form","h2","h3","img","input","label","li","nav","ol","p","select","span","svg","ul"],LR=yX.reduce((e,t)=>{const n=pr(`Primitive.${t}`),r=f.forwardRef((i,o)=>{const{asChild:s,...a}=i,c=s?n:t;return typeof window<"u"&&(window[Symbol.for("radix-ui")]=!0),h.jsx(c,{...a,ref:o})});return r.displayName=`Primitive.${t}`,{...e,[t]:r}},{}),_X=Kl[" useInsertionEffect ".trim().toString()]||ts;function F4({prop:e,defaultProp:t,onChange:n=()=>{},caller:r}){const[i,o,s]=bX({defaultProp:t,onChange:n}),a=e!==void 0,c=a?e:i;{const u=f.useRef(e!==void 0);f.useEffect(()=>{const d=u.current;d!==a&&console.warn(`${r} is changing from ${d?"controlled":"uncontrolled"} to ${a?"controlled":"uncontrolled"}. Components should not switch from controlled to uncontrolled (or vice versa). Decide between using a controlled or uncontrolled value for the lifetime of the component.`),u.current=a},[a,r])}const l=f.useCallback(u=>{if(a){const d=wX(u)?u(e):u;d!==e&&s.current?.(d)}else o(u)},[a,e,o,s]);return[c,l]}function bX({defaultProp:e,onChange:t}){const[n,r]=f.useState(e),i=f.useRef(n),o=f.useRef(t);return _X(()=>{o.current=t},[t]),f.useEffect(()=>{i.current!==n&&(o.current?.(n),i.current=n)},[n,i]),[n,r,o]}function wX(e){return typeof e=="function"}var M0="rovingFocusGroup.onEntryFocus",SX={bubbles:!1,cancelable:!0},Af="RovingFocusGroup",[ay,kR,CX]=P4(Af),[EX,TR]=ec(Af,[CX]),[xX,IX]=EX(Af),AR=f.forwardRef((e,t)=>h.jsx(ay.Provider,{scope:e.__scopeRovingFocusGroup,children:h.jsx(ay.Slot,{scope:e.__scopeRovingFocusGroup,children:h.jsx(RX,{...e,ref:t})})}));AR.displayName=Af;var RX=f.forwardRef((e,t)=>{const{__scopeRovingFocusGroup:n,orientation:r,loop:i=!1,dir:o,currentTabStopId:s,defaultCurrentTabStopId:a,onCurrentTabStopIdChange:c,onEntryFocus:l,preventScrollOnEntryFocus:u=!1,...d}=e,p=f.useRef(null),g=Ot(t,p),v=M4(o),[m,_]=F4({prop:s,defaultProp:a??null,onChange:c,caller:Af}),[y,w]=f.useState(!1),S=oo(l),b=kR(n),C=f.useRef(!1),[E,x]=f.useState(0);return f.useEffect(()=>{const I=p.current;if(I)return I.addEventListener(M0,S),()=>I.removeEventListener(M0,S)},[S]),h.jsx(xX,{scope:n,orientation:r,dir:v,loop:i,currentTabStopId:m,onItemFocus:f.useCallback(I=>_(I),[_]),onItemShiftTab:f.useCallback(()=>w(!0),[]),onFocusableItemAdd:f.useCallback(()=>x(I=>I+1),[]),onFocusableItemRemove:f.useCallback(()=>x(I=>I-1),[]),children:h.jsx(LR.div,{tabIndex:y||E===0?-1:0,"data-orientation":r,...d,ref:g,style:{outline:"none",...e.style},onMouseDown:Ie(e.onMouseDown,()=>{C.current=!0}),onFocus:Ie(e.onFocus,I=>{const L=!C.current;if(I.target===I.currentTarget&&L&&!y){const R=new CustomEvent(M0,SX);if(I.currentTarget.dispatchEvent(R),!R.defaultPrevented){const k=b().filter($=>$.focusable),A=k.find($=>$.active),P=k.find($=>$.id===m),j=[A,P,...k].filter(Boolean).map($=>$.ref.current);NR(j,u)}}C.current=!1}),onBlur:Ie(e.onBlur,()=>w(!1))})})}),PR="RovingFocusGroupItem",MR=f.forwardRef((e,t)=>{const{__scopeRovingFocusGroup:n,focusable:r=!0,active:i=!1,tabStopId:o,children:s,...a}=e,c=vX(),l=o||c,u=IX(PR,n),d=u.currentTabStopId===l,p=kR(n),{onFocusableItemAdd:g,onFocusableItemRemove:v,currentTabStopId:m}=u;return f.useEffect(()=>{if(r)return g(),()=>v()},[r,g,v]),h.jsx(ay.ItemSlot,{scope:n,id:l,focusable:r,active:i,children:h.jsx(LR.span,{tabIndex:d?0:-1,"data-orientation":u.orientation,...a,ref:t,onMouseDown:Ie(e.onMouseDown,_=>{r?u.onItemFocus(l):_.preventDefault()}),onFocus:Ie(e.onFocus,()=>u.onItemFocus(l)),onKeyDown:Ie(e.onKeyDown,_=>{if(_.key==="Tab"&&_.shiftKey){u.onItemShiftTab();return}if(_.target!==_.currentTarget)return;const y=TX(_,u.orientation,u.dir);if(y!==void 0){if(_.metaKey||_.ctrlKey||_.altKey||_.shiftKey)return;_.preventDefault();let S=p().filter(b=>b.focusable).map(b=>b.ref.current);if(y==="last")S.reverse();else if(y==="prev"||y==="next"){y==="prev"&&S.reverse();const b=S.indexOf(_.currentTarget);S=u.loop?AX(S,b+1):S.slice(b+1)}setTimeout(()=>NR(S))}}),children:typeof s=="function"?s({isCurrentTabStop:d,hasTabStop:m!=null}):s})})});MR.displayName=PR;var LX={ArrowLeft:"prev",ArrowUp:"prev",ArrowRight:"next",ArrowDown:"next",PageUp:"first",Home:"first",PageDown:"last",End:"last"};function kX(e,t){return t!=="rtl"?e:e==="ArrowLeft"?"ArrowRight":e==="ArrowRight"?"ArrowLeft":e}function TX(e,t,n){const r=kX(e.key,n);if(!(t==="vertical"&&["ArrowLeft","ArrowRight"].includes(r))&&!(t==="horizontal"&&["ArrowUp","ArrowDown"].includes(r)))return LX[r]}function NR(e,t=!1){const n=document.activeElement;for(const r of e)if(r===n||(r.focus({preventScroll:t}),document.activeElement!==n))return}function AX(e,t){return e.map((n,r)=>e[(t+r)%e.length])}var PX=AR,MX=MR,NX=function(e){if(typeof document>"u")return null;var t=Array.isArray(e)?e[0]:e;return t.ownerDocument.body},Ic=new WeakMap,bh=new WeakMap,wh={},N0=0,$R=function(e){return e&&(e.host||$R(e.parentNode))},$X=function(e,t){return t.map(function(n){if(e.contains(n))return n;var r=$R(n);return r&&e.contains(r)?r:(console.error("aria-hidden",n,"in not contained inside",e,". Doing nothing"),null)}).filter(function(n){return!!n})},OX=function(e,t,n,r){var i=$X(t,Array.isArray(e)?e:[e]);wh[n]||(wh[n]=new WeakMap);var o=wh[n],s=[],a=new Set,c=new Set(i),l=function(d){!d||a.has(d)||(a.add(d),l(d.parentNode))};i.forEach(l);var u=function(d){!d||c.has(d)||Array.prototype.forEach.call(d.children,function(p){if(a.has(p))u(p);else try{var g=p.getAttribute(r),v=g!==null&&g!=="false",m=(Ic.get(p)||0)+1,_=(o.get(p)||0)+1;Ic.set(p,m),o.set(p,_),s.push(p),m===1&&v&&bh.set(p,!0),_===1&&p.setAttribute(n,"true"),v||p.setAttribute(r,"true")}catch(y){console.error("aria-hidden: cannot operate on ",p,y)}})};return u(t),a.clear(),N0++,function(){s.forEach(function(d){var p=Ic.get(d)-1,g=o.get(d)-1;Ic.set(d,p),o.set(d,g),p||(bh.has(d)||d.removeAttribute(r),bh.delete(d)),g||d.removeAttribute(n)}),N0--,N0||(Ic=new WeakMap,Ic=new WeakMap,bh=new WeakMap,wh={})}},H4=function(e,t,n){n===void 0&&(n="data-aria-hidden");var r=Array.from(Array.isArray(e)?e:[e]),i=NX(e);return i?(r.push.apply(r,Array.from(i.querySelectorAll("[aria-live]"))),OX(r,i,n,"aria-hidden")):function(){return null}},cy=function(e,t){return cy=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(n,r){n.__proto__=r}||function(n,r){for(var i in r)Object.prototype.hasOwnProperty.call(r,i)&&(n[i]=r[i])},cy(e,t)};function ji(e,t){if(typeof t!="function"&&t!==null)throw new TypeError("Class extends value "+String(t)+" is not a constructor or null");cy(e,t);function n(){this.constructor=e}e.prototype=t===null?Object.create(t):(n.prototype=t.prototype,new n)}var pn=function(){return pn=Object.assign||function(t){for(var n,r=1,i=arguments.length;r<i;r++){n=arguments[r];for(var o in n)Object.prototype.hasOwnProperty.call(n,o)&&(t[o]=n[o])}return t},pn.apply(this,arguments)};function Pf(e,t){var n={};for(var r in e)Object.prototype.hasOwnProperty.call(e,r)&&t.indexOf(r)<0&&(n[r]=e[r]);if(e!=null&&typeof Object.getOwnPropertySymbols=="function")for(var i=0,r=Object.getOwnPropertySymbols(e);i<r.length;i++)t.indexOf(r[i])<0&&Object.prototype.propertyIsEnumerable.call(e,r[i])&&(n[r[i]]=e[r[i]]);return n}function OR(e,t,n,r){var i=arguments.length,o=i<3?t:r===null?r=Object.getOwnPropertyDescriptor(t,n):r,s;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")o=Reflect.decorate(e,t,n,r);else for(var a=e.length-1;a>=0;a--)(s=e[a])&&(o=(i<3?s(o):i>3?s(t,n,o):s(t,n))||o);return i>3&&o&&Object.defineProperty(t,n,o),o}function jR(e,t){return function(n,r){t(n,r,e)}}function DR(e,t,n,r,i,o){function s(y){if(y!==void 0&&typeof y!="function")throw new TypeError("Function expected");return y}for(var a=r.kind,c=a==="getter"?"get":a==="setter"?"set":"value",l=!t&&e?r.static?e:e.prototype:null,u=t||(l?Object.getOwnPropertyDescriptor(l,r.name):{}),d,p=!1,g=n.length-1;g>=0;g--){var v={};for(var m in r)v[m]=m==="access"?{}:r[m];for(var m in r.access)v.access[m]=r.access[m];v.addInitializer=function(y){if(p)throw new TypeError("Cannot add initializers after decoration has completed");o.push(s(y||null))};var _=(0,n[g])(a==="accessor"?{get:u.get,set:u.set}:u[c],v);if(a==="accessor"){if(_===void 0)continue;if(_===null||typeof _!="object")throw new TypeError("Object expected");(d=s(_.get))&&(u.get=d),(d=s(_.set))&&(u.set=d),(d=s(_.init))&&i.unshift(d)}else(d=s(_))&&(a==="field"?i.unshift(d):u[c]=d)}l&&Object.defineProperty(l,r.name,u),p=!0}function FR(e,t,n){for(var r=arguments.length>2,i=0;i<t.length;i++)n=r?t[i].call(e,n):t[i].call(e);return r?n:void 0}function HR(e){return typeof e=="symbol"?e:"".concat(e)}function UR(e,t,n){return typeof t=="symbol"&&(t=t.description?"[".concat(t.description,"]"):""),Object.defineProperty(e,"name",{configurable:!0,value:n?"".concat(n," ",t):t})}function BR(e,t){if(typeof Reflect=="object"&&typeof Reflect.metadata=="function")return Reflect.metadata(e,t)}function U4(e,t,n,r){function i(o){return o instanceof n?o:new n(function(s){s(o)})}return new(n||(n=Promise))(function(o,s){function a(u){try{l(r.next(u))}catch(d){s(d)}}function c(u){try{l(r.throw(u))}catch(d){s(d)}}function l(u){u.done?o(u.value):i(u.value).then(a,c)}l((r=r.apply(e,t||[])).next())})}function Pg(e,t){var n={label:0,sent:function(){if(o[0]&1)throw o[1];return o[1]},trys:[],ops:[]},r,i,o,s=Object.create((typeof Iterator=="function"?Iterator:Object).prototype);return s.next=a(0),s.throw=a(1),s.return=a(2),typeof Symbol=="function"&&(s[Symbol.iterator]=function(){return this}),s;function a(l){return function(u){return c([l,u])}}function c(l){if(r)throw new TypeError("Generator is already executing.");for(;s&&(s=0,l[0]&&(n=0)),n;)try{if(r=1,i&&(o=l[0]&2?i.return:l[0]?i.throw||((o=i.return)&&o.call(i),0):i.next)&&!(o=o.call(i,l[1])).done)return o;switch(i=0,o&&(l=[l[0]&2,o.value]),l[0]){case 0:case 1:o=l;break;case 4:return n.label++,{value:l[1],done:!1};case 5:n.label++,i=l[1],l=[0];continue;case 7:l=n.ops.pop(),n.trys.pop();continue;default:if(o=n.trys,!(o=o.length>0&&o[o.length-1])&&(l[0]===6||l[0]===2)){n=0;continue}if(l[0]===3&&(!o||l[1]>o[0]&&l[1]<o[3])){n.label=l[1];break}if(l[0]===6&&n.label<o[1]){n.label=o[1],o=l;break}if(o&&n.label<o[2]){n.label=o[2],n.ops.push(l);break}o[2]&&n.ops.pop(),n.trys.pop();continue}l=t.call(e,n)}catch(u){l=[6,u],i=0}finally{r=o=0}if(l[0]&5)throw l[1];return{value:l[0]?l[1]:void 0,done:!0}}}var Mg=Object.create?(function(e,t,n,r){r===void 0&&(r=n);var i=Object.getOwnPropertyDescriptor(t,n);(!i||("get"in i?!t.__esModule:i.writable||i.configurable))&&(i={enumerable:!0,get:function(){return t[n]}}),Object.defineProperty(e,r,i)}):(function(e,t,n,r){r===void 0&&(r=n),e[r]=t[n]});function VR(e,t){for(var n in e)n!=="default"&&!Object.prototype.hasOwnProperty.call(t,n)&&Mg(t,e,n)}function zs(e){var t=typeof Symbol=="function"&&Symbol.iterator,n=t&&e[t],r=0;if(n)return n.call(e);if(e&&typeof e.length=="number")return{next:function(){return e&&r>=e.length&&(e=void 0),{value:e&&e[r++],done:!e}}};throw new TypeError(t?"Object is not iterable.":"Symbol.iterator is not defined.")}function Tr(e,t){var n=typeof Symbol=="function"&&e[Symbol.iterator];if(!n)return e;var r=n.call(e),i,o=[],s;try{for(;(t===void 0||t-- >0)&&!(i=r.next()).done;)o.push(i.value)}catch(a){s={error:a}}finally{try{i&&!i.done&&(n=r.return)&&n.call(r)}finally{if(s)throw s.error}}return o}function qR(){for(var e=[],t=0;t<arguments.length;t++)e=e.concat(Tr(arguments[t]));return e}function GR(){for(var e=0,t=0,n=arguments.length;t<n;t++)e+=arguments[t].length;for(var r=Array(e),i=0,t=0;t<n;t++)for(var o=arguments[t],s=0,a=o.length;s<a;s++,i++)r[i]=o[s];return r}function Ar(e,t,n){if(n||arguments.length===2)for(var r=0,i=t.length,o;r<i;r++)(o||!(r in t))&&(o||(o=Array.prototype.slice.call(t,0,r)),o[r]=t[r]);return e.concat(o||Array.prototype.slice.call(t))}function Ho(e){return this instanceof Ho?(this.v=e,this):new Ho(e)}function B4(e,t,n){if(!Symbol.asyncIterator)throw new TypeError("Symbol.asyncIterator is not defined.");var r=n.apply(e,t||[]),i,o=[];return i=Object.create((typeof AsyncIterator=="function"?AsyncIterator:Object).prototype),a("next"),a("throw"),a("return",s),i[Symbol.asyncIterator]=function(){return this},i;function s(g){return function(v){return Promise.resolve(v).then(g,d)}}function a(g,v){r[g]&&(i[g]=function(m){return new Promise(function(_,y){o.push([g,m,_,y])>1||c(g,m)})},v&&(i[g]=v(i[g])))}function c(g,v){try{l(r[g](v))}catch(m){p(o[0][3],m)}}function l(g){g.value instanceof Ho?Promise.resolve(g.value.v).then(u,d):p(o[0][2],g)}function u(g){c("next",g)}function d(g){c("throw",g)}function p(g,v){g(v),o.shift(),o.length&&c(o[0][0],o[0][1])}}function KR(e){var t,n;return t={},r("next"),r("throw",function(i){throw i}),r("return"),t[Symbol.iterator]=function(){return this},t;function r(i,o){t[i]=e[i]?function(s){return(n=!n)?{value:Ho(e[i](s)),done:!1}:o?o(s):s}:o}}function V4(e){if(!Symbol.asyncIterator)throw new TypeError("Symbol.asyncIterator is not defined.");var t=e[Symbol.asyncIterator],n;return t?t.call(e):(e=typeof zs=="function"?zs(e):e[Symbol.iterator](),n={},r("next"),r("throw"),r("return"),n[Symbol.asyncIterator]=function(){return this},n);function r(o){n[o]=e[o]&&function(s){return new Promise(function(a,c){s=e[o](s),i(a,c,s.done,s.value)})}}function i(o,s,a,c){Promise.resolve(c).then(function(l){o({value:l,done:a})},s)}}function WR(e,t){return Object.defineProperty?Object.defineProperty(e,"raw",{value:t}):e.raw=t,e}var jX=Object.create?(function(e,t){Object.defineProperty(e,"default",{enumerable:!0,value:t})}):function(e,t){e.default=t},ly=function(e){return ly=Object.getOwnPropertyNames||function(t){var n=[];for(var r in t)Object.prototype.hasOwnProperty.call(t,r)&&(n[n.length]=r);return n},ly(e)};function zR(e){if(e&&e.__esModule)return e;var t={};if(e!=null)for(var n=ly(e),r=0;r<n.length;r++)n[r]!=="default"&&Mg(t,e,n[r]);return jX(t,e),t}function YR(e){return e&&e.__esModule?e:{default:e}}function XR(e,t,n,r){if(n==="a"&&!r)throw new TypeError("Private accessor was defined without a getter");if(typeof t=="function"?e!==t||!r:!t.has(e))throw new TypeError("Cannot read private member from an object whose class did not declare it");return n==="m"?r:n==="a"?r.call(e):r?r.value:t.get(e)}function ZR(e,t,n,r,i){if(r==="m")throw new TypeError("Private method is not writable");if(r==="a"&&!i)throw new TypeError("Private accessor was defined without a setter");if(typeof t=="function"?e!==t||!i:!t.has(e))throw new TypeError("Cannot write private member to an object whose class did not declare it");return r==="a"?i.call(e,n):i?i.value=n:t.set(e,n),n}function QR(e,t){if(t===null||typeof t!="object"&&typeof t!="function")throw new TypeError("Cannot use 'in' operator on non-object");return typeof e=="function"?t===e:e.has(t)}function JR(e,t,n){if(t!=null){if(typeof t!="object"&&typeof t!="function")throw new TypeError("Object expected.");var r,i;if(n){if(!Symbol.asyncDispose)throw new TypeError("Symbol.asyncDispose is not defined.");r=t[Symbol.asyncDispose]}if(r===void 0){if(!Symbol.dispose)throw new TypeError("Symbol.dispose is not defined.");r=t[Symbol.dispose],n&&(i=r)}if(typeof r!="function")throw new TypeError("Object not disposable.");i&&(r=function(){try{i.call(this)}catch(o){return Promise.reject(o)}}),e.stack.push({value:t,dispose:r,async:n})}else n&&e.stack.push({async:!0});return t}var DX=typeof SuppressedError=="function"?SuppressedError:function(e,t,n){var r=new Error(n);return r.name="SuppressedError",r.error=e,r.suppressed=t,r};function eL(e){function t(o){e.error=e.hasError?new DX(o,e.error,"An error was suppressed during disposal."):o,e.hasError=!0}var n,r=0;function i(){for(;n=e.stack.pop();)try{if(!n.async&&r===1)return r=0,e.stack.push(n),Promise.resolve().then(i);if(n.dispose){var o=n.dispose.call(n.value);if(n.async)return r|=2,Promise.resolve(o).then(i,function(s){return t(s),i()})}else r|=1}catch(s){t(s)}if(r===1)return e.hasError?Promise.reject(e.error):Promise.resolve();if(e.hasError)throw e.error}return i()}function tL(e,t){return typeof e=="string"&&/^\.\.?\//.test(e)?e.replace(/\.(tsx)$|((?:\.d)?)((?:\.[^./]+?)?)\.([cm]?)ts$/i,function(n,r,i,o,s){return r?t?".jsx":".js":i&&(!o||!s)?n:i+o+"."+s.toLowerCase()+"js"}):e}const FX={__extends:ji,__assign:pn,__rest:Pf,__decorate:OR,__param:jR,__esDecorate:DR,__runInitializers:FR,__propKey:HR,__setFunctionName:UR,__metadata:BR,__awaiter:U4,__generator:Pg,__createBinding:Mg,__exportStar:VR,__values:zs,__read:Tr,__spread:qR,__spreadArrays:GR,__spreadArray:Ar,__await:Ho,__asyncGenerator:B4,__asyncDelegator:KR,__asyncValues:V4,__makeTemplateObject:WR,__importStar:zR,__importDefault:YR,__classPrivateFieldGet:XR,__classPrivateFieldSet:ZR,__classPrivateFieldIn:QR,__addDisposableResource:JR,__disposeResources:eL,__rewriteRelativeImportExtension:tL},C6e=Object.freeze(Object.defineProperty({__proto__:null,__addDisposableResource:JR,get __assign(){return pn},__asyncDelegator:KR,__asyncGenerator:B4,__asyncValues:V4,__await:Ho,__awaiter:U4,__classPrivateFieldGet:XR,__classPrivateFieldIn:QR,__classPrivateFieldSet:ZR,__createBinding:Mg,__decorate:OR,__disposeResources:eL,__esDecorate:DR,__exportStar:VR,__extends:ji,__generator:Pg,__importDefault:YR,__importStar:zR,__makeTemplateObject:WR,__metadata:BR,__param:jR,__propKey:HR,__read:Tr,__rest:Pf,__rewriteRelativeImportExtension:tL,__runInitializers:FR,__setFunctionName:UR,__spread:qR,__spreadArray:Ar,__spreadArrays:GR,__values:zs,default:FX},Symbol.toStringTag,{value:"Module"}));var ld="right-scroll-bar-position",ud="width-before-scroll-bar",HX="with-scroll-bars-hidden",UX="--removed-body-scroll-bar-size";function $0(e,t){return typeof e=="function"?e(t):e&&(e.current=t),e}function BX(e,t){var n=f.useState(function(){return{value:e,callback:t,facade:{get current(){return n.value},set current(r){var i=n.value;i!==r&&(n.value=r,n.callback(r,i))}}}})[0];return n.callback=t,n.facade}var VX=typeof window<"u"?f.useLayoutEffect:f.useEffect,Y5=new WeakMap;function nL(e,t){var n=BX(null,function(r){return e.forEach(function(i){return $0(i,r)})});return VX(function(){var r=Y5.get(n);if(r){var i=new Set(r),o=new Set(e),s=n.current;i.forEach(function(a){o.has(a)||$0(a,null)}),o.forEach(function(a){i.has(a)||$0(a,s)})}Y5.set(n,e)},[e]),n}function qX(e){return e}function GX(e,t){t===void 0&&(t=qX);var n=[],r=!1,i={read:function(){if(r)throw new Error("Sidecar: could not `read` from an `assigned` medium. `read` could be used only with `useMedium`.");return n.length?n[n.length-1]:e},useMedium:function(o){var s=t(o,r);return n.push(s),function(){n=n.filter(function(a){return a!==s})}},assignSyncMedium:function(o){for(r=!0;n.length;){var s=n;n=[],s.forEach(o)}n={push:function(a){return o(a)},filter:function(){return n}}},assignMedium:function(o){r=!0;var s=[];if(n.length){var a=n;n=[],a.forEach(o),s=n}var c=function(){var u=s;s=[],u.forEach(o)},l=function(){return Promise.resolve().then(c)};l(),n={push:function(u){s.push(u),l()},filter:function(u){return s=s.filter(u),n}}}};return i}function rL(e){e===void 0&&(e={});var t=GX(null);return t.options=pn({async:!0,ssr:!1},e),t}var iL=function(e){var t=e.sideCar,n=Pf(e,["sideCar"]);if(!t)throw new Error("Sidecar: please provide `sideCar` property to import the right car");var r=t.read();if(!r)throw new Error("Sidecar medium not found");return f.createElement(r,pn({},n))};iL.isSideCarExport=!0;function oL(e,t){return e.useMedium(t),iL}var sL=rL(),O0=function(){},Ng=f.forwardRef(function(e,t){var n=f.useRef(null),r=f.useState({onScrollCapture:O0,onWheelCapture:O0,onTouchMoveCapture:O0}),i=r[0],o=r[1],s=e.forwardProps,a=e.children,c=e.className,l=e.removeScrollBar,u=e.enabled,d=e.shards,p=e.sideCar,g=e.noIsolation,v=e.inert,m=e.allowPinchZoom,_=e.as,y=_===void 0?"div":_,w=e.gapMode,S=Pf(e,["forwardProps","children","className","removeScrollBar","enabled","shards","sideCar","noIsolation","inert","allowPinchZoom","as","gapMode"]),b=p,C=nL([n,t]),E=pn(pn({},S),i);return f.createElement(f.Fragment,null,u&&f.createElement(b,{sideCar:sL,removeScrollBar:l,shards:d,noIsolation:g,inert:v,setCallbacks:o,allowPinchZoom:!!m,lockRef:n,gapMode:w}),s?f.cloneElement(f.Children.only(a),pn(pn({},E),{ref:C})):f.createElement(y,pn({},E,{className:c,ref:C}),a))});Ng.defaultProps={enabled:!0,removeScrollBar:!0,inert:!1};Ng.classNames={fullWidth:ud,zeroRight:ld};var KX=function(){if(typeof __webpack_nonce__<"u")return __webpack_nonce__};function WX(){if(!document)return null;var e=document.createElement("style");e.type="text/css";var t=KX();return t&&e.setAttribute("nonce",t),e}function zX(e,t){e.styleSheet?e.styleSheet.cssText=t:e.appendChild(document.createTextNode(t))}function YX(e){var t=document.head||document.getElementsByTagName("head")[0];t.appendChild(e)}var XX=function(){var e=0,t=null;return{add:function(n){e==0&&(t=WX())&&(zX(t,n),YX(t)),e++},remove:function(){e--,!e&&t&&(t.parentNode&&t.parentNode.removeChild(t),t=null)}}},ZX=function(){var e=XX();return function(t,n){f.useEffect(function(){return e.add(t),function(){e.remove()}},[t&&n])}},q4=function(){var e=ZX(),t=function(n){var r=n.styles,i=n.dynamic;return e(r,i),null};return t},QX={left:0,top:0,right:0,gap:0},j0=function(e){return parseInt(e||"",10)||0},JX=function(e){var t=window.getComputedStyle(document.body),n=t[e==="padding"?"paddingLeft":"marginLeft"],r=t[e==="padding"?"paddingTop":"marginTop"],i=t[e==="padding"?"paddingRight":"marginRight"];return[j0(n),j0(r),j0(i)]},eZ=function(e){if(e===void 0&&(e="margin"),typeof window>"u")return QX;var t=JX(e),n=document.documentElement.clientWidth,r=window.innerWidth;return{left:t[0],top:t[1],right:t[2],gap:Math.max(0,r-n+t[2]-t[0])}},tZ=q4(),rl="data-scroll-locked",nZ=function(e,t,n,r){var i=e.left,o=e.top,s=e.right,a=e.gap;return n===void 0&&(n="margin"),`
  .`.concat(HX,` {
   overflow: hidden `).concat(r,`;
   padding-right: `).concat(a,"px ").concat(r,`;
  }
  body[`).concat(rl,`] {
    overflow: hidden `).concat(r,`;
    overscroll-behavior: contain;
    `).concat([t&&"position: relative ".concat(r,";"),n==="margin"&&`
    padding-left: `.concat(i,`px;
    padding-top: `).concat(o,`px;
    padding-right: `).concat(s,`px;
    margin-left:0;
    margin-top:0;
    margin-right: `).concat(a,"px ").concat(r,`;
    `),n==="padding"&&"padding-right: ".concat(a,"px ").concat(r,";")].filter(Boolean).join(""),`
  }
  
  .`).concat(ld,` {
    right: `).concat(a,"px ").concat(r,`;
  }
  
  .`).concat(ud,` {
    margin-right: `).concat(a,"px ").concat(r,`;
  }
  
  .`).concat(ld," .").concat(ld,` {
    right: 0 `).concat(r,`;
  }
  
  .`).concat(ud," .").concat(ud,` {
    margin-right: 0 `).concat(r,`;
  }
  
  body[`).concat(rl,`] {
    `).concat(UX,": ").concat(a,`px;
  }
`)},X5=function(){var e=parseInt(document.body.getAttribute(rl)||"0",10);return isFinite(e)?e:0},rZ=function(){f.useEffect(function(){return document.body.setAttribute(rl,(X5()+1).toString()),function(){var e=X5()-1;e<=0?document.body.removeAttribute(rl):document.body.setAttribute(rl,e.toString())}},[])},aL=function(e){var t=e.noRelative,n=e.noImportant,r=e.gapMode,i=r===void 0?"margin":r;rZ();var o=f.useMemo(function(){return eZ(i)},[i]);return f.createElement(tZ,{styles:nZ(o,!t,i,n?"":"!important")})},uy=!1;if(typeof window<"u")try{var Sh=Object.defineProperty({},"passive",{get:function(){return uy=!0,!0}});window.addEventListener("test",Sh,Sh),window.removeEventListener("test",Sh,Sh)}catch{uy=!1}var Rc=uy?{passive:!1}:!1,iZ=function(e){return e.tagName==="TEXTAREA"},cL=function(e,t){if(!(e instanceof Element))return!1;var n=window.getComputedStyle(e);return n[t]!=="hidden"&&!(n.overflowY===n.overflowX&&!iZ(e)&&n[t]==="visible")},oZ=function(e){return cL(e,"overflowY")},sZ=function(e){return cL(e,"overflowX")},Z5=function(e,t){var n=t.ownerDocument,r=t;do{typeof ShadowRoot<"u"&&r instanceof ShadowRoot&&(r=r.host);var i=lL(e,r);if(i){var o=uL(e,r),s=o[1],a=o[2];if(s>a)return!0}r=r.parentNode}while(r&&r!==n.body);return!1},aZ=function(e){var t=e.scrollTop,n=e.scrollHeight,r=e.clientHeight;return[t,n,r]},cZ=function(e){var t=e.scrollLeft,n=e.scrollWidth,r=e.clientWidth;return[t,n,r]},lL=function(e,t){return e==="v"?oZ(t):sZ(t)},uL=function(e,t){return e==="v"?aZ(t):cZ(t)},lZ=function(e,t){return e==="h"&&t==="rtl"?-1:1},uZ=function(e,t,n,r,i){var o=lZ(e,window.getComputedStyle(t).direction),s=o*r,a=n.target,c=t.contains(a),l=!1,u=s>0,d=0,p=0;do{var g=uL(e,a),v=g[0],m=g[1],_=g[2],y=m-_-o*v;(v||y)&&lL(e,a)&&(d+=y,p+=v),a instanceof ShadowRoot?a=a.host:a=a.parentNode}while(!c&&a!==document.body||c&&(t.contains(a)||t===a));return(u&&Math.abs(d)<1||!u&&Math.abs(p)<1)&&(l=!0),l},Ch=function(e){return"changedTouches"in e?[e.changedTouches[0].clientX,e.changedTouches[0].clientY]:[0,0]},Q5=function(e){return[e.deltaX,e.deltaY]},J5=function(e){return e&&"current"in e?e.current:e},dZ=function(e,t){return e[0]===t[0]&&e[1]===t[1]},fZ=function(e){return`
  .block-interactivity-`.concat(e,` {pointer-events: none;}
  .allow-interactivity-`).concat(e,` {pointer-events: all;}
`)},hZ=0,Lc=[];function pZ(e){var t=f.useRef([]),n=f.useRef([0,0]),r=f.useRef(),i=f.useState(hZ++)[0],o=f.useState(q4)[0],s=f.useRef(e);f.useEffect(function(){s.current=e},[e]),f.useEffect(function(){if(e.inert){document.body.classList.add("block-interactivity-".concat(i));var m=Ar([e.lockRef.current],(e.shards||[]).map(J5),!0).filter(Boolean);return m.forEach(function(_){return _.classList.add("allow-interactivity-".concat(i))}),function(){document.body.classList.remove("block-interactivity-".concat(i)),m.forEach(function(_){return _.classList.remove("allow-interactivity-".concat(i))})}}},[e.inert,e.lockRef.current,e.shards]);var a=f.useCallback(function(m,_){if("touches"in m&&m.touches.length===2||m.type==="wheel"&&m.ctrlKey)return!s.current.allowPinchZoom;var y=Ch(m),w=n.current,S="deltaX"in m?m.deltaX:w[0]-y[0],b="deltaY"in m?m.deltaY:w[1]-y[1],C,E=m.target,x=Math.abs(S)>Math.abs(b)?"h":"v";if("touches"in m&&x==="h"&&E.type==="range")return!1;var I=Z5(x,E);if(!I)return!0;if(I?C=x:(C=x==="v"?"h":"v",I=Z5(x,E)),!I)return!1;if(!r.current&&"changedTouches"in m&&(S||b)&&(r.current=C),!C)return!0;var L=r.current||C;return uZ(L,_,m,L==="h"?S:b)},[]),c=f.useCallback(function(m){var _=m;if(!(!Lc.length||Lc[Lc.length-1]!==o)){var y="deltaY"in _?Q5(_):Ch(_),w=t.current.filter(function(C){return C.name===_.type&&(C.target===_.target||_.target===C.shadowParent)&&dZ(C.delta,y)})[0];if(w&&w.should){_.cancelable&&_.preventDefault();return}if(!w){var S=(s.current.shards||[]).map(J5).filter(Boolean).filter(function(C){return C.contains(_.target)}),b=S.length>0?a(_,S[0]):!s.current.noIsolation;b&&_.cancelable&&_.preventDefault()}}},[]),l=f.useCallback(function(m,_,y,w){var S={name:m,delta:_,target:y,should:w,shadowParent:gZ(y)};t.current.push(S),setTimeout(function(){t.current=t.current.filter(function(b){return b!==S})},1)},[]),u=f.useCallback(function(m){n.current=Ch(m),r.current=void 0},[]),d=f.useCallback(function(m){l(m.type,Q5(m),m.target,a(m,e.lockRef.current))},[]),p=f.useCallback(function(m){l(m.type,Ch(m),m.target,a(m,e.lockRef.current))},[]);f.useEffect(function(){return Lc.push(o),e.setCallbacks({onScrollCapture:d,onWheelCapture:d,onTouchMoveCapture:p}),document.addEventListener("wheel",c,Rc),document.addEventListener("touchmove",c,Rc),document.addEventListener("touchstart",u,Rc),function(){Lc=Lc.filter(function(m){return m!==o}),document.removeEventListener("wheel",c,Rc),document.removeEventListener("touchmove",c,Rc),document.removeEventListener("touchstart",u,Rc)}},[]);var g=e.removeScrollBar,v=e.inert;return f.createElement(f.Fragment,null,v?f.createElement(o,{styles:fZ(i)}):null,g?f.createElement(aL,{gapMode:e.gapMode}):null)}function gZ(e){for(var t=null;e!==null;)e instanceof ShadowRoot&&(t=e.host,e=e.host),e=e.parentNode;return t}const mZ=oL(sL,pZ);var G4=f.forwardRef(function(e,t){return f.createElement(Ng,pn({},e,{ref:t,sideCar:mZ}))});G4.classNames=Ng.classNames;var dy=["Enter"," "],vZ=["ArrowDown","PageUp","Home"],dL=["ArrowUp","PageDown","End"],yZ=[...vZ,...dL],_Z={ltr:[...dy,"ArrowRight"],rtl:[...dy,"ArrowLeft"]},bZ={ltr:["ArrowLeft"],rtl:["ArrowRight"]},Mf="Menu",[Dd,wZ,SZ]=P4(Mf),[tc,fL]=ec(Mf,[SZ,_R,TR]),$g=_R(),hL=TR(),[CZ,nc]=tc(Mf),[EZ,Nf]=tc(Mf),pL=e=>{const{__scopeMenu:t,open:n=!1,children:r,dir:i,onOpenChange:o,modal:s=!0}=e,a=$g(t),[c,l]=f.useState(null),u=f.useRef(!1),d=oo(o),p=M4(i);return f.useEffect(()=>{const g=()=>{u.current=!0,document.addEventListener("pointerdown",v,{capture:!0,once:!0}),document.addEventListener("pointermove",v,{capture:!0,once:!0})},v=()=>u.current=!1;return document.addEventListener("keydown",g,{capture:!0}),()=>{document.removeEventListener("keydown",g,{capture:!0}),document.removeEventListener("pointerdown",v,{capture:!0}),document.removeEventListener("pointermove",v,{capture:!0})}},[]),h.jsx(rX,{...a,children:h.jsx(CZ,{scope:t,open:n,onOpenChange:d,content:c,onContentChange:l,children:h.jsx(EZ,{scope:t,onClose:f.useCallback(()=>d(!1),[d]),isUsingKeyboardRef:u,dir:p,modal:s,children:r})})})};pL.displayName=Mf;var xZ="MenuAnchor",K4=f.forwardRef((e,t)=>{const{__scopeMenu:n,...r}=e,i=$g(n);return h.jsx(iX,{...i,...r,ref:t})});K4.displayName=xZ;var W4="MenuPortal",[IZ,gL]=tc(W4,{forceMount:void 0}),mL=e=>{const{__scopeMenu:t,forceMount:n,children:r,container:i}=e,o=nc(W4,t);return h.jsx(IZ,{scope:t,forceMount:n,children:h.jsx(na,{present:n||o.open,children:h.jsx(D4,{asChild:!0,container:i,children:r})})})};mL.displayName=W4;var ri="MenuContent",[RZ,z4]=tc(ri),vL=f.forwardRef((e,t)=>{const n=gL(ri,e.__scopeMenu),{forceMount:r=n.forceMount,...i}=e,o=nc(ri,e.__scopeMenu),s=Nf(ri,e.__scopeMenu);return h.jsx(Dd.Provider,{scope:e.__scopeMenu,children:h.jsx(na,{present:r||o.open,children:h.jsx(Dd.Slot,{scope:e.__scopeMenu,children:s.modal?h.jsx(LZ,{...i,ref:t}):h.jsx(kZ,{...i,ref:t})})})})}),LZ=f.forwardRef((e,t)=>{const n=nc(ri,e.__scopeMenu),r=f.useRef(null),i=Ot(t,r);return f.useEffect(()=>{const o=r.current;if(o)return H4(o)},[]),h.jsx(Y4,{...e,ref:i,trapFocus:n.open,disableOutsidePointerEvents:n.open,disableOutsideScroll:!0,onFocusOutside:Ie(e.onFocusOutside,o=>o.preventDefault(),{checkForDefaultPrevented:!1}),onDismiss:()=>n.onOpenChange(!1)})}),kZ=f.forwardRef((e,t)=>{const n=nc(ri,e.__scopeMenu);return h.jsx(Y4,{...e,ref:t,trapFocus:!1,disableOutsidePointerEvents:!1,disableOutsideScroll:!1,onDismiss:()=>n.onOpenChange(!1)})}),TZ=pr("MenuContent.ScrollLock"),Y4=f.forwardRef((e,t)=>{const{__scopeMenu:n,loop:r=!1,trapFocus:i,onOpenAutoFocus:o,onCloseAutoFocus:s,disableOutsidePointerEvents:a,onEntryFocus:c,onEscapeKeyDown:l,onPointerDownOutside:u,onFocusOutside:d,onInteractOutside:p,onDismiss:g,disableOutsideScroll:v,...m}=e,_=nc(ri,n),y=Nf(ri,n),w=$g(n),S=hL(n),b=wZ(n),[C,E]=f.useState(null),x=f.useRef(null),I=Ot(t,x,_.onContentChange),L=f.useRef(0),R=f.useRef(""),k=f.useRef(0),A=f.useRef(null),P=f.useRef("right"),O=f.useRef(0),j=v?G4:f.Fragment,$=v?{as:TZ,allowPinchZoom:!0}:void 0,T=M=>{const B=R.current+M,F=b().filter(z=>!z.disabled),K=document.activeElement,te=F.find(z=>z.ref.current===K)?.textValue,oe=F.map(z=>z.textValue),pe=BZ(oe,B,te),ne=F.find(z=>z.textValue===pe)?.ref.current;(function z(re){R.current=re,window.clearTimeout(L.current),re!==""&&(L.current=window.setTimeout(()=>z(""),1e3))})(B),ne&&setTimeout(()=>ne.focus())};f.useEffect(()=>()=>window.clearTimeout(L.current),[]),N4();const N=f.useCallback(M=>P.current===A.current?.side&&qZ(M,A.current?.area),[]);return h.jsx(RZ,{scope:n,searchRef:R,onItemEnter:f.useCallback(M=>{N(M)&&M.preventDefault()},[N]),onItemLeave:f.useCallback(M=>{N(M)||(x.current?.focus(),E(null))},[N]),onTriggerLeave:f.useCallback(M=>{N(M)&&M.preventDefault()},[N]),pointerGraceTimerRef:k,onPointerGraceIntentChange:f.useCallback(M=>{A.current=M},[]),children:h.jsx(j,{...$,children:h.jsx($4,{asChild:!0,trapped:i,onMountAutoFocus:Ie(o,M=>{M.preventDefault(),x.current?.focus({preventScroll:!0})}),onUnmountAutoFocus:s,children:h.jsx(Ag,{asChild:!0,disableOutsidePointerEvents:a,onEscapeKeyDown:l,onPointerDownOutside:u,onFocusOutside:d,onInteractOutside:p,onDismiss:g,children:h.jsx(PX,{asChild:!0,...S,dir:y.dir,orientation:"vertical",loop:r,currentTabStopId:C,onCurrentTabStopIdChange:E,onEntryFocus:Ie(c,M=>{y.isUsingKeyboardRef.current||M.preventDefault()}),preventScrollOnEntryFocus:!0,children:h.jsx(oX,{role:"menu","aria-orientation":"vertical","data-state":ML(_.open),"data-radix-menu-content":"",dir:y.dir,...w,...m,ref:I,style:{outline:"none",...m.style},onKeyDown:Ie(m.onKeyDown,M=>{const F=M.target.closest("[data-radix-menu-content]")===M.currentTarget,K=M.ctrlKey||M.altKey||M.metaKey,te=M.key.length===1;F&&(M.key==="Tab"&&M.preventDefault(),!K&&te&&T(M.key));const oe=x.current;if(M.target!==oe||!yZ.includes(M.key))return;M.preventDefault();const ne=b().filter(z=>!z.disabled).map(z=>z.ref.current);dL.includes(M.key)&&ne.reverse(),HZ(ne)}),onBlur:Ie(e.onBlur,M=>{M.currentTarget.contains(M.target)||(window.clearTimeout(L.current),R.current="")}),onPointerMove:Ie(e.onPointerMove,Fd(M=>{const B=M.target,F=O.current!==M.clientX;if(M.currentTarget.contains(B)&&F){const K=M.clientX>O.current?"right":"left";P.current=K,O.current=M.clientX}}))})})})})})})});vL.displayName=ri;var AZ="MenuGroup",X4=f.forwardRef((e,t)=>{const{__scopeMenu:n,...r}=e;return h.jsx(Tf.div,{role:"group",...r,ref:t})});X4.displayName=AZ;var PZ="MenuLabel",yL=f.forwardRef((e,t)=>{const{__scopeMenu:n,...r}=e;return h.jsx(Tf.div,{...r,ref:t})});yL.displayName=PZ;var d1="MenuItem",e7="menu.itemSelect",Og=f.forwardRef((e,t)=>{const{disabled:n=!1,onSelect:r,...i}=e,o=f.useRef(null),s=Nf(d1,e.__scopeMenu),a=z4(d1,e.__scopeMenu),c=Ot(t,o),l=f.useRef(!1),u=()=>{const d=o.current;if(!n&&d){const p=new CustomEvent(e7,{bubbles:!0,cancelable:!0});d.addEventListener(e7,g=>r?.(g),{once:!0}),pX(d,p),p.defaultPrevented?l.current=!1:s.onClose()}};return h.jsx(_L,{...i,ref:c,disabled:n,onClick:Ie(e.onClick,u),onPointerDown:d=>{e.onPointerDown?.(d),l.current=!0},onPointerUp:Ie(e.onPointerUp,d=>{l.current||d.currentTarget?.click()}),onKeyDown:Ie(e.onKeyDown,d=>{const p=a.searchRef.current!=="";n||p&&d.key===" "||dy.includes(d.key)&&(d.currentTarget.click(),d.preventDefault())})})});Og.displayName=d1;var _L=f.forwardRef((e,t)=>{const{__scopeMenu:n,disabled:r=!1,textValue:i,...o}=e,s=z4(d1,n),a=hL(n),c=f.useRef(null),l=Ot(t,c),[u,d]=f.useState(!1),[p,g]=f.useState("");return f.useEffect(()=>{const v=c.current;v&&g((v.textContent??"").trim())},[o.children]),h.jsx(Dd.ItemSlot,{scope:n,disabled:r,textValue:i??p,children:h.jsx(MX,{asChild:!0,...a,focusable:!r,children:h.jsx(Tf.div,{role:"menuitem","data-highlighted":u?"":void 0,"aria-disabled":r||void 0,"data-disabled":r?"":void 0,...o,ref:l,onPointerMove:Ie(e.onPointerMove,Fd(v=>{r?s.onItemLeave(v):(s.onItemEnter(v),v.defaultPrevented||v.currentTarget.focus({preventScroll:!0}))})),onPointerLeave:Ie(e.onPointerLeave,Fd(v=>s.onItemLeave(v))),onFocus:Ie(e.onFocus,()=>d(!0)),onBlur:Ie(e.onBlur,()=>d(!1))})})})}),MZ="MenuCheckboxItem",bL=f.forwardRef((e,t)=>{const{checked:n=!1,onCheckedChange:r,...i}=e;return h.jsx(xL,{scope:e.__scopeMenu,checked:n,children:h.jsx(Og,{role:"menuitemcheckbox","aria-checked":f1(n)?"mixed":n,...i,ref:t,"data-state":Q4(n),onSelect:Ie(i.onSelect,()=>r?.(f1(n)?!0:!n),{checkForDefaultPrevented:!1})})})});bL.displayName=MZ;var wL="MenuRadioGroup",[NZ,$Z]=tc(wL,{value:void 0,onValueChange:()=>{}}),SL=f.forwardRef((e,t)=>{const{value:n,onValueChange:r,...i}=e,o=oo(r);return h.jsx(NZ,{scope:e.__scopeMenu,value:n,onValueChange:o,children:h.jsx(X4,{...i,ref:t})})});SL.displayName=wL;var CL="MenuRadioItem",EL=f.forwardRef((e,t)=>{const{value:n,...r}=e,i=$Z(CL,e.__scopeMenu),o=n===i.value;return h.jsx(xL,{scope:e.__scopeMenu,checked:o,children:h.jsx(Og,{role:"menuitemradio","aria-checked":o,...r,ref:t,"data-state":Q4(o),onSelect:Ie(r.onSelect,()=>i.onValueChange?.(n),{checkForDefaultPrevented:!1})})})});EL.displayName=CL;var Z4="MenuItemIndicator",[xL,OZ]=tc(Z4,{checked:!1}),IL=f.forwardRef((e,t)=>{const{__scopeMenu:n,forceMount:r,...i}=e,o=OZ(Z4,n);return h.jsx(na,{present:r||f1(o.checked)||o.checked===!0,children:h.jsx(Tf.span,{...i,ref:t,"data-state":Q4(o.checked)})})});IL.displayName=Z4;var jZ="MenuSeparator",RL=f.forwardRef((e,t)=>{const{__scopeMenu:n,...r}=e;return h.jsx(Tf.div,{role:"separator","aria-orientation":"horizontal",...r,ref:t})});RL.displayName=jZ;var DZ="MenuArrow",LL=f.forwardRef((e,t)=>{const{__scopeMenu:n,...r}=e,i=$g(n);return h.jsx(sX,{...i,...r,ref:t})});LL.displayName=DZ;var FZ="MenuSub",[E6e,kL]=tc(FZ),Xu="MenuSubTrigger",TL=f.forwardRef((e,t)=>{const n=nc(Xu,e.__scopeMenu),r=Nf(Xu,e.__scopeMenu),i=kL(Xu,e.__scopeMenu),o=z4(Xu,e.__scopeMenu),s=f.useRef(null),{pointerGraceTimerRef:a,onPointerGraceIntentChange:c}=o,l={__scopeMenu:e.__scopeMenu},u=f.useCallback(()=>{s.current&&window.clearTimeout(s.current),s.current=null},[]);return f.useEffect(()=>u,[u]),f.useEffect(()=>{const d=a.current;return()=>{window.clearTimeout(d),c(null)}},[a,c]),h.jsx(K4,{asChild:!0,...l,children:h.jsx(_L,{id:i.triggerId,"aria-haspopup":"menu","aria-expanded":n.open,"aria-controls":i.contentId,"data-state":ML(n.open),...e,ref:Tg(t,i.onTriggerChange),onClick:d=>{e.onClick?.(d),!(e.disabled||d.defaultPrevented)&&(d.currentTarget.focus(),n.open||n.onOpenChange(!0))},onPointerMove:Ie(e.onPointerMove,Fd(d=>{o.onItemEnter(d),!d.defaultPrevented&&!e.disabled&&!n.open&&!s.current&&(o.onPointerGraceIntentChange(null),s.current=window.setTimeout(()=>{n.onOpenChange(!0),u()},100))})),onPointerLeave:Ie(e.onPointerLeave,Fd(d=>{u();const p=n.content?.getBoundingClientRect();if(p){const g=n.content?.dataset.side,v=g==="right",m=v?-5:5,_=p[v?"left":"right"],y=p[v?"right":"left"];o.onPointerGraceIntentChange({area:[{x:d.clientX+m,y:d.clientY},{x:_,y:p.top},{x:y,y:p.top},{x:y,y:p.bottom},{x:_,y:p.bottom}],side:g}),window.clearTimeout(a.current),a.current=window.setTimeout(()=>o.onPointerGraceIntentChange(null),300)}else{if(o.onTriggerLeave(d),d.defaultPrevented)return;o.onPointerGraceIntentChange(null)}})),onKeyDown:Ie(e.onKeyDown,d=>{const p=o.searchRef.current!=="";e.disabled||p&&d.key===" "||_Z[r.dir].includes(d.key)&&(n.onOpenChange(!0),n.content?.focus(),d.preventDefault())})})})});TL.displayName=Xu;var AL="MenuSubContent",PL=f.forwardRef((e,t)=>{const n=gL(ri,e.__scopeMenu),{forceMount:r=n.forceMount,...i}=e,o=nc(ri,e.__scopeMenu),s=Nf(ri,e.__scopeMenu),a=kL(AL,e.__scopeMenu),c=f.useRef(null),l=Ot(t,c);return h.jsx(Dd.Provider,{scope:e.__scopeMenu,children:h.jsx(na,{present:r||o.open,children:h.jsx(Dd.Slot,{scope:e.__scopeMenu,children:h.jsx(Y4,{id:a.contentId,"aria-labelledby":a.triggerId,...i,ref:l,align:"start",side:s.dir==="rtl"?"left":"right",disableOutsidePointerEvents:!1,disableOutsideScroll:!1,trapFocus:!1,onOpenAutoFocus:u=>{s.isUsingKeyboardRef.current&&c.current?.focus(),u.preventDefault()},onCloseAutoFocus:u=>u.preventDefault(),onFocusOutside:Ie(e.onFocusOutside,u=>{u.target!==a.trigger&&o.onOpenChange(!1)}),onEscapeKeyDown:Ie(e.onEscapeKeyDown,u=>{s.onClose(),u.preventDefault()}),onKeyDown:Ie(e.onKeyDown,u=>{const d=u.currentTarget.contains(u.target),p=bZ[s.dir].includes(u.key);d&&p&&(o.onOpenChange(!1),a.trigger?.focus(),u.preventDefault())})})})})})});PL.displayName=AL;function ML(e){return e?"open":"closed"}function f1(e){return e==="indeterminate"}function Q4(e){return f1(e)?"indeterminate":e?"checked":"unchecked"}function HZ(e){const t=document.activeElement;for(const n of e)if(n===t||(n.focus(),document.activeElement!==t))return}function UZ(e,t){return e.map((n,r)=>e[(t+r)%e.length])}function BZ(e,t,n){const i=t.length>1&&Array.from(t).every(l=>l===t[0])?t[0]:t,o=n?e.indexOf(n):-1;let s=UZ(e,Math.max(o,0));i.length===1&&(s=s.filter(l=>l!==n));const c=s.find(l=>l.toLowerCase().startsWith(i.toLowerCase()));return c!==n?c:void 0}function VZ(e,t){const{x:n,y:r}=e;let i=!1;for(let o=0,s=t.length-1;o<t.length;s=o++){const a=t[o],c=t[s],l=a.x,u=a.y,d=c.x,p=c.y;u>r!=p>r&&n<(d-l)*(r-u)/(p-u)+l&&(i=!i)}return i}function qZ(e,t){if(!t)return!1;const n={x:e.clientX,y:e.clientY};return VZ(n,t)}function Fd(e){return t=>t.pointerType==="mouse"?e(t):void 0}var GZ=pL,KZ=K4,WZ=mL,zZ=vL,YZ=X4,XZ=yL,ZZ=Og,QZ=bL,JZ=SL,eQ=EL,tQ=IL,nQ=RL,rQ=LL,iQ=TL,oQ=PL,J4="ContextMenu",[sQ,x6e]=ec(J4,[fL]),Gn=fL(),[aQ,NL]=sQ(J4),$L=e=>{const{__scopeContextMenu:t,children:n,onOpenChange:r,dir:i,modal:o=!0}=e,[s,a]=f.useState(!1),c=Gn(t),l=oo(r),u=f.useCallback(d=>{a(d),l(d)},[l]);return h.jsx(aQ,{scope:t,open:s,onOpenChange:u,modal:o,children:h.jsx(GZ,{...c,dir:i,open:s,onOpenChange:u,modal:o,children:n})})};$L.displayName=J4;var OL="ContextMenuTrigger",jL=f.forwardRef((e,t)=>{const{__scopeContextMenu:n,disabled:r=!1,...i}=e,o=NL(OL,n),s=Gn(n),a=f.useRef({x:0,y:0}),c=f.useRef({getBoundingClientRect:()=>DOMRect.fromRect({width:0,height:0,...a.current})}),l=f.useRef(0),u=f.useCallback(()=>window.clearTimeout(l.current),[]),d=p=>{a.current={x:p.clientX,y:p.clientY},o.onOpenChange(!0)};return f.useEffect(()=>u,[u]),f.useEffect(()=>{r&&u()},[r,u]),h.jsxs(h.Fragment,{children:[h.jsx(KZ,{...s,virtualRef:c}),h.jsx(xY.span,{"data-state":o.open?"open":"closed","data-disabled":r?"":void 0,...i,ref:t,style:{WebkitTouchCallout:"none",...e.style},onContextMenu:r?e.onContextMenu:Ie(e.onContextMenu,p=>{u(),d(p),p.preventDefault()}),onPointerDown:r?e.onPointerDown:Ie(e.onPointerDown,Eh(p=>{u(),l.current=window.setTimeout(()=>d(p),700)})),onPointerMove:r?e.onPointerMove:Ie(e.onPointerMove,Eh(u)),onPointerCancel:r?e.onPointerCancel:Ie(e.onPointerCancel,Eh(u)),onPointerUp:r?e.onPointerUp:Ie(e.onPointerUp,Eh(u))})]})});jL.displayName=OL;var cQ="ContextMenuPortal",DL=e=>{const{__scopeContextMenu:t,...n}=e,r=Gn(t);return h.jsx(WZ,{...r,...n})};DL.displayName=cQ;var FL="ContextMenuContent",HL=f.forwardRef((e,t)=>{const{__scopeContextMenu:n,...r}=e,i=NL(FL,n),o=Gn(n),s=f.useRef(!1);return h.jsx(zZ,{...o,...r,ref:t,side:"right",sideOffset:2,align:"start",onCloseAutoFocus:a=>{e.onCloseAutoFocus?.(a),!a.defaultPrevented&&s.current&&a.preventDefault(),s.current=!1},onInteractOutside:a=>{e.onInteractOutside?.(a),!a.defaultPrevented&&!i.modal&&(s.current=!0)},style:{...e.style,"--radix-context-menu-content-transform-origin":"var(--radix-popper-transform-origin)","--radix-context-menu-content-available-width":"var(--radix-popper-available-width)","--radix-context-menu-content-available-height":"var(--radix-popper-available-height)","--radix-context-menu-trigger-width":"var(--radix-popper-anchor-width)","--radix-context-menu-trigger-height":"var(--radix-popper-anchor-height)"}})});HL.displayName=FL;var lQ="ContextMenuGroup",uQ=f.forwardRef((e,t)=>{const{__scopeContextMenu:n,...r}=e,i=Gn(n);return h.jsx(YZ,{...i,...r,ref:t})});uQ.displayName=lQ;var dQ="ContextMenuLabel",fQ=f.forwardRef((e,t)=>{const{__scopeContextMenu:n,...r}=e,i=Gn(n);return h.jsx(XZ,{...i,...r,ref:t})});fQ.displayName=dQ;var hQ="ContextMenuItem",UL=f.forwardRef((e,t)=>{const{__scopeContextMenu:n,...r}=e,i=Gn(n);return h.jsx(ZZ,{...i,...r,ref:t})});UL.displayName=hQ;var pQ="ContextMenuCheckboxItem",gQ=f.forwardRef((e,t)=>{const{__scopeContextMenu:n,...r}=e,i=Gn(n);return h.jsx(QZ,{...i,...r,ref:t})});gQ.displayName=pQ;var mQ="ContextMenuRadioGroup",vQ=f.forwardRef((e,t)=>{const{__scopeContextMenu:n,...r}=e,i=Gn(n);return h.jsx(JZ,{...i,...r,ref:t})});vQ.displayName=mQ;var yQ="ContextMenuRadioItem",_Q=f.forwardRef((e,t)=>{const{__scopeContextMenu:n,...r}=e,i=Gn(n);return h.jsx(eQ,{...i,...r,ref:t})});_Q.displayName=yQ;var bQ="ContextMenuItemIndicator",wQ=f.forwardRef((e,t)=>{const{__scopeContextMenu:n,...r}=e,i=Gn(n);return h.jsx(tQ,{...i,...r,ref:t})});wQ.displayName=bQ;var SQ="ContextMenuSeparator",CQ=f.forwardRef((e,t)=>{const{__scopeContextMenu:n,...r}=e,i=Gn(n);return h.jsx(nQ,{...i,...r,ref:t})});CQ.displayName=SQ;var EQ="ContextMenuArrow",xQ=f.forwardRef((e,t)=>{const{__scopeContextMenu:n,...r}=e,i=Gn(n);return h.jsx(rQ,{...i,...r,ref:t})});xQ.displayName=EQ;var IQ="ContextMenuSubTrigger",RQ=f.forwardRef((e,t)=>{const{__scopeContextMenu:n,...r}=e,i=Gn(n);return h.jsx(iQ,{...i,...r,ref:t})});RQ.displayName=IQ;var LQ="ContextMenuSubContent",kQ=f.forwardRef((e,t)=>{const{__scopeContextMenu:n,...r}=e,i=Gn(n);return h.jsx(oQ,{...i,...r,ref:t,style:{...e.style,"--radix-context-menu-content-transform-origin":"var(--radix-popper-transform-origin)","--radix-context-menu-content-available-width":"var(--radix-popper-available-width)","--radix-context-menu-content-available-height":"var(--radix-popper-available-height)","--radix-context-menu-trigger-width":"var(--radix-popper-anchor-width)","--radix-context-menu-trigger-height":"var(--radix-popper-anchor-height)"}})});kQ.displayName=LQ;function Eh(e){return t=>t.pointerType!=="mouse"?e(t):void 0}var t7=$L,TQ=jL,AQ=DL,PQ=HL;const MQ="_menu_1glhz_8",NQ="_title_1glhz_74",n7={menu:MQ,title:NQ},$Q={"menu-title":"_menu-title_1sgvx_8"},OQ=({title:e,id:t,className:n})=>{const r=Z($Q["menu-title"],n);return h.jsx(Ye,{as:"h3",id:t,className:r,size:"sm",weight:"semibold",children:e})},e_=f.forwardRef(({title:e,showTitle:t=!0,className:n,children:r,...i},o)=>{const s=f.useId();return h.jsxs("div",{role:"menu",ref:o,"aria-label":t?void 0:e,"aria-labelledby":t?s:void 0,className:Z(n,n7.menu),...i,children:[t&&h.jsx(OQ,{className:n7.title,title:e,id:s}),r]})});e_.displayName="FloatingMenu";var jQ=Kl[" useId ".trim().toString()]||(()=>{}),DQ=0;function D0(e){const[t,n]=f.useState(jQ());return ts(()=>{n(r=>r??String(DQ++))},[e]),e||(t?`radix-${t}`:"")}var FQ=["a","button","div","form","h2","h3","img","input","label","li","nav","ol","p","select","span","svg","ul"],$f=FQ.reduce((e,t)=>{const n=pr(`Primitive.${t}`),r=f.forwardRef((i,o)=>{const{asChild:s,...a}=i,c=s?n:t;return typeof window<"u"&&(window[Symbol.for("radix-ui")]=!0),h.jsx(c,{...a,ref:o})});return r.displayName=`Primitive.${t}`,{...e,[t]:r}},{}),jg="Dialog",[BL,I6e]=ec(jg),[HQ,Di]=BL(jg),VL=e=>{const{__scopeDialog:t,children:n,open:r,defaultOpen:i,onOpenChange:o,modal:s=!0}=e,a=f.useRef(null),c=f.useRef(null),[l,u]=F4({prop:r,defaultProp:i??!1,onChange:o,caller:jg});return h.jsx(HQ,{scope:t,triggerRef:a,contentRef:c,contentId:D0(),titleId:D0(),descriptionId:D0(),open:l,onOpenChange:u,onOpenToggle:f.useCallback(()=>u(d=>!d),[u]),modal:s,children:n})};VL.displayName=jg;var qL="DialogTrigger",GL=f.forwardRef((e,t)=>{const{__scopeDialog:n,...r}=e,i=Di(qL,n),o=Ot(t,i.triggerRef);return h.jsx($f.button,{type:"button","aria-haspopup":"dialog","aria-expanded":i.open,"aria-controls":i.contentId,"data-state":r_(i.open),...r,ref:o,onClick:Ie(e.onClick,i.onOpenToggle)})});GL.displayName=qL;var t_="DialogPortal",[UQ,KL]=BL(t_,{forceMount:void 0}),WL=e=>{const{__scopeDialog:t,forceMount:n,children:r,container:i}=e,o=Di(t_,t);return h.jsx(UQ,{scope:t,forceMount:n,children:f.Children.map(r,s=>h.jsx(na,{present:n||o.open,children:h.jsx(D4,{asChild:!0,container:i,children:s})}))})};WL.displayName=t_;var h1="DialogOverlay",zL=f.forwardRef((e,t)=>{const n=KL(h1,e.__scopeDialog),{forceMount:r=n.forceMount,...i}=e,o=Di(h1,e.__scopeDialog);return o.modal?h.jsx(na,{present:r||o.open,children:h.jsx(VQ,{...i,ref:t})}):null});zL.displayName=h1;var BQ=pr("DialogOverlay.RemoveScroll"),VQ=f.forwardRef((e,t)=>{const{__scopeDialog:n,...r}=e,i=Di(h1,n);return h.jsx(G4,{as:BQ,allowPinchZoom:!0,shards:[i.contentRef],children:h.jsx($f.div,{"data-state":r_(i.open),...r,ref:t,style:{pointerEvents:"auto",...r.style}})})}),Fa="DialogContent",YL=f.forwardRef((e,t)=>{const n=KL(Fa,e.__scopeDialog),{forceMount:r=n.forceMount,...i}=e,o=Di(Fa,e.__scopeDialog);return h.jsx(na,{present:r||o.open,children:o.modal?h.jsx(qQ,{...i,ref:t}):h.jsx(GQ,{...i,ref:t})})});YL.displayName=Fa;var qQ=f.forwardRef((e,t)=>{const n=Di(Fa,e.__scopeDialog),r=f.useRef(null),i=Ot(t,n.contentRef,r);return f.useEffect(()=>{const o=r.current;if(o)return H4(o)},[]),h.jsx(XL,{...e,ref:i,trapFocus:n.open,disableOutsidePointerEvents:!0,onCloseAutoFocus:Ie(e.onCloseAutoFocus,o=>{o.preventDefault(),n.triggerRef.current?.focus()}),onPointerDownOutside:Ie(e.onPointerDownOutside,o=>{const s=o.detail.originalEvent,a=s.button===0&&s.ctrlKey===!0;(s.button===2||a)&&o.preventDefault()}),onFocusOutside:Ie(e.onFocusOutside,o=>o.preventDefault())})}),GQ=f.forwardRef((e,t)=>{const n=Di(Fa,e.__scopeDialog),r=f.useRef(!1),i=f.useRef(!1);return h.jsx(XL,{...e,ref:t,trapFocus:!1,disableOutsidePointerEvents:!1,onCloseAutoFocus:o=>{e.onCloseAutoFocus?.(o),o.defaultPrevented||(r.current||n.triggerRef.current?.focus(),o.preventDefault()),r.current=!1,i.current=!1},onInteractOutside:o=>{e.onInteractOutside?.(o),o.defaultPrevented||(r.current=!0,o.detail.originalEvent.type==="pointerdown"&&(i.current=!0));const s=o.target;n.triggerRef.current?.contains(s)&&o.preventDefault(),o.detail.originalEvent.type==="focusin"&&i.current&&o.preventDefault()}})}),XL=f.forwardRef((e,t)=>{const{__scopeDialog:n,trapFocus:r,onOpenAutoFocus:i,onCloseAutoFocus:o,...s}=e,a=Di(Fa,n),c=f.useRef(null),l=Ot(t,c);return N4(),h.jsxs(h.Fragment,{children:[h.jsx($4,{asChild:!0,loop:!0,trapped:r,onMountAutoFocus:i,onUnmountAutoFocus:o,children:h.jsx(Ag,{role:"dialog",id:a.contentId,"aria-describedby":a.descriptionId,"aria-labelledby":a.titleId,"data-state":r_(a.open),...s,ref:l,onDismiss:()=>a.onOpenChange(!1)})}),h.jsxs(h.Fragment,{children:[h.jsx(WQ,{titleId:a.titleId}),h.jsx(YQ,{contentRef:c,descriptionId:a.descriptionId})]})]})}),n_="DialogTitle",ZL=f.forwardRef((e,t)=>{const{__scopeDialog:n,...r}=e,i=Di(n_,n);return h.jsx($f.h2,{id:i.titleId,...r,ref:t})});ZL.displayName=n_;var QL="DialogDescription",KQ=f.forwardRef((e,t)=>{const{__scopeDialog:n,...r}=e,i=Di(QL,n);return h.jsx($f.p,{id:i.descriptionId,...r,ref:t})});KQ.displayName=QL;var JL="DialogClose",ek=f.forwardRef((e,t)=>{const{__scopeDialog:n,...r}=e,i=Di(JL,n);return h.jsx($f.button,{type:"button",...r,ref:t,onClick:Ie(e.onClick,()=>i.onOpenChange(!1))})});ek.displayName=JL;function r_(e){return e?"open":"closed"}var tk="DialogTitleWarning",[R6e,nk]=vY(tk,{contentName:Fa,titleName:n_,docsSlug:"dialog"}),WQ=({titleId:e})=>{const t=nk(tk),n=`\`${t.contentName}\` requires a \`${t.titleName}\` for the component to be accessible for screen reader users.

If you want to hide the \`${t.titleName}\`, you can wrap it with our VisuallyHidden component.

For more information, see https://radix-ui.com/primitives/docs/components/${t.docsSlug}`;return f.useEffect(()=>{e&&(document.getElementById(e)||console.error(n))},[n,e]),null},zQ="DialogDescriptionWarning",YQ=({contentRef:e,descriptionId:t})=>{const r=`Warning: Missing \`Description\` or \`aria-describedby={undefined}\` for {${nk(zQ).contentName}}.`;return f.useEffect(()=>{const i=e.current?.getAttribute("aria-describedby");t&&i&&(document.getElementById(t)||console.warn(r))},[r,e,t]),null},i_=VL,XQ=GL,o_=WL,s_=zL,a_=YL,c_=ZL,rk=ek;function ZQ(e){if(typeof document>"u")return;let t=document.head||document.getElementsByTagName("head")[0],n=document.createElement("style");n.type="text/css",t.appendChild(n),n.styleSheet?n.styleSheet.cssText=e:n.appendChild(document.createTextNode(e))}const ik=X.createContext({drawerRef:{current:null},overlayRef:{current:null},onPress:()=>{},onRelease:()=>{},onDrag:()=>{},onNestedDrag:()=>{},onNestedOpenChange:()=>{},onNestedRelease:()=>{},openProp:void 0,dismissible:!1,isOpen:!1,isDragging:!1,keyboardIsOpen:{current:!1},snapPointsOffset:null,snapPoints:null,handleOnly:!1,modal:!1,shouldFade:!1,activeSnapPoint:null,onOpenChange:()=>{},setActiveSnapPoint:()=>{},closeDrawer:()=>{},direction:"bottom",shouldAnimate:{current:!0},shouldScaleBackground:!1,setBackgroundColorOnScale:!0,noBodyStyles:!1,container:null,autoFocus:!1}),Of=()=>{const e=X.useContext(ik);if(!e)throw new Error("useDrawerContext must be used within a Drawer.Root");return e};ZQ(`[data-vaul-drawer]{touch-action:none;will-change:transform;transition:transform .5s cubic-bezier(.32, .72, 0, 1);animation-duration:.5s;animation-timing-function:cubic-bezier(0.32,0.72,0,1)}[data-vaul-drawer][data-vaul-snap-points=false][data-vaul-drawer-direction=bottom][data-state=open]{animation-name:slideFromBottom}[data-vaul-drawer][data-vaul-snap-points=false][data-vaul-drawer-direction=bottom][data-state=closed]{animation-name:slideToBottom}[data-vaul-drawer][data-vaul-snap-points=false][data-vaul-drawer-direction=top][data-state=open]{animation-name:slideFromTop}[data-vaul-drawer][data-vaul-snap-points=false][data-vaul-drawer-direction=top][data-state=closed]{animation-name:slideToTop}[data-vaul-drawer][data-vaul-snap-points=false][data-vaul-drawer-direction=left][data-state=open]{animation-name:slideFromLeft}[data-vaul-drawer][data-vaul-snap-points=false][data-vaul-drawer-direction=left][data-state=closed]{animation-name:slideToLeft}[data-vaul-drawer][data-vaul-snap-points=false][data-vaul-drawer-direction=right][data-state=open]{animation-name:slideFromRight}[data-vaul-drawer][data-vaul-snap-points=false][data-vaul-drawer-direction=right][data-state=closed]{animation-name:slideToRight}[data-vaul-drawer][data-vaul-snap-points=true][data-vaul-drawer-direction=bottom]{transform:translate3d(0,var(--initial-transform,100%),0)}[data-vaul-drawer][data-vaul-snap-points=true][data-vaul-drawer-direction=top]{transform:translate3d(0,calc(var(--initial-transform,100%) * -1),0)}[data-vaul-drawer][data-vaul-snap-points=true][data-vaul-drawer-direction=left]{transform:translate3d(calc(var(--initial-transform,100%) * -1),0,0)}[data-vaul-drawer][data-vaul-snap-points=true][data-vaul-drawer-direction=right]{transform:translate3d(var(--initial-transform,100%),0,0)}[data-vaul-drawer][data-vaul-delayed-snap-points=true][data-vaul-drawer-direction=top]{transform:translate3d(0,var(--snap-point-height,0),0)}[data-vaul-drawer][data-vaul-delayed-snap-points=true][data-vaul-drawer-direction=bottom]{transform:translate3d(0,var(--snap-point-height,0),0)}[data-vaul-drawer][data-vaul-delayed-snap-points=true][data-vaul-drawer-direction=left]{transform:translate3d(var(--snap-point-height,0),0,0)}[data-vaul-drawer][data-vaul-delayed-snap-points=true][data-vaul-drawer-direction=right]{transform:translate3d(var(--snap-point-height,0),0,0)}[data-vaul-overlay][data-vaul-snap-points=false]{animation-duration:.5s;animation-timing-function:cubic-bezier(0.32,0.72,0,1)}[data-vaul-overlay][data-vaul-snap-points=false][data-state=open]{animation-name:fadeIn}[data-vaul-overlay][data-state=closed]{animation-name:fadeOut}[data-vaul-animate=false]{animation:none!important}[data-vaul-overlay][data-vaul-snap-points=true]{opacity:0;transition:opacity .5s cubic-bezier(.32, .72, 0, 1)}[data-vaul-overlay][data-vaul-snap-points=true]{opacity:1}[data-vaul-drawer]:not([data-vaul-custom-container=true])::after{content:'';position:absolute;background:inherit;background-color:inherit}[data-vaul-drawer][data-vaul-drawer-direction=top]::after{top:initial;bottom:100%;left:0;right:0;height:200%}[data-vaul-drawer][data-vaul-drawer-direction=bottom]::after{top:100%;bottom:initial;left:0;right:0;height:200%}[data-vaul-drawer][data-vaul-drawer-direction=left]::after{left:initial;right:100%;top:0;bottom:0;width:200%}[data-vaul-drawer][data-vaul-drawer-direction=right]::after{left:100%;right:initial;top:0;bottom:0;width:200%}[data-vaul-overlay][data-vaul-snap-points=true]:not([data-vaul-snap-points-overlay=true]):not(
[data-state=closed]
){opacity:0}[data-vaul-overlay][data-vaul-snap-points-overlay=true]{opacity:1}[data-vaul-handle]{display:block;position:relative;opacity:.7;background:#e2e2e4;margin-left:auto;margin-right:auto;height:5px;width:32px;border-radius:1rem;touch-action:pan-y}[data-vaul-handle]:active,[data-vaul-handle]:hover{opacity:1}[data-vaul-handle-hitarea]{position:absolute;left:50%;top:50%;transform:translate(-50%,-50%);width:max(100%,2.75rem);height:max(100%,2.75rem);touch-action:inherit}@media (hover:hover) and (pointer:fine){[data-vaul-drawer]{user-select:none}}@media (pointer:fine){[data-vaul-handle-hitarea]:{width:100%;height:100%}}@keyframes fadeIn{from{opacity:0}to{opacity:1}}@keyframes fadeOut{to{opacity:0}}@keyframes slideFromBottom{from{transform:translate3d(0,var(--initial-transform,100%),0)}to{transform:translate3d(0,0,0)}}@keyframes slideToBottom{to{transform:translate3d(0,var(--initial-transform,100%),0)}}@keyframes slideFromTop{from{transform:translate3d(0,calc(var(--initial-transform,100%) * -1),0)}to{transform:translate3d(0,0,0)}}@keyframes slideToTop{to{transform:translate3d(0,calc(var(--initial-transform,100%) * -1),0)}}@keyframes slideFromLeft{from{transform:translate3d(calc(var(--initial-transform,100%) * -1),0,0)}to{transform:translate3d(0,0,0)}}@keyframes slideToLeft{to{transform:translate3d(calc(var(--initial-transform,100%) * -1),0,0)}}@keyframes slideFromRight{from{transform:translate3d(var(--initial-transform,100%),0,0)}to{transform:translate3d(0,0,0)}}@keyframes slideToRight{to{transform:translate3d(var(--initial-transform,100%),0,0)}}`);function QQ(){const e=navigator.userAgent;return typeof window<"u"&&(/Firefox/.test(e)&&/Mobile/.test(e)||/FxiOS/.test(e))}function JQ(){return l_(/^Mac/)}function eJ(){return l_(/^iPhone/)}function r7(){return/^((?!chrome|android).)*safari/i.test(navigator.userAgent)}function tJ(){return l_(/^iPad/)||JQ()&&navigator.maxTouchPoints>1}function ok(){return eJ()||tJ()}function l_(e){return typeof window<"u"&&window.navigator!=null?e.test(window.navigator.platform):void 0}const nJ=24,rJ=typeof window<"u"?f.useLayoutEffect:f.useEffect;function i7(...e){return(...t)=>{for(let n of e)typeof n=="function"&&n(...t)}}const F0=typeof document<"u"&&window.visualViewport;function o7(e){let t=window.getComputedStyle(e);return/(auto|scroll)/.test(t.overflow+t.overflowX+t.overflowY)}function sk(e){for(o7(e)&&(e=e.parentElement);e&&!o7(e);)e=e.parentElement;return e||document.scrollingElement||document.documentElement}const iJ=new Set(["checkbox","radio","range","color","file","image","button","submit","reset"]);let xh=0,H0;function oJ(e={}){let{isDisabled:t}=e;rJ(()=>{if(!t)return xh++,xh===1&&ok()&&(H0=sJ()),()=>{xh--,xh===0&&H0?.()}},[t])}function sJ(){let e,t=0,n=d=>{e=sk(d.target),!(e===document.documentElement&&e===document.body)&&(t=d.changedTouches[0].pageY)},r=d=>{if(!e||e===document.documentElement||e===document.body){d.preventDefault();return}let p=d.changedTouches[0].pageY,g=e.scrollTop,v=e.scrollHeight-e.clientHeight;v!==0&&((g<=0&&p>t||g>=v&&p<t)&&d.preventDefault(),t=p)},i=d=>{let p=d.target;fy(p)&&p!==document.activeElement&&(d.preventDefault(),p.style.transform="translateY(-2000px)",p.focus(),requestAnimationFrame(()=>{p.style.transform=""}))},o=d=>{let p=d.target;fy(p)&&(p.style.transform="translateY(-2000px)",requestAnimationFrame(()=>{p.style.transform="",F0&&(F0.height<window.innerHeight?requestAnimationFrame(()=>{s7(p)}):F0.addEventListener("resize",()=>s7(p),{once:!0}))}))},s=()=>{window.scrollTo(0,0)},a=window.pageXOffset,c=window.pageYOffset,l=i7(aJ(document.documentElement,"paddingRight",`${window.innerWidth-document.documentElement.clientWidth}px`));window.scrollTo(0,0);let u=i7(xu(document,"touchstart",n,{passive:!1,capture:!0}),xu(document,"touchmove",r,{passive:!1,capture:!0}),xu(document,"touchend",i,{passive:!1,capture:!0}),xu(document,"focus",o,!0),xu(window,"scroll",s));return()=>{l(),u(),window.scrollTo(a,c)}}function aJ(e,t,n){let r=e.style[t];return e.style[t]=n,()=>{e.style[t]=r}}function xu(e,t,n,r){return e.addEventListener(t,n,r),()=>{e.removeEventListener(t,n,r)}}function s7(e){let t=document.scrollingElement||document.documentElement;for(;e&&e!==t;){let n=sk(e);if(n!==document.documentElement&&n!==document.body&&n!==e){let r=n.getBoundingClientRect().top,i=e.getBoundingClientRect().top,o=e.getBoundingClientRect().bottom;const s=n.getBoundingClientRect().bottom+nJ;o>s&&(n.scrollTop+=i-r)}e=n.parentElement}}function fy(e){return e instanceof HTMLInputElement&&!iJ.has(e.type)||e instanceof HTMLTextAreaElement||e instanceof HTMLElement&&e.isContentEditable}function cJ(e,t){typeof e=="function"?e(t):e!=null&&(e.current=t)}function lJ(...e){return t=>e.forEach(n=>cJ(n,t))}function ak(...e){return f.useCallback(lJ(...e),e)}const ck=new WeakMap;function en(e,t,n=!1){if(!e||!(e instanceof HTMLElement))return;let r={};Object.entries(t).forEach(([i,o])=>{if(i.startsWith("--")){e.style.setProperty(i,o);return}r[i]=e.style[i],e.style[i]=o}),!n&&ck.set(e,r)}function uJ(e,t){if(!e||!(e instanceof HTMLElement))return;let n=ck.get(e);n&&(e.style[t]=n[t])}const Wt=e=>{switch(e){case"top":case"bottom":return!0;case"left":case"right":return!1;default:return e}};function Ih(e,t){if(!e)return null;const n=window.getComputedStyle(e),r=n.transform||n.webkitTransform||n.mozTransform;let i=r.match(/^matrix3d\((.+)\)$/);return i?parseFloat(i[1].split(", ")[Wt(t)?13:12]):(i=r.match(/^matrix\((.+)\)$/),i?parseFloat(i[1].split(", ")[Wt(t)?5:4]):null)}function dJ(e){return 8*(Math.log(e+1)-2)}function U0(e,t){if(!e)return()=>{};const n=e.style.cssText;return Object.assign(e.style,t),()=>{e.style.cssText=n}}function fJ(...e){return(...t)=>{for(const n of e)typeof n=="function"&&n(...t)}}const At={DURATION:.5,EASE:[.32,.72,0,1]},lk=.4,hJ=.25,pJ=100,uk=8,da=16,hy=26,B0="vaul-dragging";function dk(e){const t=X.useRef(e);return X.useEffect(()=>{t.current=e}),X.useMemo(()=>(...n)=>t.current==null?void 0:t.current.call(t,...n),[])}function gJ({defaultProp:e,onChange:t}){const n=X.useState(e),[r]=n,i=X.useRef(r),o=dk(t);return X.useEffect(()=>{i.current!==r&&(o(r),i.current=r)},[r,i,o]),n}function fk({prop:e,defaultProp:t,onChange:n=()=>{}}){const[r,i]=gJ({defaultProp:t,onChange:n}),o=e!==void 0,s=o?e:r,a=dk(n),c=X.useCallback(l=>{if(o){const d=typeof l=="function"?l(e):l;d!==e&&a(d)}else i(l)},[o,e,i,a]);return[s,c]}function mJ({activeSnapPointProp:e,setActiveSnapPointProp:t,snapPoints:n,drawerRef:r,overlayRef:i,fadeFromIndex:o,onSnapPointChange:s,direction:a="bottom",container:c,snapToSequentialPoint:l}){const[u,d]=fk({prop:e,defaultProp:n?.[0],onChange:t}),[p,g]=X.useState(typeof window<"u"?{innerWidth:window.innerWidth,innerHeight:window.innerHeight}:void 0);X.useEffect(()=>{function x(){g({innerWidth:window.innerWidth,innerHeight:window.innerHeight})}return window.addEventListener("resize",x),()=>window.removeEventListener("resize",x)},[]);const v=X.useMemo(()=>u===n?.[n.length-1]||null,[n,u]),m=X.useMemo(()=>{var x;return(x=n?.findIndex(I=>I===u))!=null?x:null},[n,u]),_=n&&n.length>0&&(o||o===0)&&!Number.isNaN(o)&&n[o]===u||!n,y=X.useMemo(()=>{const x=c?{width:c.getBoundingClientRect().width,height:c.getBoundingClientRect().height}:typeof window<"u"?{width:window.innerWidth,height:window.innerHeight}:{width:0,height:0};var I;return(I=n?.map(L=>{const R=typeof L=="string";let k=0;if(R&&(k=parseInt(L,10)),Wt(a)){const P=R?k:p?L*x.height:0;return p?a==="bottom"?x.height-P:-x.height+P:P}const A=R?k:p?L*x.width:0;return p?a==="right"?x.width-A:-x.width+A:A}))!=null?I:[]},[n,p,c]),w=X.useMemo(()=>m!==null?y?.[m]:null,[y,m]),S=X.useCallback(x=>{var I;const L=(I=y?.findIndex(R=>R===x))!=null?I:null;s(L),en(r.current,{transition:`transform ${At.DURATION}s cubic-bezier(${At.EASE.join(",")})`,transform:Wt(a)?`translate3d(0, ${x}px, 0)`:`translate3d(${x}px, 0, 0)`}),y&&L!==y.length-1&&o!==void 0&&L!==o&&L<o?en(i.current,{transition:`opacity ${At.DURATION}s cubic-bezier(${At.EASE.join(",")})`,opacity:"0"}):en(i.current,{transition:`opacity ${At.DURATION}s cubic-bezier(${At.EASE.join(",")})`,opacity:"1"}),d(n?.[Math.max(L,0)])},[r.current,n,y,o,i,d]);X.useEffect(()=>{if(u||e){var x;const I=(x=n?.findIndex(L=>L===e||L===u))!=null?x:-1;y&&I!==-1&&typeof y[I]=="number"&&S(y[I])}},[u,e,n,y,S]);function b({draggedDistance:x,closeDrawer:I,velocity:L,dismissible:R}){if(o===void 0)return;const k=a==="bottom"||a==="right"?(w??0)-x:(w??0)+x,A=m===o-1,P=m===0,O=x>0;if(A&&en(i.current,{transition:`opacity ${At.DURATION}s cubic-bezier(${At.EASE.join(",")})`}),!l&&L>2&&!O){R?I():S(y[0]);return}if(!l&&L>2&&O&&y&&n){S(y[n.length-1]);return}const j=y?.reduce((T,N)=>typeof T!="number"||typeof N!="number"?T:Math.abs(N-k)<Math.abs(T-k)?N:T),$=Wt(a)?window.innerHeight:window.innerWidth;if(L>lk&&Math.abs(x)<$*.4){const T=O?1:-1;if(T>0&&v&&n){S(y[n.length-1]);return}if(P&&T<0&&R&&I(),m===null)return;S(y[m+T]);return}S(j)}function C({draggedDistance:x}){if(w===null)return;const I=a==="bottom"||a==="right"?w-x:w+x;(a==="bottom"||a==="right")&&I<y[y.length-1]||(a==="top"||a==="left")&&I>y[y.length-1]||en(r.current,{transform:Wt(a)?`translate3d(0, ${I}px, 0)`:`translate3d(${I}px, 0, 0)`})}function E(x,I){if(!n||typeof m!="number"||!y||o===void 0)return null;const L=m===o-1;if(m>=o&&I)return 0;if(L&&!I)return 1;if(!_&&!L)return null;const k=L?m+1:m-1,A=L?y[k]-y[k-1]:y[k+1]-y[k],P=x/Math.abs(A);return L?1-P:P}return{isLastSnapPoint:v,activeSnapPoint:u,shouldFade:_,getPercentageDragged:E,setActiveSnapPoint:d,activeSnapPointIndex:m,onRelease:b,onDrag:C,snapPointsOffset:y}}const vJ=()=>()=>{};function yJ(){const{direction:e,isOpen:t,shouldScaleBackground:n,setBackgroundColorOnScale:r,noBodyStyles:i}=Of(),o=X.useRef(null),s=f.useMemo(()=>document.body.style.backgroundColor,[]);function a(){return(window.innerWidth-hy)/window.innerWidth}X.useEffect(()=>{if(t&&n){o.current&&clearTimeout(o.current);const c=document.querySelector("[data-vaul-drawer-wrapper]")||document.querySelector("[vaul-drawer-wrapper]");if(!c)return;fJ(r&&!i?U0(document.body,{background:"black"}):vJ,U0(c,{transformOrigin:Wt(e)?"top":"left",transitionProperty:"transform, border-radius",transitionDuration:`${At.DURATION}s`,transitionTimingFunction:`cubic-bezier(${At.EASE.join(",")})`}));const l=U0(c,{borderRadius:`${uk}px`,overflow:"hidden",...Wt(e)?{transform:`scale(${a()}) translate3d(0, calc(env(safe-area-inset-top) + 14px), 0)`}:{transform:`scale(${a()}) translate3d(calc(env(safe-area-inset-top) + 14px), 0, 0)`}});return()=>{l(),o.current=window.setTimeout(()=>{s?document.body.style.background=s:document.body.style.removeProperty("background")},At.DURATION*1e3)}}},[t,n,s])}let Iu=null;function _J({isOpen:e,modal:t,nested:n,hasBeenOpened:r,preventScrollRestoration:i,noBodyStyles:o}){const[s,a]=X.useState(()=>typeof window<"u"?window.location.href:""),c=X.useRef(0),l=X.useCallback(()=>{if(r7()&&Iu===null&&e&&!o){Iu={position:document.body.style.position,top:document.body.style.top,left:document.body.style.left,height:document.body.style.height,right:"unset"};const{scrollX:d,innerHeight:p}=window;document.body.style.setProperty("position","fixed","important"),Object.assign(document.body.style,{top:`${-c.current}px`,left:`${-d}px`,right:"0px",height:"auto"}),window.setTimeout(()=>window.requestAnimationFrame(()=>{const g=p-window.innerHeight;g&&c.current>=p&&(document.body.style.top=`${-(c.current+g)}px`)}),300)}},[e]),u=X.useCallback(()=>{if(r7()&&Iu!==null&&!o){const d=-parseInt(document.body.style.top,10),p=-parseInt(document.body.style.left,10);Object.assign(document.body.style,Iu),window.requestAnimationFrame(()=>{if(i&&s!==window.location.href){a(window.location.href);return}window.scrollTo(p,d)}),Iu=null}},[s]);return X.useEffect(()=>{function d(){c.current=window.scrollY}return d(),window.addEventListener("scroll",d),()=>{window.removeEventListener("scroll",d)}},[]),X.useEffect(()=>{if(t)return()=>{typeof document>"u"||document.querySelector("[data-vaul-drawer]")||u()}},[t,u]),X.useEffect(()=>{n||!r||(e?(!window.matchMedia("(display-mode: standalone)").matches&&l(),t||window.setTimeout(()=>{u()},500)):u())},[e,r,s,t,n,l,u]),{restorePositionSetting:u}}function bJ({open:e,onOpenChange:t,children:n,onDrag:r,onRelease:i,snapPoints:o,shouldScaleBackground:s=!1,setBackgroundColorOnScale:a=!0,closeThreshold:c=hJ,scrollLockTimeout:l=pJ,dismissible:u=!0,handleOnly:d=!1,fadeFromIndex:p=o&&o.length-1,activeSnapPoint:g,setActiveSnapPoint:v,fixed:m,modal:_=!0,onClose:y,nested:w,noBodyStyles:S=!1,direction:b="bottom",defaultOpen:C=!1,disablePreventScroll:E=!0,snapToSequentialPoint:x=!1,preventScrollRestoration:I=!1,repositionInputs:L=!0,onAnimationEnd:R,container:k,autoFocus:A=!1}){var P,O;const[j=!1,$]=fk({defaultProp:C,prop:e,onChange:ye=>{t?.(ye),!ye&&!w&&yc(),setTimeout(()=>{R?.(ye)},At.DURATION*1e3),ye&&!_&&typeof window<"u"&&window.requestAnimationFrame(()=>{document.body.style.pointerEvents="auto"}),ye||(document.body.style.pointerEvents="auto")}}),[T,N]=X.useState(!1),[M,B]=X.useState(!1),[F,K]=X.useState(!1),te=X.useRef(null),oe=X.useRef(null),pe=X.useRef(null),ne=X.useRef(null),z=X.useRef(null),re=X.useRef(!1),Re=X.useRef(null),Le=X.useRef(0),Se=X.useRef(!1),xt=X.useRef(!C),ct=X.useRef(0),we=X.useRef(null),Rn=X.useRef(((P=we.current)==null?void 0:P.getBoundingClientRect().height)||0),go=X.useRef(((O=we.current)==null?void 0:O.getBoundingClientRect().width)||0),cn=X.useRef(0),gc=X.useCallback(ye=>{o&&ye===qi.length-1&&(oe.current=new Date)},[]),{activeSnapPoint:mc,activeSnapPointIndex:yi,setActiveSnapPoint:mo,onRelease:vo,snapPointsOffset:qi,onDrag:vc,shouldFade:_i,getPercentageDragged:ua}=mJ({snapPoints:o,activeSnapPointProp:g,setActiveSnapPointProp:v,drawerRef:we,fadeFromIndex:p,overlayRef:te,onSnapPointChange:gc,direction:b,container:k,snapToSequentialPoint:x});oJ({isDisabled:!j||M||!_||F||!T||!L||!E});const{restorePositionSetting:yc}=_J({isOpen:j,modal:_,nested:w??!1,hasBeenOpened:T,preventScrollRestoration:I,noBodyStyles:S});function yo(){return(window.innerWidth-hy)/window.innerWidth}function _c(ye){var Oe,nt;!u&&!o||we.current&&!we.current.contains(ye.target)||(Rn.current=((Oe=we.current)==null?void 0:Oe.getBoundingClientRect().height)||0,go.current=((nt=we.current)==null?void 0:nt.getBoundingClientRect().width)||0,B(!0),pe.current=new Date,ok()&&window.addEventListener("touchend",()=>re.current=!1,{once:!0}),ye.target.setPointerCapture(ye.pointerId),Le.current=Wt(b)?ye.pageY:ye.pageX)}function bc(ye,Oe){var nt;let Fe=ye;const se=(nt=window.getSelection())==null?void 0:nt.toString(),Ge=we.current?Ih(we.current,b):null,st=new Date;if(Fe.tagName==="SELECT"||Fe.hasAttribute("data-vaul-no-drag")||Fe.closest("[data-vaul-no-drag]"))return!1;if(b==="right"||b==="left")return!0;if(oe.current&&st.getTime()-oe.current.getTime()<500)return!1;if(Ge!==null&&(b==="bottom"?Ge>0:Ge<0))return!0;if(se&&se.length>0)return!1;if(z.current&&st.getTime()-z.current.getTime()<l&&Ge===0||Oe)return z.current=st,!1;for(;Fe;){if(Fe.scrollHeight>Fe.clientHeight){if(Fe.scrollTop!==0)return z.current=new Date,!1;if(Fe.getAttribute("role")==="dialog")return!0}Fe=Fe.parentNode}return!0}function fs(ye){if(we.current&&M){const Oe=b==="bottom"||b==="right"?1:-1,nt=(Le.current-(Wt(b)?ye.pageY:ye.pageX))*Oe,Fe=nt>0,se=o&&!u&&!Fe;if(se&&yi===0)return;const Ge=Math.abs(nt),st=document.querySelector("[data-vaul-drawer-wrapper]"),$n=b==="bottom"||b==="top"?Rn.current:go.current;let Ln=Ge/$n;const jr=ua(Ge,Fe);if(jr!==null&&(Ln=jr),se&&Ln>=1||!re.current&&!bc(ye.target,Fe))return;if(we.current.classList.add(B0),re.current=!0,en(we.current,{transition:"none"}),en(te.current,{transition:"none"}),o&&vc({draggedDistance:nt}),Fe&&!o){const Xn=dJ(nt),hs=Math.min(Xn*-1,0)*Oe;en(we.current,{transform:Wt(b)?`translate3d(0, ${hs}px, 0)`:`translate3d(${hs}px, 0, 0)`});return}const Yn=1-Ln;if((_i||p&&yi===p-1)&&(r?.(ye,Ln),en(te.current,{opacity:`${Yn}`,transition:"none"},!0)),st&&te.current&&s){const Xn=Math.min(yo()+Ln*(1-yo()),1),hs=8-Ln*8,D=Math.max(0,14-Ln*14);en(st,{borderRadius:`${hs}px`,transform:Wt(b)?`scale(${Xn}) translate3d(0, ${D}px, 0)`:`scale(${Xn}) translate3d(${D}px, 0, 0)`,transition:"none"},!0)}if(!o){const Xn=Ge*Oe;en(we.current,{transform:Wt(b)?`translate3d(0, ${Xn}px, 0)`:`translate3d(${Xn}px, 0, 0)`})}}}X.useEffect(()=>{window.requestAnimationFrame(()=>{xt.current=!0})},[]),X.useEffect(()=>{var ye;function Oe(){if(!we.current||!L)return;const nt=document.activeElement;if(fy(nt)||Se.current){var Fe;const se=((Fe=window.visualViewport)==null?void 0:Fe.height)||0,Ge=window.innerHeight;let st=Ge-se;const $n=we.current.getBoundingClientRect().height||0,Ln=$n>Ge*.8;cn.current||(cn.current=$n);const jr=we.current.getBoundingClientRect().top;if(Math.abs(ct.current-st)>60&&(Se.current=!Se.current),o&&o.length>0&&qi&&yi){const Yn=qi[yi]||0;st+=Yn}if(ct.current=st,$n>se||Se.current){const Yn=we.current.getBoundingClientRect().height;let Xn=Yn;Yn>se&&(Xn=se-(Ln?jr:hy)),m?we.current.style.height=`${Yn-Math.max(st,0)}px`:we.current.style.height=`${Math.max(Xn,se-jr)}px`}else QQ()||(we.current.style.height=`${cn.current}px`);o&&o.length>0&&!Se.current?we.current.style.bottom="0px":we.current.style.bottom=`${Math.max(st,0)}px`}}return(ye=window.visualViewport)==null||ye.addEventListener("resize",Oe),()=>{var nt;return(nt=window.visualViewport)==null?void 0:nt.removeEventListener("resize",Oe)}},[yi,o,qi]);function Or(ye){Cu(),y?.(),ye||$(!1),setTimeout(()=>{o&&mo(o[0])},At.DURATION*1e3)}function wc(){if(!we.current)return;const ye=document.querySelector("[data-vaul-drawer-wrapper]"),Oe=Ih(we.current,b);en(we.current,{transform:"translate3d(0, 0, 0)",transition:`transform ${At.DURATION}s cubic-bezier(${At.EASE.join(",")})`}),en(te.current,{transition:`opacity ${At.DURATION}s cubic-bezier(${At.EASE.join(",")})`,opacity:"1"}),s&&Oe&&Oe>0&&j&&en(ye,{borderRadius:`${uk}px`,overflow:"hidden",...Wt(b)?{transform:`scale(${yo()}) translate3d(0, calc(env(safe-area-inset-top) + 14px), 0)`,transformOrigin:"top"}:{transform:`scale(${yo()}) translate3d(calc(env(safe-area-inset-top) + 14px), 0, 0)`,transformOrigin:"left"},transitionProperty:"transform, border-radius",transitionDuration:`${At.DURATION}s`,transitionTimingFunction:`cubic-bezier(${At.EASE.join(",")})`},!0)}function Cu(){!M||!we.current||(we.current.classList.remove(B0),re.current=!1,B(!1),ne.current=new Date)}function bi(ye){if(!M||!we.current)return;we.current.classList.remove(B0),re.current=!1,B(!1),ne.current=new Date;const Oe=Ih(we.current,b);if(!ye||!bc(ye.target,!1)||!Oe||Number.isNaN(Oe)||pe.current===null)return;const nt=ne.current.getTime()-pe.current.getTime(),Fe=Le.current-(Wt(b)?ye.pageY:ye.pageX),se=Math.abs(Fe)/nt;if(se>.05&&(K(!0),setTimeout(()=>{K(!1)},200)),o){vo({draggedDistance:Fe*(b==="bottom"||b==="right"?1:-1),closeDrawer:Or,velocity:se,dismissible:u}),i?.(ye,!0);return}if(b==="bottom"||b==="right"?Fe>0:Fe<0){wc(),i?.(ye,!0);return}if(se>lk){Or(),i?.(ye,!1);return}var Ge;const st=Math.min((Ge=we.current.getBoundingClientRect().height)!=null?Ge:0,window.innerHeight);var $n;const Ln=Math.min(($n=we.current.getBoundingClientRect().width)!=null?$n:0,window.innerWidth),jr=b==="left"||b==="right";if(Math.abs(Oe)>=(jr?Ln:st)*c){Or(),i?.(ye,!1);return}i?.(ye,!0),wc()}X.useEffect(()=>(j&&(en(document.documentElement,{scrollBehavior:"auto"}),oe.current=new Date),()=>{uJ(document.documentElement,"scrollBehavior")}),[j]);function Sc(ye){const Oe=ye?(window.innerWidth-da)/window.innerWidth:1,nt=ye?-da:0;Re.current&&window.clearTimeout(Re.current),en(we.current,{transition:`transform ${At.DURATION}s cubic-bezier(${At.EASE.join(",")})`,transform:Wt(b)?`scale(${Oe}) translate3d(0, ${nt}px, 0)`:`scale(${Oe}) translate3d(${nt}px, 0, 0)`}),!ye&&we.current&&(Re.current=setTimeout(()=>{const Fe=Ih(we.current,b);en(we.current,{transition:"none",transform:Wt(b)?`translate3d(0, ${Fe}px, 0)`:`translate3d(${Fe}px, 0, 0)`})},500))}function Cc(ye,Oe){if(Oe<0)return;const nt=(window.innerWidth-da)/window.innerWidth,Fe=nt+Oe*(1-nt),se=-da+Oe*da;en(we.current,{transform:Wt(b)?`scale(${Fe}) translate3d(0, ${se}px, 0)`:`scale(${Fe}) translate3d(${se}px, 0, 0)`,transition:"none"})}function Ec(ye,Oe){const nt=Wt(b)?window.innerHeight:window.innerWidth,Fe=Oe?(nt-da)/nt:1,se=Oe?-da:0;Oe&&en(we.current,{transition:`transform ${At.DURATION}s cubic-bezier(${At.EASE.join(",")})`,transform:Wt(b)?`scale(${Fe}) translate3d(0, ${se}px, 0)`:`scale(${Fe}) translate3d(${se}px, 0, 0)`})}return X.useEffect(()=>{_||window.requestAnimationFrame(()=>{document.body.style.pointerEvents="auto"})},[_]),X.createElement(i_,{defaultOpen:C,onOpenChange:ye=>{!u&&!ye||(ye?N(!0):Or(!0),$(ye))},open:j},X.createElement(ik.Provider,{value:{activeSnapPoint:mc,snapPoints:o,setActiveSnapPoint:mo,drawerRef:we,overlayRef:te,onOpenChange:t,onPress:_c,onRelease:bi,onDrag:fs,dismissible:u,shouldAnimate:xt,handleOnly:d,isOpen:j,isDragging:M,shouldFade:_i,closeDrawer:Or,onNestedDrag:Cc,onNestedOpenChange:Sc,onNestedRelease:Ec,keyboardIsOpen:Se,modal:_,snapPointsOffset:qi,activeSnapPointIndex:yi,direction:b,shouldScaleBackground:s,setBackgroundColorOnScale:a,noBodyStyles:S,container:k,autoFocus:A}},n))}const hk=X.forwardRef(function({...e},t){const{overlayRef:n,snapPoints:r,onRelease:i,shouldFade:o,isOpen:s,modal:a,shouldAnimate:c}=Of(),l=ak(t,n),u=r&&r.length>0;if(!a)return null;const d=X.useCallback(p=>i(p),[i]);return X.createElement(s_,{onMouseUp:d,ref:l,"data-vaul-overlay":"","data-vaul-snap-points":s&&u?"true":"false","data-vaul-snap-points-overlay":s&&o?"true":"false","data-vaul-animate":c?.current?"true":"false",...e})});hk.displayName="Drawer.Overlay";const pk=X.forwardRef(function({onPointerDownOutside:e,style:t,onOpenAutoFocus:n,...r},i){const{drawerRef:o,onPress:s,onRelease:a,onDrag:c,keyboardIsOpen:l,snapPointsOffset:u,activeSnapPointIndex:d,modal:p,isOpen:g,direction:v,snapPoints:m,container:_,handleOnly:y,shouldAnimate:w,autoFocus:S}=Of(),[b,C]=X.useState(!1),E=ak(i,o),x=X.useRef(null),I=X.useRef(null),L=X.useRef(!1),R=m&&m.length>0;yJ();const k=(P,O,j=0)=>{if(L.current)return!0;const $=Math.abs(P.y),T=Math.abs(P.x),N=T>$,M=["bottom","right"].includes(O)?1:-1;if(O==="left"||O==="right"){if(!(P.x*M<0)&&T>=0&&T<=j)return N}else if(!(P.y*M<0)&&$>=0&&$<=j)return!N;return L.current=!0,!0};X.useEffect(()=>{R&&window.requestAnimationFrame(()=>{C(!0)})},[]);function A(P){x.current=null,L.current=!1,a(P)}return X.createElement(a_,{"data-vaul-drawer-direction":v,"data-vaul-drawer":"","data-vaul-delayed-snap-points":b?"true":"false","data-vaul-snap-points":g&&R?"true":"false","data-vaul-custom-container":_?"true":"false","data-vaul-animate":w?.current?"true":"false",...r,ref:E,style:u&&u.length>0?{"--snap-point-height":`${u[d??0]}px`,...t}:t,onPointerDown:P=>{y||(r.onPointerDown==null||r.onPointerDown.call(r,P),x.current={x:P.pageX,y:P.pageY},s(P))},onOpenAutoFocus:P=>{n?.(P),S||P.preventDefault()},onPointerDownOutside:P=>{if(e?.(P),!p||P.defaultPrevented){P.preventDefault();return}l.current&&(l.current=!1)},onFocusOutside:P=>{if(!p){P.preventDefault();return}},onPointerMove:P=>{if(I.current=P,y||(r.onPointerMove==null||r.onPointerMove.call(r,P),!x.current))return;const O=P.pageY-x.current.y,j=P.pageX-x.current.x,$=P.pointerType==="touch"?10:2;k({x:j,y:O},v,$)?c(P):(Math.abs(j)>$||Math.abs(O)>$)&&(x.current=null)},onPointerUp:P=>{r.onPointerUp==null||r.onPointerUp.call(r,P),x.current=null,L.current=!1,a(P)},onPointerOut:P=>{r.onPointerOut==null||r.onPointerOut.call(r,P),A(I.current)},onContextMenu:P=>{r.onContextMenu==null||r.onContextMenu.call(r,P),I.current&&A(I.current)}})});pk.displayName="Drawer.Content";const wJ=250,SJ=120,CJ=X.forwardRef(function({preventCycle:e=!1,children:t,...n},r){const{closeDrawer:i,isDragging:o,snapPoints:s,activeSnapPoint:a,setActiveSnapPoint:c,dismissible:l,handleOnly:u,isOpen:d,onPress:p,onDrag:g}=Of(),v=X.useRef(null),m=X.useRef(!1);function _(){if(m.current){S();return}window.setTimeout(()=>{y()},SJ)}function y(){if(o||e||m.current){S();return}if(S(),!s||s.length===0){l||i();return}if(a===s[s.length-1]&&l){i();return}const C=s.findIndex(x=>x===a);if(C===-1)return;const E=s[C+1];c(E)}function w(){v.current=window.setTimeout(()=>{m.current=!0},wJ)}function S(){v.current&&window.clearTimeout(v.current),m.current=!1}return X.createElement("div",{onClick:_,onPointerCancel:S,onPointerDown:b=>{u&&p(b),w()},onPointerMove:b=>{u&&g(b)},ref:r,"data-vaul-drawer-visible":d?"true":"false","data-vaul-handle":"","aria-hidden":"true",...n},X.createElement("span",{"data-vaul-handle-hitarea":"","aria-hidden":"true"},t))});CJ.displayName="Drawer.Handle";function EJ(e){const t=Of(),{container:n=t.container,...r}=e;return X.createElement(o_,{container:n,...r})}const ir={Root:bJ,Content:pk,Overlay:hk,Trigger:XQ,Portal:EJ,Title:c_},xJ="_bg_610zp_8",IJ="_drawer_610zp_17",RJ="_body_610zp_51",p1={bg:xJ,drawer:IJ,body:RJ},LJ="_content_vnv5k_8",kJ={content:LJ},u_=f.createContext(null);function d_(){const e=globalThis.navigator?.userAgent;return/android/i.test(e)?"android":/iPad|iPhone|iPod|Mac/.test(e)&&"ontouchend"in document?"ios":"other"}const f_=f.forwardRef(({title:e,children:t,className:n,...r},i)=>h.jsx("div",{ref:i,className:Z(n,p1.drawer),"aria-label":e,"data-platform":d_(),...r,role:"menu",children:h.jsx("div",{className:p1.body,children:t})}));f_.displayName="DrawerMenu";const TJ=({onSelect:e,children:t})=>h.jsx(UL,{onSelect:e??void 0,asChild:!0,children:t}),AJ=({title:e,showTitle:t=!0,onOpenChange:n,trigger:r,hasAccessibleAlternative:i,children:o})=>{const[s,a]=f.useState(!1),c=f.useCallback(v=>{a(v),n?.(v)},[a,n]),l=d_(),u=l==="android"||l==="ios",d=f.useMemo(()=>({MenuItemWrapper:u?null:TJ,onOpenChange:c}),[c]),p=h.jsx(u_.Provider,{value:d,children:o}),g=h.jsx(TQ,{"aria-haspopup":"menu",tabIndex:i?void 0:0,asChild:!0,children:r});return u?h.jsxs(h.Fragment,{children:[h.jsx(t7,{onOpenChange:c,children:g}),h.jsx(ir.Root,{open:s,onOpenChange:c,children:h.jsxs(ir.Portal,{children:[h.jsx(ir.Overlay,{className:Z(p1.bg)}),h.jsx(ir.Content,{asChild:!0,children:h.jsx(f_,{title:e,children:p})})]})})]}):h.jsxs(t7,{onOpenChange:c,children:[g,h.jsx(AQ,{children:h.jsx(PQ,{asChild:!0,className:Z(kJ.content),children:h.jsx(e_,{showTitle:t,title:e,children:p})})})]})},PJ="_glass_sepwu_8",MJ={glass:PJ},gk=f.forwardRef(({children:e,className:t,...n},r)=>h.jsx("div",{ref:r,className:Z(t,MJ.glass),...n,children:f.Children.only(e)}));gk.displayName="Glass";const Fi=({as:e="h1",children:t,...n})=>h.jsx(PI,{as:e,type:"heading",...n,children:t}),NJ="_link_1v5rz_8",$J={link:NJ},OJ=f.forwardRef(function({children:t,className:n,kind:r="primary",size:i="medium",...o},s){return h.jsx("a",{ref:s,...o,rel:"noreferrer noopener",className:Z($J.link,n),"data-kind":r,"data-size":i,children:t})});function et(e,t,{checkForDefaultPrevented:n=!0}={}){return function(i){if(e?.(i),n===!1||!i.defaultPrevented)return t?.(i)}}function a7(e,t){if(typeof e=="function")return e(t);e!=null&&(e.current=t)}function Dg(...e){return t=>{let n=!1;const r=e.map(i=>{const o=a7(i,t);return!n&&typeof o=="function"&&(n=!0),o});if(n)return()=>{for(let i=0;i<r.length;i++){const o=r[i];typeof o=="function"?o():a7(e[i],null)}}}}function li(...e){return f.useCallback(Dg(...e),e)}function jf(e,t=[]){let n=[];function r(o,s){const a=f.createContext(s),c=n.length;n=[...n,s];const l=d=>{const{scope:p,children:g,...v}=d,m=p?.[e]?.[c]||a,_=f.useMemo(()=>v,Object.values(v));return h.jsx(m.Provider,{value:_,children:g})};l.displayName=o+"Provider";function u(d,p){const g=p?.[e]?.[c]||a,v=f.useContext(g);if(v)return v;if(s!==void 0)return s;throw new Error(`\`${d}\` must be used within \`${o}\``)}return[l,u]}const i=()=>{const o=n.map(s=>f.createContext(s));return function(a){const c=a?.[e]||o;return f.useMemo(()=>({[`__scope${e}`]:{...a,[e]:c}}),[a,c])}};return i.scopeName=e,[r,jJ(i,...t)]}function jJ(...e){const t=e[0];if(e.length===1)return t;const n=()=>{const r=e.map(i=>({useScope:i(),scopeName:i.scopeName}));return function(o){const s=r.reduce((a,{useScope:c,scopeName:l})=>{const d=c(o)[`__scope${l}`];return{...a,...d}},{});return f.useMemo(()=>({[`__scope${t.scopeName}`]:s}),[s])}};return n.scopeName=t.scopeName,n}function Ys(e){const t=f.useRef(e);return f.useEffect(()=>{t.current=e}),f.useMemo(()=>(...n)=>t.current?.(...n),[])}function mk({prop:e,defaultProp:t,onChange:n=()=>{}}){const[r,i]=DJ({defaultProp:t,onChange:n}),o=e!==void 0,s=o?e:r,a=Ys(n),c=f.useCallback(l=>{if(o){const d=typeof l=="function"?l(e):l;d!==e&&a(d)}else i(l)},[o,e,i,a]);return[s,c]}function DJ({defaultProp:e,onChange:t}){const n=f.useState(e),[r]=n,i=f.useRef(r),o=Ys(t);return f.useEffect(()=>{i.current!==r&&(o(r),i.current=r)},[r,i,o]),n}function c7(e,t){if(typeof e=="function")return e(t);e!=null&&(e.current=t)}function FJ(...e){return t=>{let n=!1;const r=e.map(i=>{const o=c7(i,t);return!n&&typeof o=="function"&&(n=!0),o});if(n)return()=>{for(let i=0;i<r.length;i++){const o=r[i];typeof o=="function"?o():c7(e[i],null)}}}}var vk=f.forwardRef((e,t)=>{const{children:n,...r}=e,i=f.Children.toArray(n),o=i.find(UJ);if(o){const s=o.props.children,a=i.map(c=>c===o?f.Children.count(s)>1?f.Children.only(null):f.isValidElement(s)?s.props.children:null:c);return h.jsx(py,{...r,ref:t,children:f.isValidElement(s)?f.cloneElement(s,void 0,a):null})}return h.jsx(py,{...r,ref:t,children:n})});vk.displayName="Slot";var py=f.forwardRef((e,t)=>{const{children:n,...r}=e;if(f.isValidElement(n)){const i=VJ(n);return f.cloneElement(n,{...BJ(r,n.props),ref:t?FJ(t,i):i})}return f.Children.count(n)>1?f.Children.only(null):null});py.displayName="SlotClone";var HJ=({children:e})=>h.jsx(h.Fragment,{children:e});function UJ(e){return f.isValidElement(e)&&e.type===HJ}function BJ(e,t){const n={...t};for(const r in t){const i=e[r],o=t[r];/^on[A-Z]/.test(r)?i&&o?n[r]=(...a)=>{o(...a),i(...a)}:i&&(n[r]=i):r==="style"?n[r]={...i,...o}:r==="className"&&(n[r]=[i,o].filter(Boolean).join(" "))}return{...e,...n}}function VJ(e){let t=Object.getOwnPropertyDescriptor(e.props,"ref")?.get,n=t&&"isReactWarning"in t&&t.isReactWarning;return n?e.ref:(t=Object.getOwnPropertyDescriptor(e,"ref")?.get,n=t&&"isReactWarning"in t&&t.isReactWarning,n?e.props.ref:e.props.ref||e.ref)}var qJ=["a","button","div","form","h2","h3","img","input","label","li","nav","ol","p","span","svg","ul"],Jt=qJ.reduce((e,t)=>{const n=f.forwardRef((r,i)=>{const{asChild:o,...s}=r,a=o?vk:t;return typeof window<"u"&&(window[Symbol.for("radix-ui")]=!0),h.jsx(a,{...s,ref:i})});return n.displayName=`Primitive.${t}`,{...e,[t]:n}},{});function GJ(e,t){e&&Ya.flushSync(()=>e.dispatchEvent(t))}var g1=f.forwardRef((e,t)=>{const{children:n,...r}=e,i=f.Children.toArray(n),o=i.find(WJ);if(o){const s=o.props.children,a=i.map(c=>c===o?f.Children.count(s)>1?f.Children.only(null):f.isValidElement(s)?s.props.children:null:c);return h.jsx(gy,{...r,ref:t,children:f.isValidElement(s)?f.cloneElement(s,void 0,a):null})}return h.jsx(gy,{...r,ref:t,children:n})});g1.displayName="Slot";var gy=f.forwardRef((e,t)=>{const{children:n,...r}=e;if(f.isValidElement(n)){const i=YJ(n);return f.cloneElement(n,{...zJ(r,n.props),ref:t?Dg(t,i):i})}return f.Children.count(n)>1?f.Children.only(null):null});gy.displayName="SlotClone";var KJ=({children:e})=>h.jsx(h.Fragment,{children:e});function WJ(e){return f.isValidElement(e)&&e.type===KJ}function zJ(e,t){const n={...t};for(const r in t){const i=e[r],o=t[r];/^on[A-Z]/.test(r)?i&&o?n[r]=(...a)=>{o(...a),i(...a)}:i&&(n[r]=i):r==="style"?n[r]={...i,...o}:r==="className"&&(n[r]=[i,o].filter(Boolean).join(" "))}return{...e,...n}}function YJ(e){let t=Object.getOwnPropertyDescriptor(e.props,"ref")?.get,n=t&&"isReactWarning"in t&&t.isReactWarning;return n?e.ref:(t=Object.getOwnPropertyDescriptor(e,"ref")?.get,n=t&&"isReactWarning"in t&&t.isReactWarning,n?e.props.ref:e.props.ref||e.ref)}function yk(e){const t=e+"CollectionProvider",[n,r]=jf(t),[i,o]=n(t,{collectionRef:{current:null},itemMap:new Map}),s=g=>{const{scope:v,children:m}=g,_=X.useRef(null),y=X.useRef(new Map).current;return h.jsx(i,{scope:v,itemMap:y,collectionRef:_,children:m})};s.displayName=t;const a=e+"CollectionSlot",c=X.forwardRef((g,v)=>{const{scope:m,children:_}=g,y=o(a,m),w=li(v,y.collectionRef);return h.jsx(g1,{ref:w,children:_})});c.displayName=a;const l=e+"CollectionItemSlot",u="data-radix-collection-item",d=X.forwardRef((g,v)=>{const{scope:m,children:_,...y}=g,w=X.useRef(null),S=li(v,w),b=o(l,m);return X.useEffect(()=>(b.itemMap.set(w,{ref:w,...y}),()=>{b.itemMap.delete(w)})),h.jsx(g1,{[u]:"",ref:S,children:_})});d.displayName=l;function p(g){const v=o(e+"CollectionConsumer",g);return X.useCallback(()=>{const _=v.collectionRef.current;if(!_)return[];const y=Array.from(_.querySelectorAll(`[${u}]`));return Array.from(v.itemMap.values()).sort((b,C)=>y.indexOf(b.ref.current)-y.indexOf(C.ref.current))},[v.collectionRef,v.itemMap])}return[{Provider:s,Slot:c,ItemSlot:d},p,r]}var XJ=f.createContext(void 0);function _k(e){const t=f.useContext(XJ);return e||t||"ltr"}var V0="focusScope.autoFocusOnMount",q0="focusScope.autoFocusOnUnmount",l7={bubbles:!1,cancelable:!0},ZJ="FocusScope",bk=f.forwardRef((e,t)=>{const{loop:n=!1,trapped:r=!1,onMountAutoFocus:i,onUnmountAutoFocus:o,...s}=e,[a,c]=f.useState(null),l=Ys(i),u=Ys(o),d=f.useRef(null),p=li(t,m=>c(m)),g=f.useRef({paused:!1,pause(){this.paused=!0},resume(){this.paused=!1}}).current;f.useEffect(()=>{if(r){let m=function(S){if(g.paused||!a)return;const b=S.target;a.contains(b)?d.current=b:bs(d.current,{select:!0})},_=function(S){if(g.paused||!a)return;const b=S.relatedTarget;b!==null&&(a.contains(b)||bs(d.current,{select:!0}))},y=function(S){if(document.activeElement===document.body)for(const C of S)C.removedNodes.length>0&&bs(a)};document.addEventListener("focusin",m),document.addEventListener("focusout",_);const w=new MutationObserver(y);return a&&w.observe(a,{childList:!0,subtree:!0}),()=>{document.removeEventListener("focusin",m),document.removeEventListener("focusout",_),w.disconnect()}}},[r,a,g.paused]),f.useEffect(()=>{if(a){d7.add(g);const m=document.activeElement;if(!a.contains(m)){const y=new CustomEvent(V0,l7);a.addEventListener(V0,l),a.dispatchEvent(y),y.defaultPrevented||(QJ(ree(wk(a)),{select:!0}),document.activeElement===m&&bs(a))}return()=>{a.removeEventListener(V0,l),setTimeout(()=>{const y=new CustomEvent(q0,l7);a.addEventListener(q0,u),a.dispatchEvent(y),y.defaultPrevented||bs(m??document.body,{select:!0}),a.removeEventListener(q0,u),d7.remove(g)},0)}}},[a,l,u,g]);const v=f.useCallback(m=>{if(!n&&!r||g.paused)return;const _=m.key==="Tab"&&!m.altKey&&!m.ctrlKey&&!m.metaKey,y=document.activeElement;if(_&&y){const w=m.currentTarget,[S,b]=JJ(w);S&&b?!m.shiftKey&&y===b?(m.preventDefault(),n&&bs(S,{select:!0})):m.shiftKey&&y===S&&(m.preventDefault(),n&&bs(b,{select:!0})):y===w&&m.preventDefault()}},[n,r,g.paused]);return h.jsx(Jt.div,{tabIndex:-1,...s,ref:p,onKeyDown:v})});bk.displayName=ZJ;function QJ(e,{select:t=!1}={}){const n=document.activeElement;for(const r of e)if(bs(r,{select:t}),document.activeElement!==n)return}function JJ(e){const t=wk(e),n=u7(t,e),r=u7(t.reverse(),e);return[n,r]}function wk(e){const t=[],n=document.createTreeWalker(e,NodeFilter.SHOW_ELEMENT,{acceptNode:r=>{const i=r.tagName==="INPUT"&&r.type==="hidden";return r.disabled||r.hidden||i?NodeFilter.FILTER_SKIP:r.tabIndex>=0?NodeFilter.FILTER_ACCEPT:NodeFilter.FILTER_SKIP}});for(;n.nextNode();)t.push(n.currentNode);return t}function u7(e,t){for(const n of e)if(!eee(n,{upTo:t}))return n}function eee(e,{upTo:t}){if(getComputedStyle(e).visibility==="hidden")return!0;for(;e;){if(t!==void 0&&e===t)return!1;if(getComputedStyle(e).display==="none")return!0;e=e.parentElement}return!1}function tee(e){return e instanceof HTMLInputElement&&"select"in e}function bs(e,{select:t=!1}={}){if(e&&e.focus){const n=document.activeElement;e.focus({preventScroll:!0}),e!==n&&tee(e)&&t&&e.select()}}var d7=nee();function nee(){let e=[];return{add(t){const n=e[0];t!==n&&n?.pause(),e=f7(e,t),e.unshift(t)},remove(t){e=f7(e,t),e[0]?.resume()}}}function f7(e,t){const n=[...e],r=n.indexOf(t);return r!==-1&&n.splice(r,1),n}function ree(e){return e.filter(t=>t.tagName!=="A")}var iee=globalThis?.document?f.useLayoutEffect:()=>{},oee=Kl.useId||(()=>{}),see=0;function El(e){const[t,n]=f.useState(oee());return iee(()=>{n(r=>r??String(see++))},[e]),e||(t?`radix-${t}`:"")}var aee="Arrow",Sk=f.forwardRef((e,t)=>{const{children:n,width:r=10,height:i=5,...o}=e;return h.jsx(Jt.svg,{...o,ref:t,width:r,height:i,viewBox:"0 0 30 10",preserveAspectRatio:"none",children:e.asChild?n:h.jsx("polygon",{points:"0,0 30,0 15,10"})})});Sk.displayName=aee;var cee=Sk,xl=globalThis?.document?f.useLayoutEffect:()=>{};function lee(e){const[t,n]=f.useState(void 0);return xl(()=>{if(e){n({width:e.offsetWidth,height:e.offsetHeight});const r=new ResizeObserver(i=>{if(!Array.isArray(i)||!i.length)return;const o=i[0];let s,a;if("borderBoxSize"in o){const c=o.borderBoxSize,l=Array.isArray(c)?c[0]:c;s=l.inlineSize,a=l.blockSize}else s=e.offsetWidth,a=e.offsetHeight;n({width:s,height:a})});return r.observe(e,{box:"border-box"}),()=>r.unobserve(e)}else n(void 0)},[e]),t}var h_="Popper",[Ck,Ek]=jf(h_),[uee,xk]=Ck(h_),Ik=e=>{const{__scopePopper:t,children:n}=e,[r,i]=f.useState(null);return h.jsx(uee,{scope:t,anchor:r,onAnchorChange:i,children:n})};Ik.displayName=h_;var Rk="PopperAnchor",Lk=f.forwardRef((e,t)=>{const{__scopePopper:n,virtualRef:r,...i}=e,o=xk(Rk,n),s=f.useRef(null),a=li(t,s);return f.useEffect(()=>{o.onAnchorChange(r?.current||s.current)}),r?null:h.jsx(Jt.div,{...i,ref:a})});Lk.displayName=Rk;var p_="PopperContent",[dee,fee]=Ck(p_),kk=f.forwardRef((e,t)=>{const{__scopePopper:n,side:r="bottom",sideOffset:i=0,align:o="center",alignOffset:s=0,arrowPadding:a=0,avoidCollisions:c=!0,collisionBoundary:l=[],collisionPadding:u=0,sticky:d="partial",hideWhenDetached:p=!1,updatePositionStrategy:g="optimized",onPlaced:v,...m}=e,_=xk(p_,n),[y,w]=f.useState(null),S=li(t,z=>w(z)),[b,C]=f.useState(null),E=lee(b),x=E?.width??0,I=E?.height??0,L=r+(o!=="center"?"-"+o:""),R=typeof u=="number"?u:{top:0,right:0,bottom:0,left:0,...u},k=Array.isArray(l)?l:[l],A=k.length>0,P={padding:R,boundary:k.filter(pee),altBoundary:A},{refs:O,floatingStyles:j,placement:$,isPositioned:T,middlewareData:N}=x4({strategy:"fixed",placement:L,whileElementsMounted:(...z)=>E4(...z,{animationFrame:g==="always"}),elements:{reference:_.anchor},middleware:[I4({mainAxis:i+I,alignmentAxis:s}),c&&R4({mainAxis:!0,crossAxis:!1,limiter:d==="partial"?JI():void 0,...P}),c&&L4({...P}),eR({...P,apply:({elements:z,rects:re,availableWidth:Re,availableHeight:Le})=>{const{width:Se,height:xt}=re.reference,ct=z.floating.style;ct.setProperty("--radix-popper-available-width",`${Re}px`),ct.setProperty("--radix-popper-available-height",`${Le}px`),ct.setProperty("--radix-popper-anchor-width",`${Se}px`),ct.setProperty("--radix-popper-anchor-height",`${xt}px`)}}),b&&k4({element:b,padding:a}),gee({arrowWidth:x,arrowHeight:I}),p&&tR({strategy:"referenceHidden",...P})]}),[M,B]=Pk($),F=Ys(v);xl(()=>{T&&F?.()},[T,F]);const K=N.arrow?.x,te=N.arrow?.y,oe=N.arrow?.centerOffset!==0,[pe,ne]=f.useState();return xl(()=>{y&&ne(window.getComputedStyle(y).zIndex)},[y]),h.jsx("div",{ref:O.setFloating,"data-radix-popper-content-wrapper":"",style:{...j,transform:T?j.transform:"translate(0, -200%)",minWidth:"max-content",zIndex:pe,"--radix-popper-transform-origin":[N.transformOrigin?.x,N.transformOrigin?.y].join(" "),...N.hide?.referenceHidden&&{visibility:"hidden",pointerEvents:"none"}},dir:e.dir,children:h.jsx(dee,{scope:n,placedSide:M,onArrowChange:C,arrowX:K,arrowY:te,shouldHideArrow:oe,children:h.jsx(Jt.div,{"data-side":M,"data-align":B,...m,ref:S,style:{...m.style,animation:T?void 0:"none"}})})})});kk.displayName=p_;var Tk="PopperArrow",hee={top:"bottom",right:"left",bottom:"top",left:"right"},Ak=f.forwardRef(function(t,n){const{__scopePopper:r,...i}=t,o=fee(Tk,r),s=hee[o.placedSide];return h.jsx("span",{ref:o.onArrowChange,style:{position:"absolute",left:o.arrowX,top:o.arrowY,[s]:0,transformOrigin:{top:"",right:"0 0",bottom:"center 0",left:"100% 0"}[o.placedSide],transform:{top:"translateY(100%)",right:"translateY(50%) rotate(90deg) translateX(-50%)",bottom:"rotate(180deg)",left:"translateY(50%) rotate(-90deg) translateX(50%)"}[o.placedSide],visibility:o.shouldHideArrow?"hidden":void 0},children:h.jsx(cee,{...i,ref:n,style:{...i.style,display:"block"}})})});Ak.displayName=Tk;function pee(e){return e!==null}var gee=e=>({name:"transformOrigin",options:e,fn(t){const{placement:n,rects:r,middlewareData:i}=t,s=i.arrow?.centerOffset!==0,a=s?0:e.arrowWidth,c=s?0:e.arrowHeight,[l,u]=Pk(n),d={start:"0%",center:"50%",end:"100%"}[u],p=(i.arrow?.x??0)+a/2,g=(i.arrow?.y??0)+c/2;let v="",m="";return l==="bottom"?(v=s?d:`${p}px`,m=`${-c}px`):l==="top"?(v=s?d:`${p}px`,m=`${r.floating.height+c}px`):l==="right"?(v=`${-c}px`,m=s?d:`${g}px`):l==="left"&&(v=`${r.floating.width+c}px`,m=s?d:`${g}px`),{data:{x:v,y:m}}}});function Pk(e){const[t,n="center"]=e.split("-");return[t,n]}var mee=Ik,vee=Lk,yee=kk,_ee=Ak,bee="Portal",Mk=f.forwardRef((e,t)=>{const{container:n,...r}=e,[i,o]=f.useState(!1);xl(()=>o(!0),[]);const s=n||i&&globalThis?.document?.body;return s?rx.createPortal(h.jsx(Jt.div,{...r,ref:t}),s):null});Mk.displayName=bee;function wee(e,t){return f.useReducer((n,r)=>t[n][r]??n,e)}var Df=e=>{const{present:t,children:n}=e,r=See(t),i=typeof n=="function"?n({present:r.isPresent}):f.Children.only(n),o=li(r.ref,Cee(i));return typeof n=="function"||r.isPresent?f.cloneElement(i,{ref:o}):null};Df.displayName="Presence";function See(e){const[t,n]=f.useState(),r=f.useRef({}),i=f.useRef(e),o=f.useRef("none"),s=e?"mounted":"unmounted",[a,c]=wee(s,{mounted:{UNMOUNT:"unmounted",ANIMATION_OUT:"unmountSuspended"},unmountSuspended:{MOUNT:"mounted",ANIMATION_END:"unmounted"},unmounted:{MOUNT:"mounted"}});return f.useEffect(()=>{const l=Rh(r.current);o.current=a==="mounted"?l:"none"},[a]),xl(()=>{const l=r.current,u=i.current;if(u!==e){const p=o.current,g=Rh(l);e?c("MOUNT"):g==="none"||l?.display==="none"?c("UNMOUNT"):c(u&&p!==g?"ANIMATION_OUT":"UNMOUNT"),i.current=e}},[e,c]),xl(()=>{if(t){let l;const u=t.ownerDocument.defaultView??window,d=g=>{const m=Rh(r.current).includes(g.animationName);if(g.target===t&&m&&(c("ANIMATION_END"),!i.current)){const _=t.style.animationFillMode;t.style.animationFillMode="forwards",l=u.setTimeout(()=>{t.style.animationFillMode==="forwards"&&(t.style.animationFillMode=_)})}},p=g=>{g.target===t&&(o.current=Rh(r.current))};return t.addEventListener("animationstart",p),t.addEventListener("animationcancel",d),t.addEventListener("animationend",d),()=>{u.clearTimeout(l),t.removeEventListener("animationstart",p),t.removeEventListener("animationcancel",d),t.removeEventListener("animationend",d)}}else c("ANIMATION_END")},[t,c]),{isPresent:["mounted","unmountSuspended"].includes(a),ref:f.useCallback(l=>{l&&(r.current=getComputedStyle(l)),n(l)},[])}}function Rh(e){return e?.animationName||"none"}function Cee(e){let t=Object.getOwnPropertyDescriptor(e.props,"ref")?.get,n=t&&"isReactWarning"in t&&t.isReactWarning;return n?e.ref:(t=Object.getOwnPropertyDescriptor(e,"ref")?.get,n=t&&"isReactWarning"in t&&t.isReactWarning,n?e.props.ref:e.props.ref||e.ref)}var G0="rovingFocusGroup.onEntryFocus",Eee={bubbles:!1,cancelable:!0},Fg="RovingFocusGroup",[my,Nk,xee]=yk(Fg),[Iee,$k]=jf(Fg,[xee]),[Ree,Lee]=Iee(Fg),Ok=f.forwardRef((e,t)=>h.jsx(my.Provider,{scope:e.__scopeRovingFocusGroup,children:h.jsx(my.Slot,{scope:e.__scopeRovingFocusGroup,children:h.jsx(kee,{...e,ref:t})})}));Ok.displayName=Fg;var kee=f.forwardRef((e,t)=>{const{__scopeRovingFocusGroup:n,orientation:r,loop:i=!1,dir:o,currentTabStopId:s,defaultCurrentTabStopId:a,onCurrentTabStopIdChange:c,onEntryFocus:l,preventScrollOnEntryFocus:u=!1,...d}=e,p=f.useRef(null),g=li(t,p),v=_k(o),[m=null,_]=mk({prop:s,defaultProp:a,onChange:c}),[y,w]=f.useState(!1),S=Ys(l),b=Nk(n),C=f.useRef(!1),[E,x]=f.useState(0);return f.useEffect(()=>{const I=p.current;if(I)return I.addEventListener(G0,S),()=>I.removeEventListener(G0,S)},[S]),h.jsx(Ree,{scope:n,orientation:r,dir:v,loop:i,currentTabStopId:m,onItemFocus:f.useCallback(I=>_(I),[_]),onItemShiftTab:f.useCallback(()=>w(!0),[]),onFocusableItemAdd:f.useCallback(()=>x(I=>I+1),[]),onFocusableItemRemove:f.useCallback(()=>x(I=>I-1),[]),children:h.jsx(Jt.div,{tabIndex:y||E===0?-1:0,"data-orientation":r,...d,ref:g,style:{outline:"none",...e.style},onMouseDown:et(e.onMouseDown,()=>{C.current=!0}),onFocus:et(e.onFocus,I=>{const L=!C.current;if(I.target===I.currentTarget&&L&&!y){const R=new CustomEvent(G0,Eee);if(I.currentTarget.dispatchEvent(R),!R.defaultPrevented){const k=b().filter($=>$.focusable),A=k.find($=>$.active),P=k.find($=>$.id===m),j=[A,P,...k].filter(Boolean).map($=>$.ref.current);Fk(j,u)}}C.current=!1}),onBlur:et(e.onBlur,()=>w(!1))})})}),jk="RovingFocusGroupItem",Dk=f.forwardRef((e,t)=>{const{__scopeRovingFocusGroup:n,focusable:r=!0,active:i=!1,tabStopId:o,...s}=e,a=El(),c=o||a,l=Lee(jk,n),u=l.currentTabStopId===c,d=Nk(n),{onFocusableItemAdd:p,onFocusableItemRemove:g}=l;return f.useEffect(()=>{if(r)return p(),()=>g()},[r,p,g]),h.jsx(my.ItemSlot,{scope:n,id:c,focusable:r,active:i,children:h.jsx(Jt.span,{tabIndex:u?0:-1,"data-orientation":l.orientation,...s,ref:t,onMouseDown:et(e.onMouseDown,v=>{r?l.onItemFocus(c):v.preventDefault()}),onFocus:et(e.onFocus,()=>l.onItemFocus(c)),onKeyDown:et(e.onKeyDown,v=>{if(v.key==="Tab"&&v.shiftKey){l.onItemShiftTab();return}if(v.target!==v.currentTarget)return;const m=Pee(v,l.orientation,l.dir);if(m!==void 0){if(v.metaKey||v.ctrlKey||v.altKey||v.shiftKey)return;v.preventDefault();let y=d().filter(w=>w.focusable).map(w=>w.ref.current);if(m==="last")y.reverse();else if(m==="prev"||m==="next"){m==="prev"&&y.reverse();const w=y.indexOf(v.currentTarget);y=l.loop?Mee(y,w+1):y.slice(w+1)}setTimeout(()=>Fk(y))}})})})});Dk.displayName=jk;var Tee={ArrowLeft:"prev",ArrowUp:"prev",ArrowRight:"next",ArrowDown:"next",PageUp:"first",Home:"first",PageDown:"last",End:"last"};function Aee(e,t){return t!=="rtl"?e:e==="ArrowLeft"?"ArrowRight":e==="ArrowRight"?"ArrowLeft":e}function Pee(e,t,n){const r=Aee(e.key,n);if(!(t==="vertical"&&["ArrowLeft","ArrowRight"].includes(r))&&!(t==="horizontal"&&["ArrowUp","ArrowDown"].includes(r)))return Tee[r]}function Fk(e,t=!1){const n=document.activeElement;for(const r of e)if(r===n||(r.focus({preventScroll:t}),document.activeElement!==n))return}function Mee(e,t){return e.map((n,r)=>e[(t+r)%e.length])}var Nee=Ok,$ee=Dk,Hk=rL(),K0=function(){},Hg=f.forwardRef(function(e,t){var n=f.useRef(null),r=f.useState({onScrollCapture:K0,onWheelCapture:K0,onTouchMoveCapture:K0}),i=r[0],o=r[1],s=e.forwardProps,a=e.children,c=e.className,l=e.removeScrollBar,u=e.enabled,d=e.shards,p=e.sideCar,g=e.noIsolation,v=e.inert,m=e.allowPinchZoom,_=e.as,y=_===void 0?"div":_,w=e.gapMode,S=Pf(e,["forwardProps","children","className","removeScrollBar","enabled","shards","sideCar","noIsolation","inert","allowPinchZoom","as","gapMode"]),b=p,C=nL([n,t]),E=pn(pn({},S),i);return f.createElement(f.Fragment,null,u&&f.createElement(b,{sideCar:Hk,removeScrollBar:l,shards:d,noIsolation:g,inert:v,setCallbacks:o,allowPinchZoom:!!m,lockRef:n,gapMode:w}),s?f.cloneElement(f.Children.only(a),pn(pn({},E),{ref:C})):f.createElement(y,pn({},E,{className:c,ref:C}),a))});Hg.defaultProps={enabled:!0,removeScrollBar:!0,inert:!1};Hg.classNames={fullWidth:ud,zeroRight:ld};var vy=!1;if(typeof window<"u")try{var Lh=Object.defineProperty({},"passive",{get:function(){return vy=!0,!0}});window.addEventListener("test",Lh,Lh),window.removeEventListener("test",Lh,Lh)}catch{vy=!1}var kc=vy?{passive:!1}:!1,Oee=function(e){return e.tagName==="TEXTAREA"},Uk=function(e,t){if(!(e instanceof Element))return!1;var n=window.getComputedStyle(e);return n[t]!=="hidden"&&!(n.overflowY===n.overflowX&&!Oee(e)&&n[t]==="visible")},jee=function(e){return Uk(e,"overflowY")},Dee=function(e){return Uk(e,"overflowX")},h7=function(e,t){var n=t.ownerDocument,r=t;do{typeof ShadowRoot<"u"&&r instanceof ShadowRoot&&(r=r.host);var i=Bk(e,r);if(i){var o=Vk(e,r),s=o[1],a=o[2];if(s>a)return!0}r=r.parentNode}while(r&&r!==n.body);return!1},Fee=function(e){var t=e.scrollTop,n=e.scrollHeight,r=e.clientHeight;return[t,n,r]},Hee=function(e){var t=e.scrollLeft,n=e.scrollWidth,r=e.clientWidth;return[t,n,r]},Bk=function(e,t){return e==="v"?jee(t):Dee(t)},Vk=function(e,t){return e==="v"?Fee(t):Hee(t)},Uee=function(e,t){return e==="h"&&t==="rtl"?-1:1},Bee=function(e,t,n,r,i){var o=Uee(e,window.getComputedStyle(t).direction),s=o*r,a=n.target,c=t.contains(a),l=!1,u=s>0,d=0,p=0;do{var g=Vk(e,a),v=g[0],m=g[1],_=g[2],y=m-_-o*v;(v||y)&&Bk(e,a)&&(d+=y,p+=v),a instanceof ShadowRoot?a=a.host:a=a.parentNode}while(!c&&a!==document.body||c&&(t.contains(a)||t===a));return(u&&Math.abs(d)<1||!u&&Math.abs(p)<1)&&(l=!0),l},kh=function(e){return"changedTouches"in e?[e.changedTouches[0].clientX,e.changedTouches[0].clientY]:[0,0]},p7=function(e){return[e.deltaX,e.deltaY]},g7=function(e){return e&&"current"in e?e.current:e},Vee=function(e,t){return e[0]===t[0]&&e[1]===t[1]},qee=function(e){return`
  .block-interactivity-`.concat(e,` {pointer-events: none;}
  .allow-interactivity-`).concat(e,` {pointer-events: all;}
`)},Gee=0,Tc=[];function Kee(e){var t=f.useRef([]),n=f.useRef([0,0]),r=f.useRef(),i=f.useState(Gee++)[0],o=f.useState(q4)[0],s=f.useRef(e);f.useEffect(function(){s.current=e},[e]),f.useEffect(function(){if(e.inert){document.body.classList.add("block-interactivity-".concat(i));var m=Ar([e.lockRef.current],(e.shards||[]).map(g7),!0).filter(Boolean);return m.forEach(function(_){return _.classList.add("allow-interactivity-".concat(i))}),function(){document.body.classList.remove("block-interactivity-".concat(i)),m.forEach(function(_){return _.classList.remove("allow-interactivity-".concat(i))})}}},[e.inert,e.lockRef.current,e.shards]);var a=f.useCallback(function(m,_){if("touches"in m&&m.touches.length===2||m.type==="wheel"&&m.ctrlKey)return!s.current.allowPinchZoom;var y=kh(m),w=n.current,S="deltaX"in m?m.deltaX:w[0]-y[0],b="deltaY"in m?m.deltaY:w[1]-y[1],C,E=m.target,x=Math.abs(S)>Math.abs(b)?"h":"v";if("touches"in m&&x==="h"&&E.type==="range")return!1;var I=h7(x,E);if(!I)return!0;if(I?C=x:(C=x==="v"?"h":"v",I=h7(x,E)),!I)return!1;if(!r.current&&"changedTouches"in m&&(S||b)&&(r.current=C),!C)return!0;var L=r.current||C;return Bee(L,_,m,L==="h"?S:b)},[]),c=f.useCallback(function(m){var _=m;if(!(!Tc.length||Tc[Tc.length-1]!==o)){var y="deltaY"in _?p7(_):kh(_),w=t.current.filter(function(C){return C.name===_.type&&(C.target===_.target||_.target===C.shadowParent)&&Vee(C.delta,y)})[0];if(w&&w.should){_.cancelable&&_.preventDefault();return}if(!w){var S=(s.current.shards||[]).map(g7).filter(Boolean).filter(function(C){return C.contains(_.target)}),b=S.length>0?a(_,S[0]):!s.current.noIsolation;b&&_.cancelable&&_.preventDefault()}}},[]),l=f.useCallback(function(m,_,y,w){var S={name:m,delta:_,target:y,should:w,shadowParent:Wee(y)};t.current.push(S),setTimeout(function(){t.current=t.current.filter(function(b){return b!==S})},1)},[]),u=f.useCallback(function(m){n.current=kh(m),r.current=void 0},[]),d=f.useCallback(function(m){l(m.type,p7(m),m.target,a(m,e.lockRef.current))},[]),p=f.useCallback(function(m){l(m.type,kh(m),m.target,a(m,e.lockRef.current))},[]);f.useEffect(function(){return Tc.push(o),e.setCallbacks({onScrollCapture:d,onWheelCapture:d,onTouchMoveCapture:p}),document.addEventListener("wheel",c,kc),document.addEventListener("touchmove",c,kc),document.addEventListener("touchstart",u,kc),function(){Tc=Tc.filter(function(m){return m!==o}),document.removeEventListener("wheel",c,kc),document.removeEventListener("touchmove",c,kc),document.removeEventListener("touchstart",u,kc)}},[]);var g=e.removeScrollBar,v=e.inert;return f.createElement(f.Fragment,null,v?f.createElement(o,{styles:qee(i)}):null,g?f.createElement(aL,{gapMode:e.gapMode}):null)}function Wee(e){for(var t=null;e!==null;)e instanceof ShadowRoot&&(t=e.host,e=e.host),e=e.parentNode;return t}const zee=oL(Hk,Kee);var qk=f.forwardRef(function(e,t){return f.createElement(Hg,pn({},e,{ref:t,sideCar:zee}))});qk.classNames=Hg.classNames;var yy=["Enter"," "],Yee=["ArrowDown","PageUp","Home"],Gk=["ArrowUp","PageDown","End"],Xee=[...Yee,...Gk],Zee={ltr:[...yy,"ArrowRight"],rtl:[...yy,"ArrowLeft"]},Qee={ltr:["ArrowLeft"],rtl:["ArrowRight"]},Ff="Menu",[Hd,Jee,ete]=yk(Ff),[rc,Kk]=jf(Ff,[ete,Ek,$k]),Ug=Ek(),Wk=$k(),[tte,ic]=rc(Ff),[nte,Hf]=rc(Ff),zk=e=>{const{__scopeMenu:t,open:n=!1,children:r,dir:i,onOpenChange:o,modal:s=!0}=e,a=Ug(t),[c,l]=f.useState(null),u=f.useRef(!1),d=Ys(o),p=_k(i);return f.useEffect(()=>{const g=()=>{u.current=!0,document.addEventListener("pointerdown",v,{capture:!0,once:!0}),document.addEventListener("pointermove",v,{capture:!0,once:!0})},v=()=>u.current=!1;return document.addEventListener("keydown",g,{capture:!0}),()=>{document.removeEventListener("keydown",g,{capture:!0}),document.removeEventListener("pointerdown",v,{capture:!0}),document.removeEventListener("pointermove",v,{capture:!0})}},[]),h.jsx(mee,{...a,children:h.jsx(tte,{scope:t,open:n,onOpenChange:d,content:c,onContentChange:l,children:h.jsx(nte,{scope:t,onClose:f.useCallback(()=>d(!1),[d]),isUsingKeyboardRef:u,dir:p,modal:s,children:r})})})};zk.displayName=Ff;var rte="MenuAnchor",g_=f.forwardRef((e,t)=>{const{__scopeMenu:n,...r}=e,i=Ug(n);return h.jsx(vee,{...i,...r,ref:t})});g_.displayName=rte;var m_="MenuPortal",[ite,Yk]=rc(m_,{forceMount:void 0}),Xk=e=>{const{__scopeMenu:t,forceMount:n,children:r,container:i}=e,o=ic(m_,t);return h.jsx(ite,{scope:t,forceMount:n,children:h.jsx(Df,{present:n||o.open,children:h.jsx(Mk,{asChild:!0,container:i,children:r})})})};Xk.displayName=m_;var ii="MenuContent",[ote,v_]=rc(ii),Zk=f.forwardRef((e,t)=>{const n=Yk(ii,e.__scopeMenu),{forceMount:r=n.forceMount,...i}=e,o=ic(ii,e.__scopeMenu),s=Hf(ii,e.__scopeMenu);return h.jsx(Hd.Provider,{scope:e.__scopeMenu,children:h.jsx(Df,{present:r||o.open,children:h.jsx(Hd.Slot,{scope:e.__scopeMenu,children:s.modal?h.jsx(ste,{...i,ref:t}):h.jsx(ate,{...i,ref:t})})})})}),ste=f.forwardRef((e,t)=>{const n=ic(ii,e.__scopeMenu),r=f.useRef(null),i=li(t,r);return f.useEffect(()=>{const o=r.current;if(o)return H4(o)},[]),h.jsx(y_,{...e,ref:i,trapFocus:n.open,disableOutsidePointerEvents:n.open,disableOutsideScroll:!0,onFocusOutside:et(e.onFocusOutside,o=>o.preventDefault(),{checkForDefaultPrevented:!1}),onDismiss:()=>n.onOpenChange(!1)})}),ate=f.forwardRef((e,t)=>{const n=ic(ii,e.__scopeMenu);return h.jsx(y_,{...e,ref:t,trapFocus:!1,disableOutsidePointerEvents:!1,disableOutsideScroll:!1,onDismiss:()=>n.onOpenChange(!1)})}),y_=f.forwardRef((e,t)=>{const{__scopeMenu:n,loop:r=!1,trapFocus:i,onOpenAutoFocus:o,onCloseAutoFocus:s,disableOutsidePointerEvents:a,onEntryFocus:c,onEscapeKeyDown:l,onPointerDownOutside:u,onFocusOutside:d,onInteractOutside:p,onDismiss:g,disableOutsideScroll:v,...m}=e,_=ic(ii,n),y=Hf(ii,n),w=Ug(n),S=Wk(n),b=Jee(n),[C,E]=f.useState(null),x=f.useRef(null),I=li(t,x,_.onContentChange),L=f.useRef(0),R=f.useRef(""),k=f.useRef(0),A=f.useRef(null),P=f.useRef("right"),O=f.useRef(0),j=v?qk:f.Fragment,$=v?{as:g1,allowPinchZoom:!0}:void 0,T=M=>{const B=R.current+M,F=b().filter(z=>!z.disabled),K=document.activeElement,te=F.find(z=>z.ref.current===K)?.textValue,oe=F.map(z=>z.textValue),pe=_te(oe,B,te),ne=F.find(z=>z.textValue===pe)?.ref.current;(function z(re){R.current=re,window.clearTimeout(L.current),re!==""&&(L.current=window.setTimeout(()=>z(""),1e3))})(B),ne&&setTimeout(()=>ne.focus())};f.useEffect(()=>()=>window.clearTimeout(L.current),[]),N4();const N=f.useCallback(M=>P.current===A.current?.side&&wte(M,A.current?.area),[]);return h.jsx(ote,{scope:n,searchRef:R,onItemEnter:f.useCallback(M=>{N(M)&&M.preventDefault()},[N]),onItemLeave:f.useCallback(M=>{N(M)||(x.current?.focus(),E(null))},[N]),onTriggerLeave:f.useCallback(M=>{N(M)&&M.preventDefault()},[N]),pointerGraceTimerRef:k,onPointerGraceIntentChange:f.useCallback(M=>{A.current=M},[]),children:h.jsx(j,{...$,children:h.jsx(bk,{asChild:!0,trapped:i,onMountAutoFocus:et(o,M=>{M.preventDefault(),x.current?.focus({preventScroll:!0})}),onUnmountAutoFocus:s,children:h.jsx(Ag,{asChild:!0,disableOutsidePointerEvents:a,onEscapeKeyDown:l,onPointerDownOutside:u,onFocusOutside:d,onInteractOutside:p,onDismiss:g,children:h.jsx(Nee,{asChild:!0,...S,dir:y.dir,orientation:"vertical",loop:r,currentTabStopId:C,onCurrentTabStopIdChange:E,onEntryFocus:et(c,M=>{y.isUsingKeyboardRef.current||M.preventDefault()}),preventScrollOnEntryFocus:!0,children:h.jsx(yee,{role:"menu","aria-orientation":"vertical","data-state":hT(_.open),"data-radix-menu-content":"",dir:y.dir,...w,...m,ref:I,style:{outline:"none",...m.style},onKeyDown:et(m.onKeyDown,M=>{const F=M.target.closest("[data-radix-menu-content]")===M.currentTarget,K=M.ctrlKey||M.altKey||M.metaKey,te=M.key.length===1;F&&(M.key==="Tab"&&M.preventDefault(),!K&&te&&T(M.key));const oe=x.current;if(M.target!==oe||!Xee.includes(M.key))return;M.preventDefault();const ne=b().filter(z=>!z.disabled).map(z=>z.ref.current);Gk.includes(M.key)&&ne.reverse(),vte(ne)}),onBlur:et(e.onBlur,M=>{M.currentTarget.contains(M.target)||(window.clearTimeout(L.current),R.current="")}),onPointerMove:et(e.onPointerMove,Ud(M=>{const B=M.target,F=O.current!==M.clientX;if(M.currentTarget.contains(B)&&F){const K=M.clientX>O.current?"right":"left";P.current=K,O.current=M.clientX}}))})})})})})})});Zk.displayName=ii;var cte="MenuGroup",__=f.forwardRef((e,t)=>{const{__scopeMenu:n,...r}=e;return h.jsx(Jt.div,{role:"group",...r,ref:t})});__.displayName=cte;var lte="MenuLabel",Qk=f.forwardRef((e,t)=>{const{__scopeMenu:n,...r}=e;return h.jsx(Jt.div,{...r,ref:t})});Qk.displayName=lte;var m1="MenuItem",m7="menu.itemSelect",Bg=f.forwardRef((e,t)=>{const{disabled:n=!1,onSelect:r,...i}=e,o=f.useRef(null),s=Hf(m1,e.__scopeMenu),a=v_(m1,e.__scopeMenu),c=li(t,o),l=f.useRef(!1),u=()=>{const d=o.current;if(!n&&d){const p=new CustomEvent(m7,{bubbles:!0,cancelable:!0});d.addEventListener(m7,g=>r?.(g),{once:!0}),GJ(d,p),p.defaultPrevented?l.current=!1:s.onClose()}};return h.jsx(Jk,{...i,ref:c,disabled:n,onClick:et(e.onClick,u),onPointerDown:d=>{e.onPointerDown?.(d),l.current=!0},onPointerUp:et(e.onPointerUp,d=>{l.current||d.currentTarget?.click()}),onKeyDown:et(e.onKeyDown,d=>{const p=a.searchRef.current!=="";n||p&&d.key===" "||yy.includes(d.key)&&(d.currentTarget.click(),d.preventDefault())})})});Bg.displayName=m1;var Jk=f.forwardRef((e,t)=>{const{__scopeMenu:n,disabled:r=!1,textValue:i,...o}=e,s=v_(m1,n),a=Wk(n),c=f.useRef(null),l=li(t,c),[u,d]=f.useState(!1),[p,g]=f.useState("");return f.useEffect(()=>{const v=c.current;v&&g((v.textContent??"").trim())},[o.children]),h.jsx(Hd.ItemSlot,{scope:n,disabled:r,textValue:i??p,children:h.jsx($ee,{asChild:!0,...a,focusable:!r,children:h.jsx(Jt.div,{role:"menuitem","data-highlighted":u?"":void 0,"aria-disabled":r||void 0,"data-disabled":r?"":void 0,...o,ref:l,onPointerMove:et(e.onPointerMove,Ud(v=>{r?s.onItemLeave(v):(s.onItemEnter(v),v.defaultPrevented||v.currentTarget.focus({preventScroll:!0}))})),onPointerLeave:et(e.onPointerLeave,Ud(v=>s.onItemLeave(v))),onFocus:et(e.onFocus,()=>d(!0)),onBlur:et(e.onBlur,()=>d(!1))})})})}),ute="MenuCheckboxItem",eT=f.forwardRef((e,t)=>{const{checked:n=!1,onCheckedChange:r,...i}=e;return h.jsx(oT,{scope:e.__scopeMenu,checked:n,children:h.jsx(Bg,{role:"menuitemcheckbox","aria-checked":v1(n)?"mixed":n,...i,ref:t,"data-state":w_(n),onSelect:et(i.onSelect,()=>r?.(v1(n)?!0:!n),{checkForDefaultPrevented:!1})})})});eT.displayName=ute;var tT="MenuRadioGroup",[dte,fte]=rc(tT,{value:void 0,onValueChange:()=>{}}),nT=f.forwardRef((e,t)=>{const{value:n,onValueChange:r,...i}=e,o=Ys(r);return h.jsx(dte,{scope:e.__scopeMenu,value:n,onValueChange:o,children:h.jsx(__,{...i,ref:t})})});nT.displayName=tT;var rT="MenuRadioItem",iT=f.forwardRef((e,t)=>{const{value:n,...r}=e,i=fte(rT,e.__scopeMenu),o=n===i.value;return h.jsx(oT,{scope:e.__scopeMenu,checked:o,children:h.jsx(Bg,{role:"menuitemradio","aria-checked":o,...r,ref:t,"data-state":w_(o),onSelect:et(r.onSelect,()=>i.onValueChange?.(n),{checkForDefaultPrevented:!1})})})});iT.displayName=rT;var b_="MenuItemIndicator",[oT,hte]=rc(b_,{checked:!1}),sT=f.forwardRef((e,t)=>{const{__scopeMenu:n,forceMount:r,...i}=e,o=hte(b_,n);return h.jsx(Df,{present:r||v1(o.checked)||o.checked===!0,children:h.jsx(Jt.span,{...i,ref:t,"data-state":w_(o.checked)})})});sT.displayName=b_;var pte="MenuSeparator",aT=f.forwardRef((e,t)=>{const{__scopeMenu:n,...r}=e;return h.jsx(Jt.div,{role:"separator","aria-orientation":"horizontal",...r,ref:t})});aT.displayName=pte;var gte="MenuArrow",cT=f.forwardRef((e,t)=>{const{__scopeMenu:n,...r}=e,i=Ug(n);return h.jsx(_ee,{...i,...r,ref:t})});cT.displayName=gte;var mte="MenuSub",[L6e,lT]=rc(mte),Zu="MenuSubTrigger",uT=f.forwardRef((e,t)=>{const n=ic(Zu,e.__scopeMenu),r=Hf(Zu,e.__scopeMenu),i=lT(Zu,e.__scopeMenu),o=v_(Zu,e.__scopeMenu),s=f.useRef(null),{pointerGraceTimerRef:a,onPointerGraceIntentChange:c}=o,l={__scopeMenu:e.__scopeMenu},u=f.useCallback(()=>{s.current&&window.clearTimeout(s.current),s.current=null},[]);return f.useEffect(()=>u,[u]),f.useEffect(()=>{const d=a.current;return()=>{window.clearTimeout(d),c(null)}},[a,c]),h.jsx(g_,{asChild:!0,...l,children:h.jsx(Jk,{id:i.triggerId,"aria-haspopup":"menu","aria-expanded":n.open,"aria-controls":i.contentId,"data-state":hT(n.open),...e,ref:Dg(t,i.onTriggerChange),onClick:d=>{e.onClick?.(d),!(e.disabled||d.defaultPrevented)&&(d.currentTarget.focus(),n.open||n.onOpenChange(!0))},onPointerMove:et(e.onPointerMove,Ud(d=>{o.onItemEnter(d),!d.defaultPrevented&&!e.disabled&&!n.open&&!s.current&&(o.onPointerGraceIntentChange(null),s.current=window.setTimeout(()=>{n.onOpenChange(!0),u()},100))})),onPointerLeave:et(e.onPointerLeave,Ud(d=>{u();const p=n.content?.getBoundingClientRect();if(p){const g=n.content?.dataset.side,v=g==="right",m=v?-5:5,_=p[v?"left":"right"],y=p[v?"right":"left"];o.onPointerGraceIntentChange({area:[{x:d.clientX+m,y:d.clientY},{x:_,y:p.top},{x:y,y:p.top},{x:y,y:p.bottom},{x:_,y:p.bottom}],side:g}),window.clearTimeout(a.current),a.current=window.setTimeout(()=>o.onPointerGraceIntentChange(null),300)}else{if(o.onTriggerLeave(d),d.defaultPrevented)return;o.onPointerGraceIntentChange(null)}})),onKeyDown:et(e.onKeyDown,d=>{const p=o.searchRef.current!=="";e.disabled||p&&d.key===" "||Zee[r.dir].includes(d.key)&&(n.onOpenChange(!0),n.content?.focus(),d.preventDefault())})})})});uT.displayName=Zu;var dT="MenuSubContent",fT=f.forwardRef((e,t)=>{const n=Yk(ii,e.__scopeMenu),{forceMount:r=n.forceMount,...i}=e,o=ic(ii,e.__scopeMenu),s=Hf(ii,e.__scopeMenu),a=lT(dT,e.__scopeMenu),c=f.useRef(null),l=li(t,c);return h.jsx(Hd.Provider,{scope:e.__scopeMenu,children:h.jsx(Df,{present:r||o.open,children:h.jsx(Hd.Slot,{scope:e.__scopeMenu,children:h.jsx(y_,{id:a.contentId,"aria-labelledby":a.triggerId,...i,ref:l,align:"start",side:s.dir==="rtl"?"left":"right",disableOutsidePointerEvents:!1,disableOutsideScroll:!1,trapFocus:!1,onOpenAutoFocus:u=>{s.isUsingKeyboardRef.current&&c.current?.focus(),u.preventDefault()},onCloseAutoFocus:u=>u.preventDefault(),onFocusOutside:et(e.onFocusOutside,u=>{u.target!==a.trigger&&o.onOpenChange(!1)}),onEscapeKeyDown:et(e.onEscapeKeyDown,u=>{s.onClose(),u.preventDefault()}),onKeyDown:et(e.onKeyDown,u=>{const d=u.currentTarget.contains(u.target),p=Qee[s.dir].includes(u.key);d&&p&&(o.onOpenChange(!1),a.trigger?.focus(),u.preventDefault())})})})})})});fT.displayName=dT;function hT(e){return e?"open":"closed"}function v1(e){return e==="indeterminate"}function w_(e){return v1(e)?"indeterminate":e?"checked":"unchecked"}function vte(e){const t=document.activeElement;for(const n of e)if(n===t||(n.focus(),document.activeElement!==t))return}function yte(e,t){return e.map((n,r)=>e[(t+r)%e.length])}function _te(e,t,n){const i=t.length>1&&Array.from(t).every(l=>l===t[0])?t[0]:t,o=n?e.indexOf(n):-1;let s=yte(e,Math.max(o,0));i.length===1&&(s=s.filter(l=>l!==n));const c=s.find(l=>l.toLowerCase().startsWith(i.toLowerCase()));return c!==n?c:void 0}function bte(e,t){const{x:n,y:r}=e;let i=!1;for(let o=0,s=t.length-1;o<t.length;s=o++){const a=t[o].x,c=t[o].y,l=t[s].x,u=t[s].y;c>r!=u>r&&n<(l-a)*(r-c)/(u-c)+a&&(i=!i)}return i}function wte(e,t){if(!t)return!1;const n={x:e.clientX,y:e.clientY};return bte(n,t)}function Ud(e){return t=>t.pointerType==="mouse"?e(t):void 0}var Ste=zk,Cte=g_,Ete=Xk,xte=Zk,Ite=__,Rte=Qk,Lte=Bg,kte=eT,Tte=nT,Ate=iT,Pte=sT,Mte=aT,Nte=cT,$te=uT,Ote=fT,S_="DropdownMenu",[jte,k6e]=jf(S_,[Kk]),Kn=Kk(),[Dte,pT]=jte(S_),gT=e=>{const{__scopeDropdownMenu:t,children:n,dir:r,open:i,defaultOpen:o,onOpenChange:s,modal:a=!0}=e,c=Kn(t),l=f.useRef(null),[u=!1,d]=mk({prop:i,defaultProp:o,onChange:s});return h.jsx(Dte,{scope:t,triggerId:El(),triggerRef:l,contentId:El(),open:u,onOpenChange:d,onOpenToggle:f.useCallback(()=>d(p=>!p),[d]),modal:a,children:h.jsx(Ste,{...c,open:u,onOpenChange:d,dir:r,modal:a,children:n})})};gT.displayName=S_;var mT="DropdownMenuTrigger",vT=f.forwardRef((e,t)=>{const{__scopeDropdownMenu:n,disabled:r=!1,...i}=e,o=pT(mT,n),s=Kn(n);return h.jsx(Cte,{asChild:!0,...s,children:h.jsx(Jt.button,{type:"button",id:o.triggerId,"aria-haspopup":"menu","aria-expanded":o.open,"aria-controls":o.open?o.contentId:void 0,"data-state":o.open?"open":"closed","data-disabled":r?"":void 0,disabled:r,...i,ref:Dg(t,o.triggerRef),onPointerDown:et(e.onPointerDown,a=>{!r&&a.button===0&&a.ctrlKey===!1&&(o.onOpenToggle(),o.open||a.preventDefault())}),onKeyDown:et(e.onKeyDown,a=>{r||(["Enter"," "].includes(a.key)&&o.onOpenToggle(),a.key==="ArrowDown"&&o.onOpenChange(!0),["Enter"," ","ArrowDown"].includes(a.key)&&a.preventDefault())})})})});vT.displayName=mT;var Fte="DropdownMenuPortal",yT=e=>{const{__scopeDropdownMenu:t,...n}=e,r=Kn(t);return h.jsx(Ete,{...r,...n})};yT.displayName=Fte;var _T="DropdownMenuContent",bT=f.forwardRef((e,t)=>{const{__scopeDropdownMenu:n,...r}=e,i=pT(_T,n),o=Kn(n),s=f.useRef(!1);return h.jsx(xte,{id:i.contentId,"aria-labelledby":i.triggerId,...o,...r,ref:t,onCloseAutoFocus:et(e.onCloseAutoFocus,a=>{s.current||i.triggerRef.current?.focus(),s.current=!1,a.preventDefault()}),onInteractOutside:et(e.onInteractOutside,a=>{const c=a.detail.originalEvent,l=c.button===0&&c.ctrlKey===!0,u=c.button===2||l;(!i.modal||u)&&(s.current=!0)}),style:{...e.style,"--radix-dropdown-menu-content-transform-origin":"var(--radix-popper-transform-origin)","--radix-dropdown-menu-content-available-width":"var(--radix-popper-available-width)","--radix-dropdown-menu-content-available-height":"var(--radix-popper-available-height)","--radix-dropdown-menu-trigger-width":"var(--radix-popper-anchor-width)","--radix-dropdown-menu-trigger-height":"var(--radix-popper-anchor-height)"}})});bT.displayName=_T;var Hte="DropdownMenuGroup",Ute=f.forwardRef((e,t)=>{const{__scopeDropdownMenu:n,...r}=e,i=Kn(n);return h.jsx(Ite,{...i,...r,ref:t})});Ute.displayName=Hte;var Bte="DropdownMenuLabel",Vte=f.forwardRef((e,t)=>{const{__scopeDropdownMenu:n,...r}=e,i=Kn(n);return h.jsx(Rte,{...i,...r,ref:t})});Vte.displayName=Bte;var qte="DropdownMenuItem",wT=f.forwardRef((e,t)=>{const{__scopeDropdownMenu:n,...r}=e,i=Kn(n);return h.jsx(Lte,{...i,...r,ref:t})});wT.displayName=qte;var Gte="DropdownMenuCheckboxItem",Kte=f.forwardRef((e,t)=>{const{__scopeDropdownMenu:n,...r}=e,i=Kn(n);return h.jsx(kte,{...i,...r,ref:t})});Kte.displayName=Gte;var Wte="DropdownMenuRadioGroup",zte=f.forwardRef((e,t)=>{const{__scopeDropdownMenu:n,...r}=e,i=Kn(n);return h.jsx(Tte,{...i,...r,ref:t})});zte.displayName=Wte;var Yte="DropdownMenuRadioItem",Xte=f.forwardRef((e,t)=>{const{__scopeDropdownMenu:n,...r}=e,i=Kn(n);return h.jsx(Ate,{...i,...r,ref:t})});Xte.displayName=Yte;var Zte="DropdownMenuItemIndicator",Qte=f.forwardRef((e,t)=>{const{__scopeDropdownMenu:n,...r}=e,i=Kn(n);return h.jsx(Pte,{...i,...r,ref:t})});Qte.displayName=Zte;var Jte="DropdownMenuSeparator",ene=f.forwardRef((e,t)=>{const{__scopeDropdownMenu:n,...r}=e,i=Kn(n);return h.jsx(Mte,{...i,...r,ref:t})});ene.displayName=Jte;var tne="DropdownMenuArrow",nne=f.forwardRef((e,t)=>{const{__scopeDropdownMenu:n,...r}=e,i=Kn(n);return h.jsx(Nte,{...i,...r,ref:t})});nne.displayName=tne;var rne="DropdownMenuSubTrigger",ine=f.forwardRef((e,t)=>{const{__scopeDropdownMenu:n,...r}=e,i=Kn(n);return h.jsx($te,{...i,...r,ref:t})});ine.displayName=rne;var one="DropdownMenuSubContent",sne=f.forwardRef((e,t)=>{const{__scopeDropdownMenu:n,...r}=e,i=Kn(n);return h.jsx(Ote,{...i,...r,ref:t,style:{...e.style,"--radix-dropdown-menu-content-transform-origin":"var(--radix-popper-transform-origin)","--radix-dropdown-menu-content-available-width":"var(--radix-popper-available-width)","--radix-dropdown-menu-content-available-height":"var(--radix-popper-available-height)","--radix-dropdown-menu-trigger-width":"var(--radix-popper-anchor-width)","--radix-dropdown-menu-trigger-height":"var(--radix-popper-anchor-height)"}})});sne.displayName=one;var ane=gT,cne=vT,lne=yT,une=bT;const dne=({onSelect:e,children:t})=>h.jsx(wT,{onSelect:e??void 0,asChild:!0,children:t}),C_=({title:e,showTitle:t=!0,open:n,onOpenChange:r,trigger:i,children:o,side:s="bottom",align:a="center"})=>{const c=d_(),l=c==="android"||c==="ios",u=f.useMemo(()=>({MenuItemWrapper:l?null:dne,onOpenChange:r}),[r]),d=h.jsx(u_.Provider,{value:u,children:o});return l?h.jsxs(ir.Root,{open:n,onOpenChange:r,children:[h.jsx(ir.Trigger,{asChild:!0,children:i}),h.jsxs(ir.Portal,{children:[h.jsx(ir.Overlay,{className:Z(p1.bg)}),h.jsx(ir.Content,{asChild:!0,children:h.jsx(f_,{title:e,children:d})})]})]}):h.jsxs(ane,{open:n,onOpenChange:r,children:[h.jsx(cne,{asChild:!0,children:i}),h.jsx(lne,{children:h.jsx(une,{asChild:!0,side:s,align:a,sideOffset:8,children:h.jsx(e_,{title:e,showTitle:t,children:d})})})]})},fne="_item_lqfwq_8",hne="_interactive_lqfwq_26",pne="_label_lqfwq_34",gne="_icon_lqfwq_50",mne="_disabled_lqfwq_118",bo={item:fne,interactive:hne,"no-label":"_no-label_lqfwq_30",label:pne,"no-icon":"_no-icon_lqfwq_41",icon:gne,"nav-hint":"_nav-hint_lqfwq_59",disabled:mne};function ST(e,t){return h.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",width:"1em",height:"1em",fill:"currentColor",viewBox:"0 0 24 24",ref:t,...e,children:h.jsx("path",{d:"M8.7 17.3a.95.95 0 0 1-.275-.7q0-.425.275-.7l3.9-3.9-3.9-3.9a.95.95 0 0 1-.275-.7q0-.425.275-.7a.95.95 0 0 1 .7-.275q.425 0 .7.275l4.6 4.6q.15.15.213.325.062.175.062.375t-.062.375a.9.9 0 0 1-.213.325l-4.6 4.6a.95.95 0 0 1-.7.275.95.95 0 0 1-.7-.275"})})}ST.displayName="ChevronRightIcon";const CT=f.forwardRef(ST);function v7(e,t){if(typeof e=="function")return e(t);e!=null&&(e.current=t)}function vne(...e){return t=>{let n=!1;const r=e.map(i=>{const o=v7(i,t);return!n&&typeof o=="function"&&(n=!0),o});if(n)return()=>{for(let i=0;i<r.length;i++){const o=r[i];typeof o=="function"?o():v7(e[i],null)}}}}var ET=f.forwardRef((e,t)=>{const{children:n,...r}=e,i=f.Children.toArray(n),o=i.find(_ne);if(o){const s=o.props.children,a=i.map(c=>c===o?f.Children.count(s)>1?f.Children.only(null):f.isValidElement(s)?s.props.children:null:c);return h.jsx(_y,{...r,ref:t,children:f.isValidElement(s)?f.cloneElement(s,void 0,a):null})}return h.jsx(_y,{...r,ref:t,children:n})});ET.displayName="Slot";var _y=f.forwardRef((e,t)=>{const{children:n,...r}=e;if(f.isValidElement(n)){const i=wne(n);return f.cloneElement(n,{...bne(r,n.props),ref:t?vne(t,i):i})}return f.Children.count(n)>1?f.Children.only(null):null});_y.displayName="SlotClone";var yne=({children:e})=>h.jsx(h.Fragment,{children:e});function _ne(e){return f.isValidElement(e)&&e.type===yne}function bne(e,t){const n={...t};for(const r in t){const i=e[r],o=t[r];/^on[A-Z]/.test(r)?i&&o?n[r]=(...a)=>{o(...a),i(...a)}:i&&(n[r]=i):r==="style"?n[r]={...i,...o}:r==="className"&&(n[r]=[i,o].filter(Boolean).join(" "))}return{...e,...n}}function wne(e){let t=Object.getOwnPropertyDescriptor(e.props,"ref")?.get,n=t&&"isReactWarning"in t&&t.isReactWarning;return n?e.ref:(t=Object.getOwnPropertyDescriptor(e,"ref")?.get,n=t&&"isReactWarning"in t&&t.isReactWarning,n?e.props.ref:e.props.ref||e.ref)}const Ha=({as:e,className:t,Icon:n,label:r,labelProps:i,onSelect:o,kind:s="primary",children:a,onClick:c,disabled:l,hideChevron:u,...d})=>{const p=e??"button",g=f.useContext(u_),v=f.useCallback(S=>{if(c?.(S),o!==null&&g?.MenuItemWrapper==null){const b=new CustomEvent("menu.itemSelect",{bubbles:!0,cancelable:!0});o(b),b.defaultPrevented||g?.onOpenChange(!1)}},[g,o]),m=f.isValidElement(n),_=n,y=n,w=h.jsxs(p,{role:"menuitem",...d,className:Z(t,bo.item,{[bo.interactive]:o!==null,[bo["no-label"]]:r===null,[bo["no-icon"]]:!n,[bo.disabled]:l}),"data-kind":s,onClick:v,disabled:p==="button"?l:void 0,"aria-disabled":p==="button"?void 0:l,children:[n&&(m?h.jsx(ET,{className:bo.icon,children:_}):h.jsx(y,{width:24,height:24,className:bo.icon,"aria-hidden":!0})),r!==null&&h.jsx(Ye,{className:bo.label,size:"md",weight:"medium",as:"span",...i,children:r}),!u&&(p==="button"||p==="a")&&h.jsx(CT,{width:8,height:24,className:bo["nav-hint"],"aria-hidden":!0,viewBox:"8 0 8 24"}),a]});return g?.MenuItemWrapper==null||o===null?w:h.jsx(g.MenuItemWrapper,{onSelect:o,children:w})};function dd(e,t,{checkForDefaultPrevented:n=!0}={}){return function(i){if(e?.(i),n===!1||!i.defaultPrevented)return t?.(i)}}function y7(e,t){if(typeof e=="function")return e(t);e!=null&&(e.current=t)}function Sne(...e){return t=>{let n=!1;const r=e.map(i=>{const o=y7(i,t);return!n&&typeof o=="function"&&(n=!0),o});if(n)return()=>{for(let i=0;i<r.length;i++){const o=r[i];typeof o=="function"?o():y7(e[i],null)}}}}function E_(...e){return f.useCallback(Sne(...e),e)}function Cne(e,t=[]){let n=[];function r(o,s){const a=f.createContext(s),c=n.length;n=[...n,s];const l=d=>{const{scope:p,children:g,...v}=d,m=p?.[e]?.[c]||a,_=f.useMemo(()=>v,Object.values(v));return h.jsx(m.Provider,{value:_,children:g})};l.displayName=o+"Provider";function u(d,p){const g=p?.[e]?.[c]||a,v=f.useContext(g);if(v)return v;if(s!==void 0)return s;throw new Error(`\`${d}\` must be used within \`${o}\``)}return[l,u]}const i=()=>{const o=n.map(s=>f.createContext(s));return function(a){const c=a?.[e]||o;return f.useMemo(()=>({[`__scope${e}`]:{...a,[e]:c}}),[a,c])}};return i.scopeName=e,[r,Ene(i,...t)]}function Ene(...e){const t=e[0];if(e.length===1)return t;const n=()=>{const r=e.map(i=>({useScope:i(),scopeName:i.scopeName}));return function(o){const s=r.reduce((a,{useScope:c,scopeName:l})=>{const d=c(o)[`__scope${l}`];return{...a,...d}},{});return f.useMemo(()=>({[`__scope${t.scopeName}`]:s}),[s])}};return n.scopeName=t.scopeName,n}var xne="Label",xT=f.forwardRef((e,t)=>h.jsx(Jt.label,{...e,ref:t,onMouseDown:n=>{n.target.closest("button, input, select, textarea")||(e.onMouseDown?.(n),!n.defaultPrevented&&n.detail>1&&n.preventDefault())}}));xT.displayName=xne;var[x_,T6e]=Cne("Form"),I_="Form",[Ine,lu]=x_(I_),[Rne,IT]=x_(I_),RT=f.forwardRef((e,t)=>{const{__scopeForm:n,onClearServerErrors:r=()=>{},...i}=e,o=f.useRef(null),s=E_(t,o),[a,c]=f.useState({}),l=f.useCallback(R=>a[R],[a]),u=f.useCallback((R,k)=>c(A=>({...A,[R]:{...A[R]??{},...k}})),[]),d=f.useCallback(R=>{c(k=>({...k,[R]:void 0})),w(k=>({...k,[R]:{}}))},[]),[p,g]=f.useState({}),v=f.useCallback(R=>p[R]??[],[p]),m=f.useCallback((R,k)=>{g(A=>({...A,[R]:[...A[R]??[],k]}))},[]),_=f.useCallback((R,k)=>{g(A=>({...A,[R]:(A[R]??[]).filter(P=>P.id!==k)}))},[]),[y,w]=f.useState({}),S=f.useCallback(R=>y[R]??{},[y]),b=f.useCallback((R,k)=>{w(A=>({...A,[R]:{...A[R]??{},...k}}))},[]),[C,E]=f.useState({}),x=f.useCallback((R,k)=>{E(A=>{const P=new Set(A[R]).add(k);return{...A,[R]:P}})},[]),I=f.useCallback((R,k)=>{E(A=>{const P=new Set(A[R]);return P.delete(k),{...A,[R]:P}})},[]),L=f.useCallback(R=>Array.from(C[R]??[]).join(" ")||void 0,[C]);return h.jsx(Ine,{scope:n,getFieldValidity:l,onFieldValidityChange:u,getFieldCustomMatcherEntries:v,onFieldCustomMatcherEntryAdd:m,onFieldCustomMatcherEntryRemove:_,getFieldCustomErrors:S,onFieldCustomErrorsChange:b,onFieldValiditionClear:d,children:h.jsx(Rne,{scope:n,onFieldMessageIdAdd:x,onFieldMessageIdRemove:I,getFieldDescription:L,children:h.jsx(Jt.form,{...i,ref:s,onInvalid:dd(e.onInvalid,R=>{const k=NT(R.currentTarget);k===R.target&&k.focus(),R.preventDefault()}),onSubmit:dd(e.onSubmit,r,{checkForDefaultPrevented:!1}),onReset:dd(e.onReset,r)})})})});RT.displayName=I_;var R_="FormField",[Lne,Vg]=x_(R_),LT=f.forwardRef((e,t)=>{const{__scopeForm:n,name:r,serverInvalid:i=!1,...o}=e,a=lu(R_,n).getFieldValidity(r),c=El();return h.jsx(Lne,{scope:n,id:c,name:r,serverInvalid:i,children:h.jsx(Jt.div,{"data-valid":k_(a,i),"data-invalid":T_(a,i),...o,ref:t})})});LT.displayName=R_;var by="FormLabel",kT=f.forwardRef((e,t)=>{const{__scopeForm:n,...r}=e,i=lu(by,n),o=Vg(by,n),s=r.htmlFor||o.id,a=i.getFieldValidity(o.name);return h.jsx(xT,{"data-valid":k_(a,o.serverInvalid),"data-invalid":T_(a,o.serverInvalid),...r,ref:t,htmlFor:s})});kT.displayName=by;var Ep="FormControl",TT=f.forwardRef((e,t)=>{const{__scopeForm:n,...r}=e,i=lu(Ep,n),o=Vg(Ep,n),s=IT(Ep,n),a=f.useRef(null),c=E_(t,a),l=r.name||o.name,u=r.id||o.id,d=i.getFieldCustomMatcherEntries(l),{onFieldValidityChange:p,onFieldCustomErrorsChange:g,onFieldValiditionClear:v}=i,m=f.useCallback(async w=>{if($T(w.validity)){const A=W0(w.validity);p(l,A);return}const S=w.form?new FormData(w.form):new FormData,b=[w.value,S],C=[],E=[];d.forEach(A=>{One(A,b)?E.push(A):jne(A)&&C.push(A)});const x=C.map(({id:A,match:P})=>[A,P(...b)]),I=Object.fromEntries(x),L=Object.values(I).some(Boolean),R=L;w.setCustomValidity(R?Bd:"");const k=W0(w.validity);if(p(l,k),g(l,I),!L&&E.length>0){const A=E.map(({id:N,match:M})=>M(...b).then(B=>[N,B])),P=await Promise.all(A),O=Object.fromEntries(P),$=Object.values(O).some(Boolean);w.setCustomValidity($?Bd:"");const T=W0(w.validity);p(l,T),g(l,O)}},[d,l,g,p]);f.useEffect(()=>{const w=a.current;if(w){const S=()=>m(w);return w.addEventListener("change",S),()=>w.removeEventListener("change",S)}},[m]);const _=f.useCallback(()=>{const w=a.current;w&&(w.setCustomValidity(""),v(l))},[l,v]);f.useEffect(()=>{const w=a.current?.form;if(w)return w.addEventListener("reset",_),()=>w.removeEventListener("reset",_)},[_]),f.useEffect(()=>{const w=a.current,S=w?.closest("form");if(S&&o.serverInvalid){const b=NT(S);b===w&&b.focus()}},[o.serverInvalid]);const y=i.getFieldValidity(l);return h.jsx(Jt.input,{"data-valid":k_(y,o.serverInvalid),"data-invalid":T_(y,o.serverInvalid),"aria-invalid":o.serverInvalid?!0:void 0,"aria-describedby":s.getFieldDescription(l),title:"",...r,ref:c,id:u,name:l,onInvalid:dd(e.onInvalid,w=>{const S=w.currentTarget;m(S)}),onChange:dd(e.onChange,w=>{_()})})});TT.displayName=Ep;var Bd="This value is not valid",kne={badInput:Bd,patternMismatch:"This value does not match the required pattern",rangeOverflow:"This value is too large",rangeUnderflow:"This value is too small",stepMismatch:"This value does not match the required step",tooLong:"This value is too long",tooShort:"This value is too short",typeMismatch:"This value does not match the required type",valid:void 0,valueMissing:"This value is missing"},Uf="FormMessage",AT=f.forwardRef((e,t)=>{const{match:n,name:r,...i}=e,o=Vg(Uf,e.__scopeForm),s=r??o.name;return n===void 0?h.jsx(L_,{...i,ref:t,name:s,children:e.children||Bd}):typeof n=="function"?h.jsx(Ane,{match:n,...i,ref:t,name:s}):h.jsx(Tne,{match:n,...i,ref:t,name:s})});AT.displayName=Uf;var Tne=f.forwardRef((e,t)=>{const{match:n,forceMatch:r=!1,name:i,children:o,...s}=e,c=lu(Uf,s.__scopeForm).getFieldValidity(i);return r||c?.[n]?h.jsx(L_,{ref:t,...s,name:i,children:o??kne[n]}):null}),Ane=f.forwardRef((e,t)=>{const{match:n,forceMatch:r=!1,name:i,id:o,children:s,...a}=e,c=lu(Uf,a.__scopeForm),l=f.useRef(null),u=E_(t,l),d=El(),p=o??d,g=f.useMemo(()=>({id:p,match:n}),[p,n]),{onFieldCustomMatcherEntryAdd:v,onFieldCustomMatcherEntryRemove:m}=c;f.useEffect(()=>(v(i,g),()=>m(i,g.id)),[g,i,v,m]);const _=c.getFieldValidity(i),w=c.getFieldCustomErrors(i)[p];return r||_&&!$T(_)&&w?h.jsx(L_,{id:p,ref:u,...a,name:i,children:s??Bd}):null}),L_=f.forwardRef((e,t)=>{const{__scopeForm:n,id:r,name:i,...o}=e,s=IT(Uf,n),a=El(),c=r??a,{onFieldMessageIdAdd:l,onFieldMessageIdRemove:u}=s;return f.useEffect(()=>(l(i,c),()=>u(i,c)),[i,c,l,u]),h.jsx(Jt.span,{id:c,...o,ref:t})}),wy="FormValidityState",PT=e=>{const{__scopeForm:t,name:n,children:r}=e,i=lu(wy,t),o=Vg(wy,t),s=n??o.name,a=i.getFieldValidity(s);return h.jsx(h.Fragment,{children:r(a)})};PT.displayName=wy;var Pne="FormSubmit",MT=f.forwardRef((e,t)=>{const{__scopeForm:n,...r}=e;return h.jsx(Jt.button,{type:"submit",...r,ref:t})});MT.displayName=Pne;function W0(e){const t={};for(const n in e)t[n]=e[n];return t}function Mne(e){return e instanceof HTMLElement}function Nne(e){return"validity"in e}function $ne(e){return Nne(e)&&(e.validity.valid===!1||e.getAttribute("aria-invalid")==="true")}function NT(e){const t=e.elements,[n]=Array.from(t).filter(Mne).filter($ne);return n}function One(e,t){return e.match.constructor.name==="AsyncFunction"||Dne(e.match,t)}function jne(e){return e.match.constructor.name==="Function"}function Dne(e,t){return e(...t)instanceof Promise}function $T(e){let t=!1;for(const n in e){const r=n;if(r!=="valid"&&r!=="customError"&&e[r]){t=!0;break}}return t}function k_(e,t){if(e?.valid===!0&&!t)return!0}function T_(e,t){if(e?.valid===!1||t)return!0}var Fne=RT,OT=LT,Hne=kT,A_=TT,qg=AT,Une=PT,Bne=MT;const Vne="_container_1qhtc_10",qne="_input_1qhtc_18",Gne="_ui_1qhtc_19",z0={container:Vne,input:qne,ui:Gne},Kne=f.forwardRef(function({className:t,...n},r){const i=Z(z0.container,t);return h.jsxs("div",{className:i,children:[h.jsx("input",{ref:r,...n,className:z0.input,type:"radio"}),h.jsx("div",{className:z0.ui})]})}),xp=f.forwardRef(function(t,n){return h.jsx(A_,{asChild:!0,children:h.jsx(Kne,{ref:n,...t})})}),Wne="_root_19upo_16",zne="_field_19upo_26",Yne="_label_19upo_59",Xne="_message_19upo_85",Rr={root:Wne,field:zne,"inline-field":"_inline-field_19upo_32","inline-field-body":"_inline-field-body_19upo_38","inline-field-control":"_inline-field-control_19upo_44",label:Yne,message:Xne,"help-message":"_help-message_19upo_91","error-message":"_error-message_19upo_95","success-message":"_success-message_19upo_99"},Zne=f.forwardRef(function({children:t,...n},r){const i=Z(Rr.field,n.className);return h.jsx(OT,{ref:r,...n,className:i,children:t})}),fd=f.forwardRef(function({children:t,...n},r){const i=Z(Rr.label,n.className);return h.jsx(Hne,{ref:r,...n,className:i,children:t})});var Qne="Separator",_7="horizontal",Jne=["horizontal","vertical"],jT=f.forwardRef((e,t)=>{const{decorative:n,orientation:r=_7,...i}=e,o=ere(r)?r:_7,a=n?{role:"none"}:{"aria-orientation":o==="vertical"?o:void 0,role:"separator"};return h.jsx(Jt.div,{"data-orientation":o,...a,...i,ref:t})});jT.displayName=Qne;function ere(e){return Jne.includes(e)}var tre=jT;const nre="_separator_cqpyv_8",rre={separator:nre},b7="--cpd-separator-spacing",P_=f.forwardRef(({className:e,spacing:t,kind:n="primary",...r},i)=>{const o=Z(rre.separator,e),s=f.useRef(null),a=nR([s,i]);return f.useEffect(()=>{const c=s.current?.style;t?c?.setProperty(b7,t):c?.removeProperty(b7)},[t]),h.jsx(tre,{...r,className:o,ref:a,"data-kind":n})});P_.displayName="Separator";const ire="_container_udcm8_10",ore="_input_udcm8_24",sre="_ui_udcm8_34",Y0={container:ire,input:ore,ui:sre},DT=f.forwardRef(function({className:t,...n},r){const i=Z(Y0.container,t);return h.jsxs("div",{className:i,children:[h.jsx("input",{role:"switch",ref:r,className:Y0.input,...n,type:"checkbox"}),h.jsx("div",{className:Y0.ui})]})});f.forwardRef(function(t,n){return h.jsx(A_,{asChild:!0,children:h.jsx(DT,{ref:n,...t})})});const M_=f.forwardRef(function({className:t,Icon:n,label:r,onSelect:i,checked:o,disabled:s,onClick:a},c){const l=f.useId(),u=f.useCallback(()=>{},[]);return h.jsx(Ha,{as:"div",role:"menuitemcheckbox","aria-checked":o,className:t,Icon:n,label:r,onSelect:i,disabled:s,onClick:a,children:h.jsx(DT,{id:l,ref:c,"aria-hidden":!0,checked:o,disabled:s,onChange:u})})});function FT(e,t){return h.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",width:"1em",height:"1em",fill:"currentColor",viewBox:"0 0 24 24",ref:t,...e,children:h.jsx("path",{d:"M9.55 17.575q-.2 0-.375-.062a.9.9 0 0 1-.325-.213L4.55 13q-.274-.274-.262-.713.012-.437.287-.712a.95.95 0 0 1 .7-.275q.425 0 .7.275L9.55 15.15l8.475-8.475q.274-.275.713-.275.437 0 .712.275.275.274.275.713 0 .437-.275.712l-9.2 9.2q-.15.15-.325.212a1.1 1.1 0 0 1-.375.063"})})}FT.displayName="CheckIcon";const N_=f.forwardRef(FT),y1=f.forwardRef(function({children:t,...n},r){const i=Z(Rr.root,n.className);return h.jsx(Fne,{ref:r,...n,className:i,children:t})}),Ip=f.forwardRef(function({className:t,control:n,children:r,...i},o){const s=Z(Rr["inline-field"],t);return h.jsxs(OT,{ref:o,...i,className:s,children:[h.jsx("div",{className:Rr["inline-field-control"],children:n}),h.jsx("div",{className:Rr["inline-field-body"],children:r})]})});function HT(e,t){return h.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",width:"1em",height:"1em",fill:"currentColor",viewBox:"0 0 24 24",ref:t,...e,children:h.jsx("path",{d:"m10.6 13.8-2.15-2.15a.95.95 0 0 0-.7-.275.95.95 0 0 0-.7.275.95.95 0 0 0-.275.7q0 .425.275.7L9.9 15.9q.3.3.7.3t.7-.3l5.65-5.65a.95.95 0 0 0 .275-.7.95.95 0 0 0-.275-.7.95.95 0 0 0-.7-.275.95.95 0 0 0-.7.275zM12 22a9.7 9.7 0 0 1-3.9-.788 10.1 10.1 0 0 1-3.175-2.137q-1.35-1.35-2.137-3.175A9.7 9.7 0 0 1 2 12q0-2.075.788-3.9a10.1 10.1 0 0 1 2.137-3.175q1.35-1.35 3.175-2.137A9.7 9.7 0 0 1 12 2q2.075 0 3.9.788a10.1 10.1 0 0 1 3.175 2.137q1.35 1.35 2.137 3.175A9.7 9.7 0 0 1 22 12a9.7 9.7 0 0 1-.788 3.9 10.1 10.1 0 0 1-2.137 3.175q-1.35 1.35-3.175 2.137A9.7 9.7 0 0 1 12 22"})})}HT.displayName="CheckCircleSolidIcon";const are=f.forwardRef(HT),cre="_icon_11k6c_18",lre={icon:cre};function UT(e,t){return h.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",width:"1em",height:"1em",fill:"currentColor",viewBox:"0 0 24 24",ref:t,...e,children:h.jsx("path",{fillRule:"evenodd",d:"M12 4.031a8 8 0 1 0 8 8 1 1 0 0 1 2 0c0 5.523-4.477 10-10 10s-10-4.477-10-10 4.477-10 10-10a1 1 0 1 1 0 2",clipRule:"evenodd"})})}UT.displayName="SpinnerIcon";const ure=f.forwardRef(UT),BT=f.forwardRef(function({size:t=20,className:n,...r},i){return h.jsx(ure,{ref:i,className:Z(lre.icon,n),style:{width:t,height:t},...r})});f.forwardRef(function({children:t,className:n,...r},i){const o=Z(Rr.message,Rr["error-message"],n);return h.jsxs(qg,{ref:i,...r,className:o,children:[h.jsx(If,{}),t]})});const dre=f.forwardRef(function({children:t,className:n,...r},i){const o=Z(Rr.message,Rr["success-message"],n);return h.jsxs(qg,{ref:i,...r,className:o,children:[h.jsx(are,{}),t]})}),fre=f.forwardRef(function({children:t,className:n,...r},i){const o=Z(Rr.message,n);return h.jsxs(qg,{ref:i,...r,className:o,children:[h.jsx(BT,{}),t]})}),Rp=f.forwardRef(function({children:t,className:n,...r},i){const o=Z(Rr.message,Rr["help-message"],n);return h.jsx(qg,{ref:i,...r,className:o,children:t})}),hre="_button_13vu4_8",pre="_destructive_13vu4_110",Ru={button:hre,"icon-only":"_icon-only_13vu4_53","has-icon":"_has-icon_13vu4_60",destructive:pre},De=f.forwardRef(function({as:t,kind:n="primary",size:r="lg",children:i,className:o,iconOnly:s,Icon:a,destructive:c,disabled:l,...u},d){const[p,g]=n==="destructive"?["secondary",!0]:[n,c],v=Z(Ru.button,o,{[Ru["has-icon"]]:a,[Ru["icon-only"]]:s,[Ru.destructive]:g}),m=s&&r==="lg"?24:20;return h.jsxs(MI,{...u,as:t||"button",ref:d,className:v,"data-size":r,"data-kind":p,tabIndex:0,disabled:l,children:[a&&h.jsx(a,{width:m,height:m,className:Ru.icon,"aria-hidden":!0}),i]})}),gre="_control_sqdq4_10",w7={control:gre,"enable-ligatures":"_enable-ligatures_sqdq4_62"},mre=f.forwardRef(function({className:t,enableLigatures:n,...r},i){const o=Z(w7.control,t,{[w7["enable-ligatures"]]:n});return h.jsx("input",{ref:i,...r,className:o})}),vre=f.forwardRef(function(t,n){return h.jsx(A_,{asChild:!0,children:h.jsx(mre,{ref:n,...t})})});function VT(e,t){return h.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",width:"1em",height:"1em",fill:"currentColor",viewBox:"0 0 24 24",ref:t,...e,children:h.jsx("path",{d:"M12 16q1.875 0 3.188-1.312Q16.5 13.375 16.5 11.5t-1.312-3.187T12 7 8.813 8.313 7.5 11.5t1.313 3.188T12 16m0-1.8q-1.125 0-1.912-.787A2.6 2.6 0 0 1 9.3 11.5q0-1.125.787-1.912A2.6 2.6 0 0 1 12 8.8q1.125 0 1.912.787.788.788.788 1.913t-.787 1.912A2.6 2.6 0 0 1 12 14.2m0 4.8q-3.475 0-6.35-1.837Q2.775 15.324 1.3 12.2a.8.8 0 0 1-.1-.312 3 3 0 0 1 0-.775.8.8 0 0 1 .1-.313q1.475-3.125 4.35-4.962Q8.525 4 12 4t6.35 1.838T22.7 10.8a.8.8 0 0 1 .1.313 3 3 0 0 1 0 .774.8.8 0 0 1-.1.313q-1.475 3.125-4.35 4.963Q15.475 19 12 19m0-2a9.54 9.54 0 0 0 5.188-1.488A9.77 9.77 0 0 0 20.8 11.5a9.77 9.77 0 0 0-3.613-4.012A9.54 9.54 0 0 0 12 6a9.55 9.55 0 0 0-5.187 1.487A9.77 9.77 0 0 0 3.2 11.5a9.77 9.77 0 0 0 3.613 4.012A9.54 9.54 0 0 0 12 17"})})}VT.displayName="VisibilityOnIcon";const yre=f.forwardRef(VT),_re="_controls_17lij_8",X0={controls:_re,"button-group":"_button-group_17lij_18"};function bre(e,t){switch(t){case 0:return e===0||e===3?1:e;case 1:return 2;case 4:return 0;case 2:return e===2?3:e;case 3:return e===2?0:e;case 5:return e===3?0:e}wre(t)}function wre(e){throw new Error(`Unreachable value: ${e}`)}const Sre=f.forwardRef(function({className:t,label:n,onSave:r,onCancel:i,onInput:o,onClearServerErrors:s,serverInvalid:a,saveButtonLabel:c,cancelButtonLabel:l,savedLabel:u,savingLabel:d,helpLabel:p,disabled:g,children:v,...m},_){const[y,w]=f.useReducer(bre,0),S=f.useRef(!1),[b,C]=f.useState(!1),E=y===1||y===2||b,x=f.useRef(void 0);f.useEffect(()=>(y===3&&(x.current=setTimeout(()=>{w(5),x.current=void 0},2e3)),()=>{x.current&&clearTimeout(x.current),x.current=void 0}),[y]);const I=f.useRef(null),L=f.useRef(null),R=f.useRef(null),k=f.useCallback(()=>{S.current||(S.current=!0,C(!0))},[b,C]),A=f.useCallback($=>{S.current&&($.currentTarget.contains($.relatedTarget)||(S.current=!1,C(!1)))},[b,C]),P=f.useCallback($=>{w(0),o?.($)},[w,o]),O=f.useCallback(async $=>{if($.preventDefault(),y!==0)try{w(1),L.current?.blur(),await r?.($),w(2)}catch{w(3)}},[r,y,x]),j=f.useCallback($=>{R.current?.blur(),i?.($),w(4)},[R,i]);return h.jsx(y1,{className:t,onSubmit:O,onReset:j,onFocus:k,onBlur:A,onClearServerErrors:s,ref:I,children:h.jsxs(Zne,{name:"input",serverInvalid:a,children:[h.jsx(fd,{children:n}),h.jsxs("div",{className:X0.controls,children:[h.jsx(vre,{ref:_,...m,onInput:P,disabled:g||y===2}),E&&h.jsxs("div",{className:X0["button-group"],children:[h.jsx(sn,{label:c,children:h.jsx(Bne,{asChild:!0,children:h.jsx(De,{type:"submit",kind:"primary",size:"sm",ref:L,disabled:y!==1,iconOnly:!0,Icon:N_})})}),h.jsx(sn,{label:l,children:h.jsx(De,{type:"reset",kind:"secondary",size:"sm",ref:R,className:X0.button,disabled:y===2,iconOnly:!0,Icon:Rf})})]})]}),y===2?h.jsx(fre,{children:d}):v,u&&y===3&&h.jsx(dre,{children:u}),p&&(y===0||y===1)&&h.jsx(Une,{children:$=>($===void 0||$.valid)&&!a&&h.jsx(Rp,{children:p})})]})})}),Cre="_content_1r8kr_8",Ere="_destructive_1r8kr_34",xre="_success_1r8kr_39",Z0={content:Cre,destructive:Ere,success:xre};function qT({className:e,size:t="large",destructive:n=!1,success:r=!1,children:i}){return h.jsx("div",{className:Z(Z0.content,e,{[Z0.destructive]:n,[Z0.success]:r}),"data-size":t,children:X.Children.only(i)})}const Vd={"nav-bar":"_nav-bar_z70g4_8","nav-bar-items":"_nav-bar-items_z70g4_14","nav-tab":"_nav-tab_z70g4_25","nav-item":"_nav-item_z70g4_47"},Ire=({children:e,className:t,role:n,"aria-label":r,...i})=>{const o=Z(t,Vd["nav-bar"]),s=n!=="tablist"?{role:"navigation","aria-label":r}:{role:"presentation"},a=n==="tablist"?{role:"tablist","aria-label":r}:{};return h.jsx("nav",{...s,...i,className:o,children:h.jsx("ul",{...a,className:Vd["nav-bar-items"],children:e})})},Rre=f.forwardRef(function({children:t,href:n,onClick:r,...i},o){return h.jsx("a",{href:n,onClick:r,className:Vd["nav-item"],...i,ref:o,children:t})}),Lre=f.forwardRef(function({children:t,disabled:n,onClick:r,...i},o){return h.jsx("button",{onClick:r,className:Vd["nav-item"],disabled:n,ref:o,...i,children:t})}),kre=e=>"href"in e&&!!e.href,Tre=f.forwardRef(function(t,n){const r=t["aria-controls"],o=!!r?{"aria-controls":r,role:"tab","aria-selected":t.active}:{"aria-current":t.active?!0:void 0},s={...t};delete s.active;let a;if(kre(s)){const c=n;a=h.jsx(Rre,{...s,...o,ref:c})}else{const c=n;a=h.jsx(Lre,{...s,...o,ref:c})}return h.jsx("li",{className:Vd["nav-tab"],"data-current":t.active?!0:void 0,role:"presentation",children:a})});function GT(e,t){return h.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",width:"1em",height:"1em",fill:"currentColor",viewBox:"0 0 24 24",ref:t,...e,children:h.jsx("path",{d:"M12 14.95q-.2 0-.375-.062a.9.9 0 0 1-.325-.213l-4.6-4.6a.95.95 0 0 1-.275-.7q0-.425.275-.7a.95.95 0 0 1 .7-.275q.425 0 .7.275l3.9 3.9 3.9-3.9a.95.95 0 0 1 .7-.275q.425 0 .7.275a.95.95 0 0 1 .275.7.95.95 0 0 1-.275.7l-4.6 4.6q-.15.15-.325.212a1.1 1.1 0 0 1-.375.063"})})}GT.displayName="ChevronDownIcon";const Are=f.forwardRef(GT);function KT(e,t){return h.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",width:"1em",height:"1em",fill:"currentColor",viewBox:"0 0 24 24",ref:t,...e,children:h.jsx("path",{d:"m13.3 17.3-4.6-4.6a.9.9 0 0 1-.213-.325A1.1 1.1 0 0 1 8.425 12q0-.2.062-.375A.9.9 0 0 1 8.7 11.3l4.6-4.6a.95.95 0 0 1 .7-.275q.425 0 .7.275a.95.95 0 0 1 .275.7.95.95 0 0 1-.275.7L10.8 12l3.9 3.9a.95.95 0 0 1 .275.7.95.95 0 0 1-.275.7.95.95 0 0 1-.7.275.95.95 0 0 1-.7-.275"})})}KT.displayName="ChevronLeftIcon";const Pre=f.forwardRef(KT),xe=e=>typeof e=="string",Lu=()=>{let e,t;const n=new Promise((r,i)=>{e=r,t=i});return n.resolve=e,n.reject=t,n},S7=e=>e==null?"":""+e,Mre=(e,t,n)=>{e.forEach(r=>{t[r]&&(n[r]=t[r])})},Nre=/###/g,C7=e=>e&&e.indexOf("###")>-1?e.replace(Nre,"."):e,E7=e=>!e||xe(e),hd=(e,t,n)=>{const r=xe(t)?t.split("."):t;let i=0;for(;i<r.length-1;){if(E7(e))return{};const o=C7(r[i]);!e[o]&&n&&(e[o]=new n),Object.prototype.hasOwnProperty.call(e,o)?e=e[o]:e={},++i}return E7(e)?{}:{obj:e,k:C7(r[i])}},x7=(e,t,n)=>{const{obj:r,k:i}=hd(e,t,Object);if(r!==void 0||t.length===1){r[i]=n;return}let o=t[t.length-1],s=t.slice(0,t.length-1),a=hd(e,s,Object);for(;a.obj===void 0&&s.length;)o=`${s[s.length-1]}.${o}`,s=s.slice(0,s.length-1),a=hd(e,s,Object),a?.obj&&typeof a.obj[`${a.k}.${o}`]<"u"&&(a.obj=void 0);a.obj[`${a.k}.${o}`]=n},$re=(e,t,n,r)=>{const{obj:i,k:o}=hd(e,t,Object);i[o]=i[o]||[],i[o].push(n)},_1=(e,t)=>{const{obj:n,k:r}=hd(e,t);if(n&&Object.prototype.hasOwnProperty.call(n,r))return n[r]},Ore=(e,t,n)=>{const r=_1(e,n);return r!==void 0?r:_1(t,n)},WT=(e,t,n)=>{for(const r in t)r!=="__proto__"&&r!=="constructor"&&(r in e?xe(e[r])||e[r]instanceof String||xe(t[r])||t[r]instanceof String?n&&(e[r]=t[r]):WT(e[r],t[r],n):e[r]=t[r]);return e},Ac=e=>e.replace(/[\-\[\]\/\{\}\(\)\*\+\?\.\\\^\$\|]/g,"\\$&");var jre={"&":"&amp;","<":"&lt;",">":"&gt;",'"':"&quot;","'":"&#39;","/":"&#x2F;"};const Dre=e=>xe(e)?e.replace(/[&<>"'\/]/g,t=>jre[t]):e;class Fre{constructor(t){this.capacity=t,this.regExpMap=new Map,this.regExpQueue=[]}getRegExp(t){const n=this.regExpMap.get(t);if(n!==void 0)return n;const r=new RegExp(t);return this.regExpQueue.length===this.capacity&&this.regExpMap.delete(this.regExpQueue.shift()),this.regExpMap.set(t,r),this.regExpQueue.push(t),r}}const Hre=[" ",",","?","!",";"],Ure=new Fre(20),Bre=(e,t,n)=>{t=t||"",n=n||"";const r=Hre.filter(s=>t.indexOf(s)<0&&n.indexOf(s)<0);if(r.length===0)return!0;const i=Ure.getRegExp(`(${r.map(s=>s==="?"?"\\?":s).join("|")})`);let o=!i.test(e);if(!o){const s=e.indexOf(n);s>0&&!i.test(e.substring(0,s))&&(o=!0)}return o},Sy=(e,t,n=".")=>{if(!e)return;if(e[t])return Object.prototype.hasOwnProperty.call(e,t)?e[t]:void 0;const r=t.split(n);let i=e;for(let o=0;o<r.length;){if(!i||typeof i!="object")return;let s,a="";for(let c=o;c<r.length;++c)if(c!==o&&(a+=n),a+=r[c],s=i[a],s!==void 0){if(["string","number","boolean"].indexOf(typeof s)>-1&&c<r.length-1)continue;o+=c-o+1;break}i=s}return i},qd=e=>e?.replace("_","-"),Vre={type:"logger",log(e){this.output("log",e)},warn(e){this.output("warn",e)},error(e){this.output("error",e)},output(e,t){console?.[e]?.apply?.(console,t)}};class b1{constructor(t,n={}){this.init(t,n)}init(t,n={}){this.prefix=n.prefix||"i18next:",this.logger=t||Vre,this.options=n,this.debug=n.debug}log(...t){return this.forward(t,"log","",!0)}warn(...t){return this.forward(t,"warn","",!0)}error(...t){return this.forward(t,"error","")}deprecate(...t){return this.forward(t,"warn","WARNING DEPRECATED: ",!0)}forward(t,n,r,i){return i&&!this.debug?null:(xe(t[0])&&(t[0]=`${r}${this.prefix} ${t[0]}`),this.logger[n](t))}create(t){return new b1(this.logger,{prefix:`${this.prefix}:${t}:`,...this.options})}clone(t){return t=t||this.options,t.prefix=t.prefix||this.prefix,new b1(this.logger,t)}}var eo=new b1;class Gg{constructor(){this.observers={}}on(t,n){return t.split(" ").forEach(r=>{this.observers[r]||(this.observers[r]=new Map);const i=this.observers[r].get(n)||0;this.observers[r].set(n,i+1)}),this}off(t,n){if(this.observers[t]){if(!n){delete this.observers[t];return}this.observers[t].delete(n)}}emit(t,...n){this.observers[t]&&Array.from(this.observers[t].entries()).forEach(([i,o])=>{for(let s=0;s<o;s++)i(...n)}),this.observers["*"]&&Array.from(this.observers["*"].entries()).forEach(([i,o])=>{for(let s=0;s<o;s++)i.apply(i,[t,...n])})}}class I7 extends Gg{constructor(t,n={ns:["translation"],defaultNS:"translation"}){super(),this.data=t||{},this.options=n,this.options.keySeparator===void 0&&(this.options.keySeparator="."),this.options.ignoreJSONStructure===void 0&&(this.options.ignoreJSONStructure=!0)}addNamespaces(t){this.options.ns.indexOf(t)<0&&this.options.ns.push(t)}removeNamespaces(t){const n=this.options.ns.indexOf(t);n>-1&&this.options.ns.splice(n,1)}getResource(t,n,r,i={}){const o=i.keySeparator!==void 0?i.keySeparator:this.options.keySeparator,s=i.ignoreJSONStructure!==void 0?i.ignoreJSONStructure:this.options.ignoreJSONStructure;let a;t.indexOf(".")>-1?a=t.split("."):(a=[t,n],r&&(Array.isArray(r)?a.push(...r):xe(r)&&o?a.push(...r.split(o)):a.push(r)));const c=_1(this.data,a);return!c&&!n&&!r&&t.indexOf(".")>-1&&(t=a[0],n=a[1],r=a.slice(2).join(".")),c||!s||!xe(r)?c:Sy(this.data?.[t]?.[n],r,o)}addResource(t,n,r,i,o={silent:!1}){const s=o.keySeparator!==void 0?o.keySeparator:this.options.keySeparator;let a=[t,n];r&&(a=a.concat(s?r.split(s):r)),t.indexOf(".")>-1&&(a=t.split("."),i=n,n=a[1]),this.addNamespaces(n),x7(this.data,a,i),o.silent||this.emit("added",t,n,r,i)}addResources(t,n,r,i={silent:!1}){for(const o in r)(xe(r[o])||Array.isArray(r[o]))&&this.addResource(t,n,o,r[o],{silent:!0});i.silent||this.emit("added",t,n,r)}addResourceBundle(t,n,r,i,o,s={silent:!1,skipCopy:!1}){let a=[t,n];t.indexOf(".")>-1&&(a=t.split("."),i=r,r=n,n=a[1]),this.addNamespaces(n);let c=_1(this.data,a)||{};s.skipCopy||(r=JSON.parse(JSON.stringify(r))),i?WT(c,r,o):c={...c,...r},x7(this.data,a,c),s.silent||this.emit("added",t,n,r)}removeResourceBundle(t,n){this.hasResourceBundle(t,n)&&delete this.data[t][n],this.removeNamespaces(n),this.emit("removed",t,n)}hasResourceBundle(t,n){return this.getResource(t,n)!==void 0}getResourceBundle(t,n){return n||(n=this.options.defaultNS),this.getResource(t,n)}getDataByLanguage(t){return this.data[t]}hasLanguageSomeTranslations(t){const n=this.getDataByLanguage(t);return!!(n&&Object.keys(n)||[]).find(i=>n[i]&&Object.keys(n[i]).length>0)}toJSON(){return this.data}}var zT={processors:{},addPostProcessor(e){this.processors[e.name]=e},handle(e,t,n,r,i){return e.forEach(o=>{t=this.processors[o]?.process(t,n,r,i)??t}),t}};const YT=Symbol("i18next/PATH_KEY");function qre(){const e=[],t=Object.create(null);let n;return t.get=(r,i)=>(n?.revoke?.(),i===YT?e:(e.push(i),n=Proxy.revocable(r,t),n.proxy)),Proxy.revocable(Object.create(null),t).proxy}function w1(e,t){const{[YT]:n}=e(qre());return n.join(t?.keySeparator??".")}const R7={},Q0=e=>!xe(e)&&typeof e!="boolean"&&typeof e!="number";class S1 extends Gg{constructor(t,n={}){super(),Mre(["resourceStore","languageUtils","pluralResolver","interpolator","backendConnector","i18nFormat","utils"],t,this),this.options=n,this.options.keySeparator===void 0&&(this.options.keySeparator="."),this.logger=eo.create("translator")}changeLanguage(t){t&&(this.language=t)}exists(t,n={interpolation:{}}){const r={...n};if(t==null)return!1;const i=this.resolve(t,r);if(i?.res===void 0)return!1;const o=Q0(i.res);return!(r.returnObjects===!1&&o)}extractFromKey(t,n){let r=n.nsSeparator!==void 0?n.nsSeparator:this.options.nsSeparator;r===void 0&&(r=":");const i=n.keySeparator!==void 0?n.keySeparator:this.options.keySeparator;let o=n.ns||this.options.defaultNS||[];const s=r&&t.indexOf(r)>-1,a=!this.options.userDefinedKeySeparator&&!n.keySeparator&&!this.options.userDefinedNsSeparator&&!n.nsSeparator&&!Bre(t,r,i);if(s&&!a){const c=t.match(this.interpolator.nestingRegexp);if(c&&c.length>0)return{key:t,namespaces:xe(o)?[o]:o};const l=t.split(r);(r!==i||r===i&&this.options.ns.indexOf(l[0])>-1)&&(o=l.shift()),t=l.join(i)}return{key:t,namespaces:xe(o)?[o]:o}}translate(t,n,r){let i=typeof n=="object"?{...n}:n;if(typeof i!="object"&&this.options.overloadTranslationOptionHandler&&(i=this.options.overloadTranslationOptionHandler(arguments)),typeof i=="object"&&(i={...i}),i||(i={}),t==null)return"";typeof t=="function"&&(t=w1(t,{...this.options,...i})),Array.isArray(t)||(t=[String(t)]);const o=i.returnDetails!==void 0?i.returnDetails:this.options.returnDetails,s=i.keySeparator!==void 0?i.keySeparator:this.options.keySeparator,{key:a,namespaces:c}=this.extractFromKey(t[t.length-1],i),l=c[c.length-1];let u=i.nsSeparator!==void 0?i.nsSeparator:this.options.nsSeparator;u===void 0&&(u=":");const d=i.lng||this.language,p=i.appendNamespaceToCIMode||this.options.appendNamespaceToCIMode;if(d?.toLowerCase()==="cimode")return p?o?{res:`${l}${u}${a}`,usedKey:a,exactUsedKey:a,usedLng:d,usedNS:l,usedParams:this.getUsedParamsDetails(i)}:`${l}${u}${a}`:o?{res:a,usedKey:a,exactUsedKey:a,usedLng:d,usedNS:l,usedParams:this.getUsedParamsDetails(i)}:a;const g=this.resolve(t,i);let v=g?.res;const m=g?.usedKey||a,_=g?.exactUsedKey||a,y=["[object Number]","[object Function]","[object RegExp]"],w=i.joinArrays!==void 0?i.joinArrays:this.options.joinArrays,S=!this.i18nFormat||this.i18nFormat.handleAsObject,b=i.count!==void 0&&!xe(i.count),C=S1.hasDefaultValue(i),E=b?this.pluralResolver.getSuffix(d,i.count,i):"",x=i.ordinal&&b?this.pluralResolver.getSuffix(d,i.count,{ordinal:!1}):"",I=b&&!i.ordinal&&i.count===0,L=I&&i[`defaultValue${this.options.pluralSeparator}zero`]||i[`defaultValue${E}`]||i[`defaultValue${x}`]||i.defaultValue;let R=v;S&&!v&&C&&(R=L);const k=Q0(R),A=Object.prototype.toString.apply(R);if(S&&R&&k&&y.indexOf(A)<0&&!(xe(w)&&Array.isArray(R))){if(!i.returnObjects&&!this.options.returnObjects){this.options.returnedObjectHandler||this.logger.warn("accessing an object - but returnObjects options is not enabled!");const P=this.options.returnedObjectHandler?this.options.returnedObjectHandler(m,R,{...i,ns:c}):`key '${a} (${this.language})' returned an object instead of string.`;return o?(g.res=P,g.usedParams=this.getUsedParamsDetails(i),g):P}if(s){const P=Array.isArray(R),O=P?[]:{},j=P?_:m;for(const $ in R)if(Object.prototype.hasOwnProperty.call(R,$)){const T=`${j}${s}${$}`;C&&!v?O[$]=this.translate(T,{...i,defaultValue:Q0(L)?L[$]:void 0,joinArrays:!1,ns:c}):O[$]=this.translate(T,{...i,joinArrays:!1,ns:c}),O[$]===T&&(O[$]=R[$])}v=O}}else if(S&&xe(w)&&Array.isArray(v))v=v.join(w),v&&(v=this.extendTranslation(v,t,i,r));else{let P=!1,O=!1;!this.isValidLookup(v)&&C&&(P=!0,v=L),this.isValidLookup(v)||(O=!0,v=a);const $=(i.missingKeyNoValueFallbackToKey||this.options.missingKeyNoValueFallbackToKey)&&O?void 0:v,T=C&&L!==v&&this.options.updateMissing;if(O||P||T){if(this.logger.log(T?"updateKey":"missingKey",d,l,a,T?L:v),s){const F=this.resolve(a,{...i,keySeparator:!1});F&&F.res&&this.logger.warn("Seems the loaded translations were in flat JSON format instead of nested. Either set keySeparator: false on init or make sure your translations are published in nested format.")}let N=[];const M=this.languageUtils.getFallbackCodes(this.options.fallbackLng,i.lng||this.language);if(this.options.saveMissingTo==="fallback"&&M&&M[0])for(let F=0;F<M.length;F++)N.push(M[F]);else this.options.saveMissingTo==="all"?N=this.languageUtils.toResolveHierarchy(i.lng||this.language):N.push(i.lng||this.language);const B=(F,K,te)=>{const oe=C&&te!==v?te:$;this.options.missingKeyHandler?this.options.missingKeyHandler(F,l,K,oe,T,i):this.backendConnector?.saveMissing&&this.backendConnector.saveMissing(F,l,K,oe,T,i),this.emit("missingKey",F,l,K,v)};this.options.saveMissing&&(this.options.saveMissingPlurals&&b?N.forEach(F=>{const K=this.pluralResolver.getSuffixes(F,i);I&&i[`defaultValue${this.options.pluralSeparator}zero`]&&K.indexOf(`${this.options.pluralSeparator}zero`)<0&&K.push(`${this.options.pluralSeparator}zero`),K.forEach(te=>{B([F],a+te,i[`defaultValue${te}`]||L)})}):B(N,a,L))}v=this.extendTranslation(v,t,i,g,r),O&&v===a&&this.options.appendNamespaceToMissingKey&&(v=`${l}${u}${a}`),(O||P)&&this.options.parseMissingKeyHandler&&(v=this.options.parseMissingKeyHandler(this.options.appendNamespaceToMissingKey?`${l}${u}${a}`:a,P?v:void 0,i))}return o?(g.res=v,g.usedParams=this.getUsedParamsDetails(i),g):v}extendTranslation(t,n,r,i,o){if(this.i18nFormat?.parse)t=this.i18nFormat.parse(t,{...this.options.interpolation.defaultVariables,...r},r.lng||this.language||i.usedLng,i.usedNS,i.usedKey,{resolved:i});else if(!r.skipInterpolation){r.interpolation&&this.interpolator.init({...r,interpolation:{...this.options.interpolation,...r.interpolation}});const c=xe(t)&&(r?.interpolation?.skipOnVariables!==void 0?r.interpolation.skipOnVariables:this.options.interpolation.skipOnVariables);let l;if(c){const d=t.match(this.interpolator.nestingRegexp);l=d&&d.length}let u=r.replace&&!xe(r.replace)?r.replace:r;if(this.options.interpolation.defaultVariables&&(u={...this.options.interpolation.defaultVariables,...u}),t=this.interpolator.interpolate(t,u,r.lng||this.language||i.usedLng,r),c){const d=t.match(this.interpolator.nestingRegexp),p=d&&d.length;l<p&&(r.nest=!1)}!r.lng&&i&&i.res&&(r.lng=this.language||i.usedLng),r.nest!==!1&&(t=this.interpolator.nest(t,(...d)=>o?.[0]===d[0]&&!r.context?(this.logger.warn(`It seems you are nesting recursively key: ${d[0]} in key: ${n[0]}`),null):this.translate(...d,n),r)),r.interpolation&&this.interpolator.reset()}const s=r.postProcess||this.options.postProcess,a=xe(s)?[s]:s;return t!=null&&a?.length&&r.applyPostProcessor!==!1&&(t=zT.handle(a,t,n,this.options&&this.options.postProcessPassResolved?{i18nResolved:{...i,usedParams:this.getUsedParamsDetails(r)},...r}:r,this)),t}resolve(t,n={}){let r,i,o,s,a;return xe(t)&&(t=[t]),t.forEach(c=>{if(this.isValidLookup(r))return;const l=this.extractFromKey(c,n),u=l.key;i=u;let d=l.namespaces;this.options.fallbackNS&&(d=d.concat(this.options.fallbackNS));const p=n.count!==void 0&&!xe(n.count),g=p&&!n.ordinal&&n.count===0,v=n.context!==void 0&&(xe(n.context)||typeof n.context=="number")&&n.context!=="",m=n.lngs?n.lngs:this.languageUtils.toResolveHierarchy(n.lng||this.language,n.fallbackLng);d.forEach(_=>{this.isValidLookup(r)||(a=_,!R7[`${m[0]}-${_}`]&&this.utils?.hasLoadedNamespace&&!this.utils?.hasLoadedNamespace(a)&&(R7[`${m[0]}-${_}`]=!0,this.logger.warn(`key "${i}" for languages "${m.join(", ")}" won't get resolved as namespace "${a}" was not yet loaded`,"This means something IS WRONG in your setup. You access the t function before i18next.init / i18next.loadNamespace / i18next.changeLanguage was done. Wait for the callback or Promise to resolve before accessing it!!!")),m.forEach(y=>{if(this.isValidLookup(r))return;s=y;const w=[u];if(this.i18nFormat?.addLookupKeys)this.i18nFormat.addLookupKeys(w,u,y,_,n);else{let b;p&&(b=this.pluralResolver.getSuffix(y,n.count,n));const C=`${this.options.pluralSeparator}zero`,E=`${this.options.pluralSeparator}ordinal${this.options.pluralSeparator}`;if(p&&(n.ordinal&&b.indexOf(E)===0&&w.push(u+b.replace(E,this.options.pluralSeparator)),w.push(u+b),g&&w.push(u+C)),v){const x=`${u}${this.options.contextSeparator||"_"}${n.context}`;w.push(x),p&&(n.ordinal&&b.indexOf(E)===0&&w.push(x+b.replace(E,this.options.pluralSeparator)),w.push(x+b),g&&w.push(x+C))}}let S;for(;S=w.pop();)this.isValidLookup(r)||(o=S,r=this.getResource(y,_,S,n))}))})}),{res:r,usedKey:i,exactUsedKey:o,usedLng:s,usedNS:a}}isValidLookup(t){return t!==void 0&&!(!this.options.returnNull&&t===null)&&!(!this.options.returnEmptyString&&t==="")}getResource(t,n,r,i={}){return this.i18nFormat?.getResource?this.i18nFormat.getResource(t,n,r,i):this.resourceStore.getResource(t,n,r,i)}getUsedParamsDetails(t={}){const n=["defaultValue","ordinal","context","replace","lng","lngs","fallbackLng","ns","keySeparator","nsSeparator","returnObjects","returnDetails","joinArrays","postProcess","interpolation"],r=t.replace&&!xe(t.replace);let i=r?t.replace:t;if(r&&typeof t.count<"u"&&(i.count=t.count),this.options.interpolation.defaultVariables&&(i={...this.options.interpolation.defaultVariables,...i}),!r){i={...i};for(const o of n)delete i[o]}return i}static hasDefaultValue(t){const n="defaultValue";for(const r in t)if(Object.prototype.hasOwnProperty.call(t,r)&&n===r.substring(0,n.length)&&t[r]!==void 0)return!0;return!1}}class L7{constructor(t){this.options=t,this.supportedLngs=this.options.supportedLngs||!1,this.logger=eo.create("languageUtils")}getScriptPartFromCode(t){if(t=qd(t),!t||t.indexOf("-")<0)return null;const n=t.split("-");return n.length===2||(n.pop(),n[n.length-1].toLowerCase()==="x")?null:this.formatLanguageCode(n.join("-"))}getLanguagePartFromCode(t){if(t=qd(t),!t||t.indexOf("-")<0)return t;const n=t.split("-");return this.formatLanguageCode(n[0])}formatLanguageCode(t){if(xe(t)&&t.indexOf("-")>-1){let n;try{n=Intl.getCanonicalLocales(t)[0]}catch{}return n&&this.options.lowerCaseLng&&(n=n.toLowerCase()),n||(this.options.lowerCaseLng?t.toLowerCase():t)}return this.options.cleanCode||this.options.lowerCaseLng?t.toLowerCase():t}isSupportedCode(t){return(this.options.load==="languageOnly"||this.options.nonExplicitSupportedLngs)&&(t=this.getLanguagePartFromCode(t)),!this.supportedLngs||!this.supportedLngs.length||this.supportedLngs.indexOf(t)>-1}getBestMatchFromCodes(t){if(!t)return null;let n;return t.forEach(r=>{if(n)return;const i=this.formatLanguageCode(r);(!this.options.supportedLngs||this.isSupportedCode(i))&&(n=i)}),!n&&this.options.supportedLngs&&t.forEach(r=>{if(n)return;const i=this.getScriptPartFromCode(r);if(this.isSupportedCode(i))return n=i;const o=this.getLanguagePartFromCode(r);if(this.isSupportedCode(o))return n=o;n=this.options.supportedLngs.find(s=>{if(s===o)return s;if(!(s.indexOf("-")<0&&o.indexOf("-")<0)&&(s.indexOf("-")>0&&o.indexOf("-")<0&&s.substring(0,s.indexOf("-"))===o||s.indexOf(o)===0&&o.length>1))return s})}),n||(n=this.getFallbackCodes(this.options.fallbackLng)[0]),n}getFallbackCodes(t,n){if(!t)return[];if(typeof t=="function"&&(t=t(n)),xe(t)&&(t=[t]),Array.isArray(t))return t;if(!n)return t.default||[];let r=t[n];return r||(r=t[this.getScriptPartFromCode(n)]),r||(r=t[this.formatLanguageCode(n)]),r||(r=t[this.getLanguagePartFromCode(n)]),r||(r=t.default),r||[]}toResolveHierarchy(t,n){const r=this.getFallbackCodes((n===!1?[]:n)||this.options.fallbackLng||[],t),i=[],o=s=>{s&&(this.isSupportedCode(s)?i.push(s):this.logger.warn(`rejecting language code not found in supportedLngs: ${s}`))};return xe(t)&&(t.indexOf("-")>-1||t.indexOf("_")>-1)?(this.options.load!=="languageOnly"&&o(this.formatLanguageCode(t)),this.options.load!=="languageOnly"&&this.options.load!=="currentOnly"&&o(this.getScriptPartFromCode(t)),this.options.load!=="currentOnly"&&o(this.getLanguagePartFromCode(t))):xe(t)&&o(this.formatLanguageCode(t)),r.forEach(s=>{i.indexOf(s)<0&&o(this.formatLanguageCode(s))}),i}}const k7={zero:0,one:1,two:2,few:3,many:4,other:5},T7={select:e=>e===1?"one":"other",resolvedOptions:()=>({pluralCategories:["one","other"]})};class Gre{constructor(t,n={}){this.languageUtils=t,this.options=n,this.logger=eo.create("pluralResolver"),this.pluralRulesCache={}}addRule(t,n){this.rules[t]=n}clearCache(){this.pluralRulesCache={}}getRule(t,n={}){const r=qd(t==="dev"?"en":t),i=n.ordinal?"ordinal":"cardinal",o=JSON.stringify({cleanedCode:r,type:i});if(o in this.pluralRulesCache)return this.pluralRulesCache[o];let s;try{s=new Intl.PluralRules(r,{type:i})}catch{if(!Intl)return this.logger.error("No Intl support, please use an Intl polyfill!"),T7;if(!t.match(/-|_/))return T7;const c=this.languageUtils.getLanguagePartFromCode(t);s=this.getRule(c,n)}return this.pluralRulesCache[o]=s,s}needsPlural(t,n={}){let r=this.getRule(t,n);return r||(r=this.getRule("dev",n)),r?.resolvedOptions().pluralCategories.length>1}getPluralFormsOfKey(t,n,r={}){return this.getSuffixes(t,r).map(i=>`${n}${i}`)}getSuffixes(t,n={}){let r=this.getRule(t,n);return r||(r=this.getRule("dev",n)),r?r.resolvedOptions().pluralCategories.sort((i,o)=>k7[i]-k7[o]).map(i=>`${this.options.prepend}${n.ordinal?`ordinal${this.options.prepend}`:""}${i}`):[]}getSuffix(t,n,r={}){const i=this.getRule(t,r);return i?`${this.options.prepend}${r.ordinal?`ordinal${this.options.prepend}`:""}${i.select(n)}`:(this.logger.warn(`no plural rule found for: ${t}`),this.getSuffix("dev",n,r))}}const A7=(e,t,n,r=".",i=!0)=>{let o=Ore(e,t,n);return!o&&i&&xe(n)&&(o=Sy(e,n,r),o===void 0&&(o=Sy(t,n,r))),o},J0=e=>e.replace(/\$/g,"$$$$");class P7{constructor(t={}){this.logger=eo.create("interpolator"),this.options=t,this.format=t?.interpolation?.format||(n=>n),this.init(t)}init(t={}){t.interpolation||(t.interpolation={escapeValue:!0});const{escape:n,escapeValue:r,useRawValueToEscape:i,prefix:o,prefixEscaped:s,suffix:a,suffixEscaped:c,formatSeparator:l,unescapeSuffix:u,unescapePrefix:d,nestingPrefix:p,nestingPrefixEscaped:g,nestingSuffix:v,nestingSuffixEscaped:m,nestingOptionsSeparator:_,maxReplaces:y,alwaysFormat:w}=t.interpolation;this.escape=n!==void 0?n:Dre,this.escapeValue=r!==void 0?r:!0,this.useRawValueToEscape=i!==void 0?i:!1,this.prefix=o?Ac(o):s||"{{",this.suffix=a?Ac(a):c||"}}",this.formatSeparator=l||",",this.unescapePrefix=u?"":d||"-",this.unescapeSuffix=this.unescapePrefix?"":u||"",this.nestingPrefix=p?Ac(p):g||Ac("$t("),this.nestingSuffix=v?Ac(v):m||Ac(")"),this.nestingOptionsSeparator=_||",",this.maxReplaces=y||1e3,this.alwaysFormat=w!==void 0?w:!1,this.resetRegExp()}reset(){this.options&&this.init(this.options)}resetRegExp(){const t=(n,r)=>n?.source===r?(n.lastIndex=0,n):new RegExp(r,"g");this.regexp=t(this.regexp,`${this.prefix}(.+?)${this.suffix}`),this.regexpUnescape=t(this.regexpUnescape,`${this.prefix}${this.unescapePrefix}(.+?)${this.unescapeSuffix}${this.suffix}`),this.nestingRegexp=t(this.nestingRegexp,`${this.nestingPrefix}((?:[^()"']+|"[^"]*"|'[^']*'|\\((?:[^()]|"[^"]*"|'[^']*')*\\))*?)${this.nestingSuffix}`)}interpolate(t,n,r,i){let o,s,a;const c=this.options&&this.options.interpolation&&this.options.interpolation.defaultVariables||{},l=g=>{if(g.indexOf(this.formatSeparator)<0){const y=A7(n,c,g,this.options.keySeparator,this.options.ignoreJSONStructure);return this.alwaysFormat?this.format(y,void 0,r,{...i,...n,interpolationkey:g}):y}const v=g.split(this.formatSeparator),m=v.shift().trim(),_=v.join(this.formatSeparator).trim();return this.format(A7(n,c,m,this.options.keySeparator,this.options.ignoreJSONStructure),_,r,{...i,...n,interpolationkey:m})};this.resetRegExp();const u=i?.missingInterpolationHandler||this.options.missingInterpolationHandler,d=i?.interpolation?.skipOnVariables!==void 0?i.interpolation.skipOnVariables:this.options.interpolation.skipOnVariables;return[{regex:this.regexpUnescape,safeValue:g=>J0(g)},{regex:this.regexp,safeValue:g=>this.escapeValue?J0(this.escape(g)):J0(g)}].forEach(g=>{for(a=0;o=g.regex.exec(t);){const v=o[1].trim();if(s=l(v),s===void 0)if(typeof u=="function"){const _=u(t,o,i);s=xe(_)?_:""}else if(i&&Object.prototype.hasOwnProperty.call(i,v))s="";else if(d){s=o[0];continue}else this.logger.warn(`missed to pass in variable ${v} for interpolating ${t}`),s="";else!xe(s)&&!this.useRawValueToEscape&&(s=S7(s));const m=g.safeValue(s);if(t=t.replace(o[0],m),d?(g.regex.lastIndex+=s.length,g.regex.lastIndex-=o[0].length):g.regex.lastIndex=0,a++,a>=this.maxReplaces)break}}),t}nest(t,n,r={}){let i,o,s;const a=(c,l)=>{const u=this.nestingOptionsSeparator;if(c.indexOf(u)<0)return c;const d=c.split(new RegExp(`${u}[ ]*{`));let p=`{${d[1]}`;c=d[0],p=this.interpolate(p,s);const g=p.match(/'/g),v=p.match(/"/g);((g?.length??0)%2===0&&!v||v.length%2!==0)&&(p=p.replace(/'/g,'"'));try{s=JSON.parse(p),l&&(s={...l,...s})}catch(m){return this.logger.warn(`failed parsing options string in nesting for key ${c}`,m),`${c}${u}${p}`}return s.defaultValue&&s.defaultValue.indexOf(this.prefix)>-1&&delete s.defaultValue,c};for(;i=this.nestingRegexp.exec(t);){let c=[];s={...r},s=s.replace&&!xe(s.replace)?s.replace:s,s.applyPostProcessor=!1,delete s.defaultValue;const l=/{.*}/.test(i[1])?i[1].lastIndexOf("}")+1:i[1].indexOf(this.formatSeparator);if(l!==-1&&(c=i[1].slice(l).split(this.formatSeparator).map(u=>u.trim()).filter(Boolean),i[1]=i[1].slice(0,l)),o=n(a.call(this,i[1].trim(),s),s),o&&i[0]===t&&!xe(o))return o;xe(o)||(o=S7(o)),o||(this.logger.warn(`missed to resolve ${i[1]} for nesting ${t}`),o=""),c.length&&(o=c.reduce((u,d)=>this.format(u,d,r.lng,{...r,interpolationkey:i[1].trim()}),o.trim())),t=t.replace(i[0],o),this.regexp.lastIndex=0}return t}}const Kre=e=>{let t=e.toLowerCase().trim();const n={};if(e.indexOf("(")>-1){const r=e.split("(");t=r[0].toLowerCase().trim();const i=r[1].substring(0,r[1].length-1);t==="currency"&&i.indexOf(":")<0?n.currency||(n.currency=i.trim()):t==="relativetime"&&i.indexOf(":")<0?n.range||(n.range=i.trim()):i.split(";").forEach(s=>{if(s){const[a,...c]=s.split(":"),l=c.join(":").trim().replace(/^'+|'+$/g,""),u=a.trim();n[u]||(n[u]=l),l==="false"&&(n[u]=!1),l==="true"&&(n[u]=!0),isNaN(l)||(n[u]=parseInt(l,10))}})}return{formatName:t,formatOptions:n}},M7=e=>{const t={};return(n,r,i)=>{let o=i;i&&i.interpolationkey&&i.formatParams&&i.formatParams[i.interpolationkey]&&i[i.interpolationkey]&&(o={...o,[i.interpolationkey]:void 0});const s=r+JSON.stringify(o);let a=t[s];return a||(a=e(qd(r),i),t[s]=a),a(n)}},Wre=e=>(t,n,r)=>e(qd(n),r)(t);class zre{constructor(t={}){this.logger=eo.create("formatter"),this.options=t,this.init(t)}init(t,n={interpolation:{}}){this.formatSeparator=n.interpolation.formatSeparator||",";const r=n.cacheInBuiltFormats?M7:Wre;this.formats={number:r((i,o)=>{const s=new Intl.NumberFormat(i,{...o});return a=>s.format(a)}),currency:r((i,o)=>{const s=new Intl.NumberFormat(i,{...o,style:"currency"});return a=>s.format(a)}),datetime:r((i,o)=>{const s=new Intl.DateTimeFormat(i,{...o});return a=>s.format(a)}),relativetime:r((i,o)=>{const s=new Intl.RelativeTimeFormat(i,{...o});return a=>s.format(a,o.range||"day")}),list:r((i,o)=>{const s=new Intl.ListFormat(i,{...o});return a=>s.format(a)})}}add(t,n){this.formats[t.toLowerCase().trim()]=n}addCached(t,n){this.formats[t.toLowerCase().trim()]=M7(n)}format(t,n,r,i={}){const o=n.split(this.formatSeparator);if(o.length>1&&o[0].indexOf("(")>1&&o[0].indexOf(")")<0&&o.find(a=>a.indexOf(")")>-1)){const a=o.findIndex(c=>c.indexOf(")")>-1);o[0]=[o[0],...o.splice(1,a)].join(this.formatSeparator)}return o.reduce((a,c)=>{const{formatName:l,formatOptions:u}=Kre(c);if(this.formats[l]){let d=a;try{const p=i?.formatParams?.[i.interpolationkey]||{},g=p.locale||p.lng||i.locale||i.lng||r;d=this.formats[l](a,g,{...u,...i,...p})}catch(p){this.logger.warn(p)}return d}else this.logger.warn(`there was no format function for ${l}`);return a},t)}}const Yre=(e,t)=>{e.pending[t]!==void 0&&(delete e.pending[t],e.pendingCount--)};class Xre extends Gg{constructor(t,n,r,i={}){super(),this.backend=t,this.store=n,this.services=r,this.languageUtils=r.languageUtils,this.options=i,this.logger=eo.create("backendConnector"),this.waitingReads=[],this.maxParallelReads=i.maxParallelReads||10,this.readingCalls=0,this.maxRetries=i.maxRetries>=0?i.maxRetries:5,this.retryTimeout=i.retryTimeout>=1?i.retryTimeout:350,this.state={},this.queue=[],this.backend?.init?.(r,i.backend,i)}queueLoad(t,n,r,i){const o={},s={},a={},c={};return t.forEach(l=>{let u=!0;n.forEach(d=>{const p=`${l}|${d}`;!r.reload&&this.store.hasResourceBundle(l,d)?this.state[p]=2:this.state[p]<0||(this.state[p]===1?s[p]===void 0&&(s[p]=!0):(this.state[p]=1,u=!1,s[p]===void 0&&(s[p]=!0),o[p]===void 0&&(o[p]=!0),c[d]===void 0&&(c[d]=!0)))}),u||(a[l]=!0)}),(Object.keys(o).length||Object.keys(s).length)&&this.queue.push({pending:s,pendingCount:Object.keys(s).length,loaded:{},errors:[],callback:i}),{toLoad:Object.keys(o),pending:Object.keys(s),toLoadLanguages:Object.keys(a),toLoadNamespaces:Object.keys(c)}}loaded(t,n,r){const i=t.split("|"),o=i[0],s=i[1];n&&this.emit("failedLoading",o,s,n),!n&&r&&this.store.addResourceBundle(o,s,r,void 0,void 0,{skipCopy:!0}),this.state[t]=n?-1:2,n&&r&&(this.state[t]=0);const a={};this.queue.forEach(c=>{$re(c.loaded,[o],s),Yre(c,t),n&&c.errors.push(n),c.pendingCount===0&&!c.done&&(Object.keys(c.loaded).forEach(l=>{a[l]||(a[l]={});const u=c.loaded[l];u.length&&u.forEach(d=>{a[l][d]===void 0&&(a[l][d]=!0)})}),c.done=!0,c.errors.length?c.callback(c.errors):c.callback())}),this.emit("loaded",a),this.queue=this.queue.filter(c=>!c.done)}read(t,n,r,i=0,o=this.retryTimeout,s){if(!t.length)return s(null,{});if(this.readingCalls>=this.maxParallelReads){this.waitingReads.push({lng:t,ns:n,fcName:r,tried:i,wait:o,callback:s});return}this.readingCalls++;const a=(l,u)=>{if(this.readingCalls--,this.waitingReads.length>0){const d=this.waitingReads.shift();this.read(d.lng,d.ns,d.fcName,d.tried,d.wait,d.callback)}if(l&&u&&i<this.maxRetries){setTimeout(()=>{this.read.call(this,t,n,r,i+1,o*2,s)},o);return}s(l,u)},c=this.backend[r].bind(this.backend);if(c.length===2){try{const l=c(t,n);l&&typeof l.then=="function"?l.then(u=>a(null,u)).catch(a):a(null,l)}catch(l){a(l)}return}return c(t,n,a)}prepareLoading(t,n,r={},i){if(!this.backend)return this.logger.warn("No backend was added via i18next.use. Will not load resources."),i&&i();xe(t)&&(t=this.languageUtils.toResolveHierarchy(t)),xe(n)&&(n=[n]);const o=this.queueLoad(t,n,r,i);if(!o.toLoad.length)return o.pending.length||i(),null;o.toLoad.forEach(s=>{this.loadOne(s)})}load(t,n,r){this.prepareLoading(t,n,{},r)}reload(t,n,r){this.prepareLoading(t,n,{reload:!0},r)}loadOne(t,n=""){const r=t.split("|"),i=r[0],o=r[1];this.read(i,o,"read",void 0,void 0,(s,a)=>{s&&this.logger.warn(`${n}loading namespace ${o} for language ${i} failed`,s),!s&&a&&this.logger.log(`${n}loaded namespace ${o} for language ${i}`,a),this.loaded(t,s,a)})}saveMissing(t,n,r,i,o,s={},a=()=>{}){if(this.services?.utils?.hasLoadedNamespace&&!this.services?.utils?.hasLoadedNamespace(n)){this.logger.warn(`did not save key "${r}" as the namespace "${n}" was not yet loaded`,"This means something IS WRONG in your setup. You access the t function before i18next.init / i18next.loadNamespace / i18next.changeLanguage was done. Wait for the callback or Promise to resolve before accessing it!!!");return}if(!(r==null||r==="")){if(this.backend?.create){const c={...s,isUpdate:o},l=this.backend.create.bind(this.backend);if(l.length<6)try{let u;l.length===5?u=l(t,n,r,i,c):u=l(t,n,r,i),u&&typeof u.then=="function"?u.then(d=>a(null,d)).catch(a):a(null,u)}catch(u){a(u)}else l(t,n,r,i,a,c)}!t||!t[0]||this.store.addResource(t[0],n,r,i)}}}const N7=()=>({debug:!1,initAsync:!0,ns:["translation"],defaultNS:["translation"],fallbackLng:["dev"],fallbackNS:!1,supportedLngs:!1,nonExplicitSupportedLngs:!1,load:"all",preload:!1,simplifyPluralSuffix:!0,keySeparator:".",nsSeparator:":",pluralSeparator:"_",contextSeparator:"_",partialBundledLanguages:!1,saveMissing:!1,updateMissing:!1,saveMissingTo:"fallback",saveMissingPlurals:!0,missingKeyHandler:!1,missingInterpolationHandler:!1,postProcess:!1,postProcessPassResolved:!1,returnNull:!1,returnEmptyString:!0,returnObjects:!1,joinArrays:!1,returnedObjectHandler:!1,parseMissingKeyHandler:!1,appendNamespaceToMissingKey:!1,appendNamespaceToCIMode:!1,overloadTranslationOptionHandler:e=>{let t={};if(typeof e[1]=="object"&&(t=e[1]),xe(e[1])&&(t.defaultValue=e[1]),xe(e[2])&&(t.tDescription=e[2]),typeof e[2]=="object"||typeof e[3]=="object"){const n=e[3]||e[2];Object.keys(n).forEach(r=>{t[r]=n[r]})}return t},interpolation:{escapeValue:!0,format:e=>e,prefix:"{{",suffix:"}}",formatSeparator:",",unescapePrefix:"-",nestingPrefix:"$t(",nestingSuffix:")",nestingOptionsSeparator:",",maxReplaces:1e3,skipOnVariables:!0},cacheInBuiltFormats:!0}),$7=e=>(xe(e.ns)&&(e.ns=[e.ns]),xe(e.fallbackLng)&&(e.fallbackLng=[e.fallbackLng]),xe(e.fallbackNS)&&(e.fallbackNS=[e.fallbackNS]),e.supportedLngs?.indexOf?.("cimode")<0&&(e.supportedLngs=e.supportedLngs.concat(["cimode"])),typeof e.initImmediate=="boolean"&&(e.initAsync=e.initImmediate),e),Th=()=>{},Zre=e=>{Object.getOwnPropertyNames(Object.getPrototypeOf(e)).forEach(n=>{typeof e[n]=="function"&&(e[n]=e[n].bind(e))})};class pd extends Gg{constructor(t={},n){if(super(),this.options=$7(t),this.services={},this.logger=eo,this.modules={external:[]},Zre(this),n&&!this.isInitialized&&!t.isClone){if(!this.options.initAsync)return this.init(t,n),this;setTimeout(()=>{this.init(t,n)},0)}}init(t={},n){this.isInitializing=!0,typeof t=="function"&&(n=t,t={}),t.defaultNS==null&&t.ns&&(xe(t.ns)?t.defaultNS=t.ns:t.ns.indexOf("translation")<0&&(t.defaultNS=t.ns[0]));const r=N7();this.options={...r,...this.options,...$7(t)},this.options.interpolation={...r.interpolation,...this.options.interpolation},t.keySeparator!==void 0&&(this.options.userDefinedKeySeparator=t.keySeparator),t.nsSeparator!==void 0&&(this.options.userDefinedNsSeparator=t.nsSeparator),typeof this.options.overloadTranslationOptionHandler!="function"&&(this.options.overloadTranslationOptionHandler=r.overloadTranslationOptionHandler);const i=l=>l?typeof l=="function"?new l:l:null;if(!this.options.isClone){this.modules.logger?eo.init(i(this.modules.logger),this.options):eo.init(null,this.options);let l;this.modules.formatter?l=this.modules.formatter:l=zre;const u=new L7(this.options);this.store=new I7(this.options.resources,this.options);const d=this.services;d.logger=eo,d.resourceStore=this.store,d.languageUtils=u,d.pluralResolver=new Gre(u,{prepend:this.options.pluralSeparator,simplifyPluralSuffix:this.options.simplifyPluralSuffix}),this.options.interpolation.format&&this.options.interpolation.format!==r.interpolation.format&&this.logger.deprecate("init: you are still using the legacy format function, please use the new approach: https://www.i18next.com/translation-function/formatting"),l&&(!this.options.interpolation.format||this.options.interpolation.format===r.interpolation.format)&&(d.formatter=i(l),d.formatter.init&&d.formatter.init(d,this.options),this.options.interpolation.format=d.formatter.format.bind(d.formatter)),d.interpolator=new P7(this.options),d.utils={hasLoadedNamespace:this.hasLoadedNamespace.bind(this)},d.backendConnector=new Xre(i(this.modules.backend),d.resourceStore,d,this.options),d.backendConnector.on("*",(g,...v)=>{this.emit(g,...v)}),this.modules.languageDetector&&(d.languageDetector=i(this.modules.languageDetector),d.languageDetector.init&&d.languageDetector.init(d,this.options.detection,this.options)),this.modules.i18nFormat&&(d.i18nFormat=i(this.modules.i18nFormat),d.i18nFormat.init&&d.i18nFormat.init(this)),this.translator=new S1(this.services,this.options),this.translator.on("*",(g,...v)=>{this.emit(g,...v)}),this.modules.external.forEach(g=>{g.init&&g.init(this)})}if(this.format=this.options.interpolation.format,n||(n=Th),this.options.fallbackLng&&!this.services.languageDetector&&!this.options.lng){const l=this.services.languageUtils.getFallbackCodes(this.options.fallbackLng);l.length>0&&l[0]!=="dev"&&(this.options.lng=l[0])}!this.services.languageDetector&&!this.options.lng&&this.logger.warn("init: no languageDetector is used and no lng is defined"),["getResource","hasResourceBundle","getResourceBundle","getDataByLanguage"].forEach(l=>{this[l]=(...u)=>this.store[l](...u)}),["addResource","addResources","addResourceBundle","removeResourceBundle"].forEach(l=>{this[l]=(...u)=>(this.store[l](...u),this)});const a=Lu(),c=()=>{const l=(u,d)=>{this.isInitializing=!1,this.isInitialized&&!this.initializedStoreOnce&&this.logger.warn("init: i18next is already initialized. You should call init just once!"),this.isInitialized=!0,this.options.isClone||this.logger.log("initialized",this.options),this.emit("initialized",this.options),a.resolve(d),n(u,d)};if(this.languages&&!this.isInitialized)return l(null,this.t.bind(this));this.changeLanguage(this.options.lng,l)};return this.options.resources||!this.options.initAsync?c():setTimeout(c,0),a}loadResources(t,n=Th){let r=n;const i=xe(t)?t:this.language;if(typeof t=="function"&&(r=t),!this.options.resources||this.options.partialBundledLanguages){if(i?.toLowerCase()==="cimode"&&(!this.options.preload||this.options.preload.length===0))return r();const o=[],s=a=>{if(!a||a==="cimode")return;this.services.languageUtils.toResolveHierarchy(a).forEach(l=>{l!=="cimode"&&o.indexOf(l)<0&&o.push(l)})};i?s(i):this.services.languageUtils.getFallbackCodes(this.options.fallbackLng).forEach(c=>s(c)),this.options.preload?.forEach?.(a=>s(a)),this.services.backendConnector.load(o,this.options.ns,a=>{!a&&!this.resolvedLanguage&&this.language&&this.setResolvedLanguage(this.language),r(a)})}else r(null)}reloadResources(t,n,r){const i=Lu();return typeof t=="function"&&(r=t,t=void 0),typeof n=="function"&&(r=n,n=void 0),t||(t=this.languages),n||(n=this.options.ns),r||(r=Th),this.services.backendConnector.reload(t,n,o=>{i.resolve(),r(o)}),i}use(t){if(!t)throw new Error("You are passing an undefined module! Please check the object you are passing to i18next.use()");if(!t.type)throw new Error("You are passing a wrong module! Please check the object you are passing to i18next.use()");return t.type==="backend"&&(this.modules.backend=t),(t.type==="logger"||t.log&&t.warn&&t.error)&&(this.modules.logger=t),t.type==="languageDetector"&&(this.modules.languageDetector=t),t.type==="i18nFormat"&&(this.modules.i18nFormat=t),t.type==="postProcessor"&&zT.addPostProcessor(t),t.type==="formatter"&&(this.modules.formatter=t),t.type==="3rdParty"&&this.modules.external.push(t),this}setResolvedLanguage(t){if(!(!t||!this.languages)&&!(["cimode","dev"].indexOf(t)>-1)){for(let n=0;n<this.languages.length;n++){const r=this.languages[n];if(!(["cimode","dev"].indexOf(r)>-1)&&this.store.hasLanguageSomeTranslations(r)){this.resolvedLanguage=r;break}}!this.resolvedLanguage&&this.languages.indexOf(t)<0&&this.store.hasLanguageSomeTranslations(t)&&(this.resolvedLanguage=t,this.languages.unshift(t))}}changeLanguage(t,n){this.isLanguageChangingTo=t;const r=Lu();this.emit("languageChanging",t);const i=a=>{this.language=a,this.languages=this.services.languageUtils.toResolveHierarchy(a),this.resolvedLanguage=void 0,this.setResolvedLanguage(a)},o=(a,c)=>{c?this.isLanguageChangingTo===t&&(i(c),this.translator.changeLanguage(c),this.isLanguageChangingTo=void 0,this.emit("languageChanged",c),this.logger.log("languageChanged",c)):this.isLanguageChangingTo=void 0,r.resolve((...l)=>this.t(...l)),n&&n(a,(...l)=>this.t(...l))},s=a=>{!t&&!a&&this.services.languageDetector&&(a=[]);const c=xe(a)?a:a&&a[0],l=this.store.hasLanguageSomeTranslations(c)?c:this.services.languageUtils.getBestMatchFromCodes(xe(a)?[a]:a);l&&(this.language||i(l),this.translator.language||this.translator.changeLanguage(l),this.services.languageDetector?.cacheUserLanguage?.(l)),this.loadResources(l,u=>{o(u,l)})};return!t&&this.services.languageDetector&&!this.services.languageDetector.async?s(this.services.languageDetector.detect()):!t&&this.services.languageDetector&&this.services.languageDetector.async?this.services.languageDetector.detect.length===0?this.services.languageDetector.detect().then(s):this.services.languageDetector.detect(s):s(t),r}getFixedT(t,n,r){const i=(o,s,...a)=>{let c;typeof s!="object"?c=this.options.overloadTranslationOptionHandler([o,s].concat(a)):c={...s},c.lng=c.lng||i.lng,c.lngs=c.lngs||i.lngs,c.ns=c.ns||i.ns,c.keyPrefix!==""&&(c.keyPrefix=c.keyPrefix||r||i.keyPrefix);const l=this.options.keySeparator||".";let u;return c.keyPrefix&&Array.isArray(o)?u=o.map(d=>(typeof d=="function"&&(d=w1(d,{...this.options,...s})),`${c.keyPrefix}${l}${d}`)):(typeof o=="function"&&(o=w1(o,{...this.options,...s})),u=c.keyPrefix?`${c.keyPrefix}${l}${o}`:o),this.t(u,c)};return xe(t)?i.lng=t:i.lngs=t,i.ns=n,i.keyPrefix=r,i}t(...t){return this.translator?.translate(...t)}exists(...t){return this.translator?.exists(...t)}setDefaultNamespace(t){this.options.defaultNS=t}hasLoadedNamespace(t,n={}){if(!this.isInitialized)return this.logger.warn("hasLoadedNamespace: i18next was not initialized",this.languages),!1;if(!this.languages||!this.languages.length)return this.logger.warn("hasLoadedNamespace: i18n.languages were undefined or empty",this.languages),!1;const r=n.lng||this.resolvedLanguage||this.languages[0],i=this.options?this.options.fallbackLng:!1,o=this.languages[this.languages.length-1];if(r.toLowerCase()==="cimode")return!0;const s=(a,c)=>{const l=this.services.backendConnector.state[`${a}|${c}`];return l===-1||l===0||l===2};if(n.precheck){const a=n.precheck(this,s);if(a!==void 0)return a}return!!(this.hasResourceBundle(r,t)||!this.services.backendConnector.backend||this.options.resources&&!this.options.partialBundledLanguages||s(r,t)&&(!i||s(o,t)))}loadNamespaces(t,n){const r=Lu();return this.options.ns?(xe(t)&&(t=[t]),t.forEach(i=>{this.options.ns.indexOf(i)<0&&this.options.ns.push(i)}),this.loadResources(i=>{r.resolve(),n&&n(i)}),r):(n&&n(),Promise.resolve())}loadLanguages(t,n){const r=Lu();xe(t)&&(t=[t]);const i=this.options.preload||[],o=t.filter(s=>i.indexOf(s)<0&&this.services.languageUtils.isSupportedCode(s));return o.length?(this.options.preload=i.concat(o),this.loadResources(s=>{r.resolve(),n&&n(s)}),r):(n&&n(),Promise.resolve())}dir(t){if(t||(t=this.resolvedLanguage||(this.languages?.length>0?this.languages[0]:this.language)),!t)return"rtl";try{const i=new Intl.Locale(t);if(i&&i.getTextInfo){const o=i.getTextInfo();if(o&&o.direction)return o.direction}}catch{}const n=["ar","shu","sqr","ssh","xaa","yhd","yud","aao","abh","abv","acm","acq","acw","acx","acy","adf","ads","aeb","aec","afb","ajp","apc","apd","arb","arq","ars","ary","arz","auz","avl","ayh","ayl","ayn","ayp","bbz","pga","he","iw","ps","pbt","pbu","pst","prp","prd","ug","ur","ydd","yds","yih","ji","yi","hbo","men","xmn","fa","jpr","peo","pes","prs","dv","sam","ckb"],r=this.services?.languageUtils||new L7(N7());return t.toLowerCase().indexOf("-latn")>1?"ltr":n.indexOf(r.getLanguagePartFromCode(t))>-1||t.toLowerCase().indexOf("-arab")>1?"rtl":"ltr"}static createInstance(t={},n){const r=new pd(t,n);return r.createInstance=pd.createInstance,r}cloneInstance(t={},n=Th){const r=t.forkResourceStore;r&&delete t.forkResourceStore;const i={...this.options,...t,isClone:!0},o=new pd(i);if((t.debug!==void 0||t.prefix!==void 0)&&(o.logger=o.logger.clone(t)),["store","services","language"].forEach(a=>{o[a]=this[a]}),o.services={...this.services},o.services.utils={hasLoadedNamespace:o.hasLoadedNamespace.bind(o)},r){const a=Object.keys(this.store.data).reduce((c,l)=>(c[l]={...this.store.data[l]},c[l]=Object.keys(c[l]).reduce((u,d)=>(u[d]={...c[l][d]},u),c[l]),c),{});o.store=new I7(a,i),o.services.resourceStore=o.store}return t.interpolation&&(o.services.interpolator=new P7(i)),o.translator=new S1(o.services,i),o.translator.on("*",(a,...c)=>{o.emit(a,...c)}),o.init(i,n),o.translator.options=i,o.translator.backendConnector.services.utils={hasLoadedNamespace:o.hasLoadedNamespace.bind(o)},o}toJSON(){return{options:this.options,store:this.store,language:this.language,languages:this.languages,resolvedLanguage:this.resolvedLanguage}}}const Mn=pd.createInstance();Mn.createInstance;Mn.dir;Mn.init;Mn.loadResources;Mn.reloadResources;Mn.use;Mn.changeLanguage;Mn.getFixedT;const vn=Mn.t;Mn.exists;Mn.setDefaultNamespace;Mn.hasLoadedNamespace;Mn.loadNamespaces;Mn.loadLanguages;var e2,O7;function Qre(){return O7||(O7=1,e2={area:!0,base:!0,br:!0,col:!0,embed:!0,hr:!0,img:!0,input:!0,link:!0,meta:!0,param:!0,source:!0,track:!0,wbr:!0}),e2}var Jre=Qre();const eie=Gl(Jre);var tie=/\s([^'"/\s><]+?)[\s/>]|([^\s=]+)=\s?(".*?"|'.*?')/g;function j7(e){var t={type:"tag",name:"",voidElement:!1,attrs:{},children:[]},n=e.match(/<\/?([^\s]+?)[/\s>]/);if(n&&(t.name=n[1],(eie[n[1]]||e.charAt(e.length-2)==="/")&&(t.voidElement=!0),t.name.startsWith("!--"))){var r=e.indexOf("-->");return{type:"comment",comment:r!==-1?e.slice(4,r):""}}for(var i=new RegExp(tie),o=null;(o=i.exec(e))!==null;)if(o[0].trim())if(o[1]){var s=o[1].trim(),a=[s,""];s.indexOf("=")>-1&&(a=s.split("=")),t.attrs[a[0]]=a[1],i.lastIndex--}else o[2]&&(t.attrs[o[2]]=o[3].trim().substring(1,o[3].length-1));return t}var nie=/<[a-zA-Z0-9\-\!\/](?:"[^"]*"|'[^']*'|[^'">])*>/g,rie=/^\s*$/,iie=Object.create(null);function XT(e,t){switch(t.type){case"text":return e+t.content;case"tag":return e+="<"+t.name+(t.attrs?(function(n){var r=[];for(var i in n)r.push(i+'="'+n[i]+'"');return r.length?" "+r.join(" "):""})(t.attrs):"")+(t.voidElement?"/>":">"),t.voidElement?e:e+t.children.reduce(XT,"")+"</"+t.name+">";case"comment":return e+"<!--"+t.comment+"-->"}}var oie={parse:function(e,t){t||(t={}),t.components||(t.components=iie);var n,r=[],i=[],o=-1,s=!1;if(e.indexOf("<")!==0){var a=e.indexOf("<");r.push({type:"text",content:a===-1?e:e.substring(0,a)})}return e.replace(nie,function(c,l){if(s){if(c!=="</"+n.name+">")return;s=!1}var u,d=c.charAt(1)!=="/",p=c.startsWith("<!--"),g=l+c.length,v=e.charAt(g);if(p){var m=j7(c);return o<0?(r.push(m),r):((u=i[o]).children.push(m),r)}if(d&&(o++,(n=j7(c)).type==="tag"&&t.components[n.name]&&(n.type="component",s=!0),n.voidElement||s||!v||v==="<"||n.children.push({type:"text",content:e.slice(g,e.indexOf("<",g))}),o===0&&r.push(n),(u=i[o-1])&&u.children.push(n),i[o]=n),(!d||n.voidElement)&&(o>-1&&(n.voidElement||n.name===c.slice(2,-1))&&(o--,n=o===-1?r:i[o]),!s&&v!=="<"&&v)){u=o===-1?r:i[o].children;var _=e.indexOf("<",g),y=e.slice(g,_===-1?void 0:_);rie.test(y)&&(y=" "),(_>-1&&o+u.length>=0||y!==" ")&&u.push({type:"text",content:y})}}),r},stringify:function(e){return e.reduce(function(t,n){return t+XT("",n)},"")}};const Lp=(e,t,n,r)=>{const i=[n,{code:t,...r||{}}];if(e?.services?.logger?.forward)return e.services.logger.forward(i,"warn","react-i18next::",!0);oi(i[0])&&(i[0]=`react-i18next:: ${i[0]}`),e?.services?.logger?.warn?e.services.logger.warn(...i):console?.warn&&console.warn(...i)},D7={},Gd=(e,t,n,r)=>{oi(n)&&D7[n]||(oi(n)&&(D7[n]=new Date),Lp(e,t,n,r))},ZT=(e,t)=>()=>{if(e.isInitialized)t();else{const n=()=>{setTimeout(()=>{e.off("initialized",n)},0),t()};e.on("initialized",n)}},Cy=(e,t,n)=>{e.loadNamespaces(t,ZT(e,n))},F7=(e,t,n,r)=>{if(oi(n)&&(n=[n]),e.options.preload&&e.options.preload.indexOf(t)>-1)return Cy(e,n,r);n.forEach(i=>{e.options.ns.indexOf(i)<0&&e.options.ns.push(i)}),e.loadLanguages(t,ZT(e,r))},sie=(e,t,n={})=>!t.languages||!t.languages.length?(Gd(t,"NO_LANGUAGES","i18n.languages were undefined or empty",{languages:t.languages}),!0):t.hasLoadedNamespace(e,{lng:n.lng,precheck:(r,i)=>{if(n.bindI18n&&n.bindI18n.indexOf("languageChanging")>-1&&r.services.backendConnector.backend&&r.isLanguageChangingTo&&!i(r.isLanguageChangingTo,e))return!1}}),oi=e=>typeof e=="string",Ls=e=>typeof e=="object"&&e!==null,aie=/&(?:amp|#38|lt|#60|gt|#62|apos|#39|quot|#34|nbsp|#160|copy|#169|reg|#174|hellip|#8230|#x2F|#47);/g,cie={"&amp;":"&","&#38;":"&","&lt;":"<","&#60;":"<","&gt;":">","&#62;":">","&apos;":"'","&#39;":"'","&quot;":'"',"&#34;":'"',"&nbsp;":" ","&#160;":" ","&copy;":"Â©","&#169;":"Â©","&reg;":"Â®","&#174;":"Â®","&hellip;":"â€¦","&#8230;":"â€¦","&#x2F;":"/","&#47;":"/"},lie=e=>cie[e],uie=e=>e.replace(aie,lie);let Ey={bindI18n:"languageChanged",bindI18nStore:"",transEmptyNodeValue:"",transSupportBasicHtmlNodes:!0,transWrapTextNodes:"",transKeepBasicHtmlNodesFor:["br","strong","i","p"],useSuspense:!0,unescape:uie};const die=(e={})=>{Ey={...Ey,...e}},QT=()=>Ey;let JT;const fie=e=>{JT=e},$_=()=>JT,t2=(e,t)=>{if(!e)return!1;const n=e.props?.children??e.children;return t?n.length>0:!!n},n2=e=>{if(!e)return[];const t=e.props?.children??e.children;return e.props?.i18nIsDynamicList?Kc(t):t},hie=e=>Array.isArray(e)&&e.every(f.isValidElement),Kc=e=>Array.isArray(e)?e:[e],pie=(e,t)=>{const n={...t};return n.props=Object.assign(e.props,t.props),n},eA=(e,t,n,r)=>{if(!e)return"";let i="";const o=Kc(e),s=t?.transSupportBasicHtmlNodes?t.transKeepBasicHtmlNodesFor??[]:[];return o.forEach((a,c)=>{if(oi(a)){i+=`${a}`;return}if(f.isValidElement(a)){const{props:l,type:u}=a,d=Object.keys(l).length,p=s.indexOf(u)>-1,g=l.children;if(!g&&p&&!d){i+=`<${u}/>`;return}if(!g&&(!p||d)||l.i18nIsDynamicList){i+=`<${c}></${c}>`;return}if(p&&d===1&&oi(g)){i+=`<${u}>${g}</${u}>`;return}const v=eA(g,t,n,r);i+=`<${c}>${v}</${c}>`;return}if(a===null){Lp(n,"TRANS_NULL_VALUE","Passed in a null value as child",{i18nKey:r});return}if(Ls(a)){const{format:l,...u}=a,d=Object.keys(u);if(d.length===1){const p=l?`${d[0]}, ${l}`:d[0];i+=`{{${p}}}`;return}Lp(n,"TRANS_INVALID_OBJ","Invalid child - Object should only have keys {{ value, format }} (format is optional).",{i18nKey:r,child:a});return}Lp(n,"TRANS_INVALID_VAR","Passed in a variable like {number} - pass variables for interpolation as full objects like {{number}}.",{i18nKey:r,child:a})}),i},gie=(e,t,n,r,i,o,s)=>{if(n==="")return[];const a=i.transKeepBasicHtmlNodesFor||[],c=n&&new RegExp(a.map(y=>`<${y}`).join("|")).test(n);if(!e&&!t&&!c&&!s)return[n];const l=t??{},u=y=>{Kc(y).forEach(S=>{oi(S)||(t2(S)?u(n2(S)):Ls(S)&&!f.isValidElement(S)&&Object.assign(l,S))})};u(e);const d=oie.parse(`<0>${n}</0>`),p={...l,...o},g=(y,w,S)=>{const b=n2(y),C=m(b,w.children,S);return hie(b)&&C.length===0||y.props?.i18nIsDynamicList?b:C},v=(y,w,S,b,C)=>{y.dummy?(y.children=w,S.push(f.cloneElement(y,{key:b},C?void 0:w))):S.push(...f.Children.map([y],E=>{const x={...E.props};return delete x.i18nIsDynamicList,f.createElement(E.type,{...x,key:b,ref:E.props.ref??E.ref},C?null:w)}))},m=(y,w,S)=>{const b=Kc(y);return Kc(w).reduce((E,x,I)=>{const L=x.children?.[0]?.content&&r.services.interpolator.interpolate(x.children[0].content,p,r.language);if(x.type==="tag"){let R=b[parseInt(x.name,10)];!R&&t&&(R=t[x.name]),S.length===1&&!R&&(R=S[0][x.name]),R||(R={});const k=Object.keys(x.attrs).length!==0?pie({props:x.attrs},R):R,A=f.isValidElement(k),P=A&&t2(x,!0)&&!x.voidElement,O=c&&Ls(k)&&k.dummy&&!A,j=Ls(t)&&Object.hasOwnProperty.call(t,x.name);if(oi(k)){const $=r.services.interpolator.interpolate(k,p,r.language);E.push($)}else if(t2(k)||P){const $=g(k,x,S);v(k,$,E,I)}else if(O){const $=m(b,x.children,S);v(k,$,E,I)}else if(Number.isNaN(parseFloat(x.name)))if(j){const $=g(k,x,S);v(k,$,E,I,x.voidElement)}else if(i.transSupportBasicHtmlNodes&&a.indexOf(x.name)>-1)if(x.voidElement)E.push(f.createElement(x.name,{key:`${x.name}-${I}`}));else{const $=m(b,x.children,S);E.push(f.createElement(x.name,{key:`${x.name}-${I}`},$))}else if(x.voidElement)E.push(`<${x.name} />`);else{const $=m(b,x.children,S);E.push(`<${x.name}>${$}</${x.name}>`)}else if(Ls(k)&&!A){const $=x.children[0]?L:null;$&&E.push($)}else v(k,L,E,I,x.children.length!==1||!L)}else if(x.type==="text"){const R=i.transWrapTextNodes,k=s?i.unescape(r.services.interpolator.interpolate(x.content,p,r.language)):r.services.interpolator.interpolate(x.content,p,r.language);R?E.push(f.createElement(R,{key:`${x.name}-${I}`},k)):E.push(k)}return E},[])},_=m([{dummy:!0,children:e||[]}],d,Kc(e||[]));return n2(_[0])},tA=(e,t,n)=>{const r=e.key||t,i=f.cloneElement(e,{key:r});if(!i.props||!i.props.children||n.indexOf(`${t}/>`)<0&&n.indexOf(`${t} />`)<0)return i;function o(){return f.createElement(f.Fragment,null,i)}return f.createElement(o,{key:r})},mie=(e,t)=>e.map((n,r)=>tA(n,r,t)),vie=(e,t)=>{const n={};return Object.keys(e).forEach(r=>{Object.assign(n,{[r]:tA(e[r],r,t)})}),n},yie=(e,t,n,r)=>e?Array.isArray(e)?mie(e,t):Ls(e)?vie(e,t):(Gd(n,"TRANS_INVALID_COMPONENTS",'<Trans /> "components" prop expects an object or array',{i18nKey:r}),null):null,_ie=e=>!Ls(e)||Array.isArray(e)?!1:Object.keys(e).reduce((t,n)=>t&&Number.isNaN(Number.parseFloat(n)),!0);function bie({children:e,count:t,parent:n,i18nKey:r,context:i,tOptions:o={},values:s,defaults:a,components:c,ns:l,i18n:u,t:d,shouldUnescape:p,...g}){const v=u||$_();if(!v)return Gd(v,"NO_I18NEXT_INSTANCE","Trans: You need to pass in an i18next instance using i18nextReactModule",{i18nKey:r}),e;const m=d||v.t.bind(v)||(O=>O),_={...QT(),...v.options?.react};let y=l||m.ns||v.options?.defaultNS;y=oi(y)?[y]:y||["translation"];const w=eA(e,_,v,r),S=a||w||_.transEmptyNodeValue||(typeof r=="function"?w1(r):r),{hashTransKey:b}=_,C=r||(b?b(w||S):w||S);v.options?.interpolation?.defaultVariables&&(s=s&&Object.keys(s).length>0?{...s,...v.options.interpolation.defaultVariables}:{...v.options.interpolation.defaultVariables});const E=s||t!==void 0&&!v.options?.interpolation?.alwaysFormat||!e?o.interpolation:{interpolation:{...o.interpolation,prefix:"#$?",suffix:"?$#"}},x={...o,context:i||o.context,count:t,...s,...E,defaultValue:S,ns:y},I=C?m(C,x):S,L=yie(c,I,v,r);let R=L||e,k=null;_ie(L)&&(k=L,R=e);const A=gie(R,k,I,v,_,x,p),P=n??_.defaultTransParent;return P?f.createElement(P,g,A):A}const wie={type:"3rdParty",init(e){die(e.options.react),fie(e)}},nA=f.createContext();class Sie{constructor(){this.usedNamespaces={}}addUsedNamespaces(t){t.forEach(n=>{this.usedNamespaces[n]||(this.usedNamespaces[n]=!0)})}getUsedNamespaces(){return Object.keys(this.usedNamespaces)}}function lr({children:e,count:t,parent:n,i18nKey:r,context:i,tOptions:o={},values:s,defaults:a,components:c,ns:l,i18n:u,t:d,shouldUnescape:p,...g}){const{i18n:v,defaultNS:m}=f.useContext(nA)||{},_=u||v||$_(),y=d||_?.t.bind(_);return bie({children:e,count:t,parent:n,i18nKey:r,context:i,tOptions:o,values:s,defaults:a,components:c,ns:l||y?.ns||m||_?.options?.defaultNS,i18n:_,t:d,shouldUnescape:p,...g})}const Cie=(e,t)=>{const n=f.useRef();return f.useEffect(()=>{n.current=e},[e,t]),n.current},rA=(e,t,n,r)=>e.getFixedT(t,n,r),Eie=(e,t,n,r)=>f.useCallback(rA(e,t,n,r),[e,t,n,r]),he=(e,t={})=>{const{i18n:n}=t,{i18n:r,defaultNS:i}=f.useContext(nA)||{},o=n||r||$_();if(o&&!o.reportNamespaces&&(o.reportNamespaces=new Sie),!o){Gd(o,"NO_I18NEXT_INSTANCE","useTranslation: You will need to pass in an i18next instance by using initReactI18next");const b=(E,x)=>oi(x)?x:Ls(x)&&oi(x.defaultValue)?x.defaultValue:Array.isArray(E)?E[E.length-1]:E,C=[b,{},!1];return C.t=b,C.i18n={},C.ready=!1,C}o.options.react?.wait&&Gd(o,"DEPRECATED_OPTION","useTranslation: It seems you are still using the old wait option, you may migrate to the new useSuspense behaviour.");const s={...QT(),...o.options.react,...t},{useSuspense:a,keyPrefix:c}=s;let l=i||o.options?.defaultNS;l=oi(l)?[l]:l||["translation"],o.reportNamespaces.addUsedNamespaces?.(l);const u=(o.isInitialized||o.initializedStoreOnce)&&l.every(b=>sie(b,o,s)),d=Eie(o,t.lng||null,s.nsMode==="fallback"?l:l[0],c),p=()=>d,g=()=>rA(o,t.lng||null,s.nsMode==="fallback"?l:l[0],c),[v,m]=f.useState(p);let _=l.join();t.lng&&(_=`${t.lng}${_}`);const y=Cie(_),w=f.useRef(!0);f.useEffect(()=>{const{bindI18n:b,bindI18nStore:C}=s;w.current=!0,!u&&!a&&(t.lng?F7(o,t.lng,l,()=>{w.current&&m(g)}):Cy(o,l,()=>{w.current&&m(g)})),u&&y&&y!==_&&w.current&&m(g);const E=()=>{w.current&&m(g)};return b&&o?.on(b,E),C&&o?.store.on(C,E),()=>{w.current=!1,o&&b&&b?.split(" ").forEach(x=>o.off(x,E)),C&&o&&C.split(" ").forEach(x=>o.store.off(x,E))}},[o,_]),f.useEffect(()=>{w.current&&u&&m(p)},[o,c,u]);const S=[v,o,u];if(S.t=v,S.i18n=o,S.ready=u,u||!u&&!a)return S;throw new Promise(b=>{t.lng?F7(o,t.lng,l,()=>b()):Cy(o,l,()=>b())})};function iA(e,t){return h.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",width:"1em",height:"1em",fill:"currentColor",viewBox:"0 0 24 24",ref:t,...e,children:h.jsx("path",{fillRule:"evenodd",d:"m12 4.236-6 3V12c0 5.156 4.239 7.254 6 7.898 1.761-.644 6-2.742 6-7.898V7.236zm-.894-1.789a2 2 0 0 1 1.788 0l6 3A2 2 0 0 1 20 7.236V12c0 6.742-5.773 9.246-7.51 9.846-.32.111-.66.111-.98 0C9.774 21.246 4 18.743 4 12V7.236a2 2 0 0 1 1.106-1.789z",clipRule:"evenodd"})})}iA.displayName="AdminIcon";const xie=f.forwardRef(iA);function oA(e,t){return h.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",width:"1em",height:"1em",fill:"currentColor",viewBox:"0 0 24 24",ref:t,...e,children:h.jsx("path",{d:"m12 10.775-3.9 3.9a.95.95 0 0 1-.7.275.95.95 0 0 1-.7-.275.95.95 0 0 1-.275-.7q0-.425.275-.7l4.6-4.6q.15-.15.325-.212Q11.8 8.4 12 8.4t.375.063a.9.9 0 0 1 .325.212l4.6 4.6a.95.95 0 0 1 .275.7.95.95 0 0 1-.275.7.95.95 0 0 1-.7.275.95.95 0 0 1-.7-.275z"})})}oA.displayName="ChevronUpIcon";const Iie=f.forwardRef(oA);function sA(e,t){return h.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",width:"1em",height:"1em",fill:"currentColor",viewBox:"0 0 24 24",ref:t,...e,children:h.jsx("path",{d:"M12 11.034a1 1 0 0 0 .29.702l.005.005c.18.18.43.29.705.29h8a1 1 0 0 0 0-2h-5.586L22 3.445a1 1 0 0 0-1.414-1.414L14 8.617V3.031a1 1 0 1 0-2 0zm0 1.963a1 1 0 0 0-.29-.702l-.005-.004A1 1 0 0 0 11 12H3a1 1 0 1 0 0 2h5.586L2 20.586A1 1 0 1 0 3.414 22L10 15.414V21a1 1 0 0 0 2 0z"})})}sA.displayName="CollapseIcon";const aA=f.forwardRef(sA);function cA(e,t){return h.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",width:"1em",height:"1em",fill:"currentColor",viewBox:"0 0 24 24",ref:t,...e,children:h.jsx("path",{d:"M7 21q-.824 0-1.412-.587A1.93 1.93 0 0 1 5 19V6a.97.97 0 0 1-.713-.287A.97.97 0 0 1 4 5q0-.424.287-.713A.97.97 0 0 1 5 4h4q0-.424.287-.712A.97.97 0 0 1 10 3h4q.424 0 .713.288Q15 3.575 15 4h4q.424 0 .712.287Q20 4.576 20 5t-.288.713A.97.97 0 0 1 19 6v13q0 .824-.587 1.413A1.93 1.93 0 0 1 17 21zM7 6v13h10V6zm2 10q0 .424.287.712Q9.576 17 10 17t.713-.288A.97.97 0 0 0 11 16V9a.97.97 0 0 0-.287-.713A.97.97 0 0 0 10 8a.97.97 0 0 0-.713.287A.97.97 0 0 0 9 9zm4 0q0 .424.287.712.288.288.713.288.424 0 .713-.288A.97.97 0 0 0 15 16V9a.97.97 0 0 0-.287-.713A.97.97 0 0 0 14 8a.97.97 0 0 0-.713.287A.97.97 0 0 0 13 9z"})})}cA.displayName="DeleteIcon";const Rie=f.forwardRef(cA);function lA(e,t){return h.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",width:"1em",height:"1em",fill:"currentColor",viewBox:"0 0 24 24",ref:t,...e,children:h.jsx("path",{fillRule:"evenodd",d:"M15.706 2.637a2 2 0 0 1 2.829 0l2.828 2.828a2 2 0 0 1 0 2.829L9.605 20.052a1 1 0 0 1-.465.263L3.483 21.73a1 1 0 0 1-1.212-1.213l1.414-5.657a1 1 0 0 1 .263-.465zm1.224 7.262L14.102 7.07l-8.544 8.544-.943 3.771 3.771-.943z",clipRule:"evenodd"})})}lA.displayName="EditIcon";const H7=f.forwardRef(lA);function uA(e,t){return h.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",width:"1em",height:"1em",fill:"currentColor",viewBox:"0 0 24 24",ref:t,...e,children:h.jsx("path",{d:"m2.765 16.02-2.47-2.416A1.02 1.02 0 0 1 0 12.852q0-.456.295-.751a15.6 15.6 0 0 1 5.316-3.786A15.9 15.9 0 0 1 12 7q3.355 0 6.39 1.329a16 16 0 0 1 5.315 3.772q.295.294.295.751t-.295.752l-2.47 2.416a1.047 1.047 0 0 1-1.396.108l-3.114-2.363a1.1 1.1 0 0 1-.322-.376 1.1 1.1 0 0 1-.108-.483v-2.27a13.6 13.6 0 0 0-2.12-.524C13.459 9.996 12 9.937 12 9.937s-1.459.059-2.174.175q-1.074.174-2.121.523v2.271q0 .268-.108.483a1.1 1.1 0 0 1-.322.376l-3.114 2.363a1.047 1.047 0 0 1-1.396-.107"})})}uA.displayName="EndCallIcon";const dA=f.forwardRef(uA);function fA(e,t){return h.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",width:"1em",height:"1em",fill:"currentColor",viewBox:"0 0 24 24",ref:t,...e,children:h.jsx("path",{d:"M21 3.997a1 1 0 0 0-.29-.702l-.005-.004A1 1 0 0 0 20 3h-8a1 1 0 1 0 0 2h5.586L5 17.586V12a1 1 0 1 0-2 0v8.003a1 1 0 0 0 .29.702l.005.004c.18.18.43.291.705.291h8a1 1 0 1 0 0-2H6.414L19 6.414V12a1 1 0 1 0 2 0z"})})}fA.displayName="ExpandIcon";const hA=f.forwardRef(fA);function pA(e,t){return h.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",width:"1em",height:"1em",fill:"currentColor",viewBox:"0 0 24 24",ref:t,...e,children:h.jsx("path",{d:"M4 11a.97.97 0 0 1-.712-.287A.97.97 0 0 1 3 10V4q0-.424.288-.712A.97.97 0 0 1 4 3h6q.424 0 .713.288Q11 3.575 11 4v6q0 .424-.287.713A.97.97 0 0 1 10 11zm5-2V5H5v4zm5 12a.97.97 0 0 1-.713-.288A.97.97 0 0 1 13 20v-6q0-.424.287-.713A.97.97 0 0 1 14 13h6q.424 0 .712.287.288.288.288.713v6q0 .424-.288.712A.97.97 0 0 1 20 21zm5-2v-4h-4v4zM4 21a.97.97 0 0 1-.712-.288A.97.97 0 0 1 3 20v-6q0-.424.288-.713A.97.97 0 0 1 4 13h6q.424 0 .713.287.287.288.287.713v6q0 .424-.287.712A.97.97 0 0 1 10 21zm5-2v-4H5v4zm5-8a.97.97 0 0 1-.713-.287A.97.97 0 0 1 13 10V4q0-.424.287-.712A.97.97 0 0 1 14 3h6q.424 0 .712.288Q21 3.575 21 4v6q0 .424-.288.713A.97.97 0 0 1 20 11zm5-2V5h-4v4z"})})}pA.displayName="GridIcon";const Lie=f.forwardRef(pA);function gA(e,t){return h.jsxs("svg",{xmlns:"http://www.w3.org/2000/svg",width:"1em",height:"1em",fill:"currentColor",viewBox:"0 0 24 24",ref:t,...e,children:[h.jsx("path",{d:"M16.713 6.713A.97.97 0 0 1 16 7a.97.97 0 0 1-.713-.287A.97.97 0 0 1 15 6q0-.424.287-.713A.97.97 0 0 1 16 5q.424 0 .712.287Q17 5.576 17 6t-.288.713"}),h.jsx("path",{fillRule:"evenodd",d:"M6 2a2 2 0 0 0-2 2v16a2 2 0 0 0 2 2h12a2 2 0 0 0 2-2V4a2 2 0 0 0-2-2zm12 2H6v4h12zM6 12v-2h12v2zm0 2v2h12v-2zm0 6v-2h12v2z",clipRule:"evenodd"})]})}gA.displayName="HostIcon";const kie=f.forwardRef(gA);function mA(e,t){return h.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",width:"1em",height:"1em",fill:"currentColor",viewBox:"0 0 24 24",ref:t,...e,children:h.jsx("path",{d:"M12 19.071q-1.467 1.467-3.536 1.467-2.067 0-3.535-1.467t-1.467-3.535q0-2.07 1.467-3.536L7.05 9.879q.3-.3.707-.3t.707.3.301.707-.3.707l-2.122 2.121a2.9 2.9 0 0 0-.884 2.122q0 1.237.884 2.12.884.885 2.121.885t2.122-.884l2.121-2.121q.3-.3.707-.3t.707.3.3.707q0 .405-.3.707zm-1.414-4.243q-.3.3-.707.301a.97.97 0 0 1-.707-.3q-.3-.3-.301-.708 0-.405.3-.707l4.243-4.242q.3-.3.707-.3t.707.3.3.707-.3.707zm6.364-.707q-.3.3-.707.3a.97.97 0 0 1-.707-.3q-.3-.3-.301-.707 0-.405.3-.707l2.122-2.121q.884-.885.884-2.121 0-1.238-.884-2.122a2.9 2.9 0 0 0-2.121-.884q-1.237 0-2.122.884l-2.121 2.122q-.3.3-.707.3a.97.97 0 0 1-.707-.3q-.3-.3-.3-.708 0-.405.3-.707L12 4.93q1.467-1.467 3.536-1.467t3.535 1.467 1.467 3.536T19.071 12z"})})}mA.displayName="LinkIcon";const Tie=f.forwardRef(mA);function vA(e,t){return h.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",width:"1em",height:"1em",fill:"currentColor",viewBox:"0 0 24 24",ref:t,...e,children:h.jsx("path",{d:"M6 22q-.825 0-1.412-.587A1.93 1.93 0 0 1 4 20V10q0-.825.588-1.412a2 2 0 0 1 .702-.463L1.333 4.167a1 1 0 0 1 1.414-1.414L7 7.006v-.012l13 13v.012l1.247 1.247a1 1 0 1 1-1.414 1.414l-.896-.896A1.94 1.94 0 0 1 18 22zm14-4.834V10q0-.825-.587-1.412A1.93 1.93 0 0 0 18 8h-1V6q0-2.075-1.463-3.537Q14.075 1 12 1T8.463 2.463a4.9 4.9 0 0 0-1.22 1.946L9 6.166V6q0-1.25.875-2.125A2.9 2.9 0 0 1 12 3q1.25 0 2.125.875T15 6v2h-4.166z"})})}vA.displayName="LockOffIcon";const Aie=f.forwardRef(vA);function yA(e,t){return h.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",width:"1em",height:"1em",fill:"currentColor",viewBox:"0 0 24 24",ref:t,...e,children:h.jsx("path",{d:"M6 22q-.824 0-1.412-.587A1.93 1.93 0 0 1 4 20V10q0-.825.588-1.412A1.93 1.93 0 0 1 6 8h1V6q0-2.075 1.463-3.537Q9.926 1 12 1q2.075 0 3.537 1.463Q17 3.925 17 6v2h1q.824 0 1.413.588Q20 9.175 20 10v10q0 .824-.587 1.413A1.93 1.93 0 0 1 18 22zM9 8h6V6q0-1.25-.875-2.125A2.9 2.9 0 0 0 12 3q-1.25 0-2.125.875A2.9 2.9 0 0 0 9 6z"})})}yA.displayName="LockSolidIcon";const Pie=f.forwardRef(yA);function _A(e,t){return h.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",width:"1em",height:"1em",fill:"currentColor",viewBox:"0 0 24 24",ref:t,...e,children:h.jsx("path",{d:"M8 8v-.006l6.831 6.832-.002.002 1.414 1.415.003-.003 1.414 1.414-.003.003L20.5 20.5a1 1 0 0 1-1.414 1.414l-3.022-3.022A7.95 7.95 0 0 1 13 19.938V21a1 1 0 0 1-2 0v-1.062A8 8 0 0 1 4 12a1 1 0 1 1 2 0 6 6 0 0 0 8.587 5.415l-1.55-1.55A4.005 4.005 0 0 1 8 12v-1.172L2.086 4.914A1 1 0 0 1 3.5 3.5zm9.417 6.583 1.478 1.477A7.96 7.96 0 0 0 20 12a1 1 0 0 0-2 0c0 .925-.21 1.8-.583 2.583M8.073 5.238l7.793 7.793q.132-.495.134-1.031V6a4 4 0 0 0-7.927-.762"})})}_A.displayName="MicOffSolidIcon";const bA=f.forwardRef(_A);function wA(e,t){return h.jsxs("svg",{xmlns:"http://www.w3.org/2000/svg",width:"1em",height:"1em",fill:"currentColor",viewBox:"0 0 24 24",ref:t,...e,children:[h.jsx("path",{fillRule:"evenodd",d:"M8 8v-.006l2 2V10l3.414 3.414.003-.003 1.414 1.415-.002.002 1.414 1.415.003-.003 1.414 1.414-.003.003L20.5 20.5a1 1 0 0 1-1.414 1.414l-3.022-3.022A7.95 7.95 0 0 1 13 19.938V21a1 1 0 1 1-2 0v-1.062A8 8 0 0 1 4 12a1 1 0 1 1 2 0 6 6 0 0 0 8.587 5.415l-1.55-1.55A4.005 4.005 0 0 1 8 12v-1.172L2.086 4.914A1 1 0 0 1 3.5 3.5z",clipRule:"evenodd"}),h.jsx("path",{d:"M14 6v5.166l1.866 1.866q.132-.496.134-1.032V6a4 4 0 0 0-7.928-.762L10 7.166V6a2 2 0 1 1 4 0m3.417 8.583 1.477 1.477A7.96 7.96 0 0 0 20 12a1 1 0 1 0-2 0c0 .925-.21 1.8-.583 2.583"})]})}wA.displayName="MicOffIcon";const Mie=f.forwardRef(wA);function SA(e,t){return h.jsxs("svg",{xmlns:"http://www.w3.org/2000/svg",width:"1em",height:"1em",fill:"currentColor",viewBox:"0 0 24 24",ref:t,...e,children:[h.jsx("path",{d:"M8 6a4 4 0 1 1 8 0v6a4 4 0 0 1-8 0z"}),h.jsx("path",{d:"M5 11a1 1 0 0 1 1 1 6 6 0 0 0 12 0 1 1 0 1 1 2 0 8 8 0 0 1-7 7.938V21a1 1 0 1 1-2 0v-1.062A8 8 0 0 1 4 12a1 1 0 0 1 1-1"})]})}SA.displayName="MicOnSolidIcon";const O_=f.forwardRef(SA);function CA(e,t){return h.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",width:"1em",height:"1em",fill:"currentColor",viewBox:"0 0 24 24",ref:t,...e,children:h.jsx("path",{d:"M3.5 3.5a1 1 0 1 0-1.414 1.414l4.113 4.114a5.5 5.5 0 0 0-.184 1.07A5.002 5.002 0 0 0 7 20h10.172l1.914 1.914A1 1 0 1 0 20.5 20.5l-.979-.979.004-.001L7.145 7.14l-.002.003zm18.5 12a4.48 4.48 0 0 1-.928 2.738L8.637 5.803A5.47 5.47 0 0 1 11.5 5a5.49 5.49 0 0 1 4.25 2.008 4 4 0 0 1 4.187 4.708A4.5 4.5 0 0 1 22 15.5"})})}CA.displayName="OfflineIcon";const Nie=f.forwardRef(CA);function EA(e,t){return h.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",width:"1em",height:"1em",fill:"currentColor",viewBox:"0 0 24 24",ref:t,...e,children:h.jsx("path",{d:"M6 14q-.824 0-1.412-.588A1.93 1.93 0 0 1 4 12q0-.825.588-1.412A1.93 1.93 0 0 1 6 10q.824 0 1.412.588Q8 11.175 8 12t-.588 1.412A1.93 1.93 0 0 1 6 14m6 0q-.825 0-1.412-.588A1.93 1.93 0 0 1 10 12q0-.825.588-1.412A1.93 1.93 0 0 1 12 10q.825 0 1.412.588Q14 11.175 14 12t-.588 1.412A1.93 1.93 0 0 1 12 14m6 0q-.824 0-1.413-.588A1.93 1.93 0 0 1 16 12q0-.825.587-1.412A1.93 1.93 0 0 1 18 10q.824 0 1.413.588Q20 11.175 20 12t-.587 1.412A1.93 1.93 0 0 1 18 14"})})}EA.displayName="OverflowHorizontalIcon";const $ie=f.forwardRef(EA);function xA(e,t){return h.jsxs("svg",{xmlns:"http://www.w3.org/2000/svg",width:"1em",height:"1em",fill:"currentColor",viewBox:"0 0 24 24",ref:t,...e,children:[h.jsx("path",{d:"M5 3h6a1 1 0 1 1 0 2H5v14h14v-6a1 1 0 1 1 2 0v6a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2V5a2 2 0 0 1 2-2"}),h.jsx("path",{d:"M15 3h5a1 1 0 0 1 1 1v5a1 1 0 1 1-2 0V6.414l-6.293 6.293a1 1 0 0 1-1.414-1.414L17.586 5H15a1 1 0 1 1 0-2"})]})}xA.displayName="PopOutIcon";const j_=f.forwardRef(xA);function IA(e,t){return h.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",width:"1em",height:"1em",fill:"currentColor",viewBox:"0 0 24 24",ref:t,...e,children:h.jsx("path",{d:"M11 3a1 1 0 1 1 2 0v8.5a.5.5 0 0 0 1 0V4a1 1 0 1 1 2 0v10.2l3.284-2.597a1.081 1.081 0 0 1 1.47 1.577c-.613.673-1.214 1.367-1.818 2.064-1.267 1.463-2.541 2.934-3.943 4.235A6 6 0 0 1 5 15V7a1 1 0 0 1 1.999 0v5.5a.5.5 0 0 0 1 0V4a1 1 0 0 1 2 0v7.5a.5.5 0 0 0 1 0z"})})}IA.displayName="RaisedHandSolidIcon";const RA=f.forwardRef(IA);function LA(e,t){return h.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",width:"1em",height:"1em",fill:"currentColor",viewBox:"0 0 24 24",ref:t,...e,children:h.jsx("path",{fillRule:"evenodd",d:"M12 22c5.523 0 10-4.477 10-10S17.523 2 12 2 2 6.477 2 12s4.477 10 10 10m3.536-6.464a1 1 0 0 0-1.415-1.415A3 3 0 0 1 12 15a3 3 0 0 1-2.121-.879 1 1 0 1 0-1.414 1.415A5 5 0 0 0 12 17c1.38 0 2.632-.56 3.536-1.464M10 10.5a1.5 1.5 0 1 1-3 0 1.5 1.5 0 0 1 3 0m5.5 1.5a1.5 1.5 0 1 0 0-3 1.5 1.5 0 0 0 0 3",clipRule:"evenodd"})})}LA.displayName="ReactionSolidIcon";const Oie=f.forwardRef(LA);function kA(e,t){return h.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",width:"1em",height:"1em",fill:"currentColor",viewBox:"0 0 24 24",ref:t,...e,children:h.jsx("path",{d:"M12.731 2C13.432 2 14 2.568 14 3.269c0 .578.396 1.074.935 1.286q.128.052.253.106c.531.23 1.162.16 1.572-.25a1.27 1.27 0 0 1 1.794 0l1.034 1.035a1.27 1.27 0 0 1 0 1.794c-.41.41-.48 1.04-.248 1.572l.105.253c.212.539.708.935 1.286.935.701 0 1.269.568 1.269 1.269v1.462c0 .701-.568 1.269-1.269 1.269-.578 0-1.074.396-1.287.935q-.05.128-.104.253c-.232.531-.161 1.162.248 1.572a1.27 1.27 0 0 1 0 1.794l-1.034 1.034a1.27 1.27 0 0 1-1.794 0c-.41-.41-1.04-.48-1.572-.248a8 8 0 0 1-.253.105c-.539.212-.935.708-.935 1.286 0 .701-.568 1.269-1.269 1.269H11.27c-.702 0-1.27-.568-1.27-1.269 0-.578-.396-1.074-.935-1.287a8 8 0 0 1-.253-.104c-.531-.232-1.162-.161-1.572.248a1.27 1.27 0 0 1-1.794 0l-1.034-1.034a1.27 1.27 0 0 1 0-1.794c.41-.41.48-1.04.249-1.572a8 8 0 0 1-.106-.253C4.343 14.396 3.847 14 3.27 14 2.568 14 2 13.432 2 12.731V11.27c0-.702.568-1.27 1.269-1.27.578 0 1.074-.396 1.286-.935q.052-.128.106-.253c.23-.531.16-1.162-.25-1.572a1.27 1.27 0 0 1 0-1.794l1.035-1.034a1.27 1.27 0 0 1 1.794 0c.41.41 1.04.48 1.572.249a8 8 0 0 1 .253-.106c.539-.212.935-.708.935-1.286C10 2.568 10.568 2 11.269 2zM12 16a4 4 0 1 0 0-8 4 4 0 0 0 0 8"})})}kA.displayName="SettingsSolidIcon";const jie=f.forwardRef(kA);function TA(e,t){return h.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",width:"1em",height:"1em",fill:"currentColor",viewBox:"0 0 24 24",ref:t,...e,children:h.jsx("path",{d:"M1.288 20.713Q1.575 21 2 21h20q.424 0 .712-.288A.97.97 0 0 0 23 20a.97.97 0 0 0-.288-.712A.97.97 0 0 0 22 19H2a.97.97 0 0 0-.712.288A.97.97 0 0 0 1 20q0 .424.288.712m1.3-3.299A1.93 1.93 0 0 1 2 16V5q0-.824.587-1.412A1.93 1.93 0 0 1 4 3h16q.824 0 1.413.587Q22 4.176 22 5v11q0 .824-.587 1.413A1.93 1.93 0 0 1 20 18H4q-.824 0-1.412-.587m10.12-10.12a1 1 0 0 0-1.415 0l-2.5 2.5a1 1 0 0 0 1.414 1.414l.793-.793V13a1 1 0 1 0 2 0v-2.586l.793.793a1 1 0 0 0 1.414-1.414z"})})}TA.displayName="ShareScreenSolidIcon";const Die=f.forwardRef(TA);function AA(e,t){return h.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",width:"1em",height:"1em",fill:"currentColor",viewBox:"0 0 24 24",ref:t,...e,children:h.jsx("path",{d:"M12 16a.97.97 0 0 1-.713-.287A.97.97 0 0 1 11 15V7.85L9.125 9.725q-.3.3-.7.3T7.7 9.7a.93.93 0 0 1-.288-.713A.98.98 0 0 1 7.7 8.3l3.6-3.6q.15-.15.325-.213.175-.062.375-.062t.375.062a.9.9 0 0 1 .325.213l3.6 3.6q.3.3.287.712a.98.98 0 0 1-.287.688q-.3.3-.713.313a.93.93 0 0 1-.712-.288L13 7.85V15q0 .424-.287.713A.97.97 0 0 1 12 16m-6 4q-.824 0-1.412-.587A1.93 1.93 0 0 1 4 18v-2q0-.424.287-.713A.97.97 0 0 1 5 15q.424 0 .713.287Q6 15.576 6 16v2h12v-2q0-.424.288-.713A.97.97 0 0 1 19 15q.424 0 .712.287.288.288.288.713v2q0 .824-.587 1.413A1.93 1.93 0 0 1 18 20z"})})}AA.displayName="ShareIcon";const Fie=f.forwardRef(AA);function PA(e,t){return h.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",width:"1em",height:"1em",fill:"currentColor",viewBox:"0 0 24 24",ref:t,...e,children:h.jsx("path",{d:"M5 5h14v8h-5a1 1 0 0 0-1 1v5H5zm10 14v-4h4v4zM5 21h14a2 2 0 0 0 2-2V5a2 2 0 0 0-2-2H5a2 2 0 0 0-2 2v14a2 2 0 0 0 2 2"})})}PA.displayName="SpotlightIcon";const Hie=f.forwardRef(PA);function MA(e,t){return h.jsxs("svg",{xmlns:"http://www.w3.org/2000/svg",width:"1em",height:"1em",fill:"currentColor",viewBox:"0 0 24 24",ref:t,...e,children:[h.jsx("path",{d:"M16.293 2.293a1 1 0 0 1 1.414 0l2 2a1 1 0 0 1 0 1.414l-2 2a1 1 0 1 1-1.414-1.414L16.586 6H6a2 2 0 0 0-2 2v7a1 1 0 1 1-2 0V8a4 4 0 0 1 4-4h10.586l-.293-.293a1 1 0 0 1 0-1.414M18 18H7.414l.293-.293a1 1 0 1 0-1.414-1.414l-2 2a1 1 0 0 0 0 1.414l2 2a1 1 0 0 0 1.414-1.414L7.414 20H18a4 4 0 0 0 4-4V9a1 1 0 1 0-2 0v7a2 2 0 0 1-2 2"}),h.jsx("path",{d:"M12 15a3 3 0 1 0 0-6 3 3 0 0 0 0 6"})]})}MA.displayName="SwitchCameraSolidIcon";const Uie=f.forwardRef(MA);function NA(e,t){return h.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",width:"1em",height:"1em",fill:"currentColor",viewBox:"0 0 24 24",ref:t,...e,children:h.jsx("path",{d:"M12.999 13.012v-.005zm-9.411 7.401Q4.175 21 5 21h14q.824 0 1.413-.587Q21 19.825 21 19V5q0-.824-.587-1.412A1.93 1.93 0 0 0 19 3H5q-.824 0-1.412.587A1.93 1.93 0 0 0 3 5v14q0 .824.587 1.413M12 9a1 1 0 0 0-1 1 1 1 0 1 1-2 0 3 3 0 1 1 4.44 2.633 1.4 1.4 0 0 0-.383.288.3.3 0 0 0-.057.085A1 1 0 0 1 11 13c0-.58.253-1.047.539-1.38.281-.33.63-.572.94-.742A1 1 0 0 0 12 9m1 7a1 1 0 1 1-2 0 1 1 0 0 1 2 0"})})}NA.displayName="UnknownSolidIcon";const Bie=f.forwardRef(NA);function $A(e,t){return h.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",width:"1em",height:"1em",fill:"currentColor",viewBox:"0 0 24 24",ref:t,...e,children:h.jsx("path",{d:"M10 12q-1.65 0-2.825-1.175T6 8t1.175-2.825T10 4t2.825 1.175T14 8t-1.175 2.825T10 12m-8 6v-.8q0-.85.438-1.562.437-.713 1.162-1.088a14.8 14.8 0 0 1 3.15-1.163A13.8 13.8 0 0 1 10 13q1.65 0 3.25.387 1.6.388 3.15 1.163.724.375 1.163 1.087Q18 16.35 18 17.2v.8q0 .824-.587 1.413A1.93 1.93 0 0 1 16 20H4q-.824 0-1.412-.587A1.93 1.93 0 0 1 2 18m2 0h12v-.8a.97.97 0 0 0-.5-.85q-1.35-.675-2.725-1.012a11.6 11.6 0 0 0-5.55 0Q5.85 15.675 4.5 16.35a.97.97 0 0 0-.5.85zm6-8q.825 0 1.412-.588Q12 8.826 12 8q0-.824-.588-1.412A1.93 1.93 0 0 0 10 6q-.825 0-1.412.588A1.93 1.93 0 0 0 8 8q0 .825.588 1.412Q9.175 10 10 10m7 1h2v2q0 .424.288.713.287.287.712.287.424 0 .712-.287A.97.97 0 0 0 21 13v-2h2q.424 0 .712-.287A.97.97 0 0 0 24 10a.97.97 0 0 0-.288-.713A.97.97 0 0 0 23 9h-2V7a.97.97 0 0 0-.288-.713A.97.97 0 0 0 20 6a.97.97 0 0 0-.712.287A.97.97 0 0 0 19 7v2h-2a.97.97 0 0 0-.712.287A.97.97 0 0 0 16 10q0 .424.288.713.287.287.712.287"})})}$A.displayName="UserAddIcon";const Vie=f.forwardRef($A);function OA(e,t){return h.jsxs("svg",{xmlns:"http://www.w3.org/2000/svg",width:"1em",height:"1em",fill:"currentColor",viewBox:"0 0 24 24",ref:t,...e,children:[h.jsx("path",{d:"M9.175 13.825Q10.35 15 12 15t2.825-1.175T16 11t-1.175-2.825T12 7 9.175 8.175 8 11t1.175 2.825m4.237-1.412A1.93 1.93 0 0 1 12 13q-.825 0-1.412-.588A1.93 1.93 0 0 1 10 11q0-.825.588-1.412A1.93 1.93 0 0 1 12 9q.825 0 1.412.588Q14 10.175 14 11t-.588 1.412"}),h.jsx("path",{d:"M22 12c0 5.523-4.477 10-10 10S2 17.523 2 12 6.477 2 12 2s10 4.477 10 10m-2 0a8 8 0 1 0-16 0 8 8 0 0 0 16 0"}),h.jsx("path",{d:"M16.23 18.792a13 13 0 0 0-1.455-.455 11.6 11.6 0 0 0-5.55 0q-.73.18-1.455.455a8 8 0 0 1-1.729-1.454q1.336-.618 2.709-.95A13.8 13.8 0 0 1 12 16q1.65 0 3.25.387 1.373.333 2.709.95a8 8 0 0 1-1.73 1.455"})]})}OA.displayName="UserProfileIcon";const jA=f.forwardRef(OA);function DA(e,t){return h.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",width:"1em",height:"1em",fill:"currentColor",viewBox:"0 0 24 24",ref:t,...e,children:h.jsx("path",{d:"M2.747 2.753 4.35 4.355l.007-.003L18 17.994v.012l3.247 3.247a1 1 0 0 1-1.414 1.414l-2.898-2.898A2 2 0 0 1 16 20H6a4 4 0 0 1-4-4V8c0-.892.292-1.715.785-2.38L1.333 4.166a1 1 0 0 1 1.414-1.414M18 15.166 6.834 4H16a2 2 0 0 1 2 2v4.286l3.35-2.871a1 1 0 0 1 1.65.76v7.65a1 1 0 0 1-1.65.76L18 13.715z"})})}DA.displayName="VideoCallOffSolidIcon";const qie=f.forwardRef(DA);function FA(e,t){return h.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",width:"1em",height:"1em",fill:"currentColor",viewBox:"0 0 24 24",ref:t,...e,children:h.jsx("path",{d:"M6 4h10a2 2 0 0 1 2 2v4.286l3.35-2.871a1 1 0 0 1 1.65.76v7.65a1 1 0 0 1-1.65.76L18 13.715V18a2 2 0 0 1-2 2H6a4 4 0 0 1-4-4V8a4 4 0 0 1 4-4"})})}FA.displayName="VideoCallSolidIcon";const HA=f.forwardRef(FA);function UA(e,t){return h.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",width:"1em",height:"1em",fill:"currentColor",viewBox:"0 0 24 24",ref:t,...e,children:h.jsx("path",{d:"m20.958 16.374.039 3.527q0 .427-.33.756-.33.33-.756.33a16 16 0 0 1-6.57-1.105 16.2 16.2 0 0 1-5.563-3.663 16.1 16.1 0 0 1-3.653-5.573 16.3 16.3 0 0 1-1.115-6.56q0-.427.33-.757T4.095 3l3.528.039a1.07 1.07 0 0 1 1.085.93l.543 3.954q.039.271-.039.504a1.1 1.1 0 0 1-.271.426l-1.64 1.64q.505 1.008 1.154 1.909c.433.6 1.444 1.696 1.444 1.696s1.095 1.01 1.696 1.444q.9.65 1.909 1.153l1.64-1.64q.193-.193.426-.27t.504-.04l3.954.543q.406.059.668.359t.262.727"})})}UA.displayName="VoiceCallSolidIcon";const Gie=f.forwardRef(UA);function BA(e,t){return h.jsxs("svg",{xmlns:"http://www.w3.org/2000/svg",width:"1em",height:"1em",fill:"currentColor",viewBox:"0 0 24 24",ref:t,...e,children:[h.jsx("g",{clipPath:"url(#a)",children:h.jsx("path",{fillRule:"evenodd",d:"M8.929 15.1a13.6 13.6 0 0 0 4.654 3.066q2.62 1.036 5.492.923h.008l.003-.004.003-.002-.034-3.124-3.52-.483-1.791 1.792-.645-.322a13.5 13.5 0 0 1-3.496-2.52 13.4 13.4 0 0 1-2.52-3.496l-.322-.644 1.792-1.792-.483-3.519-3.123-.034-.003.002-.003.004v.002a13.65 13.65 0 0 0 .932 5.492A13.4 13.4 0 0 0 8.93 15.1m3.92 4.926a15.6 15.6 0 0 1-5.334-3.511 15.4 15.4 0 0 1-3.505-5.346 15.6 15.6 0 0 1-1.069-6.274 1.93 1.93 0 0 1 .589-1.366c.366-.366.84-.589 1.386-.589h.01l3.163.035a1.96 1.96 0 0 1 1.958 1.694v.005l.487 3.545v.003c.043.297.025.605-.076.907a2 2 0 0 1-.485.773l-.762.762a11.4 11.4 0 0 0 3.206 3.54q.457.33.948.614l.762-.761a2 2 0 0 1 .774-.486c.302-.1.61-.118.907-.076l3.553.487a1.96 1.96 0 0 1 1.694 1.958l.034 3.174c0 .546-.223 1.02-.588 1.386-.361.36-.827.582-1.363.588a15.3 15.3 0 0 1-6.29-1.062",clipRule:"evenodd"})}),h.jsx("defs",{children:h.jsx("clipPath",{id:"a",children:h.jsx("path",{d:"M0 0h24v24H0z"})})})]})}BA.displayName="VoiceCallIcon";const Kie=f.forwardRef(BA);function VA(e,t){return h.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",width:"1em",height:"1em",fill:"currentColor",viewBox:"0 0 24 24",ref:t,...e,children:h.jsx("path",{d:"M3.5 3.5a1 1 0 1 0-1.414 1.414L5.172 8H5a2 2 0 0 0-2 2v4a2 2 0 0 0 2 2h2l3.293 3.293c.63.63 1.707.184 1.707-.707v-3.758l7.086 7.086A1 1 0 0 0 20.5 20.5l-2.136-2.136.003-.003-1.414-1.414-.003.003-1.414-1.414.003-.003-1.415-1.415-.002.003L12 12v-.006L7.503 7.497 7.5 7.5zm11.496 8.662 1.661 1.66c.222-.564.343-1.18.343-1.822 0-1.38-.56-2.632-1.464-3.536a1 1 0 1 0-1.414 1.414 3 3 0 0 1 .874 2.284m3.164 3.165 1.462 1.46A8.96 8.96 0 0 0 21 12a8.98 8.98 0 0 0-2.636-6.364A1 1 0 0 0 16.95 7.05 6.98 6.98 0 0 1 19 12a7 7 0 0 1-.84 3.326M8.917 6.083 12 9.166V5.414c0-.89-1.077-1.337-1.707-.707z"})})}VA.displayName="VolumeOffSolidIcon";const Wie=f.forwardRef(VA);function qA(e,t){return h.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",width:"1em",height:"1em",fill:"currentColor",viewBox:"0 0 24 24",ref:t,...e,children:h.jsx("path",{d:"m3.5 3.5 4 4 .003-.003L8.917 8.91l-.003.003L10 10v-.006l2 2V12l2.122 2.121.002-.003 1.415 1.415-.003.003 1.414 1.414.003-.003 1.414 1.414-.003.003L20.5 20.5a1 1 0 0 1-1.414 1.414L12 14.828v3.758c0 .89-1.077 1.337-1.707.707L7 16H5a2 2 0 0 1-2-2v-4a2 2 0 0 1 2-2h.172L2.086 4.914A1 1 0 0 1 3.5 3.5M7.172 10H5v4h2.828L10 16.17v-3.343zm7.824 2.162 1.661 1.66c.222-.564.343-1.18.343-1.822 0-1.38-.56-2.632-1.464-3.536a1 1 0 1 0-1.414 1.414 3 3 0 0 1 .874 2.284m3.164 3.165 1.462 1.46A8.96 8.96 0 0 0 21 12a8.98 8.98 0 0 0-2.636-6.364A1 1 0 0 0 16.95 7.05 6.98 6.98 0 0 1 19 12a7 7 0 0 1-.84 3.326M8.917 6.083 12 9.166V5.414c0-.89-1.077-1.337-1.707-.707z"})})}qA.displayName="VolumeOffIcon";const zie=f.forwardRef(qA);function GA(e,t){return h.jsxs("svg",{xmlns:"http://www.w3.org/2000/svg",width:"1em",height:"1em",fill:"currentColor",viewBox:"0 0 24 24",ref:t,...e,children:[h.jsx("path",{d:"M3 14v-4a2 2 0 0 1 2-2h2l3.293-3.293c.63-.63 1.707-.184 1.707.707v13.172c0 .89-1.077 1.337-1.707.707L7 16H5a2 2 0 0 1-2-2m11.122-5.536a1 1 0 0 1 1.414 0A5 5 0 0 1 17 12c0 1.38-.56 2.632-1.464 3.536a1 1 0 0 1-1.415-1.415 3 3 0 0 0 .88-2.121c0-.829-.335-1.577-.88-2.121a1 1 0 0 1 0-1.415"}),h.jsx("path",{d:"M16.95 5.636a1 1 0 0 1 1.414 0A8.98 8.98 0 0 1 21 12a8.98 8.98 0 0 1-2.636 6.364 1 1 0 0 1-1.414-1.414A6.98 6.98 0 0 0 19 12a6.98 6.98 0 0 0-2.05-4.95 1 1 0 0 1 0-1.414"})]})}GA.displayName="VolumeOnSolidIcon";const Yie=f.forwardRef(GA);function KA(e,t){return h.jsxs("svg",{xmlns:"http://www.w3.org/2000/svg",width:"1em",height:"1em",fill:"currentColor",viewBox:"0 0 24 24",ref:t,...e,children:[h.jsx("path",{d:"M3 10a2 2 0 0 1 2-2h2l3.293-3.293c.63-.63 1.707-.184 1.707.707v13.172c0 .89-1.077 1.337-1.707.707L7 16H5a2 2 0 0 1-2-2zm4.828 4L10 16.172V7.828L7.828 10H5v4zm6.294-5.536a1 1 0 0 1 1.414 0A5 5 0 0 1 17 12c0 1.38-.56 2.632-1.464 3.535a1 1 0 1 1-1.415-1.414 3 3 0 0 0 .88-2.121c0-.829-.335-1.578-.88-2.122a1 1 0 0 1 0-1.414"}),h.jsx("path",{d:"M18.364 5.636A1 1 0 1 0 16.95 7.05 6.98 6.98 0 0 1 19 12a6.98 6.98 0 0 1-2.05 4.95 1 1 0 0 0 1.414 1.414A8.98 8.98 0 0 0 21 12a8.98 8.98 0 0 0-2.636-6.364"})]})}KA.displayName="VolumeOnIcon";const Xie=f.forwardRef(KA);function WA(e,t){return h.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",width:"1em",height:"1em",fill:"currentColor",viewBox:"0 0 24 24",ref:t,...e,children:h.jsx("path",{d:"M4 20q-.824 0-1.412-.587A1.93 1.93 0 0 1 2 18V6q0-.824.587-1.412A1.93 1.93 0 0 1 4 4h16q.824 0 1.413.588Q22 5.175 22 6v12q0 .824-.587 1.413A1.93 1.93 0 0 1 20 20zm0-2h16V8H4z"})})}WA.displayName="WebBrowserIcon";const Zie=f.forwardRef(WA),Qie="_header_p1omj_8",Jie="_nav_p1omj_18",eoe="_headerLogo_p1omj_26",toe="_leftNav_p1omj_33",noe="_hideMobile_p1omj_33",roe="_rightNav_p1omj_45",ioe="_roomHeaderInfo_p1omj_61",ooe="_roomAvatar_p1omj_76",soe="_nameLine_p1omj_81",aoe="_participantsLine_p1omj_100",Zr={header:Qie,nav:Jie,headerLogo:eoe,leftNav:toe,hideMobile:noe,rightNav:roe,roomHeaderInfo:ioe,roomAvatar:ooe,nameLine:soe,participantsLine:aoe},coe=(e,t)=>f.createElement("svg",{width:260,height:30,viewBox:"0 0 260 30",fill:"none",xmlns:"http://www.w3.org/2000/svg",ref:t,...e},f.createElement("desc",null,"Element Call (Beta)"),f.createElement("circle",{cx:15,cy:15,r:13,fill:"white"}),f.createElement("path",{fillRule:"evenodd",clipRule:"evenodd",d:"M15 30C23.2843 30 30 23.2843 30 15C30 6.71573 23.2843 0 15 0C6.71573 0 0 6.71573 0 15C0 23.2843 6.71573 30 15 30ZM12.2579 6.98923C12.2579 6.38376 12.7497 5.89292 13.3565 5.89292C17.4687 5.89292 20.8024 9.21967 20.8024 13.3234C20.8024 13.9289 20.3106 14.4197 19.7038 14.4197C19.0971 14.4197 18.6052 13.9289 18.6052 13.3234C18.6052 10.4306 16.2553 8.08554 13.3565 8.08554C12.7497 8.08554 12.2579 7.59471 12.2579 6.98923ZM24.1066 13.3235C24.1066 12.7181 23.6148 12.2272 23.008 12.2272C22.4013 12.2272 21.9094 12.7181 21.9094 13.3235C21.9094 16.2163 19.5595 18.5614 16.6607 18.5614C16.0539 18.5614 15.5621 19.0523 15.5621 19.6577C15.5621 20.2632 16.0539 20.754 16.6607 20.754C20.7729 20.754 24.1066 17.4273 24.1066 13.3235ZM17.7601 23.011C17.7601 23.6164 17.2682 24.1073 16.6615 24.1073C12.5492 24.1073 9.21553 20.7805 9.21553 16.6768C9.21553 16.0713 9.70739 15.5805 10.3141 15.5805C10.9209 15.5805 11.4127 16.0713 11.4127 16.6768C11.4127 19.5696 13.7627 21.9146 16.6615 21.9146C17.2682 21.9146 17.7601 22.4055 17.7601 23.011ZM5.89281 16.6769C5.89281 17.2824 6.38466 17.7732 6.9914 17.7732C7.59813 17.7732 8.08999 17.2824 8.08999 16.6769C8.08999 13.7841 10.4399 11.439 13.3388 11.439C13.9455 11.439 14.4373 10.9482 14.4373 10.3427C14.4373 9.73722 13.9455 9.24639 13.3388 9.24639C9.22647 9.24639 5.89281 12.5731 5.89281 16.6769Z",fill:"#0DBD8B"}),f.createElement("path",{d:"M53.5406 17.258H42.8052C42.932 18.3814 43.3397 19.2782 44.0282 19.9486C44.7167 20.6009 45.6227 20.927 46.746 20.927C47.4889 20.927 48.1593 20.7459 48.7572 20.3835C49.3551 20.0211 49.7809 19.5319 50.0346 18.9159H53.296C52.8611 20.3472 52.0458 21.5068 50.8499 22.3947C49.6722 23.2644 48.2771 23.6992 46.6645 23.6992C44.5627 23.6992 42.8596 23.0016 41.555 21.6065C40.2686 20.2114 39.6254 18.4448 39.6254 16.3068C39.6254 14.2231 40.2776 12.4747 41.5822 11.0614C42.8867 9.64814 44.5718 8.94151 46.6373 8.94151C48.7029 8.94151 50.3698 9.63908 51.6381 11.0342C52.9245 12.4112 53.5677 14.1506 53.5677 16.2524L53.5406 17.258ZM46.6373 11.5778C45.6227 11.5778 44.7801 11.8767 44.1098 12.4747C43.4394 13.0726 43.0226 13.8698 42.8596 14.8663H50.3607C50.2158 13.8698 49.8172 13.0726 49.1649 12.4747C48.5126 11.8767 47.6701 11.5778 46.6373 11.5778Z",fill:"currentColor"}),f.createElement("path",{d:"M55.7934 19.1605V2.9895H59.0276V19.2148C59.0276 19.9396 59.4262 20.302 60.2234 20.302L60.7941 20.2748V23.3459C60.4861 23.4003 60.16 23.4274 59.8157 23.4274C58.4206 23.4274 57.3969 23.0741 56.7446 22.3675C56.1104 21.6609 55.7934 20.5919 55.7934 19.1605Z",fill:"currentColor"}),f.createElement("path",{d:"M75.8563 17.258H65.121C65.2478 18.3814 65.6555 19.2782 66.344 19.9486C67.0325 20.6009 67.9384 20.927 69.0618 20.927C69.8047 20.927 70.4751 20.7459 71.073 20.3835C71.6709 20.0211 72.0967 19.5319 72.3503 18.9159H75.6117C75.1769 20.3472 74.3615 21.5068 73.1657 22.3947C71.988 23.2644 70.5928 23.6992 68.9803 23.6992C66.8785 23.6992 65.1753 23.0016 63.8708 21.6065C62.5843 20.2114 61.9411 18.4448 61.9411 16.3068C61.9411 14.2231 62.5934 12.4747 63.898 11.0614C65.2025 9.64814 66.8875 8.94151 68.9531 8.94151C71.0186 8.94151 72.6855 9.63908 73.9539 11.0342C75.2403 12.4112 75.8835 14.1506 75.8835 16.2524L75.8563 17.258ZM68.9531 11.5778C67.9384 11.5778 67.0959 11.8767 66.4255 12.4747C65.7551 13.0726 65.3384 13.8698 65.1753 14.8663H72.6765C72.5315 13.8698 72.1329 13.0726 71.4806 12.4747C70.8284 11.8767 69.9859 11.5778 68.9531 11.5778Z",fill:"currentColor"}),f.createElement("path",{d:"M90.448 15.274V23.3731H87.2138V14.9207C87.2138 12.7827 86.326 11.7137 84.5503 11.7137C83.59 11.7137 82.82 12.0217 82.2402 12.6377C81.6785 13.2538 81.3977 14.0963 81.3977 15.1653V23.3731H78.1635V9.26764H81.1531V11.1429C81.4973 10.5088 82.0228 9.98333 82.7294 9.5666C83.436 9.14987 84.3148 8.94151 85.3657 8.94151C87.3225 8.94151 88.7358 9.68438 89.6055 11.1701C90.8013 9.68438 92.3958 8.94151 94.3888 8.94151C96.0376 8.94151 97.3059 9.45789 98.1937 10.4907C99.0816 11.5053 99.5255 12.8461 99.5255 14.513V23.3731H96.2913V14.9207C96.2913 12.7827 95.4035 11.7137 93.6278 11.7137C92.6494 11.7137 91.8703 12.0308 91.2905 12.6649C90.7288 13.2809 90.448 14.1506 90.448 15.274Z",fill:"currentColor"}),f.createElement("path",{d:"M115.61 17.258H104.874C105.001 18.3814 105.409 19.2782 106.097 19.9486C106.786 20.6009 107.692 20.927 108.815 20.927C109.558 20.927 110.228 20.7459 110.826 20.3835C111.424 20.0211 111.85 19.5319 112.104 18.9159H115.365C114.93 20.3472 114.115 21.5068 112.919 22.3947C111.741 23.2644 110.346 23.6992 108.734 23.6992C106.632 23.6992 104.929 23.0016 103.624 21.6065C102.338 20.2114 101.694 18.4448 101.694 16.3068C101.694 14.2231 102.347 12.4747 103.651 11.0614C104.956 9.64814 106.641 8.94151 108.706 8.94151C110.772 8.94151 112.439 9.63908 113.707 11.0342C114.994 12.4112 115.637 14.1506 115.637 16.2524L115.61 17.258ZM108.706 11.5778C107.692 11.5778 106.849 11.8767 106.179 12.4747C105.508 13.0726 105.092 13.8698 104.929 14.8663H112.43C112.285 13.8698 111.886 13.0726 111.234 12.4747C110.582 11.8767 109.739 11.5778 108.706 11.5778Z",fill:"currentColor"}),f.createElement("path",{d:"M120.906 9.26764V11.1429C121.232 10.5269 121.767 10.0105 122.51 9.59378C123.271 9.15893 124.186 8.94151 125.255 8.94151C126.922 8.94151 128.208 9.44883 129.114 10.4635C130.038 11.4781 130.5 12.828 130.5 14.513V23.3731H127.266V14.9207C127.266 13.9242 127.03 13.1451 126.559 12.5834C126.106 12.0036 125.409 11.7137 124.467 11.7137C123.434 11.7137 122.619 12.0217 122.021 12.6377C121.441 13.2538 121.151 14.1053 121.151 15.1925V23.3731H117.917V9.26764H120.906Z",fill:"currentColor"}),f.createElement("path",{d:"M139.946 20.4922V23.2915C139.547 23.4003 138.985 23.4546 138.261 23.4546C135.507 23.4546 134.13 22.0685 134.13 19.2964V11.8496H131.982V9.26764H134.13V5.5986H137.364V9.26764H140V11.8496H137.364V18.9702C137.364 20.0755 137.889 20.6281 138.94 20.6281L139.946 20.4922Z",fill:"currentColor"}),f.createElement("path",{d:"M148.304 20.864C146.768 19.184 146 17.056 146 14.48C146 11.904 146.768 9.784 148.304 8.12C149.856 6.44 151.896 5.6 154.424 5.6C156.504 5.6 158.264 6.176 159.704 7.328C161.144 8.48 162.064 10.024 162.464 11.96H160.616C160.28 10.52 159.552 9.376 158.432 8.528C157.312 7.68 155.976 7.256 154.424 7.256C152.44 7.256 150.84 7.92 149.624 9.248C148.424 10.576 147.824 12.32 147.824 14.48C147.824 16.64 148.424 18.384 149.624 19.712C150.84 21.04 152.44 21.704 154.424 21.704C155.976 21.704 157.312 21.28 158.432 20.432C159.552 19.584 160.28 18.44 160.616 17H162.464C162.064 18.936 161.144 20.48 159.704 21.632C158.264 22.784 156.504 23.36 154.424 23.36C151.896 23.36 149.856 22.528 148.304 20.864Z",fill:"currentColor"}),f.createElement("path",{d:"M173.63 17.192C171.438 17.192 169.942 17.24 169.142 17.336C168.358 17.416 167.782 17.552 167.414 17.744C166.758 18.112 166.43 18.704 166.43 19.52C166.43 21.088 167.358 21.872 169.214 21.872C170.638 21.872 171.726 21.552 172.478 20.912C173.246 20.272 173.63 19.416 173.63 18.344V17.192ZM169.022 23.288C167.63 23.288 166.566 22.952 165.83 22.28C165.11 21.592 164.75 20.688 164.75 19.568C164.75 18.832 164.942 18.176 165.326 17.6C165.726 17.024 166.27 16.6 166.958 16.328C167.534 16.104 168.278 15.96 169.19 15.896C170.102 15.816 171.582 15.776 173.63 15.776V14.984C173.63 12.968 172.478 11.96 170.174 11.96C168.19 11.96 167.038 12.768 166.718 14.384H165.062C165.238 13.2 165.742 12.256 166.574 11.552C167.422 10.848 168.646 10.496 170.246 10.496C171.958 10.496 173.23 10.896 174.062 11.696C174.91 12.496 175.334 13.6 175.334 15.008V23H173.702V21.224C172.854 22.6 171.294 23.288 169.022 23.288Z",fill:"currentColor"}),f.createElement("path",{d:"M179.418 20.312V5H181.122V20.12C181.122 20.616 181.202 20.96 181.362 21.152C181.538 21.344 181.85 21.44 182.298 21.44L182.778 21.392V22.952C182.506 23 182.21 23.024 181.89 23.024C180.242 23.024 179.418 22.12 179.418 20.312Z",fill:"currentColor"}),f.createElement("path",{d:"M185.582 20.312V5H187.286V20.12C187.286 20.616 187.366 20.96 187.526 21.152C187.702 21.344 188.014 21.44 188.462 21.44L188.942 21.392V22.952C188.67 23 188.374 23.024 188.054 23.024C186.406 23.024 185.582 22.12 185.582 20.312Z",fill:"currentColor"}),f.createElement("path",{d:"M201 10C201 5.58172 204.582 2 209 2H252C256.418 2 260 5.58172 260 10V20C260 24.4183 256.418 28 252 28H209C204.582 28 201 24.4183 201 20V10Z",fill:"#368BD6"}),f.createElement("path",{d:"M212.076 20H216.492C218.99 20 220.215 18.7269 220.215 17.0277C220.215 15.3764 219.043 14.407 217.882 14.3484V14.2418C218.947 13.9915 219.789 13.2457 219.789 11.9194C219.789 10.2947 218.617 9.09091 216.252 9.09091H212.076V20ZM214.052 18.3487V15.1527H216.231C217.451 15.1527 218.207 15.8984 218.207 16.8732C218.207 17.7415 217.61 18.3487 216.178 18.3487H214.052ZM214.052 13.7305V10.7209H216.05C217.211 10.7209 217.813 11.3335 217.813 12.1751C217.813 13.1339 217.035 13.7305 216.007 13.7305H214.052ZM221.934 20H229.072V18.3434H223.911V15.3658H228.662V13.7092H223.911V10.7475H229.03V9.09091H221.934V20ZM230.566 10.7475H233.938V20H235.898V10.7475H239.27V9.09091H230.566V10.7475ZM241.031 20L241.931 17.31H246.032L246.938 20H249.047L245.201 9.09091H242.762L238.921 20H241.031ZM242.464 15.7227L243.939 11.3281H244.024L245.5 15.7227H242.464Z",fill:"white"})),loe=f.forwardRef(coe);var oc=(e=>(e.XS="xs",e.SM="sm",e.MD="md",e.LG="lg",e.XL="xl",e))(oc||{});const uoe=new Map([["xs",22],["sm",32],["md",36],["lg",42],["xl",90]]);function doe(e,t,n=96){const r=Math.floor(n*window.devicePixelRatio),i=Math.floor(n*window.devicePixelRatio),o=n<=96?"crop":"scale";return t?e.mxcUrlToHttp(t,r,i,o,!1,!0,!0):null}const sc=({className:e,id:t,name:n,src:r,size:i="md",style:o,...s})=>{const a=uu(),c=f.useMemo(()=>Object.values(oc).includes(i)?uoe.get(i):i,[i]),[l,u]=f.useState(void 0);return f.useEffect(()=>{if(a?.state!=="valid")return;const{authenticated:d,supportedFeatures:p}=a,g=d?.client;if(!g||!r||!c||!p.thumbnails)return;const v=g.getAccessToken();if(!v)return;const m=doe(g,r,c);if(!m){u(void 0);return}let _;return fetch(m,{headers:{Authorization:`Bearer ${v}`}}).then(async y=>y.blob()).then(y=>{_=URL.createObjectURL(y),u(_)}).catch(y=>{u(void 0)}),()=>{_&&URL.revokeObjectURL(_)}},[a,r,c]),h.jsx(mY,{className:e,id:t,name:n,size:`${c}px`,src:l,style:o,...s})},foe="_lock_zf62g_8",hoe={lock:foe},poe=({encrypted:e})=>{const{t}=he(),n=e?Pie:Aie,r=t(e?"common.encrypted":"common.unencrypted");return h.jsx(sn,{label:r,placement:"right",isTriggerInteractive:!1,children:h.jsx(n,{width:16,height:16,className:hoe.lock,"data-encrypted":e})})};function Kg(e){const t=f.useMemo(()=>window.matchMedia(e),[e]),n=f.useCallback(i=>(t.addEventListener("change",i),()=>t.removeEventListener("change",i)),[t]),r=f.useCallback(()=>t.matches,[t]);return f.useSyncExternalStore(n,r)}const goe="_banner_sye6n_8",moe={banner:goe},voe=({children:e,className:t,...n})=>{const{t:r}=he(),i=uu();let o=!1;return i?.state==="valid"&&(o=i.disconnected),h.jsx(h.Fragment,{children:o&&h.jsxs("div",{className:Z(moe.banner,t),...n,children:[e,r("disconnected_banner")]})})},as=({ref:e,children:t,className:n,disconnectedBanner:r=!0,...i})=>h.jsxs(h.Fragment,{children:[h.jsx("header",{ref:e,className:Z(Zr.header,n),...i,children:t}),r&&h.jsx(voe,{})]});as.displayName="Header";const ra=({children:e,className:t,hideMobile:n,...r})=>h.jsx("div",{className:Z(Zr.nav,Zr.leftNav,{[Zr.hideMobile]:n},t),...r,children:e}),ia=({children:e,className:t,hideMobile:n,...r})=>h.jsx("div",{className:Z(Zr.nav,Zr.rightNav,{[Zr.hideMobile]:n},t),...r,children:e}),Ua=({className:e})=>{const{t}=he();return h.jsx(fg,{className:Z(Zr.headerLogo,e),to:"/","aria-label":t("header_label"),children:h.jsx(loe,{})})},zA=({id:e,name:t,avatarUrl:n,encrypted:r,participantCount:i})=>{const{t:o}=he(),s=Kg("(max-width: 550px)")?"sm":"lg";return h.jsxs("div",{className:Zr.roomHeaderInfo,"data-size":s,children:[h.jsx(sc,{className:Zr.roomAvatar,id:e,name:t,size:s==="sm"?oc.SM:56,src:n??void 0}),h.jsxs("div",{className:Zr.nameLine,children:[h.jsx(Fi,{type:s==="sm"?"body":"heading",size:s==="sm"?"lg":"md",weight:"semibold","data-testid":"roomHeader_roomName",children:t}),h.jsx(poe,{encrypted:r})]}),(i??0)>0&&h.jsxs("div",{className:Zr.participantsLine,children:[h.jsx(jA,{width:20,height:20,"aria-label":o("header_participants_label")}),h.jsx(Ye,{as:"span",size:"sm",weight:"medium","data-testid":"roomHeader_participants_count",children:o("participant_count",{count:i??0})})]})]})},yoe="_page_fvtgn_8",_oe="_container_fvtgn_20",boe="_content_fvtgn_28",r2={page:yoe,container:_oe,content:boe};function YA(e,t){for(var n=-1,r=e==null?0:e.length,i=Array(r);++n<r;)i[n]=t(e[n],n,e);return i}var $i=Array.isArray,U7=Wp?Wp.prototype:void 0,B7=U7?U7.toString:void 0;function XA(e){if(typeof e=="string")return e;if($i(e))return YA(e,XA)+"";if(K3(e))return B7?B7.call(e):"";var t=e+"";return t=="0"&&1/e==-1/0?"-0":t}function D_(e){return e}var woe="[object AsyncFunction]",Soe="[object Function]",Coe="[object GeneratorFunction]",Eoe="[object Proxy]";function F_(e){if(!Mi(e))return!1;var t=Wl(e);return t==Soe||t==Coe||t==woe||t==Eoe}var i2=os["__core-js_shared__"],V7=(function(){var e=/[^.]+$/.exec(i2&&i2.keys&&i2.keys.IE_PROTO||"");return e?"Symbol(src)_1."+e:""})();function xoe(e){return!!V7&&V7 in e}var Ioe=Function.prototype,Roe=Ioe.toString;function ac(e){if(e!=null){try{return Roe.call(e)}catch{}try{return e+""}catch{}}return""}var Loe=/[\\^$.*+?()[\]{}|]/g,koe=/^\[object .+?Constructor\]$/,Toe=Function.prototype,Aoe=Object.prototype,Poe=Toe.toString,Moe=Aoe.hasOwnProperty,Noe=RegExp("^"+Poe.call(Moe).replace(Loe,"\\$&").replace(/hasOwnProperty|(function).*?(?=\\\()| for .+?(?=\\\])/g,"$1.*?")+"$");function $oe(e){if(!Mi(e)||xoe(e))return!1;var t=F_(e)?Noe:koe;return t.test(ac(e))}function Ooe(e,t){return e?.[t]}function cc(e,t){var n=Ooe(e,t);return $oe(n)?n:void 0}var xy=cc(os,"WeakMap"),q7=Object.create,joe=(function(){function e(){}return function(t){if(!Mi(t))return{};if(q7)return q7(t);e.prototype=t;var n=new e;return e.prototype=void 0,n}})();function Doe(e,t,n){switch(n.length){case 0:return e.call(t);case 1:return e.call(t,n[0]);case 2:return e.call(t,n[0],n[1]);case 3:return e.call(t,n[0],n[1],n[2])}return e.apply(t,n)}function Foe(e,t){var n=-1,r=e.length;for(t||(t=Array(r));++n<r;)t[n]=e[n];return t}var Hoe=800,Uoe=16,Boe=Date.now;function Voe(e){var t=0,n=0;return function(){var r=Boe(),i=Uoe-(r-n);if(n=r,i>0){if(++t>=Hoe)return arguments[0]}else t=0;return e.apply(void 0,arguments)}}function qoe(e){return function(){return e}}var C1=(function(){try{var e=cc(Object,"defineProperty");return e({},"",{}),e}catch{}})(),Goe=C1?function(e,t){return C1(e,"toString",{configurable:!0,enumerable:!1,value:qoe(t),writable:!0})}:D_,Koe=Voe(Goe),Woe=9007199254740991,zoe=/^(?:0|[1-9]\d*)$/;function Wg(e,t){var n=typeof e;return t=t??Woe,!!t&&(n=="number"||n!="symbol"&&zoe.test(e))&&e>-1&&e%1==0&&e<t}function H_(e,t,n){t=="__proto__"&&C1?C1(e,t,{configurable:!0,enumerable:!0,value:n,writable:!0}):e[t]=n}function Bf(e,t){return e===t||e!==e&&t!==t}var Yoe=Object.prototype,Xoe=Yoe.hasOwnProperty;function ZA(e,t,n){var r=e[t];(!(Xoe.call(e,t)&&Bf(r,n))||n===void 0&&!(t in e))&&H_(e,t,n)}function Zoe(e,t,n,r){var i=!n;n||(n={});for(var o=-1,s=t.length;++o<s;){var a=t[o],c=void 0;c===void 0&&(c=e[a]),i?H_(n,a,c):ZA(n,a,c)}return n}var G7=Math.max;function Qoe(e,t,n){return t=G7(t===void 0?e.length-1:t,0),function(){for(var r=arguments,i=-1,o=G7(r.length-t,0),s=Array(o);++i<o;)s[i]=r[t+i];i=-1;for(var a=Array(t+1);++i<t;)a[i]=r[i];return a[t]=n(s),Doe(e,this,a)}}function Joe(e,t){return Koe(Qoe(e,t,D_),e+"")}var ese=9007199254740991;function U_(e){return typeof e=="number"&&e>-1&&e%1==0&&e<=ese}function zg(e){return e!=null&&U_(e.length)&&!F_(e)}function tse(e,t,n){if(!Mi(n))return!1;var r=typeof t;return(r=="number"?zg(n)&&Wg(t,n.length):r=="string"&&t in n)?Bf(n[t],e):!1}function nse(e){return Joe(function(t,n){var r=-1,i=n.length,o=i>1?n[i-1]:void 0,s=i>2?n[2]:void 0;for(o=e.length>3&&typeof o=="function"?(i--,o):void 0,s&&tse(n[0],n[1],s)&&(o=i<3?void 0:o,i=1),t=Object(t);++r<i;){var a=n[r];a&&e(t,a,r,o)}return t})}var rse=Object.prototype;function B_(e){var t=e&&e.constructor,n=typeof t=="function"&&t.prototype||rse;return e===n}function ise(e,t){for(var n=-1,r=Array(e);++n<e;)r[n]=t(n);return r}var ose="[object Arguments]";function K7(e){return Pa(e)&&Wl(e)==ose}var QA=Object.prototype,sse=QA.hasOwnProperty,ase=QA.propertyIsEnumerable,E1=K7((function(){return arguments})())?K7:function(e){return Pa(e)&&sse.call(e,"callee")&&!ase.call(e,"callee")};function cse(){return!1}var JA=typeof exports=="object"&&exports&&!exports.nodeType&&exports,W7=JA&&typeof module=="object"&&module&&!module.nodeType&&module,lse=W7&&W7.exports===JA,z7=lse?os.Buffer:void 0,use=z7?z7.isBuffer:void 0,x1=use||cse,dse="[object Arguments]",fse="[object Array]",hse="[object Boolean]",pse="[object Date]",gse="[object Error]",mse="[object Function]",vse="[object Map]",yse="[object Number]",_se="[object Object]",bse="[object RegExp]",wse="[object Set]",Sse="[object String]",Cse="[object WeakMap]",Ese="[object ArrayBuffer]",xse="[object DataView]",Ise="[object Float32Array]",Rse="[object Float64Array]",Lse="[object Int8Array]",kse="[object Int16Array]",Tse="[object Int32Array]",Ase="[object Uint8Array]",Pse="[object Uint8ClampedArray]",Mse="[object Uint16Array]",Nse="[object Uint32Array]",_t={};_t[Ise]=_t[Rse]=_t[Lse]=_t[kse]=_t[Tse]=_t[Ase]=_t[Pse]=_t[Mse]=_t[Nse]=!0;_t[dse]=_t[fse]=_t[Ese]=_t[hse]=_t[xse]=_t[pse]=_t[gse]=_t[mse]=_t[vse]=_t[yse]=_t[_se]=_t[bse]=_t[wse]=_t[Sse]=_t[Cse]=!1;function $se(e){return Pa(e)&&U_(e.length)&&!!_t[Wl(e)]}function Ose(e){return function(t){return e(t)}}var eP=typeof exports=="object"&&exports&&!exports.nodeType&&exports,gd=eP&&typeof module=="object"&&module&&!module.nodeType&&module,jse=gd&&gd.exports===eP,o2=jse&&bD.process,Y7=(function(){try{var e=gd&&gd.require&&gd.require("util").types;return e||o2&&o2.binding&&o2.binding("util")}catch{}})(),X7=Y7&&Y7.isTypedArray,V_=X7?Ose(X7):$se,Dse=Object.prototype,Fse=Dse.hasOwnProperty;function tP(e,t){var n=$i(e),r=!n&&E1(e),i=!n&&!r&&x1(e),o=!n&&!r&&!i&&V_(e),s=n||r||i||o,a=s?ise(e.length,String):[],c=a.length;for(var l in e)(t||Fse.call(e,l))&&!(s&&(l=="length"||i&&(l=="offset"||l=="parent")||o&&(l=="buffer"||l=="byteLength"||l=="byteOffset")||Wg(l,c)))&&a.push(l);return a}function nP(e,t){return function(n){return e(t(n))}}var Hse=nP(Object.keys,Object),Use=Object.prototype,Bse=Use.hasOwnProperty;function Vse(e){if(!B_(e))return Hse(e);var t=[];for(var n in Object(e))Bse.call(e,n)&&n!="constructor"&&t.push(n);return t}function rP(e){return zg(e)?tP(e):Vse(e)}function qse(e){var t=[];if(e!=null)for(var n in Object(e))t.push(n);return t}var Gse=Object.prototype,Kse=Gse.hasOwnProperty;function Wse(e){if(!Mi(e))return qse(e);var t=B_(e),n=[];for(var r in e)r=="constructor"&&(t||!Kse.call(e,r))||n.push(r);return n}function q_(e){return zg(e)?tP(e,!0):Wse(e)}var zse=/\.|\[(?:[^[\]]*|(["'])(?:(?!\1)[^\\]|\\.)*?\1)\]/,Yse=/^\w*$/;function G_(e,t){if($i(e))return!1;var n=typeof e;return n=="number"||n=="symbol"||n=="boolean"||e==null||K3(e)?!0:Yse.test(e)||!zse.test(e)||t!=null&&e in Object(t)}var Kd=cc(Object,"create");function Xse(){this.__data__=Kd?Kd(null):{},this.size=0}function Zse(e){var t=this.has(e)&&delete this.__data__[e];return this.size-=t?1:0,t}var Qse="__lodash_hash_undefined__",Jse=Object.prototype,eae=Jse.hasOwnProperty;function tae(e){var t=this.__data__;if(Kd){var n=t[e];return n===Qse?void 0:n}return eae.call(t,e)?t[e]:void 0}var nae=Object.prototype,rae=nae.hasOwnProperty;function iae(e){var t=this.__data__;return Kd?t[e]!==void 0:rae.call(t,e)}var oae="__lodash_hash_undefined__";function sae(e,t){var n=this.__data__;return this.size+=this.has(e)?0:1,n[e]=Kd&&t===void 0?oae:t,this}function Ba(e){var t=-1,n=e==null?0:e.length;for(this.clear();++t<n;){var r=e[t];this.set(r[0],r[1])}}Ba.prototype.clear=Xse;Ba.prototype.delete=Zse;Ba.prototype.get=tae;Ba.prototype.has=iae;Ba.prototype.set=sae;function aae(){this.__data__=[],this.size=0}function Yg(e,t){for(var n=e.length;n--;)if(Bf(e[n][0],t))return n;return-1}var cae=Array.prototype,lae=cae.splice;function uae(e){var t=this.__data__,n=Yg(t,e);if(n<0)return!1;var r=t.length-1;return n==r?t.pop():lae.call(t,n,1),--this.size,!0}function dae(e){var t=this.__data__,n=Yg(t,e);return n<0?void 0:t[n][1]}function fae(e){return Yg(this.__data__,e)>-1}function hae(e,t){var n=this.__data__,r=Yg(n,e);return r<0?(++this.size,n.push([e,t])):n[r][1]=t,this}function cs(e){var t=-1,n=e==null?0:e.length;for(this.clear();++t<n;){var r=e[t];this.set(r[0],r[1])}}cs.prototype.clear=aae;cs.prototype.delete=uae;cs.prototype.get=dae;cs.prototype.has=fae;cs.prototype.set=hae;var Wd=cc(os,"Map");function pae(){this.size=0,this.__data__={hash:new Ba,map:new(Wd||cs),string:new Ba}}function gae(e){var t=typeof e;return t=="string"||t=="number"||t=="symbol"||t=="boolean"?e!=="__proto__":e===null}function Xg(e,t){var n=e.__data__;return gae(t)?n[typeof t=="string"?"string":"hash"]:n.map}function mae(e){var t=Xg(this,e).delete(e);return this.size-=t?1:0,t}function vae(e){return Xg(this,e).get(e)}function yae(e){return Xg(this,e).has(e)}function _ae(e,t){var n=Xg(this,e),r=n.size;return n.set(e,t),this.size+=n.size==r?0:1,this}function ls(e){var t=-1,n=e==null?0:e.length;for(this.clear();++t<n;){var r=e[t];this.set(r[0],r[1])}}ls.prototype.clear=pae;ls.prototype.delete=mae;ls.prototype.get=vae;ls.prototype.has=yae;ls.prototype.set=_ae;var bae="Expected a function";function K_(e,t){if(typeof e!="function"||t!=null&&typeof t!="function")throw new TypeError(bae);var n=function(){var r=arguments,i=t?t.apply(this,r):r[0],o=n.cache;if(o.has(i))return o.get(i);var s=e.apply(this,r);return n.cache=o.set(i,s)||o,s};return n.cache=new(K_.Cache||ls),n}K_.Cache=ls;var wae=500;function Sae(e){var t=K_(e,function(r){return n.size===wae&&n.clear(),r}),n=t.cache;return t}var Cae=/[^.[\]]+|\[(?:(-?\d+(?:\.\d+)?)|(["'])((?:(?!\2)[^\\]|\\.)*?)\2)\]|(?=(?:\.|\[\])(?:\.|\[\]|$))/g,Eae=/\\(\\)?/g,xae=Sae(function(e){var t=[];return e.charCodeAt(0)===46&&t.push(""),e.replace(Cae,function(n,r,i,o){t.push(i?o.replace(Eae,"$1"):r||n)}),t});function Iae(e){return e==null?"":XA(e)}function Zg(e,t){return $i(e)?e:G_(e,t)?[e]:xae(Iae(e))}function Vf(e){if(typeof e=="string"||K3(e))return e;var t=e+"";return t=="0"&&1/e==-1/0?"-0":t}function W_(e,t){t=Zg(t,e);for(var n=0,r=t.length;e!=null&&n<r;)e=e[Vf(t[n++])];return n&&n==r?e:void 0}function Rae(e,t,n){var r=e==null?void 0:W_(e,t);return r===void 0?n:r}function iP(e,t){for(var n=-1,r=t.length,i=e.length;++n<r;)e[i+n]=t[n];return e}var z_=nP(Object.getPrototypeOf,Object),Lae="[object Object]",kae=Function.prototype,Tae=Object.prototype,oP=kae.toString,Aae=Tae.hasOwnProperty,Pae=oP.call(Object);function Mae(e){if(!Pa(e)||Wl(e)!=Lae)return!1;var t=z_(e);if(t===null)return!0;var n=Aae.call(t,"constructor")&&t.constructor;return typeof n=="function"&&n instanceof n&&oP.call(n)==Pae}function Nae(){this.__data__=new cs,this.size=0}function $ae(e){var t=this.__data__,n=t.delete(e);return this.size=t.size,n}function Oae(e){return this.__data__.get(e)}function jae(e){return this.__data__.has(e)}var Dae=200;function Fae(e,t){var n=this.__data__;if(n instanceof cs){var r=n.__data__;if(!Wd||r.length<Dae-1)return r.push([e,t]),this.size=++n.size,this;n=this.__data__=new ls(r)}return n.set(e,t),this.size=n.size,this}function ro(e){var t=this.__data__=new cs(e);this.size=t.size}ro.prototype.clear=Nae;ro.prototype.delete=$ae;ro.prototype.get=Oae;ro.prototype.has=jae;ro.prototype.set=Fae;var sP=typeof exports=="object"&&exports&&!exports.nodeType&&exports,Z7=sP&&typeof module=="object"&&module&&!module.nodeType&&module,Hae=Z7&&Z7.exports===sP,Q7=Hae?os.Buffer:void 0;Q7&&Q7.allocUnsafe;function Uae(e,t){return e.slice()}function Bae(e,t){for(var n=-1,r=e==null?0:e.length,i=0,o=[];++n<r;){var s=e[n];t(s,n,e)&&(o[i++]=s)}return o}function aP(){return[]}var Vae=Object.prototype,qae=Vae.propertyIsEnumerable,J7=Object.getOwnPropertySymbols,cP=J7?function(e){return e==null?[]:(e=Object(e),Bae(J7(e),function(t){return qae.call(e,t)}))}:aP,Gae=Object.getOwnPropertySymbols,Kae=Gae?function(e){for(var t=[];e;)iP(t,cP(e)),e=z_(e);return t}:aP;function lP(e,t,n){var r=t(e);return $i(e)?r:iP(r,n(e))}function e8(e){return lP(e,rP,cP)}function Wae(e){return lP(e,q_,Kae)}var Iy=cc(os,"DataView"),Ry=cc(os,"Promise"),Ly=cc(os,"Set"),t8="[object Map]",zae="[object Object]",n8="[object Promise]",r8="[object Set]",i8="[object WeakMap]",o8="[object DataView]",Yae=ac(Iy),Xae=ac(Wd),Zae=ac(Ry),Qae=ac(Ly),Jae=ac(xy),Ss=Wl;(Iy&&Ss(new Iy(new ArrayBuffer(1)))!=o8||Wd&&Ss(new Wd)!=t8||Ry&&Ss(Ry.resolve())!=n8||Ly&&Ss(new Ly)!=r8||xy&&Ss(new xy)!=i8)&&(Ss=function(e){var t=Wl(e),n=t==zae?e.constructor:void 0,r=n?ac(n):"";if(r)switch(r){case Yae:return o8;case Xae:return t8;case Zae:return n8;case Qae:return r8;case Jae:return i8}return t});var I1=os.Uint8Array;function ece(e){var t=new e.constructor(e.byteLength);return new I1(t).set(new I1(e)),t}function tce(e,t){var n=ece(e.buffer);return new e.constructor(n,e.byteOffset,e.length)}function nce(e){return typeof e.constructor=="function"&&!B_(e)?joe(z_(e)):{}}var rce="__lodash_hash_undefined__";function ice(e){return this.__data__.set(e,rce),this}function oce(e){return this.__data__.has(e)}function R1(e){var t=-1,n=e==null?0:e.length;for(this.__data__=new ls;++t<n;)this.add(e[t])}R1.prototype.add=R1.prototype.push=ice;R1.prototype.has=oce;function sce(e,t){for(var n=-1,r=e==null?0:e.length;++n<r;)if(t(e[n],n,e))return!0;return!1}function ace(e,t){return e.has(t)}var cce=1,lce=2;function uP(e,t,n,r,i,o){var s=n&cce,a=e.length,c=t.length;if(a!=c&&!(s&&c>a))return!1;var l=o.get(e),u=o.get(t);if(l&&u)return l==t&&u==e;var d=-1,p=!0,g=n&lce?new R1:void 0;for(o.set(e,t),o.set(t,e);++d<a;){var v=e[d],m=t[d];if(r)var _=s?r(m,v,d,t,e,o):r(v,m,d,e,t,o);if(_!==void 0){if(_)continue;p=!1;break}if(g){if(!sce(t,function(y,w){if(!ace(g,w)&&(v===y||i(v,y,n,r,o)))return g.push(w)})){p=!1;break}}else if(!(v===m||i(v,m,n,r,o))){p=!1;break}}return o.delete(e),o.delete(t),p}function uce(e){var t=-1,n=Array(e.size);return e.forEach(function(r,i){n[++t]=[i,r]}),n}function dce(e){var t=-1,n=Array(e.size);return e.forEach(function(r){n[++t]=r}),n}var fce=1,hce=2,pce="[object Boolean]",gce="[object Date]",mce="[object Error]",vce="[object Map]",yce="[object Number]",_ce="[object RegExp]",bce="[object Set]",wce="[object String]",Sce="[object Symbol]",Cce="[object ArrayBuffer]",Ece="[object DataView]",s8=Wp?Wp.prototype:void 0,s2=s8?s8.valueOf:void 0;function xce(e,t,n,r,i,o,s){switch(n){case Ece:if(e.byteLength!=t.byteLength||e.byteOffset!=t.byteOffset)return!1;e=e.buffer,t=t.buffer;case Cce:return!(e.byteLength!=t.byteLength||!o(new I1(e),new I1(t)));case pce:case gce:case yce:return Bf(+e,+t);case mce:return e.name==t.name&&e.message==t.message;case _ce:case wce:return e==t+"";case vce:var a=uce;case bce:var c=r&fce;if(a||(a=dce),e.size!=t.size&&!c)return!1;var l=s.get(e);if(l)return l==t;r|=hce,s.set(e,t);var u=uP(a(e),a(t),r,i,o,s);return s.delete(e),u;case Sce:if(s2)return s2.call(e)==s2.call(t)}return!1}var Ice=1,Rce=Object.prototype,Lce=Rce.hasOwnProperty;function kce(e,t,n,r,i,o){var s=n&Ice,a=e8(e),c=a.length,l=e8(t),u=l.length;if(c!=u&&!s)return!1;for(var d=c;d--;){var p=a[d];if(!(s?p in t:Lce.call(t,p)))return!1}var g=o.get(e),v=o.get(t);if(g&&v)return g==t&&v==e;var m=!0;o.set(e,t),o.set(t,e);for(var _=s;++d<c;){p=a[d];var y=e[p],w=t[p];if(r)var S=s?r(w,y,p,t,e,o):r(y,w,p,e,t,o);if(!(S===void 0?y===w||i(y,w,n,r,o):S)){m=!1;break}_||(_=p=="constructor")}if(m&&!_){var b=e.constructor,C=t.constructor;b!=C&&"constructor"in e&&"constructor"in t&&!(typeof b=="function"&&b instanceof b&&typeof C=="function"&&C instanceof C)&&(m=!1)}return o.delete(e),o.delete(t),m}var Tce=1,a8="[object Arguments]",c8="[object Array]",Ah="[object Object]",Ace=Object.prototype,l8=Ace.hasOwnProperty;function Pce(e,t,n,r,i,o){var s=$i(e),a=$i(t),c=s?c8:Ss(e),l=a?c8:Ss(t);c=c==a8?Ah:c,l=l==a8?Ah:l;var u=c==Ah,d=l==Ah,p=c==l;if(p&&x1(e)){if(!x1(t))return!1;s=!0,u=!1}if(p&&!u)return o||(o=new ro),s||V_(e)?uP(e,t,n,r,i,o):xce(e,t,c,n,r,i,o);if(!(n&Tce)){var g=u&&l8.call(e,"__wrapped__"),v=d&&l8.call(t,"__wrapped__");if(g||v){var m=g?e.value():e,_=v?t.value():t;return o||(o=new ro),i(m,_,n,r,o)}}return p?(o||(o=new ro),kce(e,t,n,r,i,o)):!1}function Y_(e,t,n,r,i){return e===t?!0:e==null||t==null||!Pa(e)&&!Pa(t)?e!==e&&t!==t:Pce(e,t,n,r,Y_,i)}var Mce=1,Nce=2;function $ce(e,t,n,r){var i=n.length,o=i;if(e==null)return!o;for(e=Object(e);i--;){var s=n[i];if(s[2]?s[1]!==e[s[0]]:!(s[0]in e))return!1}for(;++i<o;){s=n[i];var a=s[0],c=e[a],l=s[1];if(s[2]){if(c===void 0&&!(a in e))return!1}else{var u=new ro,d;if(!(d===void 0?Y_(l,c,Mce|Nce,r,u):d))return!1}}return!0}function dP(e){return e===e&&!Mi(e)}function Oce(e){for(var t=rP(e),n=t.length;n--;){var r=t[n],i=e[r];t[n]=[r,i,dP(i)]}return t}function fP(e,t){return function(n){return n==null?!1:n[e]===t&&(t!==void 0||e in Object(n))}}function jce(e){var t=Oce(e);return t.length==1&&t[0][2]?fP(t[0][0],t[0][1]):function(n){return n===e||$ce(n,e,t)}}function Dce(e,t){return e!=null&&t in Object(e)}function Fce(e,t,n){t=Zg(t,e);for(var r=-1,i=t.length,o=!1;++r<i;){var s=Vf(t[r]);if(!(o=e!=null&&n(e,s)))break;e=e[s]}return o||++r!=i?o:(i=e==null?0:e.length,!!i&&U_(i)&&Wg(s,i)&&($i(e)||E1(e)))}function Hce(e,t){return e!=null&&Fce(e,t,Dce)}var Uce=1,Bce=2;function Vce(e,t){return G_(e)&&dP(t)?fP(Vf(e),t):function(n){var r=Rae(n,e);return r===void 0&&r===t?Hce(n,e):Y_(t,r,Uce|Bce)}}function qce(e){return function(t){return t?.[e]}}function Gce(e){return function(t){return W_(t,e)}}function Kce(e){return G_(e)?qce(Vf(e)):Gce(e)}function Wce(e){return typeof e=="function"?e:e==null?D_:typeof e=="object"?$i(e)?Vce(e[0],e[1]):jce(e):Kce(e)}function zce(e){return function(t,n,r){for(var i=-1,o=Object(t),s=r(t),a=s.length;a--;){var c=s[++i];if(n(o[c],c,o)===!1)break}return t}}var Yce=zce();function ky(e,t,n){(n!==void 0&&!Bf(e[t],n)||n===void 0&&!(t in e))&&H_(e,t,n)}function Xce(e){return Pa(e)&&zg(e)}function Ty(e,t){if(!(t==="constructor"&&typeof e[t]=="function")&&t!="__proto__")return e[t]}function Zce(e){return Zoe(e,q_(e))}function Qce(e,t,n,r,i,o,s){var a=Ty(e,n),c=Ty(t,n),l=s.get(c);if(l){ky(e,n,l);return}var u=o?o(a,c,n+"",e,t,s):void 0,d=u===void 0;if(d){var p=$i(c),g=!p&&x1(c),v=!p&&!g&&V_(c);u=c,p||g||v?$i(a)?u=a:Xce(a)?u=Foe(a):g?(d=!1,u=Uae(c)):v?(d=!1,u=tce(c)):u=[]:Mae(c)||E1(c)?(u=a,E1(a)?u=Zce(a):(!Mi(a)||F_(a))&&(u=nce(c))):d=!1}d&&(s.set(c,u),i(u,c,r,o,s),s.delete(c)),ky(e,n,u)}function hP(e,t,n,r,i){e!==t&&Yce(t,function(o,s){if(i||(i=new ro),Mi(o))Qce(e,t,s,n,hP,r,i);else{var a=r?r(Ty(e,s),o,s+"",e,t,i):void 0;a===void 0&&(a=o),ky(e,s,a)}},q_)}var Jce=nse(function(e,t,n){hP(e,t,n)});function ele(e,t,n,r){if(!Mi(e))return e;t=Zg(t,e);for(var i=-1,o=t.length,s=o-1,a=e;a!=null&&++i<o;){var c=Vf(t[i]),l=n;if(c==="__proto__"||c==="constructor"||c==="prototype")return e;if(i!=s){var u=a[c];l=void 0,l===void 0&&(l=Mi(u)?u:Wg(t[i+1])?[]:{})}ZA(a,c,l),a=a[c]}return e}function tle(e,t,n){for(var r=-1,i=t.length,o={};++r<i;){var s=t[r],a=W_(e,s);n(a,s)&&ele(o,Zg(s,e),a)}return o}function nle(e,t){if(e==null)return{};var n=YA(Wae(e),function(r){return[r]});return t=Wce(t),tle(e,n,function(r,i){return t(r,i[0])})}var rle="Expected a function";function ile(e,t,n){var r=!0,i=!0;if(typeof e!="function")throw new TypeError(rle);return Mi(n)&&(r="leading"in n?!1:r,i="trailing"in n?!0:i),wD(e,t,{leading:r,maxWait:t,trailing:i})}const Ay={default_server_config:{"m.homeserver":{base_url:"http://localhost:8008",server_name:"localhost"}},features:{feature_use_device_session_member_events:!0},ssla:"https://static.element.io/legal/element-software-and-services-license-agreement-uk-1.pdf",app_prompt:!0};function X_(e){return!(e.ok||e.url.startsWith("file:")&&e.status===0)}class it{static get(){if(!this.internalInstance?.config)throw new Error("Config instance read before config got initialized");return this.internalInstance.config}static async init(){if(!it.internalInstance?.initPromise){const t=new it;it.internalInstance=t;let n;window.location.pathname.endsWith("/room/")||window.location.pathname.endsWith("/room")?n=new URL("/config.json",window.location.href).href:n="config.json",it.internalInstance.initPromise=ole(n).then(r=>{t.config=Jce({},Ay,r)})}return it.internalInstance.initPromise}static initDefault(){it.internalInstance=new it,it.internalInstance.config={...Ay}}static defaultHomeserverUrl(){return kt().homeserver??it.get().default_server_config?.["m.homeserver"].base_url}static defaultServerName(){const t=kt().homeserver;return t?new URL(t).hostname:it.get().default_server_config?.["m.homeserver"].server_name}}async function ole(e){const t=await fetch(e);return X_(t)?Ay:t.json()}var mt=(e=>(e[e.NONE=0]="NONE",e[e.PER_PARTICIPANT=1]="PER_PARTICIPANT",e[e.SHARED_KEY=2]="SHARED_KEY",e))(mt||{});let Pi;/android/i.test(navigator.userAgent)?Pi="android":/iPad|iPhone|iPod|Mac/.test(navigator.userAgent)&&"ontouchend"in document?Pi="ios":Pi="desktop";const sle=()=>{const{userAgent:e}=navigator;return e.includes("Firefox")};var pP=(e=>(e.StartNewCall="start_call",e.JoinExistingCall="join_existing",e.StartNewCallDM="start_call_dm",e.StartNewCallDMVoice="start_call_dm_voice",e.JoinExistingCallDM="join_existing_dm",e.JoinExistingCallDMVoice="join_existing_dm_voice",e.Unknown="unknown",e))(pP||{}),zd=(e=>(e.None="none",e.Standard="standard",e.AppBar="app_bar",e))(zd||{});function ale(e,t){const n=e.indexOf("?"),r=t(new URLSearchParams(n===-1?"":e.substring(n)));return`${e.substring(0,n)}?${r.toString()}`}class gP{constructor(t,n){this.queryParams=new URLSearchParams(t);const r=n.indexOf("?");this.fragmentParams=new URLSearchParams(r===-1?"":n.substring(r))}getParam(t){return this.fragmentParams.get(t)??this.queryParams.get(t)}getEnumParam(t,n){const r=this.getParam(t);if(r!==null&&Object.values(n).includes(r))return r}getAllParams(t){return[...this.fragmentParams.getAll(t),...this.queryParams.getAll(t)]}getFlagParam(t,n=!1){const r=this.getParam(t);return r===null?n:r!=="false"}getFlag(t){const n=this.getParam(t);return n!==null?n!=="false":void 0}}let ku={};const kt=(e=window.location.search,t=window.location.hash)=>{if(ku.search===e&&ku.hash===t&&ku.params)return ku.params;const n=cle(e,t);return ku={search:e,hash:t,params:n},n},cle=(e="",t="")=>{const n=new gP(e,t),r=parseFloat(n.getParam("fontScale")??""),i=n.getParam("widgetId"),o=n.getParam("parentUrl"),s=!!i&&!!o,a=s?n.getEnumParam("intent",pP)??"unknown":"unknown";let c={confineToRoom:!0,appPrompt:!1,preload:!1,header:Pi==="desktop"?"none":"app_bar",showControls:!0,hideScreensharing:!1,allowIceFallback:!0,perParticipantE2EE:!0,controlledAudioDevices:Pi!=="desktop",skipLobby:!0,returnToLobby:!1,sendNotificationType:"notification",autoLeaveWhenOthersLeft:!1,waitForCallPickup:!1};switch(a){case"start_call":c.skipLobby=!1,c.callIntent="video";break;case"join_existing":c.skipLobby=!1,c.callIntent="video";break;case"start_call_dm_voice":c.callIntent="audio";case"start_call_dm":c.skipLobby=!0,c.sendNotificationType="ring",c.autoLeaveWhenOthersLeft=!0,c.waitForCallPickup=!0,c.callIntent=c.callIntent??"video";break;case"join_existing_dm_voice":c.callIntent="audio";case"join_existing_dm":c.skipLobby=!0,c.autoLeaveWhenOthersLeft=!0,c.callIntent=c.callIntent??"video";break;default:c={confineToRoom:!1,appPrompt:!0,preload:!1,header:"standard",showControls:!0,hideScreensharing:!1,allowIceFallback:!1,perParticipantE2EE:!1,controlledAudioDevices:!1,skipLobby:!1,returnToLobby:!1,sendNotificationType:void 0,autoLeaveWhenOthersLeft:!1,waitForCallPickup:!1}}const l={widgetId:i,parentUrl:o,roomId:n.getParam("roomId"),password:n.getParam("password"),userId:s?n.getParam("userId"):null,displayName:n.getParam("displayName"),deviceId:s?n.getParam("deviceId"):null,baseUrl:s?n.getParam("baseUrl"):null,lang:n.getParam("lang"),fonts:n.getAllParams("font"),fontScale:Number.isNaN(r)?null:r,theme:n.getParam("theme"),viaServers:s?null:n.getParam("viaServers"),homeserver:s?null:n.getParam("homeserver"),posthogApiHost:n.getParam("posthogApiHost"),posthogApiKey:n.getParam("posthogApiKey"),posthogUserId:n.getParam("posthogUserId")??n.getParam("analyticsID"),rageshakeSubmitUrl:n.getParam("rageshakeSubmitUrl"),sentryDsn:n.getParam("sentryDsn"),sentryEnvironment:n.getParam("sentryEnvironment"),e2eEnabled:n.getFlagParam("enableE2EE",!0)},u={confineToRoom:n.getFlag("confineToRoom"),appPrompt:n.getFlag("appPrompt"),preload:s?n.getFlag("preload"):void 0,header:n.getEnumParam("header",zd),showControls:n.getFlag("showControls"),hideScreensharing:n.getFlag("hideScreensharing"),allowIceFallback:n.getFlag("allowIceFallback"),perParticipantE2EE:n.getFlag("perParticipantE2EE"),controlledAudioDevices:n.getFlag("controlledAudioDevices"),skipLobby:s?n.getFlag("skipLobby"):!1,returnToLobby:s?n.getFlag("returnToLobby"):!1,sendNotificationType:n.getEnumParam("sendNotificationType",["ring","notification"]),waitForCallPickup:n.getFlag("waitForCallPickup"),autoLeaveWhenOthersLeft:n.getFlag("autoLeave"),noiseSuppression:n.getFlagParam("noiseSuppression",!0),echoCancellation:n.getFlagParam("echoCancellation",!0)};return U.info(`UrlParams: final set of url params
`,"intent:",a,`
properties:`,l,"configuration:",u),{...l,...c,...nle(u,d=>d!==void 0)}},gi=()=>{const{search:e,hash:t}=Nn();return f.useMemo(()=>kt(e,t),[e,t])};function lle(e,t,n){let r=null;e=e.substring(1);const i=e.split("/"),o=i[0]=="room",s=i.length>1;n===""||n.startsWith("#?")?(s&&o&&(r=i[1]),o||(r=i[0])):r=n,r=r?.split("?")[0]??null,r&&(r.length<=1?r=null:(r.startsWith("#")||(r=`#${r}`),r.includes(":")||(r=`${r}:${it.defaultServerName()}`)));const a=new gP(t,n);let c=a.getParam("roomId");return c!==null&&(c=c.replaceAll(/^[^ -~]+|[^ -~]+$/g,""),c.startsWith("!")&&c.includes("")||(c=null)),{roomAlias:r,roomId:c,viaServers:a.getAllParams("viaServers")}}const ule=()=>{const{pathname:e,search:t,hash:n}=Nn();return f.useMemo(()=>lle(e,t,n),[e,t,n])};function dle(e,t,n){const r=new URLSearchParams;switch(t?.kind){case mt.SHARED_KEY:{const i=encodeURIComponent(t.secret);i!==t.secret&&U.info("Encoded call password used non URL-safe chars: buggy client?"),r.set("password",i);break}case mt.PER_PARTICIPANT:r.set("perParticipantE2EE","true");break}return r.set("roomId",e),r}const fle="_rageshakeControl_65ekp_8",u8={rageshakeControl:fle},d8=1024*1024*5,hle=2*1e3,ple=3;class gle extends xE{constructor(){super(...arguments),this.logs="",this.log=(t,...n)=>{const r=new Date().toISOString();n=n.map(o=>{if(o instanceof DOMException)return o.message+` (${o.name} | ${o.code})`;if(o instanceof Error)return o.message+(o.stack?`
${o.stack}`:"");if(typeof o=="object")try{return JSON.stringify(o,wle())}catch{return"<$ failed to serialize object $>"}else return o});let i=`${r} ${t} ${n.join(" ")}
`;i=i.replace(/token=[a-zA-Z0-9-]+/gm,"token=xxxxx"),this.logs+=i,this.emit("log")}}popLogs(){const t=this.logs;return this.logs="",t}peekLogs(){return this.logs}}class mle{constructor(t,n){this.indexedDB=t,this.loggerInstance=n,this.index=0,this.onLoggerLog=()=>{this.db&&this.throttledFlush()},this.throttledFlush=ile(()=>this.flush,hle,{leading:!1,trailing:!0}),this.flush=async()=>this.flushPromise?this.flushAgainPromise?this.flushAgainPromise:(this.flushAgainPromise=this.flushPromise.then(this.flush).then(()=>{this.flushAgainPromise=void 0}),this.flushAgainPromise):(this.flushPromise=new Promise((r,i)=>{if(!this.db){i(new Error("No connected database"));return}const o=this.loggerInstance.popLogs();if(o.length===0){r();return}const s=this.db.transaction(["logs","logslastmod"],"readwrite"),a=s.objectStore("logs");s.oncomplete=()=>{r()},s.onerror=l=>{U.error("Failed to flush logs : ",l),i(new Error("Failed to write logs: "+s?.error?.message))},a.add(this.generateLogEntry(o)),s.objectStore("logslastmod").put(this.generateLastModifiedTime())}).then(()=>{this.flushPromise=void 0}),this.flushPromise),this.id="instance-"+vf(16),n.on("log",this.onLoggerLog),window.addEventListener("beforeunload",()=>{this.flush().catch(r=>U.error("Failed to flush logs before unload",r))})}async connect(){const t=this.indexedDB.open("logs");return new Promise((n,r)=>{t.onsuccess=()=>{this.db=t.result,n()},t.onerror=()=>{const i="Failed to open log database: "+t?.error?.name;U.error(i),r(new Error(i))},t.onupgradeneeded=()=>{const i=t.result,o=i.createObjectStore("logs",{keyPath:["id","index"]});o.createIndex("id","id",{unique:!1}),o.add(this.generateLogEntry(new Date+" ::: Log database was created.")),i.createObjectStore("logslastmod",{keyPath:"id"}).add(this.generateLastModifiedTime())}})}async consume(){const t=this.db;if(!t)return Promise.reject(new Error("No connected database"));async function n(l,u){const d=t.transaction("logs","readonly").objectStore("logs");return new Promise((p,g)=>{const v=d.index("id").openCursor(IDBKeyRange.only(l),"prev");let m="";v.onerror=()=>{g(new Error("Query failed: "+v?.error?.message))},v.onsuccess=()=>{const _=v.result;if(!_){p(m);return}m=_.value.lines+m,m.length>=u?p(m):_.continue()}})}async function r(){const l=t.transaction("logslastmod","readonly").objectStore("logslastmod");return vle(l,void 0,u=>({id:u.value.id,ts:u.value.ts})).then(u=>u.sort((d,p)=>p.ts-d.ts).map(d=>d.id))}async function i(l){return new Promise((u,d)=>{const p=t.transaction(["logs","logslastmod"],"readwrite"),g=p.objectStore("logs"),v=g.index("id").openKeyCursor(IDBKeyRange.only(l));v.onsuccess=()=>{const _=v.result;_&&(g.delete(_.primaryKey),_.continue())},p.oncomplete=()=>{u()},p.onerror=()=>{d(new Error(`Failed to delete logs for '${l}' : ${p?.error?.message}`))},p.objectStore("logslastmod").delete(l)})}const o=await r();let s=[];const a=[];let c=0;for(let l=0;l<o.length;l++){const u=await n(o[l],d8-c);if(a.push({lines:u,id:o[l]}),c+=u.length,c>=d8){s=o.slice(l+1).map(d=>parseInt(d,10));break}}return s.length>0&&(U.log("Removing logs: ",s),Promise.all(s.map(async l=>i(l))).then(()=>{U.log(`Removed ${s.length} old logs.`)},l=>{U.error(l)})),a}generateLogEntry(t){return{id:this.id,lines:t,index:this.index++}}generateLastModifiedTime(){return{id:this.id,ts:Date.now()}}}async function vle(e,t,n){const r=e.openCursor(t);return new Promise((i,o)=>{const s=[];r.onerror=()=>{o(new Error("Query failed: "+r?.error?.message))},r.onsuccess=()=>{const a=r.result;if(!a){i(s);return}s.push(n(a)),a.continue()}})}async function yle(){return global.mx_rage_logger=new gle,Sle(U,global.mx_rage_logger.log),["trace","debug","info","warn","error"].forEach(e=>{const t=window.console[e];if(!t)return;const n=`${e.toUpperCase()} matrix_sdk`;window.console[e]=(...r)=>{t(...r),typeof r[0]=="string"&&r[0].startsWith(n)&&global.mx_rage_logger.log(Z_[e],"matrix_sdk",...r)}}),_le()}async function _le(){if(global.mx_rage_initStoragePromise)return global.mx_rage_initStoragePromise;U.log("Configuring rageshake persistence...");let e;try{e=window.indexedDB}catch(t){U.warn("Could not get indexDB from window.",t)}return e?(global.mx_rage_store=new mle(e,global.mx_rage_logger),global.mx_rage_initStoragePromise=global.mx_rage_store.connect(),global.mx_rage_initStoragePromise):(global.mx_rage_initStoragePromise=Promise.resolve(),global.mx_rage_initStoragePromise)}async function ble(){if(!global.mx_rage_logger)throw new Error("No console logger, did you forget to call init()?");return global.mx_rage_store?(await global.mx_rage_store.flush(),global.mx_rage_store.consume()):[{lines:global.mx_rage_logger.peekLogs(),id:"-"}]}const wle=()=>{const e=new WeakSet,t=new WeakMap;return function(n,r){if(typeof r=="object"&&r!==null){if(e.has(r))return"<$ cycle-trimmed $>";e.add(r);let i=0;if(this&&(i=t.get(this)??0),t.set(r,i+1),i>ple)return"<$ object-pruned $>"}return r}};var Z_=(e=>(e[e.trace=0]="trace",e[e.debug=1]="debug",e[e.info=2]="info",e[e.warn=3]="warn",e[e.error=4]="error",e[e.silent=5]="silent",e))(Z_||{});function Sle(e,t){const n=e,r=n.methodFactory;n.methodFactory=function(i,o,s){const a=r(i,o,s),c=Z_[i],l=c>=o&&c<5;return(...u)=>{a.apply(this,u),l&&t(c,s?.toString(),...u)}},n.setLevel(n.getLevel())}const Cle=async e=>{const{gzip:t}=await zp(async()=>{const{gzip:r}=await import("./pako.esm-Cf42LiW4.js");return{gzip:r}},[],import.meta.url),n=new TextEncoder().encode(e);return new Blob([t(n)])};async function Ele(e,t){t.append("crypto_version",e.getVersion());const n=await e.getOwnDeviceKeys(),r=[`curve25519:${n.curve25519}`,`ed25519:${n.ed25519}`];t.append("device_keys",r.join(", "));const i=await e.getCrossSigningStatus();t.append("cross_signing_ready",String(await e.isCrossSigningReady())),t.append("cross_signing_key",await e.getCrossSigningKeyId()??"n/a"),t.append("cross_signing_privkey_in_secret_storage",String(i.privateKeysInSecretStorage)),t.append("cross_signing_master_privkey_cached",String(i.privateKeysCachedLocally.masterKey)),t.append("cross_signing_self_signing_privkey_cached",String(i.privateKeysCachedLocally.selfSigningKey)),t.append("cross_signing_user_signing_privkey_cached",String(i.privateKeysCachedLocally.userSigningKey))}async function xle(e,t,n){const r=e.secretStorage;n.append("secret_storage_ready",String(await t.isSecretStorageReady())),n.append("secret_storage_key_in_account",String(await r.hasKey())),n.append("session_backup_key_in_secret_storage",String(!!await e.isKeyBackupKeyStored()));const i=await t.getSessionBackupPrivateKey();n.append("session_backup_key_cached",String(!!i)),n.append("session_backup_key_well_formed",String(i instanceof Uint8Array))}function Ile(){return kt().rageshakeSubmitUrl??void 0}function Qg(e=Ile){const{client:t}=uc(),[{sending:n,sent:r,error:i},o]=f.useState({sending:!1,sent:!1,error:void 0});return{submitRageshake:f.useCallback(async a=>{const c=e();if(!c)throw new Error("No rageshake URL is configured");if(!n)try{o({sending:!0,sent:!1,error:void 0});let l="UNKNOWN";window.navigator&&window.navigator.userAgent&&(l=window.navigator.userAgent);let u="UNKNOWN";try{u=String(window.matchMedia("(pointer: coarse)").matches)}catch(v){U.warn("Could not get coarse pointer for rageshake submit.",v)}let d=a.rageshakeRequestId?`Rageshake ${a.rageshakeRequestId}`:"";a.description&&(d+=`: ${a.description}`);const p=new FormData;if(p.append("text",d??"User did not supply any additional text."),p.append("app","matrix-video-chat"),p.append("version","dev"),p.append("user_agent",l),p.append("installed_pwa","false"),p.append("touch_input",u),p.append("call_backend","livekit"),p.append("hostname",window.location.hostname),t){const v=t.getUserId(),m=t.getUser(v);p.append("display_name",m?.displayName??""),p.append("user_id",t.credentials.userId??""),p.append("device_id",t.deviceId??""),a.roomId&&p.append("room_id",a.roomId);const _=t.getCrypto();_&&(await Ele(_,p),await xle(t,_,p))}if(a.label&&p.append("label",a.label),navigator.storage&&navigator.storage.persisted)try{p.append("storageManager_persisted",String(await navigator.storage.persisted()))}catch(v){U.warn("coulr not get navigator peristed storage",v)}else if(document.hasStorageAccess)try{p.append("storageManager_persisted",String(await document.hasStorageAccess()))}catch(v){U.warn("could not get storage access",v)}if(navigator.storage&&navigator.storage.estimate)try{const v=await navigator.storage.estimate();p.append("storageManager_quota",String(v.quota)),p.append("storageManager_usage",String(v.usage)),v.usageDetails&&Object.keys(v.usageDetails).forEach(m=>{p.append(`storageManager_usage_${m}`,String(v.usageDetails[m]))})}catch(v){U.warn("could not obatain storage estimate",v)}if(a.sendLogs){const v=await ble();for(const m of v)p.append("compressed-log",await Cle(m.lines),m.id)}a.rageshakeRequestId&&p.append("group_call_rageshake_request_id",a.rageshakeRequestId);const g=await fetch(c,{method:"POST",body:p});if(g.status!==200)throw new Error(`Failed to submit feedback: receive HTTP ${g.status} ${g.statusText}`);o({sending:!1,sent:!0,error:void 0})}catch(l){o({sending:!1,sent:!1,error:l}),U.error(l)}},[t,n,e]),sending:n,sent:r,error:i,available:!!e()}}function Rle(){const{client:e}=uc();return f.useCallback((n,r)=>{e.sendEvent(n,"org.matrix.rageshake_request",{request_id:r}).catch(i=>{U.error("Failed to send org.matrix.rageshake_request event",i)})},[e])}function Lle(e){const[t,n]=f.useState(!1),r=f.useCallback(()=>n(!1),[n]),{client:i}=uc(),[o,s]=f.useState();return f.useEffect(()=>{if(!i)return;const a=c=>{c.getType()==="org.matrix.rageshake_request"&&e===c.getRoomId()&&i.getUserId()!==c.getSender()&&(s(c.getContent().request_id),n(!0))};return i.on(ei.Event,a),()=>{i.removeListener(ei.Event,a)}},[n,e,i]),{rageshakeRequestId:o??"",roomId:e,open:t,onDismiss:r}}const kle=({description:e})=>{const{submitRageshake:t,sending:n,sent:r,error:i}=Qg(),{t:o}=he(),s=f.useCallback(()=>{t({description:e,sendLogs:!0}).catch(c=>{U.error("Failed to send rageshake",c)})},[t,e]);if(!it.get().rageshake?.submit_url)return null;let a=null;if(n)a=h.jsx("span",{children:o("rageshake_sending")});else if(r)a=h.jsx("div",{children:o("rageshake_sent")});else{let c=o("rageshake_send_logs");i&&(c=o("rageshake_button_error_caption")),a=h.jsx(De,{onClick:s,className:u8.wideButton,disabled:n,children:c})}return h.jsx("div",{className:u8.rageshakeControl,children:a})},Tle="_error_17zfc_1",Ale="_icon_17zfc_9",Ph={error:Tle,icon:Ale},Ple="_endCall_bwclo_8",Mle={endCall:Ple},mP=({muted:e,...t})=>{const{t:n}=he(),r=e?bA:O_,i=n(e?"unmute_microphone_button_label":"mute_microphone_button_label");return h.jsx(sn,{label:i,children:h.jsx(De,{iconOnly:!0,"aria-label":i,Icon:r,kind:e?"primary":"secondary",...t})})},vP=({muted:e,...t})=>{const{t:n}=he(),r=e?qie:HA,i=n(e?"start_video_button_label":"stop_video_button_label");return h.jsx(sn,{label:i,children:h.jsx(De,{iconOnly:!0,"aria-label":i,Icon:r,kind:e?"primary":"secondary",...t})})},Nle=({enabled:e,...t})=>{const{t:n}=he(),r=n(e?"stop_screenshare_button_label":"screenshare_button_label");return h.jsx(sn,{label:r,children:h.jsx(De,{iconOnly:!0,Icon:Die,kind:e?"primary":"secondary",...t})})},yP=({className:e,...t})=>{const{t:n}=he();return h.jsx(sn,{label:n("hangup_button_label"),children:h.jsx(De,{className:Z(e,Mle.endCall),iconOnly:!0,"aria-label":n("hangup_button_label"),Icon:dA,destructive:!0,...t})})},_P=e=>{const{t}=he();return h.jsx(sn,{label:t("common.settings"),children:h.jsx(De,{iconOnly:!0,Icon:jie,kind:"secondary",...e})})},$le="_external_jhjdf_8",Ole={external:$le};function bP(e,t){const n=GE(e),r=nx(e,{state:t});return[n,r]}const so=({ref:e,to:t,state:n,...r})=>{const[i,o]=bP(t,n);return h.jsx(OJ,{ref:e,...r,href:i,onClick:o})},ka=({ref:e,className:t,children:n,...r})=>h.jsx("a",{ref:e,className:Z(t,Ole.external),target:"_blank",rel:"noreferrer noopener",...r,children:n}),Q_=({ref:e,to:t,state:n,...r})=>{const[i,o]=bP(t,n);return h.jsx(De,{as:"a",ref:e,...r,href:i,onClick:o})};function kp(e,t,n,r){f.useEffect(()=>{if(e)return e.addEventListener(t,n,r),()=>e.removeEventListener(t,n,r)},[e,t,n,r])}function jle(e,t,n){f.useEffect(()=>(e.on(t,n),()=>{e.off(t,n)}),[e,t,n])}function Yd(e,t,n){const r=f.useCallback(i=>(e.on(t,i),()=>{e.off(t,i)}),[e,t]);return f.useSyncExternalStore(r,n)}function wP(e){return Yd(e,Us.MembershipsChanged,f.useCallback(()=>e.memberships,[e]))}const Dle=""+new URL("cat-4r_NkDcK.ogg",import.meta.url).href,Fle=""+new URL("cat-Dd8bv_2W.mp3",import.meta.url).href,Hle=""+new URL("clap-AxCMZLTd.ogg",import.meta.url).href,Ule=""+new URL("clap-Dxm5qGyl.mp3",import.meta.url).href,Ble=""+new URL("crickets-DUJdcuUa.ogg",import.meta.url).href,Vle=""+new URL("crickets-CcwrRdbq.mp3",import.meta.url).href,qle=""+new URL("dog-CxIWtkNX.ogg",import.meta.url).href,Gle=""+new URL("dog-BoQdnF-w.mp3",import.meta.url).href,Kle=""+new URL("generic-BBbS3Wph.ogg",import.meta.url).href,Wle=""+new URL("generic-BFeSb6fL.mp3",import.meta.url).href,zle=""+new URL("lightbulb-BIeJtAR_.ogg",import.meta.url).href,Yle=""+new URL("lightbulb-BrnY00qi.mp3",import.meta.url).href,Xle=""+new URL("party-D7rIOhAQ.ogg",import.meta.url).href,Zle=""+new URL("party-BZPeTgC3.mp3",import.meta.url).href,Qle=""+new URL("deer-DPSlVch4.ogg",import.meta.url).href,Jle=""+new URL("deer-91r1Gyrx.mp3",import.meta.url).href,eue=""+new URL("rock-BVCJXNC-.ogg",import.meta.url).href,tue=""+new URL("rock-CHdnB31m.mp3",import.meta.url).href,nue=""+new URL("wave-FiiOzicp.ogg",import.meta.url).href,rue=""+new URL("wave-Bzf1LSMH.mp3",import.meta.url).href,iue=""+new URL("baduntss-Ca1ZuBEK.ogg",import.meta.url).href,oue=""+new URL("baduntss-DOe0oFuS.mp3",import.meta.url).href,J_="io.element.call.reaction",Py={name:"generic",emoji:"",sound:{mp3:Wle,ogg:Kle}},My=5,Xd=[{emoji:"ðŸ‘",name:"thumbsup",alias:["+1","yes","thumbs up"]},{emoji:"ðŸŽ‰",name:"party",alias:["hurray","success"],sound:{ogg:Xle,mp3:Zle}},{emoji:"ðŸ‘",name:"clapping",alias:["celebrate","success"],sound:{ogg:Hle,mp3:Ule}},{emoji:"ðŸ¶",name:"dog",alias:["doggo","pupper","woofer","bark"],sound:{ogg:qle,mp3:Gle}},{emoji:"ðŸ±",name:"cat",alias:["meow","kitty"],sound:{ogg:Dle,mp3:Fle}},{emoji:"ðŸ’¡",name:"lightbulb",alias:["bulb","light","idea","ping"],sound:{ogg:zle,mp3:Yle}},{emoji:"ðŸ¦—",name:"crickets",alias:["awkward","silence"],sound:{ogg:Ble,mp3:Vle}},{emoji:"ðŸ‘Ž",name:"thumbsdown",alias:["-1","no","thumbs no"]},{emoji:"ðŸ˜µâ€ðŸ’«",name:"dizzy",alias:["dazed","confused"]},{emoji:"ðŸ‘Œ",name:"ok",alias:["okay","cool"]},{emoji:"ðŸ¥°",name:"heart",alias:["heart","love","smiling"]},{emoji:"ðŸ˜„",name:"laugh",alias:["giggle","joy","smiling"]},{emoji:"ðŸ¦Œ",name:"deer",alias:["stag","doe","bleat"],sound:{ogg:Qle,mp3:Jle}},{emoji:"ðŸ¤˜",name:"rock",alias:["cool","horns","guitar"],sound:{ogg:eue,mp3:tue}},{emoji:"ðŸ‘‹",name:"wave",alias:["hand","waving"],sound:{ogg:nue,mp3:rue}},{emoji:"ðŸ¥",name:"drum",alias:["joke"],sound:{ogg:iue,mp3:oue}}];function J(e){const t=f.useCallback(r=>{const i=e.subscribe(r);return()=>i.unsubscribe()},[e]),n=f.useCallback(()=>e.value,[e]);return f.useSyncExternalStore(t,n)}const SP=f.createContext(void 0),eb=()=>{const e=f.use(SP);if(!e)throw new Error("useReactions must be used within a ReactionsProvider");return e},sue=({children:e,rtcSession:t,vm:n})=>{const r=wP(t),i=uu(),o=i?.state==="valid"&&i.supportedFeatures.reactions,s=t.room,a=s.client.getUserId(),c=s.client.getDeviceId(),l=`${a}:${c}`,u=f.useMemo(()=>r.find(y=>y.userId===a&&y.deviceId===c)?.eventId,[r,a,c]),d=J(n.reactions$),p=f.useMemo(()=>l!==void 0?d[l]:void 0,[l,d]),g=J(n.handsRaised$),v=f.useMemo(()=>l!==void 0?g[l]:void 0,[l,g]),m=f.useCallback(async()=>{if(!l)return;const y=v?.reactionEventId;if(y)try{await s.client.redactEvent(t.room.roomId,y),U.debug("Redacted raise hand event")}catch(w){throw U.error("Failed to redact reaction event",y,w),w}else try{if(!u)throw new Error("Cannot find own membership event");const w=await s.client.sendEvent(t.room.roomId,He.Reaction,{"m.relates_to":{rel_type:Cv.Annotation,event_id:u,key:"ðŸ–ï¸"}});U.debug("Sent raise hand event",w.event_id)}catch(w){U.error("Failed to send raised hand",w)}},[u,l,v,t,s]),_=f.useCallback(async y=>{if(!(!l||p)){if(!u)throw new Error("Cannot find own membership event");await s.client.sendEvent(t.room.roomId,J_,{"m.relates_to":{rel_type:Cv.Reference,event_id:u},emoji:y.emoji,name:y.name})}},[u,p,s,l,t]);return h.jsx(SP,{value:{supportsReactions:o,toggleRaisedHand:m,sendReaction:_},children:e})},aue="_raisedButton_unw54_1",cue="_reactionPopupMenu_unw54_5",lue="_reactionPopupMenuRoot_unw54_21",uue="_reactionPopupMenuModal_unw54_21",due="_reactionsMenuSection_unw54_47",fue="_reactionsMenu_unw54_47",hue="_reactionButton_unw54_81",pue="_verticalSeperator_unw54_91",gue="_alert_unw54_99",Ei={raisedButton:aue,reactionPopupMenu:cue,reactionPopupMenuRoot:lue,reactionPopupMenuModal:uue,reactionsMenuSection:due,reactionsMenu:fue,reactionButton:hue,verticalSeperator:pue,alert:gue};var mue=Symbol.for("react.lazy"),L1=Kl[" use ".trim().toString()];function vue(e){return typeof e=="object"&&e!==null&&"then"in e}function CP(e){return e!=null&&typeof e=="object"&&"$$typeof"in e&&e.$$typeof===mue&&"_payload"in e&&vue(e._payload)}function yue(e){const t=_ue(e),n=f.forwardRef((r,i)=>{let{children:o,...s}=r;CP(o)&&typeof L1=="function"&&(o=L1(o._payload));const a=f.Children.toArray(o),c=a.find(wue);if(c){const l=c.props.children,u=a.map(d=>d===c?f.Children.count(l)>1?f.Children.only(null):f.isValidElement(l)?l.props.children:null:d);return h.jsx(t,{...s,ref:i,children:f.isValidElement(l)?f.cloneElement(l,void 0,u):null})}return h.jsx(t,{...s,ref:i,children:o})});return n.displayName=`${e}.Slot`,n}function _ue(e){const t=f.forwardRef((n,r)=>{let{children:i,...o}=n;if(CP(i)&&typeof L1=="function"&&(i=L1(i._payload)),f.isValidElement(i)){const s=Cue(i),a=Sue(o,i.props);return i.type!==f.Fragment&&(a.ref=r?Tg(r,s):s),f.cloneElement(i,a)}return f.Children.count(i)>1?f.Children.only(null):null});return t.displayName=`${e}.SlotClone`,t}var bue=Symbol("radix.slottable");function wue(e){return f.isValidElement(e)&&typeof e.type=="function"&&"__radixId"in e.type&&e.type.__radixId===bue}function Sue(e,t){const n={...t};for(const r in t){const i=e[r],o=t[r];/^on[A-Z]/.test(r)?i&&o?n[r]=(...a)=>{const c=o(...a);return i(...a),c}:i&&(n[r]=i):r==="style"?n[r]={...i,...o}:r==="className"&&(n[r]=[i,o].filter(Boolean).join(" "))}return{...e,...n}}function Cue(e){let t=Object.getOwnPropertyDescriptor(e.props,"ref")?.get,n=t&&"isReactWarning"in t&&t.isReactWarning;return n?e.ref:(t=Object.getOwnPropertyDescriptor(e,"ref")?.get,n=t&&"isReactWarning"in t&&t.isReactWarning,n?e.props.ref:e.props.ref||e.ref)}var Eue=["a","button","div","form","h2","h3","img","input","label","li","nav","ol","p","select","span","svg","ul"],xue=Eue.reduce((e,t)=>{const n=yue(`Primitive.${t}`),r=f.forwardRef((i,o)=>{const{asChild:s,...a}=i,c=s?n:t;return typeof window<"u"&&(window[Symbol.for("radix-ui")]=!0),h.jsx(c,{...a,ref:o})});return r.displayName=`Primitive.${t}`,{...e,[t]:r}},{}),Iue=Object.freeze({position:"absolute",border:0,width:1,height:1,padding:0,margin:-1,overflow:"hidden",clip:"rect(0, 0, 0, 0)",whiteSpace:"nowrap",wordWrap:"normal"}),Rue="VisuallyHidden",Ny=f.forwardRef((e,t)=>h.jsx(xue.span,{...e,ref:t,style:{...Iue,...e.style}}));Ny.displayName=Rue;const Lue="_modal_lmgdq_8",kue="_dialog_lmgdq_14",Tue="_content_lmgdq_21",Aue="_drawer_lmgdq_32",Pue="_close_lmgdq_59",Mue="_header_lmgdq_84",Nue="_body_lmgdq_114",$ue="_tabbed_lmgdq_129",Oue="_handle_lmgdq_133",Zn={modal:Lue,dialog:kue,content:Tue,drawer:Aue,close:Pue,header:Mue,body:Nue,tabbed:$ue,handle:Oue},jue="_bg_180k3_8",Due="_animate_180k3_23",Fue="_overlay_180k3_42",nr={bg:jue,animate:Due,overlay:Fue},lc=({title:e,hideHeader:t,children:n,className:r,classNameDrawer:i,classNameModal:o,open:s,onDismiss:a,tabbed:c,...l})=>{const{t:u}=he(),d=Kg("(hover: none) or (pointer: coarse)"),p=f.useCallback(g=>{g||a?.()},[a]);if(d)return h.jsx(ir.Root,{open:s,onOpenChange:p,dismissible:a!==void 0,children:h.jsxs(ir.Portal,{children:[h.jsx(ir.Overlay,{className:Z(nr.bg)}),h.jsx(ir.Content,{className:Z(r,i,nr.overlay,Zn.modal,Zn.drawer,{[Zn.tabbed]:c}),role:"dialog","aria-describedby":void 0,...l,children:h.jsxs("div",{className:Zn.content,children:[h.jsxs("div",{className:Zn.header,children:[h.jsx("div",{className:Zn.handle}),h.jsx(Ny,{asChild:!0,children:h.jsx(ir.Title,{children:e})})]}),h.jsx("div",{className:Zn.body,children:n})]})})]})});{const g=h.jsx(c_,{asChild:!0,children:h.jsx(Fi,{as:"h2",weight:"semibold",size:"md",children:e})}),v=h.jsxs("div",{className:Zn.header,children:[g,a!==void 0&&h.jsx(rk,{className:Zn.close,"data-testid":"modal_close","aria-label":u("action.close"),children:h.jsx(Rf,{width:20,height:20})})]});return h.jsx(i_,{open:s,onOpenChange:p,children:h.jsxs(o_,{children:[h.jsx(s_,{className:Z(nr.bg,nr.animate)}),h.jsx(a_,{asChild:!0,"aria-describedby":void 0,role:"dialog",...l,children:h.jsx(gk,{className:Z(r,o,nr.overlay,nr.animate,Zn.modal,Zn.dialog,{[Zn.tabbed]:c}),children:h.jsxs("div",{className:Zn.content,children:[t?null:v,t?h.jsx(Ny,{asChild:!0,children:g}):null,h.jsx("div",{className:Zn.body,children:n})]})})})]})})}},Hue=({raised:e,open:t,...n})=>{const{t:r}=he();return h.jsx(sn,{label:r("common.reactions"),children:h.jsx(De,{className:Z(e&&Ei.raisedButton),"aria-expanded":t,"aria-haspopup":!0,kind:e||t?"primary":"secondary",iconOnly:!0,Icon:e?RA:Oie,...n})})};function Uue({sendReaction:e,toggleRaisedHand:t,isHandRaised:n,canReact:r,errorText:i}){const{t:o}=he(),[s,a]=f.useState(!1),c=f.useMemo(()=>s?Xd:Xd.slice(0,5),[s]),l=o(n?"action.lower_hand":"action.raise_hand");return h.jsxs(h.Fragment,{children:[i&&h.jsx(sY,{className:Ei.alert,type:"critical",title:o("error.generic"),children:i}),h.jsxs("div",{className:Ei.reactionPopupMenu,children:[h.jsx("section",{className:Ei.handRaiseSection,children:h.jsx(sn,{label:l,caption:"H",children:h.jsx(De,{kind:n?"primary":"secondary","aria-keyshortcuts":"H","aria-pressed":n,"aria-label":l,onClick:()=>t(),iconOnly:!0,Icon:RA})})}),h.jsx("div",{className:Ei.verticalSeperator}),h.jsx("section",{className:Ei.reactionsMenuSection,children:h.jsx("menu",{className:Z(s&&Ei.reactionsMenuExpanded,Ei.reactionsMenu),children:c.map((u,d)=>h.jsx("li",{children:h.jsx(sn,{label:u.name,caption:d<My?(d+1).toString():void 0,children:h.jsx(De,{kind:"secondary",className:Ei.reactionButton,disabled:!r,onClick:()=>e(u),"aria-keyshortcuts":d<My?(d+1).toString():void 0,children:u.emoji})})},u.name))})}),h.jsx("section",{style:{marginLeft:"var(--cpd-separator-spacing)"},children:h.jsx(sn,{label:o(s?"action.show_less":"action.show_more"),children:h.jsx(De,{iconOnly:!0,"aria-label":o(s?"action.show_less":"action.show_more"),Icon:s?Iie:Are,kind:"tertiary",onClick:()=>a(!s)})})})]})]})}function Bue({identifier:e,vm:t,...n}){const{t:r}=he(),{toggleRaisedHand:i,sendReaction:o}=eb(),[s,a]=f.useState(!1),[c,l]=f.useState(!1),[u,d]=f.useState(),p=!!J(t.handsRaised$)[e],g=!J(t.reactions$)[e];f.useEffect(()=>{d(void 0)},[c]);const v=f.useCallback(async _=>{try{a(!0),await o(_),d(void 0),l(!1)}catch(y){d(y instanceof Error?y.message:"Unknown error"),U.error("Failed to send reaction",y)}finally{a(!1)}},[o]),m=f.useCallback(()=>{(async()=>{try{a(!0),await i(),l(!1)}catch(y){d(y instanceof Error?y.message:"Unknown error"),U.error("Failed to raise/lower hand",y)}finally{a(!1)}})()},[i]);return h.jsxs(h.Fragment,{children:[h.jsx(Hue,{disabled:s,onClick:()=>l(_=>!_),raised:!!p,open:c,...n}),h.jsx(lc,{open:c,title:r("action.pick_reaction"),hideHeader:!0,classNameModal:Ei.reactionPopupMenuModal,className:Ei.reactionPopupMenuRoot,onDismiss:()=>l(!1),children:h.jsx(Uue,{errorText:u,isHandRaised:!!p,canReact:!s&&!!g,sendReaction:_=>{v(_)},toggleRaisedHand:m})})]})}class Vue extends xE{constructor(){super(...arguments),this.eventBacklogs=new Map}emit(t,...n){const r=super.emit(t,...n);if(!r){const i=this.eventBacklogs.get(t);i?i.push(n):this.eventBacklogs.set(t,[n])}return r}on(t,n){super.on(t,n);const r=this.eventBacklogs.get(t);if(r){for(const i of r)super.emit(t,...i);this.eventBacklogs.delete(t)}return this}addListener(t,n){return this.on(t,n)}once(t,n){super.once(t,n);const r=this.eventBacklogs.get(t);return r&&(super.emit(t,...r[0]),r.length===1?this.eventBacklogs.delete(t):r.shift()),this}}var io=(e=>(e.JoinCall="io.element.join",e.HangupCall="im.vector.hangup",e.Close="io.element.close",e.DeviceMute="io.element.device_mute",e))(io||{});let Ae;const que=(e="m.call",t=!1)=>{try{const{widgetId:n,parentUrl:r,roomId:i,userId:o,deviceId:s,baseUrl:a,e2eEnabled:c,allowIceFallback:l}=kt();if(!i)throw new Error("Room ID must be supplied");if(!o)throw new Error("User ID must be supplied");if(!s)throw new Error("Device ID must be supplied");if(!a)throw new Error("Base URL must be supplied");if(n&&r){const u=new URL(r).origin;U.info("Widget API is available");const d=new SD(n,u);d.requestCapability(CD.AlwaysOnScreen);const p=new Vue;[Ev.ThemeChange,"io.element.join","im.vector.hangup","io.element.device_mute"].forEach(b=>{d.on(`action:${b}`,C=>{C.preventDefault(),p.emit(b,C)})});const g=[He.CallNotify,He.RTCNotification];t&&g.push(He.RoomMessage);const v=["org.matrix.rageshake_request",He.CallEncryptionKeysPrefix,He.Reaction,He.RoomRedaction,J_,He.RTCDecline,He.RTCMembership],m=[o,`_${o}_${s}_${e}`,`${o}_${s}_${e}`].map(b=>({eventType:He.GroupCallMemberPrefix,stateKey:b})),_=[{eventType:He.RoomCreate},{eventType:He.RoomName},{eventType:He.RoomMember},{eventType:He.RoomEncryption},{eventType:He.GroupCallMemberPrefix}],y=[He.CallInvite,He.CallCandidates,He.CallAnswer,He.CallHangup,He.CallReject,He.CallSelectAnswer,He.CallNegotiate,He.CallSDPStreamMetadataChanged,He.CallSDPStreamMetadataChangedPrefix,He.CallReplaces,He.CallEncryptionKeysPrefix],w=ED(d,{sendEvent:[...g,...v],receiveEvent:v,sendState:m,receiveState:_,sendToDevice:y,receiveToDevice:y,turnServers:!1,sendDelayedEvents:!0,updateDelayedEvents:!0,sendSticky:!0,receiveSticky:!0},i,{baseUrl:a,userId:o,deviceId:s,timelineSupport:!0,useE2eForGroupCall:c,fallbackICEServerAllowed:l},!1);Ae={api:d,lazyActions:p,client:(async()=>(await it.init(),await w.startClient({clientWellKnownPollPeriod:600}),w))()}}else U.info("No widget API available"),Ae=null}catch(n){U.warn("Continuing without the widget API",n),Ae=null}},Zd=({Icon:e,title:t,rageshake:n,fatal:r,children:i,widget:o})=>{const{t:s}=he(),{confineToRoom:a}=gi(),c=f.useCallback(()=>{window.location.href="/"},[]),l=({widget:d})=>{const p=()=>{d.api.transport.send(io.Close,{}).catch(g=>{U.error("Failed to send close action",g)}).finally(()=>{d.api.transport.stop()})};return h.jsx(De,{kind:"primary",onClick:p,children:s("action.close")})},u=()=>r||location.pathname==="/"?h.jsx(De,{kind:"tertiary",className:Ph.homeLink,onClick:c,children:s("return_home_button")}):h.jsx(Q_,{kind:"tertiary",className:Ph.homeLink,to:"/",children:s("return_home_button")});return h.jsxs("div",{className:Ph.error,children:[h.jsx(qT,{className:Ph.icon,children:h.jsx(e,{"aria-hidden":!0})}),h.jsx(Fi,{as:"h1",weight:"semibold",size:"md",children:t}),i,n&&h.jsx(kle,{description:`***Error View***: ${t}`}),o?h.jsx(l,{widget:o}):!a&&h.jsx(u,{})]})};class EP extends Error{constructor(t,n){super(t),this.richMessage=n}}const Gue=()=>{const{t:e}=he();return h.jsx(Zd,{widget:Ae,Icon:j_,title:e("error.open_elsewhere"),children:h.jsx("p",{children:e("error.open_elsewhere_description",{brand:"Element Call"})})})};class Kue extends EP{constructor(){super("App opened in another tab",h.jsx(Gue,{}))}}const il=({className:e,children:t})=>{const{header:n}=gi();return h.jsxs("div",{className:Z(r2.page,e),children:[n==="standard"&&h.jsxs(as,{children:[h.jsx(ra,{children:h.jsx(Ua,{})}),h.jsx(ia,{})]}),h.jsx("div",{className:r2.container,children:h.jsx("div",{className:r2.content,children:t})})]})},Qd=({error:e,widget:t})=>{const{t:n}=he();return f.useEffect(()=>{U.error(e),wg(e)},[e]),h.jsx(il,{children:e instanceof EP?e.richMessage:h.jsx(Zd,{widget:t,Icon:If,title:n("error.generic"),rageshake:!0,fatal:!0,children:h.jsx("p",{children:n("error.generic_description")})})})},Jg=()=>{const{t:e}=he();return h.jsx(il,{children:h.jsx("h1",{children:e("common.loading")})})};function f8(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(i){return Object.getOwnPropertyDescriptor(e,i).enumerable}))),n.push.apply(n,r)}return n}function ee(e){for(var t=1;t<arguments.length;t++){var n=arguments[t]!=null?arguments[t]:{};t%2?f8(Object(n),!0).forEach((function(r){q(e,r,n[r])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):f8(Object(n)).forEach((function(r){Object.defineProperty(e,r,Object.getOwnPropertyDescriptor(n,r))}))}return e}function Jd(e){return Jd=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(t){return typeof t}:function(t){return t&&typeof Symbol=="function"&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},Jd(e)}function Ze(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function h8(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function Qe(e,t,n){return t&&h8(e.prototype,t),n&&h8(e,n),Object.defineProperty(e,"prototype",{writable:!1}),e}function q(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function Wue(e,t){if(e==null)return{};var n,r,i=(function(s,a){if(s==null)return{};var c,l,u={},d=Object.keys(s);for(l=0;l<d.length;l++)c=d[l],a.indexOf(c)>=0||(u[c]=s[c]);return u})(e,t);if(Object.getOwnPropertySymbols){var o=Object.getOwnPropertySymbols(e);for(r=0;r<o.length;r++)n=o[r],t.indexOf(n)>=0||Object.prototype.propertyIsEnumerable.call(e,n)&&(i[n]=e[n])}return i}function Fn(e,t){return(function(n){if(Array.isArray(n))return n})(e)||(function(n,r){var i=n==null?null:typeof Symbol<"u"&&n[Symbol.iterator]||n["@@iterator"];if(i!=null){var o,s,a=[],c=!0,l=!1;try{for(i=i.call(n);!(c=(o=i.next()).done)&&(a.push(o.value),!r||a.length!==r);c=!0);}catch(u){l=!0,s=u}finally{try{c||i.return==null||i.return()}finally{if(l)throw s}}return a}})(e,t)||tb(e,t)||(function(){throw new TypeError(`Invalid attempt to destructure non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)})()}function Uo(e){return(function(t){if(Array.isArray(t))return $y(t)})(e)||(function(t){if(typeof Symbol<"u"&&t[Symbol.iterator]!=null||t["@@iterator"]!=null)return Array.from(t)})(e)||tb(e)||(function(){throw new TypeError(`Invalid attempt to spread non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)})()}function tb(e,t){if(e){if(typeof e=="string")return $y(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);return n==="Object"&&e.constructor&&(n=e.constructor.name),n==="Map"||n==="Set"?Array.from(e):n==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)?$y(e,t):void 0}}function $y(e,t){(t==null||t>e.length)&&(t=e.length);for(var n=0,r=new Array(t);n<t;n++)r[n]=e[n];return r}function ui(e,t){var n=typeof Symbol<"u"&&e[Symbol.iterator]||e["@@iterator"];if(!n){if(Array.isArray(e)||(n=tb(e))||t){n&&(e=n);var r=0,i=function(){};return{s:i,n:function(){return r>=e.length?{done:!0}:{done:!1,value:e[r++]}},e:function(c){throw c},f:i}}throw new TypeError(`Invalid attempt to iterate non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}var o,s=!0,a=!1;return{s:function(){n=n.call(e)},n:function(){var c=n.next();return s=c.done,c},e:function(c){a=!0,o=c},f:function(){try{s||n.return==null||n.return()}finally{if(a)throw o}}}}var qr={DEBUG:!1,LIB_VERSION:"1.160.3"},zue=Array.isArray,xP=Object.prototype,IP=xP.hasOwnProperty,em=xP.toString,on=zue||function(e){return em.call(e)==="[object Array]"},Qr=function(e){return typeof e=="function"},Cn=function(e){return e===Object(e)&&!on(e)},Tp=function(e){if(Cn(e)){for(var t in e)if(IP.call(e,t))return!1;return!0}return!1},ve=function(e){return e===void 0},An=function(e){return em.call(e)=="[object String]"},p8=function(e){return An(e)&&e.trim().length===0},us=function(e){return e===null},ur=function(e){return ve(e)||us(e)},Gr=function(e){return em.call(e)=="[object Number]"},ba=function(e){return em.call(e)==="[object Boolean]"},Yue=function(e){return e instanceof FormData},H=typeof window<"u"?window:void 0,or=typeof globalThis<"u"?globalThis:H,RP=Array.prototype,g8=RP.forEach,m8=RP.indexOf,ki=or?.navigator,ae=or?.document,Jn=or?.location,Oy=or?.fetch,jy=or!=null&&or.XMLHttpRequest&&"withCredentials"in new or.XMLHttpRequest?or.XMLHttpRequest:void 0,v8=or?.AbortController,fn=ki?.userAgent,Rt=H??{},y8="[PostHog.js]",W={_log:function(e){if(H&&(qr.DEBUG||Rt.POSTHOG_DEBUG)&&!ve(H.console)&&H.console){for(var t=("__rrweb_original__"in H.console[e])?H.console[e].__rrweb_original__:H.console[e],n=arguments.length,r=new Array(n>1?n-1:0),i=1;i<n;i++)r[i-1]=arguments[i];t.apply(void 0,[y8].concat(r))}},info:function(){for(var e=arguments.length,t=new Array(e),n=0;n<e;n++)t[n]=arguments[n];W._log.apply(W,["log"].concat(t))},warn:function(){for(var e=arguments.length,t=new Array(e),n=0;n<e;n++)t[n]=arguments[n];W._log.apply(W,["warn"].concat(t))},error:function(){for(var e=arguments.length,t=new Array(e),n=0;n<e;n++)t[n]=arguments[n];W._log.apply(W,["error"].concat(t))},critical:function(){for(var e,t=arguments.length,n=new Array(t),r=0;r<t;r++)n[r]=arguments[r];(e=console).error.apply(e,[y8].concat(n))},uninitializedWarning:function(e){W.error("You must initialize PostHog before calling ".concat(e))}},k1={},tm=function(e){return e.replace(/^[\s\uFEFF\xA0]+|[\s\uFEFF\xA0]+$/g,"")};function ol(e,t,n){if(on(e)){if(g8&&e.forEach===g8)e.forEach(t,n);else if("length"in e&&e.length===+e.length){for(var r=0,i=e.length;r<i;r++)if(r in e&&t.call(n,e[r],r)===k1)return}}}function ft(e,t,n){if(!ur(e)){if(on(e))return ol(e,t,n);if(Yue(e)){var r,i=ui(e.entries());try{for(i.s();!(r=i.n()).done;){var o=r.value;if(t.call(n,o[1],o[0])===k1)return}}catch(a){i.e(a)}finally{i.f()}}else for(var s in e)if(IP.call(e,s)&&t.call(n,e[s],s)===k1)return}}var Hn=function(e){for(var t=arguments.length,n=new Array(t>1?t-1:0),r=1;r<t;r++)n[r-1]=arguments[r];return ol(n,(function(i){for(var o in i)i[o]!==void 0&&(e[o]=i[o])})),e};function Be(e,t){return e.indexOf(t)!==-1}function Ap(e){for(var t=Object.keys(e),n=t.length,r=new Array(n);n--;)r[n]=[t[n],e[t[n]]];return r}var LP=function(){return Date.now=Date.now||function(){return+new Date},Date.now()},_8=function(e){try{return e()}catch{return}},Xue=function(e){return function(){try{for(var t=arguments.length,n=new Array(t),r=0;r<t;r++)n[r]=arguments[r];return e.apply(this,n)}catch(i){W.critical("Implementation error. Please turn on debug mode and open a ticket on https://app.posthog.com/home#panel=support%3Asupport%3A."),W.critical(i)}}},Dy=function(e){var t={};return ft(e,(function(n,r){An(n)&&n.length>0&&(t[r]=n)})),t},Fy=function(e){return e.replace(/^\$/,"")};function Zue(e,t){return n=e,r=function(o){return An(o)&&!us(t)?o.slice(0,t):o},i=new Set,(function o(s,a){return s!==Object(s)?r?r(s,a):s:i.has(s)?void 0:(i.add(s),on(s)?(c=[],ol(s,(function(l){c.push(o(l))}))):(c={},ft(s,(function(l,u){i.has(l)||(c[u]=o(l,u))}))),c);var c})(n);var n,r,i}var Li,Que=function(e){var t,n,r,i,o="";for(t=n=0,r=(e=(e+"").replace(/\r\n/g,`
`).replace(/\r/g,`
`)).length,i=0;i<r;i++){var s=e.charCodeAt(i),a=null;s<128?n++:a=s>127&&s<2048?String.fromCharCode(s>>6|192,63&s|128):String.fromCharCode(s>>12|224,s>>6&63|128,63&s|128),us(a)||(n>t&&(o+=e.substring(t,n)),o+=a,t=n=i+1)}return n>t&&(o+=e.substring(t,e.length)),o},No=(function(){function e(t){return t&&(t.preventDefault=e.preventDefault,t.stopPropagation=e.stopPropagation),t}return e.preventDefault=function(){this.returnValue=!1},e.stopPropagation=function(){this.cancelBubble=!0},function(t,n,r,i,o){if(t)if(t.addEventListener&&!i)t.addEventListener(n,r,!!o);else{var s="on"+n,a=t[s];t[s]=(function(c,l,u){return function(d){if(d=d||e(H?.event)){var p,g=!0;Qr(u)&&(p=u(d));var v=l.call(c,d);return p!==!1&&v!==!1||(g=!1),g}}})(t,r,a)}else W.error("No valid element provided to register_event")}})();function kP(e,t){for(var n=0;n<e.length;n++)if(t(e[n]))return e[n]}(function(e){e.GZipJS="gzip-js",e.Base64="base64"})(Li||(Li={}));var TP="$people_distinct_id",Qu="__alias",Ju="__timers",b8="$autocapture_disabled_server_side",Hy="$heatmaps_enabled_server_side",w8="$exception_capture_enabled_server_side",S8="$exception_capture_endpoint_suffix",C8="$web_vitals_enabled_server_side",Uy="$session_recording_enabled_server_side",E8="$console_log_recording_enabled_server_side",x8="$session_recording_network_payload_capture",I8="$session_recording_canvas_recording",R8="$replay_sample_rate",L8="$replay_minimum_duration",T1="$sesid",md="$session_is_sampled",Wc="$enabled_feature_flags",By="$early_access_features",zc="$stored_person_properties",Cs="$stored_group_properties",Vy="$surveys",Mh="$surveys_activated",A1="$flag_call_reported",Ro="$user_state",qy="$client_session_props",Gy="$capture_rate_limit",Ky="$initial_campaign_params",Wy="$initial_referrer_info",k8="$initial_person_info",P1="$epp",zy="__POSTHOG_TOOLBAR__",Jue=[TP,Qu,"__cmpns",Ju,Uy,Hy,T1,Wc,Ro,By,Cs,zc,Vy,A1,qy,Gy,Ky,Wy,P1],a2="$active_feature_flags",Nh="$override_feature_flags",T8="$feature_flag_payloads",A8=function(e){var t,n={},r=ui(Ap(e||{}));try{for(r.s();!(t=r.n()).done;){var i=Fn(t.value,2),o=i[0],s=i[1];s&&(n[o]=s)}}catch(a){r.e(a)}finally{r.f()}return n},ede=(function(){function e(t){Ze(this,e),this.instance=t,this._override_warning=!1,this.featureFlagEventHandlers=[],this.reloadFeatureFlagsQueued=!1,this.reloadFeatureFlagsInAction=!1}return Qe(e,[{key:"getFlags",value:function(){return Object.keys(this.getFlagVariants())}},{key:"getFlagVariants",value:function(){var t=this.instance.get_property(Wc),n=this.instance.get_property(Nh);if(!n)return t||{};for(var r=Hn({},t),i=Object.keys(n),o=0;o<i.length;o++)r[i[o]]=n[i[o]];return this._override_warning||(W.warn(" Overriding feature flags!",{enabledFlags:t,overriddenFlags:n,finalFlags:r}),this._override_warning=!0),r}},{key:"getFlagPayloads",value:function(){return this.instance.get_property(T8)||{}}},{key:"reloadFeatureFlags",value:function(){this.reloadFeatureFlagsQueued||(this.reloadFeatureFlagsQueued=!0,this._startReloadTimer())}},{key:"setAnonymousDistinctId",value:function(t){this.$anon_distinct_id=t}},{key:"setReloadingPaused",value:function(t){this.reloadFeatureFlagsInAction=t}},{key:"resetRequestQueue",value:function(){this.reloadFeatureFlagsQueued=!1}},{key:"_startReloadTimer",value:function(){var t=this;this.reloadFeatureFlagsQueued&&!this.reloadFeatureFlagsInAction&&setTimeout((function(){!t.reloadFeatureFlagsInAction&&t.reloadFeatureFlagsQueued&&(t.reloadFeatureFlagsQueued=!1,t._reloadFeatureFlagsRequest())}),5)}},{key:"_reloadFeatureFlagsRequest",value:function(){var t=this;if(!this.instance.config.advanced_disable_feature_flags){this.setReloadingPaused(!0);var n=this.instance.config.token,r=this.instance.get_property(zc),i=this.instance.get_property(Cs),o={token:n,distinct_id:this.instance.get_distinct_id(),groups:this.instance.getGroups(),$anon_distinct_id:this.$anon_distinct_id,person_properties:r,group_properties:i,disable_flags:this.instance.config.advanced_disable_feature_flags||void 0};this.instance._send_request({method:"POST",url:this.instance.requestRouter.endpointFor("api","/decide/?v=3"),data:o,compression:this.instance.config.disable_compression?void 0:Li.Base64,timeout:this.instance.config.feature_flag_request_timeout_ms,callback:function(s){var a;t.setReloadingPaused(!1);var c=!0;s.statusCode===200&&(t.$anon_distinct_id=void 0,c=!1),t.receivedFeatureFlags((a=s.json)!==null&&a!==void 0?a:{},c),t._startReloadTimer()}})}}},{key:"getFeatureFlag",value:function(t){var n=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{};if(this.instance.decideEndpointWasHit||this.getFlags()&&this.getFlags().length>0){var r,i=this.getFlagVariants()[t],o="".concat(i),s=this.instance.get_property(A1)||{};return(n.send_event||!("send_event"in n))&&(!(t in s)||!s[t].includes(o))&&(on(s[t])?s[t].push(o):s[t]=[o],(r=this.instance.persistence)===null||r===void 0||r.register(q({},A1,s)),this.instance.capture("$feature_flag_called",{$feature_flag:t,$feature_flag_response:i})),i}W.warn('getFeatureFlag for key "'+t+`" failed. Feature flags didn't load in time.`)}},{key:"getFeatureFlagPayload",value:function(t){return this.getFlagPayloads()[t]}},{key:"isFeatureEnabled",value:function(t){var n=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{};if(this.instance.decideEndpointWasHit||this.getFlags()&&this.getFlags().length>0)return!!this.getFeatureFlag(t,n);W.warn('isFeatureEnabled for key "'+t+`" failed. Feature flags didn't load in time.`)}},{key:"addFeatureFlagsHandler",value:function(t){this.featureFlagEventHandlers.push(t)}},{key:"removeFeatureFlagsHandler",value:function(t){this.featureFlagEventHandlers=this.featureFlagEventHandlers.filter((function(n){return n!==t}))}},{key:"receivedFeatureFlags",value:function(t,n){if(this.instance.persistence){this.instance.decideEndpointWasHit=!0;var r=this.getFlagVariants(),i=this.getFlagPayloads();(function(o,s){var a,c=arguments.length>2&&arguments[2]!==void 0?arguments[2]:{},l=arguments.length>3&&arguments[3]!==void 0?arguments[3]:{},u=o.featureFlags,d=o.featureFlagPayloads;if(u)if(on(u)){var p,g={};if(u)for(var v=0;v<u.length;v++)g[u[v]]=!0;s&&s.register((q(p={},a2,u),q(p,Wc,g),p))}else{var m=u,_=d;o.errorsWhileComputingFlags&&(m=ee(ee({},c),m),_=ee(ee({},l),_)),s&&s.register((q(a={},a2,Object.keys(A8(m))),q(a,Wc,m||{}),q(a,T8,_||{}),a))}})(t,this.instance.persistence,r,i),this._fireFeatureFlagsCallbacks(n)}}},{key:"override",value:function(t){var n=arguments.length>1&&arguments[1]!==void 0&&arguments[1];if(!this.instance.__loaded||!this.instance.persistence)return W.uninitializedWarning("posthog.feature_flags.override");if(this._override_warning=n,t===!1)this.instance.persistence.unregister(Nh);else if(on(t)){for(var r={},i=0;i<t.length;i++)r[t[i]]=!0;this.instance.persistence.register(q({},Nh,r))}else this.instance.persistence.register(q({},Nh,t))}},{key:"onFeatureFlags",value:function(t){var n=this;if(this.addFeatureFlagsHandler(t),this.instance.decideEndpointWasHit){var r=this._prepareFeatureFlagsForCallbacks(),i=r.flags,o=r.flagVariants;t(i,o)}return function(){return n.removeFeatureFlagsHandler(t)}}},{key:"updateEarlyAccessFeatureEnrollment",value:function(t,n){var r,i,o=q({},"$feature_enrollment/".concat(t),n);this.instance.capture("$feature_enrollment_update",{$feature_flag:t,$feature_enrollment:n,$set:o}),this.setPersonPropertiesForFlags(o,!1);var s=ee(ee({},this.getFlagVariants()),{},q({},t,n));(r=this.instance.persistence)===null||r===void 0||r.register((q(i={},a2,Object.keys(A8(s))),q(i,Wc,s),i)),this._fireFeatureFlagsCallbacks()}},{key:"getEarlyAccessFeatures",value:function(t){var n=this,r=arguments.length>1&&arguments[1]!==void 0&&arguments[1],i=this.instance.get_property(By);if(i&&!r)return t(i);this.instance._send_request({transport:"XHR",url:this.instance.requestRouter.endpointFor("api","/api/early_access_features/?token=".concat(this.instance.config.token)),method:"GET",callback:function(o){var s;if(o.json){var a=o.json.earlyAccessFeatures;return(s=n.instance.persistence)===null||s===void 0||s.register(q({},By,a)),t(a)}}})}},{key:"_prepareFeatureFlagsForCallbacks",value:function(){var t=this.getFlags(),n=this.getFlagVariants();return{flags:t.filter((function(r){return n[r]})),flagVariants:Object.keys(n).filter((function(r){return n[r]})).reduce((function(r,i){return r[i]=n[i],r}),{})}}},{key:"_fireFeatureFlagsCallbacks",value:function(t){var n=this._prepareFeatureFlagsForCallbacks(),r=n.flags,i=n.flagVariants;this.featureFlagEventHandlers.forEach((function(o){return o(r,i,{errorsLoading:t})}))}},{key:"setPersonPropertiesForFlags",value:function(t){var n=!(arguments.length>1&&arguments[1]!==void 0)||arguments[1],r=this.instance.get_property(zc)||{};this.instance.register(q({},zc,ee(ee({},r),t))),n&&this.instance.reloadFeatureFlags()}},{key:"resetPersonPropertiesForFlags",value:function(){this.instance.unregister(zc)}},{key:"setGroupPropertiesForFlags",value:function(t){var n=!(arguments.length>1&&arguments[1]!==void 0)||arguments[1],r=this.instance.get_property(Cs)||{};Object.keys(r).length!==0&&Object.keys(r).forEach((function(i){r[i]=ee(ee({},r[i]),t[i]),delete t[i]})),this.instance.register(q({},Cs,ee(ee({},r),t))),n&&this.instance.reloadFeatureFlags()}},{key:"resetGroupPropertiesForFlags",value:function(t){if(t){var n=this.instance.get_property(Cs)||{};this.instance.register(q({},Cs,ee(ee({},n),{},q({},t,{}))))}else this.instance.unregister(Cs)}}]),e})();Math.trunc||(Math.trunc=function(e){return e<0?Math.ceil(e):Math.floor(e)}),Number.isInteger||(Number.isInteger=function(e){return Gr(e)&&isFinite(e)&&Math.floor(e)===e});var P8="0123456789abcdef",tde=(function(){function e(t){if(Ze(this,e),this.bytes=t,t.length!==16)throw new TypeError("not 128-bit length")}return Qe(e,[{key:"toString",value:function(){for(var t="",n=0;n<this.bytes.length;n++)t=t+P8.charAt(this.bytes[n]>>>4)+P8.charAt(15&this.bytes[n]),n!==3&&n!==5&&n!==7&&n!==9||(t+="-");if(t.length!==36)throw new Error("Invalid UUIDv7 was generated");return t}},{key:"clone",value:function(){return new e(this.bytes.slice(0))}},{key:"equals",value:function(t){return this.compareTo(t)===0}},{key:"compareTo",value:function(t){for(var n=0;n<16;n++){var r=this.bytes[n]-t.bytes[n];if(r!==0)return Math.sign(r)}return 0}}],[{key:"fromFieldsV7",value:function(t,n,r,i){if(!Number.isInteger(t)||!Number.isInteger(n)||!Number.isInteger(r)||!Number.isInteger(i)||t<0||n<0||r<0||i<0||t>0xffffffffffff||n>4095||r>1073741823||i>4294967295)throw new RangeError("invalid field value");var o=new Uint8Array(16);return o[0]=t/Math.pow(2,40),o[1]=t/Math.pow(2,32),o[2]=t/Math.pow(2,24),o[3]=t/Math.pow(2,16),o[4]=t/Math.pow(2,8),o[5]=t,o[6]=112|n>>>8,o[7]=n,o[8]=128|r>>>24,o[9]=r>>>16,o[10]=r>>>8,o[11]=r,o[12]=i>>>24,o[13]=i>>>16,o[14]=i>>>8,o[15]=i,new e(o)}}]),e})(),nde=(function(){function e(){Ze(this,e),q(this,"timestamp",0),q(this,"counter",0),q(this,"random",new rde)}return Qe(e,[{key:"generate",value:function(){var t=this.generateOrAbort();if(ve(t)){this.timestamp=0;var n=this.generateOrAbort();if(ve(n))throw new Error("Could not generate UUID after timestamp reset");return n}return t}},{key:"generateOrAbort",value:function(){var t=Date.now();if(t>this.timestamp)this.timestamp=t,this.resetCounter();else{if(!(t+1e4>this.timestamp))return;this.counter++,this.counter>4398046511103&&(this.timestamp++,this.resetCounter())}return tde.fromFieldsV7(this.timestamp,Math.trunc(this.counter/Math.pow(2,30)),this.counter&Math.pow(2,30)-1,this.random.nextUint32())}},{key:"resetCounter",value:function(){this.counter=1024*this.random.nextUint32()+(1023&this.random.nextUint32())}}]),e})(),AP=function(e){if(typeof UUIDV7_DENY_WEAK_RNG<"u"&&UUIDV7_DENY_WEAK_RNG)throw new Error("no cryptographically strong RNG available");for(var t=0;t<e.length;t++)e[t]=65536*Math.trunc(65536*Math.random())+Math.trunc(65536*Math.random());return e};H&&!ve(H.crypto)&&crypto.getRandomValues&&(AP=function(e){return crypto.getRandomValues(e)});var M8,rde=(function(){function e(){Ze(this,e),q(this,"buffer",new Uint32Array(8)),q(this,"cursor",1/0)}return Qe(e,[{key:"nextUint32",value:function(){return this.cursor>=this.buffer.length&&(AP(this.buffer),this.cursor=0),this.buffer[this.cursor++]}}]),e})(),ks=function(){return ide().toString()},ide=function(){return(M8||(M8=new nde)).generate()},ode="Thu, 01 Jan 1970 00:00:00 GMT",Tu="",sde=/[a-z0-9][a-z0-9-]+\.[a-z]{2,}$/i;function ade(e,t){if(t){var n=(function(i){var o=arguments.length>1&&arguments[1]!==void 0?arguments[1]:ae;if(Tu)return Tu;if(!o||["localhost","127.0.0.1"].includes(i))return"";for(var s=i.split("."),a=Math.min(s.length,8),c="dmn_chk_"+ks(),l=new RegExp("(^|;)\\s*"+c+"=1");!Tu&&a--;){var u=s.slice(a).join("."),d=c+"=1;domain=."+u;o.cookie=d,l.test(o.cookie)&&(o.cookie=d+";expires="+ode,Tu=u)}return Tu})(e);if(!n){var r=(function(i){var o=i.match(sde);return o?o[0]:""})(e);r!==n&&W.info("Warning: cookie subdomain discovery mismatch",r,n),n=r}return n?"; domain=."+n:""}return""}var bn,Bo={is_supported:function(){return!!ae},error:function(e){W.error("cookieStore error: "+e)},get:function(e){if(ae){try{for(var t=e+"=",n=ae.cookie.split(";").filter((function(o){return o.length})),r=0;r<n.length;r++){for(var i=n[r];i.charAt(0)==" ";)i=i.substring(1,i.length);if(i.indexOf(t)===0)return decodeURIComponent(i.substring(t.length,i.length))}}catch{}return null}},parse:function(e){var t;try{t=JSON.parse(Bo.get(e))||{}}catch{}return t},set:function(e,t,n,r,i){if(ae)try{var o="",s="",a=ade(ae.location.hostname,r);if(n){var c=new Date;c.setTime(c.getTime()+24*n*60*60*1e3),o="; expires="+c.toUTCString()}i&&(s="; secure");var l=e+"="+encodeURIComponent(JSON.stringify(t))+o+"; SameSite=Lax; path=/"+a+s;return l.length>3686.4&&W.warn("cookieStore warning: large cookie, len="+l.length),ae.cookie=l,l}catch{return}},remove:function(e,t){try{Bo.set(e,"",-1,t)}catch{return}}},c2=null,rn={is_supported:function(){if(!us(c2))return c2;var e=!0;if(ve(H))e=!1;else try{var t="__mplssupport__";rn.set(t,"xyz"),rn.get(t)!=='"xyz"'&&(e=!1),rn.remove(t)}catch{e=!1}return e||W.error("localStorage unsupported; falling back to cookie store"),c2=e,e},error:function(e){W.error("localStorage error: "+e)},get:function(e){try{return H?.localStorage.getItem(e)}catch(t){rn.error(t)}return null},parse:function(e){try{return JSON.parse(rn.get(e))||{}}catch{}return null},set:function(e,t){try{H?.localStorage.setItem(e,JSON.stringify(t))}catch(n){rn.error(n)}},remove:function(e){try{H?.localStorage.removeItem(e)}catch(t){rn.error(t)}}},cde=["distinct_id",T1,md,P1],$h=ee(ee({},rn),{},{parse:function(e){try{var t={};try{t=Bo.parse(e)||{}}catch{}var n=Hn(t,JSON.parse(rn.get(e)||"{}"));return rn.set(e,n),n}catch{}return null},set:function(e,t,n,r,i,o){try{rn.set(e,t,void 0,void 0,o);var s={};cde.forEach((function(a){t[a]&&(s[a]=t[a])})),Object.keys(s).length&&Bo.set(e,s,n,r,i,o)}catch(a){rn.error(a)}},remove:function(e,t){try{H?.localStorage.removeItem(e),Bo.remove(e,t)}catch(n){rn.error(n)}}}),Oh={},lde={is_supported:function(){return!0},error:function(e){W.error("memoryStorage error: "+e)},get:function(e){return Oh[e]||null},parse:function(e){return Oh[e]||null},set:function(e,t){Oh[e]=t},remove:function(e){delete Oh[e]}},fa=null,Sn={is_supported:function(){if(!us(fa))return fa;if(fa=!0,ve(H))fa=!1;else try{var e="__support__";Sn.set(e,"xyz"),Sn.get(e)!=='"xyz"'&&(fa=!1),Sn.remove(e)}catch{fa=!1}return fa},error:function(e){W.error("sessionStorage error: ",e)},get:function(e){try{return H?.sessionStorage.getItem(e)}catch(t){Sn.error(t)}return null},parse:function(e){try{return JSON.parse(Sn.get(e))||null}catch{}return null},set:function(e,t){try{H?.sessionStorage.setItem(e,JSON.stringify(t))}catch(n){Sn.error(n)}},remove:function(e){try{H?.sessionStorage.removeItem(e)}catch(t){Sn.error(t)}}},ude=["localhost","127.0.0.1"],vd=function(e){var t=ae?.createElement("a");return ve(t)?null:(t.href=e,t)},M1=function(e,t){return!!(function(n){try{new RegExp(n)}catch{return!1}return!0})(t)&&new RegExp(t).test(e)},dde=function(e){var t,n,r=arguments.length>1&&arguments[1]!==void 0?arguments[1]:"&",i=[];return ft(e,(function(o,s){ve(o)||ve(s)||s==="undefined"||(t=encodeURIComponent((function(a){return a instanceof File})(o)?o.name:o.toString()),n=encodeURIComponent(s),i[i.length]=n+"="+t)})),i.join(r)},N8=function(e,t){for(var n,r=((e.split("#")[0]||"").split("?")[1]||"").split("&"),i=0;i<r.length;i++){var o=r[i].split("=");if(o[0]===t){n=o;break}}if(!on(n)||n.length<2)return"";var s=n[1];try{s=decodeURIComponent(s)}catch{W.error("Skipping decoding for malformed query param: "+s)}return s.replace(/\+/g," ")},N1=function(e,t){var n=e.match(new RegExp(t+"=([^&]*)"));return n?n[1]:null},si="Mobile",$1="iOS",to="Android",ef="Tablet",PP=to+" "+ef,MP="iPad",NP="Apple",$P=NP+" Watch",tf="Safari",Il="BlackBerry",OP="Samsung",jP=OP+"Browser",DP=OP+" Internet",Ms="Chrome",fde=Ms+" OS",FP=Ms+" "+$1,nb="Internet Explorer",HP=nb+" "+si,rb="Opera",hde=rb+" Mini",ib="Edge",UP="Microsoft "+ib,sl="Firefox",BP=sl+" "+$1,nf="Nintendo",rf="PlayStation",al="Xbox",VP=to+" "+si,qP=si+" "+tf,ed="Windows",Yy=ed+" Phone",$8="Nokia",Xy="Ouya",GP="Generic",pde=GP+" "+si.toLowerCase(),KP=GP+" "+ef.toLowerCase(),Zy="Konqueror",On="(\\d+(\\.\\d+)?)",l2=new RegExp("Version/"+On),gde=new RegExp(al,"i"),mde=new RegExp(rf+" \\w+","i"),vde=new RegExp(nf+" \\w+","i"),ob=new RegExp(Il+"|PlayBook|BB10","i"),yde={"NT3.51":"NT 3.11","NT4.0":"NT 4.0","5.0":"2000",5.1:"XP",5.2:"XP","6.0":"Vista",6.1:"7",6.2:"8",6.3:"8.1",6.4:"10","10.0":"10"},_de=function(e,t){return t&&Be(t,NP)||(function(n){return Be(n,tf)&&!Be(n,Ms)&&!Be(n,to)})(e)},O8=function(e,t){return t=t||"",Be(e," OPR/")&&Be(e,"Mini")?hde:Be(e," OPR/")?rb:ob.test(e)?Il:Be(e,"IE"+si)||Be(e,"WPDesktop")?HP:Be(e,jP)?DP:Be(e,ib)||Be(e,"Edg/")?UP:Be(e,"FBIOS")?"Facebook "+si:Be(e,"UCWEB")||Be(e,"UCBrowser")?"UC Browser":Be(e,"CriOS")?FP:Be(e,"CrMo")?Ms:Be(e,to)&&Be(e,tf)?VP:Be(e,Ms)?Ms:Be(e,"FxiOS")?BP:Be(e.toLowerCase(),Zy.toLowerCase())?Zy:_de(e,t)?Be(e,si)?qP:tf:Be(e,sl)?sl:Be(e,"MSIE")||Be(e,"Trident/")?nb:Be(e,"Gecko")?sl:""},bde=(q(bn={},HP,[new RegExp("rv:"+On)]),q(bn,UP,[new RegExp(ib+"?\\/"+On)]),q(bn,Ms,[new RegExp("("+Ms+"|CrMo)\\/"+On)]),q(bn,FP,[new RegExp("CriOS\\/"+On)]),q(bn,"UC Browser",[new RegExp("(UCBrowser|UCWEB)\\/"+On)]),q(bn,tf,[l2]),q(bn,qP,[l2]),q(bn,rb,[new RegExp("(Opera|OPR)\\/"+On)]),q(bn,sl,[new RegExp(sl+"\\/"+On)]),q(bn,BP,[new RegExp("FxiOS\\/"+On)]),q(bn,Zy,[new RegExp("Konqueror[:/]?"+On,"i")]),q(bn,Il,[new RegExp(Il+" "+On),l2]),q(bn,VP,[new RegExp("android\\s"+On,"i")]),q(bn,DP,[new RegExp(jP+"\\/"+On)]),q(bn,nb,[new RegExp("(rv:|MSIE )"+On)]),q(bn,"Mozilla",[new RegExp("rv:"+On)]),bn),j8=[[new RegExp(al+"; "+al+" (.*?)[);]","i"),function(e){return[al,e&&e[1]||""]}],[new RegExp(nf,"i"),[nf,""]],[new RegExp(rf,"i"),[rf,""]],[ob,[Il,""]],[new RegExp(ed,"i"),function(e,t){if(/Phone/.test(t)||/WPDesktop/.test(t))return[Yy,""];if(new RegExp(si).test(t)&&!/IEMobile\b/.test(t))return[ed+" "+si,""];var n=/Windows NT ([0-9.]+)/i.exec(t);if(n&&n[1]){var r=n[1],i=yde[r]||"";return/arm/i.test(t)&&(i="RT"),[ed,i]}return[ed,""]}],[/((iPhone|iPad|iPod).*?OS (\d+)_(\d+)_?(\d+)?|iPhone)/,function(e){if(e&&e[3]){var t=[e[3],e[4],e[5]||"0"];return[$1,t.join(".")]}return[$1,""]}],[/(watch.*\/(\d+\.\d+\.\d+)|watch os,(\d+\.\d+),)/i,function(e){var t="";return e&&e.length>=3&&(t=ve(e[2])?e[3]:e[2]),["watchOS",t]}],[new RegExp("("+to+" (\\d+)\\.(\\d+)\\.?(\\d+)?|"+to+")","i"),function(e){if(e&&e[2]){var t=[e[2],e[3],e[4]||"0"];return[to,t.join(".")]}return[to,""]}],[/Mac OS X (\d+)[_.](\d+)[_.]?(\d+)?/i,function(e){var t=["Mac OS X",""];if(e&&e[1]){var n=[e[1],e[2],e[3]||"0"];t[1]=n.join(".")}return t}],[/Mac/i,["Mac OS X",""]],[/CrOS/,[fde,""]],[/Linux|debian/i,["Linux",""]]],D8=function(e){return vde.test(e)?nf:mde.test(e)?rf:gde.test(e)?al:new RegExp(Xy,"i").test(e)?Xy:new RegExp("("+Yy+"|WPDesktop)","i").test(e)?Yy:/iPad/.test(e)?MP:/iPod/.test(e)?"iPod Touch":/iPhone/.test(e)?"iPhone":/(watch)(?: ?os[,/]|\d,\d\/)[\d.]+/i.test(e)?$P:ob.test(e)?Il:/(kobo)\s(ereader|touch)/i.test(e)?"Kobo":new RegExp($8,"i").test(e)?$8:/(kf[a-z]{2}wi|aeo[c-r]{2})( bui|\))/i.test(e)||/(kf[a-z]+)( bui|\)).+silk\//i.test(e)?"Kindle Fire":/(Android|ZTE)/i.test(e)?!new RegExp(si).test(e)||/(9138B|TB782B|Nexus [97]|pixel c|HUAWEISHT|BTV|noble nook|smart ultra 6)/i.test(e)?/pixel[\daxl ]{1,6}/i.test(e)&&!/pixel c/i.test(e)||/(huaweimed-al00|tah-|APA|SM-G92|i980|zte|U304AA)/i.test(e)||/lmy47v/i.test(e)&&!/QTAQZ3/i.test(e)?to:PP:to:new RegExp("(pda|"+si+")","i").test(e)?pde:new RegExp(ef,"i").test(e)&&!new RegExp(ef+" pc","i").test(e)?KP:""},jh="https?://(.*)",wde=["utm_source","utm_medium","utm_campaign","utm_content","utm_term","gclid","gad_source","gclsrc","dclid","gbraid","wbraid","fbclid","msclkid","twclid","li_fat_id","mc_cid","igshid","ttclid","rdt_cid"],hn={campaignParams:function(e){return ae?this._campaignParamsFromUrl(ae.URL,e):{}},_campaignParamsFromUrl:function(e,t){var n=wde.concat(t||[]),r={};return ft(n,(function(i){var o=N8(e,i);o&&(r[i]=o)})),r},_searchEngine:function(e){return e?e.search(jh+"google.([^/?]*)")===0?"google":e.search(jh+"bing.com")===0?"bing":e.search(jh+"yahoo.com")===0?"yahoo":e.search(jh+"duckduckgo.com")===0?"duckduckgo":null:null},_searchInfoFromReferrer:function(e){var t=hn._searchEngine(e),n=t!="yahoo"?"q":"p",r={};if(!us(t)){r.$search_engine=t;var i=ae?N8(ae.referrer,n):"";i.length&&(r.ph_keyword=i)}return r},searchInfo:function(){var e=ae?.referrer;return e?this._searchInfoFromReferrer(e):{}},browser:O8,browserVersion:function(e,t){var n=O8(e,t),r=bde[n];if(ve(r))return null;for(var i=0;i<r.length;i++){var o=r[i],s=e.match(o);if(s)return parseFloat(s[s.length-2])}return null},browserLanguage:function(){return navigator.language||navigator.userLanguage},os:function(e){for(var t=0;t<j8.length;t++){var n=Fn(j8[t],2),r=n[0],i=n[1],o=r.exec(e),s=o&&(Qr(i)?i(o,e):i);if(s)return s}return["",""]},device:D8,deviceType:function(e){var t=D8(e);return t===MP||t===PP||t==="Kobo"||t==="Kindle Fire"||t===KP?ef:t===nf||t===al||t===rf||t===Xy?"Console":t===$P?"Wearable":t?si:"Desktop"},referrer:function(){return ae?.referrer||"$direct"},referringDomain:function(){var e;return ae!=null&&ae.referrer&&((e=vd(ae.referrer))===null||e===void 0?void 0:e.host)||"$direct"},referrerInfo:function(){return{$referrer:this.referrer(),$referring_domain:this.referringDomain()}},initialPersonInfo:function(){return{r:this.referrer(),u:Jn?.href}},initialPersonPropsFromInfo:function(e){var t,n=e.r,r=e.u,i={$initial_referrer:n,$initial_referring_domain:n==null?void 0:n=="$direct"?"$direct":(t=vd(n))===null||t===void 0?void 0:t.host};if(r){i.$initial_current_url=r;var o=vd(r);i.$initial_host=o?.host,i.$initial_pathname=o?.pathname,ft(this._campaignParamsFromUrl(r),(function(s,a){i["$initial_"+Fy(a)]=s}))}return n&&ft(this._searchInfoFromReferrer(n),(function(s,a){i["$initial_"+Fy(a)]=s})),i},properties:function(){if(!fn)return{};var e=Fn(hn.os(fn),2),t=e[0],n=e[1];return Hn(Dy({$os:t,$os_version:n,$browser:hn.browser(fn,navigator.vendor),$device:hn.device(fn),$device_type:hn.deviceType(fn)}),{$current_url:Jn?.href,$host:Jn?.host,$pathname:Jn?.pathname,$raw_user_agent:fn.length>1e3?fn.substring(0,997)+"...":fn,$browser_version:hn.browserVersion(fn,navigator.vendor),$browser_language:hn.browserLanguage(),$screen_height:H?.screen.height,$screen_width:H?.screen.width,$viewport_height:H?.innerHeight,$viewport_width:H?.innerWidth,$lib:"web",$lib_version:qr.LIB_VERSION,$insert_id:Math.random().toString(36).substring(2,10)+Math.random().toString(36).substring(2,10),$time:LP()/1e3})},people_properties:function(){if(!fn)return{};var e=Fn(hn.os(fn),2),t=e[0],n=e[1];return Hn(Dy({$os:t,$os_version:n,$browser:hn.browser(fn,navigator.vendor)}),{$browser_version:hn.browserVersion(fn,navigator.vendor)})}},Sde=["cookie","localstorage","localstorage+cookie","sessionstorage","memory"],u2=(function(){function e(t){Ze(this,e),this.config=t,this.props={},this.campaign_params_saved=!1,this.name=(function(n){var r="";return n.token&&(r=n.token.replace(/\+/g,"PL").replace(/\//g,"SL").replace(/=/g,"EQ")),n.persistence_name?"ph_"+n.persistence_name:"ph_"+r+"_posthog"})(t),this.storage=this.buildStorage(t),this.load(),t.debug&&W.info("Persistence loaded",t.persistence,ee({},this.props)),this.update_config(t,t),this.save()}return Qe(e,[{key:"buildStorage",value:function(t){Sde.indexOf(t.persistence.toLowerCase())===-1&&(W.critical("Unknown persistence type "+t.persistence+"; falling back to localStorage+cookie"),t.persistence="localStorage+cookie");var n=t.persistence.toLowerCase();return n==="localstorage"&&rn.is_supported()?rn:n==="localstorage+cookie"&&$h.is_supported()?$h:n==="sessionstorage"&&Sn.is_supported()?Sn:n==="memory"?lde:n==="cookie"?Bo:$h.is_supported()?$h:Bo}},{key:"properties",value:function(){var t={};return ft(this.props,(function(n,r){if(r===Wc&&Cn(n))for(var i=Object.keys(n),o=0;o<i.length;o++)t["$feature/".concat(i[o])]=n[i[o]];else a=r,c=!1,(us(s=Jue)?c:m8&&s.indexOf===m8?s.indexOf(a)!=-1:(ft(s,(function(l){if(c||(c=l===a))return k1})),c))||(t[r]=n);var s,a,c})),t}},{key:"load",value:function(){if(!this.disabled){var t=this.storage.parse(this.name);t&&(this.props=Hn({},t))}}},{key:"save",value:function(){this.disabled||this.storage.set(this.name,this.props,this.expire_days,this.cross_subdomain,this.secure,this.config.debug)}},{key:"remove",value:function(){this.storage.remove(this.name,!1),this.storage.remove(this.name,!0)}},{key:"clear",value:function(){this.remove(),this.props={}}},{key:"register_once",value:function(t,n,r){var i=this;if(Cn(t)){ve(n)&&(n="None"),this.expire_days=ve(r)?this.default_expiry:r;var o=!1;if(ft(t,(function(s,a){i.props.hasOwnProperty(a)&&i.props[a]!==n||(i.props[a]=s,o=!0)})),o)return this.save(),!0}return!1}},{key:"register",value:function(t,n){var r=this;if(Cn(t)){this.expire_days=ve(n)?this.default_expiry:n;var i=!1;if(ft(t,(function(o,s){t.hasOwnProperty(s)&&r.props[s]!==o&&(r.props[s]=o,i=!0)})),i)return this.save(),!0}return!1}},{key:"unregister",value:function(t){t in this.props&&(delete this.props[t],this.save())}},{key:"update_campaign_params",value:function(){this.campaign_params_saved||(this.register(hn.campaignParams(this.config.custom_campaign_params)),this.campaign_params_saved=!0)}},{key:"update_search_keyword",value:function(){this.register(hn.searchInfo())}},{key:"update_referrer_info",value:function(){this.register_once(hn.referrerInfo(),void 0)}},{key:"set_initial_person_info",value:function(){this.props[Ky]||this.props[Wy]||this.register_once(q({},k8,hn.initialPersonInfo()),void 0)}},{key:"get_referrer_info",value:function(){return Dy({$referrer:this.props.$referrer,$referring_domain:this.props.$referring_domain})}},{key:"get_initial_props",value:function(){var t=this,n={};ft([Wy,Ky],(function(o){var s=t.props[o];s&&ft(s,(function(a,c){n["$initial_"+Fy(c)]=a}))}));var r=this.props[k8];if(r){var i=hn.initialPersonPropsFromInfo(r);Hn(n,i)}return n}},{key:"safe_merge",value:function(t){return ft(this.props,(function(n,r){r in t||(t[r]=n)})),t}},{key:"update_config",value:function(t,n){if(this.default_expiry=this.expire_days=t.cookie_expiration,this.set_disabled(t.disable_persistence),this.set_cross_subdomain(t.cross_subdomain_cookie),this.set_secure(t.secure_cookie),t.persistence!==n.persistence){var r=this.buildStorage(t),i=this.props;this.clear(),this.storage=r,this.props=i,this.save()}}},{key:"set_disabled",value:function(t){this.disabled=t,this.disabled?this.remove():this.save()}},{key:"set_cross_subdomain",value:function(t){t!==this.cross_subdomain&&(this.cross_subdomain=t,this.remove(),this.save())}},{key:"get_cross_subdomain",value:function(){return!!this.cross_subdomain}},{key:"set_secure",value:function(t){t!==this.secure&&(this.secure=t,this.remove(),this.save())}},{key:"set_event_timer",value:function(t,n){var r=this.props[Ju]||{};r[t]=n,this.props[Ju]=r,this.save()}},{key:"remove_event_timer",value:function(t){var n=(this.props[Ju]||{})[t];return ve(n)||(delete this.props[Ju][t],this.save()),n}},{key:"get_property",value:function(t){return this.props[t]}},{key:"set_property",value:function(t,n){this.props[t]=n,this.save()}}]),e})();function Qy(e){return JSON.stringify(e,(t=[],function(n,r){if(Cn(r)){for(;t.length>0&&t.at(-1)!==this;)t.pop();return t.includes(r)?"[Circular]":(t.push(r),r)}return r})).length;var t}var Cde=2,Ede=4;function Jy(e){var t=arguments.length>1&&arguments[1]!==void 0?arguments[1]:66060288e-1;if(e.size>=t&&e.data.length>1){var n=Math.floor(e.data.length/2),r=e.data.slice(0,n),i=e.data.slice(n);return[Jy({size:Qy(r),data:r,sessionId:e.sessionId,windowId:e.windowId}),Jy({size:Qy(i),data:i,sessionId:e.sessionId,windowId:e.windowId})].flatMap((function(o){return o}))}return[e]}var Pp=(function(e){return e[e.DomContentLoaded=0]="DomContentLoaded",e[e.Load=1]="Load",e[e.FullSnapshot=2]="FullSnapshot",e[e.IncrementalSnapshot=3]="IncrementalSnapshot",e[e.Meta=4]="Meta",e[e.Custom=5]="Custom",e[e.Plugin=6]="Plugin",e})(Pp||{}),Co=(function(e){return e[e.Mutation=0]="Mutation",e[e.MouseMove=1]="MouseMove",e[e.MouseInteraction=2]="MouseInteraction",e[e.Scroll=3]="Scroll",e[e.ViewportResize=4]="ViewportResize",e[e.Input=5]="Input",e[e.TouchMove=6]="TouchMove",e[e.MediaInteraction=7]="MediaInteraction",e[e.StyleSheetRule=8]="StyleSheetRule",e[e.CanvasMutation=9]="CanvasMutation",e[e.Font=10]="Font",e[e.Log=11]="Log",e[e.Drag=12]="Drag",e[e.StyleDeclaration=13]="StyleDeclaration",e[e.Selection=14]="Selection",e[e.AdoptedStyleSheet=15]="AdoptedStyleSheet",e[e.CustomElement=16]="CustomElement",e})(Co||{});function sb(e){return e?tm(e).split(/\s+/):[]}function F8(e){var t=H?.location.href;return!!(t&&e&&e.some((function(n){return t.match(n)})))}function O1(e){var t="";switch(Jd(e.className)){case"string":t=e.className;break;case"object":t=(e.className&&"baseVal"in e.className?e.className.baseVal:null)||e.getAttribute("class")||"";break;default:t=""}return sb(t)}function WP(e){return ur(e)?null:tm(e).split(/(\s+)/).filter((function(t){return cl(t)})).join("").replace(/[\r\n]/g," ").replace(/[ ]+/g," ").substring(0,255)}function j1(e){var t="";return t3(e)&&!ZP(e)&&e.childNodes&&e.childNodes.length&&ft(e.childNodes,(function(n){var r;zP(n)&&n.textContent&&(t+=(r=WP(n.textContent))!==null&&r!==void 0?r:"")})),tm(t)}function ab(e){return!!e&&e.nodeType===1}function Ns(e,t){return!!e&&!!e.tagName&&e.tagName.toLowerCase()===t.toLowerCase()}function zP(e){return!!e&&e.nodeType===3}function YP(e){return!!e&&e.nodeType===11}var e3=["a","button","form","input","select","textarea","label"];function XP(e){var t=e.parentNode;return!(!t||!ab(t))&&t}function xde(e,t){var n=arguments.length>2&&arguments[2]!==void 0?arguments[2]:void 0,r=arguments.length>3?arguments[3]:void 0,i=arguments.length>4?arguments[4]:void 0;if(!H||!e||Ns(e,"html")||!ab(e)||n!=null&&n.url_allowlist&&!F8(n.url_allowlist)||n!=null&&n.url_ignorelist&&F8(n.url_ignorelist))return!1;if(n!=null&&n.dom_event_allowlist){var o=n.dom_event_allowlist;if(o&&!o.some((function(g){return t.type===g})))return!1}for(var s=!1,a=[e],c=!0,l=e;l.parentNode&&!Ns(l,"body");)if(YP(l.parentNode))a.push(l.parentNode.host),l=l.parentNode.host;else{if(!(c=XP(l)))break;if(r||e3.indexOf(c.tagName.toLowerCase())>-1)s=!0;else{var u=H.getComputedStyle(c);u&&u.getPropertyValue("cursor")==="pointer"&&(s=!0)}a.push(c),l=c}if(!(function(g,v){var m=v?.element_allowlist;if(ve(m))return!0;var _,y=ui(g);try{var w=function(){var b=_.value;if(m.some((function(C){return b.tagName.toLowerCase()===C})))return{v:!0}};for(y.s();!(_=y.n()).done;){var S=w();if(Jd(S)==="object")return S.v}}catch(b){y.e(b)}finally{y.f()}return!1})(a,n)||!(function(g,v){var m=v?.css_selector_allowlist;if(ve(m))return!0;var _,y=ui(g);try{var w=function(){var b=_.value;if(m.some((function(C){return b.matches(C)})))return{v:!0}};for(y.s();!(_=y.n()).done;){var S=w();if(Jd(S)==="object")return S.v}}catch(b){y.e(b)}finally{y.f()}return!1})(a,n))return!1;var d=H.getComputedStyle(e);if(d&&d.getPropertyValue("cursor")==="pointer"&&t.type==="click")return!0;var p=e.tagName.toLowerCase();switch(p){case"html":return!1;case"form":return(i||["submit"]).indexOf(t.type)>=0;case"input":case"select":case"textarea":return(i||["change","click"]).indexOf(t.type)>=0;default:return s?(i||["click"]).indexOf(t.type)>=0:(i||["click"]).indexOf(t.type)>=0&&(e3.indexOf(p)>-1||e.getAttribute("contenteditable")==="true")}}function t3(e){for(var t=e;t.parentNode&&!Ns(t,"body");t=t.parentNode){var n=O1(t);if(Be(n,"ph-sensitive")||Be(n,"ph-no-capture"))return!1}if(Be(O1(e),"ph-include"))return!0;var r=e.type||"";if(An(r))switch(r.toLowerCase()){case"hidden":case"password":return!1}var i=e.name||e.id||"";return!(An(i)&&/^cc|cardnum|ccnum|creditcard|csc|cvc|cvv|exp|pass|pwd|routing|seccode|securitycode|securitynum|socialsec|socsec|ssn/i.test(i.replace(/[^a-zA-Z0-9]/g,"")))}function ZP(e){return!!(Ns(e,"input")&&!["button","checkbox","submit","reset"].includes(e.type)||Ns(e,"select")||Ns(e,"textarea")||e.getAttribute("contenteditable")==="true")}var QP="(4[0-9]{12}(?:[0-9]{3})?)|(5[1-5][0-9]{14})|(6(?:011|5[0-9]{2})[0-9]{12})|(3[47][0-9]{13})|(3(?:0[0-5]|[68][0-9])[0-9]{11})|((?:2131|1800|35[0-9]{3})[0-9]{11})",Ide=new RegExp("^(?:".concat(QP,")$")),Rde=new RegExp(QP),JP="\\d{3}-?\\d{2}-?\\d{4}",Lde=new RegExp("^(".concat(JP,")$")),kde=new RegExp("(".concat(JP,")"));function cl(e){var t=!(arguments.length>1&&arguments[1]!==void 0)||arguments[1];return!(ur(e)||An(e)&&(e=tm(e),(t?Ide:Rde).test((e||"").replace(/[- ]/g,""))||(t?Lde:kde).test(e)))}function H8(e){var t=j1(e);return cl(t="".concat(t," ").concat(eM(e)).trim())?t:""}function eM(e){var t="";return e&&e.childNodes&&e.childNodes.length&&ft(e.childNodes,(function(n){var r;if(n&&((r=n.tagName)===null||r===void 0?void 0:r.toLowerCase())==="span")try{var i=j1(n);t="".concat(t," ").concat(i).trim(),n.childNodes&&n.childNodes.length&&(t="".concat(t," ").concat(eM(n)).trim())}catch(o){W.error(o)}})),t}function Tde(e){return(function(t){var n=t.map((function(r){var i,o,s="";if(r.tag_name&&(s+=r.tag_name),r.attr_class){r.attr_class.sort();var a,c=ui(r.attr_class);try{for(c.s();!(a=c.n()).done;){var l=a.value;s+=".".concat(l.replace(/"/g,""))}}catch(p){c.e(p)}finally{c.f()}}var u=ee(ee(ee(ee({},r.text?{text:r.text}:{}),{},{"nth-child":(i=r.nth_child)!==null&&i!==void 0?i:0,"nth-of-type":(o=r.nth_of_type)!==null&&o!==void 0?o:0},r.href?{href:r.href}:{}),r.attr_id?{attr_id:r.attr_id}:{}),r.attributes),d={};return Ap(u).sort((function(p,g){var v=Fn(p,1)[0],m=Fn(g,1)[0];return v.localeCompare(m)})).forEach((function(p){var g=Fn(p,2),v=g[0],m=g[1];return d[U8(v.toString())]=U8(m.toString())})),s+=":",s+=Ap(u).map((function(p){var g=Fn(p,2),v=g[0],m=g[1];return"".concat(v,'="').concat(m,'"')})).join("")}));return n.join(";")})((function(t){return t.map((function(n){var r,i,o={text:(r=n.$el_text)===null||r===void 0?void 0:r.slice(0,400),tag_name:n.tag_name,href:(i=n.attr__href)===null||i===void 0?void 0:i.slice(0,2048),attr_class:Ade(n),attr_id:n.attr__id,nth_child:n.nth_child,nth_of_type:n.nth_of_type,attributes:{}};return Ap(n).filter((function(s){return Fn(s,1)[0].indexOf("attr__")===0})).forEach((function(s){var a=Fn(s,2),c=a[0],l=a[1];return o.attributes[c]=l})),o}))})(e))}function U8(e){return e.replace(/"|\\"/g,'\\"')}function Ade(e){var t=e.attr__class;return t?on(t)?t:sb(t):void 0}var n3="[SessionRecording]",r3="redacted",Dh={initiatorTypes:["audio","beacon","body","css","early-hint","embed","fetch","frame","iframe","icon","image","img","input","link","navigation","object","ping","script","track","video","xmlhttprequest"],maskRequestFn:function(e){return e},recordHeaders:!1,recordBody:!1,recordInitialRequests:!1,recordPerformance:!1,performanceEntryTypeToObserve:["first-input","navigation","paint","resource"],payloadSizeLimitBytes:1e6,payloadHostDenyList:[".lr-ingest.io",".ingest.sentry.io"]},Pde=["authorization","x-forwarded-for","authorization","cookie","set-cookie","x-api-key","x-real-ip","remote-addr","forwarded","proxy-authorization","x-csrf-token","x-csrftoken","x-xsrf-token"],Mde=["password","secret","passwd","api_key","apikey","auth","credentials","mysql_pwd","privatekey","private_key","token"],Nde=["/s/","/e/","/i/"];function B8(e,t,n,r){if(ur(e))return e;var i=t?.["content-length"]||(function(o){return new Blob([o]).size})(e);return An(i)&&(i=parseInt(i)),i>n?n3+" ".concat(r," body too large to record (").concat(i," bytes)"):e}function V8(e,t){if(ur(e))return e;var n=e;return cl(n,!1)||(n=n3+" "+t+" body "+r3),ft(Mde,(function(r){var i,o;(i=n)!==null&&i!==void 0&&i.length&&((o=n)===null||o===void 0?void 0:o.indexOf(r))!==-1&&(n=n3+" "+t+" body "+r3+" as might contain: "+r)})),n}var Lo,$de=function(e,t){var n,r,i,o={payloadSizeLimitBytes:Dh.payloadSizeLimitBytes,performanceEntryTypeToObserve:Uo(Dh.performanceEntryTypeToObserve),payloadHostDenyList:[].concat(Uo(t.payloadHostDenyList||[]),Uo(Dh.payloadHostDenyList))},s=e.session_recording.recordHeaders!==!1&&t.recordHeaders,a=e.session_recording.recordBody!==!1&&t.recordBody,c=e.capture_performance!==!1&&t.recordPerformance,l=(n=o,i=Math.min(1e6,(r=n.payloadSizeLimitBytes)!==null&&r!==void 0?r:1e6),function(p){return p!=null&&p.requestBody&&(p.requestBody=B8(p.requestBody,p.requestHeaders,i,"Request")),p!=null&&p.responseBody&&(p.responseBody=B8(p.responseBody,p.responseHeaders,i,"Response")),p}),u=function(p){return l((function(m){var _=vd(m.name);if(!(_&&_.pathname&&Nde.some((function(y){return _.pathname.indexOf(y)===0}))))return m})((v=(g=p).requestHeaders,ur(v)||ft(Object.keys(v??{}),(function(m){Pde.includes(m.toLowerCase())&&(v[m]=r3)})),g)));var g,v},d=Qr(e.session_recording.maskNetworkRequestFn);return d&&Qr(e.session_recording.maskCapturedNetworkRequestFn)&&W.warn("Both `maskNetworkRequestFn` and `maskCapturedNetworkRequestFn` are defined. `maskNetworkRequestFn` will be ignored."),d&&(e.session_recording.maskCapturedNetworkRequestFn=function(p){var g=e.session_recording.maskNetworkRequestFn({url:p.name});return ee(ee({},p),{},{name:g?.url})}),o.maskRequestFn=Qr(e.session_recording.maskCapturedNetworkRequestFn)?function(p){var g,v,m,_=u(p);return _&&(g=(v=(m=e.session_recording).maskCapturedNetworkRequestFn)===null||v===void 0?void 0:v.call(m,_))!==null&&g!==void 0?g:void 0}:function(p){return(function(g){if(!ve(g))return g.requestBody=V8(g.requestBody,"Request"),g.responseBody=V8(g.responseBody,"Response"),g})(u(p))},ee(ee(ee({},Dh),o),{},{recordHeaders:s,recordBody:a,recordPerformance:c,recordInitialRequests:c})},Ode=Qe((function e(t){var n,r,i=this,o=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{};Ze(this,e),q(this,"bucketSize",100),q(this,"refillRate",10),q(this,"mutationBuckets",{}),q(this,"loggedTracker",{}),q(this,"refillBuckets",(function(){Object.keys(i.mutationBuckets).forEach((function(s){i.mutationBuckets[s]=i.mutationBuckets[s]+i.refillRate,i.mutationBuckets[s]>=i.bucketSize&&delete i.mutationBuckets[s]}))})),q(this,"getNodeOrRelevantParent",(function(s){var a=i.rrweb.mirror.getNode(s);if(a?.nodeName!=="svg"&&a instanceof Element){var c=a.closest("svg");if(c)return[i.rrweb.mirror.getId(c),c]}return[s,a]})),q(this,"numberOfChanges",(function(s){var a,c,l,u,d,p,g,v;return((a=(c=s.removes)===null||c===void 0?void 0:c.length)!==null&&a!==void 0?a:0)+((l=(u=s.attributes)===null||u===void 0?void 0:u.length)!==null&&l!==void 0?l:0)+((d=(p=s.texts)===null||p===void 0?void 0:p.length)!==null&&d!==void 0?d:0)+((g=(v=s.adds)===null||v===void 0?void 0:v.length)!==null&&g!==void 0?g:0)})),q(this,"throttleMutations",(function(s){if(s.type!==3||s.data.source!==0)return s;var a=s.data,c=i.numberOfChanges(a);a.attributes&&(a.attributes=a.attributes.filter((function(u){var d,p,g,v=Fn(i.getNodeOrRelevantParent(u.id),2),m=v[0],_=v[1];return i.mutationBuckets[m]===0?!1:(i.mutationBuckets[m]=(d=i.mutationBuckets[m])!==null&&d!==void 0?d:i.bucketSize,i.mutationBuckets[m]=Math.max(i.mutationBuckets[m]-1,0),i.mutationBuckets[m]===0&&(i.loggedTracker[m]||(i.loggedTracker[m]=!0,(p=(g=i.options).onBlockedNode)===null||p===void 0||p.call(g,m,_))),u)})));var l=i.numberOfChanges(a);return l!==0||c===l?s:void 0})),this.rrweb=t,this.options=o,this.refillRate=(n=this.options.refillRate)!==null&&n!==void 0?n:this.refillRate,this.bucketSize=(r=this.options.bucketSize)!==null&&r!==void 0?r:this.bucketSize,setInterval((function(){i.refillBuckets()}),1e3)})),jde=3e5,Dde=[Co.MouseMove,Co.MouseInteraction,Co.Scroll,Co.ViewportResize,Co.Input,Co.TouchMove,Co.MediaInteraction,Co.Drag],q8=function(e){return{rrwebMethod:e,enqueuedAt:Date.now(),attempt:1}},Dr="[SessionRecording]",Fde=(function(){function e(t){var n=this;if(Ze(this,e),q(this,"queuedRRWebEvents",[]),q(this,"isIdle",!1),q(this,"_linkedFlagSeen",!1),q(this,"_lastActivityTimestamp",Date.now()),q(this,"_linkedFlag",null),q(this,"_forceAllowLocalhostNetworkCapture",!1),q(this,"_onBeforeUnload",(function(){n._flushBuffer()})),q(this,"_onOffline",(function(){n._tryAddCustomEvent("browser offline",{})})),q(this,"_onOnline",(function(){n._tryAddCustomEvent("browser online",{})})),q(this,"_onVisibilityChange",(function(){if(ae!=null&&ae.visibilityState){var s="window "+ae.visibilityState;n._tryAddCustomEvent(s,{})}})),q(this,"_samplingSessionListener",null),this.instance=t,this._captureStarted=!1,this._endpoint="/s/",this.stopRrweb=void 0,this.receivedDecide=!1,!this.instance.sessionManager)throw W.error(Dr+" started without valid sessionManager"),new Error(Dr+" started without valid sessionManager. This is a bug.");var r=this.sessionManager.checkAndGetSessionAndWindowId(),i=r.sessionId,o=r.windowId;this.sessionId=i,this.windowId=o,this.buffer=this.clearBuffer(),this._setupSampling()}return Qe(e,[{key:"rrwebRecord",get:function(){var t;return Rt==null||(t=Rt.rrweb)===null||t===void 0?void 0:t.record}},{key:"started",get:function(){return this._captureStarted}},{key:"sessionManager",get:function(){if(!this.instance.sessionManager)throw new Error(Dr+" must be started with a valid sessionManager.");return this.instance.sessionManager}},{key:"fullSnapshotIntervalMillis",get:function(){var t;return((t=this.instance.config.session_recording)===null||t===void 0?void 0:t.full_snapshot_interval_millis)||jde}},{key:"isSampled",get:function(){var t=this.instance.get_property(md);return ba(t)?t:null}},{key:"sessionDuration",get:function(){var t,n,r=(t=this.buffer)===null||t===void 0?void 0:t.data[((n=this.buffer)===null||n===void 0?void 0:n.data.length)-1],i=this.sessionManager.checkAndGetSessionAndWindowId(!0).sessionStartTimestamp;return r?r.timestamp-i:null}},{key:"isRecordingEnabled",get:function(){var t=!!this.instance.get_property(Uy),n=!this.instance.config.disable_session_recording;return H&&t&&n}},{key:"isConsoleLogCaptureEnabled",get:function(){var t=!!this.instance.get_property(E8),n=this.instance.config.enable_recording_console_log;return n??t}},{key:"canvasRecording",get:function(){var t=this.instance.get_property(I8);return t&&t.fps&&t.quality?{enabled:t.enabled,fps:t.fps,quality:t.quality}:void 0}},{key:"networkPayloadCapture",get:function(){var t,n,r=this.instance.get_property(x8),i={recordHeaders:(t=this.instance.config.session_recording)===null||t===void 0?void 0:t.recordHeaders,recordBody:(n=this.instance.config.session_recording)===null||n===void 0?void 0:n.recordBody},o=i?.recordHeaders||r?.recordHeaders,s=i?.recordBody||r?.recordBody,a=Cn(this.instance.config.capture_performance)?this.instance.config.capture_performance.network_timing:this.instance.config.capture_performance,c=!!(ba(a)?a:r?.capturePerformance);return o||s||c?{recordHeaders:o,recordBody:s,recordPerformance:c}:void 0}},{key:"sampleRate",get:function(){var t=this.instance.get_property(R8);return Gr(t)?t:null}},{key:"minimumDuration",get:function(){var t=this.instance.get_property(L8);return Gr(t)?t:null}},{key:"status",get:function(){return this.receivedDecide?this.isRecordingEnabled?ur(this._linkedFlag)||this._linkedFlagSeen?ba(this.isSampled)?this.isSampled?"sampled":"disabled":"active":"buffering":"disabled":"buffering"}},{key:"startIfEnabledOrStop",value:function(){this.isRecordingEnabled?(this._startCapture(),H?.addEventListener("beforeunload",this._onBeforeUnload),H?.addEventListener("offline",this._onOffline),H?.addEventListener("online",this._onOnline),H?.addEventListener("visibilitychange",this._onVisibilityChange),W.info(Dr+" started")):(this.stopRecording(),this.clearBuffer(),clearInterval(this._fullSnapshotTimer))}},{key:"stopRecording",value:function(){this._captureStarted&&this.stopRrweb&&(this.stopRrweb(),this.stopRrweb=void 0,this._captureStarted=!1,H?.removeEventListener("beforeunload",this._onBeforeUnload),H?.removeEventListener("offline",this._onOffline),H?.removeEventListener("online",this._onOnline),H?.removeEventListener("visibilitychange",this._onVisibilityChange),W.info(Dr+" stopped"))}},{key:"makeSamplingDecision",value:function(t){var n,r=this.sessionId!==t,i=this.sampleRate;if(Gr(i)){var o,s=this.isSampled,a=r||!ba(s);a?o=Math.random()<i:o=s,!o&&a&&W.warn(Dr+" Sample rate (".concat(i,") has determined that this sessionId (").concat(t,") will not be sent to the server.")),this._tryAddCustomEvent("samplingDecisionMade",{sampleRate:i}),(n=this.instance.persistence)===null||n===void 0||n.register(q({},md,o))}else{var c;(c=this.instance.persistence)===null||c===void 0||c.register(q({},md,null))}}},{key:"afterDecideResponse",value:function(t){var n,r,i,o=this;if(this._persistDecideResponse(t),this._linkedFlag=((n=t.sessionRecording)===null||n===void 0?void 0:n.linkedFlag)||null,(r=t.sessionRecording)!==null&&r!==void 0&&r.endpoint&&(this._endpoint=(i=t.sessionRecording)===null||i===void 0?void 0:i.endpoint),this._setupSampling(),!ur(this._linkedFlag)&&!this._linkedFlagSeen){var s=An(this._linkedFlag)?this._linkedFlag:this._linkedFlag.flag,a=An(this._linkedFlag)?null:this._linkedFlag.variant;this.instance.onFeatureFlags((function(c,l){var u=Cn(l)&&s in l,d=a?l[s]===a:u;if(d){var p={linkedFlag:s,linkedVariant:a},g="linked flag matched";W.info(Dr+" "+g,p),o._tryAddCustomEvent(g,p)}o._linkedFlagSeen=d}))}this.receivedDecide=!0,this.startIfEnabledOrStop()}},{key:"_setupSampling",value:function(){var t=this;Gr(this.sampleRate)&&us(this._samplingSessionListener)&&(this._samplingSessionListener=this.sessionManager.onSessionId((function(n){t.makeSamplingDecision(n)})))}},{key:"_persistDecideResponse",value:function(t){if(this.instance.persistence){var n=this.instance.persistence,r=function(){var i,o,s,a,c,l,u,d,p=(i=t.sessionRecording)===null||i===void 0?void 0:i.sampleRate,g=ur(p)?null:parseFloat(p),v=(o=t.sessionRecording)===null||o===void 0?void 0:o.minimumDurationMilliseconds;n.register((q(d={},Uy,!!t.sessionRecording),q(d,E8,(s=t.sessionRecording)===null||s===void 0?void 0:s.consoleLogRecordingEnabled),q(d,x8,ee({capturePerformance:t.capturePerformance},(a=t.sessionRecording)===null||a===void 0?void 0:a.networkPayloadCapture)),q(d,I8,{enabled:(c=t.sessionRecording)===null||c===void 0?void 0:c.recordCanvas,fps:(l=t.sessionRecording)===null||l===void 0?void 0:l.canvasFps,quality:(u=t.sessionRecording)===null||u===void 0?void 0:u.canvasQuality}),q(d,R8,g),q(d,L8,ve(v)?null:v),d))};r(),this.sessionManager.onSessionId(r)}}},{key:"log",value:function(t){var n,r=arguments.length>1&&arguments[1]!==void 0?arguments[1]:"log";(n=this.instance.sessionRecording)===null||n===void 0||n.onRRwebEmit({type:6,data:{plugin:"rrweb/console@1",payload:{level:r,trace:[],payload:[JSON.stringify(t)]}},timestamp:LP()})}},{key:"_startCapture",value:function(){var t=this;ve(Object.assign)||this._captureStarted||this.instance.config.disable_session_recording||this.instance.consent.isOptedOut()||(this._captureStarted=!0,this.sessionManager.checkAndGetSessionAndWindowId(),this.rrwebRecord?this._onScriptLoaded():this.instance.requestRouter.loadScript("/static/recorder.js?v=".concat(qr.LIB_VERSION),(function(n){if(n)return W.error(Dr+" could not load recorder.js",n);t._onScriptLoaded()})))}},{key:"isInteractiveEvent",value:function(t){var n;return t.type===3&&Dde.indexOf((n=t.data)===null||n===void 0?void 0:n.source)!==-1}},{key:"_updateWindowAndSessionIds",value:function(t){var n=this.isInteractiveEvent(t);n||this.isIdle||t.timestamp-this._lastActivityTimestamp>3e5&&(this.isIdle=!0,clearInterval(this._fullSnapshotTimer),this._flushBuffer());var r=!1;if(n&&(this._lastActivityTimestamp=t.timestamp,this.isIdle&&(this.isIdle=!1,this._tryAddCustomEvent("sessionNoLongerIdle",{reason:"user activity",type:t.type}),r=!0)),!this.isIdle){var i=this.sessionManager.checkAndGetSessionAndWindowId(!n,t.timestamp),o=i.windowId,s=i.sessionId,a=this.sessionId!==s,c=this.windowId!==o;this.windowId=o,this.sessionId=s,(r||[Cde,Ede].indexOf(t.type)===-1&&(c||a||ve(this._fullSnapshotTimer)))&&this._tryTakeFullSnapshot()}}},{key:"_tryRRWebMethod",value:function(t){try{return t.rrwebMethod(),!0}catch(n){return this.queuedRRWebEvents.length<10?this.queuedRRWebEvents.push({enqueuedAt:t.enqueuedAt||Date.now(),attempt:t.attempt++,rrwebMethod:t.rrwebMethod}):W.warn(Dr+" could not emit queued rrweb event.",n,t),!1}}},{key:"_tryAddCustomEvent",value:function(t,n){var r=this;return this._tryRRWebMethod(q8((function(){return r.rrwebRecord.addCustomEvent(t,n)})))}},{key:"_tryTakeFullSnapshot",value:function(){var t=this;return this._tryRRWebMethod(q8((function(){return t.rrwebRecord.takeFullSnapshot()})))}},{key:"_onScriptLoaded",value:function(){for(var t,n=this,r={blockClass:"ph-no-capture",blockSelector:void 0,ignoreClass:"ph-ignore-input",maskTextClass:"ph-mask",maskTextSelector:void 0,maskTextFn:void 0,maskAllInputs:!0,maskInputOptions:{password:!0},maskInputFn:void 0,slimDOMOptions:{},collectFonts:!1,inlineStylesheet:!0,recordCrossOriginIframes:!1},i=this.instance.config.session_recording,o=0,s=Object.entries(i||{});o<s.length;o++){var a=Fn(s[o],2),c=a[0],l=a[1];c in r&&(c==="maskInputOptions"?r.maskInputOptions=ee({password:!0},l):r[c]=l)}if(this.canvasRecording&&this.canvasRecording.enabled&&(r.recordCanvas=!0,r.sampling={canvas:this.canvasRecording.fps},r.dataURLOptions={type:"image/webp",quality:this.canvasRecording.quality}),this.rrwebRecord){this.mutationRateLimiter=(t=this.mutationRateLimiter)!==null&&t!==void 0?t:new Ode(this.rrwebRecord,{onBlockedNode:function(d,p){var g="Too many mutations on node '".concat(d,"'. Rate limiting. This could be due to SVG animations or something similar");W.info(g,{node:p}),n.log(Dr+" "+g,"warn")}});var u=this._gatherRRWebPlugins();this.stopRrweb=this.rrwebRecord(ee({emit:function(d){n.onRRwebEmit(d)},plugins:u},r)),this.instance._addCaptureHook((function(d){try{if(d==="$pageview"){var p=H?n._maskUrl(H.location.href):"";if(!p)return;n._tryAddCustomEvent("$pageview",{href:p})}}catch(g){W.error("Could not add $pageview to rrweb session",g)}})),this._lastActivityTimestamp=Date.now(),this.isIdle=!1,this._tryAddCustomEvent("$session_options",{sessionRecordingOptions:r,activePlugins:u.map((function(d){return d?.name}))}),this._tryAddCustomEvent("$posthog_config",{config:this.instance.config})}else W.error(Dr+"onScriptLoaded was called but rrwebRecord is not available. This indicates something has gone wrong.")}},{key:"_scheduleFullSnapshot",value:function(){var t=this;if(this._fullSnapshotTimer&&clearInterval(this._fullSnapshotTimer),!this.isIdle){var n=this.fullSnapshotIntervalMillis;n&&(this._fullSnapshotTimer=setInterval((function(){t._tryTakeFullSnapshot()}),n))}}},{key:"_gatherRRWebPlugins",value:function(){var t=[];return Rt.rrwebConsoleRecord&&this.isConsoleLogCaptureEnabled&&t.push(Rt.rrwebConsoleRecord.getRecordConsolePlugin()),this.networkPayloadCapture&&Qr(Rt.getRecordNetworkPlugin)&&(!ude.includes(location.hostname)||this._forceAllowLocalhostNetworkCapture?t.push(Rt.getRecordNetworkPlugin($de(this.instance.config,this.networkPayloadCapture))):W.info(Dr+" NetworkCapture not started because we are on localhost.")),t}},{key:"onRRwebEmit",value:function(t){if(this._processQueuedEvents(),t&&Cn(t)){if(t.type===Pp.Meta){var n=this._maskUrl(t.data.href);if(this._lastHref=n,!n)return;t.data.href=n}else this._pageViewFallBack();t.type===Pp.FullSnapshot&&this._scheduleFullSnapshot();var r=this.mutationRateLimiter?this.mutationRateLimiter.throttleMutations(t):t;if(r){var i=(function(a){var c=a;if(c&&Cn(c)&&c.type===6&&Cn(c.data)&&c.data.plugin==="rrweb/console@1"){c.data.payload.payload.length>10&&(c.data.payload.payload=c.data.payload.payload.slice(0,10),c.data.payload.payload.push("...[truncated]"));for(var l=[],u=0;u<c.data.payload.payload.length;u++)c.data.payload.payload[u]&&c.data.payload.payload[u].length>2e3?l.push(c.data.payload.payload[u].slice(0,2e3)+"...[truncated]"):l.push(c.data.payload.payload[u]);return c.data.payload.payload=l,a}return a})(r),o=Qy(i);if(this._updateWindowAndSessionIds(i),!this.isIdle||i.type===Pp.Custom){var s={$snapshot_bytes:o,$snapshot_data:i,$session_id:this.sessionId,$window_id:this.windowId};this.status!=="disabled"?this._captureSnapshotBuffered(s):this.clearBuffer()}}}}},{key:"_pageViewFallBack",value:function(){if(!this.instance.config.capture_pageview&&H){var t=this._maskUrl(H.location.href);this._lastHref!==t&&(this._tryAddCustomEvent("$url_changed",{href:t}),this._lastHref=t)}}},{key:"_processQueuedEvents",value:function(){var t=this;if(this.queuedRRWebEvents.length){var n=Uo(this.queuedRRWebEvents);this.queuedRRWebEvents=[],n.forEach((function(r){Date.now()-r.enqueuedAt<=2e3&&t._tryRRWebMethod(r)}))}}},{key:"_maskUrl",value:function(t){var n=this.instance.config.session_recording;if(n.maskNetworkRequestFn){var r,i={url:t};return(r=i=n.maskNetworkRequestFn(i))===null||r===void 0?void 0:r.url}return t}},{key:"clearBuffer",value:function(){return this.buffer={size:0,data:[],sessionId:this.sessionId,windowId:this.windowId},this.buffer}},{key:"_flushBuffer",value:function(){var t=this;this.flushBufferTimer&&(clearTimeout(this.flushBufferTimer),this.flushBufferTimer=void 0);var n=this.minimumDuration,r=this.sessionDuration,i=Gr(r)&&r>=0,o=Gr(n)&&i&&r<n;return this.status==="buffering"||o?(this.flushBufferTimer=setTimeout((function(){t._flushBuffer()}),2e3),this.buffer):(this.buffer.data.length>0&&Jy(this.buffer).forEach((function(s){t._captureSnapshot({$snapshot_bytes:s.size,$snapshot_data:s.data,$session_id:s.sessionId,$window_id:s.windowId})})),this.clearBuffer())}},{key:"_captureSnapshotBuffered",value:function(t){var n,r=this,i=2+(((n=this.buffer)===null||n===void 0?void 0:n.data.length)||0);!this.isIdle&&(this.buffer.size+t.$snapshot_bytes+i>943718.4||this.buffer.sessionId!==this.sessionId)&&(this.buffer=this._flushBuffer()),this.buffer.size+=t.$snapshot_bytes,this.buffer.data.push(t.$snapshot_data),this.flushBufferTimer||this.isIdle||(this.flushBufferTimer=setTimeout((function(){r._flushBuffer()}),2e3))}},{key:"_captureSnapshot",value:function(t){this.instance.capture("$snapshot",t,{_url:this.instance.requestRouter.endpointFor("api",this._endpoint),_noTruncate:!0,_batchKey:"recordings",skip_client_rate_limiting:!0})}},{key:"overrideLinkedFlag",value:function(){this._linkedFlagSeen=!0}}]),e})(),Hde=(function(){function e(t){Ze(this,e),this.instance=t,this.instance.decideEndpointWasHit=this.instance._hasBootstrappedFeatureFlags()}return Qe(e,[{key:"call",value:function(){var t=this,n={token:this.instance.config.token,distinct_id:this.instance.get_distinct_id(),groups:this.instance.getGroups(),person_properties:this.instance.get_property(zc),group_properties:this.instance.get_property(Cs),disable_flags:this.instance.config.advanced_disable_feature_flags||this.instance.config.advanced_disable_feature_flags_on_first_load||void 0};this.instance._send_request({method:"POST",url:this.instance.requestRouter.endpointFor("api","/decide/?v=3"),data:n,compression:this.instance.config.disable_compression?void 0:Li.Base64,timeout:this.instance.config.feature_flag_request_timeout_ms,callback:function(r){return t.parseDecideResponse(r.json)}})}},{key:"parseDecideResponse",value:function(t){var n=this;this.instance.featureFlags.setReloadingPaused(!1),this.instance.featureFlags._startReloadTimer();var r=!t;if(this.instance.config.advanced_disable_feature_flags_on_first_load||this.instance.config.advanced_disable_feature_flags||this.instance.featureFlags.receivedFeatureFlags(t??{},r),r)W.error("Failed to fetch feature flags from PostHog.");else{if(!ae||!ae.body)return W.info("document not ready yet, trying again in 500 milliseconds..."),void setTimeout((function(){n.parseDecideResponse(t)}),500);if(this.instance._afterDecideResponse(t),t.siteApps)if(this.instance.config.opt_in_site_apps){var i,o=ui(t.siteApps);try{var s=function(){var a=i.value,c=a.id,l=a.url,u=n.instance.requestRouter.endpointFor("api",l);Rt["__$$ph_site_app_".concat(c)]=n.instance,n.instance.requestRouter.loadScript(u,(function(d){if(d)return W.error("Error while initializing PostHog app with config id ".concat(c),d)}))};for(o.s();!(i=o.n()).done;)s()}catch(a){o.e(a)}finally{o.f()}}else t.siteApps.length>0&&W.error('PostHog site apps are disabled. Enable the "opt_in_site_apps" config to proceed.')}}}]),e})(),Ude=H!=null&&H.location?N1(H.location.hash,"__posthog")||N1(location.hash,"state"):null,G8="_postHogToolbarParams";(function(e){e[e.UNINITIALIZED=0]="UNINITIALIZED",e[e.LOADING=1]="LOADING",e[e.LOADED=2]="LOADED"})(Lo||(Lo={}));var Bde=(function(){function e(t){Ze(this,e),this.instance=t}return Qe(e,[{key:"setToolbarState",value:function(t){Rt.ph_toolbar_state=t}},{key:"getToolbarState",value:function(){var t;return(t=Rt.ph_toolbar_state)!==null&&t!==void 0?t:Lo.UNINITIALIZED}},{key:"maybeLoadToolbar",value:function(){var t,n,r=arguments.length>0&&arguments[0]!==void 0?arguments[0]:void 0,i=arguments.length>1&&arguments[1]!==void 0?arguments[1]:void 0,o=arguments.length>2&&arguments[2]!==void 0?arguments[2]:void 0;if(!H||!ae)return!1;r=(t=r)!==null&&t!==void 0?t:H.location,o=(n=o)!==null&&n!==void 0?n:H.history;try{if(!i){try{H.localStorage.setItem("test","test"),H.localStorage.removeItem("test")}catch{return!1}i=H?.localStorage}var s,a=Ude||N1(r.hash,"__posthog")||N1(r.hash,"state"),c=a?_8((function(){return JSON.parse(atob(decodeURIComponent(a)))}))||_8((function(){return JSON.parse(decodeURIComponent(a))})):null;return c&&c.action==="ph_authorize"?((s=c).source="url",s&&Object.keys(s).length>0&&(c.desiredHash?r.hash=c.desiredHash:o?o.replaceState(o.state,"",r.pathname+r.search):r.hash="")):((s=JSON.parse(i.getItem(G8)||"{}")).source="localstorage",delete s.userIntent),!(!s.token||this.instance.config.token!==s.token)&&(this.loadToolbar(s),!0)}catch{return!1}}},{key:"_callLoadToolbar",value:function(t){(Rt.ph_load_toolbar||Rt.ph_load_editor)(t,this.instance)}},{key:"loadToolbar",value:function(t){var n=this,r=!(ae==null||!ae.getElementById(zy));if(!H||r)return!1;var i=this.instance.requestRouter.region==="custom"&&this.instance.config.advanced_disable_toolbar_metrics,o=ee(ee({token:this.instance.config.token},t),{},{apiURL:this.instance.requestRouter.endpointFor("ui")},i?{instrument:!1}:{});if(H.localStorage.setItem(G8,JSON.stringify(ee(ee({},o),{},{source:void 0}))),this.getToolbarState()===Lo.LOADED)this._callLoadToolbar(o);else if(this.getToolbarState()===Lo.UNINITIALIZED){this.setToolbarState(Lo.LOADING);var s=3e5,a=Math.floor(Date.now()/s)*s;this.instance.requestRouter.loadScript("/static/toolbar.js?t=".concat(a),(function(c){if(c)return W.error("Failed to load toolbar",c),void n.setToolbarState(Lo.UNINITIALIZED);n.setToolbarState(Lo.LOADED),n._callLoadToolbar(o)})),No(H,"turbolinks:load",(function(){n.setToolbarState(Lo.UNINITIALIZED),n.loadToolbar(o)}))}return!0}},{key:"_loadEditor",value:function(t){return this.loadToolbar(t)}},{key:"maybeLoadEditor",value:function(){var t=arguments.length>0&&arguments[0]!==void 0?arguments[0]:void 0,n=arguments.length>1&&arguments[1]!==void 0?arguments[1]:void 0,r=arguments.length>2&&arguments[2]!==void 0?arguments[2]:void 0;return this.maybeLoadToolbar(t,n,r)}}]),e})(),Vde=(function(){function e(t){Ze(this,e),q(this,"isPaused",!0),q(this,"queue",[]),q(this,"flushTimeoutMs",3e3),this.sendRequest=t}return Qe(e,[{key:"enqueue",value:function(t){this.queue.push(t),this.flushTimeout||this.setFlushTimeout()}},{key:"unload",value:function(){var t=this;this.clearFlushTimeout();var n=this.queue.length>0?this.formatQueue():{},r=Object.values(n);[].concat(Uo(r.filter((function(i){return i.url.indexOf("/e")===0}))),Uo(r.filter((function(i){return i.url.indexOf("/e")!==0})))).map((function(i){t.sendRequest(ee(ee({},i),{},{transport:"sendBeacon"}))}))}},{key:"enable",value:function(){this.isPaused=!1,this.setFlushTimeout()}},{key:"setFlushTimeout",value:function(){var t=this;this.isPaused||(this.flushTimeout=setTimeout((function(){if(t.clearFlushTimeout(),t.queue.length>0){var n=t.formatQueue(),r=function(o){var s=n[o],a=new Date().getTime();s.data&&on(s.data)&&ft(s.data,(function(c){c.offset=Math.abs(c.timestamp-a),delete c.timestamp})),t.sendRequest(s)};for(var i in n)r(i)}}),this.flushTimeoutMs))}},{key:"clearFlushTimeout",value:function(){clearTimeout(this.flushTimeout),this.flushTimeout=void 0}},{key:"formatQueue",value:function(){var t={};return ft(this.queue,(function(n){var r,i=n,o=(i?i.batchKey:null)||i.url;ve(t[o])&&(t[o]=ee(ee({},i),{},{data:[]})),(r=t[o].data)===null||r===void 0||r.push(i.data)})),this.queue=[],t}}]),e})(),ai=Uint8Array,sr=Uint16Array,Rl=Uint32Array,cb=new ai([0,0,0,0,0,0,0,0,1,1,1,1,2,2,2,2,3,3,3,3,4,4,4,4,5,5,5,5,0,0,0,0]),lb=new ai([0,0,0,0,1,1,2,2,3,3,4,4,5,5,6,6,7,7,8,8,9,9,10,10,11,11,12,12,13,13,0,0]),K8=new ai([16,17,18,0,8,7,9,6,10,5,11,4,12,3,13,2,14,1,15]),tM=function(e,t){for(var n=new sr(31),r=0;r<31;++r)n[r]=t+=1<<e[r-1];var i=new Rl(n[30]);for(r=1;r<30;++r)for(var o=n[r];o<n[r+1];++o)i[o]=o-n[r]<<5|r;return[n,i]},nM=tM(cb,2),qde=nM[0],i3=nM[1];qde[28]=258,i3[258]=28;for(var W8=tM(lb,0)[1],rM=new sr(32768),bt=0;bt<32768;++bt){var ha=(43690&bt)>>>1|(21845&bt)<<1;ha=(61680&(ha=(52428&ha)>>>2|(13107&ha)<<2))>>>4|(3855&ha)<<4,rM[bt]=((65280&ha)>>>8|(255&ha)<<8)>>>1}var yd=function(e,t,n){for(var r=e.length,i=0,o=new sr(t);i<r;++i)++o[e[i]-1];var s,a=new sr(t);for(i=0;i<t;++i)a[i]=a[i-1]+o[i-1]<<1;for(s=new sr(r),i=0;i<r;++i)s[i]=rM[a[e[i]-1]++]>>>15-e[i];return s},Va=new ai(288);for(bt=0;bt<144;++bt)Va[bt]=8;for(bt=144;bt<256;++bt)Va[bt]=9;for(bt=256;bt<280;++bt)Va[bt]=7;for(bt=280;bt<288;++bt)Va[bt]=8;var D1=new ai(32);for(bt=0;bt<32;++bt)D1[bt]=5;var Gde=yd(Va,9),Kde=yd(D1,5),iM=function(e){return(e/8>>0)+(7&e&&1)},oM=function(e,t,n){(n==null||n>e.length)&&(n=e.length);var r=new(e instanceof sr?sr:e instanceof Rl?Rl:ai)(n-t);return r.set(e.subarray(t,n)),r},wo=function(e,t,n){n<<=7&t;var r=t/8>>0;e[r]|=n,e[r+1]|=n>>>8},Au=function(e,t,n){n<<=7&t;var r=t/8>>0;e[r]|=n,e[r+1]|=n>>>8,e[r+2]|=n>>>16},d2=function(e,t){for(var n=[],r=0;r<e.length;++r)e[r]&&n.push({s:r,f:e[r]});var i=n.length,o=n.slice();if(!i)return[new ai(0),0];if(i==1){var s=new ai(n[0].s+1);return s[n[0].s]=1,[s,1]}n.sort((function(C,E){return C.f-E.f})),n.push({s:-1,f:25001});var a=n[0],c=n[1],l=0,u=1,d=2;for(n[0]={s:-1,f:a.f+c.f,l:a,r:c};u!=i-1;)a=n[n[l].f<n[d].f?l++:d++],c=n[l!=u&&n[l].f<n[d].f?l++:d++],n[u++]={s:-1,f:a.f+c.f,l:a,r:c};var p=o[0].s;for(r=1;r<i;++r)o[r].s>p&&(p=o[r].s);var g=new sr(p+1),v=Wde(n[u-1],g,0);if(v>t){r=0;var m=0,_=v-t,y=1<<_;for(o.sort((function(C,E){return g[E.s]-g[C.s]||C.f-E.f}));r<i;++r){var w=o[r].s;if(!(g[w]>t))break;m+=y-(1<<v-g[w]),g[w]=t}for(m>>>=_;m>0;){var S=o[r].s;g[S]<t?m-=1<<t-g[S]++-1:++r}for(;r>=0&&m;--r){var b=o[r].s;g[b]==t&&(--g[b],++m)}v=t}return[new ai(g),v]},Wde=function e(t,n,r){return t.s==-1?Math.max(e(t.l,n,r+1),e(t.r,n,r+1)):n[t.s]=r},z8=function(e){for(var t=e.length;t&&!e[--t];);for(var n=new sr(++t),r=0,i=e[0],o=1,s=function(c){n[r++]=c},a=1;a<=t;++a)if(e[a]==i&&a!=t)++o;else{if(!i&&o>2){for(;o>138;o-=138)s(32754);o>2&&(s(o>10?o-11<<5|28690:o-3<<5|12305),o=0)}else if(o>3){for(s(i),--o;o>6;o-=6)s(8304);o>2&&(s(o-3<<5|8208),o=0)}for(;o--;)s(i);o=1,i=e[a]}return[n.subarray(0,r),t]},Pu=function(e,t){for(var n=0,r=0;r<t.length;++r)n+=e[r]*t[r];return n},o3=function(e,t,n){var r=n.length,i=iM(t+2);e[i]=255&r,e[i+1]=r>>>8,e[i+2]=255^e[i],e[i+3]=255^e[i+1];for(var o=0;o<r;++o)e[i+o+4]=n[o];return 8*(i+4+r)},Y8=function(e,t,n,r,i,o,s,a,c,l,u){wo(t,u++,n),++i[256];for(var d=d2(i,15),p=d[0],g=d[1],v=d2(o,15),m=v[0],_=v[1],y=z8(p),w=y[0],S=y[1],b=z8(m),C=b[0],E=b[1],x=new sr(19),I=0;I<w.length;++I)x[31&w[I]]++;for(I=0;I<C.length;++I)x[31&C[I]]++;for(var L=d2(x,7),R=L[0],k=L[1],A=19;A>4&&!R[K8[A-1]];--A);var P,O,j,$,T=l+5<<3,N=Pu(i,Va)+Pu(o,D1)+s,M=Pu(i,p)+Pu(o,m)+s+14+3*A+Pu(x,R)+(2*x[16]+3*x[17]+7*x[18]);if(T<=N&&T<=M)return o3(t,u,e.subarray(c,c+l));if(wo(t,u,1+(M<N)),u+=2,M<N){P=yd(p,g),O=p,j=yd(m,_),$=m;var B=yd(R,k);for(wo(t,u,S-257),wo(t,u+5,E-1),wo(t,u+10,A-4),u+=14,I=0;I<A;++I)wo(t,u+3*I,R[K8[I]]);u+=3*A;for(var F=[w,C],K=0;K<2;++K){var te=F[K];for(I=0;I<te.length;++I){var oe=31&te[I];wo(t,u,B[oe]),u+=R[oe],oe>15&&(wo(t,u,te[I]>>>5&127),u+=te[I]>>>12)}}}else P=Gde,O=Va,j=Kde,$=D1;for(I=0;I<a;++I)if(r[I]>255){oe=r[I]>>>18&31,Au(t,u,P[oe+257]),u+=O[oe+257],oe>7&&(wo(t,u,r[I]>>>23&31),u+=cb[oe]);var pe=31&r[I];Au(t,u,j[pe]),u+=$[pe],pe>3&&(Au(t,u,r[I]>>>5&8191),u+=lb[pe])}else Au(t,u,P[r[I]]),u+=O[r[I]];return Au(t,u,P[256]),u+O[256]},zde=new Rl([65540,131080,131088,131104,262176,1048704,1048832,2114560,2117632]),Yde=(function(){for(var e=new Rl(256),t=0;t<256;++t){for(var n=t,r=9;--r;)n=(1&n&&3988292384)^n>>>1;e[t]=n}return e})(),Xde=function(e,t,n,r,i){return(function(o,s,a,c,l,u){var d=o.length,p=new ai(c+d+5*(1+Math.floor(d/7e3))+l),g=p.subarray(c,p.length-l),v=0;if(!s||d<8)for(var m=0;m<=d;m+=65535){var _=m+65535;_<d?v=o3(g,v,o.subarray(m,_)):(g[m]=u,v=o3(g,v,o.subarray(m,d)))}else{for(var y=zde[s-1],w=y>>>13,S=8191&y,b=(1<<a)-1,C=new sr(32768),E=new sr(b+1),x=Math.ceil(a/3),I=2*x,L=function(cn){return(o[cn]^o[cn+1]<<x^o[cn+2]<<I)&b},R=new Rl(25e3),k=new sr(288),A=new sr(32),P=0,O=0,j=(m=0,0),$=0,T=0;m<d;++m){var N=L(m),M=32767&m,B=E[N];if(C[M]=B,E[N]=M,$<=m){var F=d-m;if((P>7e3||j>24576)&&F>423){v=Y8(o,g,0,R,k,A,O,j,T,m-T,v),j=P=O=0,T=m;for(var K=0;K<286;++K)k[K]=0;for(K=0;K<30;++K)A[K]=0}var te=2,oe=0,pe=S,ne=M-B&32767;if(F>2&&N==L(m-ne))for(var z=Math.min(w,F)-1,re=Math.min(32767,m),Re=Math.min(258,F);ne<=re&&--pe&&M!=B;){if(o[m+te]==o[m+te-ne]){for(var Le=0;Le<Re&&o[m+Le]==o[m+Le-ne];++Le);if(Le>te){if(te=Le,oe=ne,Le>z)break;var Se=Math.min(ne,Le-2),xt=0;for(K=0;K<Se;++K){var ct=m-ne+K+32768&32767,we=ct-C[ct]+32768&32767;we>xt&&(xt=we,B=ct)}}}ne+=(M=B)-(B=C[M])+32768&32767}if(oe){R[j++]=268435456|i3[te]<<18|W8[oe];var Rn=31&i3[te],go=31&W8[oe];O+=cb[Rn]+lb[go],++k[257+Rn],++A[go],$=m+te,++P}else R[j++]=o[m],++k[o[m]]}}v=Y8(o,g,u,R,k,A,O,j,T,m-T,v)}return oM(p,0,c+iM(v)+l)})(e,t.level==null?6:t.level,t.mem==null?Math.ceil(1.5*Math.max(8,Math.min(13,Math.log(e.length)))):12+t.mem,n,r,!0)},f2=function(e,t,n){for(;n;++t)e[t]=n,n>>>=8};function Zde(e,t){t===void 0&&(t={});var n=(function(){var a=4294967295;return{p:function(c){for(var l=a,u=0;u<c.length;++u)l=Yde[255&l^c[u]]^l>>>8;a=l},d:function(){return 4294967295^a}}})(),r=e.length;n.p(e);var i,o=Xde(e,t,10+((i=t).filename&&i.filename.length+1||0),8),s=o.length;return(function(a,c){var l=c.filename;if(a[0]=31,a[1]=139,a[2]=8,a[8]=c.level<2?4:c.level==9?2:0,a[9]=3,c.mtime!=0&&f2(a,4,Math.floor(new Date(c.mtime||Date.now())/1e3)),l){a[3]=8;for(var u=0;u<=l.length;++u)a[u+10]=l.charCodeAt(u)}})(o,t),f2(o,s-8,n.d()),f2(o,s-4,r),o}var Qde=!!jy||!!Oy,X8="text/plain",F1=function(e,t){var n=Fn(e.split("?"),2),r=n[0],i=n[1],o=ee({},t);i?.split("&").forEach((function(a){var c=Fn(a.split("="),1)[0];delete o[c]}));var s=dde(o);return s=s?(i?i+"&":"")+s:i,"".concat(r,"?").concat(s)},Jde=function(e){return"data="+encodeURIComponent(typeof e=="string"?e:JSON.stringify(e))},h2=function(e){var t=e.data,n=e.compression;if(t){if(n===Li.GZipJS){var r=Zde((function(o,s){var a=o.length;if(typeof TextEncoder<"u")return new TextEncoder().encode(o);for(var c=new ai(o.length+(o.length>>>1)),l=0,u=function(v){c[l++]=v},d=0;d<a;++d){if(l+5>c.length){var p=new ai(l+8+(a-d<<1));p.set(c),c=p}var g=o.charCodeAt(d);g<128||s?u(g):g<2048?(u(192|g>>>6),u(128|63&g)):g>55295&&g<57344?(u(240|(g=65536+(1047552&g)|1023&o.charCodeAt(++d))>>>18),u(128|g>>>12&63),u(128|g>>>6&63),u(128|63&g)):(u(224|g>>>12),u(128|g>>>6&63),u(128|63&g))}return oM(c,0,l)})(JSON.stringify(t)),{mtime:0});return{contentType:X8,body:new Blob([r],{type:X8})}}if(n===Li.Base64){var i=(function(o){var s,a,c,l,u,d="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/=",p=0,g=0,v="",m=[];if(!o)return o;o=Que(o);do s=(u=o.charCodeAt(p++)<<16|o.charCodeAt(p++)<<8|o.charCodeAt(p++))>>18&63,a=u>>12&63,c=u>>6&63,l=63&u,m[g++]=d.charAt(s)+d.charAt(a)+d.charAt(c)+d.charAt(l);while(p<o.length);switch(v=m.join(""),o.length%3){case 1:v=v.slice(0,-2)+"==";break;case 2:v=v.slice(0,-1)+"="}return v})(JSON.stringify(t));return{contentType:"application/x-www-form-urlencoded",body:Jde(i)}}return{contentType:"application/json",body:JSON.stringify(t)}}},_d=[];jy&&_d.push({transport:"XHR",method:function(e){var t,n=new jy;n.open(e.method||"GET",e.url,!0);var r=(t=h2(e))!==null&&t!==void 0?t:{},i=r.contentType,o=r.body;ft(e.headers,(function(s,a){n.setRequestHeader(a,s)})),i&&n.setRequestHeader("Content-Type",i),e.timeout&&(n.timeout=e.timeout),n.withCredentials=!0,n.onreadystatechange=function(){if(n.readyState===4){var s,a={statusCode:n.status,text:n.responseText};if(n.status===200)try{a.json=JSON.parse(n.responseText)}catch{}(s=e.callback)===null||s===void 0||s.call(e,a)}},n.send(o)}}),Oy&&_d.push({transport:"fetch",method:function(e){var t,n,r=(t=h2(e))!==null&&t!==void 0?t:{},i=r.contentType,o=r.body,s=new Headers;ft(e.headers,(function(u,d){s.append(d,u)})),i&&s.append("Content-Type",i);var a=e.url,c=null;if(v8){var l=new v8;c={signal:l.signal,timeout:setTimeout((function(){return l.abort()}),e.timeout)}}Oy(a,{method:e?.method||"GET",headers:s,keepalive:e.method==="POST",body:o,signal:(n=c)===null||n===void 0?void 0:n.signal}).then((function(u){return u.text().then((function(d){var p,g={statusCode:u.status,text:d};if(u.status===200)try{g.json=JSON.parse(d)}catch(v){W.error(v)}(p=e.callback)===null||p===void 0||p.call(e,g)}))})).catch((function(u){var d;W.error(u),(d=e.callback)===null||d===void 0||d.call(e,{statusCode:0,text:u})})).finally((function(){return c?clearTimeout(c.timeout):null}))}}),ki!=null&&ki.sendBeacon&&_d.push({transport:"sendBeacon",method:function(e){var t=F1(e.url,{beacon:"1"});try{var n,r=(n=h2(e))!==null&&n!==void 0?n:{},i=r.contentType,o=r.body,s=typeof o=="string"?new Blob([o],{type:i}):o;ki.sendBeacon(t,s)}catch{}}});var efe=["retriesPerformedSoFar"],wa,tfe=(function(){function e(t){var n=this;Ze(this,e),q(this,"isPolling",!1),q(this,"pollIntervalMs",3e3),q(this,"queue",[]),this.instance=t,this.queue=[],this.areWeOnline=!0,!ve(H)&&"onLine"in H.navigator&&(this.areWeOnline=H.navigator.onLine,H.addEventListener("online",(function(){n.areWeOnline=!0,n.flush()})),H.addEventListener("offline",(function(){n.areWeOnline=!1})))}return Qe(e,[{key:"retriableRequest",value:function(t){var n=this,r=t.retriesPerformedSoFar,i=Wue(t,efe);Gr(r)&&r>0&&(i.url=F1(i.url,{retry_count:r})),this.instance._send_request(ee(ee({},i),{},{callback:function(o){var s;o.statusCode!==200&&(o.statusCode<400||o.statusCode>=500)&&(r??0)<10?n.enqueue(ee({retriesPerformedSoFar:r},i)):(s=i.callback)===null||s===void 0||s.call(i,o)}}))}},{key:"enqueue",value:function(t){var n=t.retriesPerformedSoFar||0;t.retriesPerformedSoFar=n+1;var r=(function(s){var a=3e3*Math.pow(2,s),c=a/2,l=Math.min(18e5,a),u=(Math.random()-.5)*(l-c);return Math.ceil(l+u)})(n),i=Date.now()+r;this.queue.push({retryAt:i,requestOptions:t});var o="Enqueued failed request for retry in ".concat(r);navigator.onLine||(o+=" (Browser is offline)"),W.warn(o),this.isPolling||(this.isPolling=!0,this.poll())}},{key:"poll",value:function(){var t=this;this.poller&&clearTimeout(this.poller),this.poller=setTimeout((function(){t.areWeOnline&&t.queue.length>0&&t.flush(),t.poll()}),this.pollIntervalMs)}},{key:"flush",value:function(){var t=Date.now(),n=[],r=this.queue.filter((function(a){return a.retryAt<t||(n.push(a),!1)}));if(this.queue=n,r.length>0){var i,o=ui(r);try{for(o.s();!(i=o.n()).done;){var s=i.value.requestOptions;this.retriableRequest(s)}}catch(a){o.e(a)}finally{o.f()}}}},{key:"unload",value:function(){this.poller&&(clearTimeout(this.poller),this.poller=void 0);var t,n=ui(this.queue);try{for(n.s();!(t=n.n()).done;){var r=t.value.requestOptions;try{this.instance._send_request(ee(ee({},r),{},{transport:"sendBeacon"}))}catch(i){W.error(i)}}}catch(i){n.e(i)}finally{n.f()}this.queue=[]}}]),e})(),Fh=1800,nfe=(function(){function e(t,n,r,i){var o;Ze(this,e),q(this,"_sessionIdChangedHandlers",[]),this.config=t,this.persistence=n,this._windowId=void 0,this._sessionId=void 0,this._sessionStartTimestamp=null,this._sessionActivityTimestamp=null,this._sessionIdGenerator=r||ks,this._windowIdGenerator=i||ks;var s=t.persistence_name||t.token,a=t.session_idle_timeout_seconds||Fh;if(Gr(a)?a>Fh?W.warn("session_idle_timeout_seconds cannot be  greater than 30 minutes. Using 30 minutes instead."):a<60&&W.warn("session_idle_timeout_seconds cannot be less than 60 seconds. Using 60 seconds instead."):(W.warn("session_idle_timeout_seconds must be a number. Defaulting to 30 minutes."),a=Fh),this._sessionTimeoutMs=1e3*Math.min(Math.max(a,60),Fh),this._window_id_storage_key="ph_"+s+"_window_id",this._primary_window_exists_storage_key="ph_"+s+"_primary_window_exists",this._canUseSessionStorage()){var c=Sn.parse(this._window_id_storage_key),l=Sn.parse(this._primary_window_exists_storage_key);c&&!l?this._windowId=c:Sn.remove(this._window_id_storage_key),Sn.set(this._primary_window_exists_storage_key,!0)}if((o=this.config.bootstrap)!==null&&o!==void 0&&o.sessionID)try{var u=(function(d){var p=d.replace(/-/g,"");if(p.length!==32)throw new Error("Not a valid UUID");if(p[12]!=="7")throw new Error("Not a UUIDv7");return parseInt(p.substring(0,12),16)})(this.config.bootstrap.sessionID);this._setSessionId(this.config.bootstrap.sessionID,new Date().getTime(),u)}catch(d){W.error("Invalid sessionID in bootstrap",d)}this._listenToReloadWindow()}return Qe(e,[{key:"onSessionId",value:function(t){var n=this;return ve(this._sessionIdChangedHandlers)&&(this._sessionIdChangedHandlers=[]),this._sessionIdChangedHandlers.push(t),this._sessionId&&t(this._sessionId,this._windowId),function(){n._sessionIdChangedHandlers=n._sessionIdChangedHandlers.filter((function(r){return r!==t}))}}},{key:"_canUseSessionStorage",value:function(){return this.config.persistence!=="memory"&&!this.persistence.disabled&&Sn.is_supported()}},{key:"_setWindowId",value:function(t){t!==this._windowId&&(this._windowId=t,this._canUseSessionStorage()&&Sn.set(this._window_id_storage_key,t))}},{key:"_getWindowId",value:function(){return this._windowId?this._windowId:this._canUseSessionStorage()?Sn.parse(this._window_id_storage_key):null}},{key:"_setSessionId",value:function(t,n,r){t===this._sessionId&&n===this._sessionActivityTimestamp&&r===this._sessionStartTimestamp||(this._sessionStartTimestamp=r,this._sessionActivityTimestamp=n,this._sessionId=t,this.persistence.register(q({},T1,[n,t,r])))}},{key:"_getSessionId",value:function(){if(this._sessionId&&this._sessionActivityTimestamp&&this._sessionStartTimestamp)return[this._sessionActivityTimestamp,this._sessionId,this._sessionStartTimestamp];var t=this.persistence.props[T1];return on(t)&&t.length===2&&t.push(t[0]),t||[0,null,0]}},{key:"resetSessionId",value:function(){this._setSessionId(null,null,null)}},{key:"_listenToReloadWindow",value:function(){var t=this;H?.addEventListener("beforeunload",(function(){t._canUseSessionStorage()&&Sn.remove(t._primary_window_exists_storage_key)}))}},{key:"checkAndGetSessionAndWindowId",value:function(){var t=arguments.length>0&&arguments[0]!==void 0&&arguments[0],n=(arguments.length>1&&arguments[1]!==void 0?arguments[1]:null)||new Date().getTime(),r=Fn(this._getSessionId(),3),i=r[0],o=r[1],s=r[2],a=this._getWindowId(),c=s&&s>0&&Math.abs(n-s)>864e5,l=!1,u=!o,d=!t&&Math.abs(n-i)>this._sessionTimeoutMs;u||d||c?(o=this._sessionIdGenerator(),a=this._windowIdGenerator(),W.info("[SessionId] new session ID generated",{sessionId:o,windowId:a,changeReason:{noSessionId:u,activityTimeout:d,sessionPastMaximumLength:c}}),s=n,l=!0):a||(a=this._windowIdGenerator(),l=!0);var p=i===0||!t||c?n:i,g=s===0?new Date().getTime():s;return this._setWindowId(a),this._setSessionId(o,p,g),l&&this._sessionIdChangedHandlers.forEach((function(v){return v(o,a)})),{sessionId:o,windowId:a,sessionStartTimestamp:g}}}]),e})();(function(e){e.US="us",e.EU="eu",e.CUSTOM="custom"})(wa||(wa={}));var Z8="i.posthog.com",rfe=(function(){function e(t){Ze(this,e),q(this,"_regionCache",{}),this.instance=t}return Qe(e,[{key:"apiHost",get:function(){var t=this.instance.config.api_host.trim().replace(/\/$/,"");return t==="https://app.posthog.com"?"https://us.i.posthog.com":t}},{key:"uiHost",get:function(){var t,n=(t=this.instance.config.ui_host)===null||t===void 0?void 0:t.replace(/\/$/,"");return n||(n=this.apiHost.replace(".".concat(Z8),".posthog.com")),n==="https://app.posthog.com"?"https://us.posthog.com":n}},{key:"region",get:function(){return this._regionCache[this.apiHost]||(/https:\/\/(app|us|us-assets)(\.i)?\.posthog\.com/i.test(this.apiHost)?this._regionCache[this.apiHost]=wa.US:/https:\/\/(eu|eu-assets)(\.i)?\.posthog\.com/i.test(this.apiHost)?this._regionCache[this.apiHost]=wa.EU:this._regionCache[this.apiHost]=wa.CUSTOM),this._regionCache[this.apiHost]}},{key:"endpointFor",value:function(t){var n=arguments.length>1&&arguments[1]!==void 0?arguments[1]:"";if(n&&(n=n[0]==="/"?n:"/".concat(n)),t==="ui")return this.uiHost+n;if(this.region===wa.CUSTOM)return this.apiHost+n;var r=Z8+n;switch(t){case"assets":return"https://".concat(this.region,"-assets.").concat(r);case"api":return"https://".concat(this.region,".").concat(r)}}},{key:"loadScript",value:function(t,n){if(this.instance.config.disable_external_dependency_loading)return W.warn("".concat(t," was requested but loading of external scripts is disabled.")),n("Loading of external scripts is disabled");var r=t[0]==="/"?this.endpointFor("assets",t):t,i=function(){if(!ae)return n("document not found");var o=ae.createElement("script");o.type="text/javascript",o.src=r,o.onload=function(c){return n(void 0,c)},o.onerror=function(c){return n(c)};var s,a=ae.querySelectorAll("body > script");a.length>0?(s=a[0].parentNode)===null||s===void 0||s.insertBefore(o,a[0]):ae.body.appendChild(o)};ae!=null&&ae.body?i():ae?.addEventListener("DOMContentLoaded",i)}}]),e})(),sM="posthog-js";function aM(e){var t=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{},n=t.organization,r=t.projectId,i=t.prefix,o=t.severityAllowList,s=o===void 0?["error"]:o;return function(a){var c,l,u,d,p;if(!(s==="*"||s.includes(a.level))||!e.__loaded)return a;a.tags||(a.tags={});var g=e.requestRouter.endpointFor("ui","/project/".concat(e.config.token,"/person/").concat(e.get_distinct_id()));a.tags["PostHog Person URL"]=g,e.sessionRecordingStarted()&&(a.tags["PostHog Recording URL"]=e.get_session_replay_url({withTimestamp:!0}));var v=((c=a.exception)===null||c===void 0?void 0:c.values)||[],m={$exception_message:((l=v[0])===null||l===void 0?void 0:l.value)||a.message,$exception_type:(u=v[0])===null||u===void 0?void 0:u.type,$exception_personURL:g,$exception_level:a.level,$sentry_event_id:a.event_id,$sentry_exception:a.exception,$sentry_exception_message:((d=v[0])===null||d===void 0?void 0:d.value)||a.message,$sentry_exception_type:(p=v[0])===null||p===void 0?void 0:p.type,$sentry_tags:a.tags,$level:a.level};return n&&r&&(m.$sentry_url=(i||"https://sentry.io/organizations/")+n+"/issues/?project="+r+"&query="+a.event_id),e.exceptions.sendExceptionEvent(m),a}}var ife=Qe((function e(t,n,r,i,o){Ze(this,e),this.name=sM,this.setupOnce=function(s){s(aM(t,{organization:n,projectId:r,prefix:i,severityAllowList:o}))}}));function ofe(e,t){var n=e.config.segment;if(!n)return t();(function(r,i){var o=r.config.segment;if(!o)return i();var s=function(c){var l=function(){return c.anonymousId()||ks()};r.config.get_device_id=l,c.id()&&(r.register({distinct_id:c.id(),$device_id:l()}),r.persistence.set_property(Ro,"identified")),i()},a=o.user();"then"in a&&Qr(a.then)?a.then((function(c){return s(c)})):s(a)})(e,(function(){n.register((function(r){Promise&&Promise.resolve||W.warn("This browser does not have Promise support, and can not use the segment integration");var i=function(o,s){var a;if(!s)return o;o.event.userId||o.event.anonymousId===r.get_distinct_id()||(W.info("Segment integration does not have a userId set, resetting PostHog"),r.reset()),o.event.userId&&o.event.userId!==r.get_distinct_id()&&(W.info("Segment integration has a userId set, identifying with PostHog"),r.identify(o.event.userId));var c=r._calculate_event_properties(s,(a=o.event.properties)!==null&&a!==void 0?a:{},new Date);return o.event.properties=Object.assign({},c,o.event.properties),o};return{name:"PostHog JS",type:"enrichment",version:"1.0.0",isLoaded:function(){return!0},load:function(){return Promise.resolve()},track:function(o){return i(o,o.event.event)},page:function(o){return i(o,"$pageview")},identify:function(o){return i(o,"$identify")},screen:function(o){return i(o,"$screen")}}})(e)).then((function(){t()}))}))}var Q8,H1,Ci,sfe=(function(){function e(t){Ze(this,e),this._instance=t}return Qe(e,[{key:"doPageView",value:function(t){var n,r=this._previousPageViewProperties(t);return this._currentPath=(n=H?.location.pathname)!==null&&n!==void 0?n:"",this._instance.scrollManager.resetContext(),this._prevPageviewTimestamp=t,r}},{key:"doPageLeave",value:function(t){return this._previousPageViewProperties(t)}},{key:"_previousPageViewProperties",value:function(t){var n=this._currentPath,r=this._prevPageviewTimestamp,i=this._instance.scrollManager.getContext();if(!r)return{};var o={};if(i){var s=i.maxScrollHeight,a=i.lastScrollY,c=i.maxScrollY,l=i.maxContentHeight,u=i.lastContentY,d=i.maxContentY;ve(s)||ve(a)||ve(c)||ve(l)||ve(u)||ve(d)||(s=Math.ceil(s),a=Math.ceil(a),c=Math.ceil(c),l=Math.ceil(l),u=Math.ceil(u),d=Math.ceil(d),o={$prev_pageview_last_scroll:a,$prev_pageview_last_scroll_percentage:s<=1?1:Hh(a/s,0,1),$prev_pageview_max_scroll:c,$prev_pageview_max_scroll_percentage:s<=1?1:Hh(c/s,0,1),$prev_pageview_last_content:u,$prev_pageview_last_content_percentage:l<=1?1:Hh(u/l,0,1),$prev_pageview_max_content:d,$prev_pageview_max_content_percentage:l<=1?1:Hh(d/l,0,1)})}return n&&(o.$prev_pageview_pathname=n),r&&(o.$prev_pageview_duration=(t.getTime()-r.getTime())/1e3),o}}]),e})();function Hh(e,t,n){return Math.max(t,Math.min(e,n))}(function(e){e.Popover="popover",e.API="api",e.Widget="widget"})(Q8||(Q8={})),(function(e){e.Open="open",e.MultipleChoice="multiple_choice",e.SingleChoice="single_choice",e.Rating="rating",e.Link="link"})(H1||(H1={})),(function(e){e.NextQuestion="next_question",e.End="end",e.ResponseBased="response_based",e.SpecificQuestion="specific_question"})(Ci||(Ci={}));var cM=(function(){function e(){Ze(this,e),q(this,"events",{}),this.events={}}return Qe(e,[{key:"on",value:function(t,n){var r=this;return this.events[t]||(this.events[t]=[]),this.events[t].push(n),function(){r.events[t]=r.events[t].filter((function(i){return i!==n}))}}},{key:"emit",value:function(t,n){var r,i=ui(this.events[t]||[]);try{for(i.s();!(r=i.n()).done;)(0,r.value)(n)}catch(a){i.e(a)}finally{i.f()}var o,s=ui(this.events["*"]||[]);try{for(s.s();!(o=s.n()).done;)(0,o.value)(t,n)}catch(a){s.e(a)}finally{s.f()}}}]),e})(),afe=(function(){function e(t){var n=this;Ze(this,e),q(this,"_debugEventEmitter",new cM),q(this,"checkStep",(function(r,i){return n.checkStepEvent(r,i)&&n.checkStepUrl(r,i)&&n.checkStepElement(r,i)})),q(this,"checkStepEvent",(function(r,i){return i==null||!i.event||r?.event===i?.event})),this.instance=t,this.actionEvents=new Set,this.actionRegistry=new Set}return Qe(e,[{key:"init",value:function(){var t,n=this;if(!ve((t=this.instance)===null||t===void 0?void 0:t._addCaptureHook)){var r;(r=this.instance)===null||r===void 0||r._addCaptureHook((function(i,o){n.on(i,o)}))}}},{key:"register",value:function(t){var n,r,i=this;if(!ve((n=this.instance)===null||n===void 0?void 0:n._addCaptureHook)&&(t.forEach((function(a){var c,l;(c=i.actionRegistry)===null||c===void 0||c.add(a),(l=a.steps)===null||l===void 0||l.forEach((function(u){var d;(d=i.actionEvents)===null||d===void 0||d.add(u?.event||"")}))})),(r=this.instance)!==null&&r!==void 0&&r.autocapture)){var o,s=new Set;t.forEach((function(a){var c;(c=a.steps)===null||c===void 0||c.forEach((function(l){l!=null&&l.selector&&s.add(l?.selector)}))})),(o=this.instance)===null||o===void 0||o.autocapture.setElementSelectors(s)}}},{key:"on",value:function(t,n){var r,i=this;n!=null&&t.length!=0&&(this.actionEvents.has(t)||this.actionEvents.has(n?.event))&&this.actionRegistry&&((r=this.actionRegistry)===null||r===void 0?void 0:r.size)>0&&this.actionRegistry.forEach((function(o){i.checkAction(n,o)&&i._debugEventEmitter.emit("actionCaptured",o.name)}))}},{key:"_addActionHook",value:function(t){this.onAction("actionCaptured",(function(n){return t(n)}))}},{key:"checkAction",value:function(t,n){if(n?.steps==null)return!1;var r,i=ui(n.steps);try{for(i.s();!(r=i.n()).done;){var o=r.value;if(this.checkStep(t,o))return!0}}catch(s){i.e(s)}finally{i.f()}return!1}},{key:"onAction",value:function(t,n){return this._debugEventEmitter.on(t,n)}},{key:"checkStepUrl",value:function(t,n){if(n!=null&&n.url){var r,i=t==null||(r=t.properties)===null||r===void 0?void 0:r.$current_url;if(!i||typeof i!="string"||!e.matchString(i,n?.url,n?.url_matching||"contains"))return!1}return!0}},{key:"checkStepElement",value:function(t,n){if((n!=null&&n.href||n!=null&&n.tag_name||n!=null&&n.text)&&!this.getElementsList(t).some((function(o){return!(n!=null&&n.href&&!e.matchString(o.href||"",n?.href,n?.href_matching||"exact"))&&(n==null||!n.tag_name||o.tag_name===n?.tag_name)&&!(n!=null&&n.text&&!e.matchString(o.text||"",n?.text,n?.text_matching||"exact")&&!e.matchString(o.$el_text||"",n?.text,n?.text_matching||"exact"))})))return!1;if(n!=null&&n.selector){var r,i=t==null||(r=t.properties)===null||r===void 0?void 0:r.$element_selectors;if(!i||!i.includes(n?.selector))return!1}return!0}},{key:"getElementsList",value:function(t){return t?.properties.$elements==null?[]:t?.properties.$elements}}],[{key:"matchString",value:function(t,n,r){switch(r){case"regex":return!!H&&M1(t,n);case"exact":return n===t;case"contains":var i=e.escapeStringRegexp(n).replace(/_/g,".").replace(/%/g,".*");return M1(t,i);default:return!1}}},{key:"escapeStringRegexp",value:function(t){return t.replace(/[|\\{}()[\]^$+*?.]/g,"\\$&").replace(/-/g,"\\x2d")}}]),e})(),s3=(function(){function e(t){Ze(this,e),this.instance=t,this.eventToSurveys=new Map,this.actionToSurveys=new Map}return Qe(e,[{key:"register",value:function(t){var n;ve((n=this.instance)===null||n===void 0?void 0:n._addCaptureHook)||(this.setupEventBasedSurveys(t),this.setupActionBasedSurveys(t))}},{key:"setupActionBasedSurveys",value:function(t){var n=this,r=t.filter((function(i){var o,s,a,c;return((o=i.conditions)===null||o===void 0?void 0:o.actions)&&((s=i.conditions)===null||s===void 0||(a=s.actions)===null||a===void 0||(c=a.values)===null||c===void 0?void 0:c.length)>0}));r.length!==0&&(this.actionMatcher==null&&(this.actionMatcher=new afe(this.instance),this.actionMatcher.init(),this.actionMatcher._addActionHook((function(i){n.onAction(i)}))),r.forEach((function(i){var o,s,a,c,l,u,d,p,g,v;i.conditions&&(o=i.conditions)!==null&&o!==void 0&&o.actions&&(s=i.conditions)!==null&&s!==void 0&&(a=s.actions)!==null&&a!==void 0&&a.values&&((c=i.conditions)===null||c===void 0||(l=c.actions)===null||l===void 0||(u=l.values)===null||u===void 0?void 0:u.length)>0&&((d=n.actionMatcher)===null||d===void 0||d.register(i.conditions.actions.values),(p=i.conditions)===null||p===void 0||(g=p.actions)===null||g===void 0||(v=g.values)===null||v===void 0||v.forEach((function(m){if(m&&m.name){var _=n.actionToSurveys.get(m.name);_&&_.push(i.id),n.actionToSurveys.set(m.name,_||[i.id])}})))})))}},{key:"setupEventBasedSurveys",value:function(t){var n,r=this;t.filter((function(i){var o,s,a,c;return((o=i.conditions)===null||o===void 0?void 0:o.events)&&((s=i.conditions)===null||s===void 0||(a=s.events)===null||a===void 0||(c=a.values)===null||c===void 0?void 0:c.length)>0})).length!==0&&((n=this.instance)===null||n===void 0||n._addCaptureHook((function(i,o){r.onEvent(i,o)})),t.forEach((function(i){var o,s,a;(o=i.conditions)===null||o===void 0||(s=o.events)===null||s===void 0||(a=s.values)===null||a===void 0||a.forEach((function(c){if(c&&c.name){var l=r.eventToSurveys.get(c.name);l&&l.push(i.id),r.eventToSurveys.set(c.name,l||[i.id])}}))})))}},{key:"onEvent",value:function(t,n){var r,i,o=((r=this.instance)===null||r===void 0||(i=r.persistence)===null||i===void 0?void 0:i.props[Mh])||[];if(e.SURVEY_SHOWN_EVENT_NAME==t&&n&&o.length>0){var s,a=n==null||(s=n.properties)===null||s===void 0?void 0:s.$survey_id;if(a){var c=o.indexOf(a);c>=0&&(o.splice(c,1),this._updateActivatedSurveys(o))}}else this.eventToSurveys.has(t)&&this._updateActivatedSurveys(o.concat(this.eventToSurveys.get(t)||[]))}},{key:"onAction",value:function(t){var n,r,i=((n=this.instance)===null||n===void 0||(r=n.persistence)===null||r===void 0?void 0:r.props[Mh])||[];this.actionToSurveys.has(t)&&this._updateActivatedSurveys(i.concat(this.actionToSurveys.get(t)||[]))}},{key:"_updateActivatedSurveys",value:function(t){var n,r;(n=this.instance)===null||n===void 0||(r=n.persistence)===null||r===void 0||r.register(q({},Mh,Uo(new Set(t))))}},{key:"getSurveys",value:function(){var t,n,r=(t=this.instance)===null||t===void 0||(n=t.persistence)===null||n===void 0?void 0:n.props[Mh];return r||[]}},{key:"getEventToSurveys",value:function(){return this.eventToSurveys}},{key:"_getActionMatcher",value:function(){return this.actionMatcher}}]),e})();q(s3,"SURVEY_SHOWN_EVENT_NAME","survey shown");var Mu="[Surveys]",cfe={icontains:function(e){return!!H&&H.location.href.toLowerCase().indexOf(e.toLowerCase())>-1},not_icontains:function(e){return!!H&&H.location.href.toLowerCase().indexOf(e.toLowerCase())===-1},regex:function(e){return!!H&&M1(H.location.href,e)},not_regex:function(e){return!!H&&!M1(H.location.href,e)},exact:function(e){return H?.location.href===e},is_not:function(e){return H?.location.href!==e}},lfe=(function(){function e(t){Ze(this,e),this.instance=t,this._surveyEventReceiver=null}return Qe(e,[{key:"afterDecideResponse",value:function(t){this._decideServerResponse=!!t.surveys,this.loadIfEnabled()}},{key:"loadIfEnabled",value:function(){var t=this,n=Rt?.extendPostHogWithSurveys;this.instance.config.disable_surveys||!this._decideServerResponse||n||(this._surveyEventReceiver==null&&(this._surveyEventReceiver=new s3(this.instance)),this.instance.requestRouter.loadScript("/static/surveys.js",(function(r){if(r)return W.error(Mu,"Could not load surveys script",r);t._surveyManager=Rt.extendPostHogWithSurveys(t.instance)})))}},{key:"getSurveys",value:function(t){var n=this,r=arguments.length>1&&arguments[1]!==void 0&&arguments[1];if(this.instance.config.disable_surveys)return t([]);this._surveyEventReceiver==null&&(this._surveyEventReceiver=new s3(this.instance));var i=this.instance.get_property(Vy);if(i&&!r)return t(i);this.instance._send_request({url:this.instance.requestRouter.endpointFor("api","/api/surveys/?token=".concat(this.instance.config.token)),method:"GET",transport:"XHR",callback:function(o){var s;if(o.statusCode!==200||!o.json)return t([]);var a,c=o.json.surveys||[],l=c.filter((function(u){var d,p,g,v,m,_,y,w,S,b,C,E;return((d=u.conditions)===null||d===void 0?void 0:d.events)&&((p=u.conditions)===null||p===void 0||(g=p.events)===null||g===void 0?void 0:g.values)&&((v=u.conditions)===null||v===void 0||(m=v.events)===null||m===void 0||(_=m.values)===null||_===void 0?void 0:_.length)>0||((y=u.conditions)===null||y===void 0?void 0:y.actions)&&((w=u.conditions)===null||w===void 0||(S=w.actions)===null||S===void 0?void 0:S.values)&&((b=u.conditions)===null||b===void 0||(C=b.actions)===null||C===void 0||(E=C.values)===null||E===void 0?void 0:E.length)>0}));return l.length>0&&((a=n._surveyEventReceiver)===null||a===void 0||a.register(l)),(s=n.instance.persistence)===null||s===void 0||s.register(q({},Vy,c)),t(c)}})}},{key:"getActiveMatchingSurveys",value:function(t){var n=this,r=arguments.length>1&&arguments[1]!==void 0&&arguments[1];this.getSurveys((function(i){var o,s=i.filter((function(l){return!(!l.start_date||l.end_date)})).filter((function(l){var u,d,p,g;if(!l.conditions)return!0;var v=(u=l.conditions)===null||u===void 0||!u.url||cfe[(d=(p=l.conditions)===null||p===void 0?void 0:p.urlMatchType)!==null&&d!==void 0?d:"icontains"](l.conditions.url),m=(g=l.conditions)===null||g===void 0||!g.selector||ae?.querySelector(l.conditions.selector);return v&&m})),a=(o=n._surveyEventReceiver)===null||o===void 0?void 0:o.getSurveys(),c=s.filter((function(l){var u,d,p,g,v,m,_,y,w,S;if(!l.linked_flag_key&&!l.targeting_flag_key&&!l.internal_targeting_flag_key)return!0;var b=!l.linked_flag_key||n.instance.featureFlags.isFeatureEnabled(l.linked_flag_key),C=!l.targeting_flag_key||n.instance.featureFlags.isFeatureEnabled(l.targeting_flag_key),E=((u=l.conditions)===null||u===void 0?void 0:u.events)&&((d=l.conditions)===null||d===void 0||(p=d.events)===null||p===void 0?void 0:p.values)&&((g=l.conditions)===null||g===void 0||(v=g.events)===null||v===void 0?void 0:v.values.length)>0,x=((m=l.conditions)===null||m===void 0?void 0:m.actions)&&((_=l.conditions)===null||_===void 0||(y=_.actions)===null||y===void 0?void 0:y.values)&&((w=l.conditions)===null||w===void 0||(S=w.actions)===null||S===void 0?void 0:S.values.length)>0,I=!E&&!x||a?.includes(l.id),L=n._canActivateRepeatedly(l),R=!(l.internal_targeting_flag_key&&!L)||n.instance.featureFlags.isFeatureEnabled(l.internal_targeting_flag_key);return b&&C&&R&&I}));return t(c)}),r)}},{key:"getNextSurveyStep",value:function(t,n,r){var i,o=t.questions[n],s=n+1;if((i=o.branching)===null||i===void 0||!i.type)return n===t.questions.length-1?Ci.End:s;if(o.branching.type===Ci.End)return Ci.End;if(o.branching.type===Ci.SpecificQuestion){if(Number.isInteger(o.branching.index))return o.branching.index}else if(o.branching.type===Ci.ResponseBased){if(o.type===H1.SingleChoice){var a,c,l=o.choices.indexOf("".concat(r));if((a=o.branching)!==null&&a!==void 0&&(c=a.responseValues)!==null&&c!==void 0&&c.hasOwnProperty(l)){var u=o.branching.responseValues[l];return Number.isInteger(u)?u:u===Ci.End?Ci.End:s}}else if(o.type===H1.Rating){var d,p;if(typeof r!="number"||!Number.isInteger(r))throw new Error("The response type must be an integer");var g=(function(m,_){if(_===3){if(m<1||m>3)throw new Error("The response must be in range 1-3");return m===1?"negative":m===2?"neutral":"positive"}if(_===5){if(m<1||m>5)throw new Error("The response must be in range 1-5");return m<=2?"negative":m===3?"neutral":"positive"}if(_===10){if(m<0||m>10)throw new Error("The response must be in range 0-10");return m<=6?"detractors":m<=8?"passives":"promoters"}throw new Error("The scale must be one of: 3, 5, 10")})(r,o.scale);if((d=o.branching)!==null&&d!==void 0&&(p=d.responseValues)!==null&&p!==void 0&&p.hasOwnProperty(g)){var v=o.branching.responseValues[g];return Number.isInteger(v)?v:v===Ci.End?Ci.End:s}}return s}return W.warn(Mu,"Falling back to next question index due to unexpected branching type"),s}},{key:"_canActivateRepeatedly",value:function(t){return ur(Rt.__PosthogExtensions__.canActivateRepeatedly)&&W.warn(Mu,"canActivateRepeatedly is not defined, must init before calling"),Rt.__PosthogExtensions__.canActivateRepeatedly(t)}},{key:"canRenderSurvey",value:function(t){var n=this;ur(this._surveyManager)?W.warn(Mu,"canActivateRepeatedly is not defined, must init before calling"):this.getSurveys((function(r){var i=r.filter((function(o){return o.id===t}))[0];n._surveyManager.canRenderSurvey(i)}))}},{key:"renderSurvey",value:function(t,n){var r=this;ur(this._surveyManager)?W.warn(Mu,"canActivateRepeatedly is not defined, must init before calling"):this.getSurveys((function(i){var o=i.filter((function(s){return s.id===t}))[0];r._surveyManager.renderSurvey(o,ae?.querySelector(n))}))}}]),e})(),ufe=(function(){function e(t){var n,r,i=this;Ze(this,e),q(this,"serverLimits",{}),q(this,"lastEventRateLimited",!1),q(this,"checkForLimiting",(function(o){var s=o.text;if(s&&s.length)try{(JSON.parse(s).quota_limited||[]).forEach((function(a){W.info("[RateLimiter] ".concat(a||"events"," is quota limited.")),i.serverLimits[a]=new Date().getTime()+6e4}))}catch(a){return void W.warn('[RateLimiter] could not rate limit - continuing. Error: "'.concat(a?.message,'"'),{text:s})}})),this.instance=t,this.captureEventsPerSecond=((n=t.config.rate_limiting)===null||n===void 0?void 0:n.events_per_second)||10,this.captureEventsBurstLimit=Math.max(((r=t.config.rate_limiting)===null||r===void 0?void 0:r.events_burst_limit)||10*this.captureEventsPerSecond,this.captureEventsPerSecond),this.lastEventRateLimited=this.clientRateLimitContext(!0).isRateLimited}return Qe(e,[{key:"clientRateLimitContext",value:function(){var t,n,r,i=arguments.length>0&&arguments[0]!==void 0&&arguments[0],o=new Date().getTime(),s=(t=(n=this.instance.persistence)===null||n===void 0?void 0:n.get_property(Gy))!==null&&t!==void 0?t:{tokens:this.captureEventsBurstLimit,last:o};s.tokens+=(o-s.last)/1e3*this.captureEventsPerSecond,s.last=o,s.tokens>this.captureEventsBurstLimit&&(s.tokens=this.captureEventsBurstLimit);var a=s.tokens<1;return a||i||(s.tokens=Math.max(0,s.tokens-1)),!a||this.lastEventRateLimited||i||this.instance.capture("$$client_ingestion_warning",{$$client_ingestion_warning_message:"posthog-js client rate limited. Config is set to ".concat(this.captureEventsPerSecond," events per second and ").concat(this.captureEventsBurstLimit," events burst limit.")},{skip_client_rate_limiting:!0}),this.lastEventRateLimited=a,(r=this.instance.persistence)===null||r===void 0||r.set_property(Gy,s),{isRateLimited:a,remainingTokens:s.tokens}}},{key:"isServerRateLimited",value:function(t){var n=this.serverLimits[t||"events"]||!1;return n!==!1&&new Date().getTime()<n}}]),e})(),dfe=function(){return ee({initialPathName:Jn?.pathname||"",referringDomain:hn.referringDomain()},hn.campaignParams())},ffe=(function(){function e(t,n,r){var i=this;Ze(this,e),q(this,"_onSessionIdCallback",(function(o){var s=i._getStoredProps();if(!s||s.sessionId!==o){var a={sessionId:o,props:i._sessionSourceParamGenerator()};i._persistence.register(q({},qy,a))}})),this._sessionIdManager=t,this._persistence=n,this._sessionSourceParamGenerator=r||dfe,this._sessionIdManager.onSessionId(this._onSessionIdCallback)}return Qe(e,[{key:"_getStoredProps",value:function(){return this._persistence.props[qy]}},{key:"getSessionProps",value:function(){var t,n=(t=this._getStoredProps())===null||t===void 0?void 0:t.props;return n?{$client_session_initial_referring_host:n.referringDomain,$client_session_initial_pathname:n.initialPathName,$client_session_initial_utm_source:n.utm_source,$client_session_initial_utm_campaign:n.utm_campaign,$client_session_initial_utm_medium:n.utm_medium,$client_session_initial_utm_content:n.utm_content,$client_session_initial_utm_term:n.utm_term}:{}}}]),e})(),hfe=["ahrefsbot","ahrefssiteaudit","applebot","baiduspider","bingbot","bingpreview","bot.htm","bot.php","crawler","deepscan","duckduckbot","facebookexternal","facebookcatalog","gptbot","http://yandex.com/bots","hubspot","ia_archiver","linkedinbot","mj12bot","msnbot","nessus","petalbot","pinterest","prerender","rogerbot","screaming frog","semrushbot","sitebulb","slurp","turnitin","twitterbot","vercelbot","yahoo! slurp","yandexbot","headlesschrome","cypress","Google-HotelAdsVerifier","adsbot-google","apis-google","duplexweb-google","feedfetcher-google","google favicon","google web preview","google-read-aloud","googlebot","googleweblight","mediapartners-google","storebot-google","Bytespider;"],J8=function(e,t){if(!e)return!1;var n=e.toLowerCase();return hfe.concat(t||[]).some((function(r){var i=r.toLowerCase();return n.indexOf(i)!==-1}))},lM=(function(){function e(){Ze(this,e),this.clicks=[]}return Qe(e,[{key:"isRageClick",value:function(t,n,r){var i=this.clicks[this.clicks.length-1];if(i&&Math.abs(t-i.x)+Math.abs(n-i.y)<30&&r-i.timestamp<1e3){if(this.clicks.push({x:t,y:n,timestamp:r}),this.clicks.length===3)return!0}else this.clicks=[{x:t,y:n,timestamp:r}];return!1}}]),e})();function e9(e){var t;return e.id===zy||!((t=e.closest)===null||t===void 0||!t.call(e,"#"+zy))}var pfe=(function(){function e(t){var n,r=this;Ze(this,e),q(this,"rageclicks",new lM),q(this,"_enabledServerSide",!1),q(this,"_initialized",!1),q(this,"_flushInterval",null),this.instance=t,this._enabledServerSide=!((n=this.instance.persistence)===null||n===void 0||!n.props[Hy]),H?.addEventListener("beforeunload",(function(){r.flush()}))}return Qe(e,[{key:"flushIntervalMilliseconds",get:function(){var t=5e3;return Cn(this.instance.config.capture_heatmaps)&&this.instance.config.capture_heatmaps.flush_interval_milliseconds&&(t=this.instance.config.capture_heatmaps.flush_interval_milliseconds),t}},{key:"isEnabled",get:function(){return ve(this.instance.config.capture_heatmaps)?ve(this.instance.config.enable_heatmaps)?this._enabledServerSide:this.instance.config.enable_heatmaps:this.instance.config.capture_heatmaps!==!1}},{key:"startIfEnabled",value:function(){if(this.isEnabled){if(this._initialized)return;W.info("[heatmaps] starting..."),this._setupListeners(),this._flushInterval=setInterval(this.flush.bind(this),this.flushIntervalMilliseconds)}else{var t;clearInterval((t=this._flushInterval)!==null&&t!==void 0?t:void 0),this.getAndClearBuffer()}}},{key:"afterDecideResponse",value:function(t){var n=!!t.heatmaps;this.instance.persistence&&this.instance.persistence.register(q({},Hy,n)),this._enabledServerSide=n,this.startIfEnabled()}},{key:"getAndClearBuffer",value:function(){var t=this.buffer;return this.buffer=void 0,t}},{key:"_setupListeners",value:function(){var t=this;H&&ae&&(No(ae,"click",(function(n){return t._onClick(n||H?.event)}),!1,!0),No(ae,"mousemove",(function(n){return t._onMouseMove(n||H?.event)}),!1,!0),this._initialized=!0)}},{key:"_getProperties",value:function(t,n){var r=this.instance.scrollManager.scrollY(),i=this.instance.scrollManager.scrollX(),o=this.instance.scrollManager.scrollElement(),s=(function(a,c,l){for(var u=a;u&&!Ns(u,"body");){if(u===l)return!1;if(Be(c,H?.getComputedStyle(u).position))return!0;u=XP(u)}return!1})(t.target,["fixed","sticky"],o);return{x:t.clientX+(s?0:i),y:t.clientY+(s?0:r),target_fixed:s,type:n}}},{key:"_onClick",value:function(t){var n;if(!e9(t.target)){var r=this._getProperties(t,"click");(n=this.rageclicks)!==null&&n!==void 0&&n.isRageClick(t.clientX,t.clientY,new Date().getTime())&&this._capture(ee(ee({},r),{},{type:"rageclick"})),this._capture(r)}}},{key:"_onMouseMove",value:function(t){var n=this;e9(t.target)||(clearTimeout(this._mouseMoveTimeout),this._mouseMoveTimeout=setTimeout((function(){n._capture(n._getProperties(t,"mousemove"))}),500))}},{key:"_capture",value:function(t){if(H){var n=H.location.href;this.buffer=this.buffer||{},this.buffer[n]||(this.buffer[n]=[]),this.buffer[n].push(t)}}},{key:"flush",value:function(){this.buffer&&!Tp(this.buffer)&&this.instance.capture("$$heatmap",{$heatmap_data:this.getAndClearBuffer()})}}]),e})(),gfe=(function(){function e(t){var n=this;Ze(this,e),q(this,"_updateScrollData",(function(){var r,i,o,s;n.context||(n.context={});var a=n.scrollElement(),c=n.scrollY(),l=a?Math.max(0,a.scrollHeight-a.clientHeight):0,u=c+(a?.clientHeight||0),d=a?.scrollHeight||0;n.context.lastScrollY=Math.ceil(c),n.context.maxScrollY=Math.max(c,(r=n.context.maxScrollY)!==null&&r!==void 0?r:0),n.context.maxScrollHeight=Math.max(l,(i=n.context.maxScrollHeight)!==null&&i!==void 0?i:0),n.context.lastContentY=u,n.context.maxContentY=Math.max(u,(o=n.context.maxContentY)!==null&&o!==void 0?o:0),n.context.maxContentHeight=Math.max(d,(s=n.context.maxContentHeight)!==null&&s!==void 0?s:0)})),this.instance=t}return Qe(e,[{key:"getContext",value:function(){return this.context}},{key:"resetContext",value:function(){var t=this.context;return setTimeout(this._updateScrollData,0),t}},{key:"startMeasuringScrollPosition",value:function(){H?.addEventListener("scroll",this._updateScrollData,!0),H?.addEventListener("scrollend",this._updateScrollData,!0),H?.addEventListener("resize",this._updateScrollData)}},{key:"scrollElement",value:function(){if(!this.instance.config.scroll_root_selector)return H?.document.documentElement;var t,n=ui(on(this.instance.config.scroll_root_selector)?this.instance.config.scroll_root_selector:[this.instance.config.scroll_root_selector]);try{for(n.s();!(t=n.n()).done;){var r=t.value,i=H?.document.querySelector(r);if(i)return i}}catch(o){n.e(o)}finally{n.f()}}},{key:"scrollY",value:function(){if(this.instance.config.scroll_root_selector){var t=this.scrollElement();return t&&t.scrollTop||0}return H&&(H.scrollY||H.pageYOffset||H.document.documentElement.scrollTop)||0}},{key:"scrollX",value:function(){if(this.instance.config.scroll_root_selector){var t=this.scrollElement();return t&&t.scrollLeft||0}return H&&(H.scrollX||H.pageXOffset||H.document.documentElement.scrollLeft)||0}}]),e})(),p2="$copy_autocapture";function g2(e,t){return t.length>e?t.slice(0,e)+"...":t}var Es,mfe=(function(){function e(t){Ze(this,e),q(this,"_initialized",!1),q(this,"_isDisabledServerSide",null),q(this,"rageclicks",new lM),q(this,"_elementsChainAsString",!1),this.instance=t,this._elementSelectors=null}return Qe(e,[{key:"config",get:function(){var t,n,r=Cn(this.instance.config.autocapture)?this.instance.config.autocapture:{};return r.url_allowlist=(t=r.url_allowlist)===null||t===void 0?void 0:t.map((function(i){return new RegExp(i)})),r.url_ignorelist=(n=r.url_ignorelist)===null||n===void 0?void 0:n.map((function(i){return new RegExp(i)})),r}},{key:"_addDomEventHandlers",value:function(){var t=this;if(this.isBrowserSupported()){if(H&&ae){var n=function(i){i=i||H?.event;try{t._captureEvent(i)}catch(o){W.error("Failed to capture event",o)}},r=function(i){i=i||H?.event,t._captureEvent(i,p2)};No(ae,"submit",n,!1,!0),No(ae,"change",n,!1,!0),No(ae,"click",n,!1,!0),this.config.capture_copied_text&&(No(ae,"copy",r,!1,!0),No(ae,"cut",r,!1,!0))}}else W.info("Disabling Automatic Event Collection because this browser is not supported")}},{key:"startIfEnabled",value:function(){this.isEnabled&&!this._initialized&&(this._addDomEventHandlers(),this._initialized=!0)}},{key:"afterDecideResponse",value:function(t){t.elementsChainAsString&&(this._elementsChainAsString=t.elementsChainAsString),this.instance.persistence&&this.instance.persistence.register(q({},b8,!!t.autocapture_opt_out)),this._isDisabledServerSide=!!t.autocapture_opt_out,this.startIfEnabled()}},{key:"setElementSelectors",value:function(t){this._elementSelectors=t}},{key:"getElementSelectors",value:function(t){var n,r=[];return(n=this._elementSelectors)===null||n===void 0||n.forEach((function(i){var o=ae?.querySelectorAll(i);o?.forEach((function(s){t===s&&r.push(i)}))})),r}},{key:"isEnabled",get:function(){var t,n,r=(t=this.instance.persistence)===null||t===void 0?void 0:t.props[b8],i=this._isDisabledServerSide;if(us(i)&&!ba(r)&&!this.instance.config.advanced_disable_decide)return!1;var o=(n=this._isDisabledServerSide)!==null&&n!==void 0?n:!!r;return!!this.instance.config.autocapture&&!o}},{key:"_previousElementSibling",value:function(t){if(t.previousElementSibling)return t.previousElementSibling;var n=t;do n=n.previousSibling;while(n&&!ab(n));return n}},{key:"_getAugmentPropertiesFromElement",value:function(t){if(!t3(t))return{};var n={};return ft(t.attributes,(function(r){if(r.name&&r.name.indexOf("data-ph-capture-attribute")===0){var i=r.name.replace("data-ph-capture-attribute-",""),o=r.value;i&&o&&cl(o)&&(n[i]=o)}})),n}},{key:"_getPropertiesFromElement",value:function(t,n,r){var i,o=t.tagName.toLowerCase(),s={tag_name:o};e3.indexOf(o)>-1&&!r&&(o.toLowerCase()==="a"||o.toLowerCase()==="button"?s.$el_text=g2(1024,H8(t)):s.$el_text=g2(1024,j1(t)));var a=O1(t);a.length>0&&(s.classes=a.filter((function(p){return p!==""})));var c=(i=this.config)===null||i===void 0?void 0:i.element_attribute_ignorelist;ft(t.attributes,(function(p){var g;if((!ZP(t)||["name","id","class","aria-label"].indexOf(p.name)!==-1)&&(c==null||!c.includes(p.name))&&!n&&cl(p.value)&&(g=p.name,!An(g)||g.substring(0,10)!=="_ngcontent"&&g.substring(0,7)!=="_nghost")){var v=p.value;p.name==="class"&&(v=sb(v).join(" ")),s["attr__"+p.name]=g2(1024,v)}}));for(var l=1,u=1,d=t;d=this._previousElementSibling(d);)l++,d.tagName===t.tagName&&u++;return s.nth_child=l,s.nth_of_type=u,s}},{key:"_getDefaultProperties",value:function(t){return{$event_type:t,$ce_version:1}}},{key:"_getEventTarget",value:function(t){return ve(t.target)?t.srcElement||null:(n=t.target)!==null&&n!==void 0&&n.shadowRoot?t.composedPath()[0]||null:t.target||null;var n}},{key:"_captureEvent",value:function(t){var n=this,r=arguments.length>1&&arguments[1]!==void 0?arguments[1]:"$autocapture";if(this.isEnabled){var i,o=this._getEventTarget(t);zP(o)&&(o=o.parentNode||null),r==="$autocapture"&&t.type==="click"&&t instanceof MouseEvent&&this.instance.config.rageclick&&(i=this.rageclicks)!==null&&i!==void 0&&i.isRageClick(t.clientX,t.clientY,new Date().getTime())&&this._captureEvent(t,"$rageclick");var s=r===p2;if(o&&xde(o,t,this.config,s,s?["copy","cut"]:void 0)){for(var a,c,l=[o],u=o;u.parentNode&&!Ns(u,"body");)YP(u.parentNode)?(l.push(u.parentNode.host),u=u.parentNode.host):(l.push(u.parentNode),u=u.parentNode);var d,p,g=[],v={},m=!1;if(ft(l,(function(L){var R=t3(L);L.tagName.toLowerCase()==="a"&&(d=L.getAttribute("href"),d=R&&cl(d)&&d),Be(O1(L),"ph-no-capture")&&(m=!0),g.push(n._getPropertiesFromElement(L,n.instance.config.mask_all_element_attributes,n.instance.config.mask_all_text));var k=n._getAugmentPropertiesFromElement(L);Hn(v,k)})),this.instance.config.mask_all_text||(o.tagName.toLowerCase()==="a"||o.tagName.toLowerCase()==="button"?g[0].$el_text=H8(o):g[0].$el_text=j1(o)),d){var _,y;g[0].attr__href=d;var w=(_=vd(d))===null||_===void 0?void 0:_.host,S=H==null||(y=H.location)===null||y===void 0?void 0:y.host;w&&S&&w!==S&&(p=d)}if(m)return!1;var b=Hn(this._getDefaultProperties(t.type),this._elementsChainAsString?{$elements_chain:Tde(g)}:{$elements:g},(a=g[0])!==null&&a!==void 0&&a.$el_text?{$el_text:(c=g[0])===null||c===void 0?void 0:c.$el_text}:{},p&&t.type==="click"?{$external_click_url:p}:{},v),C=this.getElementSelectors(o);if(C&&C.length>0&&(b.$element_selectors=C),r===p2){var E,x=WP(H==null||(E=H.getSelection())===null||E===void 0?void 0:E.toString()),I=t.type||"clipboard";if(!x)return!1;b.$selected_content=x,b.$copy_type=I}return this.instance.capture(r,b),!0}}}},{key:"isBrowserSupported",value:function(){return Qr(ae?.querySelectorAll)}}]),e})(),vfe=(function(){function e(t){var n=this;Ze(this,e),q(this,"_restoreXHRPatch",void 0),q(this,"_restoreFetchPatch",void 0),q(this,"_startCapturing",(function(){ve(n._restoreXHRPatch)&&Rt.postHogTracingHeadersPatchFns._patchXHR(n.instance.sessionManager),ve(n._restoreFetchPatch)&&Rt.postHogTracingHeadersPatchFns._patchFetch(n.instance.sessionManager)})),this.instance=t}return Qe(e,[{key:"_loadScript",value:function(t){Rt.postHogTracingHeadersPatchFns&&t(),this.instance.requestRouter.loadScript("/static/tracing-headers.js?v=".concat(qr.LIB_VERSION),(function(n){if(n)return W.error("[TRACING-HEADERS] failed to load script",n);t()}))}},{key:"startIfEnabledOrStop",value:function(){var t,n;this.instance.config.__add_tracing_headers?this._loadScript(this._startCapturing):((t=this._restoreXHRPatch)===null||t===void 0||t.call(this),(n=this._restoreFetchPatch)===null||n===void 0||n.call(this),this._restoreXHRPatch=void 0,this._restoreFetchPatch=void 0)}}]),e})();(function(e){e[e.PENDING=-1]="PENDING",e[e.DENIED=0]="DENIED",e[e.GRANTED=1]="GRANTED"})(Es||(Es={}));var yfe=(function(){function e(t){Ze(this,e),this.instance=t}return Qe(e,[{key:"config",get:function(){return this.instance.config}},{key:"consent",get:function(){return this.getDnt()?Es.DENIED:this.storedConsent}},{key:"isOptedOut",value:function(){return this.consent===Es.DENIED||this.consent===Es.PENDING&&this.config.opt_out_capturing_by_default}},{key:"isOptedIn",value:function(){return!this.isOptedOut()}},{key:"optInOut",value:function(t){this.storage.set(this.storageKey,t?1:0,this.config.cookie_expiration,this.config.cross_subdomain_cookie,this.config.secure_cookie)}},{key:"reset",value:function(){this.storage.remove(this.storageKey,this.config.cross_subdomain_cookie)}},{key:"storageKey",get:function(){var t=this.instance.config,n=t.token;return(t.opt_out_capturing_cookie_prefix||"__ph_opt_in_out_")+n}},{key:"storedConsent",get:function(){var t=this.storage.get(this.storageKey);return t==="1"?Es.GRANTED:t==="0"?Es.DENIED:Es.PENDING}},{key:"storage",get:function(){if(!this._storage){var t=this.config.opt_out_capturing_persistence_type;this._storage=t==="localStorage"?rn:Bo;var n=t==="localStorage"?Bo:rn;n.get(this.storageKey)&&(this._storage.get(this.storageKey)||this.optInOut(n.get(this.storageKey)==="1"),n.remove(this.storageKey,this.config.cross_subdomain_cookie))}return this._storage}},{key:"getDnt",value:function(){return!!this.config.respect_dnt&&!!kP([ki?.doNotTrack,ki?.msDoNotTrack,Rt.doNotTrack],(function(t){return Be([!0,1,"1","yes"],t)}))}}]),e})(),Uh="[Exception Autocapture]",_fe=(function(){function e(t){var n,r=this;Ze(this,e),q(this,"originalOnUnhandledRejectionHandler",void 0),q(this,"startCapturing",(function(){if(H&&r.isEnabled&&!r.hasHandlers&&!r.isCapturing){var i=H.posthogErrorWrappingFunctions.wrapOnError,o=H.posthogErrorWrappingFunctions.wrapUnhandledRejection;if(i&&o)try{r.unwrapOnError=i(r.captureException.bind(r)),r.unwrapUnhandledRejection=o(r.captureException.bind(r))}catch(s){W.error(Uh+" failed to start",s),r.stopCapturing()}else W.error(Uh+" failed to load error wrapping functions - cannot start")}})),this.instance=t,this.remoteEnabled=!((n=this.instance.persistence)===null||n===void 0||!n.props[w8]),this.startIfEnabled()}return Qe(e,[{key:"isEnabled",get:function(){var t;return(t=this.remoteEnabled)!==null&&t!==void 0&&t}},{key:"isCapturing",get:function(){var t;return!(H==null||(t=H.onerror)===null||t===void 0||!t.__POSTHOG_INSTRUMENTED__)}},{key:"hasHandlers",get:function(){return this.originalOnUnhandledRejectionHandler||this.unwrapOnError}},{key:"startIfEnabled",value:function(){this.isEnabled&&!this.isCapturing&&(W.info(Uh+" enabled, starting..."),this.loadScript(this.startCapturing))}},{key:"loadScript",value:function(t){this.hasHandlers&&t(),this.instance.requestRouter.loadScript("/static/exception-autocapture.js?v=".concat(qr.LIB_VERSION),(function(n){if(n)return W.error(Uh+" failed to load script",n);t()}))}},{key:"stopCapturing",value:function(){var t,n;(t=this.unwrapOnError)===null||t===void 0||t.call(this),(n=this.unwrapUnhandledRejection)===null||n===void 0||n.call(this)}},{key:"afterDecideResponse",value:function(t){var n=t.autocaptureExceptions;this.remoteEnabled=!!n||!1,this.instance.persistence&&this.instance.persistence.register(q({},w8,this.remoteEnabled)),this.startIfEnabled()}},{key:"captureException",value:function(t){var n=this.instance.requestRouter.endpointFor("ui");t.$exception_personURL="".concat(n,"/project/").concat(this.instance.config.token,"/person/").concat(this.instance.get_distinct_id()),this.instance.exceptions.sendExceptionEvent(t)}}]),e})(),t9=9e5,pa="[Web Vitals]",bfe=(function(){function e(t){var n,r=this;Ze(this,e),q(this,"_enabledServerSide",!1),q(this,"_initialized",!1),q(this,"buffer",{url:void 0,metrics:[],firstMetricTimestamp:void 0}),q(this,"_flushToCapture",(function(){clearTimeout(r._delayedFlushTimer),r.buffer.metrics.length!==0&&(r.instance.capture("$web_vitals",r.buffer.metrics.reduce((function(i,o){var s;return ee(ee({},i),{},(q(s={},"$web_vitals_".concat(o.name,"_event"),ee({},o)),q(s,"$web_vitals_".concat(o.name,"_value"),o.value),s))}),{})),r.buffer={url:void 0,metrics:[],firstMetricTimestamp:void 0})})),q(this,"_addToBuffer",(function(i){var o,s=(o=r.instance.sessionManager)===null||o===void 0?void 0:o.checkAndGetSessionAndWindowId(!0);if(ve(s))W.error(pa+"Could not read session ID. Dropping metrics!");else{r.buffer=r.buffer||{url:void 0,metrics:[],firstMetricTimestamp:void 0};var a=r._currentURL();ve(a)||(ur(i?.name)||ur(i?.value)?W.error(pa+"Invalid metric received",i):r._maxAllowedValue&&i.value>=r._maxAllowedValue?W.error(pa+"Ignoring metric with value >= "+r._maxAllowedValue,i):(r.buffer.url!==a&&(r._flushToCapture(),r._delayedFlushTimer=setTimeout(r._flushToCapture,8e3)),ve(r.buffer.url)&&(r.buffer.url=a),r.buffer.firstMetricTimestamp=ve(r.buffer.firstMetricTimestamp)?Date.now():r.buffer.firstMetricTimestamp,r.buffer.metrics.push(ee(ee({},i),{},{$current_url:a,$session_id:s.sessionId,$window_id:s.windowId,timestamp:Date.now()})),r.buffer.metrics.length===4&&r._flushToCapture()))}})),q(this,"_startCapturing",(function(){var i=Rt.postHogWebVitalsCallbacks,o=i.onLCP,s=i.onCLS,a=i.onFCP,c=i.onINP;o&&s&&a&&c?(o(r._addToBuffer),s(r._addToBuffer),a(r._addToBuffer),c(r._addToBuffer),r._initialized=!0):W.error(pa+"web vitals callbacks not loaded - not starting")})),this.instance=t,this._enabledServerSide=!((n=this.instance.persistence)===null||n===void 0||!n.props[C8]),this.startIfEnabled()}return Qe(e,[{key:"_maxAllowedValue",get:function(){var t=Cn(this.instance.config.capture_performance)&&Gr(this.instance.config.capture_performance.__web_vitals_max_value)?this.instance.config.capture_performance.__web_vitals_max_value:t9;return 0<t&&t<=6e4?t9:t}},{key:"isEnabled",get:function(){var t=Cn(this.instance.config.capture_performance)?this.instance.config.capture_performance.web_vitals:void 0;return ba(t)?t:this._enabledServerSide}},{key:"startIfEnabled",value:function(){this.isEnabled&&!this._initialized&&(W.info(pa+" enabled, starting..."),this.loadScript(this._startCapturing))}},{key:"afterDecideResponse",value:function(t){var n=Cn(t.capturePerformance)&&!!t.capturePerformance.web_vitals;this.instance.persistence&&this.instance.persistence.register(q({},C8,n)),this._enabledServerSide=n,this.startIfEnabled()}},{key:"loadScript",value:function(t){H.postHogWebVitalsCallbacks&&t(),this.instance.requestRouter.loadScript("/static/web-vitals.js?v=".concat(qr.LIB_VERSION),(function(n){n?W.error(pa+" failed to load script",n):t()}))}},{key:"_currentURL",value:function(){var t=H?H.location.href:void 0;return t||W.error(pa+"Could not determine current URL"),t}}]),e})(),n9="/e/",wfe=(function(){function e(t){var n;Ze(this,e),this.instance=t,this._endpointSuffix=((n=this.instance.persistence)===null||n===void 0?void 0:n.props[S8])||n9}return Qe(e,[{key:"endpoint",get:function(){return this.instance.requestRouter.endpointFor("api",this._endpointSuffix)}},{key:"afterDecideResponse",value:function(t){var n=t.autocaptureExceptions;this._endpointSuffix=Cn(n)&&n.endpoint||n9,this.instance.persistence&&this.instance.persistence.register(q({},S8,this._endpointSuffix))}},{key:"sendExceptionEvent",value:function(t){this.instance.capture("$exception",t,{_noTruncate:!0,_batchKey:"exceptionEvent",_url:this.endpoint})}}]),e})(),bd={},r9=function(){},Bc="posthog",uM=!Qde&&fn?.indexOf("MSIE")===-1&&fn?.indexOf("Mozilla")===-1,i9=function(){var e,t,n;return{api_host:"https://us.i.posthog.com",ui_host:null,token:"",autocapture:!0,rageclick:!0,cross_subdomain_cookie:(t=ae?.location,n=t?.hostname,!!An(n)&&n.split(".").slice(-2).join(".")!=="herokuapp.com"),persistence:"localStorage+cookie",persistence_name:"",loaded:r9,store_google:!0,custom_campaign_params:[],custom_blocked_useragents:[],save_referrer:!0,capture_pageview:!0,capture_pageleave:"if_capture_pageview",debug:Jn&&An(Jn?.search)&&Jn.search.indexOf("__posthog_debug=true")!==-1||!1,verbose:!1,cookie_expiration:365,upgrade:!1,disable_session_recording:!1,disable_persistence:!1,disable_surveys:!1,enable_recording_console_log:void 0,secure_cookie:(H==null||(e=H.location)===null||e===void 0?void 0:e.protocol)==="https:",ip:!0,opt_out_capturing_by_default:!1,opt_out_persistence_by_default:!1,opt_out_useragent_filter:!1,opt_out_capturing_persistence_type:"localStorage",opt_out_capturing_cookie_prefix:null,opt_in_site_apps:!1,property_denylist:[],respect_dnt:!1,sanitize_properties:null,request_headers:{},inapp_protocol:"//",inapp_link_new_window:!1,request_batching:!0,properties_string_max_length:65535,session_recording:{},mask_all_element_attributes:!1,mask_all_text:!1,advanced_disable_decide:!1,advanced_disable_feature_flags:!1,advanced_disable_feature_flags_on_first_load:!1,advanced_disable_toolbar_metrics:!1,feature_flag_request_timeout_ms:3e3,on_request_error:function(r){var i="Bad HTTP status: "+r.statusCode+" "+r.text;W.error(i)},get_device_id:function(r){return r},_onCapture:r9,capture_performance:void 0,name:"posthog",bootstrap:{},disable_compression:!1,session_idle_timeout_seconds:1800,person_profiles:"always",__add_tracing_headers:!1}},o9=function(e){var t={};ve(e.process_person)||(t.person_profiles=e.process_person),ve(e.xhr_headers)||(t.request_headers=e.xhr_headers),ve(e.cookie_name)||(t.persistence_name=e.cookie_name),ve(e.disable_cookie)||(t.disable_persistence=e.disable_cookie);var n=Hn({},t,e);return on(e.property_blacklist)&&(ve(e.property_denylist)?n.property_denylist=e.property_blacklist:on(e.property_denylist)?n.property_denylist=[].concat(Uo(e.property_blacklist),Uo(e.property_denylist)):W.error("Invalid value for property_denylist config: "+e.property_denylist)),n},Sfe=(function(){function e(){Ze(this,e),q(this,"__forceAllowLocalhost",!1)}return Qe(e,[{key:"_forceAllowLocalhost",get:function(){return this.__forceAllowLocalhost},set:function(t){W.error("WebPerformanceObserver is deprecated and has no impact on network capture. Use `_forceAllowLocalhostNetworkCapture` on `posthog.sessionRecording`"),this.__forceAllowLocalhost=t}}]),e})(),dM=(function(){function e(){var t=this;Ze(this,e),q(this,"webPerformance",new Sfe),q(this,"version",qr.LIB_VERSION),q(this,"_internalEventEmitter",new cM),this.config=i9(),this.decideEndpointWasHit=!1,this.SentryIntegration=ife,this.sentryIntegration=function(n){return(function(r,i){var o=aM(r,i);return{name:sM,processEvent:function(s){return o(s)}}})(t,n)},this.__request_queue=[],this.__loaded=!1,this.analyticsDefaultEndpoint="/e/",this._initialPageviewCaptured=!1,this.featureFlags=new ede(this),this.toolbar=new Bde(this),this.scrollManager=new gfe(this),this.pageViewManager=new sfe(this),this.surveys=new lfe(this),this.exceptions=new wfe(this),this.rateLimiter=new ufe(this),this.requestRouter=new rfe(this),this.consent=new yfe(this),this.people={set:function(n,r,i){var o=An(n)?q({},n,r):n;t.setPersonProperties(o),i?.({})},set_once:function(n,r,i){var o=An(n)?q({},n,r):n;t.setPersonProperties(void 0,o),i?.({})}},this.on("eventCaptured",(function(n){return W.info("send",n)}))}return Qe(e,[{key:"init",value:function(t,n,r){if(r&&r!==Bc){var i,o=(i=bd[r])!==null&&i!==void 0?i:new e;return o._init(t,n,r),bd[r]=o,bd[Bc][r]=o,o}return this._init(t,n,r)}},{key:"_init",value:function(t){var n,r,i=this,o=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{},s=arguments.length>2?arguments[2]:void 0;if(ve(t)||p8(t))return W.critical("PostHog was initialized without a token. This likely indicates a misconfiguration. Please check the first argument passed to posthog.init()"),this;if(this.__loaded)return W.warn("You have already initialized PostHog! Re-initializing is a no-op"),this;this.__loaded=!0,this.config={},this._triggered_notifs=[],this.set_config(Hn({},i9(),o9(o),{name:s,token:t})),this.config.on_xhr_error&&W.error("[posthog] on_xhr_error is deprecated. Use on_request_error instead"),this.compression=o.disable_compression?void 0:Li.GZipJS,this.persistence=new u2(this.config),this.sessionPersistence=this.config.persistence==="sessionStorage"?this.persistence:new u2(ee(ee({},this.config),{},{persistence:"sessionStorage"}));var a=ee({},this.persistence.props),c=ee({},this.sessionPersistence.props);if(this._requestQueue=new Vde((function(w){return i._send_retriable_request(w)})),this._retryQueue=new tfe(this),this.__request_queue=[],this.sessionManager=new nfe(this.config,this.persistence),this.sessionPropsManager=new ffe(this.sessionManager,this.persistence),new vfe(this).startIfEnabledOrStop(),this.sessionRecording=new Fde(this),this.sessionRecording.startIfEnabledOrStop(),this.config.disable_scroll_properties||this.scrollManager.startMeasuringScrollPosition(),this.autocapture=new mfe(this),this.autocapture.startIfEnabled(),this.surveys.loadIfEnabled(),this.heatmaps=new pfe(this),this.heatmaps.startIfEnabled(),this.webVitalsAutocapture=new bfe(this),this.exceptionObserver=new _fe(this),this.exceptionObserver.startIfEnabled(),qr.DEBUG=qr.DEBUG||this.config.debug,qr.DEBUG&&W.info("Starting in debug mode",{this:this,config:o,thisC:ee({},this.config),p:a,s:c}),this._sync_opt_out_with_persistence(),((n=o.bootstrap)===null||n===void 0?void 0:n.distinctID)!==void 0){var l,u,d=this.config.get_device_id(ks()),p=(l=o.bootstrap)!==null&&l!==void 0&&l.isIdentifiedID?d:o.bootstrap.distinctID;this.persistence.set_property(Ro,(u=o.bootstrap)!==null&&u!==void 0&&u.isIdentifiedID?"identified":"anonymous"),this.register({distinct_id:o.bootstrap.distinctID,$device_id:p})}if(this._hasBootstrappedFeatureFlags()){var g,v,m=Object.keys(((g=o.bootstrap)===null||g===void 0?void 0:g.featureFlags)||{}).filter((function(w){var S,b;return!((S=o.bootstrap)===null||S===void 0||(b=S.featureFlags)===null||b===void 0||!b[w])})).reduce((function(w,S){var b,C;return w[S]=((b=o.bootstrap)===null||b===void 0||(C=b.featureFlags)===null||C===void 0?void 0:C[S])||!1,w}),{}),_=Object.keys(((v=o.bootstrap)===null||v===void 0?void 0:v.featureFlagPayloads)||{}).filter((function(w){return m[w]})).reduce((function(w,S){var b,C,E,x;return(b=o.bootstrap)!==null&&b!==void 0&&(C=b.featureFlagPayloads)!==null&&C!==void 0&&C[S]&&(w[S]=(E=o.bootstrap)===null||E===void 0||(x=E.featureFlagPayloads)===null||x===void 0?void 0:x[S]),w}),{});this.featureFlags.receivedFeatureFlags({featureFlags:m,featureFlagPayloads:_})}if(!this.get_distinct_id()){var y=this.config.get_device_id(ks());this.register_once({distinct_id:y,$device_id:y},""),this.persistence.set_property(Ro,"anonymous")}return H==null||(r=H.addEventListener)===null||r===void 0||r.call(H,"onpagehide"in self?"pagehide":"unload",this._handle_unload.bind(this)),this.toolbar.maybeLoadToolbar(),o.segment?ofe(this,(function(){return i._loaded()})):this._loaded(),Qr(this.config._onCapture)&&this.on("eventCaptured",(function(w){return i.config._onCapture(w.event,w)})),this}},{key:"_afterDecideResponse",value:function(t){var n,r,i,o,s,a,c,l;this.compression=void 0,t.supportedCompression&&!this.config.disable_compression&&(this.compression=Be(t.supportedCompression,Li.GZipJS)?Li.GZipJS:Be(t.supportedCompression,Li.Base64)?Li.Base64:void 0),(n=t.analytics)!==null&&n!==void 0&&n.endpoint&&(this.analyticsDefaultEndpoint=t.analytics.endpoint),(r=this.sessionRecording)===null||r===void 0||r.afterDecideResponse(t),(i=this.autocapture)===null||i===void 0||i.afterDecideResponse(t),(o=this.heatmaps)===null||o===void 0||o.afterDecideResponse(t),(s=this.surveys)===null||s===void 0||s.afterDecideResponse(t),(a=this.webVitalsAutocapture)===null||a===void 0||a.afterDecideResponse(t),(c=this.exceptions)===null||c===void 0||c.afterDecideResponse(t),(l=this.exceptionObserver)===null||l===void 0||l.afterDecideResponse(t)}},{key:"_loaded",value:function(){var t=this,n=this.config.advanced_disable_decide;n||this.featureFlags.setReloadingPaused(!0);try{this.config.loaded(this)}catch(r){W.critical("`loaded` function failed",r)}this._start_queue_if_opted_in(),this.config.capture_pageview&&setTimeout((function(){t.consent.isOptedIn()&&t._captureInitialPageview()}),1),n||(new Hde(this).call(),this.featureFlags.resetRequestQueue())}},{key:"_start_queue_if_opted_in",value:function(){var t;this.has_opted_out_capturing()||this.config.request_batching&&((t=this._requestQueue)===null||t===void 0||t.enable())}},{key:"_dom_loaded",value:function(){var t=this;this.has_opted_out_capturing()||ol(this.__request_queue,(function(n){return t._send_retriable_request(n)})),this.__request_queue=[],this._start_queue_if_opted_in()}},{key:"_handle_unload",value:function(){var t,n;this.config.request_batching?(this._shouldCapturePageleave()&&this.capture("$pageleave"),(t=this._requestQueue)===null||t===void 0||t.unload(),(n=this._retryQueue)===null||n===void 0||n.unload()):this._shouldCapturePageleave()&&this.capture("$pageleave",null,{transport:"sendBeacon"})}},{key:"_send_request",value:function(t){var n=this;this.__loaded&&(uM?this.__request_queue.push(t):this.rateLimiter.isServerRateLimited(t.batchKey)||(t.transport=t.transport||this.config.api_transport,t.url=F1(t.url,{ip:this.config.ip?1:0}),t.headers=ee({},this.config.request_headers),t.compression=t.compression==="best-available"?this.compression:t.compression,(function(r){var i,o,s,a=ee({},r);a.timeout=a.timeout||6e4,a.url=F1(a.url,{_:new Date().getTime().toString(),ver:qr.LIB_VERSION,compression:a.compression});var c=(i=a.transport)!==null&&i!==void 0?i:"XHR",l=(o=(s=kP(_d,(function(u){return u.transport===c})))===null||s===void 0?void 0:s.method)!==null&&o!==void 0?o:_d[0].method;if(!l)throw new Error("No available transport method");l(a)})(ee(ee({},t),{},{callback:function(r){var i,o,s;n.rateLimiter.checkForLimiting(r),r.statusCode>=400&&((o=(s=n.config).on_request_error)===null||o===void 0||o.call(s,r)),(i=t.callback)===null||i===void 0||i.call(t,r)}}))))}},{key:"_send_retriable_request",value:function(t){this._retryQueue?this._retryQueue.retriableRequest(t):this._send_request(t)}},{key:"_execute_array",value:function(t){var n,r=this,i=[],o=[],s=[];ol(t,(function(c){c&&(n=c[0],on(n)?s.push(c):Qr(c)?c.call(r):on(c)&&n==="alias"?i.push(c):on(c)&&n.indexOf("capture")!==-1&&Qr(r[n])?s.push(c):o.push(c))}));var a=function(c,l){ol(c,(function(u){if(on(u[0])){var d=l;ft(u,(function(p){d=d[p[0]].apply(d,p.slice(1))}))}else this[u[0]].apply(this,u.slice(1))}),l)};a(i,this),a(o,this),a(s,this)}},{key:"_hasBootstrappedFeatureFlags",value:function(){var t,n;return((t=this.config.bootstrap)===null||t===void 0?void 0:t.featureFlags)&&Object.keys((n=this.config.bootstrap)===null||n===void 0?void 0:n.featureFlags).length>0||!1}},{key:"push",value:function(t){this._execute_array([t])}},{key:"capture",value:function(t,n,r){var i;if(this.__loaded&&this.persistence&&this.sessionPersistence&&this._requestQueue){if(!this.consent.isOptedOut())if(!ve(t)&&An(t)){if(this.config.opt_out_useragent_filter||!this._is_bot()){var o=r!=null&&r.skip_client_rate_limiting?void 0:this.rateLimiter.clientRateLimitContext();if(o==null||!o.isRateLimited){this.sessionPersistence.update_search_keyword(),this.config.store_google&&this.sessionPersistence.update_campaign_params(),this.config.save_referrer&&this.sessionPersistence.update_referrer_info(),(this.config.store_google||this.config.save_referrer)&&this.persistence.set_initial_person_info();var s=new Date,a=r?.timestamp||s,c={uuid:ks(),event:t,properties:this._calculate_event_properties(t,n||{},a)};o&&(c.properties.$lib_rate_limit_remaining_tokens=o.remainingTokens),r?.$set&&(c.$set=r?.$set);var l=this._calculate_set_once_properties(r?.$set_once);l&&(c.$set_once=l),(c=Zue(c,r!=null&&r._noTruncate?null:this.config.properties_string_max_length)).timestamp=a,ve(r?.timestamp)||(c.properties.$event_time_override_provided=!0,c.properties.$event_time_override_system_time=s);var u=ee(ee({},c.properties.$set),c.$set);Tp(u)||this.setPersonPropertiesForFlags(u),this._internalEventEmitter.emit("eventCaptured",c);var d={method:"POST",url:(i=r?._url)!==null&&i!==void 0?i:this.requestRouter.endpointFor("api",this.analyticsDefaultEndpoint),data:c,compression:"best-available",batchKey:r?._batchKey};return!this.config.request_batching||r&&(r==null||!r._batchKey)||r!=null&&r.send_instantly?this._send_retriable_request(d):this._requestQueue.enqueue(d),c}W.critical("This capture call is ignored due to client rate limiting.")}}else W.error("No event name provided to posthog.capture")}else W.uninitializedWarning("posthog.capture")}},{key:"_addCaptureHook",value:function(t){this.on("eventCaptured",(function(n){return t(n.event,n)}))}},{key:"_calculate_event_properties",value:function(t,n,r){if(r=r||new Date,!this.persistence||!this.sessionPersistence)return n;var i=this.persistence.remove_event_timer(t),o=ee({},n);if(o.token=this.config.token,t==="$snapshot"){var s=ee(ee({},this.persistence.properties()),this.sessionPersistence.properties());return o.distinct_id=s.distinct_id,(!An(o.distinct_id)&&!Gr(o.distinct_id)||p8(o.distinct_id))&&W.error("Invalid distinct_id for replay event. This indicates a bug in your implementation"),o}var a=hn.properties();if(this.sessionManager){var c=this.sessionManager.checkAndGetSessionAndWindowId(),l=c.sessionId,u=c.windowId;o.$session_id=l,o.$window_id=u}if(this.requestRouter.region===wa.CUSTOM&&(o.$lib_custom_api_host=this.config.api_host),this.sessionPropsManager&&this.config.__preview_send_client_session_params&&(t==="$pageview"||t==="$pageleave"||t==="$autocapture")){var d=this.sessionPropsManager.getSessionProps();o=Hn(o,d)}if(!this.config.disable_scroll_properties){var p={};t==="$pageview"?p=this.pageViewManager.doPageView(r):t==="$pageleave"&&(p=this.pageViewManager.doPageLeave(r)),o=Hn(o,p)}if(t==="$pageview"&&ae&&(o.title=ae.title),!ve(i)){var g=r.getTime()-i;o.$duration=parseFloat((g/1e3).toFixed(3))}fn&&this.config.opt_out_useragent_filter&&(o.$browser_type=this._is_bot()?"bot":"browser"),(o=Hn({},a,this.persistence.properties(),this.sessionPersistence.properties(),o)).$is_identified=this._isIdentified(),on(this.config.property_denylist)?ft(this.config.property_denylist,(function(m){delete o[m]})):W.error("Invalid value for property_denylist config: "+this.config.property_denylist+" or property_blacklist config: "+this.config.property_blacklist);var v=this.config.sanitize_properties;return v&&(o=v(o,t)),o.$process_person_profile=this._hasPersonProcessing(),o}},{key:"_calculate_set_once_properties",value:function(t){if(!this.persistence||!this._hasPersonProcessing())return t;var n=Hn({},this.persistence.get_initial_props(),t||{});return Tp(n)?void 0:n}},{key:"register",value:function(t,n){var r;(r=this.persistence)===null||r===void 0||r.register(t,n)}},{key:"register_once",value:function(t,n,r){var i;(i=this.persistence)===null||i===void 0||i.register_once(t,n,r)}},{key:"register_for_session",value:function(t){var n;(n=this.sessionPersistence)===null||n===void 0||n.register(t)}},{key:"unregister",value:function(t){var n;(n=this.persistence)===null||n===void 0||n.unregister(t)}},{key:"unregister_for_session",value:function(t){var n;(n=this.sessionPersistence)===null||n===void 0||n.unregister(t)}},{key:"_register_single",value:function(t,n){this.register(q({},t,n))}},{key:"getFeatureFlag",value:function(t,n){return this.featureFlags.getFeatureFlag(t,n)}},{key:"getFeatureFlagPayload",value:function(t){var n=this.featureFlags.getFeatureFlagPayload(t);try{return JSON.parse(n)}catch{return n}}},{key:"isFeatureEnabled",value:function(t,n){return this.featureFlags.isFeatureEnabled(t,n)}},{key:"reloadFeatureFlags",value:function(){this.featureFlags.reloadFeatureFlags()}},{key:"updateEarlyAccessFeatureEnrollment",value:function(t,n){this.featureFlags.updateEarlyAccessFeatureEnrollment(t,n)}},{key:"getEarlyAccessFeatures",value:function(t){var n=arguments.length>1&&arguments[1]!==void 0&&arguments[1];return this.featureFlags.getEarlyAccessFeatures(t,n)}},{key:"on",value:function(t,n){return this._internalEventEmitter.on(t,n)}},{key:"onFeatureFlags",value:function(t){return this.featureFlags.onFeatureFlags(t)}},{key:"onSessionId",value:function(t){var n,r;return(n=(r=this.sessionManager)===null||r===void 0?void 0:r.onSessionId(t))!==null&&n!==void 0?n:function(){}}},{key:"getSurveys",value:function(t){var n=arguments.length>1&&arguments[1]!==void 0&&arguments[1];this.surveys.getSurveys(t,n)}},{key:"getActiveMatchingSurveys",value:function(t){var n=arguments.length>1&&arguments[1]!==void 0&&arguments[1];this.surveys.getActiveMatchingSurveys(t,n)}},{key:"renderSurvey",value:function(t,n){this.surveys.renderSurvey(t,n)}},{key:"canRenderSurvey",value:function(t){this.surveys.canRenderSurvey(t)}},{key:"getNextSurveyStep",value:function(t,n,r){return this.surveys.getNextSurveyStep(t,n,r)}},{key:"identify",value:function(t,n,r){if(!this.__loaded||!this.persistence)return W.uninitializedWarning("posthog.identify");if(Gr(t)&&(t=t.toString(),W.warn("The first argument to posthog.identify was a number, but it should be a string. It has been converted to a string.")),t){if(["distinct_id","distinctid"].includes(t.toLowerCase()))W.critical('The string "'.concat(t,'" was set in posthog.identify which indicates an error. This ID should be unique to the user and not a hardcoded string.'));else if(this._requirePersonProcessing("posthog.identify")){var i=this.get_distinct_id();if(this.register({$user_id:t}),!this.get_property("$device_id")){var o=i;this.register_once({$had_persisted_distinct_id:!0,$device_id:o},"")}t!==i&&t!==this.get_property(Qu)&&(this.unregister(Qu),this.register({distinct_id:t}));var s=(this.persistence.get_property(Ro)||"anonymous")==="anonymous";t!==i&&s?(this.persistence.set_property(Ro,"identified"),this.setPersonPropertiesForFlags(n||{},!1),this.capture("$identify",{distinct_id:t,$anon_distinct_id:i},{$set:n||{},$set_once:r||{}}),this.featureFlags.setAnonymousDistinctId(i)):(n||r)&&this.setPersonProperties(n,r),t!==i&&(this.reloadFeatureFlags(),this.unregister(A1))}}else W.error("Unique user id has not been set in posthog.identify")}},{key:"setPersonProperties",value:function(t,n){(t||n)&&this._requirePersonProcessing("posthog.setPersonProperties")&&(this.setPersonPropertiesForFlags(t||{}),this.capture("$set",{$set:t||{},$set_once:n||{}}))}},{key:"group",value:function(t,n,r){if(t&&n){if(this._requirePersonProcessing("posthog.group")){var i=this.getGroups();i[t]!==n&&this.resetGroupPropertiesForFlags(t),this.register({$groups:ee(ee({},i),{},q({},t,n))}),r&&(this.capture("$groupidentify",{$group_type:t,$group_key:n,$group_set:r}),this.setGroupPropertiesForFlags(q({},t,r))),i[t]===n||r||this.reloadFeatureFlags()}}else W.error("posthog.group requires a group type and group key")}},{key:"resetGroups",value:function(){this.register({$groups:{}}),this.resetGroupPropertiesForFlags(),this.reloadFeatureFlags()}},{key:"setPersonPropertiesForFlags",value:function(t){var n=!(arguments.length>1&&arguments[1]!==void 0)||arguments[1];this._requirePersonProcessing("posthog.setPersonPropertiesForFlags")&&this.featureFlags.setPersonPropertiesForFlags(t,n)}},{key:"resetPersonPropertiesForFlags",value:function(){this.featureFlags.resetPersonPropertiesForFlags()}},{key:"setGroupPropertiesForFlags",value:function(t){var n=!(arguments.length>1&&arguments[1]!==void 0)||arguments[1];this._requirePersonProcessing("posthog.setGroupPropertiesForFlags")&&this.featureFlags.setGroupPropertiesForFlags(t,n)}},{key:"resetGroupPropertiesForFlags",value:function(t){this.featureFlags.resetGroupPropertiesForFlags(t)}},{key:"reset",value:function(t){var n,r,i,o;if(W.info("reset"),!this.__loaded)return W.uninitializedWarning("posthog.reset");var s=this.get_property("$device_id");this.consent.reset(),(n=this.persistence)===null||n===void 0||n.clear(),(r=this.sessionPersistence)===null||r===void 0||r.clear(),(i=this.persistence)===null||i===void 0||i.set_property(Ro,"anonymous"),(o=this.sessionManager)===null||o===void 0||o.resetSessionId();var a=this.config.get_device_id(ks());this.register_once({distinct_id:a,$device_id:t?a:s},"")}},{key:"get_distinct_id",value:function(){return this.get_property("distinct_id")}},{key:"getGroups",value:function(){return this.get_property("$groups")||{}}},{key:"get_session_id",value:function(){var t,n;return(t=(n=this.sessionManager)===null||n===void 0?void 0:n.checkAndGetSessionAndWindowId(!0).sessionId)!==null&&t!==void 0?t:""}},{key:"get_session_replay_url",value:function(t){if(!this.sessionManager)return"";var n=this.sessionManager.checkAndGetSessionAndWindowId(!0),r=n.sessionId,i=n.sessionStartTimestamp,o=this.requestRouter.endpointFor("ui","/project/".concat(this.config.token,"/replay/").concat(r));if(t!=null&&t.withTimestamp&&i){var s,a=(s=t.timestampLookBack)!==null&&s!==void 0?s:10;if(!i)return o;var c=Math.max(Math.floor((new Date().getTime()-i)/1e3)-a,0);o+="?t=".concat(c)}return o}},{key:"alias",value:function(t,n){return t===this.get_property(TP)?(W.critical("Attempting to create alias for existing People user - aborting."),-2):this._requirePersonProcessing("posthog.alias")?(ve(n)&&(n=this.get_distinct_id()),t!==n?(this._register_single(Qu,t),this.capture("$create_alias",{alias:t,distinct_id:n})):(W.warn("alias matches current distinct_id - skipping api call."),this.identify(t),-1)):void 0}},{key:"set_config",value:function(t){var n,r,i,o,s=ee({},this.config);Cn(t)&&(Hn(this.config,o9(t)),(n=this.persistence)===null||n===void 0||n.update_config(this.config,s),this.sessionPersistence=this.config.persistence==="sessionStorage"?this.persistence:new u2(ee(ee({},this.config),{},{persistence:"sessionStorage"})),rn.is_supported()&&rn.get("ph_debug")==="true"&&(this.config.debug=!0),this.config.debug&&(qr.DEBUG=!0,W.info("set_config",{config:t,oldConfig:s,newConfig:ee({},this.config)})),(r=this.sessionRecording)===null||r===void 0||r.startIfEnabledOrStop(),(i=this.autocapture)===null||i===void 0||i.startIfEnabled(),(o=this.heatmaps)===null||o===void 0||o.startIfEnabled(),this.surveys.loadIfEnabled(),this._sync_opt_out_with_persistence())}},{key:"startSessionRecording",value:function(t){var n,r=ba(t)&&t;if(r||t!=null&&t.sampling){var i,o,s=(i=this.sessionManager)===null||i===void 0?void 0:i.checkAndGetSessionAndWindowId();(o=this.persistence)===null||o===void 0||o.register(q({},md,!0)),W.info("Session recording started with sampling override for session: ",s?.sessionId)}(r||t!=null&&t.linked_flag)&&((n=this.sessionRecording)===null||n===void 0||n.overrideLinkedFlag(),W.info("Session recording started with linked_flags override")),this.set_config({disable_session_recording:!1})}},{key:"stopSessionRecording",value:function(){this.set_config({disable_session_recording:!0})}},{key:"sessionRecordingStarted",value:function(){var t;return!((t=this.sessionRecording)===null||t===void 0||!t.started)}},{key:"captureException",value:function(t,n){var r=Qr(Rt.parseErrorAsProperties)?Rt.parseErrorAsProperties([t.message,void 0,void 0,void 0,t]):ee({$exception_type:t.name,$exception_message:t.message,$exception_level:"error"},n);this.exceptions.sendExceptionEvent(r)}},{key:"loadToolbar",value:function(t){return this.toolbar.loadToolbar(t)}},{key:"get_property",value:function(t){var n;return(n=this.persistence)===null||n===void 0?void 0:n.props[t]}},{key:"getSessionProperty",value:function(t){var n;return(n=this.sessionPersistence)===null||n===void 0?void 0:n.props[t]}},{key:"toString",value:function(){var t,n=(t=this.config.name)!==null&&t!==void 0?t:Bc;return n!==Bc&&(n=Bc+"."+n),n}},{key:"_isIdentified",value:function(){var t,n;return((t=this.persistence)===null||t===void 0?void 0:t.get_property(Ro))==="identified"||((n=this.sessionPersistence)===null||n===void 0?void 0:n.get_property(Ro))==="identified"}},{key:"_hasPersonProcessing",value:function(){var t,n,r,i;return!(this.config.person_profiles==="never"||this.config.person_profiles==="identified_only"&&!this._isIdentified()&&Tp(this.getGroups())&&((t=this.persistence)===null||t===void 0||(n=t.props)===null||n===void 0||!n[Qu])&&((r=this.persistence)===null||r===void 0||(i=r.props)===null||i===void 0||!i[P1]))}},{key:"_shouldCapturePageleave",value:function(){return this.config.capture_pageleave===!0||this.config.capture_pageleave==="if_capture_pageview"&&this.config.capture_pageview}},{key:"createPersonProfile",value:function(){this._hasPersonProcessing()||this._requirePersonProcessing("posthog.createPersonProfile")&&this.setPersonProperties({},{})}},{key:"_requirePersonProcessing",value:function(t){return this.config.person_profiles==="never"?(W.error(t+' was called, but process_person is set to "never". This call will be ignored.'),!1):(this._register_single(P1,!0),!0)}},{key:"_sync_opt_out_with_persistence",value:function(){var t,n,r,i,o=this.consent.isOptedOut(),s=this.config.opt_out_persistence_by_default,a=this.config.disable_persistence||o&&!!s;((t=this.persistence)===null||t===void 0?void 0:t.disabled)!==a&&((r=this.persistence)===null||r===void 0||r.set_disabled(a)),((n=this.sessionPersistence)===null||n===void 0?void 0:n.disabled)!==a&&((i=this.sessionPersistence)===null||i===void 0||i.set_disabled(a))}},{key:"opt_in_capturing",value:function(t){var n;this.consent.optInOut(!0),this._sync_opt_out_with_persistence(),(ve(t?.captureEventName)||t!=null&&t.captureEventName)&&this.capture((n=t?.captureEventName)!==null&&n!==void 0?n:"$opt_in",t?.captureProperties,{send_instantly:!0}),this.config.capture_pageview&&this._captureInitialPageview()}},{key:"opt_out_capturing",value:function(){this.consent.optInOut(!1),this._sync_opt_out_with_persistence()}},{key:"has_opted_in_capturing",value:function(){return this.consent.isOptedIn()}},{key:"has_opted_out_capturing",value:function(){return this.consent.isOptedOut()}},{key:"clear_opt_in_out_capturing",value:function(){this.consent.reset(),this._sync_opt_out_with_persistence()}},{key:"_is_bot",value:function(){return ki?(function(t,n){if(!t)return!1;var r=t.userAgent;if(r&&J8(r,n))return!0;try{var i=t?.userAgentData;if(i!=null&&i.brands&&i.brands.some((function(o){return J8(o?.brand,n)})))return!0}catch{}return!!t.webdriver})(ki,this.config.custom_blocked_useragents):void 0}},{key:"_captureInitialPageview",value:function(){ae&&!this._initialPageviewCaptured&&(this._initialPageviewCaptured=!0,this.capture("$pageview",{title:ae.title},{send_instantly:!0}))}},{key:"debug",value:function(t){t===!1?(H?.console.log("You've disabled debug mode."),localStorage&&localStorage.removeItem("ph_debug"),this.set_config({debug:!1})):(H?.console.log("You're now in debug mode. All calls to PostHog will be logged in your console.\nYou can disable this with `posthog.debug(false)`."),localStorage&&localStorage.setItem("ph_debug","true"),this.set_config({debug:!0}))}}]),e})();(function(e,t){for(var n=0;n<t.length;n++)e.prototype[t[n]]=Xue(e.prototype[t[n]])})(dM,["identify"]);var s9,Cfe=(s9=bd[Bc]=new dM,(function(){function e(){e.done||(e.done=!0,uM=!1,ft(bd,(function(t){t._dom_loaded()})))}ae!=null&&ae.addEventListener&&(ae.readyState==="complete"?e():ae.addEventListener("DOMContentLoaded",e,!1)),H&&No(H,"load",e,!0)})(),s9);class Efe{constructor(){this.cache={startTime:new Date(0),maxParticipantsCount:0}}cacheStartCall(t){this.cache.startTime=t}cacheParticipantCountChanged(t){this.cache.maxParticipantsCount=Math.max(t,this.cache.maxParticipantsCount)}track(t,n,r,i){Ke.instance.trackEvent({eventName:"CallEnded",callId:t,callParticipantsMax:this.cache.maxParticipantsCount,callParticipantsOnLeave:n,callDuration:(Date.now()-this.cache.startTime.getTime())/1e3,roomEventEncryptionKeysSent:i.statistics.counters.roomEventEncryptionKeysSent,roomEventEncryptionKeysReceived:i.statistics.counters.roomEventEncryptionKeysReceived,roomEventEncryptionKeysReceivedAverageAge:i.statistics.counters.roomEventEncryptionKeysReceived>0?i.statistics.totals.roomEventEncryptionKeysReceivedTotalAge/i.statistics.counters.roomEventEncryptionKeysReceived:0},{send_instantly:r})}}class xfe{track(t){Ke.instance.trackEvent({eventName:"CallStarted",callId:t})}}class Ife{constructor(){this.cache={signupStart:new Date(0),signupEnd:new Date(0)}}cacheSignupStart(t){this.cache.signupStart=t}getSignupEndTime(){return this.cache.signupEnd}cacheSignupEnd(t){this.cache.signupEnd=t}track(){Ke.instance.trackEvent({eventName:"Signup",signupDuration:Date.now()-this.cache.signupStart.getTime()}),Ke.instance.setRegistrationType(sm.Registered)}}class Rfe{track(){Ke.instance.trackEvent({eventName:"Login"}),Ke.instance.setRegistrationType(sm.Registered)}}class Lfe{track(t,n){Ke.instance.trackEvent({eventName:"MuteMicrophone",targetMuteState:t?"mute":"unmute",callId:n})}}class kfe{track(t,n){Ke.instance.trackEvent({eventName:"MuteCamera",targetMuteState:t?"mute":"unmute",callId:n})}}class Tfe{track(t){Ke.instance.trackEvent({eventName:"UndecryptableToDeviceEvent",callId:t})}}class Afe{track(t,n,r){Ke.instance.trackEvent({eventName:"QualitySurvey",callId:t,feedbackText:n,stars:r})}}class Pfe{track(t){Ke.instance.trackEvent({eventName:"CallDisconnected",reason:t})}}class Mfe{constructor(){this.connectStart=0,this.websocketConnected=0}cacheConnectStart(){this.connectStart=Date.now()}cacheWsConnect(){this.websocketConnected=Date.now()}track(t={log:!1}){const n=Date.now(),r=n-this.connectStart,i=this.websocketConnected-this.connectStart,o=n-this.websocketConnected;Ke.instance.trackEvent({eventName:"CallConnectDuration",totalDuration:r,websocketDuration:i,peerConnectionDuration:o}),t.log&&U.log(`Time to connect:
total: ${r}ms
peerConnection: ${i}ms
websocket: ${o}ms`)}}function ut(e){return typeof e=="function"}function ub(e){var t=function(r){Error.call(r),r.stack=new Error().stack},n=e(t);return n.prototype=Object.create(Error.prototype),n.prototype.constructor=n,n}var m2=ub(function(e){return function(n){e(this),this.message=n?n.length+` errors occurred during unsubscription:
`+n.map(function(r,i){return i+1+") "+r.toString()}).join(`
  `):"",this.name="UnsubscriptionError",this.errors=n}});function U1(e,t){if(e){var n=e.indexOf(t);0<=n&&e.splice(n,1)}}var qf=(function(){function e(t){this.initialTeardown=t,this.closed=!1,this._parentage=null,this._finalizers=null}return e.prototype.unsubscribe=function(){var t,n,r,i,o;if(!this.closed){this.closed=!0;var s=this._parentage;if(s)if(this._parentage=null,Array.isArray(s))try{for(var a=zs(s),c=a.next();!c.done;c=a.next()){var l=c.value;l.remove(this)}}catch(m){t={error:m}}finally{try{c&&!c.done&&(n=a.return)&&n.call(a)}finally{if(t)throw t.error}}else s.remove(this);var u=this.initialTeardown;if(ut(u))try{u()}catch(m){o=m instanceof m2?m.errors:[m]}var d=this._finalizers;if(d){this._finalizers=null;try{for(var p=zs(d),g=p.next();!g.done;g=p.next()){var v=g.value;try{a9(v)}catch(m){o=o??[],m instanceof m2?o=Ar(Ar([],Tr(o)),Tr(m.errors)):o.push(m)}}}catch(m){r={error:m}}finally{try{g&&!g.done&&(i=p.return)&&i.call(p)}finally{if(r)throw r.error}}}if(o)throw new m2(o)}},e.prototype.add=function(t){var n;if(t&&t!==this)if(this.closed)a9(t);else{if(t instanceof e){if(t.closed||t._hasParent(this))return;t._addParent(this)}(this._finalizers=(n=this._finalizers)!==null&&n!==void 0?n:[]).push(t)}},e.prototype._hasParent=function(t){var n=this._parentage;return n===t||Array.isArray(n)&&n.includes(t)},e.prototype._addParent=function(t){var n=this._parentage;this._parentage=Array.isArray(n)?(n.push(t),n):n?[n,t]:t},e.prototype._removeParent=function(t){var n=this._parentage;n===t?this._parentage=null:Array.isArray(n)&&U1(n,t)},e.prototype.remove=function(t){var n=this._finalizers;n&&U1(n,t),t instanceof e&&t._removeParent(this)},e.EMPTY=(function(){var t=new e;return t.closed=!0,t})(),e})(),fM=qf.EMPTY;function hM(e){return e instanceof qf||e&&"closed"in e&&ut(e.remove)&&ut(e.add)&&ut(e.unsubscribe)}function a9(e){ut(e)?e():e.unsubscribe()}var Nfe={Promise:void 0},$fe={setTimeout:function(e,t){for(var n=[],r=2;r<arguments.length;r++)n[r-2]=arguments[r];return setTimeout.apply(void 0,Ar([e,t],Tr(n)))},clearTimeout:function(e){return clearTimeout(e)},delegate:void 0};function pM(e){$fe.setTimeout(function(){throw e})}function Ll(){}function Mp(e){e()}var db=(function(e){ji(t,e);function t(n){var r=e.call(this)||this;return r.isStopped=!1,n?(r.destination=n,hM(n)&&n.add(r)):r.destination=Dfe,r}return t.create=function(n,r,i){return new kl(n,r,i)},t.prototype.next=function(n){this.isStopped||this._next(n)},t.prototype.error=function(n){this.isStopped||(this.isStopped=!0,this._error(n))},t.prototype.complete=function(){this.isStopped||(this.isStopped=!0,this._complete())},t.prototype.unsubscribe=function(){this.closed||(this.isStopped=!0,e.prototype.unsubscribe.call(this),this.destination=null)},t.prototype._next=function(n){this.destination.next(n)},t.prototype._error=function(n){try{this.destination.error(n)}finally{this.unsubscribe()}},t.prototype._complete=function(){try{this.destination.complete()}finally{this.unsubscribe()}},t})(qf),Ofe=(function(){function e(t){this.partialObserver=t}return e.prototype.next=function(t){var n=this.partialObserver;if(n.next)try{n.next(t)}catch(r){Bh(r)}},e.prototype.error=function(t){var n=this.partialObserver;if(n.error)try{n.error(t)}catch(r){Bh(r)}else Bh(t)},e.prototype.complete=function(){var t=this.partialObserver;if(t.complete)try{t.complete()}catch(n){Bh(n)}},e})(),kl=(function(e){ji(t,e);function t(n,r,i){var o=e.call(this)||this,s;return ut(n)||!n?s={next:n??void 0,error:r??void 0,complete:i??void 0}:s=n,o.destination=new Ofe(s),o}return t})(db);function Bh(e){pM(e)}function jfe(e){throw e}var Dfe={closed:!0,next:Ll,error:jfe,complete:Ll},fb=(function(){return typeof Symbol=="function"&&Symbol.observable||"@@observable"})();function oa(e){return e}function Ffe(e){return e.length===0?oa:e.length===1?e[0]:function(n){return e.reduce(function(r,i){return i(r)},n)}}var Ct=(function(){function e(t){t&&(this._subscribe=t)}return e.prototype.lift=function(t){var n=new e;return n.source=this,n.operator=t,n},e.prototype.subscribe=function(t,n,r){var i=this,o=Ufe(t)?t:new kl(t,n,r);return Mp(function(){var s=i,a=s.operator,c=s.source;o.add(a?a.call(o,c):c?i._subscribe(o):i._trySubscribe(o))}),o},e.prototype._trySubscribe=function(t){try{return this._subscribe(t)}catch(n){t.error(n)}},e.prototype.forEach=function(t,n){var r=this;return n=c9(n),new n(function(i,o){var s=new kl({next:function(a){try{t(a)}catch(c){o(c),s.unsubscribe()}},error:o,complete:i});r.subscribe(s)})},e.prototype._subscribe=function(t){var n;return(n=this.source)===null||n===void 0?void 0:n.subscribe(t)},e.prototype[fb]=function(){return this},e.prototype.pipe=function(){for(var t=[],n=0;n<arguments.length;n++)t[n]=arguments[n];return Ffe(t)(this)},e.prototype.toPromise=function(t){var n=this;return t=c9(t),new t(function(r,i){var o;n.subscribe(function(s){return o=s},function(s){return i(s)},function(){return r(o)})})},e.create=function(t){return new e(t)},e})();function c9(e){var t;return(t=e??Nfe.Promise)!==null&&t!==void 0?t:Promise}function Hfe(e){return e&&ut(e.next)&&ut(e.error)&&ut(e.complete)}function Ufe(e){return e&&e instanceof db||Hfe(e)&&hM(e)}function Bfe(e){return ut(e?.lift)}function jt(e){return function(t){if(Bfe(t))return t.lift(function(n){try{return e(n,this)}catch(r){this.error(r)}});throw new TypeError("Unable to lift unknown Observable type")}}function Et(e,t,n,r,i){return new Vfe(e,t,n,r,i)}var Vfe=(function(e){ji(t,e);function t(n,r,i,o,s,a){var c=e.call(this,n)||this;return c.onFinalize=s,c.shouldUnsubscribe=a,c._next=r?function(l){try{r(l)}catch(u){n.error(u)}}:e.prototype._next,c._error=o?function(l){try{o(l)}catch(u){n.error(u)}finally{this.unsubscribe()}}:e.prototype._error,c._complete=i?function(){try{i()}catch(l){n.error(l)}finally{this.unsubscribe()}}:e.prototype._complete,c}return t.prototype.unsubscribe=function(){var n;if(!this.shouldUnsubscribe||this.shouldUnsubscribe()){var r=this.closed;e.prototype.unsubscribe.call(this),!r&&((n=this.onFinalize)===null||n===void 0||n.call(this))}},t})(db),qfe=ub(function(e){return function(){e(this),this.name="ObjectUnsubscribedError",this.message="object unsubscribed"}}),Ht=(function(e){ji(t,e);function t(){var n=e.call(this)||this;return n.closed=!1,n.currentObservers=null,n.observers=[],n.isStopped=!1,n.hasError=!1,n.thrownError=null,n}return t.prototype.lift=function(n){var r=new l9(this,this);return r.operator=n,r},t.prototype._throwIfClosed=function(){if(this.closed)throw new qfe},t.prototype.next=function(n){var r=this;Mp(function(){var i,o;if(r._throwIfClosed(),!r.isStopped){r.currentObservers||(r.currentObservers=Array.from(r.observers));try{for(var s=zs(r.currentObservers),a=s.next();!a.done;a=s.next()){var c=a.value;c.next(n)}}catch(l){i={error:l}}finally{try{a&&!a.done&&(o=s.return)&&o.call(s)}finally{if(i)throw i.error}}}})},t.prototype.error=function(n){var r=this;Mp(function(){if(r._throwIfClosed(),!r.isStopped){r.hasError=r.isStopped=!0,r.thrownError=n;for(var i=r.observers;i.length;)i.shift().error(n)}})},t.prototype.complete=function(){var n=this;Mp(function(){if(n._throwIfClosed(),!n.isStopped){n.isStopped=!0;for(var r=n.observers;r.length;)r.shift().complete()}})},t.prototype.unsubscribe=function(){this.isStopped=this.closed=!0,this.observers=this.currentObservers=null},Object.defineProperty(t.prototype,"observed",{get:function(){var n;return((n=this.observers)===null||n===void 0?void 0:n.length)>0},enumerable:!1,configurable:!0}),t.prototype._trySubscribe=function(n){return this._throwIfClosed(),e.prototype._trySubscribe.call(this,n)},t.prototype._subscribe=function(n){return this._throwIfClosed(),this._checkFinalizedStatuses(n),this._innerSubscribe(n)},t.prototype._innerSubscribe=function(n){var r=this,i=this,o=i.hasError,s=i.isStopped,a=i.observers;return o||s?fM:(this.currentObservers=null,a.push(n),new qf(function(){r.currentObservers=null,U1(a,n)}))},t.prototype._checkFinalizedStatuses=function(n){var r=this,i=r.hasError,o=r.thrownError,s=r.isStopped;i?n.error(o):s&&n.complete()},t.prototype.asObservable=function(){var n=new Ct;return n.source=this,n},t.create=function(n,r){return new l9(n,r)},t})(Ct),l9=(function(e){ji(t,e);function t(n,r){var i=e.call(this)||this;return i.destination=n,i.source=r,i}return t.prototype.next=function(n){var r,i;(i=(r=this.destination)===null||r===void 0?void 0:r.next)===null||i===void 0||i.call(r,n)},t.prototype.error=function(n){var r,i;(i=(r=this.destination)===null||r===void 0?void 0:r.error)===null||i===void 0||i.call(r,n)},t.prototype.complete=function(){var n,r;(r=(n=this.destination)===null||n===void 0?void 0:n.complete)===null||r===void 0||r.call(n)},t.prototype._subscribe=function(n){var r,i;return(i=(r=this.source)===null||r===void 0?void 0:r.subscribe(n))!==null&&i!==void 0?i:fM},t})(Ht),Pt=(function(e){ji(t,e);function t(n){var r=e.call(this)||this;return r._value=n,r}return Object.defineProperty(t.prototype,"value",{get:function(){return this.getValue()},enumerable:!1,configurable:!0}),t.prototype._subscribe=function(n){var r=e.prototype._subscribe.call(this,n);return!r.closed&&n.next(this._value),r},t.prototype.getValue=function(){var n=this,r=n.hasError,i=n.thrownError,o=n._value;if(r)throw i;return this._throwIfClosed(),o},t.prototype.next=function(n){e.prototype.next.call(this,this._value=n)},t})(Ht),Gfe={now:function(){return Date.now()}},Kfe=(function(e){ji(t,e);function t(n,r){return e.call(this)||this}return t.prototype.schedule=function(n,r){return this},t})(qf),u9={setInterval:function(e,t){for(var n=[],r=2;r<arguments.length;r++)n[r-2]=arguments[r];return setInterval.apply(void 0,Ar([e,t],Tr(n)))},clearInterval:function(e){return clearInterval(e)},delegate:void 0},Wfe=(function(e){ji(t,e);function t(n,r){var i=e.call(this,n,r)||this;return i.scheduler=n,i.work=r,i.pending=!1,i}return t.prototype.schedule=function(n,r){var i;if(r===void 0&&(r=0),this.closed)return this;this.state=n;var o=this.id,s=this.scheduler;return o!=null&&(this.id=this.recycleAsyncId(s,o,r)),this.pending=!0,this.delay=r,this.id=(i=this.id)!==null&&i!==void 0?i:this.requestAsyncId(s,this.id,r),this},t.prototype.requestAsyncId=function(n,r,i){return i===void 0&&(i=0),u9.setInterval(n.flush.bind(n,this),i)},t.prototype.recycleAsyncId=function(n,r,i){if(i===void 0&&(i=0),i!=null&&this.delay===i&&this.pending===!1)return r;r!=null&&u9.clearInterval(r)},t.prototype.execute=function(n,r){if(this.closed)return new Error("executing a cancelled action");this.pending=!1;var i=this._execute(n,r);if(i)return i;this.pending===!1&&this.id!=null&&(this.id=this.recycleAsyncId(this.scheduler,this.id,null))},t.prototype._execute=function(n,r){var i=!1,o;try{this.work(n)}catch(s){i=!0,o=s||new Error("Scheduled action threw falsy error")}if(i)return this.unsubscribe(),o},t.prototype.unsubscribe=function(){if(!this.closed){var n=this,r=n.id,i=n.scheduler,o=i.actions;this.work=this.state=this.scheduler=null,this.pending=!1,U1(o,this),r!=null&&(this.id=this.recycleAsyncId(i,r,null)),this.delay=null,e.prototype.unsubscribe.call(this)}},t})(Kfe),d9=(function(){function e(t,n){n===void 0&&(n=e.now),this.schedulerActionCtor=t,this.now=n}return e.prototype.schedule=function(t,n,r){return n===void 0&&(n=0),new this.schedulerActionCtor(this,t).schedule(r,n)},e.now=Gfe.now,e})(),zfe=(function(e){ji(t,e);function t(n,r){r===void 0&&(r=d9.now);var i=e.call(this,n,r)||this;return i.actions=[],i._active=!1,i}return t.prototype.flush=function(n){var r=this.actions;if(this._active){r.push(n);return}var i;this._active=!0;do if(i=n.execute(n.state,n.delay))break;while(n=r.shift());if(this._active=!1,i){for(;n=r.shift();)n.unsubscribe();throw i}},t})(d9),nm=new zfe(Wfe),Yfe=nm,hb=new Ct(function(e){return e.complete()});function gM(e){return e&&ut(e.schedule)}function pb(e){return e[e.length-1]}function mM(e){return ut(pb(e))?e.pop():void 0}function Gf(e){return gM(pb(e))?e.pop():void 0}function Xfe(e,t){return typeof pb(e)=="number"?e.pop():t}var gb=(function(e){return e&&typeof e.length=="number"&&typeof e!="function"});function vM(e){return ut(e?.then)}function yM(e){return ut(e[fb])}function _M(e){return Symbol.asyncIterator&&ut(e?.[Symbol.asyncIterator])}function bM(e){return new TypeError("You provided "+(e!==null&&typeof e=="object"?"an invalid object":"'"+e+"'")+" where a stream was expected. You can provide an Observable, Promise, ReadableStream, Array, AsyncIterable, or Iterable.")}function Zfe(){return typeof Symbol!="function"||!Symbol.iterator?"@@iterator":Symbol.iterator}var wM=Zfe();function SM(e){return ut(e?.[wM])}function CM(e){return B4(this,arguments,function(){var n,r,i,o;return Pg(this,function(s){switch(s.label){case 0:n=e.getReader(),s.label=1;case 1:s.trys.push([1,,9,10]),s.label=2;case 2:return[4,Ho(n.read())];case 3:return r=s.sent(),i=r.value,o=r.done,o?[4,Ho(void 0)]:[3,5];case 4:return[2,s.sent()];case 5:return[4,Ho(i)];case 6:return[4,s.sent()];case 7:return s.sent(),[3,2];case 8:return[3,10];case 9:return n.releaseLock(),[7];case 10:return[2]}})})}function EM(e){return ut(e?.getReader)}function an(e){if(e instanceof Ct)return e;if(e!=null){if(yM(e))return Qfe(e);if(gb(e))return Jfe(e);if(vM(e))return ehe(e);if(_M(e))return xM(e);if(SM(e))return the(e);if(EM(e))return nhe(e)}throw bM(e)}function Qfe(e){return new Ct(function(t){var n=e[fb]();if(ut(n.subscribe))return n.subscribe(t);throw new TypeError("Provided object does not correctly implement Symbol.observable")})}function Jfe(e){return new Ct(function(t){for(var n=0;n<e.length&&!t.closed;n++)t.next(e[n]);t.complete()})}function ehe(e){return new Ct(function(t){e.then(function(n){t.closed||(t.next(n),t.complete())},function(n){return t.error(n)}).then(null,pM)})}function the(e){return new Ct(function(t){var n,r;try{for(var i=zs(e),o=i.next();!o.done;o=i.next()){var s=o.value;if(t.next(s),t.closed)return}}catch(a){n={error:a}}finally{try{o&&!o.done&&(r=i.return)&&r.call(i)}finally{if(n)throw n.error}}t.complete()})}function xM(e){return new Ct(function(t){rhe(e,t).catch(function(n){return t.error(n)})})}function nhe(e){return xM(CM(e))}function rhe(e,t){var n,r,i,o;return U4(this,void 0,void 0,function(){var s,a;return Pg(this,function(c){switch(c.label){case 0:c.trys.push([0,5,6,11]),n=V4(e),c.label=1;case 1:return[4,n.next()];case 2:if(r=c.sent(),!!r.done)return[3,4];if(s=r.value,t.next(s),t.closed)return[2];c.label=3;case 3:return[3,1];case 4:return[3,11];case 5:return a=c.sent(),i={error:a},[3,11];case 6:return c.trys.push([6,,9,10]),r&&!r.done&&(o=n.return)?[4,o.call(n)]:[3,8];case 7:c.sent(),c.label=8;case 8:return[3,10];case 9:if(i)throw i.error;return[7];case 10:return[7];case 11:return t.complete(),[2]}})})}function $s(e,t,n,r,i){r===void 0&&(r=0),i===void 0&&(i=!1);var o=t.schedule(function(){n(),i?e.add(this.schedule(null,r)):this.unsubscribe()},r);if(e.add(o),!i)return o}function IM(e,t){return t===void 0&&(t=0),jt(function(n,r){n.subscribe(Et(r,function(i){return $s(r,e,function(){return r.next(i)},t)},function(){return $s(r,e,function(){return r.complete()},t)},function(i){return $s(r,e,function(){return r.error(i)},t)}))})}function RM(e,t){return t===void 0&&(t=0),jt(function(n,r){r.add(e.schedule(function(){return n.subscribe(r)},t))})}function ihe(e,t){return an(e).pipe(RM(t),IM(t))}function ohe(e,t){return an(e).pipe(RM(t),IM(t))}function she(e,t){return new Ct(function(n){var r=0;return t.schedule(function(){r===e.length?n.complete():(n.next(e[r++]),n.closed||this.schedule())})})}function ahe(e,t){return new Ct(function(n){var r;return $s(n,t,function(){r=e[wM](),$s(n,t,function(){var i,o,s;try{i=r.next(),o=i.value,s=i.done}catch(a){n.error(a);return}s?n.complete():n.next(o)},0,!0)}),function(){return ut(r?.return)&&r.return()}})}function LM(e,t){if(!e)throw new Error("Iterable cannot be null");return new Ct(function(n){$s(n,t,function(){var r=e[Symbol.asyncIterator]();$s(n,t,function(){r.next().then(function(i){i.done?n.complete():n.next(i.value)})},0,!0)})})}function che(e,t){return LM(CM(e),t)}function lhe(e,t){if(e!=null){if(yM(e))return ihe(e,t);if(gb(e))return she(e,t);if(vM(e))return ohe(e,t);if(_M(e))return LM(e,t);if(SM(e))return ahe(e,t);if(EM(e))return che(e,t)}throw bM(e)}function ns(e,t){return t?lhe(e,t):an(e)}function Ce(){for(var e=[],t=0;t<arguments.length;t++)e[t]=arguments[t];var n=Gf(e);return ns(e,n)}var uhe=ub(function(e){return function(){e(this),this.name="EmptyError",this.message="no elements in sequence"}});function dhe(e,t){return new Promise(function(n,r){var i=new kl({next:function(o){n(o),i.unsubscribe()},error:r,complete:function(){r(new uhe)}});e.subscribe(i)})}function fhe(e){return e instanceof Date&&!isNaN(e)}function V(e,t){return jt(function(n,r){var i=0;n.subscribe(Et(r,function(o){r.next(e.call(t,o,i++))}))})}var hhe=Array.isArray;function phe(e,t){return hhe(t)?e.apply(void 0,Ar([],Tr(t))):e(t)}function kM(e){return V(function(t){return phe(e,t)})}var ghe=Array.isArray,mhe=Object.getPrototypeOf,vhe=Object.prototype,yhe=Object.keys;function _he(e){if(e.length===1){var t=e[0];if(ghe(t))return{args:t,keys:null};if(bhe(t)){var n=yhe(t);return{args:n.map(function(r){return t[r]}),keys:n}}}return{args:e,keys:null}}function bhe(e){return e&&typeof e=="object"&&mhe(e)===vhe}function whe(e,t){return e.reduce(function(n,r,i){return n[r]=t[i],n},{})}function ge(){for(var e=[],t=0;t<arguments.length;t++)e[t]=arguments[t];var n=Gf(e),r=mM(e),i=_he(e),o=i.args,s=i.keys;if(o.length===0)return ns([],n);var a=new Ct(She(o,n,s?function(c){return whe(s,c)}:oa));return r?a.pipe(kM(r)):a}function She(e,t,n){return n===void 0&&(n=oa),function(r){f9(t,function(){for(var i=e.length,o=new Array(i),s=i,a=i,c=function(u){f9(t,function(){var d=ns(e[u],t),p=!1;d.subscribe(Et(r,function(g){o[u]=g,p||(p=!0,a--),a||r.next(n(o.slice()))},function(){--s||r.complete()}))},r)},l=0;l<i;l++)c(l)},r)}}function f9(e,t,n){e?$s(n,e,t):t()}function Che(e,t,n,r,i,o,s,a){var c=[],l=0,u=0,d=!1,p=function(){d&&!c.length&&!l&&t.complete()},g=function(m){return l<r?v(m):c.push(m)},v=function(m){l++;var _=!1;an(n(m,u++)).subscribe(Et(t,function(y){t.next(y)},function(){_=!0},void 0,function(){if(_)try{l--;for(var y=function(){var w=c.shift();s||v(w)};c.length&&l<r;)y();p()}catch(w){t.error(w)}}))};return e.subscribe(Et(t,g,function(){d=!0,p()})),function(){}}function rm(e,t,n){return n===void 0&&(n=1/0),ut(t)?rm(function(r,i){return V(function(o,s){return t(r,o,i,s)})(an(e(r,i)))},n):(typeof t=="number"&&(n=t),jt(function(r,i){return Che(r,i,e,n)}))}function TM(e){return e===void 0&&(e=1/0),rm(oa,e)}function Ehe(){return TM(1)}function Tl(){for(var e=[],t=0;t<arguments.length;t++)e[t]=arguments[t];return Ehe()(ns(e,Gf(e)))}function xhe(e){return new Ct(function(t){an(e()).subscribe(t)})}var Ihe=["addListener","removeListener"],Rhe=["addEventListener","removeEventListener"],Lhe=["on","off"];function Pn(e,t,n,r){if(ut(n)&&(r=n,n=void 0),r)return Pn(e,t,n).pipe(kM(r));var i=Tr(Ahe(e)?Rhe.map(function(a){return function(c){return e[a](t,c,n)}}):khe(e)?Ihe.map(h9(e,t)):The(e)?Lhe.map(h9(e,t)):[],2),o=i[0],s=i[1];if(!o&&gb(e))return rm(function(a){return Pn(a,t,n)})(an(e));if(!o)throw new TypeError("Invalid event target");return new Ct(function(a){var c=function(){for(var l=[],u=0;u<arguments.length;u++)l[u]=arguments[u];return a.next(1<l.length?l:l[0])};return o(c),function(){return s(c)}})}function h9(e,t){return function(n){return function(r){return e[n](t,r)}}}function khe(e){return ut(e.addListener)&&ut(e.removeListener)}function The(e){return ut(e.on)&&ut(e.off)}function Ahe(e){return ut(e.addEventListener)&&ut(e.removeEventListener)}function Os(e,t,n){e===void 0&&(e=0),n===void 0&&(n=Yfe);var r=-1;return t!=null&&(gM(t)?n=t:r=t),new Ct(function(i){var o=fhe(e)?+e-n.now():e;o<0&&(o=0);var s=0;return n.schedule(function(){i.closed||(i.next(s++),0<=r?this.schedule(void 0,r):i.complete())},o)})}function Phe(e,t){return t===void 0&&(t=nm),Os(e,e,t)}function Vo(){for(var e=[],t=0;t<arguments.length;t++)e[t]=arguments[t];var n=Gf(e),r=Xfe(e,1/0),i=e;return i.length?i.length===1?an(i[0]):TM(r)(ns(i,n)):hb}var wd=new Ct(Ll),Mhe=Array.isArray;function Nhe(e){return e.length===1&&Mhe(e[0])?e[0]:e}function zt(e,t){return jt(function(n,r){var i=0;n.subscribe(Et(r,function(o){return e.call(t,o,i++)&&r.next(o)}))})}function $he(){for(var e=[],t=0;t<arguments.length;t++)e[t]=arguments[t];return e=Nhe(e),e.length===1?an(e[0]):new Ct(Ohe(e))}function Ohe(e){return function(t){for(var n=[],r=function(o){n.push(an(e[o]).subscribe(Et(t,function(s){if(n){for(var a=0;a<n.length;a++)a!==o&&n[a].unsubscribe();n=null}t.next(s)})))},i=0;n&&!t.closed&&i<e.length;i++)r(i)}}function AM(e){return jt(function(t,n){var r=!1,i=null,o=null,s=!1,a=function(){if(o?.unsubscribe(),o=null,r){r=!1;var l=i;i=null,n.next(l)}s&&n.complete()},c=function(){o=null,s&&n.complete()};t.subscribe(Et(n,function(l){r=!0,i=l,o||an(e(l)).subscribe(o=Et(n,a,c))},function(){s=!0,(!r||!o||o.closed)&&n.complete()}))})}function im(e){return jt(function(t,n){var r=null,i=!1,o;r=t.subscribe(Et(n,void 0,void 0,function(s){o=an(e(s,im(e)(t))),r?(r.unsubscribe(),r=null,o.subscribe(n)):i=!0})),i&&(r.unsubscribe(),r=null,o.subscribe(n))})}function jhe(e,t,n,r,i){return function(o,s){var a=n,c=t,l=0;o.subscribe(Et(s,function(u){var d=l++;c=a?e(c,u,d):(a=!0,u),s.next(c)},i))}}function mb(e){return e<=0?function(){return hb}:jt(function(t,n){var r=0;t.subscribe(Et(n,function(i){++r<=e&&(n.next(i),e<=r&&n.complete())}))})}function Dhe(){return jt(function(e,t){e.subscribe(Et(t,Ll))})}function Fhe(e){return V(function(){return e})}function Hhe(e,t){return rm(function(n,r){return an(e(n,r)).pipe(mb(1),Fhe(n))})}function Uhe(e,t){t===void 0&&(t=nm);var n=Os(e,t);return Hhe(function(){return n})}function ar(e,t){return t===void 0&&(t=oa),e=e??Bhe,jt(function(n,r){var i,o=!0;n.subscribe(Et(r,function(s){var a=t(s);(o||!e(i,a))&&(o=!1,i=a,r.next(s))}))})}function Bhe(e,t){return e===t}function PM(){for(var e=[],t=0;t<arguments.length;t++)e[t]=arguments[t];return function(n){return Tl(n,Ce.apply(void 0,Ar([],Tr(e))))}}function Vhe(e){return jt(function(t,n){try{t.subscribe(n)}finally{n.add(e)}})}function Al(){return jt(function(e,t){var n,r=!1;e.subscribe(Et(t,function(i){var o=n;n=i,r&&t.next([o,i]),r=!0}))})}function To(e,t){return jt(jhe(e,t,arguments.length>=2,!0))}function qhe(e){e===void 0&&(e={});var t=e.connector,n=t===void 0?function(){return new Ht}:t,r=e.resetOnError,i=r===void 0?!0:r,o=e.resetOnComplete,s=o===void 0?!0:o,a=e.resetOnRefCountZero,c=a===void 0?!0:a;return function(l){var u,d,p,g=0,v=!1,m=!1,_=function(){d?.unsubscribe(),d=void 0},y=function(){_(),u=p=void 0,v=m=!1},w=function(){var S=u;y(),S?.unsubscribe()};return jt(function(S,b){g++,!m&&!v&&_();var C=p=p??n();b.add(function(){g--,g===0&&!m&&!v&&(d=v2(w,c))}),C.subscribe(b),!u&&g>0&&(u=new kl({next:function(E){return C.next(E)},error:function(E){m=!0,_(),d=v2(y,i,E),C.error(E)},complete:function(){v=!0,_(),d=v2(y,s),C.complete()}}),an(S).subscribe(u))})(l)}}function v2(e,t){for(var n=[],r=2;r<arguments.length;r++)n[r-2]=arguments[r];if(t===!0){e();return}if(t!==!1){var i=new kl({next:function(){i.unsubscribe(),e()}});return an(t.apply(void 0,Ar([],Tr(n)))).subscribe(i)}}function MM(e){return jt(function(t,n){var r=!1,i=0;t.subscribe(Et(n,function(o){return(r||(r=!e(o,i++)))&&n.next(o)}))})}function lt(){for(var e=[],t=0;t<arguments.length;t++)e[t]=arguments[t];var n=Gf(e);return jt(function(r,i){(n?Tl(e,r,n):Tl(e,r)).subscribe(i)})}function Ee(e,t){return jt(function(n,r){var i=null,o=0,s=!1,a=function(){return s&&!i&&r.complete()};n.subscribe(Et(r,function(c){i?.unsubscribe();var l=0,u=o++;an(e(c,u)).subscribe(i=Et(r,function(d){return r.next(t?t(c,d,u,l++):d)},function(){i=null,a()}))},function(){s=!0,a()}))})}function Ghe(){return Ee(oa)}function Khe(e,t){return jt(function(n,r){var i=t;return Ee(function(o,s){return e(i,o,s)},function(o,s){return i=s,s})(n).subscribe(r),function(){i=null}})}function NM(e){return jt(function(t,n){an(e).subscribe(Et(n,function(){return n.complete()},Ll)),!n.closed&&t.subscribe(n)})}function Whe(e,t){return t===void 0&&(t=!1),jt(function(n,r){var i=0;n.subscribe(Et(r,function(o){var s=e(o,i++);(s||t)&&r.next(o),!s&&r.complete()}))})}function Ta(e,t,n){var r=ut(e)||t||n?{next:e,error:t,complete:n}:e;return r?jt(function(i,o){var s;(s=r.subscribe)===null||s===void 0||s.call(r);var a=!0;i.subscribe(Et(o,function(c){var l;(l=r.next)===null||l===void 0||l.call(r,c),o.next(c)},function(){var c;a=!1,(c=r.complete)===null||c===void 0||c.call(r),o.complete()},function(c){var l;a=!1,(l=r.error)===null||l===void 0||l.call(r,c),o.error(c)},function(){var c,l;a&&((c=r.unsubscribe)===null||c===void 0||c.call(r)),(l=r.finalize)===null||l===void 0||l.call(r)}))}):oa}function zhe(e,t){return jt(function(n,r){var i=t??{},o=i.leading,s=o===void 0?!0:o,a=i.trailing,c=a===void 0?!1:a,l=!1,u=null,d=null,p=!1,g=function(){d?.unsubscribe(),d=null,c&&(_(),p&&r.complete())},v=function(){d=null,p&&r.complete()},m=function(y){return d=an(e(y)).subscribe(Et(r,g,v))},_=function(){if(l){l=!1;var y=u;u=null,r.next(y),!p&&m(y)}};n.subscribe(Et(r,function(y){l=!0,u=y,!(d&&!d.closed)&&(s?_():m(y))},function(){p=!0,!(c&&l&&d&&!d.closed)&&r.complete()}))})}function a3(e,t,n){t===void 0&&(t=nm);var r=Os(e,t);return zhe(function(){return r},n)}function $M(){for(var e=[],t=0;t<arguments.length;t++)e[t]=arguments[t];var n=mM(e);return jt(function(r,i){for(var o=e.length,s=new Array(o),a=e.map(function(){return!1}),c=!1,l=function(d){an(e[d]).subscribe(Et(i,function(p){s[d]=p,!c&&!a[d]&&(a[d]=!0,(c=a.every(oa))&&(a=null))},Ll))},u=0;u<o;u++)l(u);r.subscribe(Et(i,function(d){if(c){var p=Ar([d],Tr(s));i.next(n?n.apply(void 0,Ar([],Tr(p))):p)}}))})}class yn{constructor(t,n){this.defaultValue=n,this.setValue=o=>{this._value$.next(o),localStorage.setItem(this.key,JSON.stringify(o))},this.getValue=()=>this._value$.getValue(),this.key=`matrix-setting-${t}`;const r=localStorage.getItem(this.key);let i=n;if(r!==null)try{i=JSON.parse(r)}catch(o){U.warn(`Invalid value stored for setting ${t}: ${r}.`,o)}this._value$=new Pt(i),this.value$=this._value$}}function qt(e){return[J(e.value$),e.setValue]}const OM=new yn("opt-in-analytics",null),om=()=>{const e=qt(OM);return Ke.instance.isEnabled()?e:[!1,null]},jM=new yn("developer-settings-tab",!1),DM=new yn("duplicate-tiles",0),vb=new yn("debug-tile-layout",!1),Pl=new yn("show-connection-stats",!1),p9=new yn("audio-input",void 0),g9=new yn("audio-output",void 0),m9=new yn("video-input",void 0),FM=new yn("background-blur",!1),HM=new yn("hand-raised-show-timer",!1),UM=new yn("reactions-show",!0),yb=new yn("reactions-play-sound",!0),BM=new yn("sound-effect-volume",.5),VM=new yn("mute-all-audio",!1),v9=new yn("always-show-self",!0),qM=new yn("always-show-iphone-earpiece",!1);var rr=(e=>(e.Legacy="legacy",e.Compatibility="compatibility",e.Matrix_2_0="matrix_2_0",e))(rr||{});const GM=new yn("matrix-rtc-mode","legacy"),KM=new yn("custom-livekit-url",null);var sm=(e=>(e[e.Guest=0]="Guest",e[e.Registered=1]="Registered",e))(sm||{});const Xi=class Xi{constructor(t){this.posthog=t,this.enabled=!1,this.anonymity=0,this.platformSuperProperties={},this.registrationType=0,this.optInListener=null,this.sanitizeProperties=(i,o)=>(this.anonymity==1&&(i.$referrer=null,i.$referring_domain=null,i.$initial_referrer=null,i.$initial_referring_domain=null,i.$device_id=null),i.$current_url=i.$current_url.split("/").slice(0,3).join(""),i),this.eventCallEnded=new Efe,this.eventSignup=new Ife,this.eventCallStarted=new xfe,this.eventLogin=new Rfe,this.eventMuteMicrophone=new Lfe,this.eventMuteCamera=new kfe,this.eventUndecryptableToDevice=new Tfe,this.eventQualitySurvey=new Afe,this.eventCallDisconnected=new Pfe,this.eventCallConnectDuration=new Mfe;let n,r;n=kt().posthogApiKey??void 0,r=kt().posthogApiHost??void 0,n&&r?(this.posthog.init(n,{api_host:r,autocapture:!1,mask_all_text:!0,mask_all_element_attributes:!0,capture_pageview:!1,sanitize_properties:this.sanitizeProperties,respect_dnt:!0,advanced_disable_decide:!0}),this.enabled=!0):(U.info("Posthog is not enabled because there is no api key or no host given in the config"),this.enabled=!1)}static hasInstance(){return!!this.internalInstance}static get instance(){return this.internalInstance||(this.internalInstance=new Xi(Cfe)),this.internalInstance}static resetInstance(){this.internalInstance=null}registerSuperProperties(t){this.enabled&&this.posthog.register(t)}static getPlatformProperties(){return{appVersion:"dev",matrixBackend:Ae?"embedded":"jssdk",callBackend:"livekit",cryptoVersion:Ae?void 0:window.matrixclient?.getCrypto()?.getVersion()}}capture(t,n,r){this.enabled&&this.posthog.capture(t,{...n},r)}isEnabled(){return this.enabled}setAnonymity(t){this.enabled&&(t==0||t==1)&&(this.posthog.reset(),this.updateSuperProperties()),this.anonymity=t}static getRandomAnalyticsId(){return[...crypto.getRandomValues(new Uint8Array(16))].map(t=>t.toString(16)).join("")}async identifyUser(t){if(this.anonymity==2&&this.enabled){let n=await this.getAnalyticsId();try{!n&&!Ae&&(n=t(),await this.setAccountAnalyticsId(n))}catch(r){U.log("Unable to identify user for tracking"+r?.toString())}n?this.posthog.identify(n):U.info("No analyticsID is available. Should not try to setup posthog")}}async getAnalyticsId(){const t=window.matrixclient;return Ae?kt().posthogUserId:(await t.getAccountDataFromServer(Xi.ANALYTICS_EVENT_TYPE))?.id??null}async setAccountAnalyticsId(t){if(!Ae){const n=window.matrixclient,r=await n.getAccountDataFromServer(Xi.ANALYTICS_EVENT_TYPE);await n.setAccountData(Xi.ANALYTICS_EVENT_TYPE,Object.assign({id:t},r))}}getAnonymity(){return this.anonymity}logout(){this.enabled&&this.posthog.reset(),this.optInListener?.unsubscribe(),this.optInListener=null,this.setAnonymity(0)}onLoginStatusChanged(){this.maybeIdentifyUser().catch(()=>U.log("Could not identify user on login status change"))}updateSuperProperties(){this.platformSuperProperties=Xi.getPlatformProperties(),this.registerSuperProperties({...this.platformSuperProperties,registrationType:this.registrationType==0?"Guest":"Registered"})}userRegisteredInThisSession(){return this.eventSignup.getSignupEndTime()>new Date(0)}async maybeIdentifyUser(){window.matrixclient&&(this.anonymity===2&&(this.setRegistrationType(window.matrixclient.isGuest()||window.passwordlessUser?0:1),this.identificationPromise=this.identifyUser(Xi.getRandomAnalyticsId),await this.identificationPromise,this.userRegisteredInThisSession()&&this.eventSignup.track()),this.anonymity!==0&&this.updateSuperProperties())}trackEvent({eventName:t,...n},r){const i=()=>{this.anonymity==0||this.anonymity==1||this.capture(t,n,r)};this.identificationPromise?this.identificationPromise.then(i,o=>{U.error("Failed to identify user for tracking",o)}):i()}startListeningToSettingsChanges(){this.optInListener??=OM.value$.subscribe(t=>{this.setAnonymity(t?2:0),this.maybeIdentifyUser().catch(()=>U.log("Could not identify user"))})}setRegistrationType(t){this.registrationType=t,!(this.anonymity==0||this.anonymity==1)&&this.updateSuperProperties()}};Xi.ANALYTICS_EVENT_TYPE="im.vector.analytics",Xi.internalInstance=null;let Ke=Xi;const _b=f.createContext(void 0);_b.Provider;const uu=()=>f.use(_b);function uc(){let e,t;const n=uu();return n?.state==="valid"&&(e=n.authenticated?.client,t=n.setClient),{client:e,setClient:t}}function bb(){const e=uu();let t,n,r=!1,i=!0,o,s=!1,a;return e?.state==="valid"?(t=e.authenticated?.client,n=e.setClient,r=e.authenticated?.isPasswordlessUser??!1,i=!1,s=t!==void 0,a=e.authenticated?.logout):e?.state==="error"&&(o=e.error,i=!1),{client:t,setClient:n,passwordlessUser:r,loading:i,authenticated:s,logout:a,error:o}}const y9="BroadcastChannel"in window?new BroadcastChannel("load"):null,Yhe=({children:e})=>{const t=uo(),[n,r]=f.useState(void 0),i=f.useRef(!1);f.useEffect(()=>{i.current||(i.current=!0,Xhe().then(w=>{r(w),Ke.instance.isEnabled()&&Ke.instance.startListeningToSettingsChanges()}).catch(w=>U.error(w)).finally(()=>i.current=!1))},[]);const o=f.useCallback(async w=>{const S=zM();!n?.client||!S||(await n.client.setPassword({type:"m.login.password",identifier:{type:"m.id.user",user:S.user_id},user:S.user_id,password:S.tempPassword},w),_9({...S,passwordlessUser:!1}),r({...n,passwordlessUser:!1}))},[n]),s=f.useCallback((w,S)=>{const b=n?.client;b&&b!==w&&b.stopClient(),_9(S),r({widgetApi:null,client:w,passwordlessUser:S.passwordlessUser}),Ke.instance.isEnabled()&&Ke.instance.startListeningToSettingsChanges()},[n?.client]),a=f.useCallback(async()=>{const w=n?.client;w&&(await w.logout(!0),await w.clearStores(),WM(),r(null),await t("/"),Ke.instance.logout(),Ke.instance.setRegistrationType(sm.Guest))},[t,n?.client]);f.useEffect(()=>{Ae||y9?.postMessage({})},[]);const[c,l]=f.useState(void 0);kp(y9,"message",f.useCallback(()=>{n?.client.stopClient(),l(new Kue)},[n?.client,l]));const[u,d]=f.useState(!1),[p,g]=f.useState(!1),[v,m]=f.useState(!1),_=f.useMemo(()=>c?{state:"error",error:c}:n===void 0?void 0:{state:"valid",authenticated:n===null?void 0:{client:n.client,isPasswordlessUser:n.passwordlessUser,changePassword:o,logout:a},setClient:s,disconnected:u,supportedFeatures:{reactions:p,thumbnails:v}},[c,o,n,a,s,u,p,v]),y=f.useCallback((w,S,b)=>{d(Zhe(w,b))},[]);return f.useEffect(()=>{if(n){if(window.matrixclient=n.client,window.passwordlessUser=n.passwordlessUser,Ke.hasInstance()&&Ke.instance.onLoginStatusChanged(),n.client&&n.client.on(ei.Sync,y),n.widgetApi){m(!1);const w=n.widgetApi.hasCapability("org.matrix.msc2762.send.event:m.reaction"),S=n.widgetApi.hasCapability("org.matrix.msc2762.send.event:m.room.redaction"),b=n.widgetApi.hasCapability("org.matrix.msc2762.receive.event:m.reaction"),C=n.widgetApi.hasCapability("org.matrix.msc2762.receive.event:m.room.redaction");!w||!b||!S||!C?(U.warn("Widget does not support reactions"),g(!1)):g(!0)}else g(!0),m(!0);return()=>{n.client&&n.client.removeListener(ei.Sync,y)}}},[n,y]),c?h.jsx(Qd,{widget:Ae,error:c}):h.jsx(_b,{value:_,children:e})};async function Xhe(){if(Ae){U.log("Using a matryoshka client");const e=await Ae.client;return{widgetApi:Ae.api,client:e,passwordlessUser:!1}}else{const{initSPA:e}=await zp(async()=>{const{initSPA:t}=await import("./spa-VixZ7a3F.js");return{initSPA:t}},__vite__mapDeps([0,1]),import.meta.url);return e(zM,WM)}}const WM=()=>localStorage.removeItem("matrix-auth-store"),_9=e=>localStorage.setItem("matrix-auth-store",JSON.stringify(e)),zM=()=>{const e=localStorage.getItem("matrix-auth-store");if(e)return JSON.parse(e)},Zhe=(e,t)=>e==="ERROR"&&t?.error?.name==="ConnectionError";function Kf(e){const[{success:t,loading:n,displayName:r,avatarUrl:i,error:o},s]=f.useState(()=>{let c;return e&&(c=e.getUser(e.getUserId())??void 0),{success:!1,loading:!1,displayName:c?.rawDisplayName,avatarUrl:c?.avatarUrl,error:void 0}});f.useEffect(()=>{const c=(u,{displayName:d,avatarUrl:p})=>{s({success:!1,loading:!1,displayName:d,avatarUrl:p,error:void 0})};let l;if(e){const u=e.getUserId();l=e.getUser(u),l?.on(sh.DisplayName,c),l?.on(sh.AvatarUrl,c)}return()=>{l&&(l.removeListener(sh.DisplayName,c),l.removeListener(sh.AvatarUrl,c))}},[e]);const a=f.useCallback(async({displayName:c,avatar:l,removeAvatar:u})=>{if(e){s(d=>({...d,loading:!0,error:void 0,success:!1}));try{await e.setDisplayName(c);let d;u?await e.setAvatarUrl(""):l&&({content_uri:d}=await e.uploadContent(l),await e.setAvatarUrl(d)),s(p=>({...p,displayName:c,avatarUrl:u?void 0:d??p.avatarUrl,loading:!1,success:!0}))}catch(d){s(p=>({...p,loading:!1,error:d instanceof Error?d:Error(d),success:!1}))}}else U.error("Client not initialized before calling saveProfile")},[e]);return{loading:n,error:o,displayName:r,avatarUrl:i,saveProfile:a,success:t}}const Qhe="_settingsModal_1dkeq_8",Jhe="_volumeSlider_1dkeq_20",b9={settingsModal:Qhe,volumeSlider:Jhe},epe="_tabContainer_1nnp9_8",tpe="_tabList_1nnp9_14",w9={tabContainer:epe,tabList:tpe};function npe({label:e,tab:t,onTabChange:n,tabs:r}){const i=f.useId();return h.jsxs("div",{className:w9.tabContainer,children:[h.jsx(Ire,{role:"tablist","aria-label":e,className:w9.tabList,children:r.map(({key:o,name:s})=>h.jsx(Tre,{"aria-controls":`${i}[${o}]`,onClick:()=>n(o),active:o===t,children:s},o))}),r.map(({key:o,content:s})=>h.jsx("div",{id:`${i}[${o}]`,style:{display:o===t?void 0:"none"},children:s},o))]})}const rpe="_fieldRow_iwncy_8",ipe="_field_iwncy_8",ope="_rightAlign_iwncy_21",spe="_inputField_iwncy_33",ape="_disabled_iwncy_52",cpe="_prefix_iwncy_110",lpe="_checkboxField_iwncy_131",upe="_checkbox_iwncy_131",dpe="_description_iwncy_168",fpe="_errorMessage_iwncy_197",hpe="_noLabel_iwncy_210",Br={fieldRow:rpe,field:ipe,rightAlign:ope,inputField:spe,disabled:ape,prefix:cpe,checkboxField:lpe,checkbox:upe,description:dpe,errorMessage:fpe,noLabel:hpe},ppe=(e,t)=>f.createElement("svg",{fill:"none",height:24,stroke:"#000",strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,viewBox:"0 0 24 24",width:24,xmlns:"http://www.w3.org/2000/svg",ref:t,...e},f.createElement("path",{d:"m20 6-11 11-5-5"})),gpe=f.forwardRef(ppe);class YM extends Error{constructor(t,n){super(n(t,{lng:"en"})),this.translatedMessage=n(t)}}class mpe extends YM{}const S9=(e,t)=>new mpe(e,t);function je({children:e,rightAlign:t,className:n}){return h.jsx("div",{className:Z(Br.fieldRow,{[Br.rightAlign]:t},n),children:e})}function vpe({children:e,className:t}){return h.jsx("div",{className:Z(Br.field,t),children:e})}const wt=({ref:e,id:t,label:n,className:r,type:i,checked:o,prefix:s,suffix:a,description:c,disabled:l,min:u,...d})=>{const p=f.useId();return h.jsxs(vpe,{className:Z(i==="checkbox"?Br.checkboxField:Br.inputField,{[Br.prefix]:!!s,[Br.disabled]:l},r),children:[s&&h.jsx("span",{children:s}),i==="textarea"?h.jsx("textarea",{id:t,ref:e,disabled:l,"aria-describedby":p,...d}):h.jsx("input",{id:t,ref:e,type:i,checked:o,disabled:l,"aria-describedby":p,min:u,...d}),h.jsxs("label",{htmlFor:t,children:[i==="checkbox"&&h.jsx("div",{className:Br.checkbox,children:h.jsx(gpe,{})}),n]}),a&&h.jsx("span",{children:a}),c&&h.jsx("p",{id:p,className:n?Br.description:Z(Br.description,Br.noLabel),children:c})]})};wt.displayName="InputField";const sa=({error:e})=>h.jsx("p",{className:Br.errorMessage,children:e instanceof YM?e.translatedMessage:e.message}),ype="_avatarInputField_1ep5q_8",_pe="_avatar_1ep5q_8",bpe="_fileInput_1ep5q_17",wpe="_edit_1ep5q_21",Vh={avatarInputField:ype,avatar:_pe,fileInput:bpe,edit:wpe},XM=({id:e,label:t,className:n,avatarUrl:r,userId:i,displayName:o,onRemoveAvatar:s,...a})=>{const{t:c}=he(),[l,u]=f.useState(!1),[d,p]=f.useState(void 0),[g,v]=f.useState(!1),m=f.useRef(null);f.useEffect(()=>{const w=m.current,S=b=>{const C=b;C.target.files&&C.target.files.length>0?(p(URL.createObjectURL(C.target.files[0])),u(!1)):p(void 0)};return w.addEventListener("change",S),()=>{w?.removeEventListener("change",S)}});const _=f.useCallback(()=>{m.current.click()},[m]),y=f.useCallback(()=>{u(!0),s()},[s]);return h.jsxs("div",{className:Z(Vh.avatarInputField,n),children:[h.jsx(sc,{id:i,className:Vh.avatar,name:o,size:oc.XL,src:l?void 0:d||r}),h.jsx("input",{id:e,accept:"image/*",ref:m,type:"file",className:Vh.fileInput,role:"button","aria-label":t,...a}),h.jsx("div",{className:Vh.edit,children:(r||d)&&!l?h.jsxs(C_,{title:c("action.edit"),showTitle:!1,open:g,onOpenChange:v,trigger:h.jsx(De,{iconOnly:!0,Icon:H7,kind:"tertiary",size:"sm","aria-label":c("action.edit")}),children:[h.jsx(Ha,{Icon:Fie,label:c("action.upload_file"),onSelect:_}),h.jsx(Ha,{Icon:Rie,label:c("action.remove"),kind:"critical",onSelect:y})]}):h.jsx(De,{type:"button",iconOnly:!0,Icon:H7,kind:"tertiary",size:"sm","aria-label":c("action.edit"),onClick:_})})]})};XM.displayName="AvatarInputField";const Spe="_content_gj715_8",Cpe="_avatarFieldRow_gj715_15",C9={content:Spe,avatarFieldRow:Cpe},Epe=({client:e})=>{const{t}=he(),{error:n,displayName:r,avatarUrl:i,saveProfile:o}=Kf(e),s=f.useMemo(()=>e.getUserId(),[e]),a=f.useRef(null),c=f.useRef(!1),l=f.useCallback(()=>{c.current=!0},[]),u=f.useRef(!1),d=f.useCallback(()=>{u.current=!0,c.current=!0},[]);return f.useEffect(()=>{const p=a.current;return()=>{if(c.current){const g=new FormData(p),v=g.get("displayName"),m=g.get("avatar"),_=typeof m=="string"?m.length:m?.size??0,y=typeof v=="string"?v:v?.name??null;if(!y)return;o({displayName:y,avatar:m&&_>0?m:void 0,removeAvatar:u.current&&(!m||_===0)}).catch(w=>{U.error("Failed to save profile",w)})}}},[o]),h.jsxs("form",{onChange:l,ref:a,className:C9.content,children:[h.jsx(je,{className:C9.avatarFieldRow,children:s&&r&&h.jsx(XM,{id:"avatar",name:"avatar",label:t("common.avatar"),avatarUrl:i,userId:s,displayName:r,onRemoveAvatar:d})}),h.jsx(je,{children:h.jsx(wt,{id:"userId",name:"userId",label:t("common.username"),type:"text",disabled:!0,value:e.getUserId()})}),h.jsx(je,{children:h.jsx(wt,{id:"displayName",name:"displayName",label:t("common.display_name"),type:"text",required:!0,autoComplete:"off",placeholder:t("common.display_name"),defaultValue:r,"data-testid":"profile_displayname"})}),n&&h.jsx(je,{children:h.jsx(sa,{error:n})})]})},xpe="_feedback_19yh9_8",ZM={feedback:xpe},QM=()=>h.jsxs(lr,{i18nKey:"analytics_notice",children:["By participating in this beta, you consent to the collection of anonymous data, which we use to improve the product. You can find more information about which data we track in our"," ",h.jsx(ka,{href:"https://element.io/privacy",children:"Privacy Policy"})," ","and our"," ",h.jsx(ka,{href:"https://element.io/cookie-policy",children:"Cookie Policy"}),"."]}),Ipe=({roomId:e})=>{const{t}=he(),{submitRageshake:n,sending:r,sent:i,error:o,available:s}=Qg(),a=Rle(),c=f.useCallback(d=>{d.preventDefault();const p=new FormData(d.target),g=p.get("description"),v=typeof g=="string"?g:"",m=!!p.get("sendLogs"),_=vf(16);n({description:v,sendLogs:m,rageshakeRequestId:_,roomId:e}).catch(y=>{U.error("Failed to send feedback rageshake",y)}),e&&m&&a(e,_)},[n,e,a]);om();const l=null,u=s?h.jsxs(h.Fragment,{children:[h.jsx("h4",{children:t("settings.feedback_tab_h4")}),h.jsx(Ye,{children:t("settings.feedback_tab_body")}),h.jsxs("form",{onSubmit:c,children:[h.jsx(je,{children:h.jsx(wt,{className:ZM.feedback,id:"description",name:"description",label:t("settings.feedback_tab_description_label"),placeholder:t("settings.feedback_tab_description_label"),type:"textarea",disabled:r||i})}),!i&&h.jsxs(je,{children:[h.jsx(wt,{id:"sendLogs",name:"sendLogs",label:t("settings.feedback_tab_send_logs_label"),type:"checkbox",defaultChecked:!0}),h.jsx(De,{type:"submit",disabled:r,children:t(r?"submitting":"action.submit")})]}),h.jsxs(je,{children:[o&&h.jsx(sa,{error:o}),i&&h.jsx(Ye,{children:t("settings.feedback_tab_thank_you")})]})]})]}):null;return h.jsxs("div",{children:[l,u]})};var Np={exports:{}},Rpe=Np.exports,E9;function Lpe(){return E9||(E9=1,(function(e){(function(t,n){e.exports?e.exports=n():t.log=n()})(Rpe,function(){var t=function(){},n="undefined",r=typeof window!==n&&typeof window.navigator!==n&&/Trident\/|MSIE /.test(window.navigator.userAgent),i=["trace","debug","info","warn","error"],o={},s=null;function a(m,_){var y=m[_];if(typeof y.bind=="function")return y.bind(m);try{return Function.prototype.bind.call(y,m)}catch{return function(){return Function.prototype.apply.apply(y,[m,arguments])}}}function c(){console.log&&(console.log.apply?console.log.apply(console,arguments):Function.prototype.apply.apply(console.log,[console,arguments])),console.trace&&console.trace()}function l(m){return m==="debug"&&(m="log"),typeof console===n?!1:m==="trace"&&r?c:console[m]!==void 0?a(console,m):console.log!==void 0?a(console,"log"):t}function u(){for(var m=this.getLevel(),_=0;_<i.length;_++){var y=i[_];this[y]=_<m?t:this.methodFactory(y,m,this.name)}if(this.log=this.debug,typeof console===n&&m<this.levels.SILENT)return"No console available for logging"}function d(m){return function(){typeof console!==n&&(u.call(this),this[m].apply(this,arguments))}}function p(m,_,y){return l(m)||d.apply(this,arguments)}function g(m,_){var y=this,w,S,b,C="loglevel";typeof m=="string"?C+=":"+m:typeof m=="symbol"&&(C=void 0);function E(k){var A=(i[k]||"silent").toUpperCase();if(!(typeof window===n||!C)){try{window.localStorage[C]=A;return}catch{}try{window.document.cookie=encodeURIComponent(C)+"="+A+";"}catch{}}}function x(){var k;if(!(typeof window===n||!C)){try{k=window.localStorage[C]}catch{}if(typeof k===n)try{var A=window.document.cookie,P=encodeURIComponent(C),O=A.indexOf(P+"=");O!==-1&&(k=/^([^;]+)/.exec(A.slice(O+P.length+1))[1])}catch{}return y.levels[k]===void 0&&(k=void 0),k}}function I(){if(!(typeof window===n||!C)){try{window.localStorage.removeItem(C)}catch{}try{window.document.cookie=encodeURIComponent(C)+"=; expires=Thu, 01 Jan 1970 00:00:00 UTC"}catch{}}}function L(k){var A=k;if(typeof A=="string"&&y.levels[A.toUpperCase()]!==void 0&&(A=y.levels[A.toUpperCase()]),typeof A=="number"&&A>=0&&A<=y.levels.SILENT)return A;throw new TypeError("log.setLevel() called with invalid level: "+k)}y.name=m,y.levels={TRACE:0,DEBUG:1,INFO:2,WARN:3,ERROR:4,SILENT:5},y.methodFactory=_||p,y.getLevel=function(){return b??S??w},y.setLevel=function(k,A){return b=L(k),A!==!1&&E(b),u.call(y)},y.setDefaultLevel=function(k){S=L(k),x()||y.setLevel(k,!1)},y.resetLevel=function(){b=null,I(),u.call(y)},y.enableAll=function(k){y.setLevel(y.levels.TRACE,k)},y.disableAll=function(k){y.setLevel(y.levels.SILENT,k)},y.rebuild=function(){if(s!==y&&(w=L(s.getLevel())),u.call(y),s===y)for(var k in o)o[k].rebuild()},w=L(s?s.getLevel():"WARN");var R=x();R!=null&&(b=L(R)),u.call(y)}s=new g,s.getLogger=function(_){if(typeof _!="symbol"&&typeof _!="string"||_==="")throw new TypeError("You must supply a name when creating a logger.");var y=o[_];return y||(y=o[_]=new g(_,s.methodFactory)),y};var v=typeof window!==n?window.log:void 0;return s.noConflict=function(){return typeof window!==n&&window.log===s&&(window.log=v),s},s.getLoggers=function(){return o},s.default=s,s})})(Np)),Np.exports}var kpe=Lpe();const Tpe=Gl(kpe);var Ape=(e,t,n)=>new Promise((r,i)=>{var o=c=>{try{a(n.next(c))}catch(l){i(l)}},s=c=>{try{a(n.throw(c))}catch(l){i(l)}},a=c=>c.done?r(c.value):Promise.resolve(c.value).then(o,s);a((n=n.apply(e,t)).next())});function Ppe(e){return typeof e>"u"?!1:Mpe(e)||Npe(e)}function Mpe(e){var t;return e?e.hasOwnProperty("participant")&&e.hasOwnProperty("source")&&e.hasOwnProperty("track")&&typeof((t=e.publication)==null?void 0:t.track)<"u":!1}function Npe(e){return e?e.hasOwnProperty("participant")&&e.hasOwnProperty("source")&&e.hasOwnProperty("publication")&&typeof e.publication<"u":!1}function $pe(e){return e?e.hasOwnProperty("participant")&&e.hasOwnProperty("source")&&typeof e.publication>"u":!1}function Ope(e){if(typeof e=="string"||typeof e=="number")return`${e}`;if($pe(e))return`${e.participant.identity}_${e.source}_placeholder`;if(Ppe(e))return`${e.participant.identity}_${e.publication.source}_${e.publication.trackSid}`;throw new Error(`Can't generate a id for the given track reference: ${e}`)}var jpe=[ht.ConnectionStateChanged,ht.RoomMetadataChanged,ht.ActiveSpeakersChanged,ht.ConnectionQualityChanged,ht.ParticipantConnected,ht.ParticipantDisconnected,ht.ParticipantPermissionsChanged,ht.ParticipantMetadataChanged,ht.ParticipantNameChanged,ht.ParticipantAttributesChanged,ht.TrackMuted,ht.TrackUnmuted,ht.TrackPublished,ht.TrackUnpublished,ht.TrackStreamStateChanged,ht.TrackSubscriptionFailed,ht.TrackSubscriptionPermissionChanged,ht.TrackSubscriptionStatusChanged],Dpe=[...jpe,ht.LocalTrackPublished,ht.LocalTrackUnpublished];Te.TrackPublished,Te.TrackUnpublished,Te.TrackMuted,Te.TrackUnmuted,Te.TrackStreamStateChanged,Te.TrackSubscribed,Te.TrackUnsubscribed,Te.TrackSubscriptionPermissionChanged,Te.TrackSubscriptionFailed,Te.LocalTrackPublished,Te.LocalTrackUnpublished;var Fpe=[Te.ConnectionQualityChanged,Te.IsSpeakingChanged,Te.ParticipantMetadataChanged,Te.ParticipantPermissionsChanged,Te.TrackMuted,Te.TrackUnmuted,Te.TrackPublished,Te.TrackUnpublished,Te.TrackStreamStateChanged,Te.TrackSubscriptionFailed,Te.TrackSubscriptionPermissionChanged,Te.TrackSubscriptionStatusChanged];[...Fpe,Te.LocalTrackPublished,Te.LocalTrackUnpublished];var Hpe=Tpe.getLogger("lk-components-js");Hpe.setDefaultLevel("WARN");function Upe(e,...t){return new Ct(r=>{const i=()=>{r.next(e)};return t.forEach(s=>{e.on(s,i)}),()=>{t.forEach(s=>{e.off(s,i)})}}).pipe(lt(e))}function JM(e,t){return new Ct(r=>{const i=(...s)=>{r.next(s)};return e.on(t,i),()=>{e.off(t,i)}})}function Bpe(e){return JM(e,ht.ConnectionStateChanged).pipe(V(([t])=>t),lt(e.state))}function x9(e,t,n=!0){const r=new Ct(o=>{Yp.getLocalDevices(e,n).then(s=>{o.next(s),o.complete()}).catch(s=>{t?.(s),o.next([]),o.complete()})}),i=new Ct(o=>{var s;const a=()=>Ape(this,null,function*(){try{const c=yield Yp.getLocalDevices(e,n);o.next(c)}catch(c){t?.(c)}});if(typeof window<"u"){if(!window.isSecureContext)throw new Error("Accessing media devices is available only in secure contexts (HTTPS and localhost), in some or all supporting browsers. See: https://developer.mozilla.org/en-US/docs/Web/API/Navigator/mediaDevices");(s=navigator?.mediaDevices)==null||s.addEventListener("devicechange",a)}return()=>{var c;(c=navigator?.mediaDevices)==null||c.removeEventListener("devicechange",a)}});return Tl(r,i)}function am(e,...t){return new Ct(r=>{const i=()=>{r.next(e)};return t.forEach(s=>{e.on(s,i)}),()=>{t.forEach(s=>{e.off(s,i)})}}).pipe(lt(e))}function eN(e){return am(e,Te.TrackMuted,Te.TrackUnmuted,Te.ParticipantPermissionsChanged,Te.TrackPublished,Te.TrackUnpublished,Te.LocalTrackPublished,Te.LocalTrackUnpublished,Te.MediaDevicesError,Te.TrackSubscriptionStatusChanged).pipe(V(n=>{const{isMicrophoneEnabled:r,isCameraEnabled:i,isScreenShareEnabled:o}=n,s=n.getTrackPublication(Ve.Source.Microphone),a=n.getTrackPublication(Ve.Source.Camera);return{isCameraEnabled:i,isMicrophoneEnabled:r,isScreenShareEnabled:o,cameraTrack:a,microphoneTrack:s,participant:n}}))}function Vpe(e,t={}){var n;let r;const i=new Ct(c=>(r=c,()=>a.unsubscribe())).pipe(lt(Array.from(e.remoteParticipants.values()))),o=(n=t.additionalRoomEvents)!=null?n:Dpe,s=Array.from(new Set([ht.ParticipantConnected,ht.ParticipantDisconnected,ht.ConnectionStateChanged,...o])),a=Upe(e,...s).subscribe(c=>r?.next(Array.from(c.remoteParticipants.values())));return e.remoteParticipants.size>0&&r?.next(Array.from(e.remoteParticipants.values())),i}const Vc=new Ht,tN=new Ht,nN=new Ht,c3=new Ht;let I9=!1;const rN=()=>{I9||(I9=!0,window.controls.onAudioPlaybackStarted?.())};window.controls={canEnterPip(){return Vc.observed},enablePip(){if(!Vc.observed)throw new Error("No call is running");Vc.next(!0)},disablePip(){if(!Vc.observed)throw new Error("No call is running");Vc.next(!1)},setAvailableAudioDevices(e){U.info("setAvailableAudioDevices called from native:",e),tN.next(e)},setAudioDevice(e){U.info("setAudioDevice called from native",e),nN.next(e)},setAudioEnabled(e){if(U.info("setAudioEnabled called from native:",e),!c3.observed)throw new Error("Output controls are disabled. No setAudioEnabled$ observer");c3.next(e)},setOutputEnabled(e){this.setAudioEnabled(e)},setAvailableOutputDevices(e){this.setAvailableAudioDevices(e)},setOutputDevice(e){this.setAudioDevice(e)}};const Pc=Symbol("nothing");class Wf{constructor(){this.ended$=new Pt(!1),this.bindImpl=NM(this.ended$.pipe(zt(t=>t))),this.shareImpl=qhe({resetOnError:!1,resetOnComplete:!1,resetOnRefCountZero:!1}),this.share=t=>t.pipe(this.bindImpl,this.shareImpl)}bind(){return this.bindImpl}behavior(t,n=Pc){const r=new Pt(n);if(t.pipe(this.bind(),ar()).subscribe({next(i){r.next(i)},error(i){r.error(i)}}),r.value===Pc)throw new Error("Behavior failed to synchronously emit an initial value");return r}end(){this.ended$.next(!0)}onEnd(t){this.ended$.pipe(zt(n=>n),mb(1)).subscribe(t)}reconcile(t,n){let r=Pc,i,o,s=Pc;const a=async()=>{for(;r!==s;)await o?.(),s=r,r!==Pc&&(o=await n(r))};t.pipe(im(()=>hb),this.bind(),PM(Pc)).subscribe(c=>{r=c,!i&&(i=a().finally(()=>{i=void 0}))})}splitBehavior(t){return Object.fromEntries(Object.keys(t.value).map(n=>[`${n}$`,this.behavior(t.pipe(V(r=>r[n])))]))}}const iN=new Wf;class Ti{constructor(t,n){this.value=t,this.epoch=n??0}mapInner(t){return new Ti(t(this.value),this.epoch)}}function l3(e){return V(t=>t.mapInner(e))}function qpe(){return V((e,t)=>new Ti(e,t))}const B1=Symbol("nothing");function Gpe(e){return t=>xhe(()=>{let n=B1;return t.pipe(Ta(r=>n=r),Vhe(()=>{n!==B1&&e(n)}))})}function oN(e,t){return n=>n.pipe(To(t,e),lt(e))}const R9=Symbol("switch");function Kpe(e,t){return n=>Tl(n.pipe(V((r,i)=>e(r,i)?R9:r),Whe(r=>r!==R9)),t)}function Wpe(e){let t=B1;if(e.subscribe(n=>t=n).unsubscribe(),t===B1)throw new Error("Not a state Observable");return t}function sN(...e){return ge(e,(...t)=>t.every(n=>n))}function L9(e){return t=>t.pipe($M(e),AM(([,n])=>n?e.pipe(zt(r=>!r)):Ce(null)),V(([n])=>n))}function aN(e,t,n){return lN(e,t,n,r=>r)}function cN(e,t,n){return lN(e,function*(r){yield*t(r.value)},n,(r,i)=>new Ti(r,i.epoch))}function zpe(e){return t=>t.pipe(To((n,r)=>{if(e(r)){const i=n??new Pt(r);return i.next(r),i}return null},null),ar())}function lN(e,t,n,r){return i=>i.pipe(To(({map:o,items:s},a)=>{const c=new Map,l=new Set;for(const{keys:u,data:d}of t(a)){let p=o;for(const _ of u)p=p?.get(_);let g=p;if(g===void 0){const _=new Wf,y=new Pt(d);U.debug(`[${e}] Creating item with keys ${u.join(", ")}`),g={scope:_,keys:u,data$:y,item:n(_,y,...u)}}else g.data$.next(d);let v=c;for(let _=0;_<u.length-1;_++){let y=v.get(u[_]);y===void 0&&(y=new Map,v.set(u[_],y)),v=y}const m=u[u.length-1];if(v.has(m))throw new Error(`Keys must be unique (tried to generate multiple items for key ${u.join(", ")})`);v.set(u[u.length-1],g),l.add(g)}for(const u of s)l.has(u)||(U.debug(`[${e}] Destroying item with keys ${u.keys.join(", ")}`),u.scope.end());return{map:c,items:l,input:a}},{map:new Map,items:new Set}),Gpe(({items:o})=>{U.debug(`[${e}] End of scope, destroying all ${o.size} itemsâ€¦`);for(const s of o)U.debug(`[${e}] Destroying item with keys ${s.keys.join(", ")}`),s.scope.end()}),V(({items:o,input:s})=>r([...o].map(({item:a})=>a),s)))}function cm(e){return new Pt(e)}const k9="earpiece-id",uN=Pi==="ios"?cm(!0):qM.value$;function lm(e,t,n,r){const i=a=>r.error("Error creating MediaDeviceObserver",a),o=x9(e,i,!1),s=x9(e,i,!0);return n.behavior(t.pipe(Ee(a=>a?o.pipe(Kpe((c,l)=>l===0&&c.every(u=>!u.label),s)):o)),[])}function wb(e){return new Map(e.map((t,n)=>[t.deviceId,t.label?{type:"name",name:t.label}:{type:"number",number:n+1}]))}function Sb(e,t){return ge([e,t],(n,r)=>{if(n.size)return r!==void 0&&n.has(r)||n.size===1&&n.has("")?r:n.keys().next().value})}class Ype{constructor(t,n){this.usingNames$=t,this.scope=n,this.logger=U.getChild("[MediaDevices AudioInput]"),this.availableRaw$=lm("audioinput",this.usingNames$,this.scope,this.logger),this.available$=this.scope.behavior(this.availableRaw$.pipe(V(wb))),this.selected$=this.scope.behavior(Sb(this.available$,p9.value$).pipe(V(r=>r===void 0?void 0:{id:r,hardwareDeviceChange$:this.availableRaw$.pipe(V(i=>i.find(o=>o.deviceId===r)?.groupId),Al(),zt(([i,o])=>i!==o),V(()=>{}))}))),this.available$.subscribe(r=>{this.logger.info("[audio-input] available devices:",r)})}select(t){p9.setValue(t)}}class Xpe{constructor(t,n){this.usingNames$=t,this.scope=n,this.logger=U.getChild("[MediaDevices AudioOutput]"),this.available$=this.scope.behavior(lm("audiooutput",this.usingNames$,this.scope,this.logger).pipe(V(r=>{let i=wb(r);return i.size&&!i.has("")&&!i.has("default")&&i.set("",{type:"default",name:r[0]?.label||null}),window.GestureEvent&&(i=new Map),i}))),this.selected$=this.scope.behavior(Sb(this.available$,g9.value$).pipe(V(r=>r===void 0?void 0:{id:r,virtualEarpiece:!1}))),this.available$.subscribe(r=>{this.logger.info("[audio-output] available devices:",r)})}select(t){g9.setValue(t)}}class Zpe{constructor(t,n){this.usingNames$=t,this.scope=n,this.logger=U.getChild("[MediaDevices ControlledAudioOutput]"),this.availableRaw$=lm("audiooutput",this.usingNames$,this.scope,this.logger),this.available$=this.scope.behavior(ge([tN.pipe(lt([])),uN],(r,i)=>{const o=new Map(r.map(({id:s,name:a,isEarpiece:c,isSpeaker:l})=>{let u;return c?u={type:"earpiece"}:l?u={type:"speaker"}:u={type:"name",name:a},[s,u]}));return i&&r.some(s=>s.forEarpiece)&&o.set(k9,{type:"earpiece"}),o})),this.deviceSelection$=new Ht,this.selected$=this.scope.behavior(ge([this.available$,Vo(nN.pipe(lt(void 0)),this.deviceSelection$)],(r,i)=>{const o=i??r.keys().next().value;return o===void 0?void 0:{id:o,virtualEarpiece:o===k9}})),this.selected$.subscribe(r=>{r!==void 0&&(this.logger.info("[controlled-output] onAudioDeviceSelect called:",r),window.controls.onAudioDeviceSelect?.(r.id),window.controls.onOutputDeviceSelect?.(r.id))}),this.available$.subscribe(r=>{this.logger.info("[controlled-output] available devices:",r)}),this.availableRaw$.subscribe(r=>{this.logger.info("[controlled-output] available raw devices:",r)})}select(t){this.deviceSelection$.next(t)}}class Qpe{constructor(t,n){this.usingNames$=t,this.scope=n,this.logger=U.getChild("[MediaDevices VideoInput]"),this.available$=this.scope.behavior(lm("videoinput",this.usingNames$,this.scope,this.logger).pipe(V(wb))),this.selected$=this.scope.behavior(Sb(this.available$,m9.value$).pipe(V(r=>r===void 0?void 0:{id:r}))),this.available$.subscribe(r=>{this.logger.info("[video-input] available devices:",r)})}select(t){m9.setValue(t)}}class Jpe{constructor(t){this.scope=t,this.deviceNamesRequest$=new Ht,this.usingNames$=this.scope.behavior(this.deviceNamesRequest$.pipe(V(()=>!0)),!1),this.audioInput=new Ype(this.usingNames$,this.scope),this.audioOutput=kt().controlledAudioDevices?new Zpe(this.usingNames$,this.scope):new Xpe(this.usingNames$,this.scope),this.videoInput=new Qpe(this.usingNames$,this.scope)}requestDeviceNames(){this.deviceNamesRequest$.next()}}function e1e(e,t,n){if(!n)return f.useState(t)[0];const[r]=f.useState(()=>new Pt(n)),[i]=f.useState(()=>t(r)),o=f.useRef(!0);return e(()=>{if(o.current){o.current=!1;return}r.next(n)},n),i}function dN(e,t){return e1e(f.useEffect,e,t)}var t1e=e=>e+1|0,n1e=()=>{const e=f.useState(0)[1];return f.useRef(()=>e(t1e)).current},r1e=typeof window>"u"?f.useEffect:f.useLayoutEffect;function dr(e){const t=n1e(),n=f.useRef(e),r=f.useRef(),i=f.useRef(!1),o=f.useRef(!1),[s,a]=f.useState(()=>{let c;return e.subscribe({next:l=>{o.current=!0,c=l},error:l=>{r.current=l}}).unsubscribe(),c});if(r1e(()=>{n.current=e}),f.useEffect(()=>{r.current=null;const c=n.current;let l=s;const u=c.subscribe({next:d=>{c===n.current&&(i.current?a(()=>d):l=d)},error:d=>{c===n.current&&(r.current=d,t())}});return i.current||l!==s&&a(()=>l),i.current=!0,()=>{u.unsubscribe()}},[e]),r.current)throw r.current;if(o.current)return f.useDebugValue(s),s;throw new Error("Observable did not synchronously emit a value.")}function i1e(e){const[t]=f.useState(()=>new Pt(e)),[n]=f.useState(()=>({get current(){return t.value},set current(r){t.next(r)}}));return[n,t]}const fN=f.createContext(void 0);function dc(){const e=f.use(fN);if(e===void 0)throw new Error("useMediaDevices must be used within a MediaDevices context provider");return e}const hN=()=>{const e=dc(),n=dr(e.audioOutput.selected$)?.virtualEarpiece??!1;return{pan:f.useMemo(()=>n?1:0,[n]),volume:f.useMemo(()=>n?.1:1,[n])}},o1e=()=>{const{t:e}=he(),[t,n]=qt(HM),[r,i]=qt(UM),[o,s]=qt(yb),a=(u,d)=>{d(u.target.checked)},[c,l]=qt(jM);return h.jsxs("div",{children:[h.jsx(Ye,{children:e("settings.preferences_tab.introduction")}),h.jsx(je,{children:h.jsx(wt,{id:"showHandRaisedTimer",label:e("settings.preferences_tab.show_hand_raised_timer_label"),description:e("settings.preferences_tab.show_hand_raised_timer_description"),type:"checkbox",checked:t,onChange:u=>a(u,n)})}),h.jsx(je,{children:h.jsx(wt,{id:"showReactions",label:e("settings.preferences_tab.reactions_show_label"),description:e("settings.preferences_tab.reactions_show_description"),type:"checkbox",checked:r,onChange:u=>a(u,i)})}),h.jsx(je,{children:h.jsx(wt,{id:"playReactionSound",label:e("settings.preferences_tab.reactions_play_sound_label"),description:e("settings.preferences_tab.reactions_play_sound_description"),type:"checkbox",checked:o,onChange:u=>a(u,s)})}),h.jsx(je,{children:h.jsx(wt,{id:"developerSettingsTab",type:"checkbox",checked:c,label:e("settings.preferences_tab.developer_mode_label"),description:e("settings.preferences_tab.developer_mode_label_description"),onChange:u=>l(u.target.checked)})})]})};function pN(e,[t,n]){return Math.min(n,Math.max(t,e))}function s1e(e){const t=f.useRef({value:e,previous:e});return f.useMemo(()=>(t.current.value!==e&&(t.current.previous=t.current.value,t.current.value=e),t.current.previous),[e])}var a1e=["a","button","div","form","h2","h3","img","input","label","li","nav","ol","p","select","span","svg","ul"],zf=a1e.reduce((e,t)=>{const n=pr(`Primitive.${t}`),r=f.forwardRef((i,o)=>{const{asChild:s,...a}=i,c=s?n:t;return typeof window<"u"&&(window[Symbol.for("radix-ui")]=!0),h.jsx(c,{...a,ref:o})});return r.displayName=`Primitive.${t}`,{...e,[t]:r}},{}),gN=["PageUp","PageDown"],mN=["ArrowUp","ArrowDown","ArrowLeft","ArrowRight"],vN={"from-left":["Home","PageDown","ArrowDown","ArrowLeft"],"from-right":["Home","PageDown","ArrowDown","ArrowRight"],"from-bottom":["Home","PageDown","ArrowDown","ArrowLeft"],"from-top":["Home","PageDown","ArrowUp","ArrowLeft"]},du="Slider",[u3,c1e,l1e]=P4(du),[yN,A6e]=ec(du,[l1e]),[u1e,um]=yN(du),_N=f.forwardRef((e,t)=>{const{name:n,min:r=0,max:i=100,step:o=1,orientation:s="horizontal",disabled:a=!1,minStepsBetweenThumbs:c=0,defaultValue:l=[r],value:u,onValueChange:d=()=>{},onValueCommit:p=()=>{},inverted:g=!1,form:v,...m}=e,_=f.useRef(new Set),y=f.useRef(0),S=s==="horizontal"?d1e:f1e,[b=[],C]=F4({prop:u,defaultProp:l,onChange:k=>{[..._.current][y.current]?.focus(),d(k)}}),E=f.useRef(b);function x(k){const A=v1e(b,k);R(k,A)}function I(k){R(k,y.current)}function L(){const k=E.current[y.current];b[y.current]!==k&&p(b)}function R(k,A,{commit:P}={commit:!1}){const O=w1e(o),j=S1e(Math.round((k-r)/o)*o+r,O),$=pN(j,[r,i]);C((T=[])=>{const N=g1e(T,$,A);if(b1e(N,c*o)){y.current=N.indexOf($);const M=String(N)!==String(T);return M&&P&&p(N),M?N:T}else return T})}return h.jsx(u1e,{scope:e.__scopeSlider,name:n,disabled:a,min:r,max:i,valueIndexToChangeRef:y,thumbs:_.current,values:b,orientation:s,form:v,children:h.jsx(u3.Provider,{scope:e.__scopeSlider,children:h.jsx(u3.Slot,{scope:e.__scopeSlider,children:h.jsx(S,{"aria-disabled":a,"data-disabled":a?"":void 0,...m,ref:t,onPointerDown:Ie(m.onPointerDown,()=>{a||(E.current=b)}),min:r,max:i,inverted:g,onSlideStart:a?void 0:x,onSlideMove:a?void 0:I,onSlideEnd:a?void 0:L,onHomeKeyDown:()=>!a&&R(r,0,{commit:!0}),onEndKeyDown:()=>!a&&R(i,b.length-1,{commit:!0}),onStepKeyDown:({event:k,direction:A})=>{if(!a){const j=gN.includes(k.key)||k.shiftKey&&mN.includes(k.key)?10:1,$=y.current,T=b[$],N=o*j*A;R(T+N,$,{commit:!0})}}})})})})});_N.displayName=du;var[bN,wN]=yN(du,{startEdge:"left",endEdge:"right",size:"width",direction:1}),d1e=f.forwardRef((e,t)=>{const{min:n,max:r,dir:i,inverted:o,onSlideStart:s,onSlideMove:a,onSlideEnd:c,onStepKeyDown:l,...u}=e,[d,p]=f.useState(null),g=Ot(t,S=>p(S)),v=f.useRef(void 0),m=M4(i),_=m==="ltr",y=_&&!o||!_&&o;function w(S){const b=v.current||d.getBoundingClientRect(),C=[0,b.width],x=Cb(C,y?[n,r]:[r,n]);return v.current=b,x(S-b.left)}return h.jsx(bN,{scope:e.__scopeSlider,startEdge:y?"left":"right",endEdge:y?"right":"left",direction:y?1:-1,size:"width",children:h.jsx(SN,{dir:m,"data-orientation":"horizontal",...u,ref:g,style:{...u.style,"--radix-slider-thumb-transform":"translateX(-50%)"},onSlideStart:S=>{const b=w(S.clientX);s?.(b)},onSlideMove:S=>{const b=w(S.clientX);a?.(b)},onSlideEnd:()=>{v.current=void 0,c?.()},onStepKeyDown:S=>{const C=vN[y?"from-left":"from-right"].includes(S.key);l?.({event:S,direction:C?-1:1})}})})}),f1e=f.forwardRef((e,t)=>{const{min:n,max:r,inverted:i,onSlideStart:o,onSlideMove:s,onSlideEnd:a,onStepKeyDown:c,...l}=e,u=f.useRef(null),d=Ot(t,u),p=f.useRef(void 0),g=!i;function v(m){const _=p.current||u.current.getBoundingClientRect(),y=[0,_.height],S=Cb(y,g?[r,n]:[n,r]);return p.current=_,S(m-_.top)}return h.jsx(bN,{scope:e.__scopeSlider,startEdge:g?"bottom":"top",endEdge:g?"top":"bottom",size:"height",direction:g?1:-1,children:h.jsx(SN,{"data-orientation":"vertical",...l,ref:d,style:{...l.style,"--radix-slider-thumb-transform":"translateY(50%)"},onSlideStart:m=>{const _=v(m.clientY);o?.(_)},onSlideMove:m=>{const _=v(m.clientY);s?.(_)},onSlideEnd:()=>{p.current=void 0,a?.()},onStepKeyDown:m=>{const y=vN[g?"from-bottom":"from-top"].includes(m.key);c?.({event:m,direction:y?-1:1})}})})}),SN=f.forwardRef((e,t)=>{const{__scopeSlider:n,onSlideStart:r,onSlideMove:i,onSlideEnd:o,onHomeKeyDown:s,onEndKeyDown:a,onStepKeyDown:c,...l}=e,u=um(du,n);return h.jsx(zf.span,{...l,ref:t,onKeyDown:Ie(e.onKeyDown,d=>{d.key==="Home"?(s(d),d.preventDefault()):d.key==="End"?(a(d),d.preventDefault()):gN.concat(mN).includes(d.key)&&(c(d),d.preventDefault())}),onPointerDown:Ie(e.onPointerDown,d=>{const p=d.target;p.setPointerCapture(d.pointerId),d.preventDefault(),u.thumbs.has(p)?p.focus():r(d)}),onPointerMove:Ie(e.onPointerMove,d=>{d.target.hasPointerCapture(d.pointerId)&&i(d)}),onPointerUp:Ie(e.onPointerUp,d=>{const p=d.target;p.hasPointerCapture(d.pointerId)&&(p.releasePointerCapture(d.pointerId),o(d))})})}),CN="SliderTrack",EN=f.forwardRef((e,t)=>{const{__scopeSlider:n,...r}=e,i=um(CN,n);return h.jsx(zf.span,{"data-disabled":i.disabled?"":void 0,"data-orientation":i.orientation,...r,ref:t})});EN.displayName=CN;var d3="SliderRange",xN=f.forwardRef((e,t)=>{const{__scopeSlider:n,...r}=e,i=um(d3,n),o=wN(d3,n),s=f.useRef(null),a=Ot(t,s),c=i.values.length,l=i.values.map(p=>LN(p,i.min,i.max)),u=c>1?Math.min(...l):0,d=100-Math.max(...l);return h.jsx(zf.span,{"data-orientation":i.orientation,"data-disabled":i.disabled?"":void 0,...r,ref:a,style:{...e.style,[o.startEdge]:u+"%",[o.endEdge]:d+"%"}})});xN.displayName=d3;var f3="SliderThumb",IN=f.forwardRef((e,t)=>{const n=c1e(e.__scopeSlider),[r,i]=f.useState(null),o=Ot(t,a=>i(a)),s=f.useMemo(()=>r?n().findIndex(a=>a.ref.current===r):-1,[n,r]);return h.jsx(h1e,{...e,ref:o,index:s})}),h1e=f.forwardRef((e,t)=>{const{__scopeSlider:n,index:r,name:i,...o}=e,s=um(f3,n),a=wN(f3,n),[c,l]=f.useState(null),u=Ot(t,w=>l(w)),d=c?s.form||!!c.closest("form"):!0,p=vR(c),g=s.values[r],v=g===void 0?0:LN(g,s.min,s.max),m=m1e(r,s.values.length),_=p?.[a.size],y=_?y1e(_,v,a.direction):0;return f.useEffect(()=>{if(c)return s.thumbs.add(c),()=>{s.thumbs.delete(c)}},[c,s.thumbs]),h.jsxs("span",{style:{transform:"var(--radix-slider-thumb-transform)",position:"absolute",[a.startEdge]:`calc(${v}% + ${y}px)`},children:[h.jsx(u3.ItemSlot,{scope:e.__scopeSlider,children:h.jsx(zf.span,{role:"slider","aria-label":e["aria-label"]||m,"aria-valuemin":s.min,"aria-valuenow":g,"aria-valuemax":s.max,"aria-orientation":s.orientation,"data-orientation":s.orientation,"data-disabled":s.disabled?"":void 0,tabIndex:s.disabled?void 0:0,...o,ref:u,style:g===void 0?{display:"none"}:e.style,onFocus:Ie(e.onFocus,()=>{s.valueIndexToChangeRef.current=r})})}),d&&h.jsx(RN,{name:i??(s.name?s.name+(s.values.length>1?"[]":""):void 0),form:s.form,value:g},r)]})});IN.displayName=f3;var p1e="RadioBubbleInput",RN=f.forwardRef(({__scopeSlider:e,value:t,...n},r)=>{const i=f.useRef(null),o=Ot(i,r),s=s1e(t);return f.useEffect(()=>{const a=i.current;if(!a)return;const c=window.HTMLInputElement.prototype,u=Object.getOwnPropertyDescriptor(c,"value").set;if(s!==t&&u){const d=new Event("input",{bubbles:!0});u.call(a,t),a.dispatchEvent(d)}},[s,t]),h.jsx(zf.input,{style:{display:"none"},...n,ref:o,defaultValue:t})});RN.displayName=p1e;function g1e(e=[],t,n){const r=[...e];return r[n]=t,r.sort((i,o)=>i-o)}function LN(e,t,n){const o=100/(n-t)*(e-t);return pN(o,[0,100])}function m1e(e,t){return t>2?`Value ${e+1} of ${t}`:t===2?["Minimum","Maximum"][e]:void 0}function v1e(e,t){if(e.length===1)return 0;const n=e.map(i=>Math.abs(i-t)),r=Math.min(...n);return n.indexOf(r)}function y1e(e,t,n){const r=e/2,o=Cb([0,50],[0,r]);return(r-o(t)*n)*n}function _1e(e){return e.slice(0,-1).map((t,n)=>e[n+1]-t)}function b1e(e,t){if(t>0){const n=_1e(e);return Math.min(...n)>=t}return!0}function Cb(e,t){return n=>{if(e[0]===e[1]||t[0]===t[1])return t[0];const r=(t[1]-t[0])/(e[1]-e[0]);return t[0]+r*(n-e[0])}}function w1e(e){return(String(e).split(".")[1]||"").length}function S1e(e,t){const n=Math.pow(10,t);return Math.round(e*n)/n}var C1e=_N,E1e=EN,x1e=xN,I1e=IN;const R1e="_slider_15go1_8",L1e="_track_15go1_14",k1e="_highlight_15go1_31",T1e="_handle_15go1_43",qh={slider:R1e,track:L1e,highlight:k1e,handle:T1e},kN=({className:e,label:t,value:n,onValueChange:r,onValueCommit:i,min:o,max:s,step:a,disabled:c})=>{const l=f.useCallback(([d])=>r(d),[r]),u=f.useCallback(([d])=>i?.(d),[i]);return h.jsxs(C1e,{className:Z(e,qh.slider),value:[n],onValueChange:l,onValueCommit:u,min:o,max:s,step:a,disabled:c,children:[h.jsx(E1e,{className:qh.track,children:h.jsx(x1e,{className:qh.highlight})}),h.jsx(sn,{placement:"top",label:Math.round(n*100).toString()+"%",children:h.jsx(I1e,{className:qh.handle,"aria-label":t})})]})},A1e="_selection_1akwb_1",P1e="_title_1akwb_5",M1e="_separator_1akwb_10",N1e="_options_1akwb_14",$1e="_secondary_1akwb_20",Nu={selection:A1e,title:P1e,separator:M1e,options:N1e,secondary:$1e},y2=({device:e,title:t,numberedLabel:n})=>{const{t:r}=he(),i=f.useId(),o=dr(e.available$),s=dr(e.selected$)?.id,a=f.useCallback(c=>{e.select(c.target.value)},[e]);return o.size<=1?null:h.jsxs("div",{className:Nu.selection,children:[h.jsx(Fi,{type:"body",weight:"semibold",size:"sm",as:"h4",className:Nu.title,children:t}),h.jsx(P_,{className:Nu.separator}),h.jsx("div",{className:Nu.options,children:[...o].map(([c,l])=>{let u;switch(l.type){case"name":u=l.name;break;case"number":u=n(l.number);break;case"default":u=l.name===null?r("settings.devices.default"):h.jsxs(lr,{i18nKey:"settings.devices.default_named",name:l.name,children:["Default"," ",h.jsxs("span",{className:Nu.secondary,children:["(",{name:l.name},")"]})]});break;case"speaker":u=r("settings.devices.loudspeaker");break;case"earpiece":u=r("settings.devices.handset");break}return h.jsx(Ip,{name:i,control:h.jsx(xp,{checked:c===s,onChange:a,value:c}),children:h.jsx(fd,{children:u})},c)})})]})};var qa=typeof self<"u"?self:{};function ga(){throw Error("Invalid UTF8")}function T9(e,t){return t=String.fromCharCode.apply(null,t),e==null?t:e+t}let Gh,_2;const O1e=typeof TextDecoder<"u";let j1e;const D1e=typeof TextEncoder<"u";function TN(e){if(D1e)e=(j1e||=new TextEncoder).encode(e);else{let n=0;const r=new Uint8Array(3*e.length);for(let i=0;i<e.length;i++){var t=e.charCodeAt(i);if(t<128)r[n++]=t;else{if(t<2048)r[n++]=t>>6|192;else{if(t>=55296&&t<=57343){if(t<=56319&&i<e.length){const o=e.charCodeAt(++i);if(o>=56320&&o<=57343){t=1024*(t-55296)+o-56320+65536,r[n++]=t>>18|240,r[n++]=t>>12&63|128,r[n++]=t>>6&63|128,r[n++]=63&t|128;continue}i--}t=65533}r[n++]=t>>12|224,r[n++]=t>>6&63|128}r[n++]=63&t|128}}e=n===r.length?r:r.subarray(0,n)}return e}var Eb,V1;e:{for(var A9=["CLOSURE_FLAGS"],b2=qa,w2=0;w2<A9.length;w2++)if((b2=b2[A9[w2]])==null){V1=null;break e}V1=b2}var of,P9=V1&&V1[610401301];Eb=P9!=null&&P9;const M9=qa.navigator;function h3(e){return!!Eb&&!!of&&of.brands.some((({brand:t})=>t&&t.indexOf(e)!=-1))}function Kr(e){var t;return(t=qa.navigator)&&(t=t.userAgent)||(t=""),t.indexOf(e)!=-1}function xs(){return!!Eb&&!!of&&of.brands.length>0}function S2(){return xs()?h3("Chromium"):(Kr("Chrome")||Kr("CriOS"))&&!(!xs()&&Kr("Edge"))||Kr("Silk")}function xb(e){return xb[" "](e),e}of=M9&&M9.userAgentData||null,xb[" "]=function(){};var F1e=!xs()&&(Kr("Trident")||Kr("MSIE"));!Kr("Android")||S2(),S2(),Kr("Safari")&&(S2()||!xs()&&Kr("Coast")||!xs()&&Kr("Opera")||!xs()&&Kr("Edge")||(xs()?h3("Microsoft Edge"):Kr("Edg/"))||xs()&&h3("Opera"));var AN={},td=null;function H1e(e){const t=e.length;let n=3*t/4;n%3?n=Math.floor(n):"=.".indexOf(e[t-1])!=-1&&(n="=.".indexOf(e[t-2])!=-1?n-2:n-1);const r=new Uint8Array(n);let i=0;return(function(o,s){function a(l){for(;c<o.length;){const u=o.charAt(c++),d=td[u];if(d!=null)return d;if(!/^[\s\xa0]*$/.test(u))throw Error("Unknown base64 encoding at char: "+u)}return l}PN();let c=0;for(;;){const l=a(-1),u=a(0),d=a(64),p=a(64);if(p===64&&l===-1)break;s(l<<2|u>>4),d!=64&&(s(u<<4&240|d>>2),p!=64&&s(d<<6&192|p))}})(e,(function(o){r[i++]=o})),i!==n?r.subarray(0,i):r}function PN(){if(!td){td={};var e="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789".split(""),t=["+/=","+/","-_=","-_.","-_"];for(let n=0;n<5;n++){const r=e.concat(t[n].split(""));AN[n]=r;for(let i=0;i<r.length;i++){const o=r[i];td[o]===void 0&&(td[o]=i)}}}}var MN=typeof Uint8Array<"u",NN=!F1e&&typeof btoa=="function";function N9(e){if(!NN){var t;t===void 0&&(t=0),PN(),t=AN[t];var n=Array(Math.floor(e.length/3)),r=t[64]||"";let c=0,l=0;for(;c<e.length-2;c+=3){var i=e[c],o=e[c+1],s=e[c+2],a=t[i>>2];i=t[(3&i)<<4|o>>4],o=t[(15&o)<<2|s>>6],s=t[63&s],n[l++]=a+i+o+s}switch(a=0,s=r,e.length-c){case 2:s=t[(15&(a=e[c+1]))<<2]||r;case 1:e=e[c],n[l]=t[e>>2]+t[(3&e)<<4|a>>4]+s+r}return n.join("")}for(t="",n=0,r=e.length-10240;n<r;)t+=String.fromCharCode.apply(null,e.subarray(n,n+=10240));return t+=String.fromCharCode.apply(null,n?e.subarray(n):e),btoa(t)}const $9=/[-_.]/g,U1e={"-":"+",_:"/",".":"="};function B1e(e){return U1e[e]||""}function $N(e){if(!NN)return H1e(e);$9.test(e)&&(e=e.replace($9,B1e)),e=atob(e);const t=new Uint8Array(e.length);for(let n=0;n<e.length;n++)t[n]=e.charCodeAt(n);return t}function Yf(e){return MN&&e!=null&&e instanceof Uint8Array}var Ml={};function Ga(){return V1e||=new qo(null,Ml)}function Ib(e){ON(Ml);var t=e.g;return(t=t==null||Yf(t)?t:typeof t=="string"?$N(t):null)==null?t:e.g=t}var qo=class{h(){return new Uint8Array(Ib(this)||0)}constructor(e,t){if(ON(t),this.g=e,e!=null&&e.length===0)throw Error("ByteString should be constructed with non-empty values")}};let V1e,q1e;function ON(e){if(e!==Ml)throw Error("illegal external caller")}function jN(e,t){e.__closure__error__context__984382||(e.__closure__error__context__984382={}),e.__closure__error__context__984382.severity=t}function p3(e){return jN(e=Error(e),"warning"),e}var dm=typeof Symbol=="function"&&typeof Symbol()=="symbol",G1e=new Set;function Xf(e,t,n=!1,r=!1){return e=typeof Symbol=="function"&&typeof Symbol()=="symbol"?r&&Symbol.for&&e?Symbol.for(e):e!=null?Symbol(e):Symbol():t,n&&G1e.add(e),e}var K1e=Xf("jas",void 0,!0,!0),O9=Xf(void 0,"0di"),C2=Xf(void 0,"2ex"),$u=Xf(void 0,"1oa",!0),Nl=Xf(void 0,Symbol(),!0);const fe=dm?K1e:"Ga",DN={Ga:{value:0,configurable:!0,writable:!0,enumerable:!1}},FN=Object.defineProperties;function fm(e,t){dm||fe in e||FN(e,DN),e[fe]|=t}function Yt(e,t){dm||fe in e||FN(e,DN),e[fe]=t}function fu(e){return fm(e,34),e}function W1e(e,t){Yt(t,-30975&(0|e))}function g3(e,t){Yt(t,-30941&(34|e))}function Rb(){return typeof BigInt=="function"}function fr(e){return Array.prototype.slice.call(e)}var Lb,Zf={},HN={};function j9(e){return!(!e||typeof e!="object"||e.Ia!==HN)}function kb(e){return e!==null&&typeof e=="object"&&!Array.isArray(e)&&e.constructor===Object}function Tb(e,t){if(e!=null){if(typeof e=="string")e=e?new qo(e,Ml):Ga();else if(e.constructor!==qo)if(Yf(e))e=e.length?new qo(new Uint8Array(e),Ml):Ga();else{if(!t)throw Error();e=void 0}}return e}function q1(e){return!(!Array.isArray(e)||e.length)&&!!(1&(0|e[fe]))}const D9=[];function aa(e){if(2&e)throw Error()}Yt(D9,55),Lb=Object.freeze(D9);class G1{constructor(t,n,r){this.l=0,this.g=t,this.h=n,this.m=r}next(){if(this.l<this.g.length){const t=this.g[this.l++];return{done:!1,value:this.h?this.h.call(this.m,t):t}}return{done:!0,value:void 0}}[Symbol.iterator](){return new G1(this.g,this.h,this.m)}}function Ab(e){return Nl?e[Nl]:void 0}var z1e=Object.freeze({});function hm(e){return e.Qa=!0,e}var Y1e=hm((e=>typeof e=="number")),F9=hm((e=>typeof e=="string")),X1e=hm((e=>typeof e=="boolean")),pm=typeof qa.BigInt=="function"&&typeof qa.BigInt(0)=="bigint",m3=hm((e=>pm?e>=Q1e&&e<=ege:e[0]==="-"?H9(e,Z1e):H9(e,J1e)));const Z1e=Number.MIN_SAFE_INTEGER.toString(),Q1e=pm?BigInt(Number.MIN_SAFE_INTEGER):void 0,J1e=Number.MAX_SAFE_INTEGER.toString(),ege=pm?BigInt(Number.MAX_SAFE_INTEGER):void 0;function H9(e,t){if(e.length>t.length)return!1;if(e.length<t.length||e===t)return!0;for(let n=0;n<e.length;n++){const r=e[n],i=t[n];if(r>i)return!1;if(r<i)return!0}}const tge=typeof Uint8Array.prototype.slice=="function";let UN,dt=0,Ut=0;function U9(e){const t=e>>>0;dt=t,Ut=(e-t)/4294967296>>>0}function $l(e){if(e<0){U9(-e);const[t,n]=$b(dt,Ut);dt=t>>>0,Ut=n>>>0}else U9(e)}function Pb(e){const t=UN||=new DataView(new ArrayBuffer(8));t.setFloat32(0,+e,!0),Ut=0,dt=t.getUint32(0,!0)}function Mb(e,t){const n=4294967296*t+(e>>>0);return Number.isSafeInteger(n)?n:sf(e,t)}function Nb(e,t){const n=2147483648&t;return n&&(t=~t>>>0,(e=1+~e>>>0)==0&&(t=t+1>>>0)),typeof(e=Mb(e,t))=="number"?n?-e:e:n?"-"+e:e}function sf(e,t){if(e>>>=0,(t>>>=0)<=2097151)var n=""+(4294967296*t+e);else Rb()?n=""+(BigInt(t)<<BigInt(32)|BigInt(e)):(e=(16777215&e)+6777216*(n=16777215&(e>>>24|t<<8))+6710656*(t=t>>16&65535),n+=8147497*t,t*=2,e>=1e7&&(n+=e/1e7>>>0,e%=1e7),n>=1e7&&(t+=n/1e7>>>0,n%=1e7),n=t+B9(n)+B9(e));return n}function B9(e){return e=String(e),"0000000".slice(e.length)+e}function gm(e){if(e.length<16)$l(Number(e));else if(Rb())e=BigInt(e),dt=Number(e&BigInt(4294967295))>>>0,Ut=Number(e>>BigInt(32)&BigInt(4294967295));else{const t=+(e[0]==="-");Ut=dt=0;const n=e.length;for(let r=t,i=(n-t)%6+t;i<=n;r=i,i+=6){const o=Number(e.slice(r,i));Ut*=1e6,dt=1e6*dt+o,dt>=4294967296&&(Ut+=Math.trunc(dt/4294967296),Ut>>>=0,dt>>>=0)}if(t){const[r,i]=$b(dt,Ut);dt=r,Ut=i}}}function $b(e,t){return t=~t,e?e=1+~e:t+=1,[e,t]}const Ob=typeof BigInt=="function"?BigInt.asIntN:void 0,nge=typeof BigInt=="function"?BigInt.asUintN:void 0,ll=Number.isSafeInteger,mm=Number.isFinite,K1=Math.trunc;function ca(e){return e==null||typeof e=="number"?e:e==="NaN"||e==="Infinity"||e==="-Infinity"?Number(e):void 0}function BN(e){return e==null||typeof e=="boolean"?e:typeof e=="number"?!!e:void 0}const rge=/^-?([1-9][0-9]*|0)(\.[0-9]+)?$/;function vm(e){switch(typeof e){case"bigint":return!0;case"number":return mm(e);case"string":return rge.test(e);default:return!1}}function hu(e){if(e==null)return e;if(typeof e=="string"&&e)e=+e;else if(typeof e!="number")return;return mm(e)?0|e:void 0}function VN(e){if(e==null)return e;if(typeof e=="string"&&e)e=+e;else if(typeof e!="number")return;return mm(e)?e>>>0:void 0}function V9(e){if(e[0]==="-")return!1;const t=e.length;return t<20||t===20&&Number(e.substring(0,6))<184467}function jb(e){return e=K1(e),ll(e)||($l(e),e=Nb(dt,Ut)),e}function Db(e){var t=K1(Number(e));if(ll(t))return String(t);if((t=e.indexOf("."))!==-1&&(e=e.substring(0,t)),t=e.length,!(e[0]==="-"?t<20||t===20&&Number(e.substring(0,7))>-922337:t<19||t===19&&Number(e.substring(0,6))<922337))if(gm(e),e=dt,2147483648&(t=Ut))if(Rb())e=""+(BigInt(0|t)<<BigInt(32)|BigInt(e>>>0));else{const[n,r]=$b(e,t);e="-"+sf(n,r)}else e=sf(e,t);return e}function W1(e){return e==null?e:typeof e=="bigint"?(m3(e)?e=Number(e):(e=Ob(64,e),e=m3(e)?Number(e):String(e)),e):vm(e)?typeof e=="number"?jb(e):Db(e):void 0}function ige(e){if(e==null)return e;var t=typeof e;if(t==="bigint")return String(nge(64,e));if(vm(e)){if(t==="string")return t=K1(Number(e)),ll(t)&&t>=0?e=String(t):((t=e.indexOf("."))!==-1&&(e=e.substring(0,t)),V9(e)||(gm(e),e=sf(dt,Ut))),e;if(t==="number")return(e=K1(e))>=0&&ll(e)?e:(function(n){if(n<0){$l(n);var r=sf(dt,Ut);return n=Number(r),ll(n)?n:r}return V9(r=String(n))?r:($l(n),Mb(dt,Ut))})(e)}}function qN(e){if(typeof e!="string")throw Error();return e}function pu(e){if(e!=null&&typeof e!="string")throw Error();return e}function Ol(e){return e==null||typeof e=="string"?e:void 0}function Fb(e,t,n,r){if(e!=null&&typeof e=="object"&&e.W===Zf)return e;if(!Array.isArray(e))return n?2&r?((e=t[O9])||(fu((e=new t).u),e=t[O9]=e),t=e):t=new t:t=void 0,t;let i=n=0|e[fe];return i===0&&(i|=32&r),i|=2&r,i!==n&&Yt(e,i),new t(e)}function oge(e,t,n){if(t)e:{if(!vm(t=e))throw p3("int64");switch(typeof t){case"string":t=Db(t);break e;case"bigint":if(e=t=Ob(64,t),F9(e)){if(!/^\s*(?:-?[1-9]\d*|0)?\s*$/.test(e))throw Error(String(e))}else if(Y1e(e)&&!Number.isSafeInteger(e))throw Error(String(e));t=pm?BigInt(t):X1e(t)?t?"1":"0":F9(t)?t.trim()||"0":String(t);break e;default:t=jb(t)}}else t=W1(e);return typeof(n=(e=t)==null?n?0:void 0:e)=="string"&&ll(t=+n)?t:n}const sge={};let age=(function(){try{return xb(new class extends Map{constructor(){super()}}),!1}catch{return!0}})();class E2{constructor(){this.g=new Map}get(t){return this.g.get(t)}set(t,n){return this.g.set(t,n),this.size=this.g.size,this}delete(t){return t=this.g.delete(t),this.size=this.g.size,t}clear(){this.g.clear(),this.size=this.g.size}has(t){return this.g.has(t)}entries(){return this.g.entries()}keys(){return this.g.keys()}values(){return this.g.values()}forEach(t,n){return this.g.forEach(t,n)}[Symbol.iterator](){return this.entries()}}const cge=age?(Object.setPrototypeOf(E2.prototype,Map.prototype),Object.defineProperties(E2.prototype,{size:{value:0,configurable:!0,enumerable:!0,writable:!0}}),E2):class extends Map{constructor(){super()}};function q9(e){return e}function x2(e){if(2&e.L)throw Error("Cannot mutate an immutable Map")}var di=class extends cge{constructor(e,t,n=q9,r=q9){super();let i=0|e[fe];i|=64,Yt(e,i),this.L=i,this.S=t,this.R=n,this.Y=this.S?lge:r;for(let o=0;o<e.length;o++){const s=e[o],a=n(s[0],!1,!0);let c=s[1];t?c===void 0&&(c=null):c=r(s[1],!1,!0,void 0,void 0,i),super.set(a,c)}}na(e=G9){if(this.size!==0)return this.X(e)}X(e=G9){const t=[],n=super.entries();for(var r;!(r=n.next()).done;)(r=r.value)[0]=e(r[0]),r[1]=e(r[1]),t.push(r);return t}clear(){x2(this),super.clear()}delete(e){return x2(this),super.delete(this.R(e,!0,!1))}entries(){var e=this.ma();return new G1(e,uge,this)}keys(){return this.Ha()}values(){var e=this.ma();return new G1(e,di.prototype.get,this)}forEach(e,t){super.forEach(((n,r)=>{e.call(t,this.get(r),r,this)}))}set(e,t){return x2(this),(e=this.R(e,!0,!1))==null?this:t==null?(super.delete(e),this):super.set(e,this.Y(t,!0,!0,this.S,!1,this.L))}Na(e){const t=this.R(e[0],!1,!0);e=e[1],e=this.S?e===void 0?null:e:this.Y(e,!1,!0,void 0,!1,this.L),super.set(t,e)}has(e){return super.has(this.R(e,!1,!1))}get(e){e=this.R(e,!1,!1);const t=super.get(e);if(t!==void 0){var n=this.S;return n?((n=this.Y(t,!1,!0,n,this.ra,this.L))!==t&&super.set(e,n),n):t}}ma(){return Array.from(super.keys())}Ha(){return super.keys()}[Symbol.iterator](){return this.entries()}};function lge(e,t,n,r,i,o){return e=Fb(e,r,n,o),i&&(e=_m(e)),e}function G9(e){return e}function uge(e){return[e,this.get(e)]}let dge,GN,fge;function K9(){return dge||=new di(fu([]),void 0,void 0,void 0,sge)}function Hb(e,t,n,r,i){if(e!=null){if(Array.isArray(e))e=q1(e)?void 0:i&&2&(0|e[fe])?e:Ub(e,t,n,r!==void 0,i);else if(kb(e)){const o={};for(let s in e)o[s]=Hb(e[s],t,n,r,i);e=o}else e=t(e,r);return e}}function Ub(e,t,n,r,i){const o=r||n?0|e[fe]:0,s=r?!!(32&o):void 0;r=fr(e);for(let a=0;a<r.length;a++)r[a]=Hb(r[a],t,n,s,i);return n&&((e=Ab(e))&&(r[Nl]=fr(e)),n(o,r)),r}function hge(e){return Hb(e,KN,void 0,void 0,!1)}function KN(e){return e.W===Zf?e.toJSON():e instanceof di?e.na(hge):(function(t){switch(typeof t){case"number":return isFinite(t)?t:String(t);case"bigint":return m3(t)?Number(t):String(t);case"boolean":return t?1:0;case"object":if(t)if(Array.isArray(t)){if(q1(t))return}else{if(Yf(t))return N9(t);if(t instanceof qo){const n=t.g;return n==null?"":typeof n=="string"?n:t.g=N9(n)}if(t instanceof di)return t.na()}}return t})(e)}function WN(e){return Ub(e,KN,void 0,void 0,!1)}function js(e,t,n){return e=zN(e,t[0],t[1],n?1:2),t!==GN&&n&&fm(e,16384),e}function zN(e,t,n,r){if(e==null){var i=96;n?(e=[n],i|=512):e=[],t&&(i=-33521665&i|(1023&t)<<15)}else{if(!Array.isArray(e))throw Error("narr");if(2048&(i=0|e[fe]))throw Error("farr");if(64&i)return e;if(r===1||r===2||(i|=64),n&&(i|=512,n!==e[0]))throw Error("mid");e:{if(r=(n=e).length){const o=r-1;if(kb(n[o])){if((t=o-(512&(i|=256)?0:-1))>=1024)throw Error("pvtlmt");i=-33521665&i|(1023&t)<<15;break e}}if(t){if((t=Math.max(t,r-(512&i?0:-1)))>1024)throw Error("spvt");i=-33521665&i|(1023&t)<<15}}}return Yt(e,i),e}function v3(e,t,n=g3){if(e!=null){if(MN&&e instanceof Uint8Array)return t?e:new Uint8Array(e);if(Array.isArray(e)){var r=0|e[fe];return 2&r?e:(t&&=r===0||!!(32&r)&&!(64&r||!(16&r)),t?(Yt(e,-12293&(34|r)),e):Ub(e,v3,4&r?g3:n,!0,!0))}return e.W===Zf?e=2&(r=0|(n=e.u)[fe])?e:new e.constructor(ym(n,r,!0)):e instanceof di&&!(2&e.L)&&(n=fu(e.X(v3)),e=new di(n,e.S,e.R,e.Y)),e}}function ym(e,t,n){const r=n||2&t?g3:W1e,i=!!(32&t);return e=(function(o,s,a){const c=fr(o);var l=c.length;const u=256&s?c[l-1]:void 0;for(l+=u?-1:0,s=512&s?1:0;s<l;s++)c[s]=a(c[s]);if(u){s=c[s]={};for(const d in u)s[d]=a(u[d])}return(o=Ab(o))&&(c[Nl]=fr(o)),c})(e,t,(o=>v3(o,i,r))),fm(e,32|(n?2:0)),e}function _m(e){const t=e.u,n=0|t[fe];return 2&n?new e.constructor(ym(t,n,!1)):e}function jl(e,t){return ds(e=e.u,0|e[fe],t)}function ds(e,t,n,r){if(n===-1)return null;var i=n+(512&t?0:-1);const o=e.length-1;return i>=o&&256&t?e[o][n]:r&&256&t&&(t=e[o][n])!=null?(e[i]!=null&&C2!=null&&((i=(e=q1e??={})[C2]||0)>=4||(e[C2]=i+1,jN(e=Error(),"incident"),(function(s){qa.setTimeout((()=>{throw s}),0)})(e))),t):i<=o?e[i]:void 0}function gt(e,t,n){const r=e.u;let i=0|r[fe];return aa(i),$t(r,i,t,n),e}function $t(e,t,n,r){const i=512&t?0:-1,o=n+i;var s=e.length-1;return o>=s&&256&t?(e[s][n]=r,t):o<=s?(e[o]=r,256&t&&n in(e=e[s])&&delete e[n],t):(r!==void 0&&(n>=(s=t>>15&1023||536870912)?r!=null&&(e[s+i]={[n]:r},Yt(e,t|=256)):e[o]=r),t)}function $p(e,t){let n=0|(e=e.u)[fe];const r=ds(e,n,t),i=ca(r);return i!=null&&i!==r&&$t(e,n,t,i),i}function YN(e){let t=0|(e=e.u)[fe];const n=ds(e,t,1),r=Tb(n,!0);return r!=null&&r!==n&&$t(e,t,1,r),r}function Sa(){return z1e===void 0?2:4}function Ca(e,t,n,r,i){const o=e.u,s=2&(e=0|o[fe])?1:r;i=!!i;let a=0|(r=Bb(o,e,t))[fe];if(!(4&a)){4&a&&(r=fr(r),a=Go(a,e),e=$t(o,e,t,r));let c=0,l=0;for(;c<r.length;c++){const u=n(r[c]);u!=null&&(r[l++]=u)}l<c&&(r.length=l),a=Vb(a,e),n=-4097&(20|a),a=n&=-8193,Yt(r,a),2&a&&Object.freeze(r)}return s===1||s===4&&32&a?Oo(a)||(i=a,a|=2,a!==i&&Yt(r,a),Object.freeze(r)):(s===2&&Oo(a)&&(r=fr(r),a=Go(a,e),a=Ds(a,e,i),Yt(r,a),e=$t(o,e,t,r)),Oo(a)||(t=a,a=Ds(a,e,i),a!==t&&Yt(r,a))),r}function Bb(e,t,n,r){return e=ds(e,t,n,r),Array.isArray(e)?e:Lb}function Vb(e,t){return e===0&&(e=Go(e,t)),1|e}function Oo(e){return!!(2&e)&&!!(4&e)||!!(2048&e)}function XN(e){e=fr(e);for(let t=0;t<e.length;t++){const n=e[t]=fr(e[t]);Array.isArray(n[1])&&(n[1]=fu(n[1]))}return e}function y3(e,t,n,r){let i=0|(e=e.u)[fe];aa(i),$t(e,i,t,(r==="0"?Number(n)===0:n===r)?void 0:n)}function gu(e,t,n,r,i){aa(t);var o=!(!(64&t)&&16384&t);const s=(i=Bb(e,t,n,i))!==Lb;if(o||!s){let a=o=s?0|i[fe]:0;(!s||2&a||Oo(a)||4&a&&!(32&a))&&(i=fr(i),a=Go(a,t),t=$t(e,t,n,i)),a=-13&Vb(a,t),a=Ds(r?-17&a:16|a,t,!0),a!==o&&Yt(i,a)}return i}function I2(e,t){var n=F$;return Gb(qb(e=e.u),e,0|e[fe],n)===t?t:-1}function qb(e){if(dm)return e[$u]??(e[$u]=new Map);if($u in e)return e[$u];const t=new Map;return Object.defineProperty(e,$u,{value:t}),t}function ZN(e,t,n,r){const i=qb(e),o=Gb(i,e,t,n);return o!==r&&(o&&(t=$t(e,t,o)),i.set(n,r)),t}function Gb(e,t,n,r){let i=e.get(r);if(i!=null)return i;i=0;for(let o=0;o<r.length;o++){const s=r[o];ds(t,n,s)!=null&&(i!==0&&(n=$t(t,n,i)),i=s)}return e.set(r,i),i}function Kb(e,t,n,r){let i,o=0|e[fe];if((r=ds(e,o,n,r))!=null&&r.W===Zf)return(t=_m(r))!==r&&$t(e,o,n,t),t.u;if(Array.isArray(r)){const s=0|r[fe];i=2&s?js(ym(r,s,!1),t,!0):64&s?r:js(i,t,!0)}else i=js(void 0,t,!0);return i!==r&&$t(e,o,n,i),i}function QN(e,t,n,r){let i=0|(e=e.u)[fe];return(t=Fb(r=ds(e,i,n,r),t,!1,i))!==r&&t!=null&&$t(e,i,n,t),t}function We(e,t,n,r=!1){if((t=QN(e,t,n,r))==null)return t;if(!(2&(r=0|(e=e.u)[fe]))){const i=_m(t);i!==t&&$t(e,r,n,t=i)}return t}function JN(e,t,n,r,i,o,s){e=e.u;var a=!!(2&t);const c=a?1:i;o=!!o,s&&=!a;var l=0|(i=Bb(e,t,r))[fe];if(!(a=!!(4&l))){var u=i,d=t;const p=!!(2&(l=Vb(l,t)));p&&(d|=2);let g=!p,v=!0,m=0,_=0;for(;m<u.length;m++){const y=Fb(u[m],n,!1,d);if(y instanceof n){if(!p){const w=!!(2&(0|y.u[fe]));g&&=!w,v&&=w}u[_++]=y}}_<m&&(u.length=_),l|=4,l=v?16|l:-17&l,Yt(u,l=g?8|l:-9&l),p&&Object.freeze(u)}if(s&&!(8&l||!i.length&&(c===1||c===4&&32&l))){for(Oo(l)&&(i=fr(i),l=Go(l,t),t=$t(e,t,r,i)),n=i,s=l,u=0;u<n.length;u++)(l=n[u])!==(d=_m(l))&&(n[u]=d);s|=8,Yt(n,s=n.length?-17&s:16|s),l=s}return c===1||c===4&&32&l?Oo(l)||(t=l,(l|=!i.length||16&l&&(!a||32&l)?2:2048)!==t&&Yt(i,l),Object.freeze(i)):(c===2&&Oo(l)&&(Yt(i=fr(i),l=Ds(l=Go(l,t),t,o)),t=$t(e,t,r,i)),Oo(l)||(r=l,(l=Ds(l,t,o))!==r&&Yt(i,l))),i}function rs(e,t,n){const r=0|e.u[fe];return JN(e,r,t,n,Sa(),!1,!(2&r))}function me(e,t,n,r){return r==null&&(r=void 0),gt(e,n,r)}function Sd(e,t,n,r){r==null&&(r=void 0);e:{let i=0|(e=e.u)[fe];if(aa(i),r==null){const o=qb(e);if(Gb(o,e,i,n)!==t)break e;o.set(n,0)}else i=ZN(e,i,n,t);$t(e,i,t,r)}}function Go(e,t){return-2049&(e=32|(2&t?2|e:-3&e))}function Ds(e,t,n){return 32&t&&n||(e&=-33),e}function z1(e,t,n,r){const i=0|e.u[fe];aa(i),e=JN(e,i,n,t,2,!0),r=r??new n,e.push(r),e[fe]=2&(0|r.u[fe])?-9&e[fe]:-17&e[fe]}function Jr(e,t){return hu(jl(e,t))}function fi(e,t){return Ol(jl(e,t))}function Vt(e,t){return $p(e,t)??0}function af(e,t,n){if(n!=null&&typeof n!="boolean")throw e=typeof n,Error(`Expected boolean but got ${e!="object"?e:n?Array.isArray(n)?"array":e:"null"}: ${n}`);gt(e,t,n)}function ao(e,t,n){if(n!=null){if(typeof n!="number"||!mm(n))throw p3("int32");n|=0}gt(e,t,n)}function ue(e,t,n){if(n!=null&&typeof n!="number")throw Error(`Value of float/double field must be a number, found ${typeof n}: ${n}`);gt(e,t,n)}function Y1(e,t,n){{const s=e.u;let a=0|s[fe];if(aa(a),n==null)$t(s,a,t);else{var r=e=0|n[fe],i=Oo(e),o=i||Object.isFrozen(n);for(i||(e=0),o||(n=fr(n),r=0,e=Ds(e=Go(e,a),a,!0),o=!1),e|=21,i=0;i<n.length;i++){const c=n[i],l=qN(c);Object.is(c,l)||(o&&(n=fr(n),r=0,e=Ds(e=Go(e,a),a,!0),o=!1),n[i]=l)}e!==r&&(o&&(n=fr(n),e=Ds(e=Go(e,a),a,!0)),Yt(n,e)),$t(s,a,t,n)}}}function bm(e,t,n){aa(0|e.u[fe]),Ca(e,t,Ol,2,!0).push(qN(n))}function e$(e,t){return Error(`Invalid wire type: ${e} (at position ${t})`)}function Wb(){return Error("Failed to read varint, encoding is invalid.")}function t$(e,t){return Error(`Tried to read past the end of the data ${t} > ${e}`)}function zb(e){if(typeof e=="string")return{buffer:$N(e),N:!1};if(Array.isArray(e))return{buffer:new Uint8Array(e),N:!1};if(e.constructor===Uint8Array)return{buffer:e,N:!1};if(e.constructor===ArrayBuffer)return{buffer:new Uint8Array(e),N:!1};if(e.constructor===qo)return{buffer:Ib(e)||new Uint8Array(0),N:!0};if(e instanceof Uint8Array)return{buffer:new Uint8Array(e.buffer,e.byteOffset,e.byteLength),N:!1};throw Error("Type not convertible to a Uint8Array, expected a Uint8Array, an ArrayBuffer, a base64 encoded string, a ByteString or an Array of numbers")}function Yb(e,t){let n,r=0,i=0,o=0;const s=e.h;let a=e.g;do n=s[a++],r|=(127&n)<<o,o+=7;while(o<32&&128&n);for(o>32&&(i|=(127&n)>>4),o=3;o<32&&128&n;o+=7)n=s[a++],i|=(127&n)<<o;if(Aa(e,a),n<128)return t(r>>>0,i>>>0);throw Wb()}function Xb(e){let t=0,n=e.g;const r=n+10,i=e.h;for(;n<r;){const o=i[n++];if(t|=o,(128&o)==0)return Aa(e,n),!!(127&t)}throw Wb()}function Xs(e){const t=e.h;let n=e.g,r=t[n++],i=127&r;if(128&r&&(r=t[n++],i|=(127&r)<<7,128&r&&(r=t[n++],i|=(127&r)<<14,128&r&&(r=t[n++],i|=(127&r)<<21,128&r&&(r=t[n++],i|=r<<28,128&r&&128&t[n++]&&128&t[n++]&&128&t[n++]&&128&t[n++]&&128&t[n++])))))throw Wb();return Aa(e,n),i}function is(e){return Xs(e)>>>0}function _3(e){var t=e.h;const n=e.g,r=t[n],i=t[n+1],o=t[n+2];return t=t[n+3],Aa(e,e.g+4),(r<<0|i<<8|o<<16|t<<24)>>>0}function b3(e){var t=_3(e);e=2*(t>>31)+1;const n=t>>>23&255;return t&=8388607,n==255?t?NaN:e*(1/0):n==0?1401298464324817e-60*e*t:e*Math.pow(2,n-150)*(t+8388608)}function pge(e){return Xs(e)}function R2(e,t,{ba:n=!1}={}){e.ba=n,t&&(t=zb(t),e.h=t.buffer,e.m=t.N,e.j=0,e.l=e.h.length,e.g=e.j)}function Aa(e,t){if(e.g=t,t>e.l)throw t$(e.l,t)}function n$(e,t){if(t<0)throw Error(`Tried to read a negative byte length: ${t}`);const n=e.g,r=n+t;if(r>e.l)throw t$(t,e.l-n);return e.g=r,n}function r$(e,t){if(t==0)return Ga();var n=n$(e,t);return e.ba&&e.m?n=e.h.subarray(n,n+t):(e=e.h,n=n===(t=n+t)?new Uint8Array(0):tge?e.slice(n,t):new Uint8Array(e.subarray(n,t))),n.length==0?Ga():new qo(n,Ml)}di.prototype.toJSON=void 0,di.prototype.Ia=HN;var W9=[];function i$(e){var t=e.g;if(t.g==t.l)return!1;e.l=e.g.g;var n=is(e.g);if(t=n>>>3,!((n&=7)>=0&&n<=5))throw e$(n,e.l);if(t<1)throw Error(`Invalid field number: ${t} (at position ${e.l})`);return e.m=t,e.h=n,!0}function Op(e){switch(e.h){case 0:e.h!=0?Op(e):Xb(e.g);break;case 1:Aa(e=e.g,e.g+8);break;case 2:if(e.h!=2)Op(e);else{var t=is(e.g);Aa(e=e.g,e.g+t)}break;case 5:Aa(e=e.g,e.g+4);break;case 3:for(t=e.m;;){if(!i$(e))throw Error("Unmatched start-group tag: stream EOF");if(e.h==4){if(e.m!=t)throw Error("Unmatched end-group tag");break}Op(e)}break;default:throw e$(e.h,e.l)}}function Qf(e,t,n){const r=e.g.l,i=is(e.g),o=e.g.g+i;let s=o-r;if(s<=0&&(e.g.l=o,n(t,e,void 0,void 0,void 0),s=o-e.g.g),s)throw Error(`Message parsing ended unexpectedly. Expected to read ${i} bytes, instead read ${i-s} bytes, either the data ended unexpectedly or the message misreported its own length`);return e.g.g=o,e.g.l=r,t}function Zb(e){var t=is(e.g),n=n$(e=e.g,t);if(e=e.h,O1e){var r,i=e;(r=_2)||(r=_2=new TextDecoder("utf-8",{fatal:!0})),t=n+t,i=n===0&&t===i.length?i:i.subarray(n,t);try{var o=r.decode(i)}catch(a){if(Gh===void 0){try{r.decode(new Uint8Array([128]))}catch{}try{r.decode(new Uint8Array([97])),Gh=!0}catch{Gh=!1}}throw!Gh&&(_2=void 0),a}}else{t=(o=n)+t,n=[];let a,c=null;for(;o<t;){var s=e[o++];s<128?n.push(s):s<224?o>=t?ga():(a=e[o++],s<194||(192&a)!=128?(o--,ga()):n.push((31&s)<<6|63&a)):s<240?o>=t-1?ga():(a=e[o++],(192&a)!=128||s===224&&a<160||s===237&&a>=160||(192&(r=e[o++]))!=128?(o--,ga()):n.push((15&s)<<12|(63&a)<<6|63&r)):s<=244?o>=t-2?ga():(a=e[o++],(192&a)!=128||a-144+(s<<28)>>30!=0||(192&(r=e[o++]))!=128||(192&(i=e[o++]))!=128?(o--,ga()):(s=(7&s)<<18|(63&a)<<12|(63&r)<<6|63&i,s-=65536,n.push(55296+(s>>10&1023),56320+(1023&s)))):ga(),n.length>=8192&&(c=T9(c,n),n.length=0)}o=T9(c,n)}return o}function o$(e){const t=is(e.g);return r$(e.g,t)}function wm(e,t,n){var r=is(e.g);for(r=e.g.g+r;e.g.g<r;)n.push(t(e.g))}var Kh=[];function gge(e){return e}let ul;function Hi(e,t,n){t.g?t.m(e,t.g,t.h,n):t.m(e,t.h,n)}var ce=class{constructor(e,t){this.u=zN(e,t)}toJSON(){const e=!ul;try{return e&&(ul=WN),s$(this)}finally{e&&(ul=void 0)}}l(){var e=Zge;return e.g?e.l(this,e.g,e.h,!0):e.l(this,e.h,e.defaultValue,!0)}clone(){const e=this.u;return new this.constructor(ym(e,0|e[fe],!1))}N(){return!!(2&(0|this.u[fe]))}};function s$(e){var t=e.u;{t=(e=ul(t))!==t;let l=e.length;if(l){var n=e[l-1],r=kb(n);r?l--:n=void 0;var i=e;if(r){e:{var o,s=n,a=!1;if(s)for(let u in s)isNaN(+u)?(o??={})[u]=s[u]:(r=s[u],Array.isArray(r)&&(q1(r)||j9(r)&&r.size===0)&&(r=null),r==null&&(a=!0),r!=null&&((o??={})[u]=r));if(a||(o=s),o)for(let u in o){a=o;break e}a=null}s=a==null?n!=null:a!==n}for(;l>0&&((o=i[l-1])==null||q1(o)||j9(o)&&o.size===0);l--)var c=!0;(i!==e||s||c)&&(t?(c||s||a)&&(i.length=l):i=Array.prototype.slice.call(i,0,l),a&&i.push(a)),c=i}else c=e}return c}function z9(e){return e?/^\d+$/.test(e)?(gm(e),new w3(dt,Ut)):null:mge||=new w3(0,0)}ce.prototype.W=Zf,ce.prototype.toString=function(){try{return ul=gge,s$(this).toString()}finally{ul=void 0}};var w3=class{constructor(e,t){this.h=e>>>0,this.g=t>>>0}};let mge;function Y9(e){return e?/^-?\d+$/.test(e)?(gm(e),new S3(dt,Ut)):null:vge||=new S3(0,0)}var S3=class{constructor(e,t){this.h=e>>>0,this.g=t>>>0}};let vge;function dl(e,t,n){for(;n>0||t>127;)e.g.push(127&t|128),t=(t>>>7|n<<25)>>>0,n>>>=7;e.g.push(t)}function mu(e,t){for(;t>127;)e.g.push(127&t|128),t>>>=7;e.g.push(t)}function Sm(e,t){if(t>=0)mu(e,t);else{for(let n=0;n<9;n++)e.g.push(127&t|128),t>>=7;e.g.push(1)}}function cf(e,t){e.g.push(t>>>0&255),e.g.push(t>>>8&255),e.g.push(t>>>16&255),e.g.push(t>>>24&255)}function Dl(e,t){t.length!==0&&(e.l.push(t),e.h+=t.length)}function Mr(e,t,n){mu(e.g,8*t+n)}function Qb(e,t){return Mr(e,t,2),t=e.g.end(),Dl(e,t),t.push(e.h),t}function Jb(e,t){var n=t.pop();for(n=e.h+e.g.length()-n;n>127;)t.push(127&n|128),n>>>=7,e.h++;t.push(n),e.h++}function Cm(e,t,n){Mr(e,t,2),mu(e.g,n.length),Dl(e,e.g.end()),Dl(e,n)}function X1(e,t,n,r){n!=null&&(t=Qb(e,t),r(n,e),Jb(e,t))}function Ui(){const e=class{constructor(){throw Error()}};return Object.setPrototypeOf(e,e.prototype),e}var ew=Ui(),a$=Ui(),tw=Ui(),nw=Ui(),c$=Ui(),l$=Ui(),rw=Ui(),u$=Ui(),d$=Ui(),vu=class{constructor(e,t,n){this.g=e,this.h=t,e=ew,this.l=!!e&&n===e||!1}};function Em(e,t){return new vu(e,t,ew)}function f$(e,t,n,r,i){X1(e,n,m$(t,r),i)}const yge=Em((function(e,t,n,r,i){return e.h===2&&(Qf(e,Kb(t,r,n),i),!0)}),f$),_ge=Em((function(e,t,n,r,i){return e.h===2&&(Qf(e,Kb(t,r,n,!0),i),!0)}),f$);var xm=Symbol(),iw=Symbol(),X9=Symbol(),Z9=Symbol();let h$,p$;function fc(e,t,n,r){var i=r[e];if(i)return i;(i={}).Pa=r,i.V=(function(d){switch(typeof d){case"boolean":return GN||=[0,void 0,!0];case"number":return d>0?void 0:d===0?fge||=[0,void 0]:[-d,void 0];case"string":return[0,d];case"object":return d}})(r[0]);var o=r[1];let s=1;o&&o.constructor===Object&&(i.ga=o,typeof(o=r[++s])=="function"&&(i.la=!0,h$??=o,p$??=r[s+1],o=r[s+=2]));const a={};for(;o&&Array.isArray(o)&&o.length&&typeof o[0]=="number"&&o[0]>0;){for(var c=0;c<o.length;c++)a[o[c]]=o;o=r[++s]}for(c=1;o!==void 0;){let d;typeof o=="number"&&(c+=o,o=r[++s]);var l=void 0;if(o instanceof vu?d=o:(d=yge,s--),d?.l){o=r[++s],l=r;var u=s;typeof o=="function"&&(o=o(),l[u]=o),l=o}for(u=c+1,typeof(o=r[++s])=="number"&&o<0&&(u-=o,o=r[++s]);c<u;c++){const p=a[c];l?n(i,c,d,l,p):t(i,c,d,p)}}return r[e]=i}function g$(e){return Array.isArray(e)?e[0]instanceof vu?e:[_ge,e]:[e,void 0]}function m$(e,t){return e instanceof ce?e.u:Array.isArray(e)?js(e,t,!1):void 0}function ow(e,t,n,r){const i=n.g;e[t]=r?(o,s,a)=>i(o,s,a,r):i}function sw(e,t,n,r,i){const o=n.g;let s,a;e[t]=(c,l,u)=>o(c,l,u,a||=fc(iw,ow,sw,r).V,s||=aw(r),i)}function aw(e){let t=e[X9];if(t!=null)return t;const n=fc(iw,ow,sw,e);return t=n.la?(r,i)=>h$(r,i,n):(r,i)=>{const o=0|r[fe];for(;i$(i)&&i.h!=4;){var s=i.m,a=n[s];if(a==null){var c=n.ga;c&&(c=c[s])&&(c=bge(c))!=null&&(a=n[s]=c)}a!=null&&a(i,r,s)||(s=(a=i).l,Op(a),a.fa?a=void 0:(c=a.g.g-s,a.g.g=s,a=r$(a.g,c)),s=r,a&&((c=s[Nl])?c.push(a):s[Nl]=[a]))}return 16384&o&&fu(r),!0},e[X9]=t}function bge(e){const t=(e=g$(e))[0].g;if(e=e[1]){const n=aw(e),r=fc(iw,ow,sw,e).V;return(i,o,s)=>t(i,o,s,r,n)}return t}function Im(e,t,n){e[t]=n.h}function Rm(e,t,n,r){let i,o;const s=n.h;e[t]=(a,c,l)=>s(a,c,l,o||=fc(xm,Im,Rm,r).V,i||=v$(r))}function v$(e){let t=e[Z9];if(!t){const n=fc(xm,Im,Rm,e);t=(r,i)=>y$(r,i,n),e[Z9]=t}return t}function y$(e,t,n){for(var r=0|e[fe],i=512&r?0:-1,o=e.length,s=512&r?1:0,a=o+(256&r?-1:0);s<a;s++){const c=e[s];if(c==null)continue;const l=s-i,u=Q9(n,l);u&&u(t,c,l)}if(256&r){r=e[o-1];for(const c in r)i=+c,Number.isNaN(i)||(o=r[i])!=null&&(a=Q9(n,i))&&a(t,o,i)}if(e=Ab(e))for(Dl(t,t.g.end()),n=0;n<e.length;n++)Dl(t,Ib(e[n])||new Uint8Array(0))}function Q9(e,t){var n=e[t];if(n)return n;if((n=e.ga)&&(n=n[t])){var r=(n=g$(n))[0].h;if(n=n[1]){const i=v$(n),o=fc(xm,Im,Rm,n).V;n=e.la?p$(o,i):(s,a,c)=>r(s,a,c,o,i)}else n=r;return e[t]=n}}function yu(e,t){if(Array.isArray(t)){var n=0|t[fe];if(4&n)return t;for(var r=0,i=0;r<t.length;r++){const o=e(t[r]);o!=null&&(t[i++]=o)}return i<r&&(t.length=i),Yt(t,-12289&(5|n)),2&n&&Object.freeze(t),t}}function Wn(e,t,n){return new vu(e,t,n)}function _u(e,t,n){return new vu(e,t,n)}function zn(e,t,n){$t(e,0|e[fe],t,n)}var wge=Em((function(e,t,n,r,i){return e.h===2&&(e=Qf(e,js([void 0,void 0],r,!0),i),aa(r=0|t[fe]),(i=ds(t,r,n))instanceof di?(2&i.L)!=0?((i=i.X()).push(e),$t(t,r,n,i)):i.Na(e):Array.isArray(i)?(2&(0|i[fe])&&$t(t,r,n,i=XN(i)),i.push(e)):$t(t,r,n,[e]),!0)}),(function(e,t,n,r,i){if(t instanceof di)t.forEach(((o,s)=>{X1(e,n,js([s,o],r,!1),i)}));else if(Array.isArray(t))for(let o=0;o<t.length;o++){const s=t[o];Array.isArray(s)&&X1(e,n,js(s,r,!1),i)}}));function _$(e,t,n){if(t=(function(r){if(r==null)return r;const i=typeof r;if(i==="bigint")return String(Ob(64,r));if(vm(r)){if(i==="string")return Db(r);if(i==="number")return jb(r)}})(t),t!=null&&(typeof t=="string"&&Y9(t),t!=null))switch(Mr(e,n,0),typeof t){case"number":e=e.g,$l(t),dl(e,dt,Ut);break;case"bigint":n=BigInt.asUintN(64,t),n=new S3(Number(n&BigInt(4294967295)),Number(n>>BigInt(32))),dl(e.g,n.h,n.g);break;default:n=Y9(t),dl(e.g,n.h,n.g)}}function b$(e,t,n){(t=hu(t))!=null&&t!=null&&(Mr(e,n,0),Sm(e.g,t))}function w$(e,t,n){(t=BN(t))!=null&&(Mr(e,n,0),e.g.g.push(t?1:0))}function S$(e,t,n){(t=Ol(t))!=null&&Cm(e,n,TN(t))}function C$(e,t,n,r,i){X1(e,n,m$(t,r),i)}function E$(e,t,n){(t=t==null||typeof t=="string"||Yf(t)||t instanceof qo?t:void 0)!=null&&Cm(e,n,zb(t).buffer)}function x$(e,t,n){return(e.h===5||e.h===2)&&(t=gu(t,0|t[fe],n,!1,!1),e.h==2?wm(e,b3,t):t.push(b3(e.g)),!0)}var Ao=Wn((function(e,t,n){if(e.h!==1)return!1;var r=e.g;e=_3(r);const i=_3(r);r=2*(i>>31)+1;const o=i>>>20&2047;return e=4294967296*(1048575&i)+e,zn(t,n,o==2047?e?NaN:r*(1/0):o==0?5e-324*r*e:r*Math.pow(2,o-1075)*(e+4503599627370496)),!0}),(function(e,t,n){(t=ca(t))!=null&&(Mr(e,n,1),e=e.g,(n=UN||=new DataView(new ArrayBuffer(8))).setFloat64(0,+t,!0),dt=n.getUint32(0,!0),Ut=n.getUint32(4,!0),cf(e,dt),cf(e,Ut))}),Ui()),Xt=Wn((function(e,t,n){return e.h===5&&(zn(t,n,b3(e.g)),!0)}),(function(e,t,n){(t=ca(t))!=null&&(Mr(e,n,5),e=e.g,Pb(t),cf(e,dt))}),rw),Sge=_u(x$,(function(e,t,n){if((t=yu(ca,t))!=null)for(let s=0;s<t.length;s++){var r=e,i=n,o=t[s];o!=null&&(Mr(r,i,5),r=r.g,Pb(o),cf(r,dt))}}),rw),cw=_u(x$,(function(e,t,n){if((t=yu(ca,t))!=null&&t.length){Mr(e,n,2),mu(e.g,4*t.length);for(let r=0;r<t.length;r++)n=e.g,Pb(t[r]),cf(n,dt)}}),rw),Zs=Wn((function(e,t,n){return e.h===0&&(zn(t,n,Yb(e.g,Nb)),!0)}),_$,l$),L2=Wn((function(e,t,n){return e.h===0&&(zn(t,n,(e=Yb(e.g,Nb))===0?void 0:e),!0)}),_$,l$),Cge=Wn((function(e,t,n){return e.h===0&&(zn(t,n,Yb(e.g,Mb)),!0)}),(function(e,t,n){if((t=ige(t))!=null&&(typeof t=="string"&&z9(t),t!=null))switch(Mr(e,n,0),typeof t){case"number":e=e.g,$l(t),dl(e,dt,Ut);break;case"bigint":n=BigInt.asUintN(64,t),n=new w3(Number(n&BigInt(4294967295)),Number(n>>BigInt(32))),dl(e.g,n.h,n.g);break;default:n=z9(t),dl(e.g,n.h,n.g)}}),Ui()),Bt=Wn((function(e,t,n){return e.h===0&&(zn(t,n,Xs(e.g)),!0)}),b$,nw),Lm=_u((function(e,t,n){return(e.h===0||e.h===2)&&(t=gu(t,0|t[fe],n,!1,!1),e.h==2?wm(e,Xs,t):t.push(Xs(e.g)),!0)}),(function(e,t,n){if((t=yu(hu,t))!=null&&t.length){n=Qb(e,n);for(let r=0;r<t.length;r++)Sm(e.g,t[r]);Jb(e,n)}}),nw),Yc=Wn((function(e,t,n){return e.h===0&&(zn(t,n,(e=Xs(e.g))===0?void 0:e),!0)}),b$,nw),Lt=Wn((function(e,t,n){return e.h===0&&(zn(t,n,Xb(e.g)),!0)}),w$,a$),fl=Wn((function(e,t,n){return e.h===0&&(zn(t,n,(e=Xb(e.g))===!1?void 0:e),!0)}),w$,a$),Tn=_u((function(e,t,n){return e.h===2&&(e=Zb(e),gu(t,0|t[fe],n,!1).push(e),!0)}),(function(e,t,n){if((t=yu(Ol,t))!=null)for(let s=0;s<t.length;s++){var r=e,i=n,o=t[s];o!=null&&Cm(r,i,TN(o))}}),tw),Is=Wn((function(e,t,n){return e.h===2&&(zn(t,n,(e=Zb(e))===""?void 0:e),!0)}),S$,tw),ot=Wn((function(e,t,n){return e.h===2&&(zn(t,n,Zb(e)),!0)}),S$,tw),nn=(function(e,t,n=ew){return new vu(e,t,n)})((function(e,t,n,r,i){return e.h===2&&(r=js(void 0,r,!0),gu(t,0|t[fe],n,!0).push(r),Qf(e,r,i),!0)}),(function(e,t,n,r,i){if(Array.isArray(t))for(let o=0;o<t.length;o++)C$(e,t[o],n,r,i)})),at=Em((function(e,t,n,r,i,o){return e.h===2&&(ZN(t,0|t[fe],o,n),Qf(e,t=Kb(t,r,n),i),!0)}),C$),I$=Wn((function(e,t,n){return e.h===2&&(zn(t,n,o$(e)),!0)}),E$,u$),Ege=_u((function(e,t,n){return(e.h===0||e.h===2)&&(t=gu(t,0|t[fe],n,!1,!1),e.h==2?wm(e,is,t):t.push(is(e.g)),!0)}),(function(e,t,n){if((t=yu(VN,t))!=null)for(let s=0;s<t.length;s++){var r=e,i=n,o=t[s];o!=null&&(Mr(r,i,0),mu(r.g,o))}}),c$),xge=Wn((function(e,t,n){return e.h===0&&(zn(t,n,(e=is(e.g))===0?void 0:e),!0)}),(function(e,t,n){(t=VN(t))!=null&&t!=null&&(Mr(e,n,0),mu(e.g,t))}),c$),hi=Wn((function(e,t,n){return e.h===0&&(zn(t,n,Xs(e.g)),!0)}),(function(e,t,n){(t=hu(t))!=null&&(t=parseInt(t,10),Mr(e,n,0),Sm(e.g,t))}),d$);class Ige{constructor(t,n){this.h=t,this.g=n,this.l=We,this.m=me,this.defaultValue=void 0}}function Bi(e,t){return new Ige(e,t)}function la(e,t){return(n,r)=>{if(Kh.length){const o=Kh.pop();o.o(r),R2(o.g,n,r),n=o}else n=new class{constructor(o,s){if(W9.length){const a=W9.pop();R2(a,o,s),o=a}else o=new class{constructor(a,c){this.h=null,this.m=!1,this.g=this.l=this.j=0,R2(this,a,c)}clear(){this.h=null,this.m=!1,this.g=this.l=this.j=0,this.ba=!1}}(o,s);this.g=o,this.l=this.g.g,this.h=this.m=-1,this.o(s)}o({fa:o=!1}={}){this.fa=o}}(n,r);try{const o=new e,s=o.u;aw(t)(s,n);var i=o}finally{n.g.clear(),n.m=-1,n.h=-1,Kh.length<100&&Kh.push(n)}return i}}function km(e){return function(){const t=new class{constructor(){this.l=[],this.h=0,this.g=new class{constructor(){this.g=[]}length(){return this.g.length}end(){const s=this.g;return this.g=[],s}}}};y$(this.u,t,fc(xm,Im,Rm,e)),Dl(t,t.g.end());const n=new Uint8Array(t.h),r=t.l,i=r.length;let o=0;for(let s=0;s<i;s++){const a=r[s];n.set(a,o),o+=a.length}return t.l=[n],n}}var J9=class extends ce{constructor(e){super(e)}},eS=[0,Is,Wn((function(e,t,n){return e.h===2&&(zn(t,n,(e=o$(e))===Ga()?void 0:e),!0)}),(function(e,t,n){if(t!=null){if(t instanceof ce){const r=t.Ra;return void(r&&(t=r(t),t!=null&&Cm(e,n,zb(t).buffer)))}if(Array.isArray(t))return}E$(e,t,n)}),u$)];let k2,tS=globalThis.trustedTypes;function nS(e){k2===void 0&&(k2=(function(){let n=null;if(!tS)return n;try{const r=i=>i;n=tS.createPolicy("goog#html",{createHTML:r,createScript:r,createScriptURL:r})}catch{}return n})());var t=k2;return new class{constructor(n){this.g=n}toString(){return this.g+""}}(t?t.createScriptURL(e):e)}function Rge(e,...t){if(t.length===0)return nS(e[0]);let n=e[0];for(let r=0;r<t.length;r++)n+=encodeURIComponent(t[r])+e[r+1];return nS(n)}var R$=[0,Bt,hi,Lt,-1,Lm,hi,-1],Lge=class extends ce{constructor(e){super(e)}},L$=[0,Lt,ot,Lt,hi,-1,_u((function(e,t,n){return(e.h===0||e.h===2)&&(t=gu(t,0|t[fe],n,!1,!1),e.h==2?wm(e,pge,t):t.push(Xs(e.g)),!0)}),(function(e,t,n){if((t=yu(hu,t))!=null&&t.length){n=Qb(e,n);for(let r=0;r<t.length;r++)Sm(e.g,t[r]);Jb(e,n)}}),d$),ot,-1,[0,Lt,-1],hi,Lt,-1],k$=[0,ot,-2],rS=class extends ce{constructor(e){super(e)}},T$=[0],A$=[0,Bt,Lt,1,Lt,-3],Pr=class extends ce{constructor(e){super(e,2)}},Zt={};Zt[336783863]=[0,ot,Lt,-1,Bt,[0,[1,2,3,4,5,6,7,8],at,T$,at,L$,at,k$,at,A$,at,R$,at,[0,ot,-2],at,[0,ot,hi],at,[0,hi,ot]],[0,ot],Lt,[0,[1,3],[2,4],at,[0,Lm],-1,at,[0,Tn],-1,nn,[0,ot,-1]],ot];var iS=[0,L2,-1,fl,-3,L2,Lm,Is,Yc,L2,-1,fl,Yc,fl,-2,Is];function Nr(e,t){y3(e,2,pu(t),"")}function vt(e,t){bm(e,3,t)}function qe(e,t){bm(e,4,t)}var qn=class extends ce{constructor(e){super(e,500)}o(e){return me(this,0,7,e)}},Cd=[-1,{}],oS=[0,ot,1,Cd],sS=[0,ot,Tn,Cd];function $r(e,t){z1(e,1,qn,t)}function St(e,t){bm(e,10,t)}function ze(e,t){bm(e,15,t)}var mr=class extends ce{constructor(e){super(e,500)}o(e){return me(this,0,1001,e)}},P$=[-500,nn,[-500,Is,-1,Tn,-3,[-2,Zt,Lt],nn,eS,Yc,-1,oS,sS,nn,[0,Is,fl],Is,iS,Yc,Tn,987,Tn],4,nn,[-500,ot,-1,[-1,{}],998,ot],nn,[-500,ot,Tn,-1,[-2,{},Lt],997,Tn,-1],Yc,nn,[-500,ot,Tn,Cd,998,Tn],Tn,Yc,oS,sS,nn,[0,Is,-1,Cd],Tn,-2,iS,Is,-1,fl,[0,fl,xge],978,Cd,nn,eS];mr.prototype.g=km(P$);var kge=la(mr,P$),Tge=class extends ce{constructor(e){super(e)}},M$=class extends ce{constructor(t){super(t)}g(){return rs(this,Tge,1)}},N$=[0,nn,[0,Bt,Xt,ot,-1]],Tm=la(M$,N$),Age=class extends ce{constructor(e){super(e)}},Pge=class extends ce{constructor(t){super(t)}},T2=class extends ce{constructor(e){super(e)}h(){return We(this,Age,2)}g(){return rs(this,Pge,5)}},$$=la(class extends ce{constructor(e){super(e)}},[0,Tn,Lm,cw,[0,hi,[0,Bt,-3],[0,Xt,-3],[0,Bt,-1,[0,nn,[0,Bt,-2]]],nn,[0,Xt,-1,ot,Xt]],ot,-1,Zs,nn,[0,Bt,Xt],Tn,Zs]),O$=class extends ce{constructor(e){super(e)}},hl=la(class extends ce{constructor(e){super(e)}},[0,nn,[0,Xt,-4]]),j$=class extends ce{constructor(e){super(e)}},Jf=la(class extends ce{constructor(e){super(e)}},[0,nn,[0,Xt,-4]]),Mge=class extends ce{constructor(e){super(e)}},Nge=[0,Bt,-1,cw,hi],D$=class extends ce{constructor(e){super(e)}};D$.prototype.g=km([0,Xt,-4,Zs]);var $ge=class extends ce{constructor(e){super(e)}},Oge=la(class extends ce{constructor(e){super(e)}},[0,nn,[0,1,Bt,ot,N$],Zs]),aS=class extends ce{constructor(e){super(e)}},jge=class extends ce{constructor(e){super(e)}oa(){const e=YN(this);return e??Ga()}},Dge=class extends ce{constructor(e){super(e)}},F$=[1,2],Fge=la(class extends ce{constructor(e){super(e)}},[0,nn,[0,F$,at,[0,cw],at,[0,I$],Bt,ot],Zs]),lw=class extends ce{constructor(e){super(e)}},H$=[0,ot,Bt,Xt,Tn,-1],cS=class extends ce{constructor(e){super(e)}},Hge=[0,Lt,-1],lS=class extends ce{constructor(e){super(e)}},jp=[1,2,3,4,5],Z1=class extends ce{constructor(e){super(e)}g(){return YN(this)!=null}h(){return fi(this,2)!=null}},Tt=class extends ce{constructor(e){super(e)}g(){return BN(jl(this,2))??!1}},U$=[0,I$,ot,[0,Bt,Zs,-1],[0,Cge,Zs]],Kt=[0,U$,Lt,[0,jp,at,A$,at,L$,at,R$,at,T$,at,k$],hi],Am=class extends ce{constructor(e){super(e)}},uw=[0,Kt,Xt,-1,Bt],Uge=Bi(502141897,Am);Zt[502141897]=uw;var Bge=la(class extends ce{constructor(e){super(e)}},[0,[0,hi,-1,Sge,Ege],Nge]),B$=class extends ce{constructor(e){super(e)}},V$=class extends ce{constructor(e){super(e)}},dw=[0,Kt,Xt,[0,Kt],Lt],q$=[0,Kt,uw,dw,Xt,[0,[0,U$]]],Vge=Bi(508968150,V$);Zt[508968150]=q$,Zt[508968149]=dw;var G$=class extends ce{constructor(e){super(e)}},qge=Bi(513916220,G$);Zt[513916220]=[0,Kt,q$,Bt];var Mc=class extends ce{constructor(e){super(e)}h(){return We(this,lw,2)}g(){gt(this,2)}},K$=[0,Kt,H$];Zt[478825465]=K$;var Gge=class extends ce{constructor(e){super(e)}},W$=class extends ce{constructor(e){super(e)}},fw=class extends ce{constructor(e){super(e)}},hw=class extends ce{constructor(e){super(e)}},z$=class extends ce{constructor(e){super(e)}},uS=[0,Kt,[0,Kt],K$,-1],Y$=[0,Kt,Xt,Bt],pw=[0,Kt,Xt],X$=[0,Kt,Y$,pw,Xt],Kge=Bi(479097054,z$);Zt[479097054]=[0,Kt,X$,uS],Zt[463370452]=uS,Zt[464864288]=Y$;var Wge=Bi(462713202,hw);Zt[462713202]=X$,Zt[474472470]=pw;var zge=class extends ce{constructor(e){super(e)}},Z$=class extends ce{constructor(e){super(e)}},Q$=class extends ce{constructor(e){super(e)}},J$=class extends ce{constructor(e){super(e)}},gw=[0,Kt,Xt,-1,Bt],C3=[0,Kt,Xt,Lt];J$.prototype.g=km([0,Kt,pw,[0,Kt],uw,dw,gw,C3]);var eO=class extends ce{constructor(e){super(e)}},Yge=Bi(456383383,eO);Zt[456383383]=[0,Kt,H$];var tO=class extends ce{constructor(e){super(e)}},Xge=Bi(476348187,tO);Zt[476348187]=[0,Kt,Hge];var nO=class extends ce{constructor(e){super(e)}},dS=class extends ce{constructor(e){super(e)}},rO=[0,hi,-1],Zge=Bi(458105876,class extends ce{constructor(e){super(e)}g(){var e=this.u;const t=0|e[fe],n=2&t;return e=(function(r,i,o){var s=dS;const a=2&i;let c=!1;if(o==null){if(a)return K9();o=[]}else if(o.constructor===di){if((2&o.L)==0||a)return o;o=o.X()}else Array.isArray(o)?c=!!(2&(0|o[fe])):o=[];if(a){if(!o.length)return K9();c||(c=!0,fu(o))}else c&&(c=!1,o=XN(o));return c||(64&(0|o[fe])?o[fe]&=-33:32&i&&fm(o,32)),$t(r,i,2,s=new di(o,s,oge,void 0)),s})(e,t,ds(e,t,2)),!n&&dS&&(e.ra=!0),e}});Zt[458105876]=[0,rO,wge,[!0,Zs,[0,ot,-1,Tn]]];var mw=class extends ce{constructor(e){super(e)}},iO=Bi(458105758,mw);Zt[458105758]=[0,Kt,ot,rO];var oO=class extends ce{constructor(e){super(e)}},Qge=Bi(443442058,oO);Zt[443442058]=[0,Kt,ot,Bt,Xt,Tn,-1,Lt,Xt],Zt[514774813]=gw;var sO=class extends ce{constructor(e){super(e)}},Jge=Bi(516587230,sO);function E3(e,t){return t=t?t.clone():new lw,e.displayNamesLocale!==void 0?gt(t,1,pu(e.displayNamesLocale)):e.displayNamesLocale===void 0&&gt(t,1),e.maxResults!==void 0?ao(t,2,e.maxResults):"maxResults"in e&&gt(t,2),e.scoreThreshold!==void 0?ue(t,3,e.scoreThreshold):"scoreThreshold"in e&&gt(t,3),e.categoryAllowlist!==void 0?Y1(t,4,e.categoryAllowlist):"categoryAllowlist"in e&&gt(t,4),e.categoryDenylist!==void 0?Y1(t,5,e.categoryDenylist):"categoryDenylist"in e&&gt(t,5),t}function vw(e,t=-1,n=""){return{categories:e.map((r=>({index:Jr(r,1)??0??-1,score:Vt(r,2)??0,categoryName:fi(r,3)??""??"",displayName:fi(r,4)??""??""}))),headIndex:t,headName:n}}function aO(e){var t=Ca(e,3,ca,Sa()),n=Ca(e,2,hu,Sa()),r=Ca(e,1,Ol,Sa()),i=Ca(e,9,Ol,Sa());const o={categories:[],keypoints:[]};for(let s=0;s<t.length;s++)o.categories.push({score:t[s],index:n[s]??-1,categoryName:r[s]??"",displayName:i[s]??""});if((t=We(e,T2,4)?.h())&&(o.boundingBox={originX:Jr(t,1)??0,originY:Jr(t,2)??0,width:Jr(t,3)??0,height:Jr(t,4)??0,angle:0}),We(e,T2,4)?.g().length)for(const s of We(e,T2,4).g())o.keypoints.push({x:$p(s,1)??0,y:$p(s,2)??0,score:$p(s,4)??0,label:fi(s,3)??""});return o}function Pm(e){const t=[];for(const n of rs(e,j$,1))t.push({x:Vt(n,1)??0,y:Vt(n,2)??0,z:Vt(n,3)??0,visibility:Vt(n,4)??0});return t}function Ed(e){const t=[];for(const n of rs(e,O$,1))t.push({x:Vt(n,1)??0,y:Vt(n,2)??0,z:Vt(n,3)??0,visibility:Vt(n,4)??0});return t}function fS(e){return Array.from(e,(t=>t>127?t-256:t))}function hS(e,t){if(e.length!==t.length)throw Error(`Cannot compute cosine similarity between embeddings of different sizes (${e.length} vs. ${t.length}).`);let n=0,r=0,i=0;for(let o=0;o<e.length;o++)n+=e[o]*t[o],r+=e[o]*e[o],i+=t[o]*t[o];if(r<=0||i<=0)throw Error("Cannot compute cosine similarity on embedding with 0 norm.");return n/Math.sqrt(r*i)}let Wh;Zt[516587230]=[0,Kt,gw,C3,Xt],Zt[518928384]=C3;const eme=new Uint8Array([0,97,115,109,1,0,0,0,1,5,1,96,0,1,123,3,2,1,0,10,10,1,8,0,65,0,253,15,253,98,11]);async function cO(){if(Wh===void 0)try{await WebAssembly.instantiate(eme),Wh=!0}catch{Wh=!1}return Wh}async function Ou(e,t=Rge``){const n=await cO()?"wasm_internal":"wasm_nosimd_internal";return{wasmLoaderPath:`${t}/${e}_${n}.js`,wasmBinaryPath:`${t}/${e}_${n}.wasm`}}var ya=class{};function lO(){var e=navigator;return typeof OffscreenCanvas<"u"&&(!(function(t=navigator){return(t=t.userAgent).includes("Safari")&&!t.includes("Chrome")})(e)||!!((e=e.userAgent.match(/Version\/([\d]+).*Safari/))&&e.length>=1&&Number(e[1])>=17))}async function pS(e){if(typeof importScripts!="function"){const t=document.createElement("script");return t.src=e.toString(),t.crossOrigin="anonymous",new Promise(((n,r)=>{t.addEventListener("load",(()=>{n()}),!1),t.addEventListener("error",(i=>{r(i)}),!1),document.body.appendChild(t)}))}importScripts(e.toString())}function uO(e){return e.videoWidth!==void 0?[e.videoWidth,e.videoHeight]:e.naturalWidth!==void 0?[e.naturalWidth,e.naturalHeight]:e.displayWidth!==void 0?[e.displayWidth,e.displayHeight]:[e.width,e.height]}function de(e,t,n){e.m||console.error("No wasm multistream support detected: ensure dependency inclusion of :gl_graph_runner_internal_multi_input target"),n(t=e.i.stringToNewUTF8(t)),e.i._free(t)}function gS(e,t,n){if(!e.i.canvas)throw Error("No OpenGL canvas configured.");if(n?e.i._bindTextureToStream(n):e.i._bindTextureToCanvas(),!(n=e.i.canvas.getContext("webgl2")||e.i.canvas.getContext("webgl")))throw Error("Failed to obtain WebGL context from the provided canvas. `getContext()` should only be invoked with `webgl` or `webgl2`.");e.i.gpuOriginForWebTexturesIsBottomLeft&&n.pixelStorei(n.UNPACK_FLIP_Y_WEBGL,!0),n.texImage2D(n.TEXTURE_2D,0,n.RGBA,n.RGBA,n.UNSIGNED_BYTE,t),e.i.gpuOriginForWebTexturesIsBottomLeft&&n.pixelStorei(n.UNPACK_FLIP_Y_WEBGL,!1);const[r,i]=uO(t);return!e.l||r===e.i.canvas.width&&i===e.i.canvas.height||(e.i.canvas.width=r,e.i.canvas.height=i),[r,i]}function mS(e,t,n){e.m||console.error("No wasm multistream support detected: ensure dependency inclusion of :gl_graph_runner_internal_multi_input target");const r=new Uint32Array(t.length);for(let i=0;i<t.length;i++)r[i]=e.i.stringToNewUTF8(t[i]);t=e.i._malloc(4*r.length),e.i.HEAPU32.set(r,t>>2),n(t);for(const i of r)e.i._free(i);e.i._free(t)}function Ki(e,t,n){e.i.simpleListeners=e.i.simpleListeners||{},e.i.simpleListeners[t]=n}function ps(e,t,n){let r=[];e.i.simpleListeners=e.i.simpleListeners||{},e.i.simpleListeners[t]=(i,o,s)=>{o?(n(r,s),r=[]):r.push(i)}}ya.forVisionTasks=function(e){return Ou("vision",e)},ya.forTextTasks=function(e){return Ou("text",e)},ya.forGenAiExperimentalTasks=function(e){return Ou("genai_experimental",e)},ya.forGenAiTasks=function(e){return Ou("genai",e)},ya.forAudioTasks=function(e){return Ou("audio",e)},ya.isSimdSupported=function(){return cO()};async function tme(e,t,n,r){return e=await(async(i,o,s,a,c)=>{if(o&&await pS(o),!self.ModuleFactory||s&&(await pS(s),!self.ModuleFactory))throw Error("ModuleFactory not set.");return self.Module&&c&&((o=self.Module).locateFile=c.locateFile,c.mainScriptUrlOrBlob&&(o.mainScriptUrlOrBlob=c.mainScriptUrlOrBlob)),c=await self.ModuleFactory(self.Module||c),self.ModuleFactory=self.Module=void 0,new i(c,a)})(e,n.wasmLoaderPath,n.assetLoaderPath,t,{locateFile:i=>i.endsWith(".wasm")?n.wasmBinaryPath.toString():n.assetBinaryPath&&i.endsWith(".data")?n.assetBinaryPath.toString():i}),await e.o(r),e}function A2(e,t){const n=We(e.baseOptions,Z1,1)||new Z1;typeof t=="string"?(gt(n,2,pu(t)),gt(n,1)):t instanceof Uint8Array&&(gt(n,1,Tb(t,!1)),gt(n,2)),me(e.baseOptions,0,1,n)}function vS(e){try{const t=e.G.length;if(t===1)throw Error(e.G[0].message);if(t>1)throw Error("Encountered multiple errors: "+e.G.map((n=>n.message)).join(", "))}finally{e.G=[]}}function ie(e,t){e.B=Math.max(e.B,t)}function Mm(e,t){e.A=new qn,Nr(e.A,"PassThroughCalculator"),vt(e.A,"free_memory"),qe(e.A,"free_memory_unused_out"),St(t,"free_memory"),$r(t,e.A)}function Fl(e,t){vt(e.A,t),qe(e.A,t+"_unused_out")}function Nm(e){e.g.addBoolToStream(!0,"free_memory",e.B)}var Dp=class{constructor(e){this.g=e,this.G=[],this.B=0,this.g.setAutoRenderToScreen(!1)}l(e,t=!0){if(t){const n=e.baseOptions||{};if(e.baseOptions?.modelAssetBuffer&&e.baseOptions?.modelAssetPath)throw Error("Cannot set both baseOptions.modelAssetPath and baseOptions.modelAssetBuffer");if(!(We(this.baseOptions,Z1,1)?.g()||We(this.baseOptions,Z1,1)?.h()||e.baseOptions?.modelAssetBuffer||e.baseOptions?.modelAssetPath))throw Error("Either baseOptions.modelAssetPath or baseOptions.modelAssetBuffer must be set");if((function(r,i){let o=We(r.baseOptions,lS,3);if(!o){var s=o=new lS,a=new rS;Sd(s,4,jp,a)}"delegate"in i&&(i.delegate==="GPU"?(i=o,s=new Lge,Sd(i,2,jp,s)):(i=o,s=new rS,Sd(i,4,jp,s))),me(r.baseOptions,0,3,o)})(this,n),n.modelAssetPath)return fetch(n.modelAssetPath.toString()).then((r=>{if(r.ok)return r.arrayBuffer();throw Error(`Failed to fetch model: ${n.modelAssetPath} (${r.status})`)})).then((r=>{try{this.g.i.FS_unlink("/model.dat")}catch{}this.g.i.FS_createDataFile("/","model.dat",new Uint8Array(r),!0,!1,!1),A2(this,"/model.dat"),this.m(),this.I()}));if(n.modelAssetBuffer instanceof Uint8Array)A2(this,n.modelAssetBuffer);else if(n.modelAssetBuffer)return(async function(r){const i=[];for(var o=0;;){const{done:s,value:a}=await r.read();if(s)break;i.push(a),o+=a.length}if(i.length===0)return new Uint8Array(0);if(i.length===1)return i[0];r=new Uint8Array(o),o=0;for(const s of i)r.set(s,o),o+=s.length;return r})(n.modelAssetBuffer).then((r=>{A2(this,r),this.m(),this.I()}))}return this.m(),this.I(),Promise.resolve()}I(){}da(){let e;if(this.g.da((t=>{e=kge(t)})),!e)throw Error("Failed to retrieve CalculatorGraphConfig");return e}setGraph(e,t){this.g.attachErrorListener(((n,r)=>{this.G.push(Error(r))})),this.g.La(),this.g.setGraph(e,t),this.A=void 0,vS(this)}finishProcessing(){this.g.finishProcessing(),vS(this)}close(){this.A=void 0,this.g.closeGraph()}};function Ko(e,t){if(!e)throw Error(`Unable to obtain required WebGL resource: ${t}`);return e}Dp.prototype.close=Dp.prototype.close,(function(e,t){e=e.split(".");var n,r=qa;for((e[0]in r)||r.execScript===void 0||r.execScript("var "+e[0]);e.length&&(n=e.shift());)e.length||t===void 0?r=r[n]&&r[n]!==Object.prototype[n]?r[n]:r[n]={}:r[n]=t})("TaskRunner",Dp);class nme{constructor(t,n,r,i){this.g=t,this.h=n,this.m=r,this.l=i}bind(){this.g.bindVertexArray(this.h)}close(){this.g.deleteVertexArray(this.h),this.g.deleteBuffer(this.m),this.g.deleteBuffer(this.l)}}function yS(e,t,n){const r=e.g;if(n=Ko(r.createShader(n),"Failed to create WebGL shader"),r.shaderSource(n,t),r.compileShader(n),!r.getShaderParameter(n,r.COMPILE_STATUS))throw Error(`Could not compile WebGL shader: ${r.getShaderInfoLog(n)}`);return r.attachShader(e.h,n),n}function _S(e,t){const n=e.g,r=Ko(n.createVertexArray(),"Failed to create vertex array");n.bindVertexArray(r);const i=Ko(n.createBuffer(),"Failed to create buffer");n.bindBuffer(n.ARRAY_BUFFER,i),n.enableVertexAttribArray(e.O),n.vertexAttribPointer(e.O,2,n.FLOAT,!1,0,0),n.bufferData(n.ARRAY_BUFFER,new Float32Array([-1,-1,-1,1,1,1,1,-1]),n.STATIC_DRAW);const o=Ko(n.createBuffer(),"Failed to create buffer");return n.bindBuffer(n.ARRAY_BUFFER,o),n.enableVertexAttribArray(e.I),n.vertexAttribPointer(e.I,2,n.FLOAT,!1,0,0),n.bufferData(n.ARRAY_BUFFER,new Float32Array(t?[0,1,0,0,1,0,1,1]:[0,0,0,1,1,1,1,0]),n.STATIC_DRAW),n.bindBuffer(n.ARRAY_BUFFER,null),n.bindVertexArray(null),new nme(n,r,i,o)}function yw(e,t){if(e.g){if(t!==e.g)throw Error("Cannot change GL context once initialized")}else e.g=t}function _w(e,t,n,r){return yw(e,t),e.h||(e.m(),e.C()),n?(e.s||(e.s=_S(e,!0)),n=e.s):(e.v||(e.v=_S(e,!1)),n=e.v),t.useProgram(e.h),n.bind(),e.l(),e=r(),n.g.bindVertexArray(null),e}function $m(e,t,n){return yw(e,t),e=Ko(t.createTexture(),"Failed to create texture"),t.bindTexture(t.TEXTURE_2D,e),t.texParameteri(t.TEXTURE_2D,t.TEXTURE_WRAP_S,t.CLAMP_TO_EDGE),t.texParameteri(t.TEXTURE_2D,t.TEXTURE_WRAP_T,t.CLAMP_TO_EDGE),t.texParameteri(t.TEXTURE_2D,t.TEXTURE_MIN_FILTER,n??t.LINEAR),t.texParameteri(t.TEXTURE_2D,t.TEXTURE_MAG_FILTER,n??t.LINEAR),t.bindTexture(t.TEXTURE_2D,null),e}function Om(e,t,n){yw(e,t),e.A||(e.A=Ko(t.createFramebuffer(),"Failed to create framebuffe.")),t.bindFramebuffer(t.FRAMEBUFFER,e.A),t.framebufferTexture2D(t.FRAMEBUFFER,t.COLOR_ATTACHMENT0,t.TEXTURE_2D,n,0)}function bw(e){e.g?.bindFramebuffer(e.g.FRAMEBUFFER,null)}var ww=class{G(){return`
  precision mediump float;
  varying vec2 vTex;
  uniform sampler2D inputTexture;
  void main() {
    gl_FragColor = texture2D(inputTexture, vTex);
  }
 `}m(){const e=this.g;if(this.h=Ko(e.createProgram(),"Failed to create WebGL program"),this.aa=yS(this,`
  attribute vec2 aVertex;
  attribute vec2 aTex;
  varying vec2 vTex;
  void main(void) {
    gl_Position = vec4(aVertex, 0.0, 1.0);
    vTex = aTex;
  }`,e.VERTEX_SHADER),this.Z=yS(this,this.G(),e.FRAGMENT_SHADER),e.linkProgram(this.h),!e.getProgramParameter(this.h,e.LINK_STATUS))throw Error(`Error during program linking: ${e.getProgramInfoLog(this.h)}`);this.O=e.getAttribLocation(this.h,"aVertex"),this.I=e.getAttribLocation(this.h,"aTex")}C(){}l(){}close(){if(this.h){const e=this.g;e.deleteProgram(this.h),e.deleteShader(this.aa),e.deleteShader(this.Z)}this.A&&this.g.deleteFramebuffer(this.A),this.v&&this.v.close(),this.s&&this.s.close()}};function $o(e,t){switch(t){case 0:return e.g.find((n=>n instanceof Uint8Array));case 1:return e.g.find((n=>n instanceof Float32Array));case 2:return e.g.find((n=>typeof WebGLTexture<"u"&&n instanceof WebGLTexture));default:throw Error(`Type is not supported: ${t}`)}}function x3(e){var t=$o(e,1);if(!t){if(t=$o(e,0))t=new Float32Array(t).map((r=>r/255));else{t=new Float32Array(e.width*e.height);const r=Hl(e);var n=Sw(e);if(Om(n,r,dO(e)),"iPad Simulator;iPhone Simulator;iPod Simulator;iPad;iPhone;iPod".split(";").includes(navigator.platform)||navigator.userAgent.includes("Mac")&&"document"in self&&"ontouchend"in self.document){n=new Float32Array(e.width*e.height*4),r.readPixels(0,0,e.width,e.height,r.RGBA,r.FLOAT,n);for(let i=0,o=0;i<t.length;++i,o+=4)t[i]=n[o]}else r.readPixels(0,0,e.width,e.height,r.RED,r.FLOAT,t)}e.g.push(t)}return t}function dO(e){let t=$o(e,2);if(!t){const n=Hl(e);t=hO(e);const r=x3(e),i=fO(e);n.texImage2D(n.TEXTURE_2D,0,i,e.width,e.height,0,n.RED,n.FLOAT,r),I3(e)}return t}function Hl(e){if(!e.canvas)throw Error("Conversion to different image formats require that a canvas is passed when initializing the image.");return e.h||(e.h=Ko(e.canvas.getContext("webgl2"),"You cannot use a canvas that is already bound to a different type of rendering context.")),e.h}function fO(e){if(e=Hl(e),!zh)if(e.getExtension("EXT_color_buffer_float")&&e.getExtension("OES_texture_float_linear")&&e.getExtension("EXT_float_blend"))zh=e.R32F;else{if(!e.getExtension("EXT_color_buffer_half_float"))throw Error("GPU does not fully support 4-channel float32 or float16 formats");zh=e.R16F}return zh}function Sw(e){return e.l||(e.l=new ww),e.l}function hO(e){const t=Hl(e);t.viewport(0,0,e.width,e.height),t.activeTexture(t.TEXTURE0);let n=$o(e,2);return n||(n=$m(Sw(e),t,e.m?t.LINEAR:t.NEAREST),e.g.push(n),e.j=!0),t.bindTexture(t.TEXTURE_2D,n),n}function I3(e){e.h.bindTexture(e.h.TEXTURE_2D,null)}var zh,ln=class{constructor(e,t,n,r,i,o,s){this.g=e,this.m=t,this.j=n,this.canvas=r,this.l=i,this.width=o,this.height=s,this.j&&--bS===0&&console.error("You seem to be creating MPMask instances without invoking .close(). This leaks resources.")}Fa(){return!!$o(this,0)}ja(){return!!$o(this,1)}P(){return!!$o(this,2)}ia(){return(t=$o(e=this,0))||(t=x3(e),t=new Uint8Array(t.map((n=>255*n))),e.g.push(t)),t;var e,t}ha(){return x3(this)}M(){return dO(this)}clone(){const e=[];for(const t of this.g){let n;if(t instanceof Uint8Array)n=new Uint8Array(t);else if(t instanceof Float32Array)n=new Float32Array(t);else{if(!(t instanceof WebGLTexture))throw Error(`Type is not supported: ${t}`);{const r=Hl(this),i=Sw(this);r.activeTexture(r.TEXTURE1),n=$m(i,r,this.m?r.LINEAR:r.NEAREST),r.bindTexture(r.TEXTURE_2D,n);const o=fO(this);r.texImage2D(r.TEXTURE_2D,0,o,this.width,this.height,0,r.RED,r.FLOAT,null),r.bindTexture(r.TEXTURE_2D,null),Om(i,r,n),_w(i,r,!1,(()=>{hO(this),r.clearColor(0,0,0,0),r.clear(r.COLOR_BUFFER_BIT),r.drawArrays(r.TRIANGLE_FAN,0,4),I3(this)})),bw(i),I3(this)}}e.push(n)}return new ln(e,this.m,this.P(),this.canvas,this.l,this.width,this.height)}close(){this.j&&Hl(this).deleteTexture($o(this,2)),bS=-1}};ln.prototype.close=ln.prototype.close,ln.prototype.clone=ln.prototype.clone,ln.prototype.getAsWebGLTexture=ln.prototype.M,ln.prototype.getAsFloat32Array=ln.prototype.ha,ln.prototype.getAsUint8Array=ln.prototype.ia,ln.prototype.hasWebGLTexture=ln.prototype.P,ln.prototype.hasFloat32Array=ln.prototype.ja,ln.prototype.hasUint8Array=ln.prototype.Fa;var bS=250;function Qi(e,t){switch(t){case 0:return e.g.find((n=>n instanceof ImageData));case 1:return e.g.find((n=>typeof ImageBitmap<"u"&&n instanceof ImageBitmap));case 2:return e.g.find((n=>typeof WebGLTexture<"u"&&n instanceof WebGLTexture));default:throw Error(`Type is not supported: ${t}`)}}function pO(e){var t=Qi(e,0);if(!t){t=Ul(e);const n=jm(e),r=new Uint8Array(e.width*e.height*4);Om(n,t,Fp(e)),t.readPixels(0,0,e.width,e.height,t.RGBA,t.UNSIGNED_BYTE,r),bw(n),t=new ImageData(new Uint8ClampedArray(r.buffer),e.width,e.height),e.g.push(t)}return t}function Fp(e){let t=Qi(e,2);if(!t){const n=Ul(e);t=Hp(e);const r=Qi(e,1)||pO(e);n.texImage2D(n.TEXTURE_2D,0,n.RGBA,n.RGBA,n.UNSIGNED_BYTE,r),nd(e)}return t}function Ul(e){if(!e.canvas)throw Error("Conversion to different image formats require that a canvas is passed when initializing the image.");return e.h||(e.h=Ko(e.canvas.getContext("webgl2"),"You cannot use a canvas that is already bound to a different type of rendering context.")),e.h}function jm(e){return e.l||(e.l=new ww),e.l}function Hp(e){const t=Ul(e);t.viewport(0,0,e.width,e.height),t.activeTexture(t.TEXTURE0);let n=Qi(e,2);return n||(n=$m(jm(e),t),e.g.push(n),e.m=!0),t.bindTexture(t.TEXTURE_2D,n),n}function nd(e){e.h.bindTexture(e.h.TEXTURE_2D,null)}function wS(e){const t=Ul(e);return _w(jm(e),t,!0,(()=>(function(n,r){const i=n.canvas;if(i.width===n.width&&i.height===n.height)return r();const o=i.width,s=i.height;return i.width=n.width,i.height=n.height,n=r(),i.width=o,i.height=s,n})(e,(()=>{if(t.bindFramebuffer(t.FRAMEBUFFER,null),t.clearColor(0,0,0,0),t.clear(t.COLOR_BUFFER_BIT),t.drawArrays(t.TRIANGLE_FAN,0,4),!(e.canvas instanceof OffscreenCanvas))throw Error("Conversion to ImageBitmap requires that the MediaPipe Tasks is initialized with an OffscreenCanvas");return e.canvas.transferToImageBitmap()}))))}var un=class{constructor(e,t,n,r,i,o,s){this.g=e,this.j=t,this.m=n,this.canvas=r,this.l=i,this.width=o,this.height=s,(this.j||this.m)&&--SS===0&&console.error("You seem to be creating MPImage instances without invoking .close(). This leaks resources.")}Ea(){return!!Qi(this,0)}ka(){return!!Qi(this,1)}P(){return!!Qi(this,2)}Ca(){return pO(this)}Ba(){var e=Qi(this,1);return e||(Fp(this),Hp(this),e=wS(this),nd(this),this.g.push(e),this.j=!0),e}M(){return Fp(this)}clone(){const e=[];for(const t of this.g){let n;if(t instanceof ImageData)n=new ImageData(t.data,this.width,this.height);else if(t instanceof WebGLTexture){const r=Ul(this),i=jm(this);r.activeTexture(r.TEXTURE1),n=$m(i,r),r.bindTexture(r.TEXTURE_2D,n),r.texImage2D(r.TEXTURE_2D,0,r.RGBA,this.width,this.height,0,r.RGBA,r.UNSIGNED_BYTE,null),r.bindTexture(r.TEXTURE_2D,null),Om(i,r,n),_w(i,r,!1,(()=>{Hp(this),r.clearColor(0,0,0,0),r.clear(r.COLOR_BUFFER_BIT),r.drawArrays(r.TRIANGLE_FAN,0,4),nd(this)})),bw(i),nd(this)}else{if(!(t instanceof ImageBitmap))throw Error(`Type is not supported: ${t}`);Fp(this),Hp(this),n=wS(this),nd(this)}e.push(n)}return new un(e,this.ka(),this.P(),this.canvas,this.l,this.width,this.height)}close(){this.j&&Qi(this,1).close(),this.m&&Ul(this).deleteTexture(Qi(this,2)),SS=-1}};un.prototype.close=un.prototype.close,un.prototype.clone=un.prototype.clone,un.prototype.getAsWebGLTexture=un.prototype.M,un.prototype.getAsImageBitmap=un.prototype.Ba,un.prototype.getAsImageData=un.prototype.Ca,un.prototype.hasWebGLTexture=un.prototype.P,un.prototype.hasImageBitmap=un.prototype.ka,un.prototype.hasImageData=un.prototype.Ea;var SS=250;function Vi(...e){return e.map((([t,n])=>({start:t,end:n})))}const rme=(function(e){return class extends e{La(){this.i._registerModelResourcesGraphService()}}})((CS=class{constructor(e,t){this.l=!0,this.i=e,this.g=null,this.h=0,this.m=typeof this.i._addIntToInputStream=="function",t!==void 0?this.i.canvas=t:lO()?this.i.canvas=new OffscreenCanvas(1,1):(console.warn("OffscreenCanvas not supported and GraphRunner constructor glCanvas parameter is undefined. Creating backup canvas."),this.i.canvas=document.createElement("canvas"))}async initializeGraph(e){const t=await(await fetch(e)).arrayBuffer();e=!(e.endsWith(".pbtxt")||e.endsWith(".textproto")),this.setGraph(new Uint8Array(t),e)}setGraphFromString(e){this.setGraph(new TextEncoder().encode(e),!1)}setGraph(e,t){const n=e.length,r=this.i._malloc(n);this.i.HEAPU8.set(e,r),t?this.i._changeBinaryGraph(n,r):this.i._changeTextGraph(n,r),this.i._free(r)}configureAudio(e,t,n,r,i){this.i._configureAudio||console.warn('Attempting to use configureAudio without support for input audio. Is build dep ":gl_graph_runner_audio" missing?'),de(this,r||"input_audio",(o=>{de(this,i=i||"audio_header",(s=>{this.i._configureAudio(o,s,e,t??0,n)}))}))}setAutoResizeCanvas(e){this.l=e}setAutoRenderToScreen(e){this.i._setAutoRenderToScreen(e)}setGpuBufferVerticalFlip(e){this.i.gpuOriginForWebTexturesIsBottomLeft=e}da(e){Ki(this,"__graph_config__",(t=>{e(t)})),de(this,"__graph_config__",(t=>{this.i._getGraphConfig(t,void 0)})),delete this.i.simpleListeners.__graph_config__}attachErrorListener(e){this.i.errorListener=e}attachEmptyPacketListener(e,t){this.i.emptyPacketListeners=this.i.emptyPacketListeners||{},this.i.emptyPacketListeners[e]=t}addAudioToStream(e,t,n){this.addAudioToStreamWithShape(e,0,0,t,n)}addAudioToStreamWithShape(e,t,n,r,i){const o=4*e.length;this.h!==o&&(this.g&&this.i._free(this.g),this.g=this.i._malloc(o),this.h=o),this.i.HEAPF32.set(e,this.g/4),de(this,r,(s=>{this.i._addAudioToInputStream(this.g,t,n,s,i)}))}addGpuBufferToStream(e,t,n){de(this,t,(r=>{const[i,o]=gS(this,e,r);this.i._addBoundTextureToStream(r,i,o,n)}))}addBoolToStream(e,t,n){de(this,t,(r=>{this.i._addBoolToInputStream(e,r,n)}))}addDoubleToStream(e,t,n){de(this,t,(r=>{this.i._addDoubleToInputStream(e,r,n)}))}addFloatToStream(e,t,n){de(this,t,(r=>{this.i._addFloatToInputStream(e,r,n)}))}addIntToStream(e,t,n){de(this,t,(r=>{this.i._addIntToInputStream(e,r,n)}))}addUintToStream(e,t,n){de(this,t,(r=>{this.i._addUintToInputStream(e,r,n)}))}addStringToStream(e,t,n){de(this,t,(r=>{de(this,e,(i=>{this.i._addStringToInputStream(i,r,n)}))}))}addStringRecordToStream(e,t,n){de(this,t,(r=>{mS(this,Object.keys(e),(i=>{mS(this,Object.values(e),(o=>{this.i._addFlatHashMapToInputStream(i,o,Object.keys(e).length,r,n)}))}))}))}addProtoToStream(e,t,n,r){de(this,n,(i=>{de(this,t,(o=>{const s=this.i._malloc(e.length);this.i.HEAPU8.set(e,s),this.i._addProtoToInputStream(s,e.length,o,i,r),this.i._free(s)}))}))}addEmptyPacketToStream(e,t){de(this,e,(n=>{this.i._addEmptyPacketToInputStream(n,t)}))}addBoolVectorToStream(e,t,n){de(this,t,(r=>{const i=this.i._allocateBoolVector(e.length);if(!i)throw Error("Unable to allocate new bool vector on heap.");for(const o of e)this.i._addBoolVectorEntry(i,o);this.i._addBoolVectorToInputStream(i,r,n)}))}addDoubleVectorToStream(e,t,n){de(this,t,(r=>{const i=this.i._allocateDoubleVector(e.length);if(!i)throw Error("Unable to allocate new double vector on heap.");for(const o of e)this.i._addDoubleVectorEntry(i,o);this.i._addDoubleVectorToInputStream(i,r,n)}))}addFloatVectorToStream(e,t,n){de(this,t,(r=>{const i=this.i._allocateFloatVector(e.length);if(!i)throw Error("Unable to allocate new float vector on heap.");for(const o of e)this.i._addFloatVectorEntry(i,o);this.i._addFloatVectorToInputStream(i,r,n)}))}addIntVectorToStream(e,t,n){de(this,t,(r=>{const i=this.i._allocateIntVector(e.length);if(!i)throw Error("Unable to allocate new int vector on heap.");for(const o of e)this.i._addIntVectorEntry(i,o);this.i._addIntVectorToInputStream(i,r,n)}))}addUintVectorToStream(e,t,n){de(this,t,(r=>{const i=this.i._allocateUintVector(e.length);if(!i)throw Error("Unable to allocate new unsigned int vector on heap.");for(const o of e)this.i._addUintVectorEntry(i,o);this.i._addUintVectorToInputStream(i,r,n)}))}addStringVectorToStream(e,t,n){de(this,t,(r=>{const i=this.i._allocateStringVector(e.length);if(!i)throw Error("Unable to allocate new string vector on heap.");for(const o of e)de(this,o,(s=>{this.i._addStringVectorEntry(i,s)}));this.i._addStringVectorToInputStream(i,r,n)}))}addBoolToInputSidePacket(e,t){de(this,t,(n=>{this.i._addBoolToInputSidePacket(e,n)}))}addDoubleToInputSidePacket(e,t){de(this,t,(n=>{this.i._addDoubleToInputSidePacket(e,n)}))}addFloatToInputSidePacket(e,t){de(this,t,(n=>{this.i._addFloatToInputSidePacket(e,n)}))}addIntToInputSidePacket(e,t){de(this,t,(n=>{this.i._addIntToInputSidePacket(e,n)}))}addUintToInputSidePacket(e,t){de(this,t,(n=>{this.i._addUintToInputSidePacket(e,n)}))}addStringToInputSidePacket(e,t){de(this,t,(n=>{de(this,e,(r=>{this.i._addStringToInputSidePacket(r,n)}))}))}addProtoToInputSidePacket(e,t,n){de(this,n,(r=>{de(this,t,(i=>{const o=this.i._malloc(e.length);this.i.HEAPU8.set(e,o),this.i._addProtoToInputSidePacket(o,e.length,i,r),this.i._free(o)}))}))}addBoolVectorToInputSidePacket(e,t){de(this,t,(n=>{const r=this.i._allocateBoolVector(e.length);if(!r)throw Error("Unable to allocate new bool vector on heap.");for(const i of e)this.i._addBoolVectorEntry(r,i);this.i._addBoolVectorToInputSidePacket(r,n)}))}addDoubleVectorToInputSidePacket(e,t){de(this,t,(n=>{const r=this.i._allocateDoubleVector(e.length);if(!r)throw Error("Unable to allocate new double vector on heap.");for(const i of e)this.i._addDoubleVectorEntry(r,i);this.i._addDoubleVectorToInputSidePacket(r,n)}))}addFloatVectorToInputSidePacket(e,t){de(this,t,(n=>{const r=this.i._allocateFloatVector(e.length);if(!r)throw Error("Unable to allocate new float vector on heap.");for(const i of e)this.i._addFloatVectorEntry(r,i);this.i._addFloatVectorToInputSidePacket(r,n)}))}addIntVectorToInputSidePacket(e,t){de(this,t,(n=>{const r=this.i._allocateIntVector(e.length);if(!r)throw Error("Unable to allocate new int vector on heap.");for(const i of e)this.i._addIntVectorEntry(r,i);this.i._addIntVectorToInputSidePacket(r,n)}))}addUintVectorToInputSidePacket(e,t){de(this,t,(n=>{const r=this.i._allocateUintVector(e.length);if(!r)throw Error("Unable to allocate new unsigned int vector on heap.");for(const i of e)this.i._addUintVectorEntry(r,i);this.i._addUintVectorToInputSidePacket(r,n)}))}addStringVectorToInputSidePacket(e,t){de(this,t,(n=>{const r=this.i._allocateStringVector(e.length);if(!r)throw Error("Unable to allocate new string vector on heap.");for(const i of e)de(this,i,(o=>{this.i._addStringVectorEntry(r,o)}));this.i._addStringVectorToInputSidePacket(r,n)}))}attachBoolListener(e,t){Ki(this,e,t),de(this,e,(n=>{this.i._attachBoolListener(n)}))}attachBoolVectorListener(e,t){ps(this,e,t),de(this,e,(n=>{this.i._attachBoolVectorListener(n)}))}attachIntListener(e,t){Ki(this,e,t),de(this,e,(n=>{this.i._attachIntListener(n)}))}attachIntVectorListener(e,t){ps(this,e,t),de(this,e,(n=>{this.i._attachIntVectorListener(n)}))}attachUintListener(e,t){Ki(this,e,t),de(this,e,(n=>{this.i._attachUintListener(n)}))}attachUintVectorListener(e,t){ps(this,e,t),de(this,e,(n=>{this.i._attachUintVectorListener(n)}))}attachDoubleListener(e,t){Ki(this,e,t),de(this,e,(n=>{this.i._attachDoubleListener(n)}))}attachDoubleVectorListener(e,t){ps(this,e,t),de(this,e,(n=>{this.i._attachDoubleVectorListener(n)}))}attachFloatListener(e,t){Ki(this,e,t),de(this,e,(n=>{this.i._attachFloatListener(n)}))}attachFloatVectorListener(e,t){ps(this,e,t),de(this,e,(n=>{this.i._attachFloatVectorListener(n)}))}attachStringListener(e,t){Ki(this,e,t),de(this,e,(n=>{this.i._attachStringListener(n)}))}attachStringVectorListener(e,t){ps(this,e,t),de(this,e,(n=>{this.i._attachStringVectorListener(n)}))}attachProtoListener(e,t,n){Ki(this,e,t),de(this,e,(r=>{this.i._attachProtoListener(r,n||!1)}))}attachProtoVectorListener(e,t,n){ps(this,e,t),de(this,e,(r=>{this.i._attachProtoVectorListener(r,n||!1)}))}attachAudioListener(e,t,n){this.i._attachAudioListener||console.warn('Attempting to use attachAudioListener without support for output audio. Is build dep ":gl_graph_runner_audio_out" missing?'),Ki(this,e,((r,i)=>{r=new Float32Array(r.buffer,r.byteOffset,r.length/4),t(r,i)})),de(this,e,(r=>{this.i._attachAudioListener(r,n||!1)}))}finishProcessing(){this.i._waitUntilIdle()}closeGraph(){this.i._closeGraph(),this.i.simpleListeners=void 0,this.i.emptyPacketListeners=void 0}},class extends CS{get ea(){return this.i}qa(e,t,n){de(this,t,(r=>{const[i,o]=gS(this,e,r);this.ea._addBoundTextureAsImageToStream(r,i,o,n)}))}U(e,t){Ki(this,e,t),de(this,e,(n=>{this.ea._attachImageListener(n)}))}ca(e,t){ps(this,e,t),de(this,e,(n=>{this.ea._attachImageVectorListener(n)}))}}));var CS,mi=class extends rme{};async function Ue(e,t,n){return(async function(r,i,o,s){return tme(r,i,o,s)})(e,n.canvas??(lO()?void 0:document.createElement("canvas")),t,n)}function gO(e,t,n,r){if(e.T){const o=new D$;if(n?.regionOfInterest){if(!e.pa)throw Error("This task doesn't support region-of-interest.");var i=n.regionOfInterest;if(i.left>=i.right||i.top>=i.bottom)throw Error("Expected RectF with left < right and top < bottom.");if(i.left<0||i.top<0||i.right>1||i.bottom>1)throw Error("Expected RectF values to be in [0,1].");ue(o,1,(i.left+i.right)/2),ue(o,2,(i.top+i.bottom)/2),ue(o,4,i.right-i.left),ue(o,3,i.bottom-i.top)}else ue(o,1,.5),ue(o,2,.5),ue(o,4,1),ue(o,3,1);if(n?.rotationDegrees){if(n?.rotationDegrees%90!=0)throw Error("Expected rotation to be a multiple of 90Â°.");if(ue(o,5,-Math.PI*n.rotationDegrees/180),n?.rotationDegrees%180!=0){const[s,a]=uO(t);n=Vt(o,3)*a/s,i=Vt(o,4)*s/a,ue(o,4,n),ue(o,3,i)}}e.g.addProtoToStream(o.g(),"mediapipe.NormalizedRect",e.T,r)}e.g.qa(t,e.aa,r??performance.now()),e.finishProcessing()}function vi(e,t,n){if(e.baseOptions?.g())throw Error("Task is not initialized with image mode. 'runningMode' must be set to 'IMAGE'.");gO(e,t,n,e.B+1)}function po(e,t,n,r){if(!e.baseOptions?.g())throw Error("Task is not initialized with video mode. 'runningMode' must be set to 'VIDEO'.");gO(e,t,n,r)}function Bl(e,t,n,r){var i=t.data;const o=t.width,s=o*(t=t.height);if((i instanceof Uint8Array||i instanceof Float32Array)&&i.length!==s)throw Error("Unsupported channel count: "+i.length/s);return e=new ln([i],n,!1,e.g.i.canvas,e.O,o,t),r?e.clone():e}var gr=class extends Dp{constructor(e,t,n,r){super(e),this.g=e,this.aa=t,this.T=n,this.pa=r,this.O=new ww}l(e,t=!0){if("runningMode"in e&&af(this.baseOptions,2,!!e.runningMode&&e.runningMode!=="IMAGE"),e.canvas!==void 0&&this.g.i.canvas!==e.canvas)throw Error("You must create a new task to reset the canvas.");return super.l(e,t)}close(){this.O.close(),super.close()}};gr.prototype.close=gr.prototype.close;var Fr=class extends gr{constructor(e,t){super(new mi(e,t),"image_in","norm_rect_in",!1),this.j={detections:[]},me(e=this.h=new Am,0,1,t=new Tt),ue(this.h,2,.5),ue(this.h,3,.3)}get baseOptions(){return We(this.h,Tt,1)}set baseOptions(e){me(this.h,0,1,e)}o(e){return"minDetectionConfidence"in e&&ue(this.h,2,e.minDetectionConfidence??.5),"minSuppressionThreshold"in e&&ue(this.h,3,e.minSuppressionThreshold??.3),this.l(e)}D(e,t){return this.j={detections:[]},vi(this,e,t),this.j}F(e,t,n){return this.j={detections:[]},po(this,e,n,t),this.j}m(){var e=new mr;St(e,"image_in"),St(e,"norm_rect_in"),ze(e,"detections");const t=new Pr;Hi(t,Uge,this.h);const n=new qn;Nr(n,"mediapipe.tasks.vision.face_detector.FaceDetectorGraph"),vt(n,"IMAGE:image_in"),vt(n,"NORM_RECT:norm_rect_in"),qe(n,"DETECTIONS:detections"),n.o(t),$r(e,n),this.g.attachProtoVectorListener("detections",((r,i)=>{for(const o of r)r=$$(o),this.j.detections.push(aO(r));ie(this,i)})),this.g.attachEmptyPacketListener("detections",(r=>{ie(this,r)})),e=e.g(),this.setGraph(new Uint8Array(e),!0)}};Fr.prototype.detectForVideo=Fr.prototype.F,Fr.prototype.detect=Fr.prototype.D,Fr.prototype.setOptions=Fr.prototype.o,Fr.createFromModelPath=async function(e,t){return Ue(Fr,e,{baseOptions:{modelAssetPath:t}})},Fr.createFromModelBuffer=function(e,t){return Ue(Fr,e,{baseOptions:{modelAssetBuffer:t}})},Fr.createFromOptions=function(e,t){return Ue(Fr,e,t)};var Cw=Vi([61,146],[146,91],[91,181],[181,84],[84,17],[17,314],[314,405],[405,321],[321,375],[375,291],[61,185],[185,40],[40,39],[39,37],[37,0],[0,267],[267,269],[269,270],[270,409],[409,291],[78,95],[95,88],[88,178],[178,87],[87,14],[14,317],[317,402],[402,318],[318,324],[324,308],[78,191],[191,80],[80,81],[81,82],[82,13],[13,312],[312,311],[311,310],[310,415],[415,308]),Ew=Vi([263,249],[249,390],[390,373],[373,374],[374,380],[380,381],[381,382],[382,362],[263,466],[466,388],[388,387],[387,386],[386,385],[385,384],[384,398],[398,362]),xw=Vi([276,283],[283,282],[282,295],[295,285],[300,293],[293,334],[334,296],[296,336]),mO=Vi([474,475],[475,476],[476,477],[477,474]),Iw=Vi([33,7],[7,163],[163,144],[144,145],[145,153],[153,154],[154,155],[155,133],[33,246],[246,161],[161,160],[160,159],[159,158],[158,157],[157,173],[173,133]),Rw=Vi([46,53],[53,52],[52,65],[65,55],[70,63],[63,105],[105,66],[66,107]),vO=Vi([469,470],[470,471],[471,472],[472,469]),Lw=Vi([10,338],[338,297],[297,332],[332,284],[284,251],[251,389],[389,356],[356,454],[454,323],[323,361],[361,288],[288,397],[397,365],[365,379],[379,378],[378,400],[400,377],[377,152],[152,148],[148,176],[176,149],[149,150],[150,136],[136,172],[172,58],[58,132],[132,93],[93,234],[234,127],[127,162],[162,21],[21,54],[54,103],[103,67],[67,109],[109,10]),yO=[...Cw,...Ew,...xw,...Iw,...Rw,...Lw],_O=Vi([127,34],[34,139],[139,127],[11,0],[0,37],[37,11],[232,231],[231,120],[120,232],[72,37],[37,39],[39,72],[128,121],[121,47],[47,128],[232,121],[121,128],[128,232],[104,69],[69,67],[67,104],[175,171],[171,148],[148,175],[118,50],[50,101],[101,118],[73,39],[39,40],[40,73],[9,151],[151,108],[108,9],[48,115],[115,131],[131,48],[194,204],[204,211],[211,194],[74,40],[40,185],[185,74],[80,42],[42,183],[183,80],[40,92],[92,186],[186,40],[230,229],[229,118],[118,230],[202,212],[212,214],[214,202],[83,18],[18,17],[17,83],[76,61],[61,146],[146,76],[160,29],[29,30],[30,160],[56,157],[157,173],[173,56],[106,204],[204,194],[194,106],[135,214],[214,192],[192,135],[203,165],[165,98],[98,203],[21,71],[71,68],[68,21],[51,45],[45,4],[4,51],[144,24],[24,23],[23,144],[77,146],[146,91],[91,77],[205,50],[50,187],[187,205],[201,200],[200,18],[18,201],[91,106],[106,182],[182,91],[90,91],[91,181],[181,90],[85,84],[84,17],[17,85],[206,203],[203,36],[36,206],[148,171],[171,140],[140,148],[92,40],[40,39],[39,92],[193,189],[189,244],[244,193],[159,158],[158,28],[28,159],[247,246],[246,161],[161,247],[236,3],[3,196],[196,236],[54,68],[68,104],[104,54],[193,168],[168,8],[8,193],[117,228],[228,31],[31,117],[189,193],[193,55],[55,189],[98,97],[97,99],[99,98],[126,47],[47,100],[100,126],[166,79],[79,218],[218,166],[155,154],[154,26],[26,155],[209,49],[49,131],[131,209],[135,136],[136,150],[150,135],[47,126],[126,217],[217,47],[223,52],[52,53],[53,223],[45,51],[51,134],[134,45],[211,170],[170,140],[140,211],[67,69],[69,108],[108,67],[43,106],[106,91],[91,43],[230,119],[119,120],[120,230],[226,130],[130,247],[247,226],[63,53],[53,52],[52,63],[238,20],[20,242],[242,238],[46,70],[70,156],[156,46],[78,62],[62,96],[96,78],[46,53],[53,63],[63,46],[143,34],[34,227],[227,143],[123,117],[117,111],[111,123],[44,125],[125,19],[19,44],[236,134],[134,51],[51,236],[216,206],[206,205],[205,216],[154,153],[153,22],[22,154],[39,37],[37,167],[167,39],[200,201],[201,208],[208,200],[36,142],[142,100],[100,36],[57,212],[212,202],[202,57],[20,60],[60,99],[99,20],[28,158],[158,157],[157,28],[35,226],[226,113],[113,35],[160,159],[159,27],[27,160],[204,202],[202,210],[210,204],[113,225],[225,46],[46,113],[43,202],[202,204],[204,43],[62,76],[76,77],[77,62],[137,123],[123,116],[116,137],[41,38],[38,72],[72,41],[203,129],[129,142],[142,203],[64,98],[98,240],[240,64],[49,102],[102,64],[64,49],[41,73],[73,74],[74,41],[212,216],[216,207],[207,212],[42,74],[74,184],[184,42],[169,170],[170,211],[211,169],[170,149],[149,176],[176,170],[105,66],[66,69],[69,105],[122,6],[6,168],[168,122],[123,147],[147,187],[187,123],[96,77],[77,90],[90,96],[65,55],[55,107],[107,65],[89,90],[90,180],[180,89],[101,100],[100,120],[120,101],[63,105],[105,104],[104,63],[93,137],[137,227],[227,93],[15,86],[86,85],[85,15],[129,102],[102,49],[49,129],[14,87],[87,86],[86,14],[55,8],[8,9],[9,55],[100,47],[47,121],[121,100],[145,23],[23,22],[22,145],[88,89],[89,179],[179,88],[6,122],[122,196],[196,6],[88,95],[95,96],[96,88],[138,172],[172,136],[136,138],[215,58],[58,172],[172,215],[115,48],[48,219],[219,115],[42,80],[80,81],[81,42],[195,3],[3,51],[51,195],[43,146],[146,61],[61,43],[171,175],[175,199],[199,171],[81,82],[82,38],[38,81],[53,46],[46,225],[225,53],[144,163],[163,110],[110,144],[52,65],[65,66],[66,52],[229,228],[228,117],[117,229],[34,127],[127,234],[234,34],[107,108],[108,69],[69,107],[109,108],[108,151],[151,109],[48,64],[64,235],[235,48],[62,78],[78,191],[191,62],[129,209],[209,126],[126,129],[111,35],[35,143],[143,111],[117,123],[123,50],[50,117],[222,65],[65,52],[52,222],[19,125],[125,141],[141,19],[221,55],[55,65],[65,221],[3,195],[195,197],[197,3],[25,7],[7,33],[33,25],[220,237],[237,44],[44,220],[70,71],[71,139],[139,70],[122,193],[193,245],[245,122],[247,130],[130,33],[33,247],[71,21],[21,162],[162,71],[170,169],[169,150],[150,170],[188,174],[174,196],[196,188],[216,186],[186,92],[92,216],[2,97],[97,167],[167,2],[141,125],[125,241],[241,141],[164,167],[167,37],[37,164],[72,38],[38,12],[12,72],[38,82],[82,13],[13,38],[63,68],[68,71],[71,63],[226,35],[35,111],[111,226],[101,50],[50,205],[205,101],[206,92],[92,165],[165,206],[209,198],[198,217],[217,209],[165,167],[167,97],[97,165],[220,115],[115,218],[218,220],[133,112],[112,243],[243,133],[239,238],[238,241],[241,239],[214,135],[135,169],[169,214],[190,173],[173,133],[133,190],[171,208],[208,32],[32,171],[125,44],[44,237],[237,125],[86,87],[87,178],[178,86],[85,86],[86,179],[179,85],[84,85],[85,180],[180,84],[83,84],[84,181],[181,83],[201,83],[83,182],[182,201],[137,93],[93,132],[132,137],[76,62],[62,183],[183,76],[61,76],[76,184],[184,61],[57,61],[61,185],[185,57],[212,57],[57,186],[186,212],[214,207],[207,187],[187,214],[34,143],[143,156],[156,34],[79,239],[239,237],[237,79],[123,137],[137,177],[177,123],[44,1],[1,4],[4,44],[201,194],[194,32],[32,201],[64,102],[102,129],[129,64],[213,215],[215,138],[138,213],[59,166],[166,219],[219,59],[242,99],[99,97],[97,242],[2,94],[94,141],[141,2],[75,59],[59,235],[235,75],[24,110],[110,228],[228,24],[25,130],[130,226],[226,25],[23,24],[24,229],[229,23],[22,23],[23,230],[230,22],[26,22],[22,231],[231,26],[112,26],[26,232],[232,112],[189,190],[190,243],[243,189],[221,56],[56,190],[190,221],[28,56],[56,221],[221,28],[27,28],[28,222],[222,27],[29,27],[27,223],[223,29],[30,29],[29,224],[224,30],[247,30],[30,225],[225,247],[238,79],[79,20],[20,238],[166,59],[59,75],[75,166],[60,75],[75,240],[240,60],[147,177],[177,215],[215,147],[20,79],[79,166],[166,20],[187,147],[147,213],[213,187],[112,233],[233,244],[244,112],[233,128],[128,245],[245,233],[128,114],[114,188],[188,128],[114,217],[217,174],[174,114],[131,115],[115,220],[220,131],[217,198],[198,236],[236,217],[198,131],[131,134],[134,198],[177,132],[132,58],[58,177],[143,35],[35,124],[124,143],[110,163],[163,7],[7,110],[228,110],[110,25],[25,228],[356,389],[389,368],[368,356],[11,302],[302,267],[267,11],[452,350],[350,349],[349,452],[302,303],[303,269],[269,302],[357,343],[343,277],[277,357],[452,453],[453,357],[357,452],[333,332],[332,297],[297,333],[175,152],[152,377],[377,175],[347,348],[348,330],[330,347],[303,304],[304,270],[270,303],[9,336],[336,337],[337,9],[278,279],[279,360],[360,278],[418,262],[262,431],[431,418],[304,408],[408,409],[409,304],[310,415],[415,407],[407,310],[270,409],[409,410],[410,270],[450,348],[348,347],[347,450],[422,430],[430,434],[434,422],[313,314],[314,17],[17,313],[306,307],[307,375],[375,306],[387,388],[388,260],[260,387],[286,414],[414,398],[398,286],[335,406],[406,418],[418,335],[364,367],[367,416],[416,364],[423,358],[358,327],[327,423],[251,284],[284,298],[298,251],[281,5],[5,4],[4,281],[373,374],[374,253],[253,373],[307,320],[320,321],[321,307],[425,427],[427,411],[411,425],[421,313],[313,18],[18,421],[321,405],[405,406],[406,321],[320,404],[404,405],[405,320],[315,16],[16,17],[17,315],[426,425],[425,266],[266,426],[377,400],[400,369],[369,377],[322,391],[391,269],[269,322],[417,465],[465,464],[464,417],[386,257],[257,258],[258,386],[466,260],[260,388],[388,466],[456,399],[399,419],[419,456],[284,332],[332,333],[333,284],[417,285],[285,8],[8,417],[346,340],[340,261],[261,346],[413,441],[441,285],[285,413],[327,460],[460,328],[328,327],[355,371],[371,329],[329,355],[392,439],[439,438],[438,392],[382,341],[341,256],[256,382],[429,420],[420,360],[360,429],[364,394],[394,379],[379,364],[277,343],[343,437],[437,277],[443,444],[444,283],[283,443],[275,440],[440,363],[363,275],[431,262],[262,369],[369,431],[297,338],[338,337],[337,297],[273,375],[375,321],[321,273],[450,451],[451,349],[349,450],[446,342],[342,467],[467,446],[293,334],[334,282],[282,293],[458,461],[461,462],[462,458],[276,353],[353,383],[383,276],[308,324],[324,325],[325,308],[276,300],[300,293],[293,276],[372,345],[345,447],[447,372],[352,345],[345,340],[340,352],[274,1],[1,19],[19,274],[456,248],[248,281],[281,456],[436,427],[427,425],[425,436],[381,256],[256,252],[252,381],[269,391],[391,393],[393,269],[200,199],[199,428],[428,200],[266,330],[330,329],[329,266],[287,273],[273,422],[422,287],[250,462],[462,328],[328,250],[258,286],[286,384],[384,258],[265,353],[353,342],[342,265],[387,259],[259,257],[257,387],[424,431],[431,430],[430,424],[342,353],[353,276],[276,342],[273,335],[335,424],[424,273],[292,325],[325,307],[307,292],[366,447],[447,345],[345,366],[271,303],[303,302],[302,271],[423,266],[266,371],[371,423],[294,455],[455,460],[460,294],[279,278],[278,294],[294,279],[271,272],[272,304],[304,271],[432,434],[434,427],[427,432],[272,407],[407,408],[408,272],[394,430],[430,431],[431,394],[395,369],[369,400],[400,395],[334,333],[333,299],[299,334],[351,417],[417,168],[168,351],[352,280],[280,411],[411,352],[325,319],[319,320],[320,325],[295,296],[296,336],[336,295],[319,403],[403,404],[404,319],[330,348],[348,349],[349,330],[293,298],[298,333],[333,293],[323,454],[454,447],[447,323],[15,16],[16,315],[315,15],[358,429],[429,279],[279,358],[14,15],[15,316],[316,14],[285,336],[336,9],[9,285],[329,349],[349,350],[350,329],[374,380],[380,252],[252,374],[318,402],[402,403],[403,318],[6,197],[197,419],[419,6],[318,319],[319,325],[325,318],[367,364],[364,365],[365,367],[435,367],[367,397],[397,435],[344,438],[438,439],[439,344],[272,271],[271,311],[311,272],[195,5],[5,281],[281,195],[273,287],[287,291],[291,273],[396,428],[428,199],[199,396],[311,271],[271,268],[268,311],[283,444],[444,445],[445,283],[373,254],[254,339],[339,373],[282,334],[334,296],[296,282],[449,347],[347,346],[346,449],[264,447],[447,454],[454,264],[336,296],[296,299],[299,336],[338,10],[10,151],[151,338],[278,439],[439,455],[455,278],[292,407],[407,415],[415,292],[358,371],[371,355],[355,358],[340,345],[345,372],[372,340],[346,347],[347,280],[280,346],[442,443],[443,282],[282,442],[19,94],[94,370],[370,19],[441,442],[442,295],[295,441],[248,419],[419,197],[197,248],[263,255],[255,359],[359,263],[440,275],[275,274],[274,440],[300,383],[383,368],[368,300],[351,412],[412,465],[465,351],[263,467],[467,466],[466,263],[301,368],[368,389],[389,301],[395,378],[378,379],[379,395],[412,351],[351,419],[419,412],[436,426],[426,322],[322,436],[2,164],[164,393],[393,2],[370,462],[462,461],[461,370],[164,0],[0,267],[267,164],[302,11],[11,12],[12,302],[268,12],[12,13],[13,268],[293,300],[300,301],[301,293],[446,261],[261,340],[340,446],[330,266],[266,425],[425,330],[426,423],[423,391],[391,426],[429,355],[355,437],[437,429],[391,327],[327,326],[326,391],[440,457],[457,438],[438,440],[341,382],[382,362],[362,341],[459,457],[457,461],[461,459],[434,430],[430,394],[394,434],[414,463],[463,362],[362,414],[396,369],[369,262],[262,396],[354,461],[461,457],[457,354],[316,403],[403,402],[402,316],[315,404],[404,403],[403,315],[314,405],[405,404],[404,314],[313,406],[406,405],[405,313],[421,418],[418,406],[406,421],[366,401],[401,361],[361,366],[306,408],[408,407],[407,306],[291,409],[409,408],[408,291],[287,410],[410,409],[409,287],[432,436],[436,410],[410,432],[434,416],[416,411],[411,434],[264,368],[368,383],[383,264],[309,438],[438,457],[457,309],[352,376],[376,401],[401,352],[274,275],[275,4],[4,274],[421,428],[428,262],[262,421],[294,327],[327,358],[358,294],[433,416],[416,367],[367,433],[289,455],[455,439],[439,289],[462,370],[370,326],[326,462],[2,326],[326,370],[370,2],[305,460],[460,455],[455,305],[254,449],[449,448],[448,254],[255,261],[261,446],[446,255],[253,450],[450,449],[449,253],[252,451],[451,450],[450,252],[256,452],[452,451],[451,256],[341,453],[453,452],[452,341],[413,464],[464,463],[463,413],[441,413],[413,414],[414,441],[258,442],[442,441],[441,258],[257,443],[443,442],[442,257],[259,444],[444,443],[443,259],[260,445],[445,444],[444,260],[467,342],[342,445],[445,467],[459,458],[458,250],[250,459],[289,392],[392,290],[290,289],[290,328],[328,460],[460,290],[376,433],[433,435],[435,376],[250,290],[290,392],[392,250],[411,416],[416,433],[433,411],[341,463],[463,464],[464,341],[453,464],[464,465],[465,453],[357,465],[465,412],[412,357],[343,412],[412,399],[399,343],[360,363],[363,440],[440,360],[437,399],[399,456],[456,437],[420,456],[456,363],[363,420],[401,435],[435,288],[288,401],[372,383],[383,353],[353,372],[339,255],[255,249],[249,339],[448,261],[261,255],[255,448],[133,243],[243,190],[190,133],[133,155],[155,112],[112,133],[33,246],[246,247],[247,33],[33,130],[130,25],[25,33],[398,384],[384,286],[286,398],[362,398],[398,414],[414,362],[362,463],[463,341],[341,362],[263,359],[359,467],[467,263],[263,249],[249,255],[255,263],[466,467],[467,260],[260,466],[75,60],[60,166],[166,75],[238,239],[239,79],[79,238],[162,127],[127,139],[139,162],[72,11],[11,37],[37,72],[121,232],[232,120],[120,121],[73,72],[72,39],[39,73],[114,128],[128,47],[47,114],[233,232],[232,128],[128,233],[103,104],[104,67],[67,103],[152,175],[175,148],[148,152],[119,118],[118,101],[101,119],[74,73],[73,40],[40,74],[107,9],[9,108],[108,107],[49,48],[48,131],[131,49],[32,194],[194,211],[211,32],[184,74],[74,185],[185,184],[191,80],[80,183],[183,191],[185,40],[40,186],[186,185],[119,230],[230,118],[118,119],[210,202],[202,214],[214,210],[84,83],[83,17],[17,84],[77,76],[76,146],[146,77],[161,160],[160,30],[30,161],[190,56],[56,173],[173,190],[182,106],[106,194],[194,182],[138,135],[135,192],[192,138],[129,203],[203,98],[98,129],[54,21],[21,68],[68,54],[5,51],[51,4],[4,5],[145,144],[144,23],[23,145],[90,77],[77,91],[91,90],[207,205],[205,187],[187,207],[83,201],[201,18],[18,83],[181,91],[91,182],[182,181],[180,90],[90,181],[181,180],[16,85],[85,17],[17,16],[205,206],[206,36],[36,205],[176,148],[148,140],[140,176],[165,92],[92,39],[39,165],[245,193],[193,244],[244,245],[27,159],[159,28],[28,27],[30,247],[247,161],[161,30],[174,236],[236,196],[196,174],[103,54],[54,104],[104,103],[55,193],[193,8],[8,55],[111,117],[117,31],[31,111],[221,189],[189,55],[55,221],[240,98],[98,99],[99,240],[142,126],[126,100],[100,142],[219,166],[166,218],[218,219],[112,155],[155,26],[26,112],[198,209],[209,131],[131,198],[169,135],[135,150],[150,169],[114,47],[47,217],[217,114],[224,223],[223,53],[53,224],[220,45],[45,134],[134,220],[32,211],[211,140],[140,32],[109,67],[67,108],[108,109],[146,43],[43,91],[91,146],[231,230],[230,120],[120,231],[113,226],[226,247],[247,113],[105,63],[63,52],[52,105],[241,238],[238,242],[242,241],[124,46],[46,156],[156,124],[95,78],[78,96],[96,95],[70,46],[46,63],[63,70],[116,143],[143,227],[227,116],[116,123],[123,111],[111,116],[1,44],[44,19],[19,1],[3,236],[236,51],[51,3],[207,216],[216,205],[205,207],[26,154],[154,22],[22,26],[165,39],[39,167],[167,165],[199,200],[200,208],[208,199],[101,36],[36,100],[100,101],[43,57],[57,202],[202,43],[242,20],[20,99],[99,242],[56,28],[28,157],[157,56],[124,35],[35,113],[113,124],[29,160],[160,27],[27,29],[211,204],[204,210],[210,211],[124,113],[113,46],[46,124],[106,43],[43,204],[204,106],[96,62],[62,77],[77,96],[227,137],[137,116],[116,227],[73,41],[41,72],[72,73],[36,203],[203,142],[142,36],[235,64],[64,240],[240,235],[48,49],[49,64],[64,48],[42,41],[41,74],[74,42],[214,212],[212,207],[207,214],[183,42],[42,184],[184,183],[210,169],[169,211],[211,210],[140,170],[170,176],[176,140],[104,105],[105,69],[69,104],[193,122],[122,168],[168,193],[50,123],[123,187],[187,50],[89,96],[96,90],[90,89],[66,65],[65,107],[107,66],[179,89],[89,180],[180,179],[119,101],[101,120],[120,119],[68,63],[63,104],[104,68],[234,93],[93,227],[227,234],[16,15],[15,85],[85,16],[209,129],[129,49],[49,209],[15,14],[14,86],[86,15],[107,55],[55,9],[9,107],[120,100],[100,121],[121,120],[153,145],[145,22],[22,153],[178,88],[88,179],[179,178],[197,6],[6,196],[196,197],[89,88],[88,96],[96,89],[135,138],[138,136],[136,135],[138,215],[215,172],[172,138],[218,115],[115,219],[219,218],[41,42],[42,81],[81,41],[5,195],[195,51],[51,5],[57,43],[43,61],[61,57],[208,171],[171,199],[199,208],[41,81],[81,38],[38,41],[224,53],[53,225],[225,224],[24,144],[144,110],[110,24],[105,52],[52,66],[66,105],[118,229],[229,117],[117,118],[227,34],[34,234],[234,227],[66,107],[107,69],[69,66],[10,109],[109,151],[151,10],[219,48],[48,235],[235,219],[183,62],[62,191],[191,183],[142,129],[129,126],[126,142],[116,111],[111,143],[143,116],[118,117],[117,50],[50,118],[223,222],[222,52],[52,223],[94,19],[19,141],[141,94],[222,221],[221,65],[65,222],[196,3],[3,197],[197,196],[45,220],[220,44],[44,45],[156,70],[70,139],[139,156],[188,122],[122,245],[245,188],[139,71],[71,162],[162,139],[149,170],[170,150],[150,149],[122,188],[188,196],[196,122],[206,216],[216,92],[92,206],[164,2],[2,167],[167,164],[242,141],[141,241],[241,242],[0,164],[164,37],[37,0],[11,72],[72,12],[12,11],[12,38],[38,13],[13,12],[70,63],[63,71],[71,70],[31,226],[226,111],[111,31],[36,101],[101,205],[205,36],[203,206],[206,165],[165,203],[126,209],[209,217],[217,126],[98,165],[165,97],[97,98],[237,220],[220,218],[218,237],[237,239],[239,241],[241,237],[210,214],[214,169],[169,210],[140,171],[171,32],[32,140],[241,125],[125,237],[237,241],[179,86],[86,178],[178,179],[180,85],[85,179],[179,180],[181,84],[84,180],[180,181],[182,83],[83,181],[181,182],[194,201],[201,182],[182,194],[177,137],[137,132],[132,177],[184,76],[76,183],[183,184],[185,61],[61,184],[184,185],[186,57],[57,185],[185,186],[216,212],[212,186],[186,216],[192,214],[214,187],[187,192],[139,34],[34,156],[156,139],[218,79],[79,237],[237,218],[147,123],[123,177],[177,147],[45,44],[44,4],[4,45],[208,201],[201,32],[32,208],[98,64],[64,129],[129,98],[192,213],[213,138],[138,192],[235,59],[59,219],[219,235],[141,242],[242,97],[97,141],[97,2],[2,141],[141,97],[240,75],[75,235],[235,240],[229,24],[24,228],[228,229],[31,25],[25,226],[226,31],[230,23],[23,229],[229,230],[231,22],[22,230],[230,231],[232,26],[26,231],[231,232],[233,112],[112,232],[232,233],[244,189],[189,243],[243,244],[189,221],[221,190],[190,189],[222,28],[28,221],[221,222],[223,27],[27,222],[222,223],[224,29],[29,223],[223,224],[225,30],[30,224],[224,225],[113,247],[247,225],[225,113],[99,60],[60,240],[240,99],[213,147],[147,215],[215,213],[60,20],[20,166],[166,60],[192,187],[187,213],[213,192],[243,112],[112,244],[244,243],[244,233],[233,245],[245,244],[245,128],[128,188],[188,245],[188,114],[114,174],[174,188],[134,131],[131,220],[220,134],[174,217],[217,236],[236,174],[236,198],[198,134],[134,236],[215,177],[177,58],[58,215],[156,143],[143,124],[124,156],[25,110],[110,7],[7,25],[31,228],[228,25],[25,31],[264,356],[356,368],[368,264],[0,11],[11,267],[267,0],[451,452],[452,349],[349,451],[267,302],[302,269],[269,267],[350,357],[357,277],[277,350],[350,452],[452,357],[357,350],[299,333],[333,297],[297,299],[396,175],[175,377],[377,396],[280,347],[347,330],[330,280],[269,303],[303,270],[270,269],[151,9],[9,337],[337,151],[344,278],[278,360],[360,344],[424,418],[418,431],[431,424],[270,304],[304,409],[409,270],[272,310],[310,407],[407,272],[322,270],[270,410],[410,322],[449,450],[450,347],[347,449],[432,422],[422,434],[434,432],[18,313],[313,17],[17,18],[291,306],[306,375],[375,291],[259,387],[387,260],[260,259],[424,335],[335,418],[418,424],[434,364],[364,416],[416,434],[391,423],[423,327],[327,391],[301,251],[251,298],[298,301],[275,281],[281,4],[4,275],[254,373],[373,253],[253,254],[375,307],[307,321],[321,375],[280,425],[425,411],[411,280],[200,421],[421,18],[18,200],[335,321],[321,406],[406,335],[321,320],[320,405],[405,321],[314,315],[315,17],[17,314],[423,426],[426,266],[266,423],[396,377],[377,369],[369,396],[270,322],[322,269],[269,270],[413,417],[417,464],[464,413],[385,386],[386,258],[258,385],[248,456],[456,419],[419,248],[298,284],[284,333],[333,298],[168,417],[417,8],[8,168],[448,346],[346,261],[261,448],[417,413],[413,285],[285,417],[326,327],[327,328],[328,326],[277,355],[355,329],[329,277],[309,392],[392,438],[438,309],[381,382],[382,256],[256,381],[279,429],[429,360],[360,279],[365,364],[364,379],[379,365],[355,277],[277,437],[437,355],[282,443],[443,283],[283,282],[281,275],[275,363],[363,281],[395,431],[431,369],[369,395],[299,297],[297,337],[337,299],[335,273],[273,321],[321,335],[348,450],[450,349],[349,348],[359,446],[446,467],[467,359],[283,293],[293,282],[282,283],[250,458],[458,462],[462,250],[300,276],[276,383],[383,300],[292,308],[308,325],[325,292],[283,276],[276,293],[293,283],[264,372],[372,447],[447,264],[346,352],[352,340],[340,346],[354,274],[274,19],[19,354],[363,456],[456,281],[281,363],[426,436],[436,425],[425,426],[380,381],[381,252],[252,380],[267,269],[269,393],[393,267],[421,200],[200,428],[428,421],[371,266],[266,329],[329,371],[432,287],[287,422],[422,432],[290,250],[250,328],[328,290],[385,258],[258,384],[384,385],[446,265],[265,342],[342,446],[386,387],[387,257],[257,386],[422,424],[424,430],[430,422],[445,342],[342,276],[276,445],[422,273],[273,424],[424,422],[306,292],[292,307],[307,306],[352,366],[366,345],[345,352],[268,271],[271,302],[302,268],[358,423],[423,371],[371,358],[327,294],[294,460],[460,327],[331,279],[279,294],[294,331],[303,271],[271,304],[304,303],[436,432],[432,427],[427,436],[304,272],[272,408],[408,304],[395,394],[394,431],[431,395],[378,395],[395,400],[400,378],[296,334],[334,299],[299,296],[6,351],[351,168],[168,6],[376,352],[352,411],[411,376],[307,325],[325,320],[320,307],[285,295],[295,336],[336,285],[320,319],[319,404],[404,320],[329,330],[330,349],[349,329],[334,293],[293,333],[333,334],[366,323],[323,447],[447,366],[316,15],[15,315],[315,316],[331,358],[358,279],[279,331],[317,14],[14,316],[316,317],[8,285],[285,9],[9,8],[277,329],[329,350],[350,277],[253,374],[374,252],[252,253],[319,318],[318,403],[403,319],[351,6],[6,419],[419,351],[324,318],[318,325],[325,324],[397,367],[367,365],[365,397],[288,435],[435,397],[397,288],[278,344],[344,439],[439,278],[310,272],[272,311],[311,310],[248,195],[195,281],[281,248],[375,273],[273,291],[291,375],[175,396],[396,199],[199,175],[312,311],[311,268],[268,312],[276,283],[283,445],[445,276],[390,373],[373,339],[339,390],[295,282],[282,296],[296,295],[448,449],[449,346],[346,448],[356,264],[264,454],[454,356],[337,336],[336,299],[299,337],[337,338],[338,151],[151,337],[294,278],[278,455],[455,294],[308,292],[292,415],[415,308],[429,358],[358,355],[355,429],[265,340],[340,372],[372,265],[352,346],[346,280],[280,352],[295,442],[442,282],[282,295],[354,19],[19,370],[370,354],[285,441],[441,295],[295,285],[195,248],[248,197],[197,195],[457,440],[440,274],[274,457],[301,300],[300,368],[368,301],[417,351],[351,465],[465,417],[251,301],[301,389],[389,251],[394,395],[395,379],[379,394],[399,412],[412,419],[419,399],[410,436],[436,322],[322,410],[326,2],[2,393],[393,326],[354,370],[370,461],[461,354],[393,164],[164,267],[267,393],[268,302],[302,12],[12,268],[312,268],[268,13],[13,312],[298,293],[293,301],[301,298],[265,446],[446,340],[340,265],[280,330],[330,425],[425,280],[322,426],[426,391],[391,322],[420,429],[429,437],[437,420],[393,391],[391,326],[326,393],[344,440],[440,438],[438,344],[458,459],[459,461],[461,458],[364,434],[434,394],[394,364],[428,396],[396,262],[262,428],[274,354],[354,457],[457,274],[317,316],[316,402],[402,317],[316,315],[315,403],[403,316],[315,314],[314,404],[404,315],[314,313],[313,405],[405,314],[313,421],[421,406],[406,313],[323,366],[366,361],[361,323],[292,306],[306,407],[407,292],[306,291],[291,408],[408,306],[291,287],[287,409],[409,291],[287,432],[432,410],[410,287],[427,434],[434,411],[411,427],[372,264],[264,383],[383,372],[459,309],[309,457],[457,459],[366,352],[352,401],[401,366],[1,274],[274,4],[4,1],[418,421],[421,262],[262,418],[331,294],[294,358],[358,331],[435,433],[433,367],[367,435],[392,289],[289,439],[439,392],[328,462],[462,326],[326,328],[94,2],[2,370],[370,94],[289,305],[305,455],[455,289],[339,254],[254,448],[448,339],[359,255],[255,446],[446,359],[254,253],[253,449],[449,254],[253,252],[252,450],[450,253],[252,256],[256,451],[451,252],[256,341],[341,452],[452,256],[414,413],[413,463],[463,414],[286,441],[441,414],[414,286],[286,258],[258,441],[441,286],[258,257],[257,442],[442,258],[257,259],[259,443],[443,257],[259,260],[260,444],[444,259],[260,467],[467,445],[445,260],[309,459],[459,250],[250,309],[305,289],[289,290],[290,305],[305,290],[290,460],[460,305],[401,376],[376,435],[435,401],[309,250],[250,392],[392,309],[376,411],[411,433],[433,376],[453,341],[341,464],[464,453],[357,453],[453,465],[465,357],[343,357],[357,412],[412,343],[437,343],[343,399],[399,437],[344,360],[360,440],[440,344],[420,437],[437,456],[456,420],[360,420],[420,363],[363,360],[361,401],[401,288],[288,361],[265,372],[372,353],[353,265],[390,339],[339,249],[249,390],[339,448],[448,255],[255,339]);function ES(e){e.j={faceLandmarks:[],faceBlendshapes:[],facialTransformationMatrixes:[]}}var Dt=class extends gr{constructor(e,t){super(new mi(e,t),"image_in","norm_rect",!1),this.j={faceLandmarks:[],faceBlendshapes:[],facialTransformationMatrixes:[]},this.outputFacialTransformationMatrixes=this.outputFaceBlendshapes=!1,me(e=this.h=new V$,0,1,t=new Tt),this.v=new B$,me(this.h,0,3,this.v),this.s=new Am,me(this.h,0,2,this.s),ao(this.s,4,1),ue(this.s,2,.5),ue(this.v,2,.5),ue(this.h,4,.5)}get baseOptions(){return We(this.h,Tt,1)}set baseOptions(e){me(this.h,0,1,e)}o(e){return"numFaces"in e&&ao(this.s,4,e.numFaces??1),"minFaceDetectionConfidence"in e&&ue(this.s,2,e.minFaceDetectionConfidence??.5),"minTrackingConfidence"in e&&ue(this.h,4,e.minTrackingConfidence??.5),"minFacePresenceConfidence"in e&&ue(this.v,2,e.minFacePresenceConfidence??.5),"outputFaceBlendshapes"in e&&(this.outputFaceBlendshapes=!!e.outputFaceBlendshapes),"outputFacialTransformationMatrixes"in e&&(this.outputFacialTransformationMatrixes=!!e.outputFacialTransformationMatrixes),this.l(e)}D(e,t){return ES(this),vi(this,e,t),this.j}F(e,t,n){return ES(this),po(this,e,n,t),this.j}m(){var e=new mr;St(e,"image_in"),St(e,"norm_rect"),ze(e,"face_landmarks");const t=new Pr;Hi(t,Vge,this.h);const n=new qn;Nr(n,"mediapipe.tasks.vision.face_landmarker.FaceLandmarkerGraph"),vt(n,"IMAGE:image_in"),vt(n,"NORM_RECT:norm_rect"),qe(n,"NORM_LANDMARKS:face_landmarks"),n.o(t),$r(e,n),this.g.attachProtoVectorListener("face_landmarks",((r,i)=>{for(const o of r)r=Jf(o),this.j.faceLandmarks.push(Pm(r));ie(this,i)})),this.g.attachEmptyPacketListener("face_landmarks",(r=>{ie(this,r)})),this.outputFaceBlendshapes&&(ze(e,"blendshapes"),qe(n,"BLENDSHAPES:blendshapes"),this.g.attachProtoVectorListener("blendshapes",((r,i)=>{if(this.outputFaceBlendshapes)for(const o of r)r=Tm(o),this.j.faceBlendshapes.push(vw(r.g()??[]));ie(this,i)})),this.g.attachEmptyPacketListener("blendshapes",(r=>{ie(this,r)}))),this.outputFacialTransformationMatrixes&&(ze(e,"face_geometry"),qe(n,"FACE_GEOMETRY:face_geometry"),this.g.attachProtoVectorListener("face_geometry",((r,i)=>{if(this.outputFacialTransformationMatrixes)for(const o of r)(r=We(Bge(o),Mge,2))&&this.j.facialTransformationMatrixes.push({rows:Jr(r,1)??0??0,columns:Jr(r,2)??0??0,data:Ca(r,3,ca,Sa()).slice()??[]});ie(this,i)})),this.g.attachEmptyPacketListener("face_geometry",(r=>{ie(this,r)}))),e=e.g(),this.setGraph(new Uint8Array(e),!0)}};Dt.prototype.detectForVideo=Dt.prototype.F,Dt.prototype.detect=Dt.prototype.D,Dt.prototype.setOptions=Dt.prototype.o,Dt.createFromModelPath=function(e,t){return Ue(Dt,e,{baseOptions:{modelAssetPath:t}})},Dt.createFromModelBuffer=function(e,t){return Ue(Dt,e,{baseOptions:{modelAssetBuffer:t}})},Dt.createFromOptions=function(e,t){return Ue(Dt,e,t)},Dt.FACE_LANDMARKS_LIPS=Cw,Dt.FACE_LANDMARKS_LEFT_EYE=Ew,Dt.FACE_LANDMARKS_LEFT_EYEBROW=xw,Dt.FACE_LANDMARKS_LEFT_IRIS=mO,Dt.FACE_LANDMARKS_RIGHT_EYE=Iw,Dt.FACE_LANDMARKS_RIGHT_EYEBROW=Rw,Dt.FACE_LANDMARKS_RIGHT_IRIS=vO,Dt.FACE_LANDMARKS_FACE_OVAL=Lw,Dt.FACE_LANDMARKS_CONTOURS=yO,Dt.FACE_LANDMARKS_TESSELATION=_O;var Wi=class extends gr{constructor(e,t){super(new mi(e,t),"image_in","norm_rect",!0),me(e=this.j=new G$,0,1,t=new Tt)}get baseOptions(){return We(this.j,Tt,1)}set baseOptions(e){me(this.j,0,1,e)}o(e){return super.l(e)}Oa(e,t,n){const r=typeof t!="function"?t:{};if(this.h=typeof t=="function"?t:n,vi(this,e,r??{}),!this.h)return this.s}m(){var e=new mr;St(e,"image_in"),St(e,"norm_rect"),ze(e,"stylized_image");const t=new Pr;Hi(t,qge,this.j);const n=new qn;Nr(n,"mediapipe.tasks.vision.face_stylizer.FaceStylizerGraph"),vt(n,"IMAGE:image_in"),vt(n,"NORM_RECT:norm_rect"),qe(n,"STYLIZED_IMAGE:stylized_image"),n.o(t),$r(e,n),this.g.U("stylized_image",((r,i)=>{var o=!this.h,s=r.data,a=r.width;const c=a*(r=r.height);if(s instanceof Uint8Array)if(s.length===3*c){const l=new Uint8ClampedArray(4*c);for(let u=0;u<c;++u)l[4*u]=s[3*u],l[4*u+1]=s[3*u+1],l[4*u+2]=s[3*u+2],l[4*u+3]=255;s=new ImageData(l,a,r)}else{if(s.length!==4*c)throw Error("Unsupported channel count: "+s.length/c);s=new ImageData(new Uint8ClampedArray(s.buffer,s.byteOffset,s.length),a,r)}else if(!(s instanceof WebGLTexture))throw Error(`Unsupported format: ${s.constructor.name}`);a=new un([s],!1,!1,this.g.i.canvas,this.O,a,r),this.s=o=o?a.clone():a,this.h&&this.h(o),ie(this,i)})),this.g.attachEmptyPacketListener("stylized_image",(r=>{this.s=null,this.h&&this.h(null),ie(this,r)})),e=e.g(),this.setGraph(new Uint8Array(e),!0)}};Wi.prototype.stylize=Wi.prototype.Oa,Wi.prototype.setOptions=Wi.prototype.o,Wi.createFromModelPath=function(e,t){return Ue(Wi,e,{baseOptions:{modelAssetPath:t}})},Wi.createFromModelBuffer=function(e,t){return Ue(Wi,e,{baseOptions:{modelAssetBuffer:t}})},Wi.createFromOptions=function(e,t){return Ue(Wi,e,t)};var kw=Vi([0,1],[1,2],[2,3],[3,4],[0,5],[5,6],[6,7],[7,8],[5,9],[9,10],[10,11],[11,12],[9,13],[13,14],[14,15],[15,16],[13,17],[0,17],[17,18],[18,19],[19,20]);function xS(e){e.gestures=[],e.landmarks=[],e.worldLandmarks=[],e.handedness=[]}function IS(e){return e.gestures.length===0?{gestures:[],landmarks:[],worldLandmarks:[],handedness:[],handednesses:[]}:{gestures:e.gestures,landmarks:e.landmarks,worldLandmarks:e.worldLandmarks,handedness:e.handedness,handednesses:e.handedness}}function RS(e,t=!0){const n=[];for(const i of e){var r=Tm(i);e=[];for(const o of r.g())r=t&&Jr(o,1)!=null?Jr(o,1)??0:-1,e.push({score:Vt(o,2)??0,index:r,categoryName:fi(o,3)??""??"",displayName:fi(o,4)??""??""});n.push(e)}return n}var yr=class extends gr{constructor(e,t){super(new mi(e,t),"image_in","norm_rect",!1),this.gestures=[],this.landmarks=[],this.worldLandmarks=[],this.handedness=[],me(e=this.j=new z$,0,1,t=new Tt),this.s=new hw,me(this.j,0,2,this.s),this.C=new fw,me(this.s,0,3,this.C),this.v=new W$,me(this.s,0,2,this.v),this.h=new Gge,me(this.j,0,3,this.h),ue(this.v,2,.5),ue(this.s,4,.5),ue(this.C,2,.5)}get baseOptions(){return We(this.j,Tt,1)}set baseOptions(e){me(this.j,0,1,e)}o(e){if(ao(this.v,3,e.numHands??1),"minHandDetectionConfidence"in e&&ue(this.v,2,e.minHandDetectionConfidence??.5),"minTrackingConfidence"in e&&ue(this.s,4,e.minTrackingConfidence??.5),"minHandPresenceConfidence"in e&&ue(this.C,2,e.minHandPresenceConfidence??.5),e.cannedGesturesClassifierOptions){var t=new Mc,n=t,r=E3(e.cannedGesturesClassifierOptions,We(this.h,Mc,3)?.h());me(n,0,2,r),me(this.h,0,3,t)}else e.cannedGesturesClassifierOptions===void 0&&We(this.h,Mc,3)?.g();return e.customGesturesClassifierOptions?(me(n=t=new Mc,0,2,r=E3(e.customGesturesClassifierOptions,We(this.h,Mc,4)?.h())),me(this.h,0,4,t)):e.customGesturesClassifierOptions===void 0&&We(this.h,Mc,4)?.g(),this.l(e)}Ja(e,t){return xS(this),vi(this,e,t),IS(this)}Ka(e,t,n){return xS(this),po(this,e,n,t),IS(this)}m(){var e=new mr;St(e,"image_in"),St(e,"norm_rect"),ze(e,"hand_gestures"),ze(e,"hand_landmarks"),ze(e,"world_hand_landmarks"),ze(e,"handedness");const t=new Pr;Hi(t,Kge,this.j);const n=new qn;Nr(n,"mediapipe.tasks.vision.gesture_recognizer.GestureRecognizerGraph"),vt(n,"IMAGE:image_in"),vt(n,"NORM_RECT:norm_rect"),qe(n,"HAND_GESTURES:hand_gestures"),qe(n,"LANDMARKS:hand_landmarks"),qe(n,"WORLD_LANDMARKS:world_hand_landmarks"),qe(n,"HANDEDNESS:handedness"),n.o(t),$r(e,n),this.g.attachProtoVectorListener("hand_landmarks",((r,i)=>{for(const o of r){r=Jf(o);const s=[];for(const a of rs(r,j$,1))s.push({x:Vt(a,1)??0,y:Vt(a,2)??0,z:Vt(a,3)??0,visibility:Vt(a,4)??0});this.landmarks.push(s)}ie(this,i)})),this.g.attachEmptyPacketListener("hand_landmarks",(r=>{ie(this,r)})),this.g.attachProtoVectorListener("world_hand_landmarks",((r,i)=>{for(const o of r){r=hl(o);const s=[];for(const a of rs(r,O$,1))s.push({x:Vt(a,1)??0,y:Vt(a,2)??0,z:Vt(a,3)??0,visibility:Vt(a,4)??0});this.worldLandmarks.push(s)}ie(this,i)})),this.g.attachEmptyPacketListener("world_hand_landmarks",(r=>{ie(this,r)})),this.g.attachProtoVectorListener("hand_gestures",((r,i)=>{this.gestures.push(...RS(r,!1)),ie(this,i)})),this.g.attachEmptyPacketListener("hand_gestures",(r=>{ie(this,r)})),this.g.attachProtoVectorListener("handedness",((r,i)=>{this.handedness.push(...RS(r)),ie(this,i)})),this.g.attachEmptyPacketListener("handedness",(r=>{ie(this,r)})),e=e.g(),this.setGraph(new Uint8Array(e),!0)}};function LS(e){return{landmarks:e.landmarks,worldLandmarks:e.worldLandmarks,handednesses:e.handedness,handedness:e.handedness}}yr.prototype.recognizeForVideo=yr.prototype.Ka,yr.prototype.recognize=yr.prototype.Ja,yr.prototype.setOptions=yr.prototype.o,yr.createFromModelPath=function(e,t){return Ue(yr,e,{baseOptions:{modelAssetPath:t}})},yr.createFromModelBuffer=function(e,t){return Ue(yr,e,{baseOptions:{modelAssetBuffer:t}})},yr.createFromOptions=function(e,t){return Ue(yr,e,t)},yr.HAND_CONNECTIONS=kw;var _r=class extends gr{constructor(e,t){super(new mi(e,t),"image_in","norm_rect",!1),this.landmarks=[],this.worldLandmarks=[],this.handedness=[],me(e=this.h=new hw,0,1,t=new Tt),this.s=new fw,me(this.h,0,3,this.s),this.j=new W$,me(this.h,0,2,this.j),ao(this.j,3,1),ue(this.j,2,.5),ue(this.s,2,.5),ue(this.h,4,.5)}get baseOptions(){return We(this.h,Tt,1)}set baseOptions(e){me(this.h,0,1,e)}o(e){return"numHands"in e&&ao(this.j,3,e.numHands??1),"minHandDetectionConfidence"in e&&ue(this.j,2,e.minHandDetectionConfidence??.5),"minTrackingConfidence"in e&&ue(this.h,4,e.minTrackingConfidence??.5),"minHandPresenceConfidence"in e&&ue(this.s,2,e.minHandPresenceConfidence??.5),this.l(e)}D(e,t){return this.landmarks=[],this.worldLandmarks=[],this.handedness=[],vi(this,e,t),LS(this)}F(e,t,n){return this.landmarks=[],this.worldLandmarks=[],this.handedness=[],po(this,e,n,t),LS(this)}m(){var e=new mr;St(e,"image_in"),St(e,"norm_rect"),ze(e,"hand_landmarks"),ze(e,"world_hand_landmarks"),ze(e,"handedness");const t=new Pr;Hi(t,Wge,this.h);const n=new qn;Nr(n,"mediapipe.tasks.vision.hand_landmarker.HandLandmarkerGraph"),vt(n,"IMAGE:image_in"),vt(n,"NORM_RECT:norm_rect"),qe(n,"LANDMARKS:hand_landmarks"),qe(n,"WORLD_LANDMARKS:world_hand_landmarks"),qe(n,"HANDEDNESS:handedness"),n.o(t),$r(e,n),this.g.attachProtoVectorListener("hand_landmarks",((r,i)=>{for(const o of r)r=Jf(o),this.landmarks.push(Pm(r));ie(this,i)})),this.g.attachEmptyPacketListener("hand_landmarks",(r=>{ie(this,r)})),this.g.attachProtoVectorListener("world_hand_landmarks",((r,i)=>{for(const o of r)r=hl(o),this.worldLandmarks.push(Ed(r));ie(this,i)})),this.g.attachEmptyPacketListener("world_hand_landmarks",(r=>{ie(this,r)})),this.g.attachProtoVectorListener("handedness",((r,i)=>{var o=this.handedness,s=o.push;const a=[];for(const c of r){r=Tm(c);const l=[];for(const u of r.g())l.push({score:Vt(u,2)??0,index:Jr(u,1)??0??-1,categoryName:fi(u,3)??""??"",displayName:fi(u,4)??""??""});a.push(l)}s.call(o,...a),ie(this,i)})),this.g.attachEmptyPacketListener("handedness",(r=>{ie(this,r)})),e=e.g(),this.setGraph(new Uint8Array(e),!0)}};_r.prototype.detectForVideo=_r.prototype.F,_r.prototype.detect=_r.prototype.D,_r.prototype.setOptions=_r.prototype.o,_r.createFromModelPath=function(e,t){return Ue(_r,e,{baseOptions:{modelAssetPath:t}})},_r.createFromModelBuffer=function(e,t){return Ue(_r,e,{baseOptions:{modelAssetBuffer:t}})},_r.createFromOptions=function(e,t){return Ue(_r,e,t)},_r.HAND_CONNECTIONS=kw;var bO=Vi([0,1],[1,2],[2,3],[3,7],[0,4],[4,5],[5,6],[6,8],[9,10],[11,12],[11,13],[13,15],[15,17],[15,19],[15,21],[17,19],[12,14],[14,16],[16,18],[16,20],[16,22],[18,20],[11,23],[12,24],[23,24],[23,25],[24,26],[25,27],[26,28],[27,29],[28,30],[29,31],[30,32],[27,31],[28,32]);function kS(e){e.h={faceLandmarks:[],faceBlendshapes:[],poseLandmarks:[],poseWorldLandmarks:[],poseSegmentationMasks:[],leftHandLandmarks:[],leftHandWorldLandmarks:[],rightHandLandmarks:[],rightHandWorldLandmarks:[]}}function TS(e){try{if(!e.C)return e.h;e.C(e.h)}finally{Nm(e)}}function Yh(e,t){e=Jf(e),t.push(Pm(e))}var It=class extends gr{constructor(e,t){super(new mi(e,t),"input_frames_image",null,!1),this.h={faceLandmarks:[],faceBlendshapes:[],poseLandmarks:[],poseWorldLandmarks:[],poseSegmentationMasks:[],leftHandLandmarks:[],leftHandWorldLandmarks:[],rightHandLandmarks:[],rightHandWorldLandmarks:[]},this.outputPoseSegmentationMasks=this.outputFaceBlendshapes=!1,me(e=this.j=new J$,0,1,t=new Tt),this.J=new fw,me(this.j,0,2,this.J),this.Z=new zge,me(this.j,0,3,this.Z),this.s=new Am,me(this.j,0,4,this.s),this.H=new B$,me(this.j,0,5,this.H),this.v=new Z$,me(this.j,0,6,this.v),this.K=new Q$,me(this.j,0,7,this.K),ue(this.s,2,.5),ue(this.s,3,.3),ue(this.H,2,.5),ue(this.v,2,.5),ue(this.v,3,.3),ue(this.K,2,.5),ue(this.J,2,.5)}get baseOptions(){return We(this.j,Tt,1)}set baseOptions(e){me(this.j,0,1,e)}o(e){return"minFaceDetectionConfidence"in e&&ue(this.s,2,e.minFaceDetectionConfidence??.5),"minFaceSuppressionThreshold"in e&&ue(this.s,3,e.minFaceSuppressionThreshold??.3),"minFacePresenceConfidence"in e&&ue(this.H,2,e.minFacePresenceConfidence??.5),"outputFaceBlendshapes"in e&&(this.outputFaceBlendshapes=!!e.outputFaceBlendshapes),"minPoseDetectionConfidence"in e&&ue(this.v,2,e.minPoseDetectionConfidence??.5),"minPoseSuppressionThreshold"in e&&ue(this.v,3,e.minPoseSuppressionThreshold??.3),"minPosePresenceConfidence"in e&&ue(this.K,2,e.minPosePresenceConfidence??.5),"outputPoseSegmentationMasks"in e&&(this.outputPoseSegmentationMasks=!!e.outputPoseSegmentationMasks),"minHandLandmarksConfidence"in e&&ue(this.J,2,e.minHandLandmarksConfidence??.5),this.l(e)}D(e,t,n){const r=typeof t!="function"?t:{};return this.C=typeof t=="function"?t:n,kS(this),vi(this,e,r),TS(this)}F(e,t,n,r){const i=typeof n!="function"?n:{};return this.C=typeof n=="function"?n:r,kS(this),po(this,e,i,t),TS(this)}m(){var e=new mr;St(e,"input_frames_image"),ze(e,"pose_landmarks"),ze(e,"pose_world_landmarks"),ze(e,"face_landmarks"),ze(e,"left_hand_landmarks"),ze(e,"left_hand_world_landmarks"),ze(e,"right_hand_landmarks"),ze(e,"right_hand_world_landmarks");const t=new Pr,n=new J9;y3(n,1,pu("type.googleapis.com/mediapipe.tasks.vision.holistic_landmarker.proto.HolisticLandmarkerGraphOptions"),""),(function(i,o){if(o!=null)if(Array.isArray(o))gt(i,2,WN(o));else{if(!(typeof o=="string"||o instanceof qo||Yf(o)))throw Error("invalid value in Any.value field: "+o+" expected a ByteString, a base64 encoded string, a Uint8Array or a jspb array");y3(i,2,Tb(o,!1),Ga())}})(n,this.j.g());const r=new qn;Nr(r,"mediapipe.tasks.vision.holistic_landmarker.HolisticLandmarkerGraph"),z1(r,8,J9,n),vt(r,"IMAGE:input_frames_image"),qe(r,"POSE_LANDMARKS:pose_landmarks"),qe(r,"POSE_WORLD_LANDMARKS:pose_world_landmarks"),qe(r,"FACE_LANDMARKS:face_landmarks"),qe(r,"LEFT_HAND_LANDMARKS:left_hand_landmarks"),qe(r,"LEFT_HAND_WORLD_LANDMARKS:left_hand_world_landmarks"),qe(r,"RIGHT_HAND_LANDMARKS:right_hand_landmarks"),qe(r,"RIGHT_HAND_WORLD_LANDMARKS:right_hand_world_landmarks"),r.o(t),$r(e,r),Mm(this,e),this.g.attachProtoListener("pose_landmarks",((i,o)=>{Yh(i,this.h.poseLandmarks),ie(this,o)})),this.g.attachEmptyPacketListener("pose_landmarks",(i=>{ie(this,i)})),this.g.attachProtoListener("pose_world_landmarks",((i,o)=>{var s=this.h.poseWorldLandmarks;i=hl(i),s.push(Ed(i)),ie(this,o)})),this.g.attachEmptyPacketListener("pose_world_landmarks",(i=>{ie(this,i)})),this.outputPoseSegmentationMasks&&(qe(r,"POSE_SEGMENTATION_MASK:pose_segmentation_mask"),Fl(this,"pose_segmentation_mask"),this.g.U("pose_segmentation_mask",((i,o)=>{this.h.poseSegmentationMasks=[Bl(this,i,!0,!this.C)],ie(this,o)})),this.g.attachEmptyPacketListener("pose_segmentation_mask",(i=>{this.h.poseSegmentationMasks=[],ie(this,i)}))),this.g.attachProtoListener("face_landmarks",((i,o)=>{Yh(i,this.h.faceLandmarks),ie(this,o)})),this.g.attachEmptyPacketListener("face_landmarks",(i=>{ie(this,i)})),this.outputFaceBlendshapes&&(ze(e,"extra_blendshapes"),qe(r,"FACE_BLENDSHAPES:extra_blendshapes"),this.g.attachProtoListener("extra_blendshapes",((i,o)=>{var s=this.h.faceBlendshapes;this.outputFaceBlendshapes&&(i=Tm(i),s.push(vw(i.g()??[]))),ie(this,o)})),this.g.attachEmptyPacketListener("extra_blendshapes",(i=>{ie(this,i)}))),this.g.attachProtoListener("left_hand_landmarks",((i,o)=>{Yh(i,this.h.leftHandLandmarks),ie(this,o)})),this.g.attachEmptyPacketListener("left_hand_landmarks",(i=>{ie(this,i)})),this.g.attachProtoListener("left_hand_world_landmarks",((i,o)=>{var s=this.h.leftHandWorldLandmarks;i=hl(i),s.push(Ed(i)),ie(this,o)})),this.g.attachEmptyPacketListener("left_hand_world_landmarks",(i=>{ie(this,i)})),this.g.attachProtoListener("right_hand_landmarks",((i,o)=>{Yh(i,this.h.rightHandLandmarks),ie(this,o)})),this.g.attachEmptyPacketListener("right_hand_landmarks",(i=>{ie(this,i)})),this.g.attachProtoListener("right_hand_world_landmarks",((i,o)=>{var s=this.h.rightHandWorldLandmarks;i=hl(i),s.push(Ed(i)),ie(this,o)})),this.g.attachEmptyPacketListener("right_hand_world_landmarks",(i=>{ie(this,i)})),e=e.g(),this.setGraph(new Uint8Array(e),!0)}};It.prototype.detectForVideo=It.prototype.F,It.prototype.detect=It.prototype.D,It.prototype.setOptions=It.prototype.o,It.createFromModelPath=function(e,t){return Ue(It,e,{baseOptions:{modelAssetPath:t}})},It.createFromModelBuffer=function(e,t){return Ue(It,e,{baseOptions:{modelAssetBuffer:t}})},It.createFromOptions=function(e,t){return Ue(It,e,t)},It.HAND_CONNECTIONS=kw,It.POSE_CONNECTIONS=bO,It.FACE_LANDMARKS_LIPS=Cw,It.FACE_LANDMARKS_LEFT_EYE=Ew,It.FACE_LANDMARKS_LEFT_EYEBROW=xw,It.FACE_LANDMARKS_LEFT_IRIS=mO,It.FACE_LANDMARKS_RIGHT_EYE=Iw,It.FACE_LANDMARKS_RIGHT_EYEBROW=Rw,It.FACE_LANDMARKS_RIGHT_IRIS=vO,It.FACE_LANDMARKS_FACE_OVAL=Lw,It.FACE_LANDMARKS_CONTOURS=yO,It.FACE_LANDMARKS_TESSELATION=_O;var Hr=class extends gr{constructor(e,t){super(new mi(e,t),"input_image","norm_rect",!0),this.j={classifications:[]},me(e=this.h=new eO,0,1,t=new Tt)}get baseOptions(){return We(this.h,Tt,1)}set baseOptions(e){me(this.h,0,1,e)}o(e){return me(this.h,0,2,E3(e,We(this.h,lw,2))),this.l(e)}sa(e,t){return this.j={classifications:[]},vi(this,e,t),this.j}ta(e,t,n){return this.j={classifications:[]},po(this,e,n,t),this.j}m(){var e=new mr;St(e,"input_image"),St(e,"norm_rect"),ze(e,"classifications");const t=new Pr;Hi(t,Yge,this.h);const n=new qn;Nr(n,"mediapipe.tasks.vision.image_classifier.ImageClassifierGraph"),vt(n,"IMAGE:input_image"),vt(n,"NORM_RECT:norm_rect"),qe(n,"CLASSIFICATIONS:classifications"),n.o(t),$r(e,n),this.g.attachProtoListener("classifications",((r,i)=>{this.j=(function(o){const s={classifications:rs(o,$ge,1).map((a=>vw(We(a,M$,4)?.g()??[],Jr(a,2)??0,fi(a,3)??"")))};return W1(jl(o,2))!=null&&(s.timestampMs=W1(jl(o,2))??0),s})(Oge(r)),ie(this,i)})),this.g.attachEmptyPacketListener("classifications",(r=>{ie(this,r)})),e=e.g(),this.setGraph(new Uint8Array(e),!0)}};Hr.prototype.classifyForVideo=Hr.prototype.ta,Hr.prototype.classify=Hr.prototype.sa,Hr.prototype.setOptions=Hr.prototype.o,Hr.createFromModelPath=function(e,t){return Ue(Hr,e,{baseOptions:{modelAssetPath:t}})},Hr.createFromModelBuffer=function(e,t){return Ue(Hr,e,{baseOptions:{modelAssetBuffer:t}})},Hr.createFromOptions=function(e,t){return Ue(Hr,e,t)};var br=class extends gr{constructor(e,t){super(new mi(e,t),"image_in","norm_rect",!0),this.h=new tO,this.embeddings={embeddings:[]},me(e=this.h,0,1,t=new Tt)}get baseOptions(){return We(this.h,Tt,1)}set baseOptions(e){me(this.h,0,1,e)}o(e){var t=this.h,n=We(this.h,cS,2);return n=n?n.clone():new cS,e.l2Normalize!==void 0?af(n,1,e.l2Normalize):"l2Normalize"in e&&gt(n,1),e.quantize!==void 0?af(n,2,e.quantize):"quantize"in e&&gt(n,2),me(t,0,2,n),this.l(e)}za(e,t){return vi(this,e,t),this.embeddings}Aa(e,t,n){return po(this,e,n,t),this.embeddings}m(){var e=new mr;St(e,"image_in"),St(e,"norm_rect"),ze(e,"embeddings_out");const t=new Pr;Hi(t,Xge,this.h);const n=new qn;Nr(n,"mediapipe.tasks.vision.image_embedder.ImageEmbedderGraph"),vt(n,"IMAGE:image_in"),vt(n,"NORM_RECT:norm_rect"),qe(n,"EMBEDDINGS:embeddings_out"),n.o(t),$r(e,n),this.g.attachProtoListener("embeddings_out",((r,i)=>{r=Fge(r),this.embeddings=(function(o){return{embeddings:rs(o,Dge,1).map((s=>{const a={headIndex:Jr(s,3)??0??-1,headName:fi(s,4)??""??""};if(QN(s,aS,I2(s,1))!==void 0)s=Ca(s=We(s,aS,I2(s,1)),1,ca,Sa()),a.floatEmbedding=s.slice();else{const c=new Uint8Array(0);a.quantizedEmbedding=We(s,jge,I2(s,2))?.oa()?.h()??c}return a})),timestampMs:W1(jl(o,2))??0}})(r),ie(this,i)})),this.g.attachEmptyPacketListener("embeddings_out",(r=>{ie(this,r)})),e=e.g(),this.setGraph(new Uint8Array(e),!0)}};br.cosineSimilarity=function(e,t){if(e.floatEmbedding&&t.floatEmbedding)e=hS(e.floatEmbedding,t.floatEmbedding);else{if(!e.quantizedEmbedding||!t.quantizedEmbedding)throw Error("Cannot compute cosine similarity between quantized and float embeddings.");e=hS(fS(e.quantizedEmbedding),fS(t.quantizedEmbedding))}return e},br.prototype.embedForVideo=br.prototype.Aa,br.prototype.embed=br.prototype.za,br.prototype.setOptions=br.prototype.o,br.createFromModelPath=function(e,t){return Ue(br,e,{baseOptions:{modelAssetPath:t}})},br.createFromModelBuffer=function(e,t){return Ue(br,e,{baseOptions:{modelAssetBuffer:t}})},br.createFromOptions=function(e,t){return Ue(br,e,t)};var R3=class{constructor(e,t,n){this.confidenceMasks=e,this.categoryMask=t,this.qualityScores=n}close(){this.confidenceMasks?.forEach((e=>{e.close()})),this.categoryMask?.close()}};function AS(e){e.categoryMask=void 0,e.confidenceMasks=void 0,e.qualityScores=void 0}function PS(e){try{const t=new R3(e.confidenceMasks,e.categoryMask,e.qualityScores);if(!e.j)return t;e.j(t)}finally{Nm(e)}}R3.prototype.close=R3.prototype.close;var kn=class extends gr{constructor(e,t){super(new mi(e,t),"image_in","norm_rect",!1),this.s=[],this.outputCategoryMask=!1,this.outputConfidenceMasks=!0,this.h=new mw,this.v=new nO,me(this.h,0,3,this.v),me(e=this.h,0,1,t=new Tt)}get baseOptions(){return We(this.h,Tt,1)}set baseOptions(e){me(this.h,0,1,e)}o(e){return e.displayNamesLocale!==void 0?gt(this.h,2,pu(e.displayNamesLocale)):"displayNamesLocale"in e&&gt(this.h,2),"outputCategoryMask"in e&&(this.outputCategoryMask=e.outputCategoryMask??!1),"outputConfidenceMasks"in e&&(this.outputConfidenceMasks=e.outputConfidenceMasks??!0),super.l(e)}I(){(function(e){const t=rs(e.da(),qn,1).filter((n=>(fi(n,1)??"").includes("mediapipe.tasks.TensorsToSegmentationCalculator")));if(e.s=[],t.length>1)throw Error("The graph has more than one mediapipe.tasks.TensorsToSegmentationCalculator.");t.length===1&&(We(t[0],Pr,7)?.l()?.g()??new Map).forEach(((n,r)=>{e.s[Number(r)]=fi(n,1)??""}))})(this)}segment(e,t,n){const r=typeof t!="function"?t:{};return this.j=typeof t=="function"?t:n,AS(this),vi(this,e,r),PS(this)}Ma(e,t,n,r){const i=typeof n!="function"?n:{};return this.j=typeof n=="function"?n:r,AS(this),po(this,e,i,t),PS(this)}Da(){return this.s}m(){var e=new mr;St(e,"image_in"),St(e,"norm_rect");const t=new Pr;Hi(t,iO,this.h);const n=new qn;Nr(n,"mediapipe.tasks.vision.image_segmenter.ImageSegmenterGraph"),vt(n,"IMAGE:image_in"),vt(n,"NORM_RECT:norm_rect"),n.o(t),$r(e,n),Mm(this,e),this.outputConfidenceMasks&&(ze(e,"confidence_masks"),qe(n,"CONFIDENCE_MASKS:confidence_masks"),Fl(this,"confidence_masks"),this.g.ca("confidence_masks",((r,i)=>{this.confidenceMasks=r.map((o=>Bl(this,o,!0,!this.j))),ie(this,i)})),this.g.attachEmptyPacketListener("confidence_masks",(r=>{this.confidenceMasks=[],ie(this,r)}))),this.outputCategoryMask&&(ze(e,"category_mask"),qe(n,"CATEGORY_MASK:category_mask"),Fl(this,"category_mask"),this.g.U("category_mask",((r,i)=>{this.categoryMask=Bl(this,r,!1,!this.j),ie(this,i)})),this.g.attachEmptyPacketListener("category_mask",(r=>{this.categoryMask=void 0,ie(this,r)}))),ze(e,"quality_scores"),qe(n,"QUALITY_SCORES:quality_scores"),this.g.attachFloatVectorListener("quality_scores",((r,i)=>{this.qualityScores=r,ie(this,i)})),this.g.attachEmptyPacketListener("quality_scores",(r=>{this.categoryMask=void 0,ie(this,r)})),e=e.g(),this.setGraph(new Uint8Array(e),!0)}};kn.prototype.getLabels=kn.prototype.Da,kn.prototype.segmentForVideo=kn.prototype.Ma,kn.prototype.segment=kn.prototype.segment,kn.prototype.setOptions=kn.prototype.o,kn.createFromModelPath=function(e,t){return Ue(kn,e,{baseOptions:{modelAssetPath:t}})},kn.createFromModelBuffer=function(e,t){return Ue(kn,e,{baseOptions:{modelAssetBuffer:t}})},kn.createFromOptions=function(e,t){return Ue(kn,e,t)};var L3=class{constructor(e,t,n){this.confidenceMasks=e,this.categoryMask=t,this.qualityScores=n}close(){this.confidenceMasks?.forEach((e=>{e.close()})),this.categoryMask?.close()}};L3.prototype.close=L3.prototype.close;var ime=class extends ce{constructor(e){super(e)}},Nc=[0,Bt,-2],Q1=[0,Ao,-3,Lt,Ao,-1],MS=[0,Q1],NS=[0,Q1,Bt,-1],P2=class extends ce{constructor(e){super(e)}},$S=[0,Ao,-1,Lt],ome=class extends ce{constructor(e){super(e)}},OS=class extends ce{constructor(e){super(e)}},k3=[1,2,3,4,5,6,7,8,9,10,14,15],wO=class extends ce{constructor(e){super(e)}};wO.prototype.g=km([0,nn,[0,k3,at,Q1,at,[0,Q1,Nc],at,MS,at,[0,MS,Nc],at,$S,at,[0,Ao,-3,Lt,hi],at,[0,Ao,-3,Lt],at,[0,ot,Ao,-2,Lt,Bt,Lt,-1,2,Ao,Nc],at,NS,at,[0,NS,Nc],Ao,Nc,ot,at,[0,Ao,-3,Lt,Nc,-1],at,[0,nn,$S]],ot,[0,ot,Bt,-1,Lt]]);var zi=class extends gr{constructor(e,t){super(new mi(e,t),"image_in","norm_rect_in",!1),this.outputCategoryMask=!1,this.outputConfidenceMasks=!0,this.h=new mw,this.s=new nO,me(this.h,0,3,this.s),me(e=this.h,0,1,t=new Tt)}get baseOptions(){return We(this.h,Tt,1)}set baseOptions(e){me(this.h,0,1,e)}o(e){return"outputCategoryMask"in e&&(this.outputCategoryMask=e.outputCategoryMask??!1),"outputConfidenceMasks"in e&&(this.outputConfidenceMasks=e.outputConfidenceMasks??!0),super.l(e)}segment(e,t,n,r){const i=typeof n!="function"?n:{};this.j=typeof n=="function"?n:r,this.qualityScores=this.categoryMask=this.confidenceMasks=void 0,n=this.B+1,r=new wO;const o=new OS;var s=new ime;if(ao(s,1,255),me(o,0,12,s),t.keypoint&&t.scribble)throw Error("Cannot provide both keypoint and scribble.");if(t.keypoint){var a=new P2;af(a,3,!0),ue(a,1,t.keypoint.x),ue(a,2,t.keypoint.y),Sd(o,5,k3,a)}else{if(!t.scribble)throw Error("Must provide either a keypoint or a scribble.");for(a of(s=new ome,t.scribble))af(t=new P2,3,!0),ue(t,1,a.x),ue(t,2,a.y),z1(s,1,P2,t);Sd(o,15,k3,s)}z1(r,1,OS,o),this.g.addProtoToStream(r.g(),"drishti.RenderData","roi_in",n),vi(this,e,i);e:{try{const l=new L3(this.confidenceMasks,this.categoryMask,this.qualityScores);if(!this.j){var c=l;break e}this.j(l)}finally{Nm(this)}c=void 0}return c}m(){var e=new mr;St(e,"image_in"),St(e,"roi_in"),St(e,"norm_rect_in");const t=new Pr;Hi(t,iO,this.h);const n=new qn;Nr(n,"mediapipe.tasks.vision.interactive_segmenter.InteractiveSegmenterGraph"),vt(n,"IMAGE:image_in"),vt(n,"ROI:roi_in"),vt(n,"NORM_RECT:norm_rect_in"),n.o(t),$r(e,n),Mm(this,e),this.outputConfidenceMasks&&(ze(e,"confidence_masks"),qe(n,"CONFIDENCE_MASKS:confidence_masks"),Fl(this,"confidence_masks"),this.g.ca("confidence_masks",((r,i)=>{this.confidenceMasks=r.map((o=>Bl(this,o,!0,!this.j))),ie(this,i)})),this.g.attachEmptyPacketListener("confidence_masks",(r=>{this.confidenceMasks=[],ie(this,r)}))),this.outputCategoryMask&&(ze(e,"category_mask"),qe(n,"CATEGORY_MASK:category_mask"),Fl(this,"category_mask"),this.g.U("category_mask",((r,i)=>{this.categoryMask=Bl(this,r,!1,!this.j),ie(this,i)})),this.g.attachEmptyPacketListener("category_mask",(r=>{this.categoryMask=void 0,ie(this,r)}))),ze(e,"quality_scores"),qe(n,"QUALITY_SCORES:quality_scores"),this.g.attachFloatVectorListener("quality_scores",((r,i)=>{this.qualityScores=r,ie(this,i)})),this.g.attachEmptyPacketListener("quality_scores",(r=>{this.categoryMask=void 0,ie(this,r)})),e=e.g(),this.setGraph(new Uint8Array(e),!0)}};zi.prototype.segment=zi.prototype.segment,zi.prototype.setOptions=zi.prototype.o,zi.createFromModelPath=function(e,t){return Ue(zi,e,{baseOptions:{modelAssetPath:t}})},zi.createFromModelBuffer=function(e,t){return Ue(zi,e,{baseOptions:{modelAssetBuffer:t}})},zi.createFromOptions=function(e,t){return Ue(zi,e,t)};var Ur=class extends gr{constructor(e,t){super(new mi(e,t),"input_frame_gpu","norm_rect",!1),this.j={detections:[]},me(e=this.h=new oO,0,1,t=new Tt)}get baseOptions(){return We(this.h,Tt,1)}set baseOptions(e){me(this.h,0,1,e)}o(e){return e.displayNamesLocale!==void 0?gt(this.h,2,pu(e.displayNamesLocale)):"displayNamesLocale"in e&&gt(this.h,2),e.maxResults!==void 0?ao(this.h,3,e.maxResults):"maxResults"in e&&gt(this.h,3),e.scoreThreshold!==void 0?ue(this.h,4,e.scoreThreshold):"scoreThreshold"in e&&gt(this.h,4),e.categoryAllowlist!==void 0?Y1(this.h,5,e.categoryAllowlist):"categoryAllowlist"in e&&gt(this.h,5),e.categoryDenylist!==void 0?Y1(this.h,6,e.categoryDenylist):"categoryDenylist"in e&&gt(this.h,6),this.l(e)}D(e,t){return this.j={detections:[]},vi(this,e,t),this.j}F(e,t,n){return this.j={detections:[]},po(this,e,n,t),this.j}m(){var e=new mr;St(e,"input_frame_gpu"),St(e,"norm_rect"),ze(e,"detections");const t=new Pr;Hi(t,Qge,this.h);const n=new qn;Nr(n,"mediapipe.tasks.vision.ObjectDetectorGraph"),vt(n,"IMAGE:input_frame_gpu"),vt(n,"NORM_RECT:norm_rect"),qe(n,"DETECTIONS:detections"),n.o(t),$r(e,n),this.g.attachProtoVectorListener("detections",((r,i)=>{for(const o of r)r=$$(o),this.j.detections.push(aO(r));ie(this,i)})),this.g.attachEmptyPacketListener("detections",(r=>{ie(this,r)})),e=e.g(),this.setGraph(new Uint8Array(e),!0)}};Ur.prototype.detectForVideo=Ur.prototype.F,Ur.prototype.detect=Ur.prototype.D,Ur.prototype.setOptions=Ur.prototype.o,Ur.createFromModelPath=async function(e,t){return Ue(Ur,e,{baseOptions:{modelAssetPath:t}})},Ur.createFromModelBuffer=function(e,t){return Ue(Ur,e,{baseOptions:{modelAssetBuffer:t}})},Ur.createFromOptions=function(e,t){return Ue(Ur,e,t)};var T3=class{constructor(e,t,n){this.landmarks=e,this.worldLandmarks=t,this.segmentationMasks=n}close(){this.segmentationMasks?.forEach((e=>{e.close()}))}};function jS(e){e.landmarks=[],e.worldLandmarks=[],e.segmentationMasks=void 0}function DS(e){try{const t=new T3(e.landmarks,e.worldLandmarks,e.segmentationMasks);if(!e.s)return t;e.s(t)}finally{Nm(e)}}T3.prototype.close=T3.prototype.close;var wr=class extends gr{constructor(e,t){super(new mi(e,t),"image_in","norm_rect",!1),this.landmarks=[],this.worldLandmarks=[],this.outputSegmentationMasks=!1,me(e=this.h=new sO,0,1,t=new Tt),this.v=new Q$,me(this.h,0,3,this.v),this.j=new Z$,me(this.h,0,2,this.j),ao(this.j,4,1),ue(this.j,2,.5),ue(this.v,2,.5),ue(this.h,4,.5)}get baseOptions(){return We(this.h,Tt,1)}set baseOptions(e){me(this.h,0,1,e)}o(e){return"numPoses"in e&&ao(this.j,4,e.numPoses??1),"minPoseDetectionConfidence"in e&&ue(this.j,2,e.minPoseDetectionConfidence??.5),"minTrackingConfidence"in e&&ue(this.h,4,e.minTrackingConfidence??.5),"minPosePresenceConfidence"in e&&ue(this.v,2,e.minPosePresenceConfidence??.5),"outputSegmentationMasks"in e&&(this.outputSegmentationMasks=e.outputSegmentationMasks??!1),this.l(e)}D(e,t,n){const r=typeof t!="function"?t:{};return this.s=typeof t=="function"?t:n,jS(this),vi(this,e,r),DS(this)}F(e,t,n,r){const i=typeof n!="function"?n:{};return this.s=typeof n=="function"?n:r,jS(this),po(this,e,i,t),DS(this)}m(){var e=new mr;St(e,"image_in"),St(e,"norm_rect"),ze(e,"normalized_landmarks"),ze(e,"world_landmarks"),ze(e,"segmentation_masks");const t=new Pr;Hi(t,Jge,this.h);const n=new qn;Nr(n,"mediapipe.tasks.vision.pose_landmarker.PoseLandmarkerGraph"),vt(n,"IMAGE:image_in"),vt(n,"NORM_RECT:norm_rect"),qe(n,"NORM_LANDMARKS:normalized_landmarks"),qe(n,"WORLD_LANDMARKS:world_landmarks"),n.o(t),$r(e,n),Mm(this,e),this.g.attachProtoVectorListener("normalized_landmarks",((r,i)=>{this.landmarks=[];for(const o of r)r=Jf(o),this.landmarks.push(Pm(r));ie(this,i)})),this.g.attachEmptyPacketListener("normalized_landmarks",(r=>{this.landmarks=[],ie(this,r)})),this.g.attachProtoVectorListener("world_landmarks",((r,i)=>{this.worldLandmarks=[];for(const o of r)r=hl(o),this.worldLandmarks.push(Ed(r));ie(this,i)})),this.g.attachEmptyPacketListener("world_landmarks",(r=>{this.worldLandmarks=[],ie(this,r)})),this.outputSegmentationMasks&&(qe(n,"SEGMENTATION_MASK:segmentation_masks"),Fl(this,"segmentation_masks"),this.g.ca("segmentation_masks",((r,i)=>{this.segmentationMasks=r.map((o=>Bl(this,o,!0,!this.s))),ie(this,i)})),this.g.attachEmptyPacketListener("segmentation_masks",(r=>{this.segmentationMasks=[],ie(this,r)}))),e=e.g(),this.setGraph(new Uint8Array(e),!0)}};wr.prototype.detectForVideo=wr.prototype.F,wr.prototype.detect=wr.prototype.D,wr.prototype.setOptions=wr.prototype.o,wr.createFromModelPath=function(e,t){return Ue(wr,e,{baseOptions:{modelAssetPath:t}})},wr.createFromModelBuffer=function(e,t){return Ue(wr,e,{baseOptions:{modelAssetBuffer:t}})},wr.createFromOptions=function(e,t){return Ue(wr,e,t)},wr.POSE_CONNECTIONS=bO;var sme=()=>typeof OffscreenCanvas<"u";async function FS(e){return new Promise(t=>setTimeout(t,e))}async function ame(e){await FS(10);const n=Date.now();for(;Date.now()-n<500;){const{width:r,height:i}=e.getSettings();if(r&&i)return{width:r,height:i};await FS(50)}return{width:void 0,height:void 0}}function J1(e,t){if(sme())return new OffscreenCanvas(e,t);const n=document.createElement("canvas");return n.width=e,n.height=t,n}var SO=class CO{constructor(t,n,r={}){this.useStreamFallback=!1,this.processingEnabled=!1;var i;this.name=n,this.transformer=t,this.maxFps=(i=r.maxFps)!=null?i:30}static get isSupported(){const t=typeof MediaStreamTrackGenerator<"u"&&typeof MediaStreamTrackProcessor<"u",n=typeof HTMLCanvasElement<"u"&&typeof VideoFrame<"u"&&"captureStream"in HTMLCanvasElement.prototype;return t||n}static get hasModernApiSupport(){return typeof MediaStreamTrackGenerator<"u"&&typeof MediaStreamTrackProcessor<"u"}async setup(t){this.source=t.track;const{width:n,height:r}=await ame(this.source);if(this.sourceDummy=t.element,!(this.sourceDummy instanceof HTMLVideoElement))throw TypeError("Currently only video transformers are supported");if(this.sourceDummy instanceof HTMLVideoElement&&(this.sourceDummy.height=r??300,this.sourceDummy.width=n??300),this.useStreamFallback=!CO.hasModernApiSupport,this.useStreamFallback){const i=document.querySelector('canvas[data-livekit-processor="'+this.name+'"]');i?(this.displayCanvas=i,this.displayCanvas.width=n??300,this.displayCanvas.height=r??300):(this.displayCanvas=document.createElement("canvas"),this.displayCanvas.width=n??300,this.displayCanvas.height=r??300,this.displayCanvas.style.display="none",this.displayCanvas.dataset.livekitProcessor=this.name,document.body.appendChild(this.displayCanvas)),this.renderContext=this.displayCanvas.getContext("2d"),this.capturedStream=this.displayCanvas.captureStream(),this.canvas=J1(n??300,r??300)}else this.processor=new MediaStreamTrackProcessor({track:this.source}),this.trackGenerator=new MediaStreamTrackGenerator({kind:"video",signalTarget:this.source}),this.canvas=J1(n??300,r??300)}async init(t){if(await this.setup(t),!this.canvas)throw new TypeError("Expected canvas to be defined after setup");await this.transformer.init({outputCanvas:this.canvas,inputElement:this.sourceDummy}),this.useStreamFallback?this.initFallbackPath():this.initStreamProcessorPath()}initStreamProcessorPath(){if(!this.processor||!this.trackGenerator)throw new TypeError("Expected processor and trackGenerator to be defined for stream processor path");const n=this.processor.readable.pipeThrough(this.transformer.transformer),r=Symbol("stream");this.symbol=r,n.pipeTo(this.trackGenerator.writable).then(()=>this.destroy(r)).catch(i=>{i instanceof DOMException&&i.name==="AbortError"?console.log("stream processor path aborted"):(console.error("error when trying to pipe",i),this.destroy(r))}),this.processedTrack=this.trackGenerator}initFallbackPath(){if(!this.capturedStream||!this.source||!this.canvas||!this.renderContext)throw new TypeError("Missing required components for fallback implementation");this.processedTrack=this.capturedStream.getVideoTracks()[0],this.processingEnabled=!0,this.frameCallback=t=>{if(!this.processingEnabled||!t){t.close();return}const n={enqueue:r=>{this.renderContext&&this.displayCanvas&&(this.renderContext.drawImage(r,0,0,this.displayCanvas.width,this.displayCanvas.height),r.close())}};try{this.transformer.transform(t,n)}catch(r){console.error("Error in transform:",r),t.close()}},this.startRenderLoop()}startRenderLoop(){if(!this.sourceDummy||!(this.sourceDummy instanceof HTMLVideoElement))return;let t=-1,n=0;const r=this.sourceDummy,i=1e3/this.maxFps;let o=this.maxFps,s=[],a=0,c=0,l=0;const u=()=>{if(!this.processingEnabled||!this.sourceDummy||!(this.sourceDummy instanceof HTMLVideoElement))return;if(this.sourceDummy.paused){console.warn("Video is paused, trying to play"),this.sourceDummy.play();return}const d=r.currentTime,p=performance.now(),g=p-n,v=d!==t;if(v){if(a>0){const _=p-a;s.push(_),s.length>10&&s.shift(),s.length>2&&(o=1e3/(s.reduce((S,b)=>S+b,0)/s.length),(typeof window<"u"&&window.location.hostname==="localhost"||window.location.hostname==="127.0.0.1")&&p-l>5e3&&(console.debug(`[${this.name}] Estimated video FPS: ${o.toFixed(1)}, Processing at: ${(c/5).toFixed(1)} FPS`),c=0,l=p))}a=p}const m=g>=i;if(v&&m){t=d,n=p,c++;try{if(r.readyState>=HTMLMediaElement.HAVE_CURRENT_DATA){const _=new VideoFrame(r);this.frameCallback?this.frameCallback(_):_.close()}}catch(_){console.error("Error in render loop:",_)}}this.animationFrameId=requestAnimationFrame(u)};this.animationFrameId=requestAnimationFrame(u)}async restart(t){await this.destroy(),await this.init(t)}async restartTransformer(...t){await this.transformer.restart(t[0])}async updateTransformerOptions(...t){await this.transformer.update(t[0])}async destroy(t){var n,r,i,o;t&&this.symbol!==t||(this.useStreamFallback?(this.processingEnabled=!1,this.animationFrameId&&(cancelAnimationFrame(this.animationFrameId),this.animationFrameId=void 0),this.displayCanvas&&this.displayCanvas.parentNode&&this.displayCanvas.parentNode.removeChild(this.displayCanvas),(n=this.capturedStream)==null||n.getTracks().forEach(s=>s.stop())):(await((i=(r=this.processor)==null?void 0:r.writableControl)==null?void 0:i.close()),(o=this.trackGenerator)==null||o.stop()),await this.transformer.destroy())}},cme={"@mediapipe/tasks-vision":"0.10.14"};function ma(e,t){const n=e.TEXTURE0+t;e.activeTexture(n);const r=e.createTexture();return e.bindTexture(e.TEXTURE_2D,r),e.texParameteri(e.TEXTURE_2D,e.TEXTURE_WRAP_S,e.CLAMP_TO_EDGE),e.texParameteri(e.TEXTURE_2D,e.TEXTURE_WRAP_T,e.CLAMP_TO_EDGE),e.texParameteri(e.TEXTURE_2D,e.TEXTURE_MIN_FILTER,e.LINEAR),e.texParameteri(e.TEXTURE_2D,e.TEXTURE_MAG_FILTER,e.LINEAR),e.bindTexture(e.TEXTURE_2D,r),r}function Qs(e,t,n){const r=e.createShader(t);if(e.shaderSource(r,n),e.compileShader(r),!e.getShaderParameter(r,e.COMPILE_STATUS))throw console.error("Shader compile failed:",e.getShaderInfoLog(r)),e.deleteShader(r),new Error("Shader compile failed");return r}function Dm(e,t,n){const r=e.createProgram();if(e.attachShader(r,t),e.attachShader(r,n),e.linkProgram(r),!e.getProgramParameter(r,e.LINK_STATUS))throw console.error("Program link failed:",e.getProgramInfoLog(r)),new Error("Program link failed");return r}function ju(e,t,n,r){const i=e.createFramebuffer();if(e.bindFramebuffer(e.FRAMEBUFFER,i),e.framebufferTexture2D(e.FRAMEBUFFER,e.COLOR_ATTACHMENT0,e.TEXTURE_2D,t,0),e.bindTexture(e.TEXTURE_2D,t),e.texImage2D(e.TEXTURE_2D,0,e.RGBA,n,r,0,e.RGBA,e.UNSIGNED_BYTE,null),e.checkFramebufferStatus(e.FRAMEBUFFER)!==e.FRAMEBUFFER_COMPLETE)throw new Error("Framebuffer not complete");return e.bindFramebuffer(e.FRAMEBUFFER,null),i}function lme(e){const t=e.createBuffer();return e.bindBuffer(e.ARRAY_BUFFER,t),e.bufferData(e.ARRAY_BUFFER,new Float32Array([-1,-1,-1,1,1,1,-1,-1,1,1,1,-1]),e.STATIC_DRAW),t}async function ume(e,t,n){const r=e.width/e.height,i=t/n;let o=0,s=0,a=e.width,c=e.height;return r>i?(a=Math.round(e.height*i),o=Math.round((e.width-a)/2)):r<i&&(c=Math.round(e.width/i),s=Math.round((e.height-c)/2)),createImageBitmap(e,o,s,a,c,{resizeWidth:t,resizeHeight:n,resizeQuality:"medium"})}var va;function M2(){return va||(va=new ImageData(2,2),va.data[0]=0,va.data[1]=0,va.data[2]=0,va.data[3]=0),va}var Tw=e=>e,Aw=(e=!0)=>`#version 300 es
  in vec2 position;
  out vec2 texCoords;

  void main() {
    texCoords = (position + 1.0) / 2.0;
    texCoords.y = ${e?"1.0 - texCoords.y":"texCoords.y"};
    gl_Position = vec4(position, 0, 1.0);
  }
`,dme=Tw`#version 300 es
  precision mediump float;
  in vec2 texCoords;
  uniform sampler2D u_texture;
  uniform vec2 u_texelSize;
  uniform vec2 u_direction;
  uniform float u_radius;
  out vec4 fragColor;

  void main() {
    float sigma = u_radius;
    float twoSigmaSq = 2.0 * sigma * sigma;
    float totalWeight = 0.0;
    vec3 result = vec3(0.0);
    const int MAX_SAMPLES = 16;
    int radius = int(min(float(MAX_SAMPLES), ceil(u_radius)));

    for (int i = -MAX_SAMPLES; i <= MAX_SAMPLES; ++i) {
      float offset = float(i);
      if (abs(offset) > float(radius)) continue;
      float weight = exp(-(offset * offset) / twoSigmaSq);
      vec2 sampleCoord = texCoords + u_direction * u_texelSize * offset;
      result += texture(u_texture, sampleCoord).rgb * weight;
      totalWeight += weight;
    }

    fragColor = vec4(result / totalWeight, 1.0);
  }
`;function fme(e){const t=Qs(e,e.VERTEX_SHADER,Aw()),n=Qs(e,e.FRAGMENT_SHADER,dme),r=Dm(e,t,n),i={position:e.getAttribLocation(r,"position"),texture:e.getUniformLocation(r,"u_texture"),texelSize:e.getUniformLocation(r,"u_texelSize"),direction:e.getUniformLocation(r,"u_direction"),radius:e.getUniformLocation(r,"u_radius")};return{program:r,shader:n,vertexShader:t,uniforms:i}}function HS(e,t,n,r,i,o,s,a,c,l){e.useProgram(o),e.bindBuffer(e.ARRAY_BUFFER,a),e.vertexAttribPointer(s.position,2,e.FLOAT,!1,0,0),e.enableVertexAttribArray(s.position);const u=1/n,d=1/r;return e.bindFramebuffer(e.FRAMEBUFFER,c[0]),e.viewport(0,0,n,r),e.activeTexture(e.TEXTURE0),e.bindTexture(e.TEXTURE_2D,t),e.uniform1i(s.texture,0),e.uniform2f(s.texelSize,u,d),e.uniform2f(s.direction,1,0),e.uniform1f(s.radius,i),e.drawArrays(e.TRIANGLES,0,6),e.bindFramebuffer(e.FRAMEBUFFER,c[1]),e.viewport(0,0,n,r),e.activeTexture(e.TEXTURE0),e.bindTexture(e.TEXTURE_2D,l[0]),e.uniform1i(s.texture,0),e.uniform2f(s.direction,0,1),e.drawArrays(e.TRIANGLES,0,6),e.bindFramebuffer(e.FRAMEBUFFER,null),l[1]}var hme=Tw`#version 300 es
precision mediump float;

in vec2 texCoords;

uniform sampler2D u_texture;
uniform vec2 u_texelSize;    // 1.0 / texture size
uniform vec2 u_direction;    // (1.0, 0.0) for horizontal, (0.0, 1.0) for vertical
uniform float u_radius;      // blur radius in texels

out vec4 fragColor;

void main() {
    vec3 sum = vec3(0.0);
    float count = 0.0;

    // Limit radius to avoid excessive loop cost
    const int MAX_RADIUS = 16;
    int radius = int(min(float(MAX_RADIUS), u_radius));

    for (int i = -MAX_RADIUS; i <= MAX_RADIUS; ++i) {
        if (abs(i) > radius) continue;

        vec2 offset = u_direction * u_texelSize * float(i);
        sum += texture(u_texture, texCoords + offset).rgb;
        count += 1.0;
  }

  fragColor = vec4(sum / count, 1.0);
}
`;function pme(e){const t=Qs(e,e.VERTEX_SHADER,Aw()),n=Qs(e,e.FRAGMENT_SHADER,hme),r=Dm(e,t,n),i={position:e.getAttribLocation(r,"position"),texture:e.getUniformLocation(r,"u_texture"),texelSize:e.getUniformLocation(r,"u_texelSize"),direction:e.getUniformLocation(r,"u_direction"),radius:e.getUniformLocation(r,"u_radius")};return{program:r,vertexShader:t,fragmentShader:n,uniforms:i}}var gme=Tw`#version 300 es
  precision mediump float;
  in vec2 texCoords;
  uniform sampler2D background;
  uniform sampler2D frame;
  uniform sampler2D mask;
  out vec4 fragColor;
  
  void main() {
      
    vec4 frameTex = texture(frame, texCoords);
    vec4 bgTex = texture(background, texCoords);

    float maskVal = texture(mask, texCoords).r;

    // Compute screen-space gradient to detect edge sharpness
    float grad = length(vec2(dFdx(maskVal), dFdy(maskVal)));

    float edgeSoftness = 2.0; // higher = softer
    
    // Create a smooth edge around binary transition
    float smoothAlpha = smoothstep(0.5 - grad * edgeSoftness, 0.5 + grad * edgeSoftness, maskVal);

    // Optional: preserve frame alpha, or override as fully opaque
    vec4 blended = mix(bgTex, vec4(frameTex.rgb, 1.0), 1.0 - smoothAlpha);
    
    fragColor = blended;
  
  }
`;function mme(e){const t=Qs(e,e.VERTEX_SHADER,Aw()),n=Qs(e,e.FRAGMENT_SHADER,gme),r=Dm(e,t,n),i={position:e.getAttribLocation(r,"position")},o={mask:e.getUniformLocation(r,"mask"),frame:e.getUniformLocation(r,"frame"),background:e.getUniformLocation(r,"background"),stepWidth:e.getUniformLocation(r,"u_stepWidth")};return{program:r,vertexShader:t,fragmentShader:n,attribLocations:i,uniformLocations:o}}function vme(e,t,n){const r=e.createTexture();e.bindTexture(e.TEXTURE_2D,r),e.texImage2D(e.TEXTURE_2D,0,e.RGBA,t,n,0,e.RGBA,e.UNSIGNED_BYTE,null),e.texParameteri(e.TEXTURE_2D,e.TEXTURE_MIN_FILTER,e.LINEAR),e.texParameteri(e.TEXTURE_2D,e.TEXTURE_MAG_FILTER,e.LINEAR),e.texParameteri(e.TEXTURE_2D,e.TEXTURE_WRAP_S,e.CLAMP_TO_EDGE),e.texParameteri(e.TEXTURE_2D,e.TEXTURE_WRAP_T,e.CLAMP_TO_EDGE);const i=e.createFramebuffer();e.bindFramebuffer(e.FRAMEBUFFER,i),e.framebufferTexture2D(e.FRAMEBUFFER,e.COLOR_ATTACHMENT0,e.TEXTURE_2D,r,0);const o=`
      attribute vec2 position;
      varying vec2 v_uv;
      void main() {
        v_uv = (position + 1.0) * 0.5;
        gl_Position = vec4(position, 0.0, 1.0);
      }
    `,s=`
      precision mediump float;
      varying vec2 v_uv;
      uniform sampler2D u_texture;
      void main() {
        gl_FragColor = texture2D(u_texture, v_uv);
      }
    `,a=Qs(e,e.VERTEX_SHADER,o),c=Qs(e,e.FRAGMENT_SHADER,s),l=Dm(e,a,c),u={texture:e.getUniformLocation(l,"u_texture"),position:e.getAttribLocation(l,"position")};return{framebuffer:i,texture:r,program:l,uniforms:u}}function yme(e,t,n,r,i,o){return e.useProgram(n.program),e.bindFramebuffer(e.FRAMEBUFFER,n.framebuffer),e.viewport(0,0,i,o),e.bindBuffer(e.ARRAY_BUFFER,r),e.enableVertexAttribArray(n.uniforms.position),e.vertexAttribPointer(n.uniforms.position,2,e.FLOAT,!1,0,0),e.activeTexture(e.TEXTURE0),e.bindTexture(e.TEXTURE_2D,t),e.uniform1i(n.uniforms.texture,0),e.drawArrays(e.TRIANGLES,0,6),e.bindFramebuffer(e.FRAMEBUFFER,null),n.texture}var US=e=>{const t=e.getContext("webgl2",{antialias:!0,premultipliedAlpha:!0});let n=null,r=8;const i=4;if(!t){console.error("Failed to create WebGL context");return}t.enable(t.BLEND),t.blendFunc(t.SRC_ALPHA,t.ONE_MINUS_SRC_ALPHA);const o=mme(t),s=o.program,a=o.attribLocations.position,{mask:c,frame:l,background:u}=o.uniformLocations,d=fme(t),p=d.program,g=d.uniforms,v=pme(t),m=v.program,_=v.uniforms,y=ma(t,0),w=ma(t,1),S=lme(t);if(!S)throw new Error("Failed to create vertex buffer");let b=[],C=[],E=[],x=0,I=1;b.push(ma(t,3)),b.push(ma(t,4));const L=Math.floor(e.width/i),R=Math.floor(e.height/i),k=vme(t,L,R);C.push(ju(t,b[0],L,R)),C.push(ju(t,b[1],L,R));const A=ma(t,5),P=ju(t,A,e.width,e.height);E.push(ma(t,6)),E.push(ma(t,7));const O=[ju(t,E[0],e.width,e.height),ju(t,E[1],e.width,e.height)];t.useProgram(s),t.uniform1i(u,0),t.uniform1i(l,1),t.uniform1i(c,2);let j=M2();function $(F){if(F.codedWidth===0||E.length===0)return;const K=F.displayWidth,te=F.displayHeight;t.activeTexture(t.TEXTURE1),t.bindTexture(t.TEXTURE_2D,w),t.texImage2D(t.TEXTURE_2D,0,t.RGBA,t.RGBA,t.UNSIGNED_BYTE,F);let oe=y;if(n){const pe=yme(t,w,k,S,L,R);oe=HS(t,pe,L,R,n,p,g,S,C,b)}else t.activeTexture(t.TEXTURE0),t.bindTexture(t.TEXTURE_2D,y),t.texImage2D(t.TEXTURE_2D,0,t.RGBA,t.RGBA,t.UNSIGNED_BYTE,j),oe=y;t.viewport(0,0,K,te),t.clearColor(1,1,1,1),t.clear(t.COLOR_BUFFER_BIT),t.useProgram(s),t.bindBuffer(t.ARRAY_BUFFER,S),t.vertexAttribPointer(a,2,t.FLOAT,!1,0,0),t.enableVertexAttribArray(a),t.activeTexture(t.TEXTURE0),t.bindTexture(t.TEXTURE_2D,oe),t.uniform1i(u,0),t.activeTexture(t.TEXTURE1),t.bindTexture(t.TEXTURE_2D,w),t.uniform1i(l,1),t.activeTexture(t.TEXTURE2),t.bindTexture(t.TEXTURE_2D,E[x]),t.uniform1i(c,2),t.drawArrays(t.TRIANGLES,0,6)}async function T(F){if(j=M2(),F)try{j=await ume(F,e.width,e.height)}catch(K){console.error("Error processing background image, falling back to black background:",K)}t.activeTexture(t.TEXTURE0),t.bindTexture(t.TEXTURE_2D,y),t.texImage2D(t.TEXTURE_2D,0,t.RGBA,t.RGBA,t.UNSIGNED_BYTE,j)}function N(F){n=F?Math.max(1,Math.floor(F/i)):null,T(null)}function M(F){const K=[P,O[I]],te=[A,E[I]];HS(t,F,e.width,e.height,r,m,_,S,K,te),x=I,I=1-I}function B(){t.deleteProgram(s),t.deleteProgram(p),t.deleteProgram(m),t.deleteTexture(y),t.deleteTexture(w),t.deleteTexture(A),t.deleteFramebuffer(P);for(const F of b)t.deleteTexture(F);for(const F of C)t.deleteFramebuffer(F);for(const F of E)t.deleteTexture(F);for(const F of O)t.deleteFramebuffer(F);t.deleteBuffer(S),k&&(t.deleteTexture(k.texture),t.deleteFramebuffer(k.framebuffer),t.deleteProgram(k.program)),j&&(j instanceof ImageBitmap&&j.close(),j=M2()),b=[],C=[],E=[]}return{renderFrame:$,updateMask:M,setBackgroundImage:T,setBlurRadius:N,cleanup:B}},EO=class{constructor(){this.isDisabled=!1}async init({outputCanvas:e,inputElement:t}){if(!(t instanceof HTMLVideoElement))throw TypeError("Video transformer needs a HTMLVideoElement as input");this.transformer=new TransformStream({transform:(n,r)=>this.transform(n,r)}),this.canvas=e||null,e&&(this.gl=US(this.canvas||J1(t.videoWidth,t.videoHeight))),this.inputVideo=t,this.isDisabled=!1}async restart({outputCanvas:e,inputElement:t}){var n;this.canvas=e||null,(n=this.gl)==null||n.cleanup(),this.gl=US(this.canvas||J1(t.videoWidth,t.videoHeight)),this.inputVideo=t,this.isDisabled=!1}async destroy(){var e;this.isDisabled=!0,this.canvas=void 0,(e=this.gl)==null||e.cleanup(),this.gl=void 0}},xO=class extends EO{constructor(e){super(),this.backgroundImageAndPath=null,this.segmentationTimeMs=0,this.isFirstFrame=!0,this.options=e,this.update(e)}static get isSupported(){return typeof OffscreenCanvas<"u"&&typeof VideoFrame<"u"&&typeof createImageBitmap<"u"&&!!document.createElement("canvas").getContext("webgl2")}async init({outputCanvas:e,inputElement:t}){var n,r,i,o,s,a;await super.init({outputCanvas:e,inputElement:t});const c=await ya.forVisionTasks((r=(n=this.options.assetPaths)==null?void 0:n.tasksVisionFileSet)!=null?r:`https://cdn.jsdelivr.net/npm/@mediapipe/tasks-vision@${cme["@mediapipe/tasks-vision"]}/wasm`);this.imageSegmenter=await kn.createFromOptions(c,{baseOptions:{modelAssetPath:(o=(i=this.options.assetPaths)==null?void 0:i.modelAssetPath)!=null?o:"https://storage.googleapis.com/mediapipe-models/image_segmenter/selfie_segmenter/float16/latest/selfie_segmenter.tflite",delegate:"GPU",...this.options.segmenterOptions},canvas:this.canvas,runningMode:"VIDEO",outputCategoryMask:!0,outputConfidenceMasks:!1}),(s=this.options)!=null&&s.imagePath&&await this.loadAndSetBackground(this.options.imagePath).catch(l=>console.error("Error while loading processor background image: ",l)),this.options.blurRadius&&((a=this.gl)==null||a.setBlurRadius(this.options.blurRadius))}async destroy(){var e;await super.destroy(),await((e=this.imageSegmenter)==null?void 0:e.close()),this.backgroundImageAndPath=null,this.isFirstFrame=!0}async loadAndSetBackground(e){var t,n;if(!this.backgroundImageAndPath||((t=this.backgroundImageAndPath)==null?void 0:t.path)!==e){const r=new Image;await new Promise((o,s)=>{r.crossOrigin="Anonymous",r.onload=()=>o(r),r.onerror=a=>s(a),r.src=e});const i=await createImageBitmap(r);this.backgroundImageAndPath={imageData:i,path:e}}(n=this.gl)==null||n.setBackgroundImage(this.backgroundImageAndPath.imageData)}async transform(e,t){var n,r;let i=!1;try{if(!(e instanceof VideoFrame)||e.codedWidth===0||e.codedHeight===0){console.debug("empty frame detected, ignoring");return}if(this.isDisabled){t.enqueue(e),i=!0;return}const o=Date.now();if(!this.canvas)throw TypeError("Canvas needs to be initialized first");this.canvas.width=e.displayWidth,this.canvas.height=e.displayHeight,this.isFirstFrame&&(t.enqueue(e.clone()),this.inputVideo&&await new Promise(c=>{this.inputVideo.requestVideoFrameCallback((l,u)=>{const d=u.expectedDisplayTime-u.presentationTime;setTimeout(c,d)})})),this.isFirstFrame=!1;const s=performance.now(),a=new Promise((c,l)=>{var u;try{let d=performance.now();(u=this.imageSegmenter)==null||u.segmentForVideo(e,d,p=>{this.segmentationTimeMs=performance.now()-d,this.segmentationResults=p,this.updateMask(p.categoryMask),p.close(),c()})}catch(d){l(d)}});if(this.drawFrame(e),this.canvas&&this.canvas.width>0&&this.canvas.height>0){const c=new VideoFrame(this.canvas,{timestamp:e.timestamp||o});t.enqueue(c);const l=performance.now()-s,u={processingTimeMs:this.segmentationTimeMs+l,segmentationTimeMs:this.segmentationTimeMs,filterTimeMs:l};(r=(n=this.options).onFrameProcessed)==null||r.call(n,u)}else t.enqueue(e);await a}catch(o){console.error("Error while processing frame: ",o)}finally{i||e.close()}}async update(e){var t,n,r;this.options={...this.options,...e},(n=this.gl)==null||n.setBlurRadius((t=e.blurRadius)!=null?t:null),e.imagePath?await this.loadAndSetBackground(e.imagePath):(r=this.gl)==null||r.setBackgroundImage(null)}async drawFrame(e){var t;this.gl&&((t=this.gl)==null||t.renderFrame(e))}async updateMask(e){var t;e&&((t=this.gl)==null||t.updateMask(e.getAsWebGLTexture()))}},_me=()=>xO.isSupported&&SO.isSupported;const bme=""+new URL("selfie_segmenter-DF05sdL4.tflite",import.meta.url).href,wme={wasmLoaderPath:new URL(""+new URL("vision_wasm_internal-CEyeacG0.js",import.meta.url).href,import.meta.url).href,wasmBinaryPath:new URL(""+new URL("vision_wasm_internal-TmjHuG4I.wasm",import.meta.url).href,import.meta.url).href};class Sme extends xO{async init({outputCanvas:t,inputElement:n}){await EO.prototype.init.call(this,{outputCanvas:t,inputElement:n}),this.imageSegmenter=await kn.createFromOptions(wme,{baseOptions:{modelAssetPath:bme,delegate:"GPU",...this.options.segmenterOptions},canvas:this.canvas,runningMode:"VIDEO",outputCategoryMask:!0,outputConfidenceMasks:!1}),this.options.blurRadius&&this.gl?.setBlurRadius(this.options.blurRadius)}}const Pw=f.createContext(void 0);function Mw(){const e=f.use(Pw);if(e===void 0)throw new Error("useTrackProcessor must be used within a ProcessorProvider");return e}function Cme(){const e=f.use(Pw);if(e===void 0)throw new Error("useTrackProcessor must be used within a ProcessorProvider");return dN(n=>n.pipe(V(([r])=>r)),[e])}const Eme=(e,t,n)=>{ge([t,n]).pipe(e.bind()).subscribe(([r,i])=>{if(!i||!r)return;const{processor:o}=i;o&&!r.getProcessor()&&r.setProcessor(o),!o&&r.getProcessor()&&r.stopProcessor()})},xme=e=>{const{processor:t}=Mw();f.useEffect(()=>{e&&(t&&!e.getProcessor()&&e.setProcessor(t),!t&&e.getProcessor()&&e.stopProcessor())},[t,e])},Ime=({children:e})=>{const[t]=qt(FM),n=f.useMemo(()=>_me(),[]),r=f.useMemo(()=>new SO(new Sme({blurRadius:15}),"background-blur"),[]),i=f.useMemo(()=>({supported:n,processor:n&&t?r:void 0}),[n,t,r]);return h.jsx(Pw,{value:i,children:e})},Rme="_livekit_room_box_pjiap_12",N2={livekit_room_box:Rme},Lme=({client:e,livekitRooms:t,env:n})=>{const{t:r}=he(),[i,o]=qt(DM),[s,a]=qt(vb),[c,l]=f.useState(!1);f.useEffect(()=>{e.doesServerSupportUnstableFeature(xD).then(R=>{l(R)}).catch(R=>{U.warn("Failed to check if sticky events are supported",R)})},[e]);const[u,d]=qt(GM),p=f.useId(),g=f.useCallback(R=>{d(R.target.value)},[d]),[v,m]=qt(Pl),[_,y]=qt(qM),[w,S]=qt(KM),[b,C]=f.useState(w);f.useEffect(()=>{C(w)},[w]);const[E,x]=qt(VM),I=gi(),L=f.useMemo(()=>{const R=t?.find(k=>k.isLocal)?.room;if(R?.engine.client.ws?.url){const k=new URL(R.engine.client.ws.url);return k.search="",k}return null},[t]);return h.jsxs(h.Fragment,{children:[h.jsx("p",{children:r("developer_mode.hostname",{hostname:window.location.hostname||"unknown"})}),h.jsx("p",{children:r("version",{productName:"Element Call",version:"dev"})}),h.jsx("p",{children:r("developer_mode.crypto_version",{version:e.getCrypto()?.getVersion()||"unknown"})}),h.jsx("p",{children:r("developer_mode.matrix_id",{id:e.getUserId()||"unknown"})}),h.jsx("p",{children:r("developer_mode.device_id",{id:e.getDeviceId()||"unknown"})}),h.jsx(je,{children:h.jsx(wt,{id:"duplicateTiles",type:"number",label:r("developer_mode.duplicate_tiles_label"),value:i.toString(),min:0,onChange:f.useCallback(R=>{const k=R.target.valueAsNumber;k<0||o(Number.isNaN(k)?0:k)},[o])})}),h.jsx(je,{children:h.jsx(wt,{id:"debugTileLayout",type:"checkbox",checked:s,label:r("developer_mode.debug_tile_layout_label"),onChange:R=>a(R.target.checked)})}),h.jsx(je,{children:h.jsx(wt,{id:"showConnectionStats",type:"checkbox",label:r("developer_mode.show_connection_stats"),checked:!!v,onChange:f.useCallback(R=>{m(R.target.checked)},[m])})}),h.jsx(je,{children:h.jsx(wt,{id:"muteAllAudio",type:"checkbox",label:r("developer_mode.mute_all_audio"),checked:E,onChange:f.useCallback(R=>{x(R.target.checked)},[x])})})," ",h.jsxs(je,{children:[h.jsx(wt,{id:"alwaysShowIphoneEarpiece",type:"checkbox",label:r("developer_mode.always_show_iphone_earpiece"),checked:_,onChange:f.useCallback(R=>{y(R.target.checked)},[y])})," "]}),h.jsx(Sre,{onSubmit:R=>R.preventDefault(),helpLabel:w===null?r("developer_mode.custom_livekit_url.from_config"):r("developer_mode.custom_livekit_url.current_url")+w,label:r("developer_mode.custom_livekit_url.label"),saveButtonLabel:r("developer_mode.custom_livekit_url.save"),savingLabel:r("developer_mode.custom_livekit_url.saving"),cancelButtonLabel:r("developer_mode.custom_livekit_url.reset"),onSave:f.useCallback(R=>{S(b===""?null:b)},[S,b]),value:b??"",onChange:f.useCallback(R=>{C(R.target.value)},[C]),onCancel:f.useCallback(R=>{S(null)},[S])}),h.jsx(Fi,{as:"h3",type:"body",weight:"semibold",size:"lg",children:r("developer_mode.matrixRTCMode.title")}),h.jsxs(y1,{children:[h.jsxs(Ip,{name:p,control:h.jsx(xp,{checked:u===rr.Legacy,value:rr.Legacy,onChange:g}),children:[h.jsx(fd,{children:r("developer_mode.matrixRTCMode.Legacy.label")}),h.jsx(Rp,{children:r("developer_mode.matrixRTCMode.Legacy.description")})]}),h.jsxs(Ip,{name:p,control:h.jsx(xp,{checked:u===rr.Compatibility,value:rr.Compatibility,onChange:g}),children:[h.jsx(fd,{children:r("developer_mode.matrixRTCMode.Comptibility.label")}),h.jsx(Rp,{children:r("developer_mode.matrixRTCMode.Comptibility.description")})]}),h.jsxs(Ip,{name:p,control:h.jsx(xp,{checked:u===rr.Matrix_2_0,value:rr.Matrix_2_0,disabled:!c,onChange:g}),children:[h.jsx(fd,{children:r("developer_mode.matrixRTCMode.Matrix_2_0.label")}),h.jsx(Rp,{children:r("developer_mode.matrixRTCMode.Matrix_2_0.description")})]})]}),t?.map(R=>h.jsxs("div",{className:N2.livekit_room_box,children:[h.jsx("h4",{children:r("developer_mode.livekit_sfu",{url:R.url||"unknown"})}),h.jsxs("p",{children:["LivekitAlias: ",R.livekitAlias]}),h.jsxs("p",{children:["connectionState (wont hot reload): ",R.room.state]}),R.isLocal&&h.jsxs("p",{children:["ws-url: ",L?.href]}),h.jsxs("p",{children:[r("developer_mode.livekit_server_info"),"(",R.isLocal?"local":"remote",")"]}),h.jsxs("pre",{className:N2.pre,children:[R.room.serverInfo?JSON.stringify(R.room.serverInfo,null,2):"undefined",R.room.metadata]}),h.jsx("p",{children:"Local Participant"}),h.jsx("pre",{className:N2.pre,children:R.room.localParticipant.identity}),h.jsx("p",{children:"Remote Participants"}),h.jsx("ul",{children:Array.from(R.room.remoteParticipants.keys()).map(k=>h.jsx("li",{children:k},k))})]})),h.jsx("p",{children:r("developer_mode.environment_variables")}),h.jsx("pre",{children:JSON.stringify(n,null,2)}),h.jsx("p",{children:r("developer_mode.url_params")}),h.jsx("pre",{children:JSON.stringify(I,null,2)})]})},kme={BASE_URL:"./",DEV:!1,MODE:"production",PROD:!0,SSR:!1,VITE_PACKAGE:"embedded"},Nw="audio",$w=({open:e,onDismiss:t,tab:n,onTabChange:r,client:i,roomId:o,livekitRooms:s})=>{const{t:a}=he(),c=()=>{const{supported:L}=Mw(),[R,k]=qt(FM);return h.jsxs(h.Fragment,{children:[h.jsx("h4",{children:a("settings.background_blur_header")}),h.jsx(je,{children:h.jsx(wt,{id:"activateBackgroundBlur",label:a("settings.background_blur_label"),description:L?"":a("settings.blur_not_supported_by_browser"),type:"checkbox",checked:!!R,onChange:A=>k(A.target.checked),disabled:!L})})]})},l=dc();f.useEffect(()=>{e&&l.requestDeviceNames()},[e,l]);const[u,d]=qt(BM),[p,g]=f.useState(u),[v]=qt(jM),{available:m}=Qg(),{controlledAudioDevices:_}=gi(),y=J(uN),w={key:"audio",name:a("common.audio"),content:h.jsx(h.Fragment,{children:h.jsxs(y1,{children:[!_&&h.jsx(y2,{device:l.audioInput,title:a("settings.devices.microphone"),numberedLabel:L=>a("settings.devices.microphone_numbered",{n:L})}),y&&_&&h.jsx(De,{onClick:L=>{L.preventDefault(),window.controls.showNativeAudioDevicePicker?.(),window.controls.showNativeOutputDevicePicker?.()},children:a("settings.devices.change_device_button")}),h.jsx(y2,{device:l.audioOutput,title:a("settings.devices.speaker"),numberedLabel:L=>a("settings.devices.speaker_numbered",{n:L})}),h.jsxs("div",{className:b9.volumeSlider,children:[h.jsx("label",{children:a("settings.audio_tab.effect_volume_label")}),h.jsx("p",{children:a("settings.audio_tab.effect_volume_description")}),h.jsx(kN,{label:a("video_tile.volume"),value:p,onValueChange:g,onValueCommit:d,min:0,max:1,step:.01})]})]})})},S={key:"video",name:a("common.video"),content:h.jsxs(h.Fragment,{children:[h.jsx(y1,{children:h.jsx(y2,{device:l.videoInput,title:a("settings.devices.camera"),numberedLabel:L=>a("settings.devices.camera_numbered",{n:L})})}),h.jsx(P_,{}),h.jsx(c,{})]})},b={key:"preferences",name:a("common.preferences"),content:h.jsx(o1e,{})},C={key:"profile",name:a("common.profile"),content:h.jsx(Epe,{client:i})},E={key:"feedback",name:a("settings.feedback_tab_title"),content:h.jsx(Ipe,{roomId:o})},x={key:"developer",name:a("settings.developer_tab_title"),content:h.jsx(Lme,{env:kme,client:i,livekitRooms:s})},I=[w,S];return Ae===null&&I.push(C),I.push(b),m&&I.push(E),v&&I.push(x),h.jsx(lc,{title:a("common.settings"),className:b9.settingsModal,open:e,onDismiss:t,tabbed:!0,children:h.jsx(npe,{label:a("common.settings"),tab:n,onTabChange:r,tabs:I})})},Tme=(e,t)=>f.createElement("svg",{width:22,height:22,viewBox:"0 0 22 22",fill:"none",xmlns:"http://www.w3.org/2000/svg",ref:t,...e},f.createElement("mask",{id:"path-1-inside-1_898_2641",fill:"white"},f.createElement("path",{fillRule:"evenodd",clipRule:"evenodd",d:"M17.1502 20.1214C15.3946 21.3074 13.2782 22 11 22C8.52367 22 6.23845 21.1817 4.4 19.8008C1.72821 17.794 0 14.5988 0 11C0 4.92487 4.92487 0 11 0C17.0751 0 22 4.92487 22 11C22 14.797 20.0762 18.1446 17.1502 20.1214ZM11 11.55C12.8225 11.55 14.3 9.94942 14.3 7.975C14.3 6.00058 12.8225 4.4 11 4.4C9.17746 4.4 7.7 6.00058 7.7 7.975C7.7 9.94942 9.17746 11.55 11 11.55ZM11 19.8C13.3782 19.8 15.536 18.8566 17.1197 17.3237C16.1403 14.9056 13.7693 13.2 11 13.2C8.23066 13.2 5.85969 14.9056 4.88028 17.3237C6.46399 18.8566 8.62183 19.8 11 19.8Z"})),f.createElement("path",{fillRule:"evenodd",clipRule:"evenodd",d:"M17.1502 20.1214C15.3946 21.3074 13.2782 22 11 22C8.52367 22 6.23845 21.1817 4.4 19.8008C1.72821 17.794 0 14.5988 0 11C0 4.92487 4.92487 0 11 0C17.0751 0 22 4.92487 22 11C22 14.797 20.0762 18.1446 17.1502 20.1214ZM11 11.55C12.8225 11.55 14.3 9.94942 14.3 7.975C14.3 6.00058 12.8225 4.4 11 4.4C9.17746 4.4 7.7 6.00058 7.7 7.975C7.7 9.94942 9.17746 11.55 11 11.55ZM11 19.8C13.3782 19.8 15.536 18.8566 17.1197 17.3237C16.1403 14.9056 13.7693 13.2 11 13.2C8.23066 13.2 5.85969 14.9056 4.88028 17.3237C6.46399 18.8566 8.62183 19.8 11 19.8Z",fill:"white"}),f.createElement("path",{d:"M17.1502 20.1214L17.9339 21.2814L17.1502 20.1214ZM4.4 19.8008L3.55919 20.9202H3.55919L4.4 19.8008ZM17.1197 17.3237L18.0934 18.3296L18.7717 17.6731L18.4173 16.7981L17.1197 17.3237ZM4.88028 17.3237L3.58268 16.7981L3.22829 17.6731L3.90659 18.3296L4.88028 17.3237ZM11 23.4C13.5662 23.4 15.9541 22.619 17.9339 21.2814L16.3665 18.9613C14.835 19.9959 12.9902 20.6 11 20.6V23.4ZM3.55919 20.9202C5.63176 22.477 8.21011 23.4 11 23.4V20.6C8.83723 20.6 6.84514 19.8865 5.24081 18.6814L3.55919 20.9202ZM-1.4 11C-1.4 15.0577 0.55052 18.6603 3.55919 20.9202L5.24081 18.6814C2.90591 16.9276 1.4 14.1399 1.4 11H-1.4ZM11 -1.4C4.15167 -1.4 -1.4 4.15167 -1.4 11H1.4C1.4 5.69807 5.69807 1.4 11 1.4V-1.4ZM23.4 11C23.4 4.15167 17.8483 -1.4 11 -1.4V1.4C16.3019 1.4 20.6 5.69807 20.6 11H23.4ZM17.9339 21.2814C21.2288 19.0554 23.4 15.2815 23.4 11H20.6C20.6 14.3124 18.9236 17.2337 16.3665 18.9613L17.9339 21.2814ZM12.9 7.975C12.9 9.28384 11.9459 10.15 11 10.15V12.95C13.6991 12.95 15.7 10.615 15.7 7.975H12.9ZM11 5.8C11.9459 5.8 12.9 6.66616 12.9 7.975H15.7C15.7 5.335 13.6991 3 11 3V5.8ZM9.1 7.975C9.1 6.66616 10.0541 5.8 11 5.8V3C8.30086 3 6.3 5.335 6.3 7.975H9.1ZM11 10.15C10.0541 10.15 9.1 9.28384 9.1 7.975H6.3C6.3 10.615 8.30086 12.95 11 12.95V10.15ZM16.146 16.3178C14.8129 17.6081 13.0004 18.4 11 18.4V21.2C13.756 21.2 16.2591 20.1051 18.0934 18.3296L16.146 16.3178ZM11 14.6C13.1797 14.6 15.0494 15.9415 15.8221 17.8493L18.4173 16.7981C17.2312 13.8697 14.359 11.8 11 11.8V14.6ZM6.17788 17.8493C6.95058 15.9415 8.8203 14.6 11 14.6V11.8C7.64102 11.8 4.7688 13.8697 3.58268 16.7981L6.17788 17.8493ZM11 18.4C8.99963 18.4 7.18709 17.6081 5.85397 16.3178L3.90659 18.3296C5.74088 20.1051 8.24402 21.2 11 21.2V18.4Z",fill:"white",mask:"url(#path-1-inside-1_898_2641)"})),BS=f.forwardRef(Tme),Ame=(e,t)=>f.createElement("svg",{width:24,height:24,viewBox:"0 0 24 24",fill:"none",xmlns:"http://www.w3.org/2000/svg",ref:t,...e},f.createElement("path",{fillRule:"evenodd",clipRule:"evenodd",d:"M20.0988 9.01625C20.3188 9.59375 20.8825 9.97875 21.5013 9.97875C22.3263 9.97875 23 10.6525 23 11.4775V12.5225C23 13.3475 22.3263 14.0213 21.5013 14.0213C20.8825 14.0213 20.3188 14.4062 20.0988 14.9838C20.0806 15.0292 20.0624 15.0753 20.0441 15.1218C19.9792 15.2863 19.9125 15.4555 19.8375 15.6163C19.5763 16.18 19.7 16.84 20.14 17.28C20.7313 17.8575 20.7313 18.8062 20.14 19.3975L19.3975 20.14C18.82 20.7313 17.8713 20.7313 17.28 20.14C16.8538 19.7 16.18 19.5763 15.6163 19.8375C15.41 19.9338 15.2037 20.0163 14.9838 20.0988C14.4062 20.3188 14.0213 20.8825 14.0213 21.5013C14.0213 22.3263 13.3475 23 12.5225 23H11.4775C10.6525 23 9.97875 22.3263 9.97875 21.5013C9.97875 20.8825 9.59375 20.3188 9.01625 20.0988C8.97079 20.0806 8.92466 20.0624 8.87815 20.044C8.71368 19.9792 8.54454 19.9125 8.38375 19.8375C7.82 19.5763 7.16 19.7 6.72 20.14C6.1425 20.7313 5.19375 20.7313 4.6025 20.14L3.86 19.3975C3.26875 18.82 3.26875 17.8713 3.86 17.28C4.3 16.8538 4.42375 16.18 4.1625 15.6163C4.06625 15.41 3.98375 15.2037 3.90125 14.9838C3.68125 14.4062 3.1175 14.0213 2.49875 14.0213C1.67375 14.0213 1 13.3475 1 12.5225V11.4775C1 10.6525 1.67375 9.97875 2.49875 9.97875C3.1175 9.97875 3.68125 9.59375 3.90125 9.01625C3.94464 8.87742 3.99897 8.74406 4.0539 8.60926C4.086 8.53046 4.11831 8.45117 4.14875 8.37C4.41 7.80625 4.28625 7.14625 3.84625 6.70625C3.255 6.12875 3.255 5.18 3.84625 4.58875L4.6025 3.86C5.18 3.26875 6.12875 3.26875 6.72 3.86C7.14625 4.3 7.82 4.42375 8.38375 4.1625C8.59 4.06625 8.79625 3.97 9.01625 3.90125C9.59375 3.68125 9.97875 3.1175 9.97875 2.49875C9.97875 1.67375 10.6525 1 11.4775 1H12.5225C13.3475 1 14.0213 1.67375 14.0213 2.49875C14.0213 3.13125 14.4062 3.68125 14.9838 3.90125C15.0292 3.91943 15.0753 3.93762 15.1218 3.95595C15.2863 4.02079 15.4555 4.08746 15.6163 4.1625C16.18 4.42375 16.84 4.3 17.28 3.86C17.8575 3.26875 18.8062 3.26875 19.3975 3.86L20.14 4.6025C20.7313 5.18 20.7313 6.12875 20.14 6.72C19.7 7.14625 19.5763 7.82 19.8375 8.38375C19.9338 8.59 20.0163 8.79625 20.0988 9.01625ZM12 17.5C8.96125 17.5 6.5 15.0387 6.5 12C6.5 8.96125 8.96125 6.5 12 6.5C15.0387 6.5 17.5 8.96125 17.5 12C17.5 15.0387 15.0387 17.5 12 17.5Z",fill:"#ffffff"})),Pme=f.forwardRef(Ame),Mme=(e,t)=>f.createElement("svg",{width:24,height:24,viewBox:"0 0 24 24",fill:"none",xmlns:"http://www.w3.org/2000/svg",ref:t,...e},f.createElement("path",{fillRule:"evenodd",clipRule:"evenodd",d:"M7.49966 2.38889C7.49966 1.89797 7.89763 1.5 8.38855 1.5H20.1108C20.6017 1.5 20.9997 1.89797 20.9997 2.38889V21.6111C20.9997 22.102 20.6017 22.5 20.1108 22.5H8.38855C7.89763 22.5 7.49966 22.102 7.49966 21.6111V12.6667H7.49089H7.4821H7.47331H7.46452H7.45573H7.44694H7.43815H7.42936H7.42057H7.41178H7.403H7.39421H7.38542H7.37663H7.36784H7.35905H7.35026H7.34147H7.33268H7.32389H7.3151H7.30632H7.29753H7.28874H7.27995H7.27116H7.26237H7.25358H7.24479H7.236H7.22721H7.21842H7.20964H7.20085H7.19206H7.18327H7.17448H7.16569H7.1569H7.14811H7.13932H7.13053H7.12175H7.11296H7.10417H7.09538H7.08659H7.0778H7.06901H7.06022H7.05143H7.04264H7.03385H7.02507H7.01628H7.00749H6.9987H6.98991H6.98112H6.97233H6.96354H6.95475H6.94596H6.93717H6.92839H6.9196H6.91081H6.90202H6.89323H6.88444H6.87565H6.86686H6.85807H6.84928H6.8405H6.83171H6.82292H6.81413H6.80534H6.79655H6.78776H6.77897H6.77018H6.76139H6.7526H6.74382H6.73503H6.72624H6.71745H6.70866H6.69987H6.69108H6.68229H6.6735H6.66471H6.65592H6.64714H6.63835H6.62956H6.62077H6.61198H6.60319H6.5944H6.58561H6.57682H6.56803H6.55925H6.55046H6.54167H6.53288H6.52409H6.5153H6.50651H6.49772H6.48893H6.48014H6.47135H6.46257H6.45378H6.44499H6.4362H6.42741H6.41862H6.40983H6.40104H6.39225H6.38346H6.37467H6.36589H6.3571H6.34831H6.33952H6.33073H6.32194H6.31315H6.30436H6.29557H6.28678H6.27799H6.26921H6.26042H6.25163H6.24284H6.23405H6.22526H6.21647H6.20768H6.19889H6.1901H6.18132H6.17253H6.16374H6.15495H6.14616H6.13737H6.12858H6.11979H6.111H6.10221H6.09342H6.08464H6.07585H6.06706H6.05827H6.04948H6.04069H6.0319H6.02311H6.01432H6.00553H5.99674H5.98796H5.97917H5.97038H5.96159H5.9528H5.94401H5.93522H5.92643H5.91764H5.90885H5.90007H5.89128H5.88249H5.8737H5.86491H5.85612H5.84733H5.83854H5.82975H5.82096H5.81217H5.80339H5.7946H5.78581H5.77702H5.76823H5.75944H5.75065H5.74186H5.73307H5.72428H5.71549H5.70671H5.69792H5.68913H5.68034H5.67155H5.66276H5.65397H5.64518H5.63639H5.6276H5.61882H5.61003H5.60124H5.59245H5.58366H5.57487H5.56608H5.55729H5.5485H5.53971H5.53092H5.52214H5.51335H5.50456H5.49577H5.48698H5.47819H5.4694H5.46061H5.45182H5.44303H5.43424H5.42546H5.41667H5.40788H5.39909H5.3903H5.38151H5.37272H5.36393H5.35514H5.34635H5.33757H5.32878H5.31999H5.3112H5.30241H5.29362H5.28483H5.27604H5.26725H5.25846H5.24967H5.24089H5.2321H5.22331H5.21452H5.20573H5.19694H5.18815H5.17936H5.17057H5.16178H5.15299H5.14421H5.13542H5.12663H5.11784H5.10905H5.10026H5.09147H5.08268H5.07389H5.0651H5.05632H5.04753H5.03874H5.02995H5.02116H5.01237H5.00358H4.99479H4.986H4.97721H4.96842H4.95964H4.95085H4.94206H4.93327H4.92448H4.91569H4.9069H4.89811H4.88932H4.88053H4.87174H4.86296H4.85417H4.84538H4.83659H4.8278H4.81901H4.81022H4.80143H4.79264H4.78385H4.77507H4.76628H4.75749H4.7487H4.73991H4.73112H4.72233H4.71354H4.70475H4.69596H4.68717H4.67839H4.6696H4.66081H4.65202H4.64323H4.63444H4.62565H4.61686H4.60807H4.59928H4.59049H4.58171H4.57292H4.56413H4.55534H4.54655H4.53776H4.52897H4.52018H4.51139H4.5026H4.49382H4.48503H4.47624H4.46745H4.45866H4.44987H4.44108H4.43229H4.4235H4.41471H4.40592H4.39714H4.38835H4.37956H4.37077H4.36198H4.35319H4.3444H4.33561H4.32682H4.31803H4.30924H4.30046H4.29167H4.28288H4.27409H4.2653H4.25651H4.24772H4.23893H4.23014H4.22135H4.21257H4.20378H4.19499H4.1862H4.17741H4.16862H4.15983H4.15104H4.14225H4.13346H4.12467H4.11589H4.1071H4.09831H4.08952H4.08073H4.07194H4.06315H4.05436H4.04557H4.03678H4.02799H4.01921H4.01042H4.00163H3.99284H3.98405H3.97526H3.96647H3.95768H3.94889H3.9401H3.93132H3.92253H3.91374H3.90495H3.89616H3.88737H3.87858H3.86979H3.861H3.85221H3.84342H3.83464H3.82585H3.81706H3.80827H3.79948H3.79069H3.7819H3.77311H3.76432H3.75553H3.74674H3.73796H3.72917H3.72038H3.71159H3.7028H3.69401H3.68522H3.67643H3.66764H3.65885H3.65007H3.64128H3.63249H3.6237H3.61491H3.60612H3.59733H3.58854H3.57975H3.57096H3.56217H3.55339H3.5446H3.53581H3.52702H3.51823H3.50944H3.50065H3.49186H3.48307H3.47428H3.46549H3.45671H3.44792H3.43913H3.43034H3.42155H3.41276H3.40397H3.39518H3.38639H3.3776H3.36882H3.36003H3.35124H3.34245H3.33366H3.32487H3.31608H3.30729H3.2985H3.28971H3.28092H3.27214H3.26335H3.25456H3.24577H3.23698H3.22819H3.2194H3.21061H3.20182H3.19303H3.18424H3.17546H3.16667H3.15788H3.14909H3.1403H3.13151H3.12272H3.11393H3.10514H3.09635H3.08757H3.07878H3.06999H3.0612H3.05241H3.04362H3.03483H3.02604H3.01725H3.00846H2.99967C2.63148 12.6667 2.33301 12.3682 2.33301 12C2.33301 11.6318 2.63148 11.3333 2.99967 11.3333H3.00846H3.01725H3.02604H3.03483H3.04362H3.05241H3.0612H3.06999H3.07878H3.08757H3.09635H3.10514H3.11393H3.12272H3.13151H3.1403H3.14909H3.15788H3.16667H3.17546H3.18424H3.19303H3.20182H3.21061H3.2194H3.22819H3.23698H3.24577H3.25456H3.26335H3.27214H3.28092H3.28971H3.2985H3.30729H3.31608H3.32487H3.33366H3.34245H3.35124H3.36003H3.36882H3.3776H3.38639H3.39518H3.40397H3.41276H3.42155H3.43034H3.43913H3.44792H3.45671H3.46549H3.47428H3.48307H3.49186H3.50065H3.50944H3.51823H3.52702H3.53581H3.5446H3.55339H3.56217H3.57096H3.57975H3.58854H3.59733H3.60612H3.61491H3.6237H3.63249H3.64128H3.65007H3.65885H3.66764H3.67643H3.68522H3.69401H3.7028H3.71159H3.72038H3.72917H3.73796H3.74674H3.75553H3.76432H3.77311H3.7819H3.79069H3.79948H3.80827H3.81706H3.82585H3.83464H3.84342H3.85221H3.861H3.86979H3.87858H3.88737H3.89616H3.90495H3.91374H3.92253H3.93132H3.9401H3.94889H3.95768H3.96647H3.97526H3.98405H3.99284H4.00163H4.01042H4.01921H4.02799H4.03678H4.04557H4.05436H4.06315H4.07194H4.08073H4.08952H4.09831H4.1071H4.11589H4.12467H4.13346H4.14225H4.15104H4.15983H4.16862H4.17741H4.1862H4.19499H4.20378H4.21257H4.22135H4.23014H4.23893H4.24772H4.25651H4.2653H4.27409H4.28288H4.29167H4.30046H4.30924H4.31803H4.32682H4.33561H4.3444H4.35319H4.36198H4.37077H4.37956H4.38835H4.39714H4.40592H4.41471H4.4235H4.43229H4.44108H4.44987H4.45866H4.46745H4.47624H4.48503H4.49382H4.5026H4.51139H4.52018H4.52897H4.53776H4.54655H4.55534H4.56413H4.57292H4.58171H4.59049H4.59928H4.60807H4.61686H4.62565H4.63444H4.64323H4.65202H4.66081H4.6696H4.67839H4.68717H4.69596H4.70475H4.71354H4.72233H4.73112H4.73991H4.7487H4.75749H4.76628H4.77507H4.78385H4.79264H4.80143H4.81022H4.81901H4.8278H4.83659H4.84538H4.85417H4.86296H4.87174H4.88053H4.88932H4.89811H4.9069H4.91569H4.92448H4.93327H4.94206H4.95085H4.95964H4.96842H4.97721H4.986H4.99479H5.00358H5.01237H5.02116H5.02995H5.03874H5.04753H5.05631H5.0651H5.07389H5.08268H5.09147H5.10026H5.10905H5.11784H5.12663H5.13542H5.14421H5.15299H5.16178H5.17057H5.17936H5.18815H5.19694H5.20573H5.21452H5.22331H5.2321H5.24089H5.24967H5.25846H5.26725H5.27604H5.28483H5.29362H5.30241H5.3112H5.31999H5.32878H5.33757H5.34635H5.35514H5.36393H5.37272H5.38151H5.3903H5.39909H5.40788H5.41667H5.42546H5.43424H5.44303H5.45182H5.46061H5.4694H5.47819H5.48698H5.49577H5.50456H5.51335H5.52214H5.53092H5.53971H5.5485H5.55729H5.56608H5.57487H5.58366H5.59245H5.60124H5.61003H5.61882H5.6276H5.63639H5.64518H5.65397H5.66276H5.67155H5.68034H5.68913H5.69792H5.70671H5.71549H5.72428H5.73307H5.74186H5.75065H5.75944H5.76823H5.77702H5.78581H5.7946H5.80339H5.81217H5.82096H5.82975H5.83854H5.84733H5.85612H5.86491H5.8737H5.88249H5.89128H5.90007H5.90885H5.91764H5.92643H5.93522H5.94401H5.9528H5.96159H5.97038H5.97917H5.98796H5.99674H6.00553H6.01432H6.02311H6.0319H6.04069H6.04948H6.05827H6.06706H6.07585H6.08464H6.09342H6.10221H6.111H6.11979H6.12858H6.13737H6.14616H6.15495H6.16374H6.17253H6.18132H6.1901H6.19889H6.20768H6.21647H6.22526H6.23405H6.24284H6.25163H6.26042H6.26921H6.27799H6.28678H6.29557H6.30436H6.31315H6.32194H6.33073H6.33952H6.34831H6.3571H6.36589H6.37467H6.38346H6.39225H6.40104H6.40983H6.41862H6.42741H6.4362H6.44499H6.45378H6.46257H6.47135H6.48014H6.48893H6.49772H6.50651H6.5153H6.52409H6.53288H6.54167H6.55046H6.55925H6.56803H6.57682H6.58561H6.5944H6.60319H6.61198H6.62077H6.62956H6.63835H6.64714H6.65592H6.66471H6.6735H6.68229H6.69108H6.69987H6.70866H6.71745H6.72624H6.73503H6.74382H6.7526H6.76139H6.77018H6.77897H6.78776H6.79655H6.80534H6.81413H6.82292H6.83171H6.8405H6.84928H6.85807H6.86686H6.87565H6.88444H6.89323H6.90202H6.91081H6.9196H6.92839H6.93717H6.94596H6.95475H6.96354H6.97233H6.98112H6.98991H6.9987H7.00749H7.01628H7.02507H7.03385H7.04264H7.05143H7.06022H7.06901H7.0778H7.08659H7.09538H7.10417H7.11296H7.12175H7.13053H7.13932H7.14811H7.1569H7.16569H7.17448H7.18327H7.19206H7.20085H7.20964H7.21842H7.22721H7.236H7.24479H7.25358H7.26237H7.27116H7.27995H7.28874H7.29753H7.30632H7.3151H7.32389H7.33268H7.34147H7.35026H7.35905H7.36784H7.37663H7.38542H7.39421H7.403H7.41178H7.42057H7.42936H7.43815H7.44694H7.45573H7.46452H7.47331H7.4821H7.49089H7.49966V2.38889ZM13.3687 6.24853C13.1172 5.9796 12.7095 5.9796 12.458 6.24853C12.2065 6.51747 12.2065 6.9535 12.458 7.22243L16.3022 11.3336L16.2894 11.3336L16.2726 11.3336L16.2558 11.3336L16.239 11.3335L16.2223 11.3335L16.2055 11.3335L16.1887 11.3335L16.1719 11.3335L16.1552 11.3334L16.1384 11.3334L16.1216 11.3334L16.1048 11.3334L16.088 11.3334L16.0713 11.3333L16.0545 11.3333L16.0377 11.3333L16.0209 11.3333L16.0041 11.3333L15.9874 11.3332L15.9706 11.3332L15.9538 11.3332L15.937 11.3332L15.9202 11.3332L15.9035 11.3331L15.8867 11.3331L15.8699 11.3331L15.8531 11.3331L15.8364 11.3331L15.8196 11.333L15.8028 11.333L15.786 11.333L15.7692 11.333L15.7525 11.333L15.7357 11.3329L15.7189 11.3329L15.7021 11.3329L15.6853 11.3329L15.6686 11.3329L15.6518 11.3328L15.635 11.3328L15.6182 11.3328L15.6014 11.3328L15.5847 11.3328L15.5679 11.3327L15.5511 11.3327L15.5343 11.3327L15.5175 11.3327L15.5008 11.3327L15.484 11.3326L15.4672 11.3326L15.4504 11.3326L15.4337 11.3326L15.4169 11.3326L15.4001 11.3325L15.3833 11.3325L15.3665 11.3325L15.3498 11.3325L15.333 11.3324L15.3162 11.3324L15.2994 11.3324L15.2826 11.3324L15.2659 11.3324L15.2491 11.3323L15.2323 11.3323L15.2155 11.3323L15.1987 11.3323L15.182 11.3323L15.1652 11.3322L15.1484 11.3322L15.1316 11.3322L15.1148 11.3322L15.0981 11.3322L15.0813 11.3321L15.0645 11.3321L15.0477 11.3321L15.031 11.3321L15.0142 11.3321L14.9974 11.332L14.9806 11.332L14.9638 11.332L14.9471 11.332L14.9303 11.332L14.9135 11.3319L14.8967 11.3319L14.8799 11.3319L14.8632 11.3319L14.8464 11.3319L14.8296 11.3318L14.8128 11.3318L14.796 11.3318L14.7793 11.3318L14.7625 11.3318L14.7457 11.3317L14.7289 11.3317L14.7122 11.3317L14.6954 11.3317L14.6786 11.3317L14.6618 11.3316L14.645 11.3316L14.6283 11.3316L14.6115 11.3316L14.5947 11.3316L14.5779 11.3315L14.5611 11.3315L14.5444 11.3315L14.5276 11.3315L14.5108 11.3315L14.494 11.3314L14.4772 11.3314L14.4605 11.3314L14.4437 11.3314L14.4269 11.3314L14.4101 11.3313L14.3933 11.3313L14.3766 11.3313L14.3598 11.3313L14.343 11.3313L14.3262 11.3312L14.3095 11.3312L14.2927 11.3312L14.2759 11.3312L14.2591 11.3312L14.2423 11.3311L14.2256 11.3311L14.2088 11.3311L14.192 11.3311L14.1752 11.3311L14.1584 11.331L14.1417 11.331L14.1249 11.331L14.1081 11.331L14.0913 11.331L14.0745 11.3309L14.0578 11.3309L14.041 11.3309L14.0242 11.3309L14.0074 11.3309L13.9906 11.3308L13.9739 11.3308L13.9571 11.3308L13.9403 11.3308L13.9235 11.3308L13.9068 11.3307L13.89 11.3307L13.8732 11.3307L13.8564 11.3307L13.8396 11.3307L13.8229 11.3306L13.8061 11.3306L13.7893 11.3306L13.7725 11.3306L13.7557 11.3306L13.739 11.3305L13.7222 11.3305L13.7054 11.3305L13.6886 11.3305L13.6718 11.3305L13.6551 11.3304L13.6383 11.3304L13.6215 11.3304L13.6047 11.3304L13.5879 11.3304L13.5712 11.3303L13.5544 11.3303L13.5376 11.3303L13.5208 11.3303L13.5041 11.3303L13.4873 11.3302L13.4705 11.3302L13.4537 11.3302L13.4369 11.3302L13.4202 11.3302L13.4034 11.3301L13.3866 11.3301L13.3698 11.3301L13.353 11.3301L13.3363 11.33L13.3195 11.33L13.3027 11.33L13.2859 11.33L13.2691 11.33L13.2524 11.3299L13.2356 11.3299L13.2188 11.3299L13.202 11.3299L13.1853 11.3299L13.1685 11.3298L13.1517 11.3298L13.1349 11.3298L13.1181 11.3298L13.1014 11.3298L13.0846 11.3297L13.0678 11.3297L13.051 11.3297L13.0342 11.3297L13.0175 11.3297L13.0007 11.3296L12.9839 11.3296L12.9671 11.3296L12.9503 11.3296L12.9336 11.3296L12.9168 11.3295L12.9 11.3295L12.8832 11.3295L12.8664 11.3295L12.8497 11.3295L12.8329 11.3294L12.8161 11.3294L12.7993 11.3294L12.7826 11.3294L12.7658 11.3294L12.749 11.3293L12.7322 11.3293L12.7154 11.3293L12.6987 11.3293L12.6819 11.3293L12.6651 11.3292L12.6483 11.3292L12.6315 11.3292L12.6148 11.3292L12.598 11.3292L12.5812 11.3291L12.5644 11.3291L12.5476 11.3291L12.5309 11.3291L12.5141 11.3291L12.4973 11.329L12.4805 11.329L12.4637 11.329L12.447 11.329L12.4302 11.329L12.4134 11.3289L12.3966 11.3289L12.3799 11.3289L12.3631 11.3289L12.3463 11.3289L12.3295 11.3288L12.3127 11.3288L12.296 11.3288L12.2792 11.3288L12.2624 11.3288L12.2456 11.3287L12.2288 11.3287L12.2121 11.3287L12.1953 11.3287L12.1785 11.3287L12.1617 11.3286L12.1449 11.3286L12.1282 11.3286L12.1114 11.3286L12.0946 11.3286L12.0778 11.3285L12.0611 11.3285L12.0443 11.3285L12.0275 11.3285L12.0107 11.3285L11.9939 11.3284L11.9772 11.3284L11.9604 11.3284L11.9436 11.3284L11.9268 11.3284L11.91 11.3283L11.8933 11.3283L11.8765 11.3283L11.8597 11.3283L11.8429 11.3283L11.8261 11.3282L11.8094 11.3282L11.7926 11.3282L11.7758 11.3282L11.759 11.3282L11.7422 11.3281L11.7255 11.3281L11.7087 11.3281L11.6919 11.3281L11.6751 11.3281L11.6583 11.328L11.6416 11.328L11.6248 11.328L11.608 11.328L11.5912 11.328L11.5745 11.3279L11.5577 11.3279L11.5409 11.3279L11.5241 11.3279L11.5073 11.3279L11.4906 11.3278L11.4738 11.3278L11.457 11.3278L11.4402 11.3278L11.4234 11.3278L11.4067 11.3277L11.3899 11.3277L11.3731 11.3277L11.3563 11.3277L11.3395 11.3277L11.3228 11.3276L11.306 11.3276L11.2892 11.3276L11.2724 11.3276L11.2557 11.3275L11.2389 11.3275L11.2221 11.3275L11.2053 11.3275L11.1885 11.3275L11.1718 11.3274L11.155 11.3274L11.1382 11.3274L11.1214 11.3274L11.1046 11.3274L11.0879 11.3273L11.0711 11.3273L11.0543 11.3273L11.0375 11.3273L11.0207 11.3273L11.004 11.3272L10.9872 11.3272L10.9704 11.3272L10.9536 11.3272L10.9368 11.3272L10.9201 11.3271L10.9033 11.3271L10.8865 11.3271L10.8697 11.3271L10.853 11.3271L10.8362 11.327L10.8194 11.327L10.8026 11.327L10.7858 11.327L10.7691 11.327L10.7523 11.3269L10.7355 11.3269L10.7187 11.3269L10.7019 11.3269L10.6852 11.3269L10.6684 11.3268L10.6516 11.3268L10.6348 11.3268L10.618 11.3268L10.6013 11.3268L10.5845 11.3267L10.5677 11.3267L10.5509 11.3267L10.5341 11.3267L10.5174 11.3267L10.5006 11.3266L10.4838 11.3266L10.467 11.3266L10.4503 11.3266L10.4335 11.3266L10.4167 11.3265L10.3999 11.3265L10.3831 11.3265L10.3664 11.3265L10.3496 11.3265L10.3328 11.3264L10.316 11.3264L10.2992 11.3264L10.2825 11.3264L10.2657 11.3264L10.2489 11.3263L10.2321 11.3263L10.2153 11.3263L10.1986 11.3263L10.1818 11.3263L10.165 11.3262L10.1482 11.3262L10.1315 11.3262L10.1147 11.3262L10.0979 11.3262L10.0811 11.3261L10.0643 11.3261L10.0476 11.3261L10.0308 11.3261L10.014 11.3261L9.99722 11.326L9.98044 11.326L9.96366 11.326L9.94688 11.326L9.9301 11.326L9.91332 11.3259L9.89654 11.3259L9.87977 11.3259L9.86299 11.3259L9.84621 11.3259L9.82943 11.3258L9.81265 11.3258L9.79587 11.3258L9.77909 11.3258L9.76231 11.3258L9.74553 11.3257L9.72875 11.3257L9.71197 11.3257L9.69519 11.3257L9.67841 11.3257L9.66163 11.3256L9.64486 11.3256L9.62808 11.3256L9.6113 11.3256L9.59452 11.3256L9.57774 11.3255L9.56096 11.3255L9.54418 11.3255L9.5274 11.3255L9.51062 11.3255L9.49384 11.3254L9.47706 11.3254L9.46029 11.3254L9.44351 11.3254L9.42673 11.3254L9.40995 11.3253L9.39317 11.3253L9.37639 11.3253L9.35961 11.3253L9.34283 11.3253L9.32605 11.3252L9.30927 11.3252L9.29249 11.3252L9.27572 11.3252L9.25894 11.3252L9.24216 11.3251L9.22538 11.3251L9.2086 11.3251L9.19182 11.3251L9.17504 11.325L9.15826 11.325L9.14148 11.325L9.1247 11.325L9.10792 11.325L9.09115 11.3249L9.07437 11.3249L9.05759 11.3249L9.04081 11.3249L9.02403 11.3249L9.00725 11.3248L8.99047 11.3248L8.97369 11.3248L8.95691 11.3248L8.94013 11.3248L8.92335 11.3247L8.90658 11.3247L8.8898 11.3247L8.87302 11.3247L8.85624 11.3247L8.83946 11.3246L8.82268 11.3246L8.8059 11.3246L8.78912 11.3246L8.77234 11.3246L8.75556 11.3245L8.73878 11.3245L8.722 11.3245L8.70523 11.3245L8.68845 11.3245L8.67167 11.3244L8.65489 11.3244L8.63811 11.3244L8.62133 11.3244L8.60455 11.3244L8.58777 11.3243L8.57099 11.3243L8.55421 11.3243L8.53743 11.3243L8.52066 11.3243L8.50388 11.3242L8.4871 11.3242L8.47032 11.3242L8.45354 11.3242L8.43676 11.3242L8.41998 11.3241L8.4032 11.3241L8.38642 11.3241L8.36964 11.3241L8.35286 11.3241L8.33608 11.324L8.31931 11.324L8.30253 11.324L8.28575 11.324L8.26897 11.324L8.25219 11.3239L8.23541 11.3239L8.21863 11.3239L8.20185 11.3239L8.18507 11.3239L8.16829 11.3238L8.15151 11.3238L8.13474 11.3238L8.11796 11.3238L8.10118 11.3238L8.0844 11.3237L8.06762 11.3237L8.05084 11.3237L8.03406 11.3237L8.01728 11.3237L8.0005 11.3236L7.99885 12.657L8.01563 12.657L8.03241 12.657L8.04919 12.657L8.06597 12.6571L8.08274 12.6571L8.09952 12.6571L8.1163 12.6571L8.13308 12.6571L8.14986 12.6572L8.16664 12.6572L8.18342 12.6572L8.2002 12.6572L8.21698 12.6572L8.23376 12.6573L8.25054 12.6573L8.26731 12.6573L8.28409 12.6573L8.30087 12.6573L8.31765 12.6574L8.33443 12.6574L8.35121 12.6574L8.36799 12.6574L8.38477 12.6574L8.40155 12.6575L8.41833 12.6575L8.43511 12.6575L8.45189 12.6575L8.46866 12.6575L8.48544 12.6576L8.50222 12.6576L8.519 12.6576L8.53578 12.6576L8.55256 12.6576L8.56934 12.6577L8.58612 12.6577L8.6029 12.6577L8.61968 12.6577L8.63646 12.6577L8.65323 12.6578L8.67001 12.6578L8.68679 12.6578L8.70357 12.6578L8.72035 12.6578L8.73713 12.6579L8.75391 12.6579L8.77069 12.6579L8.78747 12.6579L8.80425 12.6579L8.82103 12.658L8.83781 12.658L8.85458 12.658L8.87136 12.658L8.88814 12.658L8.90492 12.6581L8.9217 12.6581L8.93848 12.6581L8.95526 12.6581L8.97204 12.6581L8.98882 12.6582L9.0056 12.6582L9.02238 12.6582L9.03915 12.6582L9.05593 12.6582L9.07271 12.6583L9.08949 12.6583L9.10627 12.6583L9.12305 12.6583L9.13983 12.6583L9.15661 12.6584L9.17339 12.6584L9.19017 12.6584L9.20695 12.6584L9.22373 12.6584L9.2405 12.6585L9.25728 12.6585L9.27406 12.6585L9.29084 12.6585L9.30762 12.6585L9.3244 12.6586L9.34118 12.6586L9.35796 12.6586L9.37474 12.6586L9.39152 12.6586L9.4083 12.6587L9.42507 12.6587L9.44185 12.6587L9.45863 12.6587L9.47541 12.6587L9.49219 12.6588L9.50897 12.6588L9.52575 12.6588L9.54253 12.6588L9.55931 12.6588L9.57609 12.6589L9.59287 12.6589L9.60964 12.6589L9.62642 12.6589L9.6432 12.6589L9.65998 12.659L9.67676 12.659L9.69354 12.659L9.71032 12.659L9.7271 12.659L9.74388 12.6591L9.76066 12.6591L9.77744 12.6591L9.79421 12.6591L9.81099 12.6591L9.82777 12.6592L9.84455 12.6592L9.86133 12.6592L9.87811 12.6592L9.89489 12.6592L9.91167 12.6593L9.92845 12.6593L9.94523 12.6593L9.96201 12.6593L9.97879 12.6594L9.99556 12.6594L10.0123 12.6594L10.0291 12.6594L10.0459 12.6594L10.0627 12.6595L10.0795 12.6595L10.0962 12.6595L10.113 12.6595L10.1298 12.6595L10.1466 12.6596L10.1634 12.6596L10.1801 12.6596L10.1969 12.6596L10.2137 12.6596L10.2305 12.6597L10.2473 12.6597L10.264 12.6597L10.2808 12.6597L10.2976 12.6597L10.3144 12.6598L10.3311 12.6598L10.3479 12.6598L10.3647 12.6598L10.3815 12.6598L10.3983 12.6599L10.415 12.6599L10.4318 12.6599L10.4486 12.6599L10.4654 12.6599L10.4822 12.66L10.4989 12.66L10.5157 12.66L10.5325 12.66L10.5493 12.66L10.5661 12.6601L10.5828 12.6601L10.5996 12.6601L10.6164 12.6601L10.6332 12.6601L10.65 12.6602L10.6667 12.6602L10.6835 12.6602L10.7003 12.6602L10.7171 12.6602L10.7338 12.6603L10.7506 12.6603L10.7674 12.6603L10.7842 12.6603L10.801 12.6603L10.8177 12.6604L10.8345 12.6604L10.8513 12.6604L10.8681 12.6604L10.8849 12.6604L10.9016 12.6605L10.9184 12.6605L10.9352 12.6605L10.952 12.6605L10.9688 12.6605L10.9855 12.6606L11.0023 12.6606L11.0191 12.6606L11.0359 12.6606L11.0526 12.6606L11.0694 12.6607L11.0862 12.6607L11.103 12.6607L11.1198 12.6607L11.1365 12.6607L11.1533 12.6608L11.1701 12.6608L11.1869 12.6608L11.2037 12.6608L11.2204 12.6608L11.2372 12.6609L11.254 12.6609L11.2708 12.6609L11.2876 12.6609L11.3043 12.6609L11.3211 12.661L11.3379 12.661L11.3547 12.661L11.3715 12.661L11.3882 12.661L11.405 12.6611L11.4218 12.6611L11.4386 12.6611L11.4553 12.6611L11.4721 12.6611L11.4889 12.6612L11.5057 12.6612L11.5225 12.6612L11.5392 12.6612L11.556 12.6612L11.5728 12.6613L11.5896 12.6613L11.6064 12.6613L11.6231 12.6613L11.6399 12.6613L11.6567 12.6614L11.6735 12.6614L11.6903 12.6614L11.707 12.6614L11.7238 12.6614L11.7406 12.6615L11.7574 12.6615L11.7742 12.6615L11.7909 12.6615L11.8077 12.6615L11.8245 12.6616L11.8413 12.6616L11.858 12.6616L11.8748 12.6616L11.8916 12.6616L11.9084 12.6617L11.9252 12.6617L11.9419 12.6617L11.9587 12.6617L11.9755 12.6617L11.9923 12.6618L12.0091 12.6618L12.0258 12.6618L12.0426 12.6618L12.0594 12.6618L12.0762 12.6619L12.093 12.6619L12.1097 12.6619L12.1265 12.6619L12.1433 12.662L12.1601 12.662L12.1768 12.662L12.1936 12.662L12.2104 12.662L12.2272 12.6621L12.244 12.6621L12.2607 12.6621L12.2775 12.6621L12.2943 12.6621L12.3111 12.6622L12.3279 12.6622L12.3446 12.6622L12.3614 12.6622L12.3782 12.6622L12.395 12.6623L12.4118 12.6623L12.4285 12.6623L12.4453 12.6623L12.4621 12.6623L12.4789 12.6624L12.4957 12.6624L12.5124 12.6624L12.5292 12.6624L12.546 12.6624L12.5628 12.6625L12.5795 12.6625L12.5963 12.6625L12.6131 12.6625L12.6299 12.6625L12.6467 12.6626L12.6634 12.6626L12.6802 12.6626L12.697 12.6626L12.7138 12.6626L12.7306 12.6627L12.7473 12.6627L12.7641 12.6627L12.7809 12.6627L12.7977 12.6627L12.8145 12.6628L12.8312 12.6628L12.848 12.6628L12.8648 12.6628L12.8816 12.6628L12.8984 12.6629L12.9151 12.6629L12.9319 12.6629L12.9487 12.6629L12.9655 12.6629L12.9822 12.663L12.999 12.663L13.0158 12.663L13.0326 12.663L13.0494 12.663L13.0661 12.6631L13.0829 12.6631L13.0997 12.6631L13.1165 12.6631L13.1333 12.6631L13.15 12.6632L13.1668 12.6632L13.1836 12.6632L13.2004 12.6632L13.2172 12.6632L13.2339 12.6633L13.2507 12.6633L13.2675 12.6633L13.2843 12.6633L13.3011 12.6633L13.3178 12.6634L13.3346 12.6634L13.3514 12.6634L13.3682 12.6634L13.3849 12.6634L13.4017 12.6635L13.4185 12.6635L13.4353 12.6635L13.4521 12.6635L13.4688 12.6635L13.4856 12.6636L13.5024 12.6636L13.5192 12.6636L13.536 12.6636L13.5527 12.6636L13.5695 12.6637L13.5863 12.6637L13.6031 12.6637L13.6199 12.6637L13.6366 12.6637L13.6534 12.6638L13.6702 12.6638L13.687 12.6638L13.7038 12.6638L13.7205 12.6638L13.7373 12.6639L13.7541 12.6639L13.7709 12.6639L13.7876 12.6639L13.8044 12.6639L13.8212 12.664L13.838 12.664L13.8548 12.664L13.8715 12.664L13.8883 12.664L13.9051 12.6641L13.9219 12.6641L13.9387 12.6641L13.9554 12.6641L13.9722 12.6641L13.989 12.6642L14.0058 12.6642L14.0226 12.6642L14.0393 12.6642L14.0561 12.6642L14.0729 12.6643L14.0897 12.6643L14.1064 12.6643L14.1232 12.6643L14.14 12.6644L14.1568 12.6644L14.1736 12.6644L14.1903 12.6644L14.2071 12.6644L14.2239 12.6645L14.2407 12.6645L14.2575 12.6645L14.2742 12.6645L14.291 12.6645L14.3078 12.6646L14.3246 12.6646L14.3414 12.6646L14.3581 12.6646L14.3749 12.6646L14.3917 12.6647L14.4085 12.6647L14.4253 12.6647L14.442 12.6647L14.4588 12.6647L14.4756 12.6648L14.4924 12.6648L14.5091 12.6648L14.5259 12.6648L14.5427 12.6648L14.5595 12.6649L14.5763 12.6649L14.593 12.6649L14.6098 12.6649L14.6266 12.6649L14.6434 12.665L14.6602 12.665L14.6769 12.665L14.6937 12.665L14.7105 12.665L14.7273 12.6651L14.7441 12.6651L14.7608 12.6651L14.7776 12.6651L14.7944 12.6651L14.8112 12.6652L14.828 12.6652L14.8447 12.6652L14.8615 12.6652L14.8783 12.6652L14.8951 12.6653L14.9118 12.6653L14.9286 12.6653L14.9454 12.6653L14.9622 12.6653L14.979 12.6654L14.9957 12.6654L15.0125 12.6654L15.0293 12.6654L15.0461 12.6654L15.0629 12.6655L15.0796 12.6655L15.0964 12.6655L15.1132 12.6655L15.13 12.6655L15.1468 12.6656L15.1635 12.6656L15.1803 12.6656L15.1971 12.6656L15.2139 12.6656L15.2306 12.6657L15.2474 12.6657L15.2642 12.6657L15.281 12.6657L15.2978 12.6657L15.3145 12.6658L15.3313 12.6658L15.3481 12.6658L15.3649 12.6658L15.3817 12.6658L15.3984 12.6659L15.4152 12.6659L15.432 12.6659L15.4488 12.6659L15.4656 12.6659L15.4823 12.666L15.4991 12.666L15.5159 12.666L15.5327 12.666L15.5495 12.666L15.5662 12.6661L15.583 12.6661L15.5998 12.6661L15.6166 12.6661L15.6333 12.6661L15.6501 12.6662L15.6669 12.6662L15.6837 12.6662L15.7005 12.6662L15.7172 12.6662L15.734 12.6663L15.7508 12.6663L15.7676 12.6663L15.7844 12.6663L15.8011 12.6663L15.8179 12.6664L15.8347 12.6664L15.8515 12.6664L15.8683 12.6664L15.885 12.6664L15.9018 12.6665L15.9186 12.6665L15.9354 12.6665L15.9522 12.6665L15.9689 12.6665L15.9857 12.6666L16.0025 12.6666L16.0193 12.6666L16.036 12.6666L16.0528 12.6666L16.0696 12.6667L16.0864 12.6667L16.1032 12.6667L16.1199 12.6667L16.1367 12.6667L16.1535 12.6668L16.1703 12.6668L16.1871 12.6668L16.2038 12.6668L16.2206 12.6669L16.2374 12.6669L16.2542 12.6669L16.271 12.6669L16.2836 12.6669L12.458 16.7581C12.2065 17.0271 12.2065 17.4631 12.458 17.732C12.7095 18.001 13.1172 18.001 13.3687 17.732L18.2822 12.4772C18.5337 12.2083 18.5337 11.7723 18.2822 11.5033L13.3687 6.24853Z",fill:"white"})),Nme=f.forwardRef(Mme),$me=(e,t)=>f.createElement("svg",{width:24,height:24,viewBox:"0 0 24 24",fill:"none",xmlns:"http://www.w3.org/2000/svg",ref:t,...e},f.createElement("path",{fillRule:"evenodd",clipRule:"evenodd",d:"M18.2139 2.44646L12 3.99992H5.4375C4.64359 3.99992 4 4.64352 4 5.43742V18.5624C4 19.3563 4.64359 19.9999 5.4375 19.9999H12L18.2139 21.5534C19.1211 21.7802 20 21.094 20 20.1588V3.84104C20 2.90584 19.1211 2.21964 18.2139 2.44646ZM12 17.9999V5.99992H6V17.9999H12Z",fill:"white"})),Ome=f.forwardRef($me),jme="_userButton_t5z8t_15",Dme={userButton:jme},Fme=({preventNavigation:e,isAuthenticated:t,isPasswordlessUser:n,userId:r,displayName:i,avatarUrl:o,onAction:s})=>{const{t:a}=he(),c=Nn(),l=f.useMemo(()=>{const p=[];return t&&(p.push({key:"user",icon:BS,label:i,dataTestid:"usermenu_user"}),p.push({key:"settings",icon:Pme,label:a("common.settings")}),n&&!e&&p.push({key:"login",label:a("action.sign_in"),icon:Nme,dataTestid:"usermenu_login"}),!n&&!e&&p.push({key:"logout",label:a("action.sign_out"),icon:Ome,dataTestid:"usermenu_logout"})),p},[t,n,i,e,a]),[u,d]=f.useState(!1);return t?h.jsx(C_,{title:a("a11y.user_menu"),showTitle:!1,align:"end",open:u,onOpenChange:d,trigger:h.jsx("button",{"aria-label":a("common.profile"),className:Dme.userButton,"data-testid":"usermenu_open",children:t&&(!n||o)?h.jsx(sc,{id:r,name:i,size:oc.SM,src:o}):h.jsx(BS,{})}),children:l.map(({key:p,icon:g,label:v,dataTestid:m})=>h.jsx(Ha,{Icon:g,label:v,"data-testid":m,onSelect:()=>s(p)},p))}):h.jsx(Q_,{to:{pathname:"/login"},state:{from:c},children:a("log_in")})},Ow=({preventNavigation:e=!1})=>{const t=Nn(),n=uo(),{client:r,logout:i,authenticated:o,passwordlessUser:s}=bb(),{displayName:a,avatarUrl:c}=Kf(r),[l,u]=f.useState(!1),d=f.useCallback(()=>u(!1),[u]),[p,g]=f.useState(Nw),v=f.useCallback(_=>{switch(_){case"user":g("profile"),u(!0);break;case"settings":g("audio"),u(!0);break;case"logout":i?.();break;case"login":n("/login",{state:{from:t}})?.catch(y=>U.error("Failed to navigate to login",y));break}},[n,t,i,u]),m=r?.getUserIdLocalpart()??"";return h.jsxs(h.Fragment,{children:[h.jsx(Fme,{preventNavigation:e,isAuthenticated:o,isPasswordlessUser:s,avatarUrl:c,onAction:v,userId:r?.getUserId()??"",displayName:a||(m?m.replace("@",""):"")}),r&&h.jsx($w,{client:r,open:l,onDismiss:d,tab:p,onTabChange:g})]})};function Hme(e){return new Worker(""+new URL("IndexedDBWorker-Dgn5IQFp.js",import.meta.url).href,{type:"module",name:e?.name})}const IO=new ID;function Ume(e){const t=Yd(IO,e,f.useCallback(()=>localStorage.getItem(e),[e])),n=f.useCallback(r=>RO(e,r),[e]);return[t,n]}const RO=(e,t)=>{localStorage.setItem(e,t),IO.emit(e)};function LO(e,t){localStorage.getItem(lf(e))!==t&&RO(lf(e),t)}const lf=e=>`room-shared-key-${e}`,Bme=(e,t)=>{const[n,r]=Ume(lf(e));return f.useEffect(()=>{t&&r(t)},[t,r]),[t??n,r]};function kO(e){const{roomId:t,password:n}=kt();return e!==t&&U.warn("requested key for a roomId which is not the current call room id (from the URL)",e,t),n??localStorage.getItem(lf(e))}function Fm(e){const{client:t}=uc(),[n]=Bme(lf(e),kO(e)??void 0),r=t?.getRoom(e);return f.useMemo(()=>r?n?{kind:mt.SHARED_KEY,secret:n}:r.hasEncryptionStateEvent()?{kind:mt.PER_PARTICIPANT}:{kind:mt.NONE}:{kind:mt.NONE},[r,n])}const VS=!1,Vme="element-call-sync";async function qme(e){let t=!!await e.store.getSavedSyncToken();return new Promise((n,r)=>{const i=(o,s,a)=>{o==="PREPARED"?t?t=!1:(e.removeListener(ei.Sync,i),n()):o==="ERROR"&&(e.removeListener(ei.Sync,i),r(a?.error))};e.on(ei.Sync,i)})}async function TO(e,t){let n;try{n=window.indexedDB}catch(a){U.warn("Could not get indexDB from window.",a)}const r={fallbackICEServerAllowed:VS,isVoipWithNoMediaAllowed:it.get().features?.feature_group_calls_without_video_and_audio};n&&localStorage?r.store=new RD({indexedDB:window.indexedDB,localStorage,dbName:Vme,workerFactory:()=>new Hme}):localStorage&&(r.store=new s6({localStorage}));const{e2eEnabled:i}=kt();i||U.info("Disabling E2E: group call signalling will NOT be encrypted.");const o=W3({...r,...e,useAuthorizationHeader:!0,localTimeoutMs:5e3,useE2eForGroupCall:i,fallbackICEServerAllowed:VS});t||await o.clearStores();try{await o.store.startup()}catch(a){U.error("Error starting matrix client indexDB store. Falling back to memory store.",a),o.store=new s6({localStorage}),await o.store.startup()}try{await o.initRustCrypto()}catch(a){U.warn(a,"Make sure to clear client stores before initializing the rust crypto.")}const s=qme(o);return await o.startClient({clientWellKnownPollPeriod:600}),await s,o}function eh(e){return e.trim().replace(/\s/g,"-").replace(/[^\w-]/g,"").toLowerCase()}function Gme(e,t){return`#${eh(e)}:${t.getDomain()}`}function AO(e){const t=e.split(":",2);if(t.length===2&&t[0][0]==="#"){if(t[1]===it.defaultServerName())return t[0];throw new Error("Unsupported remote room alias")}return e}async function PO(e,t,n){U.log("Creating room for group call");const r=e.createRoom({visibility:kD.Private,preset:LD.PublicChat,name:t,room_alias_name:n?void 0:eh(t),power_level_content_override:{invite:100,kick:100,ban:100,redact:50,state_default:0,events_default:0,users_default:0,events:{"m.room.power_levels":100,"m.room.history_visibility":100,"m.room.tombstone":100,"m.room.encryption":100,"m.room.name":50,"m.room.message":0,"m.room.encrypted":50,"m.sticker":50,"org.matrix.msc3401.call.member":0},users:{[e.getUserId()]:100}}}),i=await new Promise((s,a)=>{r.catch(u=>{a(u),l()});const c=u=>{r.then(d=>{u.roomId===d.room_id&&(s(u.roomId),l())},d=>{U.error("Failed to wait for the room to arrive",d)})},l=()=>{e.off(ei.Room,c)};e.on(ei.Room,c)});let o;return n==mt.SHARED_KEY&&(o=TD(16),LO(i,o)),{roomId:i,alias:n?void 0:Gme(t,e),password:o}}function MO(e,t,n,r){return`${window.location.protocol}//${window.location.host}${Hm(e,t,n)}`}function Hm(e,t,n,r){return`/room/#${n?"/"+eh(n):""}?${dle(e,t).toString()}`}async function NO(e){let t=0;for(;;)try{return await e()}catch(n){t++;const r=AD(n,t,!0);if(r<0)throw n;await IE(r)}}const jw=e=>{const[t,n]=f.useState(void 0),[r,i]=f.useState(void 0),o=f.useRef(void 0);o.current||(o.current=W3({baseUrl:it.defaultHomeserverUrl()})),f.useEffect(()=>{Ae||o.current.registerRequest({}).catch(a=>{n(a.data?.params["m.login.terms"]?.policies?.privacy_policy?.en?.url),i(a.data?.params["m.login.recaptcha"]?.public_key)})},[]);const s=f.useCallback(async(a,c,l,u,d)=>{const p=new RE({matrixClient:o.current,doRequest:async S=>o.current.registerRequest({username:a,password:c,auth:S||void 0}),stateUpdated:(S,b)=>{if(b.error)throw new Error(b.error);S==="m.login.terms"?p.submitAuthDict({type:"m.login.terms"}).catch(C=>{U.error(C)}):S==="m.login.recaptcha"&&p.submitAuthDict({type:"m.login.recaptcha",response:u}).catch(C=>{U.error(C)})},requestEmailToken:async()=>Promise.resolve({sid:"dummy"})}),{user_id:g,access_token:v,device_id:m}=await p.attemptAuth();await e?.logout(!0);const _=await TO({baseUrl:it.defaultHomeserverUrl(),accessToken:v,userId:g,deviceId:m},!1);await _.setDisplayName(l);const y={user_id:g,device_id:m,access_token:v,passwordlessUser:d};d&&(y.tempPassword=c);const w=_.getUser(_.getUserId());return w.setRawDisplayName(l),w.setDisplayName(l),[_,y]},[e]);return{privacyPolicyUrl:t,recaptchaKey:r,register:s}},Kme="_buttons_1arp2_8",Wme={buttons:Kme},$O=({onJoin:e,open:t,onDismiss:n})=>{const{t:r}=he();return h.jsxs(lc,{title:r("join_existing_call_modal.title"),open:t,onDismiss:n,children:[h.jsx("p",{children:r("join_existing_call_modal.text")}),h.jsxs(je,{rightAlign:!0,className:Wme.buttons,children:[h.jsx(De,{onClick:n,children:r("action.no")}),h.jsx(De,{onClick:e,"data-testid":"home_joinExistingRoom",children:r("join_existing_call_modal.join_button")})]})]})},qS="https://www.recaptcha.net/recaptcha/api.js?onload=mxOnRecaptchaLoaded&render=explicit";function Dw(e){const{t}=he(),[n]=f.useState(()=>vf(16)),r=f.useRef(void 0);f.useEffect(()=>{if(!e)return;const s=()=>{document.getElementById(n)&&window.grecaptcha.render(n,{sitekey:e,size:"invisible",callback:a=>r.current?.resolve(a),"error-callback":()=>r.current?.reject(new Error)})};if(typeof window.grecaptcha?.render=="function")s();else if(window.mxOnRecaptchaLoaded=s,!document.querySelector(`script[src="${qS}"]`)){const a=document.createElement("script");a.src=qS,a.async=!0,document.body.appendChild(a)}},[n,e]);const i=f.useCallback(async()=>e?window.grecaptcha?new Promise((s,a)=>{const c=new MutationObserver(u=>{for(const d of u)if(d.target?.style?.visibility!=="visible"){a(S9("recaptcha_dismissed",t)),c.disconnect();return}});r.current={resolve:u=>{s(u),c.disconnect()},reject:u=>{a(u),c.disconnect()}},window.grecaptcha.execute().then(()=>{},u=>{U.error("Recaptcha execution failed",u)});const l=document.querySelector('iframe[src*="recaptcha/api2/bframe"]');l?.parentNode?.parentNode&&c.observe(l?.parentNode?.parentNode,{attributes:!0})}):(U.log("Recaptcha not loaded"),Promise.reject(S9("recaptcha_not_loaded",t))):Promise.resolve(""),[e,t]),o=f.useCallback(()=>{window.grecaptcha?.reset()},[]);return{execute:i,reset:o,recaptchaId:n}}const zme="_form_jcuzc_8",Yme={form:zme},Um=({ref:e,children:t,className:n,onSubmit:r})=>h.jsx("form",{onSubmit:r,className:Z(Yme.form,n),ref:e,children:t});Um.displayName="Form";const Xme="_footer_106jg_8",Zme="_mobileLoginLink_106jg_19",Qme="_form_106jg_24",Jme="_notice_106jg_40",Du={footer:Xme,mobileLoginLink:Zme,form:Qme,notice:Jme},e0e="_container_dwllg_8",t0e="_main_dwllg_15",n0e="_logo_dwllg_23",pl={container:e0e,main:t0e,logo:n0e},GS=e=>{e=1831565813+(e|=0)|0;let t=Math.imul(e^e>>>15,1|e);return t=t+Math.imul(t^t>>>7,61|t)^t,((t^t>>>14)>>>0)/4294967296};class r0e{constructor(t){this.dictionaries=void 0,this.length=void 0,this.separator=void 0,this.style=void 0,this.seed=void 0;const{length:n,separator:r,dictionaries:i,style:o,seed:s}=t;this.dictionaries=i,this.separator=r,this.length=n,this.style=o,this.seed=s}generate(){if(!this.dictionaries)throw new Error('Cannot find any dictionary. Please provide at least one, or leave the "dictionary" field empty in the config object');if(this.length<=0)throw new Error("Invalid length provided");if(this.length>this.dictionaries.length)throw new Error(`The length cannot be bigger than the number of dictionaries.
Length provided: ${this.length}. Number of dictionaries provided: ${this.dictionaries.length}`);let t=this.seed;return this.dictionaries.slice(0,this.length).reduce((n,r)=>{let i;t?(i=(s=>{if(typeof s=="string"){const a=s.split("").map(l=>l.charCodeAt(0)).reduce((l,u)=>l+u,1),c=Math.floor(Number(a));return GS(c)}return GS(s)})(t),t=4294967296*i):i=Math.random();let o=r[Math.floor(i*r.length)]||"";if(this.style==="lowerCase")o=o.toLowerCase();else if(this.style==="capital"){const[s,...a]=o.split("");o=s.toUpperCase()+a.join("")}else this.style==="upperCase"&&(o=o.toUpperCase());return n?`${n}${this.separator}${o}`:`${o}`},"")}}const KS={separator:"_",dictionaries:[]},i0e=e=>{const t=[...e&&e.dictionaries||KS.dictionaries],n={...KS,...e,length:e&&e.length||t.length,dictionaries:t};if(!e||!e.dictionaries||!e.dictionaries.length)throw new Error('A "dictionaries" array must be provided. This is a breaking change introduced starting from Unique Name Generator v4. Read more about the breaking change here: https://github.com/andreasonny83/unique-names-generator#migration-guide');return new r0e(n).generate()};var o0e=["able","above","absent","absolute","abstract","abundant","academic","acceptable","accepted","accessible","accurate","accused","active","actual","acute","added","additional","adequate","adjacent","administrative","adorable","advanced","adverse","advisory","aesthetic","afraid","aggregate","aggressive","agreeable","agreed","agricultural","alert","alive","alleged","allied","alone","alright","alternative","amateur","amazing","ambitious","amused","ancient","angry","annoyed","annual","anonymous","anxious","appalling","apparent","applicable","appropriate","arbitrary","architectural","armed","arrogant","artificial","artistic","ashamed","asleep","assistant","associated","atomic","attractive","automatic","autonomous","available","average","awake","aware","awful","awkward","back","bad","balanced","bare","basic","beautiful","beneficial","better","bewildered","big","binding","biological","bitter","bizarre","blank","blind","blonde","bloody","blushing","boiling","bold","bored","boring","bottom","brainy","brave","breakable","breezy","brief","bright","brilliant","broad","broken","bumpy","burning","busy","calm","capable","capitalist","careful","casual","causal","cautious","central","certain","changing","characteristic","charming","cheap","cheerful","chemical","chief","chilly","chosen","christian","chronic","chubby","circular","civic","civil","civilian","classic","classical","clean","clear","clever","clinical","close","closed","cloudy","clumsy","coastal","cognitive","coherent","cold","collective","colonial","colorful","colossal","coloured","colourful","combative","combined","comfortable","coming","commercial","common","communist","compact","comparable","comparative","compatible","competent","competitive","complete","complex","complicated","comprehensive","compulsory","conceptual","concerned","concrete","condemned","confident","confidential","confused","conscious","conservation","conservative","considerable","consistent","constant","constitutional","contemporary","content","continental","continued","continuing","continuous","controlled","controversial","convenient","conventional","convinced","convincing","cooing","cool","cooperative","corporate","correct","corresponding","costly","courageous","crazy","creative","creepy","criminal","critical","crooked","crowded","crucial","crude","cruel","cuddly","cultural","curious","curly","current","curved","cute","daily","damaged","damp","dangerous","dark","dead","deaf","deafening","dear","decent","decisive","deep","defeated","defensive","defiant","definite","deliberate","delicate","delicious","delighted","delightful","democratic","dependent","depressed","desirable","desperate","detailed","determined","developed","developing","devoted","different","difficult","digital","diplomatic","direct","dirty","disabled","disappointed","disastrous","disciplinary","disgusted","distant","distinct","distinctive","distinguished","disturbed","disturbing","diverse","divine","dizzy","domestic","dominant","double","doubtful","drab","dramatic","dreadful","driving","drunk","dry","dual","due","dull","dusty","dutch","dying","dynamic","eager","early","eastern","easy","economic","educational","eerie","effective","efficient","elaborate","elated","elderly","eldest","electoral","electric","electrical","electronic","elegant","eligible","embarrassed","embarrassing","emotional","empirical","empty","enchanting","encouraging","endless","energetic","enormous","enthusiastic","entire","entitled","envious","environmental","equal","equivalent","essential","established","estimated","ethical","ethnic","eventual","everyday","evident","evil","evolutionary","exact","excellent","exceptional","excess","excessive","excited","exciting","exclusive","existing","exotic","expected","expensive","experienced","experimental","explicit","extended","extensive","external","extra","extraordinary","extreme","exuberant","faint","fair","faithful","familiar","famous","fancy","fantastic","far","fascinating","fashionable","fast","fat","fatal","favourable","favourite","federal","fellow","female","feminist","few","fierce","filthy","final","financial","fine","firm","fiscal","fit","fixed","flaky","flat","flexible","fluffy","fluttering","flying","following","fond","foolish","foreign","formal","formidable","forthcoming","fortunate","forward","fragile","frail","frantic","free","frequent","fresh","friendly","frightened","front","frozen","full","fun","functional","fundamental","funny","furious","future","fuzzy","gastric","gay","general","generous","genetic","gentle","genuine","geographical","giant","gigantic","given","glad","glamorous","gleaming","global","glorious","golden","good","gorgeous","gothic","governing","graceful","gradual","grand","grateful","greasy","great","grieving","grim","gross","grotesque","growing","grubby","grumpy","guilty","handicapped","handsome","happy","hard","harsh","head","healthy","heavy","helpful","helpless","hidden","high","hilarious","hissing","historic","historical","hollow","holy","homeless","homely","hon","honest","horizontal","horrible","hostile","hot","huge","human","hungry","hurt","hushed","husky","icy","ideal","identical","ideological","ill","illegal","imaginative","immediate","immense","imperial","implicit","important","impossible","impressed","impressive","improved","inadequate","inappropriate","inc","inclined","increased","increasing","incredible","independent","indirect","individual","industrial","inevitable","influential","informal","inherent","initial","injured","inland","inner","innocent","innovative","inquisitive","instant","institutional","insufficient","intact","integral","integrated","intellectual","intelligent","intense","intensive","interested","interesting","interim","interior","intermediate","internal","international","intimate","invisible","involved","irrelevant","isolated","itchy","jealous","jittery","joint","jolly","joyous","judicial","juicy","junior","just","keen","key","kind","known","labour","large","late","latin","lazy","leading","left","legal","legislative","legitimate","lengthy","lesser","level","lexical","liable","liberal","light","like","likely","limited","linear","linguistic","liquid","literary","little","live","lively","living","local","logical","lonely","long","loose","lost","loud","lovely","low","loyal","ltd","lucky","mad","magic","magnetic","magnificent","main","major","male","mammoth","managerial","managing","manual","many","marginal","marine","marked","married","marvellous","marxist","mass","massive","mathematical","mature","maximum","mean","meaningful","mechanical","medical","medieval","melodic","melted","mental","mere","metropolitan","mid","middle","mighty","mild","military","miniature","minimal","minimum","ministerial","minor","miserable","misleading","missing","misty","mixed","moaning","mobile","moderate","modern","modest","molecular","monetary","monthly","moral","motionless","muddy","multiple","mushy","musical","mute","mutual","mysterious","naked","narrow","nasty","national","native","natural","naughty","naval","near","nearby","neat","necessary","negative","neighbouring","nervous","net","neutral","new","nice","noble","noisy","normal","northern","nosy","notable","novel","nuclear","numerous","nursing","nutritious","nutty","obedient","objective","obliged","obnoxious","obvious","occasional","occupational","odd","official","ok","okay","old","olympic","only","open","operational","opposite","optimistic","oral","ordinary","organic","organisational","original","orthodox","other","outdoor","outer","outrageous","outside","outstanding","overall","overseas","overwhelming","painful","pale","panicky","parallel","parental","parliamentary","partial","particular","passing","passive","past","patient","payable","peaceful","peculiar","perfect","permanent","persistent","personal","petite","philosophical","physical","plain","planned","plastic","pleasant","pleased","poised","polite","political","poor","popular","positive","possible","potential","powerful","practical","precious","precise","preferred","pregnant","preliminary","premier","prepared","present","presidential","pretty","previous","prickly","primary","prime","primitive","principal","printed","prior","private","probable","productive","professional","profitable","profound","progressive","prominent","promising","proper","proposed","prospective","protective","protestant","proud","provincial","psychiatric","psychological","public","puny","pure","purring","puzzled","quaint","qualified","quarrelsome","querulous","quick","quickest","quiet","quintessential","quixotic","racial","radical","rainy","random","rapid","rare","raspy","rational","ratty","raw","ready","real","realistic","rear","reasonable","recent","reduced","redundant","regional","registered","regular","regulatory","related","relative","relaxed","relevant","reliable","relieved","religious","reluctant","remaining","remarkable","remote","renewed","representative","repulsive","required","resident","residential","resonant","respectable","respective","responsible","resulting","retail","retired","revolutionary","rich","ridiculous","right","rigid","ripe","rising","rival","roasted","robust","rolling","romantic","rotten","rough","round","royal","rubber","rude","ruling","running","rural","sacred","sad","safe","salty","satisfactory","satisfied","scared","scary","scattered","scientific","scornful","scrawny","screeching","secondary","secret","secure","select","selected","selective","selfish","semantic","senior","sensible","sensitive","separate","serious","severe","sexual","shaggy","shaky","shallow","shared","sharp","sheer","shiny","shivering","shocked","short","shrill","shy","sick","significant","silent","silky","silly","similar","simple","single","skilled","skinny","sleepy","slight","slim","slimy","slippery","slow","small","smart","smiling","smoggy","smooth","social","socialist","soft","solar","sole","solid","sophisticated","sore","sorry","sound","sour","southern","soviet","spare","sparkling","spatial","special","specific","specified","spectacular","spicy","spiritual","splendid","spontaneous","sporting","spotless","spotty","square","squealing","stable","stale","standard","static","statistical","statutory","steady","steep","sticky","stiff","still","stingy","stormy","straight","straightforward","strange","strategic","strict","striking","striped","strong","structural","stuck","stupid","subjective","subsequent","substantial","subtle","successful","successive","sudden","sufficient","suitable","sunny","super","superb","superior","supporting","supposed","supreme","sure","surprised","surprising","surrounding","surviving","suspicious","sweet","swift","symbolic","sympathetic","systematic","tall","tame","tart","tasteless","tasty","technical","technological","teenage","temporary","tender","tense","terrible","territorial","testy","then","theoretical","thick","thin","thirsty","thorough","thoughtful","thoughtless","thundering","tight","tiny","tired","top","tory","total","tough","toxic","traditional","tragic","tremendous","tricky","tropical","troubled","typical","ugliest","ugly","ultimate","unable","unacceptable","unaware","uncertain","unchanged","uncomfortable","unconscious","underground","underlying","unemployed","uneven","unexpected","unfair","unfortunate","unhappy","uniform","uninterested","unique","united","universal","unknown","unlikely","unnecessary","unpleasant","unsightly","unusual","unwilling","upper","upset","uptight","urban","urgent","used","useful","useless","usual","vague","valid","valuable","variable","varied","various","varying","vast","verbal","vertical","very","vicarious","vicious","victorious","violent","visible","visiting","visual","vital","vitreous","vivacious","vivid","vocal","vocational","voiceless","voluminous","voluntary","vulnerable","wandering","warm","wasteful","watery","weak","wealthy","weary","wee","weekly","weird","welcome","well","western","wet","whispering","whole","wicked","wide","widespread","wild","wilful","willing","willowy","wily","wise","wispy","wittering","witty","wonderful","wooden","working","worldwide","worried","worrying","worthwhile","worthy","written","wrong","xenacious","xenial","xenogeneic","xenophobic","xeric","xerothermic","yabbering","yammering","yappiest","yappy","yawning","yearling","yearning","yeasty","yelling","yelping","yielding","yodelling","young","youngest","youthful","ytterbic","yucky","yummy","zany","zealous","zeroth","zestful","zesty","zippy","zonal","zoophagous","zygomorphic","zygotic"],s0e=["aardvark","aardwolf","albatross","alligator","alpaca","amphibian","anaconda","angelfish","anglerfish","ant","anteater","antelope","antlion","ape","aphid","armadillo","asp","baboon","badger","bandicoot","barnacle","barracuda","basilisk","bass","bat","bear","beaver","bedbug","bee","beetle","bird","bison","blackbird","boa","boar","bobcat","bobolink","bonobo","booby","bovid","bug","butterfly","buzzard","camel","canid","canidae","capybara","cardinal","caribou","carp","cat","caterpillar","catfish","catshark","cattle","centipede","cephalopod","chameleon","cheetah","chickadee","chicken","chimpanzee","chinchilla","chipmunk","cicada","clam","clownfish","cobra","cockroach","cod","condor","constrictor","coral","cougar","cow","coyote","crab","crane","crawdad","crayfish","cricket","crocodile","crow","cuckoo","damselfly","deer","dingo","dinosaur","dog","dolphin","donkey","dormouse","dove","dragon","dragonfly","duck","eagle","earthworm","earwig","echidna","eel","egret","elephant","elk","emu","ermine","falcon","felidae","ferret","finch","firefly","fish","flamingo","flea","fly","flyingfish","fowl","fox","frog","galliform","gamefowl","gayal","gazelle","gecko","gerbil","gibbon","giraffe","goat","goldfish","goose","gopher","gorilla","grasshopper","grouse","guan","guanaco","guineafowl","gull","guppy","haddock","halibut","hamster","hare","harrier","hawk","hedgehog","heron","herring","hippopotamus","hookworm","hornet","horse","hoverfly","hummingbird","hyena","iguana","impala","jackal","jaguar","jay","jellyfish","junglefowl","kangaroo","kingfisher","kite","kiwi","koala","koi","krill","ladybug","lamprey","landfowl","lark","leech","lemming","lemur","leopard","leopon","limpet","lion","lizard","llama","lobster","locust","loon","louse","lungfish","lynx","macaw","mackerel","magpie","mammal","manatee","mandrill","marlin","marmoset","marmot","marsupial","marten","mastodon","meadowlark","meerkat","mink","minnow","mite","mockingbird","mole","mollusk","mongoose","monkey","moose","mosquito","moth","mouse","mule","muskox","narwhal","newt","nightingale","ocelot","octopus","opossum","orangutan","orca","ostrich","otter","owl","ox","panda","panther","parakeet","parrot","parrotfish","partridge","peacock","peafowl","pelican","penguin","perch","pheasant","pig","pigeon","pike","pinniped","piranha","planarian","platypus","pony","porcupine","porpoise","possum","prawn","primate","ptarmigan","puffin","puma","python","quail","quelea","quokka","rabbit","raccoon","rat","rattlesnake","raven","reindeer","reptile","rhinoceros","roadrunner","rodent","rook","rooster","roundworm","sailfish","salamander","salmon","sawfish","scallop","scorpion","seahorse","shark","sheep","shrew","shrimp","silkworm","silverfish","skink","skunk","sloth","slug","smelt","snail","snake","snipe","sole","sparrow","spider","spoonbill","squid","squirrel","starfish","stingray","stoat","stork","sturgeon","swallow","swan","swift","swordfish","swordtail","tahr","takin","tapir","tarantula","tarsier","termite","tern","thrush","tick","tiger","tiglon","toad","tortoise","toucan","trout","tuna","turkey","turtle","tyrannosaurus","unicorn","urial","vicuna","viper","vole","vulture","wallaby","walrus","warbler","wasp","weasel","whale","whippet","whitefish","wildcat","wildebeest","wildfowl","wolf","wolverine","wombat","woodpecker","worm","wren","xerinae","yak","zebra"],a0e=["amaranth","amber","amethyst","apricot","aqua","aquamarine","azure","beige","black","blue","blush","bronze","brown","chocolate","coffee","copper","coral","crimson","cyan","emerald","fuchsia","gold","gray","green","harlequin","indigo","ivory","jade","lavender","lime","magenta","maroon","moccasin","olive","orange","peach","pink","plum","purple","red","rose","salmon","sapphire","scarlet","silver","tan","teal","tomato","turquoise","violet","white","yellow"];const c0e=["hydrogen","helium","lithium","beryllium","boron","carbon","nitrogen","oxygen","fluorine","neon","sodium","magnesium","aluminum","silicon","phosphorus","sulfur","chlorine","argon","potassium","calcium","scandium","titanium","vanadium","chromium","manganese","iron","cobalt","nickel","copper","zinc","gallium","germanium","arsenic","selenium","bromine","krypton","rubidium","strontium","yttrium","zirconium","niobium","molybdenum","technetium","ruthenium","rhodium","palladium","silver","cadmium","indium","tin","antimony","tellurium","iodine","xenon","cesium","barium","lanthanum","cerium","praseodymium","neodymium","promethium","samarium","europium","gadolinium","terbium","dysprosium","holmium","erbium","thulium","ytterbium","lutetium","hafnium","tantalum","wolfram","rhenium","osmium","iridium","platinum","gold","mercury","thallium","lead","bismuth","polonium","astatine","radon","francium","radium","actinium","thorium","protactinium","uranium","neptunium","plutonium","americium","curium","berkelium","californium","einsteinium","fermium","mendelevium","nobelium","lawrencium","rutherfordium","dubnium","seaborgium","bohrium","hassium","meitnerium","darmstadtium","roentgenium","copernicium","nihonium","flerovium","moscovium","livermorium","tennessine","oganesson"];function OO(){return i0e({dictionaries:[a0e,o0e,s0e,c0e],style:"lowerCase",length:3,separator:"-"})}const l0e=()=>{const{setClient:e}=uc(),{header:t}=gi(),[n,r]=f.useState(!1),[i,o]=f.useState(),[s]=om(),{recaptchaKey:a,register:c}=jw(),{execute:l,reset:u,recaptchaId:d}=Dw(a),[p,g]=f.useState(!1),v=f.useCallback(()=>g(!1),[g]),[m,_]=f.useState(),y=uo(),{t:w}=he(),S=f.useCallback(b=>{b.preventDefault();const C=new FormData(b.target),E=AO(C.get("callName")),x=C.get("displayName");async function I(){o(void 0),r(!0);const L=await l(),R=OO(),[k,A]=await c(R,vf(16),x,L,!0);let P;try{P=await PO(k,E,mt.SHARED_KEY)}catch(O){if(!e)throw O;if(O.errcode==="M_ROOM_IN_USE"){_(()=>{e(k,A);const j=eh(E);y(`/${j}`)?.catch($=>{U.error("Failed to navigate to alias localpart",$)})}),r(!1),g(!0);return}else throw O}if(!e)throw new Error("setClient is undefined");if(!P.password)throw new Error("Failed to create room with shared secret");e(k,A),await y(Hm(P.roomId,{kind:mt.SHARED_KEY,secret:P.password},E))}I().catch(L=>{U.error(L),r(!1),o(L),u()})},[c,u,l,y,g,e]);return h.jsxs(h.Fragment,{children:[h.jsxs("div",{className:pl.container,children:[t==="standard"&&h.jsxs(as,{children:[h.jsx(ra,{children:h.jsx(Ua,{})}),h.jsx(ia,{hideMobile:!0,children:h.jsx(Ow,{})})]}),h.jsxs("main",{className:pl.main,children:[h.jsx(Ua,{className:pl.logo}),h.jsx(Fi,{size:"lg",weight:"semibold",children:w("start_new_call")}),h.jsxs(Um,{className:Du.form,onSubmit:S,children:[h.jsx(je,{children:h.jsx(wt,{id:"callName",name:"callName",label:w("call_name"),placeholder:w("call_name"),type:"text",required:!0,autoComplete:"off","data-testid":"home_callName"})}),h.jsx(je,{children:h.jsx(wt,{id:"displayName",name:"displayName",label:w("common.display_name"),placeholder:w("common.display_name"),type:"text",required:!0,"data-testid":"home_displayName",autoComplete:"off"})}),s===null&&h.jsx(Ye,{size:"sm",className:Du.notice,children:h.jsx(QM,{})}),h.jsx(Ye,{size:"sm",className:Du.notice,children:h.jsxs(lr,{i18nKey:"unauthenticated_view_ssla_caption",children:['By clicking "Go", you agree to our'," ",h.jsx(ka,{href:it.get().ssla,children:"Software and Services License Agreement (SSLA)"})]})}),i&&h.jsx(je,{children:h.jsx(sa,{error:i})}),h.jsx(De,{type:"submit",size:"lg",disabled:n,"data-testid":"home_go",children:w(n?"common.loading":"action.go")}),h.jsx("div",{id:d})]})]}),h.jsxs("footer",{className:Du.footer,children:[h.jsx(Ye,{className:Du.mobileLoginLink,children:h.jsx(so,{to:"/login","data-testid":"home_login",children:w("unauthenticated_view_login_button")})}),h.jsx(Ye,{children:h.jsxs(lr,{i18nKey:"unauthenticated_view_body",children:["Not registered yet?"," ",h.jsx(so,{to:"/register","data-testid":"home_register",children:"Create an account"})]})})]})]}),m&&h.jsx($O,{onJoin:m,open:p,onDismiss:v})]})},$c={};function WS(e,t){if($c[t.roomId])return $c[t.roomId];if(!t||!t.timeline){const i=Number.MAX_SAFE_INTEGER;return $c[t.roomId]=i,i}const n=e.getUserId();if(t.getMyMembership()!==tn.Join){const i=t.currentState.getStateEvents("m.room.member",n);if(i&&!Array.isArray(i)){const o=i.getTs();return $c[t.roomId]=o,o}}for(let i=t.timeline.length-1;i>=0;--i){const s=t.timeline[i].getTs();if(s)return $c[t.roomId]=s,s}const r=Number.MAX_SAFE_INTEGER;return $c[t.roomId]=r,r}function u0e(e,t){return t.sort((n,r)=>WS(e,r)-WS(e,n))}const d0e=e=>{const t=kO(e.roomId);if(!e.hasEncryptionStateEvent()&&!t)return!1;switch(e.getJoinRule()){case Jc.Public:return!0;case Jc.Knock:switch(e.getMyMembership()){case tn.Join:case tn.Knock:return!0;case tn.Invite:return e.getLiveTimeline().getState(LE.FORWARDS)?.getStateEvents(He.RoomMember,e.myUserId)?.getPrevContent().membership===Jc.Knock;default:return!1}default:return e.getMyMembership()===tn.Join}},f0e=e=>{const t=e.getMyMembership();if(t===tn.Knock)return!0;if(t!==tn.Join)return!1;const n=e.getLiveTimeline();if(n.getState(LE.FORWARDS)?.events?.has(He.GroupCallMemberPrefix))return!0;for(const r of e._unstable_getStickyEvents())if(r.getType()===He.RTCMembership)return!0;return n.getEvents().some(r=>r.unstableStickyInfo&&r.getType()===He.GroupCallMemberPrefix)};function h0e(e){const[t,n]=f.useState([]);return f.useEffect(()=>{function r(){const i=e.getRooms().filter(f0e).filter(d0e),s=u0e(e,i).map(a=>{const c=e.matrixRTC.getRoomSession(a);return{roomAlias:a.getCanonicalAlias()??void 0,roomName:a.name,avatarUrl:a.getMxcAvatarUrl(),room:a,session:c,participants:c.memberships.filter(l=>l.sender).map(l=>a.getMember(l.sender)).filter(l=>l)}});n(s)}return r(),e.matrixRTC.on(a6.SessionStarted,r),e.on(Cr.MyMembership,r),()=>{e.matrixRTC.off(a6.SessionStarted,r),e.off(Cr.MyMembership,r)}},[e]),t}const p0e="_form_1vjc2_8",g0e="_fieldRow_1vjc2_16",m0e="_button_1vjc2_24",v0e="_notice_1vjc2_32",Fu={form:p0e,fieldRow:g0e,button:m0e,notice:v0e},y0e="_callTileSpacer_l4ywf_8",_0e="_callTile_l4ywf_8",b0e="_callTileLink_l4ywf_28",w0e="_callInfo_l4ywf_40",S0e="_callName_l4ywf_53",C0e="_callList_l4ywf_63",E0e="_disabled_l4ywf_74",Po={callTileSpacer:y0e,callTile:_0e,callTileLink:b0e,callInfo:w0e,callName:S0e,callList:C0e,disabled:E0e},x0e=({rooms:e,client:t})=>h.jsx(h.Fragment,{children:h.jsxs("div",{className:Po.callList,children:[e.map(({room:n,roomName:r,avatarUrl:i,participants:o})=>h.jsx(I0e,{client:t,name:r,avatarUrl:i,room:n,participants:o},n.roomId)),e.length>3&&h.jsxs(h.Fragment,{children:[h.jsx("div",{className:Po.callTileSpacer}),h.jsx("div",{className:Po.callTileSpacer})]})]})}),I0e=({name:e,avatarUrl:t,room:n,client:r})=>{const{t:i}=he(),o=Fm(n.roomId),[s,a]=f.useState(!1),c=f.useCallback(u=>{u.stopPropagation(),u.preventDefault(),a(!0),r.leave(n.roomId).catch(()=>a(!1))},[n,r]),l=h.jsxs(h.Fragment,{children:[h.jsx(sc,{id:n.roomId,name:e,size:oc.LG,src:t}),h.jsx("div",{className:Po.callInfo,children:h.jsx(Ye,{weight:"semibold",className:Po.callName,children:e})}),h.jsx(kg,{onClick:c,disabled:s,"aria-label":i("action.remove"),children:h.jsx(Rf,{})})]});return h.jsx("div",{className:Po.callTile,children:s?h.jsx("span",{className:Z(Po.callTileLink,Po.disabled),children:l}):h.jsx(fg,{to:Hm(n.roomId,o,n.name),className:Po.callTileLink,children:l})})},R0e=({client:e})=>{const{header:t}=gi(),[n,r]=f.useState(!1),[i,o]=f.useState(),[s]=om(),a=uo(),{t:c}=he(),[l,u]=f.useState(!1),d=f.useCallback(()=>u(!1),[u]),p=f.useCallback(y=>{y.preventDefault();const S=new FormData(y.target).get("callName"),b=typeof S=="string"?AO(S):"";async function C(){o(void 0),r(!0);const E=await PO(e,b,mt.SHARED_KEY);if(!E.password)throw new Error("Failed to create room with shared secret");await a(Hm(E.roomId,{kind:mt.SHARED_KEY,secret:E.password},b))}C().catch(E=>{E.errcode==="M_ROOM_IN_USE"?(m(eh(b)),r(!1),o(void 0),u(!0)):(U.error(E),r(!1),o(E))})},[e,a,u]),g=h0e(e),[v,m]=f.useState(),_=f.useCallback(()=>{a(`/${v}`)?.catch(y=>{U.error("Failed to navigate to existing alias",y)})},[a,v]);return h.jsxs(h.Fragment,{children:[h.jsxs("div",{className:pl.container,children:[t==="standard"&&h.jsxs(as,{children:[h.jsx(ra,{children:h.jsx(Ua,{})}),h.jsx(ia,{children:h.jsx(Ow,{})})]}),h.jsxs("main",{className:pl.main,children:[h.jsx(Ua,{className:pl.logo}),h.jsx(Fi,{size:"lg",weight:"semibold",children:c("start_new_call")}),h.jsxs(Um,{className:Fu.form,onSubmit:p,children:[h.jsxs(je,{className:Fu.fieldRow,children:[h.jsx(wt,{id:"callName",name:"callName",label:c("call_name"),placeholder:c("call_name"),type:"text",required:!0,autoComplete:"off","data-testid":"home_callName"}),h.jsx(De,{type:"submit",size:"lg",className:Fu.button,disabled:n,"data-testid":"home_go",children:c(n?"common.loading":"action.go")})]}),s===null&&h.jsx(Ye,{size:"sm",className:Fu.notice,children:h.jsx(QM,{})}),i&&h.jsx(je,{className:Fu.fieldRow,children:h.jsx(sa,{error:i})})]}),g.length>0&&h.jsx(x0e,{rooms:g,client:e})]})]}),h.jsx($O,{onJoin:_,open:l,onDismiss:d})]})};function th(e){f.useEffect(()=>{const t="Element Call";document.title=e?`${t} | ${e}`:t},[e])}const jO=()=>{const{t:e}=he();th(e("common.home"));const t=uu();return t?t.state==="error"?h.jsx(Qd,{widget:Ae,error:t.error}):t.authenticated?h.jsx(R0e,{client:t.authenticated.client}):h.jsx(l0e,{}):h.jsx(Jg,{})},L0e=(e,t)=>f.createElement("svg",{width:300,height:66,viewBox:"0 0 300 66",fill:"none",xmlns:"http://www.w3.org/2000/svg",ref:t,...e},f.createElement("circle",{cx:32.6901,cy:32.6904,r:23.496,fill:"white"}),f.createElement("path",{fillRule:"evenodd",clipRule:"evenodd",d:"M32.6137 65.2274C50.6257 65.2274 65.2274 50.6257 65.2274 32.6137C65.2274 14.6016 50.6257 0 32.6137 0C14.6016 0 0 14.6016 0 32.6137C0 50.6257 14.6016 65.2274 32.6137 65.2274ZM26.6511 15.1961C26.6511 13.8796 27.7205 12.8124 29.0397 12.8124C37.9808 12.8124 45.2291 20.0456 45.2291 28.9681C45.2291 30.2846 44.1596 31.3518 42.8405 31.3518C41.5213 31.3518 40.4519 30.2846 40.4519 28.9681C40.4519 22.6785 35.3425 17.5797 29.0397 17.5797C27.7205 17.5797 26.6511 16.5125 26.6511 15.1961ZM52.4139 28.9683C52.4139 27.6518 51.3445 26.5846 50.0253 26.5846C48.7061 26.5846 47.6367 27.6518 47.6367 28.9683C47.6367 35.2579 42.5274 40.3567 36.2246 40.3567C34.9054 40.3567 33.836 41.4239 33.836 42.7404C33.836 44.0568 34.9054 45.124 36.2246 45.124C45.1657 45.124 52.4139 37.8909 52.4139 28.9683ZM38.6134 50.031C38.6134 51.3475 37.544 52.4146 36.2248 52.4146C27.2837 52.4146 20.0355 45.1815 20.0355 36.2589C20.0355 34.9425 21.1049 33.8753 22.4241 33.8753C23.7432 33.8753 24.8127 34.9425 24.8127 36.2589C24.8127 42.5486 29.922 47.6474 36.2248 47.6474C37.544 47.6474 38.6134 48.7146 38.6134 50.031ZM12.8113 36.2589C12.8113 37.5754 13.8808 38.6426 15.1999 38.6426C16.5191 38.6426 17.5885 37.5754 17.5885 36.2589C17.5885 29.9693 22.6979 24.8705 29.0007 24.8705C30.3198 24.8705 31.3893 23.8033 31.3893 22.4869C31.3893 21.1704 30.3198 20.1032 29.0007 20.1032C20.0595 20.1032 12.8113 27.3364 12.8113 36.2589Z",fill:"#0DBD8B"}),f.createElement("path",{d:"M114.73 36.9816H91.7256C91.9974 39.3888 92.871 41.3107 94.3464 42.7472C95.8217 44.1449 97.763 44.8438 100.17 44.8438C101.762 44.8438 103.199 44.4555 104.48 43.679C105.761 42.9025 106.674 41.8542 107.217 40.5341H114.206C113.274 43.6014 111.527 46.0862 108.964 47.9887C106.441 49.8523 103.451 50.7842 99.9955 50.7842C95.4917 50.7842 91.8421 49.2894 89.0466 46.2998C86.29 43.3102 84.9117 39.5247 84.9117 34.9432C84.9117 30.4783 86.3094 26.7316 89.1049 23.7032C91.9003 20.6747 95.5111 19.1605 99.9373 19.1605C104.363 19.1605 107.935 20.6553 110.653 23.6449C113.41 26.5957 114.788 30.323 114.788 34.8267L114.73 36.9816ZM99.9373 24.8097C97.763 24.8097 95.9576 25.4503 94.5211 26.7316C93.0845 28.0128 92.1915 29.7212 91.8421 31.8566H107.916C107.605 29.7212 106.751 28.0128 105.353 26.7316C103.956 25.4503 102.15 24.8097 99.9373 24.8097Z",fill:"white"}),f.createElement("path",{d:"M119.557 41.0583V6.40625H126.488V41.1748C126.488 42.7278 127.342 43.5043 129.05 43.5043L130.273 43.4461V50.0271C129.613 50.1435 128.914 50.2018 128.177 50.2018C125.187 50.2018 122.993 49.4447 121.596 47.9305C120.237 46.4163 119.557 44.1255 119.557 41.0583Z",fill:"white"}),f.createElement("path",{d:"M162.549 36.9816H139.545C139.817 39.3888 140.69 41.3107 142.166 42.7472C143.641 44.1449 145.582 44.8438 147.99 44.8438C149.582 44.8438 151.018 44.4555 152.299 43.679C153.581 42.9025 154.493 41.8542 155.037 40.5341H162.025C161.093 43.6014 159.346 46.0862 156.784 47.9887C154.26 49.8523 151.27 50.7842 147.815 50.7842C143.311 50.7842 139.662 49.2894 136.866 46.2998C134.109 43.3102 132.731 39.5247 132.731 34.9432C132.731 30.4783 134.129 26.7316 136.924 23.7032C139.72 20.6747 143.331 19.1605 147.757 19.1605C152.183 19.1605 155.755 20.6553 158.473 23.6449C161.229 26.5957 162.608 30.323 162.608 34.8267L162.549 36.9816ZM147.757 24.8097C145.582 24.8097 143.777 25.4503 142.341 26.7316C140.904 28.0128 140.011 29.7212 139.662 31.8566H155.735C155.425 29.7212 154.571 28.0128 153.173 26.7316C151.775 25.4503 149.97 24.8097 147.757 24.8097Z",fill:"white"}),f.createElement("path",{d:"M193.817 32.7302V50.0853H186.887V31.973C186.887 27.3916 184.984 25.1009 181.179 25.1009C179.122 25.1009 177.471 25.7609 176.229 27.081C175.025 28.4011 174.424 30.2065 174.424 32.4972V50.0853H167.493V19.8594H173.9V23.8779C174.637 22.519 175.763 21.393 177.277 20.5C178.792 19.607 180.675 19.1605 182.927 19.1605C187.12 19.1605 190.148 20.7524 192.012 23.9361C194.574 20.7524 197.991 19.1605 202.262 19.1605C205.795 19.1605 208.513 20.2671 210.415 22.4801C212.318 24.6544 213.269 27.5275 213.269 31.0995V50.0853H206.338V31.973C206.338 27.3916 204.436 25.1009 200.631 25.1009C198.535 25.1009 196.865 25.7803 195.623 27.1392C194.419 28.4593 193.817 30.323 193.817 32.7302Z",fill:"white"}),f.createElement("path",{d:"M247.735 36.9816H224.731C225.002 39.3888 225.876 41.3107 227.351 42.7472C228.827 44.1449 230.768 44.8438 233.175 44.8438C234.767 44.8438 236.204 44.4555 237.485 43.679C238.766 42.9025 239.678 41.8542 240.222 40.5341H247.211C246.279 43.6014 244.532 46.0862 241.969 47.9887C239.446 49.8523 236.456 50.7842 233 50.7842C228.497 50.7842 224.847 49.2894 222.052 46.2998C219.295 43.3102 217.917 39.5247 217.917 34.9432C217.917 30.4783 219.314 26.7316 222.11 23.7032C224.905 20.6747 228.516 19.1605 232.942 19.1605C237.368 19.1605 240.94 20.6553 243.658 23.6449C246.415 26.5957 247.793 30.323 247.793 34.8267L247.735 36.9816ZM232.942 24.8097C230.768 24.8097 228.963 25.4503 227.526 26.7316C226.089 28.0128 225.196 29.7212 224.847 31.8566H240.921C240.61 29.7212 239.756 28.0128 238.358 26.7316C236.961 25.4503 235.155 24.8097 232.942 24.8097Z",fill:"white"}),f.createElement("path",{d:"M259.085 19.8594V23.8779C259.784 22.5578 260.929 21.4513 262.521 20.5583C264.152 19.6264 266.113 19.1605 268.403 19.1605C271.975 19.1605 274.732 20.2477 276.673 22.4219C278.653 24.5961 279.643 27.4887 279.643 31.0995V50.0853H272.713V31.973C272.713 29.8376 272.208 28.1681 271.199 26.9645C270.228 25.7221 268.733 25.1009 266.714 25.1009C264.501 25.1009 262.754 25.7609 261.473 27.081C260.23 28.4011 259.609 30.2259 259.609 32.5554V50.0853H252.679V19.8594H259.085Z",fill:"white"}),f.createElement("path",{d:"M299.884 43.912V49.9106C299.029 50.1435 297.826 50.26 296.273 50.26C290.371 50.26 287.42 47.2898 287.42 41.3495V25.3921H282.82V19.8594H287.42V11.9972H294.351V19.8594H300V25.3921H294.351V40.6506C294.351 43.019 295.477 44.2032 297.729 44.2032L299.884 43.912Z",fill:"white"})),DO=f.forwardRef(L0e),k0e="_logo_1gx2r_8",T0e="_container_1gx2r_14",A0e="_content_1gx2r_22",P0e="_formContainer_1gx2r_30",M0e="_authLinks_1gx2r_62",Ji={logo:k0e,container:T0e,content:A0e,formContainer:P0e,authLinks:M0e};function N0e(e){return f.useCallback(async(t,n,r)=>{const i=W3({baseUrl:t}),o=new RE({matrixClient:i,doRequest:async()=>i.login("m.login.password",{identifier:{type:"m.id.user",user:n},password:r}),stateUpdated:()=>{},requestEmailToken:async()=>Promise.resolve({sid:""})}),{user_id:s,access_token:a,device_id:c}=await o.attemptAuth(),l={user_id:s,access_token:a,device_id:c,passwordlessUser:!1};return await e?.logout(!0),[await TO({baseUrl:t,accessToken:a,userId:s,deviceId:c},!1),l]},[e])}const $0e=()=>{const{t:e}=he();th(e("login_title"));const{client:t,setClient:n}=uc(),r=N0e(t),i=it.defaultHomeserverUrl(),o=f.useRef(null),s=f.useRef(null),a=uo(),c=Nn(),[l,u]=f.useState(!1),[d,p]=f.useState(),g=f.useCallback(m=>{if(m.preventDefault(),u(!0),!i||!o.current||!s.current){p(Error("Login parameters are undefined")),u(!1);return}r(i,o.current.value,s.current.value).then(async([_,y])=>{if(!n)return;n(_,y);const w=c.state;w&&w.from?await a(w.from):await a("/"),Ke.instance.eventLogin.track()}).catch(_=>{p(_),u(!1)})},[r,c,a,i,n]);let v=it.defaultServerName()?.slice(0,25);return v=v?.length!==it.defaultServerName()?.length?v+"...":v,h.jsx(h.Fragment,{children:h.jsx("div",{className:Ji.container,children:h.jsxs("div",{className:Ji.content,children:[h.jsxs("div",{className:Ji.formContainer,children:[h.jsx(DO,{width:"auto",height:"auto",className:Ji.logo}),h.jsx("h2",{children:e("log_in")}),h.jsx("h4",{children:e("login_subheading")}),h.jsxs("form",{onSubmit:g,children:[h.jsx(je,{children:h.jsx(wt,{type:"text",ref:o,placeholder:e("common.username"),label:e("common.username"),autoCorrect:"off",autoCapitalize:"none",prefix:"@",suffix:`:${v}`,"data-testid":"login_username"})}),h.jsx(je,{children:h.jsx(wt,{type:"password",ref:s,placeholder:e("common.password"),label:e("common.password"),"data-testid":"login_password"})}),d&&h.jsx(je,{children:h.jsx(sa,{error:d})}),h.jsx(je,{children:h.jsx(De,{type:"submit",disabled:l,"data-testid":"login_login",children:e(l?"logging_in":"login_title")})})]})]}),h.jsxs("div",{className:Ji.authLinks,children:[h.jsx("p",{children:e("login_auth_links_prompt")}),h.jsx("p",{children:h.jsxs(lr,{i18nKey:"login_auth_links",children:[h.jsx(so,{to:"/register",children:"Create an account"})," Or ",h.jsx(so,{to:"/",children:"Access as a guest"})]})})]})]})})})},O0e=()=>{const{t:e}=he();th(e("action.register"));const{loading:t,authenticated:n,passwordlessUser:r,client:i,setClient:o}=bb(),s=f.useRef(null),a=uo(),c=Nn(),[l,u]=f.useState(!1),[d,p]=f.useState(),[g,v]=f.useState(""),[m,_]=f.useState(""),{recaptchaKey:y,register:w}=jw(i),{execute:S,reset:b,recaptchaId:C}=Dw(y),E=f.useCallback(x=>{x.preventDefault();const I=new FormData(x.target),L=I.get("userName"),R=I.get("password"),k=I.get("passwordConfirmation");if(R!==k)return;(async()=>{u(!0);const P=await S(),[O,j]=await w(L,R,L,P,r);if(i&&i?.groupCallEventHandler&&r)for(const $ of i.groupCallEventHandler.groupCalls.values()){const T=$.room.roomId;try{await O.joinRoom(T)}catch(N){N.errcode==="M_LIMIT_EXCEEDED"?(await IE(N.data.retry_after_ms),await O.joinRoom(T)):(wg(N),U.error(`Couldn't join room ${T}`,N))}}o?.(O,j),Ke.instance.eventSignup.cacheSignupEnd(new Date)})().then(async()=>{c.state?.from?await a(c.state?.from):await a("/")}).catch(P=>{p(P),u(!1),b()})},[w,c,a,r,b,S,i,o]);return f.useEffect(()=>{g&&m&&g!==m?s.current?.setCustomValidity(e("register.passwords_must_match")):s.current?.setCustomValidity("")},[g,m,e]),f.useEffect(()=>{!t&&n&&!r&&!l&&a("/")?.catch(x=>{U.error("Failed to navigate to /",x)})},[t,a,n,r,l]),t?h.jsx(Jg,{}):(Ke.instance.eventSignup.cacheSignupStart(new Date),h.jsx(h.Fragment,{children:h.jsx("div",{className:Ji.container,children:h.jsxs("div",{className:Ji.content,children:[h.jsxs("div",{className:Ji.formContainer,children:[h.jsx(DO,{width:"auto",height:"auto",className:Ji.logo}),h.jsx("h2",{children:e("register_heading")}),h.jsxs("form",{onSubmit:E,children:[h.jsx(je,{children:h.jsx(wt,{type:"text",name:"userName",placeholder:e("common.username"),label:e("common.username"),autoCorrect:"off",autoCapitalize:"none",prefix:"@",suffix:`:${it.defaultServerName()}`,"data-testid":"register_username"})}),h.jsx(je,{children:h.jsx(wt,{required:!0,name:"password",type:"password",onChange:x=>v(x.target.value),value:g,placeholder:e("common.password"),label:e("common.password"),"data-testid":"register_password"})}),h.jsx(je,{children:h.jsx(wt,{required:!0,type:"password",name:"passwordConfirmation",onChange:x=>_(x.target.value),value:m,placeholder:e("register_confirm_password_label"),label:e("register_confirm_password_label"),ref:s,"data-testid":"register_confirm_password"})}),h.jsx(Ye,{size:"sm",children:h.jsxs(lr,{i18nKey:"recaptcha_ssla_caption",children:["This site is protected by ReCAPTCHA and the Google"," ",h.jsx(ka,{href:"https://www.google.com/policies/privacy/",children:"Privacy Policy"})," ","and"," ",h.jsx(ka,{href:"https://policies.google.com/terms",children:"Terms of Service"})," ","apply.",h.jsx("br",{}),'By clicking "Register", you agree to our'," ",h.jsx(ka,{href:it.get().ssla,children:"Software and Services License Agreement (SSLA)"})]})}),d&&h.jsx(je,{children:h.jsx(sa,{error:d})}),h.jsx(je,{children:h.jsx(De,{type:"submit",disabled:l,"data-testid":"register_register",children:e(l?"register.registering":"action.register")})}),h.jsx("div",{id:C})]})]}),h.jsx("div",{className:Ji.authLinks,children:h.jsxs(lr,{i18nKey:"register_auth_links",children:[h.jsx("p",{children:"Already have an account?"}),h.jsxs("p",{children:[h.jsx(so,{to:"/login",children:"Log in"})," Or ",h.jsx(so,{to:"/",children:"Access as a guest"})]})]})})]})})}))},j0e="_form_1wfyo_8",D0e="_headline_1wfyo_18",F0e="_container_1wfyo_37",H0e="_main_1wfyo_45",U0e="_footer_1wfyo_62",Hu={form:j0e,headline:D0e,container:F0e,main:H0e,footer:U0e};function FO(){const{setClient:e}=uc(),{privacyPolicyUrl:t,recaptchaKey:n,register:r}=jw(),{execute:i,reset:o,recaptchaId:s}=Dw(n),a=f.useCallback(async c=>{if(!e)throw new Error("No client context");if(Ae)throw new Error("Registration was skipped: We should never try to register password-less user in embedded mode.");try{const l=await i(),u=OO(),[d,p]=await r(u,vf(16),c,l,!0);e(d,p)}catch(l){throw o(),l}},[i,o,r,e]);return{privacyPolicyUrl:t,registerPasswordlessUser:a,recaptchaId:s}}const B0e=()=>{const{header:e}=gi(),[t,n]=f.useState(!1),[r,i]=f.useState(),{registerPasswordlessUser:o,recaptchaId:s}=FO(),a=f.useCallback(u=>{u.preventDefault(),n(!0);const p=new FormData(u.target).get("displayName");o(typeof p=="string"?p:"").catch(v=>{U.error("Failed to register passwordless user",u),n(!1),i(v)})},[o]),{t:c}=he(),l=Nn();return h.jsxs(h.Fragment,{children:[e==="standard"&&h.jsxs(as,{children:[h.jsx(ra,{children:h.jsx(Ua,{})}),h.jsx(ia,{children:h.jsx(Ow,{preventNavigation:!0})})]}),h.jsxs("div",{className:Hu.container,children:[h.jsxs("main",{className:Hu.main,children:[h.jsx(Fi,{size:"xl",weight:"semibold",className:Hu.headline,children:c("lobby.join_as_guest")}),h.jsxs(Um,{className:Hu.form,onSubmit:a,children:[h.jsx(je,{children:h.jsx(wt,{id:"displayName",name:"displayName",label:c("common.display_name"),placeholder:c("common.display_name"),"data-testid":"joincall_displayName",type:"text",required:!0,autoComplete:"off"})}),h.jsx(Ye,{size:"sm",children:h.jsxs(lr,{i18nKey:"room_auth_view_ssla_caption",children:['By clicking "Join call now", you agree to our'," ",h.jsx(ka,{href:it.get().ssla,children:"Software and Services License Agreement (SSLA)"})]})}),r&&h.jsx(je,{children:h.jsx(sa,{error:r})}),h.jsx(De,{type:"submit",size:"lg",disabled:t,"data-testid":"joincall_joincall",children:c(t?"common.loading":"room_auth_view_continue_button")}),h.jsx("div",{id:s})]})]}),h.jsx(Ye,{className:Hu.footer,children:h.jsxs(lr,{i18nKey:"unauthenticated_view_body",children:["Not registered yet?"," ",h.jsx(so,{to:"/register",state:{from:l},children:"Create an account"})]})})]})]})};function V0e(e=[Ve.Source.Camera,Ve.Source.Microphone,Ve.Source.ScreenShare,Ve.Source.ScreenShareAudio,Ve.Source.Unknown],t={}){const n=PD(t.room),[r,i]=f.useState([]),[o,s]=f.useState([]),a=f.useMemo(()=>e.map(c=>MD(c)?c.source:c),[JSON.stringify(e)]);return f.useEffect(()=>{const c=ND(n,a,{additionalRoomEvents:t.updateOnlyOn,onlySubscribed:t.onlySubscribed}).subscribe(({trackReferences:l,participants:u})=>{xv.debug("setting track bundles",l,u),i(l),s(u)});return()=>c.unsubscribe()},[n,JSON.stringify(t.onlySubscribed),JSON.stringify(t.updateOnlyOn),JSON.stringify(e)]),f.useMemo(()=>{if(kE(e)){const c=G0e(e,o),l=Array.from(r);return o.forEach(u=>{c.has(u.identity)&&(c.get(u.identity)??[]).forEach(d=>{if(r.find(({participant:g,publication:v})=>u.identity===g.identity&&v.source===d))return;xv.debug(`Add ${d} placeholder for participant ${u.identity}.`);const p={participant:u,source:d};l.push(p)})}),l}else return r},[r,o,e])}function q0e(e,t){const n=new Set(e);for(const r of t)n.delete(r);return n}function G0e(e,t){const n=new Map;if(kE(e)){const r=e.filter(i=>i.withPlaceholder).map(i=>i.source);t.forEach(i=>{const o=i.getTrackPublications().map(a=>{var c;return(c=a.track)==null?void 0:c.source}).filter(a=>a!==void 0),s=Array.from(q0e(new Set(r),new Set(o)));s.length>0&&n.set(i.identity,s)})}return n}$D.AgentState;var Xh={exports:{}},zS;function K0e(){if(zS)return Xh.exports;zS=1;var e=typeof Reflect=="object"?Reflect:null,t=e&&typeof e.apply=="function"?e.apply:function(b,C,E){return Function.prototype.apply.call(b,C,E)},n;e&&typeof e.ownKeys=="function"?n=e.ownKeys:Object.getOwnPropertySymbols?n=function(b){return Object.getOwnPropertyNames(b).concat(Object.getOwnPropertySymbols(b))}:n=function(b){return Object.getOwnPropertyNames(b)};function r(b){console&&console.warn&&console.warn(b)}var i=Number.isNaN||function(b){return b!==b};function o(){o.init.call(this)}Xh.exports=o,Xh.exports.once=y,o.EventEmitter=o,o.prototype._events=void 0,o.prototype._eventsCount=0,o.prototype._maxListeners=void 0;var s=10;function a(b){if(typeof b!="function")throw new TypeError('The "listener" argument must be of type Function. Received type '+typeof b)}Object.defineProperty(o,"defaultMaxListeners",{enumerable:!0,get:function(){return s},set:function(b){if(typeof b!="number"||b<0||i(b))throw new RangeError('The value of "defaultMaxListeners" is out of range. It must be a non-negative number. Received '+b+".");s=b}}),o.init=function(){(this._events===void 0||this._events===Object.getPrototypeOf(this)._events)&&(this._events=Object.create(null),this._eventsCount=0),this._maxListeners=this._maxListeners||void 0},o.prototype.setMaxListeners=function(b){if(typeof b!="number"||b<0||i(b))throw new RangeError('The value of "n" is out of range. It must be a non-negative number. Received '+b+".");return this._maxListeners=b,this};function c(b){return b._maxListeners===void 0?o.defaultMaxListeners:b._maxListeners}o.prototype.getMaxListeners=function(){return c(this)},o.prototype.emit=function(b){for(var C=[],E=1;E<arguments.length;E++)C.push(arguments[E]);var x=b==="error",I=this._events;if(I!==void 0)x=x&&I.error===void 0;else if(!x)return!1;if(x){var L;if(C.length>0&&(L=C[0]),L instanceof Error)throw L;var R=new Error("Unhandled error."+(L?" ("+L.message+")":""));throw R.context=L,R}var k=I[b];if(k===void 0)return!1;if(typeof k=="function")t(k,this,C);else for(var A=k.length,P=v(k,A),E=0;E<A;++E)t(P[E],this,C);return!0};function l(b,C,E,x){var I,L,R;if(a(E),L=b._events,L===void 0?(L=b._events=Object.create(null),b._eventsCount=0):(L.newListener!==void 0&&(b.emit("newListener",C,E.listener?E.listener:E),L=b._events),R=L[C]),R===void 0)R=L[C]=E,++b._eventsCount;else if(typeof R=="function"?R=L[C]=x?[E,R]:[R,E]:x?R.unshift(E):R.push(E),I=c(b),I>0&&R.length>I&&!R.warned){R.warned=!0;var k=new Error("Possible EventEmitter memory leak detected. "+R.length+" "+String(C)+" listeners added. Use emitter.setMaxListeners() to increase limit");k.name="MaxListenersExceededWarning",k.emitter=b,k.type=C,k.count=R.length,r(k)}return b}o.prototype.addListener=function(b,C){return l(this,b,C,!1)},o.prototype.on=o.prototype.addListener,o.prototype.prependListener=function(b,C){return l(this,b,C,!0)};function u(){if(!this.fired)return this.target.removeListener(this.type,this.wrapFn),this.fired=!0,arguments.length===0?this.listener.call(this.target):this.listener.apply(this.target,arguments)}function d(b,C,E){var x={fired:!1,wrapFn:void 0,target:b,type:C,listener:E},I=u.bind(x);return I.listener=E,x.wrapFn=I,I}o.prototype.once=function(b,C){return a(C),this.on(b,d(this,b,C)),this},o.prototype.prependOnceListener=function(b,C){return a(C),this.prependListener(b,d(this,b,C)),this},o.prototype.removeListener=function(b,C){var E,x,I,L,R;if(a(C),x=this._events,x===void 0)return this;if(E=x[b],E===void 0)return this;if(E===C||E.listener===C)--this._eventsCount===0?this._events=Object.create(null):(delete x[b],x.removeListener&&this.emit("removeListener",b,E.listener||C));else if(typeof E!="function"){for(I=-1,L=E.length-1;L>=0;L--)if(E[L]===C||E[L].listener===C){R=E[L].listener,I=L;break}if(I<0)return this;I===0?E.shift():m(E,I),E.length===1&&(x[b]=E[0]),x.removeListener!==void 0&&this.emit("removeListener",b,R||C)}return this},o.prototype.off=o.prototype.removeListener,o.prototype.removeAllListeners=function(b){var C,E,x;if(E=this._events,E===void 0)return this;if(E.removeListener===void 0)return arguments.length===0?(this._events=Object.create(null),this._eventsCount=0):E[b]!==void 0&&(--this._eventsCount===0?this._events=Object.create(null):delete E[b]),this;if(arguments.length===0){var I=Object.keys(E),L;for(x=0;x<I.length;++x)L=I[x],L!=="removeListener"&&this.removeAllListeners(L);return this.removeAllListeners("removeListener"),this._events=Object.create(null),this._eventsCount=0,this}if(C=E[b],typeof C=="function")this.removeListener(b,C);else if(C!==void 0)for(x=C.length-1;x>=0;x--)this.removeListener(b,C[x]);return this};function p(b,C,E){var x=b._events;if(x===void 0)return[];var I=x[C];return I===void 0?[]:typeof I=="function"?E?[I.listener||I]:[I]:E?_(I):v(I,I.length)}o.prototype.listeners=function(b){return p(this,b,!0)},o.prototype.rawListeners=function(b){return p(this,b,!1)},o.listenerCount=function(b,C){return typeof b.listenerCount=="function"?b.listenerCount(C):g.call(b,C)},o.prototype.listenerCount=g;function g(b){var C=this._events;if(C!==void 0){var E=C[b];if(typeof E=="function")return 1;if(E!==void 0)return E.length}return 0}o.prototype.eventNames=function(){return this._eventsCount>0?n(this._events):[]};function v(b,C){for(var E=new Array(C),x=0;x<C;++x)E[x]=b[x];return E}function m(b,C){for(;C+1<b.length;C++)b[C]=b[C+1];b.pop()}function _(b){for(var C=new Array(b.length),E=0;E<C.length;++E)C[E]=b[E].listener||b[E];return C}function y(b,C){return new Promise(function(E,x){function I(R){b.removeListener(C,L),x(R)}function L(){typeof b.removeListener=="function"&&b.removeListener("error",I),E([].slice.call(arguments))}S(b,C,L,{once:!0}),C!=="error"&&w(b,I,{once:!0})})}function w(b,C,E){typeof b.on=="function"&&S(b,"error",C,E)}function S(b,C,E,x){if(typeof b.on=="function")x.once?b.once(C,E):b.on(C,E);else if(typeof b.addEventListener=="function")b.addEventListener(C,function I(L){x.once&&b.removeEventListener(C,I),E(L)});else throw new TypeError('The "emitter" argument must be of type EventEmitter. Received type '+typeof b)}return Xh.exports}K0e();function W0e(e,t){const[n,r]=f.useState(),i=f.useMemo(()=>new OD,[]);return f.useEffect(()=>{let o=!1,s=[];return i.lock().then(async a=>{try{(e.audio||e.video)&&(s=await jD(e),o?s.forEach(c=>c.stop()):r(s))}catch(c){t&&c instanceof Error?t(c):xv.error(c)}finally{a()}}),()=>{o=!0,s.forEach(a=>{a.stop()})}},[JSON.stringify(e,DD),t,i]),n}const z0e="_inRoom_110p2_8",Y0e="_header_110p2_17",X0e="_filler_110p2_29",Z0e="_footer_110p2_34",Q0e="_hidden_110p2_53",J0e="_overlay_110p2_57",e2e="_logo_110p2_75",t2e="_buttons_110p2_84",n2e="_layout_110p2_91",r2e="_shareScreen_110p2_111",i2e="_invite_110p2_123",o2e="_raiseHand_110p2_124",s2e="_fixedGrid_110p2_147",a2e="_scrollingGrid_110p2_153",c2e="_tile_110p2_172",l2e="_maximised_110p2_177",Ft={inRoom:z0e,header:Y0e,filler:X0e,footer:Z0e,hidden:Q0e,overlay:J0e,logo:e2e,buttons:t2e,layout:n2e,shareScreen:r2e,invite:i2e,raiseHand:o2e,fixedGrid:s2e,scrollingGrid:a2e,tile:c2e,maximised:l2e},u2e="_content_1cy0f_8",d2e="_wait_1cy0f_19",f2e="_join_1cy0f_32",Uu={content:u2e,wait:d2e,join:f2e};function YS(e,t){let n;return(...r)=>{window.clearTimeout(n),n=window.setTimeout(()=>e(...r),t)}}function xd({debounce:e,scroll:t,polyfill:n,offsetSize:r}={debounce:0,scroll:!1,offsetSize:!1}){const i=n||(typeof window>"u"?class{}:window.ResizeObserver);if(!i)throw new Error("This browser does not support ResizeObserver out of the box. See: https://github.com/react-spring/react-use-measure/#resize-observer-polyfills");const[o,s]=f.useState({left:0,top:0,width:0,height:0,bottom:0,right:0,x:0,y:0}),a=f.useRef({element:null,scrollContainers:null,resizeObserver:null,lastBounds:o,orientationHandler:null}),c=e?typeof e=="number"?e:e.scroll:null,l=e?typeof e=="number"?e:e.resize:null,u=f.useRef(!1);f.useEffect(()=>(u.current=!0,()=>{u.current=!1}));const[d,p,g]=f.useMemo(()=>{const y=()=>{if(!a.current.element)return;const{left:w,top:S,width:b,height:C,bottom:E,right:x,x:I,y:L}=a.current.element.getBoundingClientRect(),R={left:w,top:S,width:b,height:C,bottom:E,right:x,x:I,y:L};a.current.element instanceof HTMLElement&&r&&(R.height=a.current.element.offsetHeight,R.width=a.current.element.offsetWidth),Object.freeze(R),u.current&&!m2e(a.current.lastBounds,R)&&s(a.current.lastBounds=R)};return[y,l?YS(y,l):y,c?YS(y,c):y]},[s,r,c,l]);function v(){a.current.scrollContainers&&(a.current.scrollContainers.forEach(y=>y.removeEventListener("scroll",g,!0)),a.current.scrollContainers=null),a.current.resizeObserver&&(a.current.resizeObserver.disconnect(),a.current.resizeObserver=null),a.current.orientationHandler&&("orientation"in screen&&"removeEventListener"in screen.orientation?screen.orientation.removeEventListener("change",a.current.orientationHandler):"onorientationchange"in window&&window.removeEventListener("orientationchange",a.current.orientationHandler))}function m(){a.current.element&&(a.current.resizeObserver=new i(g),a.current.resizeObserver.observe(a.current.element),t&&a.current.scrollContainers&&a.current.scrollContainers.forEach(y=>y.addEventListener("scroll",g,{capture:!0,passive:!0})),a.current.orientationHandler=()=>{g()},"orientation"in screen&&"addEventListener"in screen.orientation?screen.orientation.addEventListener("change",a.current.orientationHandler):"onorientationchange"in window&&window.addEventListener("orientationchange",a.current.orientationHandler))}const _=y=>{!y||y===a.current.element||(v(),a.current.element=y,a.current.scrollContainers=HO(y),m())};return p2e(g,!!t),h2e(p),f.useEffect(()=>{v(),m()},[t,g,p]),f.useEffect(()=>v,[]),[_,o,d]}function h2e(e){f.useEffect(()=>{const t=e;return window.addEventListener("resize",t),()=>{window.removeEventListener("resize",t)}},[e])}function p2e(e,t){f.useEffect(()=>{if(t){const n=e;return window.addEventListener("scroll",n,{capture:!0,passive:!0}),()=>{window.removeEventListener("scroll",n,!0)}}},[e,t])}function HO(e){const t=[];if(!e||e===document.body)return t;const{overflow:n,overflowX:r,overflowY:i}=window.getComputedStyle(e);return[n,r,i].some(o=>o==="auto"||o==="scroll")&&t.push(e),[...t,...HO(e.parentElement)]}const g2e=["x","y","top","bottom","left","right","width","height"],m2e=(e,t)=>g2e.every(n=>e[n]===t[n]),v2e="_loading_14w06_8",y2e={loading:v2e},_2e=({size:e,loading:t,...n})=>h.jsxs("div",{children:[t&&h.jsx("div",{className:y2e.loading,children:h.jsx(BT,{size:e/3})}),h.jsx(sc,{size:e,...n})]}),b2e="_preview_1jjvr_8",w2e="_mirror_1jjvr_24",S2e="_cameraStarting_1jjvr_28",C2e="_avatarContainer_1jjvr_39",E2e="_buttonBar_1jjvr_51",Bu={preview:b2e,mirror:w2e,cameraStarting:S2e,avatarContainer:C2e,buttonBar:E2e},x2e=({matrixInfo:e,videoEnabled:t,videoTrack:n,children:r})=>{const{t:i}=he(),[o,s]=xd(),a=f.useRef(null);f.useEffect(()=>(a.current&&n?.attach(a.current),()=>{n?.detach()}),[n]);const c=f.useMemo(()=>t&&!n,[t,n]);return h.jsxs("div",{className:Z(Bu.preview),ref:o,children:[h.jsx("video",{className:n&&Iv(n).facingMode==="user"?Bu.mirror:void 0,ref:a,muted:!0,playsInline:!0,tabIndex:-1,disablePictureInPicture:!0}),(!t||c)&&h.jsx(h.Fragment,{children:h.jsxs("div",{className:Bu.avatarContainer,children:[c&&h.jsx("div",{className:Bu.cameraStarting,role:"status",children:i("video_tile.camera_starting")}),h.jsx(_2e,{id:e.userId,name:e.displayName,size:Math.min(s.width,s.height)/2,src:e.avatarUrl,loading:c})]})}),h.jsx("div",{className:Bu.buttonBar,children:r})]})},UO=e=>{const{t}=he();return h.jsx(De,{kind:"secondary",size:"sm",Icon:Vie,...e,children:t("action.invite")})};function Fs(e){const t=f.useRef(void 0);return t.current??={value:e()},t.current.value}const BO=({client:e,matrixInfo:t,muteStates:n,onEnter:r,enterLabel:i,confineToRoom:o,hideHeader:s,participantCount:a,onShareClick:c,waitingForInvite:l})=>{f.useEffect(()=>(U.info("[Lifecycle] LobbyView Component mounted"),()=>{U.info("[Lifecycle] LobbyView Component unmounted")}),[]);const{t:u}=he();th(t.roomName);const d=J(n.audio.enabled$),p=J(n.video.enabled$),g=J(n.audio.toggle$),v=J(n.video.toggle$),[m,_]=f.useState(!1),[y,w]=f.useState(Nw),S=f.useCallback(()=>_(!0),[_]),b=f.useCallback(()=>_(!1),[_]),C=uo(),E=f.useCallback(()=>{C("/")?.catch(N=>{U.error("Failed to navigate to /",N)})},[C]),x=Kg("(max-height: 500px)"),I=!o&&h.jsx(so,{className:Uu.recents,to:"/",children:u("lobby.leave_button")}),L=dc(),R=dr(L.videoInput.selected$)?.id,k=Fs(()=>d&&{deviceId:Wpe(L.audioInput.selected$)?.id}),{processor:A}=Mw(),P=Fs(()=>A),O=f.useMemo(()=>({audio:Object.assign({},k),video:p&&{deviceId:R,processor:P}}),[k,p,R,P]),j=f.useCallback(N=>{U.error("Error while creating preview Tracks:",N),n.audio.setEnabled$.value?.(!1),n.video.setEnabled$.value?.(!1)},[n]),$=W0e(O,j),T=f.useMemo(()=>$?.find(N=>N.kind===Ve.Kind.Video)??null,[$]);return f.useEffect(()=>{T&&R===void 0&&L.requestDeviceNames()},[L,R,T]),xme(T),h.jsxs(h.Fragment,{children:[h.jsxs("div",{className:Z(Uu.room,Ft.inRoom),children:[!s&&h.jsxs(as,{children:[h.jsx(ra,{children:h.jsx(zA,{id:t.roomId,name:t.roomName,avatarUrl:t.roomAvatar,encrypted:t.e2eeSystem.kind!==mt.NONE,participantCount:a})}),h.jsx(ia,{children:c!==null&&h.jsx(UO,{onClick:c})})]}),h.jsxs("div",{className:Uu.content,children:[h.jsx(x2e,{matrixInfo:t,videoEnabled:p,videoTrack:T,children:h.jsx(De,{className:Z(Uu.join,{[Uu.wait]:l}),size:l?"sm":"lg",disabled:l,onClick:()=>{l||r()},"data-testid":"lobby_joinCall",children:i??u("lobby.join_button")})}),!x&&I]}),h.jsxs("div",{className:Ft.footer,children:[x&&I,h.jsxs("div",{className:Ft.buttons,children:[h.jsx(mP,{muted:!d,onClick:g??void 0,disabled:g===null}),h.jsx(vP,{muted:!p,onClick:v??void 0,disabled:v===null}),h.jsx(_P,{onClick:S}),!o&&h.jsx(yP,{onClick:E})]})]})]}),e&&h.jsx($w,{client:e,open:m,onDismiss:b,tab:y,onTabChange:w})]})},I2e="_headline_1em2y_8",R2e="_callEndedContent_1em2y_15",L2e="_callEndedButton_1em2y_35",k2e="_submitButton_1em2y_40",T2e="_container_1em2y_47",A2e="_main_1em2y_55",P2e="_footer_1em2y_72",gs={headline:I2e,callEndedContent:R2e,callEndedButton:L2e,submitButton:k2e,container:T2e,main:A2e,footer:P2e},M2e="_starIcon_1m09w_8",N2e="_starRating_1m09w_12",$2e="_inputContainer_1m09w_18",O2e="_hideElement_1m09w_22",Vu={starIcon:M2e,starRating:N2e,inputContainer:$2e,hideElement:O2e},j2e=(e,t)=>f.createElement("svg",{width:28,height:26,viewBox:"0 0 28 26",fill:"none",xmlns:"http://www.w3.org/2000/svg",ref:t,...e},f.createElement("path",{d:"M14 21.0267L22.24 26.0001L20.0533 16.6267L27.3333 10.3201L17.7466 9.50675L14 0.666748L10.2533 9.50675L0.666626 10.3201L7.94663 16.6267L5.75996 26.0001L14 21.0267Z",fill:"white"})),D2e=f.forwardRef(j2e),F2e=(e,t)=>f.createElement("svg",{width:28,height:26,viewBox:"0 0 28 26",fill:"none",xmlns:"http://www.w3.org/2000/svg",ref:t,...e},f.createElement("path",{id:"Vector",d:"M14 7.50675L15.2933 10.5601L15.92 12.0401L17.52 12.1734L20.8133 12.4534L18.3066 14.6267L17.0933 15.6801L17.4533 17.2534L18.2 20.4667L15.3733 18.7601L14 17.9067L12.6266 18.7334L9.79996 20.4401L10.5466 17.2267L10.9066 15.6534L9.69329 14.6001L7.18663 12.4267L10.48 12.1467L12.08 12.0134L12.7066 10.5334L14 7.50675M14 0.666748L10.2533 9.50675L0.666626 10.3201L7.94663 16.6267L5.75996 26.0001L14 21.0267L22.24 26.0001L20.0533 16.6267L27.3333 10.3201L17.7466 9.50675L14 0.666748Z",fill:"white"})),H2e=f.forwardRef(F2e);function U2e({starCount:e,onChange:t,required:n}){const[r,i]=f.useState(0),[o,s]=f.useState(0),{t:a}=he();return h.jsx("div",{className:Vu.starRating,children:[...Array(e)].map((c,l)=>(l+=1,h.jsxs("div",{className:Vu.inputContainer,onMouseEnter:()=>s(l),onMouseLeave:()=>s(r),children:[h.jsx("input",{className:Vu.hideElement,type:"radio",id:"starInput"+String(l),value:String(l)+"Star",name:"star rating",onChange:u=>{i(l),t(l)},required:!0}),h.jsx("label",{className:Vu.hideElement,id:"starInvisibleLabel"+String(l),htmlFor:"starInput"+String(l),children:a("star_rating_input_label",{count:l})}),h.jsx("label",{className:Vu.starIcon,id:"starIcon"+String(l),htmlFor:"starInput"+String(l),children:l<=(o||r)?h.jsx(D2e,{}):h.jsx(H2e,{})})]},l)))})}const B2e=({client:e,isPasswordlessUser:t,hideHeader:n,confineToRoom:r,endedCallId:i})=>{const{t:o}=he(),s=uo(),{displayName:a}=Kf(e),[c,l]=f.useState(!1),[u,d]=f.useState(0),[p,g]=f.useState(!1),[v,m]=f.useState(!1),_=f.useCallback(S=>{S.preventDefault();const C=new FormData(S.target).get("feedbackText");Ke.instance.eventQualitySurvey.track(i,C,u),g(!0),setTimeout(()=>{m(!0),setTimeout(()=>{t?l(!0):r||s("/")?.catch(E=>{U.error("Failed to navigate to /",E)})},1e3)},1e3)},[i,s,t,r,u]),y=t&&h.jsxs("div",{className:gs.callEndedContent,children:[h.jsxs(lr,{i18nKey:"call_ended_view.create_account_prompt",children:[h.jsx("p",{children:"Why not finish by setting up a password to keep your account?"}),h.jsx("p",{children:"You'll be able to keep your name and set an avatar for use on future calls"})]}),h.jsx(Q_,{className:gs.callEndedButton,to:"/register",children:o("call_ended_view.create_account_button")})]}),w=h.jsxs("div",{className:gs.callEndedContent,children:[h.jsx(lr,{i18nKey:"call_ended_view.feedback_prompt",children:h.jsx("p",{children:"We'd love to hear your feedback so we can improve your experience."})}),h.jsxs("form",{onSubmit:_,children:[h.jsx(je,{children:h.jsx(U2e,{starCount:5,onChange:d,required:!0})}),h.jsx(je,{children:h.jsx(wt,{className:ZM.feedback,id:"feedbackText",name:"feedbackText",label:o("settings.feedback_tab_description_label"),placeholder:o("settings.feedback_tab_description_label"),type:"textarea"})})," ",h.jsx(je,{children:v?h.jsx(lr,{i18nKey:"call_ended_view.feedback_done",children:h.jsx("p",{children:"Thanks for your feedback!"})}):h.jsx(De,{type:"submit",className:gs.submitButton,"data-testid":"home_go",children:o(p?"submitting":"action.submit")})})]})]});return h.jsxs(h.Fragment,{children:[!n&&h.jsxs(as,{children:[h.jsx(ra,{children:!r&&h.jsx(Ua,{})}),h.jsx(ia,{})]}),h.jsxs("div",{className:gs.container,children:[h.jsxs("main",{className:gs.main,children:[h.jsx(Fi,{size:"xl",weight:"semibold",className:gs.headline,children:c?o("call_ended_view.headline",{displayName:a}):o("call_ended_view.headline",{displayName:a})+`
`+o("call_ended_view.survey_prompt")}),(!c||r)&&Ke.instance.isEnabled()?w:y]}),!r&&h.jsx(Ye,{className:gs.footer,children:h.jsxs(so,{to:"/",children:[" ",o("call_ended_view.not_now_button")," "]})})]})]})};function XS(e,t,n){return n.find(i=>i.kind===t&&i.label===e)?.deviceId}const V2e=(e,t)=>f.createElement("svg",{width:48,height:48,viewBox:"0 0 48 48",fill:"none",xmlns:"http://www.w3.org/2000/svg",ref:t,...e},f.createElement("g",{id:"Logo Mark"},f.createElement("rect",{width:47.86,height:48,rx:23.93,fill:"#0DBD8B"}),f.createElement("g",{id:"Union"},f.createElement("path",{d:"M21.3075 9.42871C20.3396 9.42871 19.5549 10.214 19.5549 11.1828C19.5549 12.1516 20.3396 12.9369 21.3075 12.9369C25.9321 12.9369 29.6811 16.689 29.6811 21.3175C29.6811 22.2863 30.4657 23.0716 31.4337 23.0716C32.4016 23.0716 33.1863 22.2863 33.1863 21.3175C33.1863 14.7515 27.868 9.42871 21.3075 9.42871Z",fill:"white"}),f.createElement("path",{d:"M38.4591 21.3174C38.4591 20.3486 37.6745 19.5633 36.7065 19.5633C35.7386 19.5633 34.9539 20.3486 34.9539 21.3174C34.9539 25.9459 31.2049 29.698 26.5804 29.698C25.6124 29.698 24.8277 30.4833 24.8277 31.4521C24.8277 32.4209 25.6124 33.2062 26.5804 33.2062C33.1408 33.2062 38.4591 27.8834 38.4591 21.3174Z",fill:"white"}),f.createElement("path",{d:"M28.3329 36.8173C28.3329 37.786 27.5482 38.5714 26.5803 38.5714C20.0198 38.5714 14.7015 33.2486 14.7015 26.6826C14.7015 25.7138 15.4862 24.9285 16.4541 24.9285C17.4221 24.9285 18.2067 25.7138 18.2067 26.6826C18.2067 31.3111 21.9557 35.0632 26.5803 35.0632C27.5482 35.0632 28.3329 35.8485 28.3329 36.8173Z",fill:"white"}),f.createElement("path",{d:"M9.40112 26.6827C9.40112 27.6514 10.1858 28.4368 11.1537 28.4368C12.1217 28.4368 12.9064 27.6514 12.9064 26.6827C12.9064 22.0542 16.6553 18.3021 21.2799 18.3021C22.2478 18.3021 23.0325 17.5167 23.0325 16.548C23.0325 15.5792 22.2478 14.7939 21.2799 14.7939C14.7194 14.7939 9.40112 20.1167 9.40112 26.6827Z",fill:"white"})))),q2e=f.forwardRef(V2e),G2e=(e,t)=>f.createElement("svg",{width:160,height:22,viewBox:"0 0 160 22",fill:"none",xmlns:"http://www.w3.org/2000/svg",ref:t,...e},f.createElement("g",{id:"Logo Type"},f.createElement("g",{id:"Vector"},f.createElement("path",{d:"M14.8673 15.1575H3.39742C3.53293 16.3508 3.96849 17.3036 4.70411 18.0157C5.43974 18.7087 6.40766 19.0551 7.60789 19.0551C8.40159 19.0551 9.11785 18.8626 9.75668 18.4777C10.3955 18.0927 10.8504 17.5731 11.1215 16.9186H14.606C14.1414 18.4392 13.2702 19.671 11.9926 20.6142C10.7343 21.5381 9.24368 22 7.52078 22C5.27519 22 3.45549 21.259 2.06168 19.7769C0.687227 18.2948 0 16.4182 0 14.147C0 11.9335 0.696906 10.0761 2.09072 8.5748C3.48453 7.07349 5.28487 6.32283 7.49174 6.32283C9.69861 6.32283 11.4796 7.06387 12.8347 8.54593C14.2091 10.0087 14.8964 11.8565 14.8964 14.0892L14.8673 15.1575ZM7.49174 9.12336C6.40766 9.12336 5.50749 9.44095 4.79123 10.0761C4.07496 10.7113 3.62972 11.5582 3.45549 12.6168H11.4699C11.315 11.5582 10.8892 10.7113 10.1922 10.0761C9.49534 9.44095 8.59517 9.12336 7.49174 9.12336Z",fill:"currentColor"}),f.createElement("path",{d:"M17.2743 17.1785V0H20.7298V17.2362C20.7298 18.0061 21.1557 18.3911 22.0074 18.3911L22.6172 18.3622V21.6247C22.2881 21.6824 21.9397 21.7113 21.5719 21.7113C20.0813 21.7113 18.9875 21.336 18.2906 20.5853C17.6131 19.8346 17.2743 18.699 17.2743 17.1785Z",fill:"currentColor"}),f.createElement("path",{d:"M38.71 15.1575H27.2401C27.3756 16.3508 27.8112 17.3036 28.5468 18.0157C29.2824 18.7087 30.2504 19.0551 31.4506 19.0551C32.2443 19.0551 32.9606 18.8626 33.5994 18.4777C34.2382 18.0927 34.6931 17.5731 34.9642 16.9186H38.4487C37.9841 18.4392 37.113 19.671 35.8353 20.6142C34.577 21.5381 33.0864 22 31.3635 22C29.1179 22 27.2982 21.259 25.9044 19.7769C24.5299 18.2948 23.8427 16.4182 23.8427 14.147C23.8427 11.9335 24.5396 10.0761 25.9334 8.5748C27.3272 7.07349 29.1276 6.32283 31.3344 6.32283C33.5413 6.32283 35.3223 7.06387 36.6774 8.54593C38.0518 10.0087 38.7391 11.8565 38.7391 14.0892L38.71 15.1575ZM31.3344 9.12336C30.2504 9.12336 29.3502 9.44095 28.6339 10.0761C27.9177 10.7113 27.4724 11.5582 27.2982 12.6168H35.3126C35.1577 11.5582 34.7319 10.7113 34.035 10.0761C33.3381 9.44095 32.4379 9.12336 31.3344 9.12336Z",fill:"currentColor"}),f.createElement("path",{d:"M54.3001 13.0499V21.6535H50.8446V12.6745C50.8446 10.4033 49.8961 9.26772 47.9989 9.26772C46.9729 9.26772 46.1502 9.59493 45.5307 10.2493C44.9306 10.9038 44.6306 11.7988 44.6306 12.9344V21.6535H41.1751V6.66929H44.3692V8.66142C44.737 7.98775 45.2984 7.42957 46.0534 6.98688C46.8084 6.54418 47.7473 6.32283 48.8701 6.32283C50.9608 6.32283 52.4707 7.11199 53.4 8.69029C54.6776 7.11199 56.3812 6.32283 58.5106 6.32283C60.2722 6.32283 61.6273 6.87139 62.5759 7.9685C63.5244 9.04637 63.9987 10.4707 63.9987 12.2415V21.6535H60.5432V12.6745C60.5432 10.4033 59.5947 9.26772 57.6975 9.26772C56.6522 9.26772 55.8198 9.60455 55.2003 10.2782C54.6002 10.9326 54.3001 11.8565 54.3001 13.0499Z",fill:"currentColor"}),f.createElement("path",{d:"M81.1834 15.1575H69.7135C69.849 16.3508 70.2846 17.3036 71.0202 18.0157C71.7558 18.7087 72.7237 19.0551 73.924 19.0551C74.7177 19.0551 75.4339 18.8626 76.0728 18.4777C76.7116 18.0927 77.1665 17.5731 77.4375 16.9186H80.9221C80.4575 18.4392 79.5863 19.671 78.3087 20.6142C77.0504 21.5381 75.5598 22 73.8369 22C71.5913 22 69.7716 21.259 68.3778 19.7769C67.0033 18.2948 66.3161 16.4182 66.3161 14.147C66.3161 11.9335 67.013 10.0761 68.4068 8.5748C69.8006 7.07349 71.601 6.32283 73.8078 6.32283C76.0147 6.32283 77.7957 7.06387 79.1508 8.54593C80.5252 10.0087 81.2124 11.8565 81.2124 14.0892L81.1834 15.1575ZM73.8078 9.12336C72.7237 9.12336 71.8236 9.44095 71.1073 10.0761C70.391 10.7113 69.9458 11.5582 69.7716 12.6168H77.786C77.6311 11.5582 77.2052 10.7113 76.5083 10.0761C75.8114 9.44095 74.9113 9.12336 73.8078 9.12336Z",fill:"currentColor"}),f.createElement("path",{d:"M86.8426 6.66929V8.66142C87.191 8.007 87.7621 7.45844 88.5558 7.01575C89.3689 6.55381 90.3465 6.32283 91.4886 6.32283C93.2696 6.32283 94.6441 6.86177 95.612 7.93963C96.5993 9.0175 97.0929 10.4514 97.0929 12.2415V21.6535H93.6374V12.6745C93.6374 11.6159 93.3858 10.7883 92.8824 10.1916C92.3985 9.57568 91.6532 9.26772 90.6465 9.26772C89.5431 9.26772 88.672 9.59493 88.0331 10.2493C87.4137 10.9038 87.1039 11.8084 87.1039 12.9633V21.6535H83.6484V6.66929H86.8426Z",fill:"currentColor"}),f.createElement("path",{d:"M107.185 18.5932V21.5669C106.759 21.6824 106.159 21.7402 105.384 21.7402C102.442 21.7402 100.971 20.2677 100.971 17.3228V9.41208H98.6766V6.66929H100.971V2.77165H104.426V6.66929H107.243V9.41208H104.426V16.9764C104.426 18.1505 104.987 18.7375 106.11 18.7375L107.185 18.5932Z",fill:"currentColor"}),f.createElement("path",{d:"M116.115 18.9881C114.474 17.2035 113.653 14.9429 113.653 12.2064C113.653 9.4699 114.474 7.21782 116.115 5.45015C117.773 3.66548 119.953 2.77314 122.654 2.77314C124.876 2.77314 126.756 3.38503 128.295 4.6088C129.833 5.83258 130.816 7.47277 131.244 9.52939H129.269C128.91 7.99967 128.132 6.7844 126.936 5.88357C125.739 4.98273 124.312 4.53232 122.654 4.53232C120.534 4.53232 118.824 5.23769 117.525 6.64842C116.243 8.05916 115.602 9.91182 115.602 12.2064C115.602 14.501 116.243 16.3536 117.525 17.7644C118.824 19.1751 120.534 19.8805 122.654 19.8805C124.312 19.8805 125.739 19.4301 126.936 18.5292C128.132 17.6284 128.91 16.4131 129.269 14.8834H131.244C130.816 16.94 129.833 18.5802 128.295 19.804C126.756 21.0278 124.876 21.6397 122.654 21.6397C119.953 21.6397 117.773 20.7558 116.115 18.9881Z",fill:"currentColor"}),f.createElement("path",{d:"M143.174 15.0874C140.832 15.0874 139.233 15.1384 138.379 15.2403C137.541 15.3253 136.926 15.4698 136.532 15.6738C135.831 16.0647 135.481 16.6936 135.481 17.5604C135.481 19.2261 136.473 20.0589 138.456 20.0589C139.977 20.0589 141.139 19.719 141.943 19.0391C142.763 18.3593 143.174 17.4499 143.174 16.3111V15.0874ZM138.25 21.5632C136.763 21.5632 135.626 21.2062 134.84 20.4924C134.071 19.7615 133.686 18.8012 133.686 17.6114C133.686 16.8295 133.891 16.1327 134.301 15.5208C134.729 14.9089 135.31 14.4585 136.045 14.1695C136.661 13.9316 137.455 13.7786 138.43 13.7106C139.404 13.6256 140.986 13.5831 143.174 13.5831V12.7418C143.174 10.6002 141.943 9.52939 139.481 9.52939C137.361 9.52939 136.131 10.3877 135.789 12.1044H134.019C134.207 10.8466 134.746 9.84383 135.635 9.09597C136.541 8.34811 137.849 7.97418 139.558 7.97418C141.387 7.97418 142.746 8.3991 143.635 9.24894C144.541 10.0988 144.994 11.2716 144.994 12.7673V21.2572H143.251V19.3706C142.345 20.8323 140.678 21.5632 138.25 21.5632Z",fill:"currentColor"}),f.createElement("path",{d:"M149.358 18.4018V2.13576H151.178V18.1978C151.178 18.7247 151.264 19.0901 151.435 19.2941C151.623 19.498 151.956 19.6 152.435 19.6L152.948 19.549V21.2062C152.657 21.2572 152.341 21.2827 151.999 21.2827C150.238 21.2827 149.358 20.3224 149.358 18.4018Z",fill:"currentColor"}),f.createElement("path",{d:"M155.944 18.4018V2.13576H157.764V18.1978C157.764 18.7247 157.85 19.0901 158.021 19.2941C158.209 19.498 158.542 19.6 159.021 19.6L159.534 19.549V21.2062C159.243 21.2572 158.927 21.2827 158.585 21.2827C156.824 21.2827 155.944 20.3224 155.944 18.4018Z",fill:"currentColor"})))),K2e=f.forwardRef(G2e),ZS=e=>{const t=document.activeElement;return t!==null&&t.contains(e)},QS=Object.fromEntries(Xd.slice(0,My).map((e,t)=>[(t+1).toString(),e]));function W2e(e,t,n,r,i,o){const s=f.useRef(!1);kp(window,"keydown",f.useCallback(a=>{e.current!==null&&ZS(e.current)&&(a.altKey||a.ctrlKey||a.metaKey||a.shiftKey||(a.key==="m"?(a.preventDefault(),t?.()):a.key==="v"?(a.preventDefault(),n?.()):a.key===" "?(a.preventDefault(),s.current||(s.current=!0,r?.(!0))):a.key==="h"?(a.preventDefault(),o()):QS[a.key]&&(a.preventDefault(),i(QS[a.key]))))},[e,n,t,r,i,o]),f.useMemo(()=>({capture:!0}),[])),kp(window,"keyup",f.useCallback(a=>{e.current!==null&&ZS(e.current)&&a.key===" "&&(s.current=!1,r?.(!1))},[e,r])),kp(window,"blur",f.useCallback(()=>{s.current&&(s.current=!1,r?.(!0))},[r,s]))}const z2e="_tile_31vx3_8",Y2e="_speaking_31vx3_28",X2e="_handRaised_31vx3_48",Z2e="_muteIcon_31vx3_75",Q2e="_volumeSlider_31vx3_83",J2e="_switchCamera_31vx3_87",Xc={tile:z2e,speaking:Y2e,handRaised:X2e,muteIcon:Z2e,volumeSlider:Q2e,switchCamera:J2e};function Fw(e,t){return eN(e).pipe(V(()=>e.getTrackPublication(t)),ar(),V(n=>n&&{participant:e,publication:n,source:t}))}function VO(e,t,n){return ge([Fw(e,t),Phe(1e3).pipe(lt(0))]).pipe(Ee(async([r])=>{const i=r?.publication?.track;if(!i||!(i instanceof FD||i instanceof HD))return;const o=await i.getRTCStatsReport();if(o){for(const s of o.values())if(s.type===n)return s}}),lt(void 0))}function A3(e,t){return VO(e,t,"inbound-rtp").pipe(V(n=>n))}function JS(e,t){return VO(e,t,"outbound-rtp").pipe(V(n=>n))}function Zh(e,t){let n={framesDecoded:void 0,framesReceived:void 0};return A3(e,t).pipe(V(r=>{if(!r)return;const{framesDecoded:i,framesDropped:o,framesReceived:s}=r;return{framesDecoded:i,framesDropped:o,framesReceived:s}}),zt(r=>!!r),V(r=>{const i=n;if(n=r,typeof r.framesReceived=="number"&&typeof i.framesReceived=="number"&&typeof r.framesDecoded=="number"&&typeof i.framesDecoded=="number"){const o=r.framesReceived-i.framesReceived,s=r.framesDecoded-i.framesDecoded;if(o>0)return s>0}}),zt(r=>typeof r=="boolean"),lt(void 0))}function $2(e,t,n,r){return e.pipe(Ee(i=>i===void 0?Ce(!1):JM(i,ht.EncryptionError).pipe(V(o=>{const[s]=o;return n.kind===mt.PER_PARTICIPANT?(s?.message.includes(t.identity)&&s?.message.includes(r))??!1:n.kind===mt.SHARED_KEY?!!s?.message.includes(r):!1}))),ar(),a3(1e3),lt(!1))}class qO{constructor(t,n,r,i,o,s,a,c,l,u,d,p){this.scope=t,this.id=n,this.userId=r,this.rtcBackendIdentity=i,this.participant$=o,this.livekitRoom$=l,this.focusUrl$=u,this.displayName$=d,this.mxcAvatarUrl$=p,this.popupData$=this.scope.behavior(ge([this.livekitRoom$,this.participant$],(v,m)=>v!==void 0&&m===null));const g=this.observeTrackReference$(a);this.video$=this.observeTrackReference$(c),this.unencryptedWarning$=this.scope.behavior(ge([g,this.video$],(v,m)=>s.kind!==mt.NONE&&(v?.publication.isEncrypted===!1||m?.publication.isEncrypted===!1))),this.encryptionStatus$=this.scope.behavior(this.participant$.pipe(Ee(v=>v?v.isLocal||s.kind===mt.NONE?Ce(1):s.kind===mt.PER_PARTICIPANT?ge([$2(l,v,s,"MissingKey"),$2(l,v,s,"InvalidKey"),Zh(v,a),Zh(v,c)]).pipe(V(([m,_,y,w])=>{if(m)return 2;if(_)return 3;if(y||w)return 1}),zt(m=>!!m),lt(0)):ge([$2(l,v,s,"InvalidKey"),Zh(v,a),Zh(v,c)]).pipe(V(([m,_,y])=>{if(m)return 4;if(_||y)return 1}),zt(m=>!!m),lt(0)):Ce(0))))}observeTrackReference$(t){return this.scope.behavior(this.participant$.pipe(Ee(n=>n?Fw(n,t):Ce(void 0))))}}class GO extends qO{constructor(t,n,r,i,o,s,a,c,l,u,d,p,g){super(t,n,r,i,o,s,Ve.Source.Microphone,Ve.Source.Camera,a,c,l,u),this.handRaised$=d,this.reaction$=p,this.connection$=g,this._speaking$=this.scope.behavior(this.participant$.pipe(Ee(m=>m?am(m,Te.IsSpeakingChanged).pipe(V(_=>_.isSpeaking)):Ce(!1)))),this._cropVideo$=new Pt(!1),this.cropVideo$=this._cropVideo$;const v=this.scope.behavior(o.pipe(Ee(m=>(m&&eN(m))??Ce(void 0))));this.audioEnabled$=this.scope.behavior(v.pipe(V(m=>m?.microphoneTrack?.isMuted===!1))),this._videoEnabled$=this.scope.behavior(v.pipe(V(m=>m?.cameraTrack?.isMuted===!1)))}get speaking$(){return this._speaking$}get videoEnabled$(){return this._videoEnabled$}toggleFitContain(){this._cropVideo$.next(!this._cropVideo$.value)}get local(){return this instanceof Vl}}class Vl extends GO{constructor(t,n,r,i,o,s,a,c,l,u,d,p,g,v){super(t,n,r,i,o,s,a,c,u,d,p,g,v),this.mediaDevices=l,this.videoTrack$=this.video$.pipe(Ee(m=>{const _=m?.publication.track;return _ instanceof TE?Vo(Pn(_,c6.Restarted).pipe(lt(null),V(()=>_)),Pn(_,c6.Muted).pipe(V(()=>null))):Ce(null)})),this.mirror$=this.scope.behavior(this.videoTrack$.pipe(V(m=>m!==null&&Iv(m).facingMode==="user"))),this.alwaysShow$=v9.value$,this.setAlwaysShow=v9.setValue,this.switchCamera$=this.scope.behavior(Pi==="desktop"?Ce(null):this.videoTrack$.pipe(V(m=>{if(m===null)return null;const _=Iv(m).facingMode;return _!=="user"&&_!=="environment"?null:()=>{m.restartTrack({facingMode:_==="user"?"environment":"user"}).then(()=>{const y=m.mediaStreamTrack.getSettings().deviceId;y!==void 0&&this.mediaDevices.videoInput.select(y)}).catch(y=>U.error("Failed to switch camera",_,y))}}))),this.audioStreamStats$=ge([this.participant$,Pl.value$]).pipe(Ee(([m,_])=>!m||!_?Ce(void 0):JS(m,Ve.Source.Microphone))),this.videoStreamStats$=ge([this.participant$,Pl.value$]).pipe(Ee(([m,_])=>!m||!_?Ce(void 0):JS(m,Ve.Source.Camera)))}}class eve extends GO{constructor(t,n,r,i,o,s,a,c,l,u,d,p,g,v){super(t,n,r,i,o,s,a,c,u,d,p,g,v),this.pretendToBeDisconnected$=l,this.waitingForMedia$=this.scope.behavior(ge([this.livekitRoom$,this.participant$],(m,_)=>m!==void 0&&_===null)),this.locallyMutedToggle$=new Ht,this.localVolumeAdjustment$=new Ht,this.localVolumeCommit$=new Ht,this.localVolume$=this.scope.behavior(Vo(this.locallyMutedToggle$.pipe(V(()=>"toggle mute")),this.localVolumeAdjustment$,this.localVolumeCommit$.pipe(V(()=>"commit"))).pipe(oN({volume:1,committedVolume:1},(m,_)=>{switch(_){case"toggle mute":return{...m,volume:m.volume===0?m.committedVolume:0};case"commit":return{...m,committedVolume:m.volume===0?m.committedVolume:m.volume};default:return{...m,volume:_}}}),V(({volume:m})=>m))),this.locallyMuted$=this.scope.behavior(this.localVolume$.pipe(V(m=>m===0))),this.audioStreamStats$=ge([this.participant$,Pl.value$]).pipe(Ee(([m,_])=>!m||!_?Ce(void 0):A3(m,Ve.Source.Microphone))),this.videoStreamStats$=ge([this.participant$,Pl.value$]).pipe(Ee(([m,_])=>!m||!_?Ce(void 0):A3(m,Ve.Source.Camera))),this.__speaking$=this.scope.behavior(l.pipe(Ee(m=>m?Ce(!1):super.speaking$))),this.__videoEnabled$=this.scope.behavior(l.pipe(Ee(m=>m?Ce(!1):super.videoEnabled$))),ge([o,this.pretendToBeDisconnected$.pipe(Ee(m=>m?Ce(0):this.localVolume$),this.scope.bind())]).subscribe(([m,_])=>m?.setVolume(_))}get speaking$(){return this.__speaking$}get videoEnabled$(){return this.__videoEnabled$}toggleLocallyMuted(){this.locallyMutedToggle$.next()}setLocalVolume(t){this.localVolumeAdjustment$.next(t)}commitLocalVolume(){this.localVolumeCommit$.next()}}class Zc extends qO{constructor(t,n,r,i,o,s,a,c,l,u,d,p){super(t,n,r,i,o,s,Ve.Source.ScreenShareAudio,Ve.Source.ScreenShare,a,c,u,d),this.pretendToBeDisconnected$=l,this.local=p,this.videoEnabled$=this.scope.behavior(this.pretendToBeDisconnected$.pipe(V(g=>!g)))}}var Hw=rh(),Pe=e=>nh(e,Hw),Uw=rh();Pe.write=e=>nh(e,Uw);var Bm=rh();Pe.onStart=e=>nh(e,Bm);var Bw=rh();Pe.onFrame=e=>nh(e,Bw);var Vw=rh();Pe.onFinish=e=>nh(e,Vw);var gl=[];Pe.setTimeout=(e,t)=>{const n=Pe.now()+t,r=()=>{const o=gl.findIndex(s=>s.cancel==r);~o&&gl.splice(o,1),As-=~o?1:0},i={time:n,handler:e,cancel:r};return gl.splice(KO(n),0,i),As+=1,WO(),i};var KO=e=>~(~gl.findIndex(t=>t.time>e)||~gl.length);Pe.cancel=e=>{Bm.delete(e),Bw.delete(e),Vw.delete(e),Hw.delete(e),Uw.delete(e)};Pe.sync=e=>{P3=!0,Pe.batchedUpdates(e),P3=!1};Pe.throttle=e=>{let t;function n(){try{e(...t)}finally{t=null}}function r(...i){t=i,Pe.onStart(n)}return r.handler=e,r.cancel=()=>{Bm.delete(n),t=null},r};var qw=typeof window<"u"?window.requestAnimationFrame:(()=>{});Pe.use=e=>qw=e;Pe.now=typeof performance<"u"?()=>performance.now():Date.now;Pe.batchedUpdates=e=>e();Pe.catch=console.error;Pe.frameLoop="always";Pe.advance=()=>{Pe.frameLoop!=="demand"?console.warn("Cannot call the manual advancement of rafz whilst frameLoop is not set as demand"):YO()};var Ts=-1,As=0,P3=!1;function nh(e,t){P3?(t.delete(e),e(0)):(t.add(e),WO())}function WO(){Ts<0&&(Ts=0,Pe.frameLoop!=="demand"&&qw(zO))}function tve(){Ts=-1}function zO(){~Ts&&(qw(zO),Pe.batchedUpdates(YO))}function YO(){const e=Ts;Ts=Pe.now();const t=KO(Ts);if(t&&(XO(gl.splice(0,t),n=>n.handler()),As-=t),!As){tve();return}Bm.flush(),Hw.flush(e?Math.min(64,Ts-e):16.667),Bw.flush(),Uw.flush(),Vw.flush()}function rh(){let e=new Set,t=e;return{add(n){As+=t==e&&!e.has(n)?1:0,e.add(n)},delete(n){return As-=t==e&&e.has(n)?1:0,e.delete(n)},flush(n){t.size&&(e=new Set,As-=t.size,XO(t,r=>r(n)&&e.add(r)),As+=e.size,t=e)}}}function XO(e,t){e.forEach(n=>{try{t(n)}catch(r){Pe.catch(r)}})}var nve=Object.defineProperty,rve=(e,t)=>{for(var n in t)nve(e,n,{get:t[n],enumerable:!0})},Oi={};rve(Oi,{assign:()=>ove,colors:()=>Hs,createStringInterpolator:()=>Kw,skipAnimation:()=>QO,to:()=>ZO,willAdvance:()=>Ww});function M3(){}var ive=(e,t,n)=>Object.defineProperty(e,t,{value:n,writable:!0,configurable:!0}),Y={arr:Array.isArray,obj:e=>!!e&&e.constructor.name==="Object",fun:e=>typeof e=="function",str:e=>typeof e=="string",num:e=>typeof e=="number",und:e=>e===void 0};function ko(e,t){if(Y.arr(e)){if(!Y.arr(t)||e.length!==t.length)return!1;for(let n=0;n<e.length;n++)if(e[n]!==t[n])return!1;return!0}return e===t}var $e=(e,t)=>e.forEach(t);function co(e,t,n){if(Y.arr(e)){for(let r=0;r<e.length;r++)t.call(n,e[r],`${r}`);return}for(const r in e)e.hasOwnProperty(r)&&t.call(n,e[r],r)}var Un=e=>Y.und(e)?[]:Y.arr(e)?e:[e];function Id(e,t){if(e.size){const n=Array.from(e);e.clear(),$e(n,t)}}var rd=(e,...t)=>Id(e,n=>n(...t)),Gw=()=>typeof window>"u"||!window.navigator||/ServerSideRendering|^Deno\//.test(window.navigator.userAgent),Kw,ZO,Hs=null,QO=!1,Ww=M3,ove=e=>{e.to&&(ZO=e.to),e.now&&(Pe.now=e.now),e.colors!==void 0&&(Hs=e.colors),e.skipAnimation!=null&&(QO=e.skipAnimation),e.createStringInterpolator&&(Kw=e.createStringInterpolator),e.requestAnimationFrame&&Pe.use(e.requestAnimationFrame),e.batchedUpdates&&(Pe.batchedUpdates=e.batchedUpdates),e.willAdvance&&(Ww=e.willAdvance),e.frameLoop&&(Pe.frameLoop=e.frameLoop)},Rd=new Set,Yr=[],O2=[],eg=0,Vm={get idle(){return!Rd.size&&!Yr.length},start(e){eg>e.priority?(Rd.add(e),Pe.onStart(sve)):(JO(e),Pe(N3))},advance:N3,sort(e){if(eg)Pe.onFrame(()=>Vm.sort(e));else{const t=Yr.indexOf(e);~t&&(Yr.splice(t,1),ej(e))}},clear(){Yr=[],Rd.clear()}};function sve(){Rd.forEach(JO),Rd.clear(),Pe(N3)}function JO(e){Yr.includes(e)||ej(e)}function ej(e){Yr.splice(ave(Yr,t=>t.priority>e.priority),0,e)}function N3(e){const t=O2;for(let n=0;n<Yr.length;n++){const r=Yr[n];eg=r.priority,r.idle||(Ww(r),r.advance(e),r.idle||t.push(r))}return eg=0,O2=Yr,O2.length=0,Yr=t,Yr.length>0}function ave(e,t){const n=e.findIndex(t);return n<0?e.length:n}var cve={transparent:0,aliceblue:4042850303,antiquewhite:4209760255,aqua:16777215,aquamarine:2147472639,azure:4043309055,beige:4126530815,bisque:4293182719,black:255,blanchedalmond:4293643775,blue:65535,blueviolet:2318131967,brown:2771004159,burlywood:3736635391,burntsienna:3934150143,cadetblue:1604231423,chartreuse:2147418367,chocolate:3530104575,coral:4286533887,cornflowerblue:1687547391,cornsilk:4294499583,crimson:3692313855,cyan:16777215,darkblue:35839,darkcyan:9145343,darkgoldenrod:3095792639,darkgray:2846468607,darkgreen:6553855,darkgrey:2846468607,darkkhaki:3182914559,darkmagenta:2332068863,darkolivegreen:1433087999,darkorange:4287365375,darkorchid:2570243327,darkred:2332033279,darksalmon:3918953215,darkseagreen:2411499519,darkslateblue:1211993087,darkslategray:793726975,darkslategrey:793726975,darkturquoise:13554175,darkviolet:2483082239,deeppink:4279538687,deepskyblue:12582911,dimgray:1768516095,dimgrey:1768516095,dodgerblue:512819199,firebrick:2988581631,floralwhite:4294635775,forestgreen:579543807,fuchsia:4278255615,gainsboro:3705462015,ghostwhite:4177068031,gold:4292280575,goldenrod:3668254975,gray:2155905279,green:8388863,greenyellow:2919182335,grey:2155905279,honeydew:4043305215,hotpink:4285117695,indianred:3445382399,indigo:1258324735,ivory:4294963455,khaki:4041641215,lavender:3873897215,lavenderblush:4293981695,lawngreen:2096890111,lemonchiffon:4294626815,lightblue:2916673279,lightcoral:4034953471,lightcyan:3774873599,lightgoldenrodyellow:4210742015,lightgray:3553874943,lightgreen:2431553791,lightgrey:3553874943,lightpink:4290167295,lightsalmon:4288707327,lightseagreen:548580095,lightskyblue:2278488831,lightslategray:2005441023,lightslategrey:2005441023,lightsteelblue:2965692159,lightyellow:4294959359,lime:16711935,limegreen:852308735,linen:4210091775,magenta:4278255615,maroon:2147483903,mediumaquamarine:1724754687,mediumblue:52735,mediumorchid:3126187007,mediumpurple:2473647103,mediumseagreen:1018393087,mediumslateblue:2070474495,mediumspringgreen:16423679,mediumturquoise:1221709055,mediumvioletred:3340076543,midnightblue:421097727,mintcream:4127193855,mistyrose:4293190143,moccasin:4293178879,navajowhite:4292783615,navy:33023,oldlace:4260751103,olive:2155872511,olivedrab:1804477439,orange:4289003775,orangered:4282712319,orchid:3664828159,palegoldenrod:4008225535,palegreen:2566625535,paleturquoise:2951671551,palevioletred:3681588223,papayawhip:4293907967,peachpuff:4292524543,peru:3448061951,pink:4290825215,plum:3718307327,powderblue:2967529215,purple:2147516671,rebeccapurple:1714657791,red:4278190335,rosybrown:3163525119,royalblue:1097458175,saddlebrown:2336560127,salmon:4202722047,sandybrown:4104413439,seagreen:780883967,seashell:4294307583,sienna:2689740287,silver:3233857791,skyblue:2278484991,slateblue:1784335871,slategray:1887473919,slategrey:1887473919,snow:4294638335,springgreen:16744447,steelblue:1182971135,tan:3535047935,teal:8421631,thistle:3636451583,tomato:4284696575,turquoise:1088475391,violet:4001558271,wheat:4125012991,white:4294967295,whitesmoke:4126537215,yellow:4294902015,yellowgreen:2597139199},Ai="[-+]?\\d*\\.?\\d+",tg=Ai+"%";function qm(...e){return"\\(\\s*("+e.join(")\\s*,\\s*(")+")\\s*\\)"}var lve=new RegExp("rgb"+qm(Ai,Ai,Ai)),uve=new RegExp("rgba"+qm(Ai,Ai,Ai,Ai)),dve=new RegExp("hsl"+qm(Ai,tg,tg)),fve=new RegExp("hsla"+qm(Ai,tg,tg,Ai)),hve=/^#([0-9a-fA-F]{1})([0-9a-fA-F]{1})([0-9a-fA-F]{1})$/,pve=/^#([0-9a-fA-F]{1})([0-9a-fA-F]{1})([0-9a-fA-F]{1})([0-9a-fA-F]{1})$/,gve=/^#([0-9a-fA-F]{6})$/,mve=/^#([0-9a-fA-F]{8})$/;function vve(e){let t;return typeof e=="number"?e>>>0===e&&e>=0&&e<=4294967295?e:null:(t=gve.exec(e))?parseInt(t[1]+"ff",16)>>>0:Hs&&Hs[e]!==void 0?Hs[e]:(t=lve.exec(e))?(Oc(t[1])<<24|Oc(t[2])<<16|Oc(t[3])<<8|255)>>>0:(t=uve.exec(e))?(Oc(t[1])<<24|Oc(t[2])<<16|Oc(t[3])<<8|nC(t[4]))>>>0:(t=hve.exec(e))?parseInt(t[1]+t[1]+t[2]+t[2]+t[3]+t[3]+"ff",16)>>>0:(t=mve.exec(e))?parseInt(t[1],16)>>>0:(t=pve.exec(e))?parseInt(t[1]+t[1]+t[2]+t[2]+t[3]+t[3]+t[4]+t[4],16)>>>0:(t=dve.exec(e))?(eC(tC(t[1]),Qh(t[2]),Qh(t[3]))|255)>>>0:(t=fve.exec(e))?(eC(tC(t[1]),Qh(t[2]),Qh(t[3]))|nC(t[4]))>>>0:null}function j2(e,t,n){return n<0&&(n+=1),n>1&&(n-=1),n<1/6?e+(t-e)*6*n:n<1/2?t:n<2/3?e+(t-e)*(2/3-n)*6:e}function eC(e,t,n){const r=n<.5?n*(1+t):n+t-n*t,i=2*n-r,o=j2(i,r,e+1/3),s=j2(i,r,e),a=j2(i,r,e-1/3);return Math.round(o*255)<<24|Math.round(s*255)<<16|Math.round(a*255)<<8}function Oc(e){const t=parseInt(e,10);return t<0?0:t>255?255:t}function tC(e){return(parseFloat(e)%360+360)%360/360}function nC(e){const t=parseFloat(e);return t<0?0:t>1?255:Math.round(t*255)}function Qh(e){const t=parseFloat(e);return t<0?0:t>100?1:t/100}function rC(e){let t=vve(e);if(t===null)return e;t=t||0;const n=(t&4278190080)>>>24,r=(t&16711680)>>>16,i=(t&65280)>>>8,o=(t&255)/255;return`rgba(${n}, ${r}, ${i}, ${o})`}var uf=(e,t,n)=>{if(Y.fun(e))return e;if(Y.arr(e))return uf({range:e,output:t,extrapolate:n});if(Y.str(e.output[0]))return Kw(e);const r=e,i=r.output,o=r.range||[0,1],s=r.extrapolateLeft||r.extrapolate||"extend",a=r.extrapolateRight||r.extrapolate||"extend",c=r.easing||(l=>l);return l=>{const u=_ve(l,o);return yve(l,o[u],o[u+1],i[u],i[u+1],c,s,a,r.map)}};function yve(e,t,n,r,i,o,s,a,c){let l=c?c(e):e;if(l<t){if(s==="identity")return l;s==="clamp"&&(l=t)}if(l>n){if(a==="identity")return l;a==="clamp"&&(l=n)}return r===i?r:t===n?e<=t?r:i:(t===-1/0?l=-l:n===1/0?l=l-t:l=(l-t)/(n-t),l=o(l),r===-1/0?l=-l:i===1/0?l=l+r:l=l*(i-r)+r,l)}function _ve(e,t){for(var n=1;n<t.length-1&&!(t[n]>=e);++n);return n-1}var bve={linear:e=>e},df=Symbol.for("FluidValue.get"),ql=Symbol.for("FluidValue.observers"),Wr=e=>!!(e&&e[df]),er=e=>e&&e[df]?e[df]():e,iC=e=>e[ql]||null;function wve(e,t){e.eventObserved?e.eventObserved(t):e(t)}function ff(e,t){const n=e[ql];n&&n.forEach(r=>{wve(r,t)})}var tj=class{constructor(e){if(!e&&!(e=this.get))throw Error("Unknown getter");Sve(this,e)}},Sve=(e,t)=>nj(e,df,t);function bu(e,t){if(e[df]){let n=e[ql];n||nj(e,ql,n=new Set),n.has(t)||(n.add(t),e.observerAdded&&e.observerAdded(n.size,t))}return t}function hf(e,t){const n=e[ql];if(n&&n.has(t)){const r=n.size-1;r?n.delete(t):e[ql]=null,e.observerRemoved&&e.observerRemoved(r,t)}}var nj=(e,t,n)=>Object.defineProperty(e,t,{value:n,writable:!0,configurable:!0}),Up=/[+\-]?(?:0|[1-9]\d*)(?:\.\d*)?(?:[eE][+\-]?\d+)?/g,Cve=/(#(?:[0-9a-f]{2}){2,4}|(#[0-9a-f]{3})|(rgb|hsl)a?\((-?\d+%?[,\s]+){2,3}\s*[\d\.]+%?\))/gi,oC=new RegExp(`(${Up.source})(%|[a-z]+)`,"i"),Eve=/rgba\(([0-9\.-]+), ([0-9\.-]+), ([0-9\.-]+), ([0-9\.-]+)\)/gi,Gm=/var\((--[a-zA-Z0-9-_]+),? ?([a-zA-Z0-9 ()%#.,-]+)?\)/,rj=e=>{const[t,n]=xve(e);if(!t||Gw())return e;const r=window.getComputedStyle(document.documentElement).getPropertyValue(t);if(r)return r.trim();if(n&&n.startsWith("--")){const i=window.getComputedStyle(document.documentElement).getPropertyValue(n);return i||e}else{if(n&&Gm.test(n))return rj(n);if(n)return n}return e},xve=e=>{const t=Gm.exec(e);if(!t)return[,];const[,n,r]=t;return[n,r]},D2,Ive=(e,t,n,r,i)=>`rgba(${Math.round(t)}, ${Math.round(n)}, ${Math.round(r)}, ${i})`,ij=e=>{D2||(D2=Hs?new RegExp(`(${Object.keys(Hs).join("|")})(?!\\w)`,"g"):/^\b$/);const t=e.output.map(o=>er(o).replace(Gm,rj).replace(Cve,rC).replace(D2,rC)),n=t.map(o=>o.match(Up).map(Number)),i=n[0].map((o,s)=>n.map(a=>{if(!(s in a))throw Error('The arity of each "output" value must be equal');return a[s]})).map(o=>uf({...e,output:o}));return o=>{const s=!oC.test(t[0])&&t.find(c=>oC.test(c))?.replace(Up,"");let a=0;return t[0].replace(Up,()=>`${i[a++](o)}${s||""}`).replace(Eve,Ive)}},zw="react-spring: ",oj=e=>{const t=e;let n=!1;if(typeof t!="function")throw new TypeError(`${zw}once requires a function parameter`);return(...r)=>{n||(t(...r),n=!0)}},Rve=oj(console.warn);function Lve(){Rve(`${zw}The "interpolate" function is deprecated in v9 (use "to" instead)`)}var kve=oj(console.warn);function Tve(){kve(`${zw}Directly calling start instead of using the api object is deprecated in v9 (use ".start" instead), this will be removed in later 0.X.0 versions`)}function Km(e){return Y.str(e)&&(e[0]=="#"||/\d/.test(e)||!Gw()&&Gm.test(e)||e in(Hs||{}))}var Qc=Gw()?f.useEffect:f.useLayoutEffect,Ave=()=>{const e=f.useRef(!1);return Qc(()=>(e.current=!0,()=>{e.current=!1}),[]),e};function sj(){const e=f.useState()[1],t=Ave();return()=>{t.current&&e(Math.random())}}var aj=e=>f.useEffect(e,Pve),Pve=[];function Mve(e){const t=f.useRef(void 0);return f.useEffect(()=>{t.current=e}),t.current}var pf=Symbol.for("Animated:node"),Nve=e=>!!e&&e[pf]===e,Zi=e=>e&&e[pf],Yw=(e,t)=>ive(e,pf,t),Wm=e=>e&&e[pf]&&e[pf].getPayload(),cj=class{constructor(){Yw(this,this)}getPayload(){return this.payload||[]}},zm=class lj extends cj{constructor(t){super(),this._value=t,this.done=!0,this.durationProgress=0,Y.num(this._value)&&(this.lastPosition=this._value)}static create(t){return new lj(t)}getPayload(){return[this]}getValue(){return this._value}setValue(t,n){return Y.num(t)&&(this.lastPosition=t,n&&(t=Math.round(t/n)*n,this.done&&(this.lastPosition=t))),this._value===t?!1:(this._value=t,!0)}reset(){const{done:t}=this;this.done=!1,Y.num(this._value)&&(this.elapsedTime=0,this.durationProgress=0,this.lastPosition=this._value,t&&(this.lastVelocity=null),this.v0=null)}},ng=class uj extends zm{constructor(t){super(0),this._string=null,this._toString=uf({output:[t,t]})}static create(t){return new uj(t)}getValue(){const t=this._string;return t??(this._string=this._toString(this._value))}setValue(t){if(Y.str(t)){if(t==this._string)return!1;this._string=t,this._value=1}else if(super.setValue(t))this._string=null;else return!1;return!0}reset(t){t&&(this._toString=uf({output:[this.getValue(),t]})),this._value=0,super.reset()}},rg={dependencies:null},Ym=class extends cj{constructor(e){super(),this.source=e,this.setValue(e)}getValue(e){const t={};return co(this.source,(n,r)=>{Nve(n)?t[r]=n.getValue(e):Wr(n)?t[r]=er(n):e||(t[r]=n)}),t}setValue(e){this.source=e,this.payload=this._makePayload(e)}reset(){this.payload&&$e(this.payload,e=>e.reset())}_makePayload(e){if(e){const t=new Set;return co(e,this._addToPayload,t),Array.from(t)}}_addToPayload(e){rg.dependencies&&Wr(e)&&rg.dependencies.add(e);const t=Wm(e);t&&$e(t,n=>this.add(n))}},$ve=class dj extends Ym{constructor(t){super(t)}static create(t){return new dj(t)}getValue(){return this.source.map(t=>t.getValue())}setValue(t){const n=this.getPayload();return t.length==n.length?n.map((r,i)=>r.setValue(t[i])).some(Boolean):(super.setValue(t.map(Ove)),!0)}};function Ove(e){return(Km(e)?ng:zm).create(e)}function $3(e){const t=Zi(e);return t?t.constructor:Y.arr(e)?$ve:Km(e)?ng:zm}var sC=(e,t)=>{const n=!Y.fun(e)||e.prototype&&e.prototype.isReactComponent;return f.forwardRef((r,i)=>{const o=f.useRef(null),s=n&&f.useCallback(v=>{o.current=Fve(i,v)},[i]),[a,c]=Dve(r,t),l=sj(),u=()=>{const v=o.current;if(n&&!v)return;(v?t.applyAnimatedValues(v,a.getValue(!0)):!1)===!1&&l()},d=new jve(u,c),p=f.useRef(void 0);Qc(()=>(p.current=d,$e(c,v=>bu(v,d)),()=>{p.current&&($e(p.current.deps,v=>hf(v,p.current)),Pe.cancel(p.current.update))})),f.useEffect(u,[]),aj(()=>()=>{const v=p.current;$e(v.deps,m=>hf(m,v))});const g=t.getComponentProps(a.getValue());return f.createElement(e,{...g,ref:s})})},jve=class{constructor(e,t){this.update=e,this.deps=t}eventObserved(e){e.type=="change"&&Pe.write(this.update)}};function Dve(e,t){const n=new Set;return rg.dependencies=n,e.style&&(e={...e,style:t.createAnimatedStyle(e.style)}),e=new Ym(e),rg.dependencies=null,[e,n]}function Fve(e,t){return e&&(Y.fun(e)?e(t):e.current=t),t}var aC=Symbol.for("AnimatedComponent"),Hve=(e,{applyAnimatedValues:t=()=>!1,createAnimatedStyle:n=i=>new Ym(i),getComponentProps:r=i=>i}={})=>{const i={applyAnimatedValues:t,createAnimatedStyle:n,getComponentProps:r},o=s=>{const a=cC(s)||"Anonymous";return Y.str(s)?s=o[s]||(o[s]=sC(s,i)):s=s[aC]||(s[aC]=sC(s,i)),s.displayName=`Animated(${a})`,s};return co(e,(s,a)=>{Y.arr(e)&&(a=cC(s)),o[a]=o(s)}),{animated:o}},cC=e=>Y.str(e)?e:e&&Y.str(e.displayName)?e.displayName:Y.fun(e)&&e.name||null;function tr(e,...t){return Y.fun(e)?e(...t):e}var Ld=(e,t)=>e===!0||!!(t&&e&&(Y.fun(e)?e(t):Un(e).includes(t))),fj=(e,t)=>Y.obj(e)?t&&e[t]:e,hj=(e,t)=>e.default===!0?e[t]:e.default?e.default[t]:void 0,Uve=e=>e,Xw=(e,t=Uve)=>{let n=Bve;e.default&&e.default!==!0&&(e=e.default,n=Object.keys(e));const r={};for(const i of n){const o=t(e[i],i);Y.und(o)||(r[i]=o)}return r},Bve=["config","onProps","onStart","onChange","onPause","onResume","onRest"],Vve={config:1,from:1,to:1,ref:1,loop:1,reset:1,pause:1,cancel:1,reverse:1,immediate:1,default:1,delay:1,onProps:1,onStart:1,onChange:1,onPause:1,onResume:1,onRest:1,onResolve:1,items:1,trail:1,sort:1,expires:1,initial:1,enter:1,update:1,leave:1,children:1,onDestroyed:1,keys:1,callId:1,parentId:1};function qve(e){const t={};let n=0;if(co(e,(r,i)=>{Vve[i]||(t[i]=r,n++)}),n)return t}function Zw(e){const t=qve(e);if(t){const n={to:t};return co(e,(r,i)=>i in t||(n[i]=r)),n}return{...e}}function gf(e){return e=er(e),Y.arr(e)?e.map(gf):Km(e)?Oi.createStringInterpolator({range:[0,1],output:[e,e]})(1):e}function Gve(e){for(const t in e)return!0;return!1}function O3(e){return Y.fun(e)||Y.arr(e)&&Y.obj(e[0])}function lC(e,t){e.ref?.delete(e),t?.delete(e)}function Kve(e,t){t&&e.ref!==t&&(e.ref?.delete(e),t.add(e),e.ref=t)}var Wve={default:{tension:170,friction:26}},j3={...Wve.default,mass:1,damping:1,easing:bve.linear,clamp:!1},zve=class{constructor(){this.velocity=0,Object.assign(this,j3)}};function Yve(e,t,n){n&&(n={...n},uC(n,t),t={...n,...t}),uC(e,t),Object.assign(e,t);for(const s in j3)e[s]==null&&(e[s]=j3[s]);let{frequency:r,damping:i}=e;const{mass:o}=e;return Y.und(r)||(r<.01&&(r=.01),i<0&&(i=0),e.tension=Math.pow(2*Math.PI/r,2)*o,e.friction=4*Math.PI*i*o/r),e}function uC(e,t){if(!Y.und(t.decay))e.duration=void 0;else{const n=!Y.und(t.tension)||!Y.und(t.friction);(n||!Y.und(t.frequency)||!Y.und(t.damping)||!Y.und(t.mass))&&(e.duration=void 0,e.decay=void 0),n&&(e.frequency=void 0)}}var dC=[],Xve=class{constructor(){this.changed=!1,this.values=dC,this.toValues=null,this.fromValues=dC,this.config=new zve,this.immediate=!1}};function pj(e,{key:t,props:n,defaultProps:r,state:i,actions:o}){return new Promise((s,a)=>{let c,l,u=Ld(n.cancel??r?.cancel,t);if(u)g();else{Y.und(n.pause)||(i.paused=Ld(n.pause,t));let v=r?.pause;v!==!0&&(v=i.paused||Ld(v,t)),c=tr(n.delay||0,t),v?(i.resumeQueue.add(p),o.pause()):(o.resume(),p())}function d(){i.resumeQueue.add(p),i.timeouts.delete(l),l.cancel(),c=l.time-Pe.now()}function p(){c>0&&!Oi.skipAnimation?(i.delayed=!0,l=Pe.setTimeout(g,c),i.pauseQueue.add(d),i.timeouts.add(l)):g()}function g(){i.delayed&&(i.delayed=!1),i.pauseQueue.delete(d),i.timeouts.delete(l),e<=(i.cancelId||0)&&(u=!0);try{o.start({...n,callId:e,cancel:u},s)}catch(v){a(v)}}})}var Qw=(e,t)=>t.length==1?t[0]:t.some(n=>n.cancelled)?ml(e.get()):t.every(n=>n.noop)?gj(e.get()):Ri(e.get(),t.every(n=>n.finished)),gj=e=>({value:e,noop:!0,finished:!0,cancelled:!1}),Ri=(e,t,n=!1)=>({value:e,finished:t,cancelled:n}),ml=e=>({value:e,cancelled:!0,finished:!1});function mj(e,t,n,r){const{callId:i,parentId:o,onRest:s}=t,{asyncTo:a,promise:c}=n;return!o&&e===a&&!t.reset?c:n.promise=(async()=>{n.asyncId=i,n.asyncTo=e;const l=Xw(t,(_,y)=>y==="onRest"?void 0:_);let u,d;const p=new Promise((_,y)=>(u=_,d=y)),g=_=>{const y=i<=(n.cancelId||0)&&ml(r)||i!==n.asyncId&&Ri(r,!1);if(y)throw _.result=y,d(_),_},v=(_,y)=>{const w=new fC,S=new hC;return(async()=>{if(Oi.skipAnimation)throw mf(n),S.result=Ri(r,!1),d(S),S;g(w);const b=Y.obj(_)?{..._}:{...y,to:_};b.parentId=i,co(l,(E,x)=>{Y.und(b[x])&&(b[x]=E)});const C=await r.start(b);return g(w),n.paused&&await new Promise(E=>{n.resumeQueue.add(E)}),C})()};let m;if(Oi.skipAnimation)return mf(n),Ri(r,!1);try{let _;Y.arr(e)?_=(async y=>{for(const w of y)await v(w)})(e):_=Promise.resolve(e(v,r.stop.bind(r))),await Promise.all([_.then(u),p]),m=Ri(r.get(),!0,!1)}catch(_){if(_ instanceof fC)m=_.result;else if(_ instanceof hC)m=_.result;else throw _}finally{i==n.asyncId&&(n.asyncId=o,n.asyncTo=o?a:void 0,n.promise=o?c:void 0)}return Y.fun(s)&&Pe.batchedUpdates(()=>{s(m,r,r.item)}),m})()}function mf(e,t){Id(e.timeouts,n=>n.cancel()),e.pauseQueue.clear(),e.resumeQueue.clear(),e.asyncId=e.asyncTo=e.promise=void 0,t&&(e.cancelId=t)}var fC=class extends Error{constructor(){super("An async animation has been interrupted. You see this error because you forgot to use `await` or `.catch(...)` on its returned promise.")}},hC=class extends Error{constructor(){super("SkipAnimationSignal")}},D3=e=>e instanceof Jw,Zve=1,Jw=class extends tj{constructor(){super(...arguments),this.id=Zve++,this._priority=0}get priority(){return this._priority}set priority(e){this._priority!=e&&(this._priority=e,this._onPriorityChange(e))}get(){const e=Zi(this);return e&&e.getValue()}to(...e){return Oi.to(this,e)}interpolate(...e){return Lve(),Oi.to(this,e)}toJSON(){return this.get()}observerAdded(e){e==1&&this._attach()}observerRemoved(e){e==0&&this._detach()}_attach(){}_detach(){}_onChange(e,t=!1){ff(this,{type:"change",parent:this,value:e,idle:t})}_onPriorityChange(e){this.idle||Vm.sort(this),ff(this,{type:"priority",parent:this,priority:e})}},Ka=Symbol.for("SpringPhase"),vj=1,F3=2,H3=4,F2=e=>(e[Ka]&vj)>0,ms=e=>(e[Ka]&F3)>0,qu=e=>(e[Ka]&H3)>0,pC=(e,t)=>t?e[Ka]|=F3|vj:e[Ka]&=~F3,gC=(e,t)=>t?e[Ka]|=H3:e[Ka]&=~H3,Qve=class extends Jw{constructor(e,t){if(super(),this.animation=new Xve,this.defaultProps={},this._state={paused:!1,delayed:!1,pauseQueue:new Set,resumeQueue:new Set,timeouts:new Set},this._pendingCalls=new Set,this._lastCallId=0,this._lastToId=0,this._memoizedDuration=0,!Y.und(e)||!Y.und(t)){const n=Y.obj(e)?{...e}:{...t,from:e};Y.und(n.default)&&(n.default=!0),this.start(n)}}get idle(){return!(ms(this)||this._state.asyncTo)||qu(this)}get goal(){return er(this.animation.to)}get velocity(){const e=Zi(this);return e instanceof zm?e.lastVelocity||0:e.getPayload().map(t=>t.lastVelocity||0)}get hasAnimated(){return F2(this)}get isAnimating(){return ms(this)}get isPaused(){return qu(this)}get isDelayed(){return this._state.delayed}advance(e){let t=!0,n=!1;const r=this.animation;let{toValues:i}=r;const{config:o}=r,s=Wm(r.to);!s&&Wr(r.to)&&(i=Un(er(r.to))),r.values.forEach((l,u)=>{if(l.done)return;const d=l.constructor==ng?1:s?s[u].lastPosition:i[u];let p=r.immediate,g=d;if(!p){if(g=l.lastPosition,o.tension<=0){l.done=!0;return}let v=l.elapsedTime+=e;const m=r.fromValues[u],_=l.v0!=null?l.v0:l.v0=Y.arr(o.velocity)?o.velocity[u]:o.velocity;let y;const w=o.precision||(m==d?.005:Math.min(1,Math.abs(d-m)*.001));if(Y.und(o.duration))if(o.decay){const S=o.decay===!0?.998:o.decay,b=Math.exp(-(1-S)*v);g=m+_/(1-S)*(1-b),p=Math.abs(l.lastPosition-g)<=w,y=_*b}else{y=l.lastVelocity==null?_:l.lastVelocity;const S=o.restVelocity||w/10,b=o.clamp?0:o.bounce,C=!Y.und(b),E=m==d?l.v0>0:m<d;let x,I=!1;const L=1,R=Math.ceil(e/L);for(let k=0;k<R&&(x=Math.abs(y)>S,!(!x&&(p=Math.abs(d-g)<=w,p)));++k){C&&(I=g==d||g>d==E,I&&(y=-y*b,g=d));const A=-o.tension*1e-6*(g-d),P=-o.friction*.001*y,O=(A+P)/o.mass;y=y+O*L,g=g+y*L}}else{let S=1;o.duration>0&&(this._memoizedDuration!==o.duration&&(this._memoizedDuration=o.duration,l.durationProgress>0&&(l.elapsedTime=o.duration*l.durationProgress,v=l.elapsedTime+=e)),S=(o.progress||0)+v/this._memoizedDuration,S=S>1?1:S<0?0:S,l.durationProgress=S),g=m+o.easing(S)*(d-m),y=(g-l.lastPosition)/e,p=S==1}l.lastVelocity=y,Number.isNaN(g)&&(console.warn("Got NaN while animating:",this),p=!0)}s&&!s[u].done&&(p=!1),p?l.done=!0:t=!1,l.setValue(g,o.round)&&(n=!0)});const a=Zi(this),c=a.getValue();if(t){const l=er(r.to);(c!==l||n)&&!o.decay?(a.setValue(l),this._onChange(l)):n&&o.decay&&this._onChange(c),this._stop()}else n&&this._onChange(c)}set(e){return Pe.batchedUpdates(()=>{this._stop(),this._focus(e),this._set(e)}),this}pause(){this._update({pause:!0})}resume(){this._update({pause:!1})}finish(){if(ms(this)){const{to:e,config:t}=this.animation;Pe.batchedUpdates(()=>{this._onStart(),t.decay||this._set(e,!1),this._stop()})}return this}update(e){return(this.queue||(this.queue=[])).push(e),this}start(e,t){let n;return Y.und(e)?(n=this.queue||[],this.queue=[]):n=[Y.obj(e)?e:{...t,to:e}],Promise.all(n.map(r=>this._update(r))).then(r=>Qw(this,r))}stop(e){const{to:t}=this.animation;return this._focus(this.get()),mf(this._state,e&&this._lastCallId),Pe.batchedUpdates(()=>this._stop(t,e)),this}reset(){this._update({reset:!0})}eventObserved(e){e.type=="change"?this._start():e.type=="priority"&&(this.priority=e.priority+1)}_prepareNode(e){const t=this.key||"";let{to:n,from:r}=e;n=Y.obj(n)?n[t]:n,(n==null||O3(n))&&(n=void 0),r=Y.obj(r)?r[t]:r,r==null&&(r=void 0);const i={to:n,from:r};return F2(this)||(e.reverse&&([n,r]=[r,n]),r=er(r),Y.und(r)?Zi(this)||this._set(n):this._set(r)),i}_update({...e},t){const{key:n,defaultProps:r}=this;e.default&&Object.assign(r,Xw(e,(s,a)=>/^on/.test(a)?fj(s,n):s)),vC(this,e,"onProps"),Ku(this,"onProps",e,this);const i=this._prepareNode(e);if(Object.isFrozen(this))throw Error("Cannot animate a `SpringValue` object that is frozen. Did you forget to pass your component to `animated(...)` before animating its props?");const o=this._state;return pj(++this._lastCallId,{key:n,props:e,defaultProps:r,state:o,actions:{pause:()=>{qu(this)||(gC(this,!0),rd(o.pauseQueue),Ku(this,"onPause",Ri(this,Gu(this,this.animation.to)),this))},resume:()=>{qu(this)&&(gC(this,!1),ms(this)&&this._resume(),rd(o.resumeQueue),Ku(this,"onResume",Ri(this,Gu(this,this.animation.to)),this))},start:this._merge.bind(this,i)}}).then(s=>{if(e.loop&&s.finished&&!(t&&s.noop)){const a=yj(e);if(a)return this._update(a,!0)}return s})}_merge(e,t,n){if(t.cancel)return this.stop(!0),n(ml(this));const r=!Y.und(e.to),i=!Y.und(e.from);if(r||i)if(t.callId>this._lastToId)this._lastToId=t.callId;else return n(ml(this));const{key:o,defaultProps:s,animation:a}=this,{to:c,from:l}=a;let{to:u=c,from:d=l}=e;i&&!r&&(!t.default||Y.und(u))&&(u=d),t.reverse&&([u,d]=[d,u]);const p=!ko(d,l);p&&(a.from=d),d=er(d);const g=!ko(u,c);g&&this._focus(u);const v=O3(t.to),{config:m}=a,{decay:_,velocity:y}=m;(r||i)&&(m.velocity=0),t.config&&!v&&Yve(m,tr(t.config,o),t.config!==s.config?tr(s.config,o):void 0);let w=Zi(this);if(!w||Y.und(u))return n(Ri(this,!0));const S=Y.und(t.reset)?i&&!t.default:!Y.und(d)&&Ld(t.reset,o),b=S?d:this.get(),C=gf(u),E=Y.num(C)||Y.arr(C)||Km(C),x=!v&&(!E||Ld(s.immediate||t.immediate,o));if(g){const k=$3(u);if(k!==w.constructor)if(x)w=this._set(C);else throw Error(`Cannot animate between ${w.constructor.name} and ${k.name}, as the "to" prop suggests`)}const I=w.constructor;let L=Wr(u),R=!1;if(!L){const k=S||!F2(this)&&p;(g||k)&&(R=ko(gf(b),C),L=!R),(!ko(a.immediate,x)&&!x||!ko(m.decay,_)||!ko(m.velocity,y))&&(L=!0)}if(R&&ms(this)&&(a.changed&&!S?L=!0:L||this._stop(c)),!v&&((L||Wr(c))&&(a.values=w.getPayload(),a.toValues=Wr(u)?null:I==ng?[1]:Un(C)),a.immediate!=x&&(a.immediate=x,!x&&!S&&this._set(c)),L)){const{onRest:k}=a;$e(Jve,P=>vC(this,t,P));const A=Ri(this,Gu(this,c));rd(this._pendingCalls,A),this._pendingCalls.add(n),a.changed&&Pe.batchedUpdates(()=>{a.changed=!S,k?.(A,this),S?tr(s.onRest,A):a.onStart?.(A,this)})}S&&this._set(b),v?n(mj(t.to,t,this._state,this)):L?this._start():ms(this)&&!g?this._pendingCalls.add(n):n(gj(b))}_focus(e){const t=this.animation;e!==t.to&&(iC(this)&&this._detach(),t.to=e,iC(this)&&this._attach())}_attach(){let e=0;const{to:t}=this.animation;Wr(t)&&(bu(t,this),D3(t)&&(e=t.priority+1)),this.priority=e}_detach(){const{to:e}=this.animation;Wr(e)&&hf(e,this)}_set(e,t=!0){const n=er(e);if(!Y.und(n)){const r=Zi(this);if(!r||!ko(n,r.getValue())){const i=$3(n);!r||r.constructor!=i?Yw(this,i.create(n)):r.setValue(n),r&&Pe.batchedUpdates(()=>{this._onChange(n,t)})}}return Zi(this)}_onStart(){const e=this.animation;e.changed||(e.changed=!0,Ku(this,"onStart",Ri(this,Gu(this,e.to)),this))}_onChange(e,t){t||(this._onStart(),tr(this.animation.onChange,e,this)),tr(this.defaultProps.onChange,e,this),super._onChange(e,t)}_start(){const e=this.animation;Zi(this).reset(er(e.to)),e.immediate||(e.fromValues=e.values.map(t=>t.lastPosition)),ms(this)||(pC(this,!0),qu(this)||this._resume())}_resume(){Oi.skipAnimation?this.finish():Vm.start(this)}_stop(e,t){if(ms(this)){pC(this,!1);const n=this.animation;$e(n.values,i=>{i.done=!0}),n.toValues&&(n.onChange=n.onPause=n.onResume=void 0),ff(this,{type:"idle",parent:this});const r=t?ml(this.get()):Ri(this.get(),Gu(this,e??n.to));rd(this._pendingCalls,r),n.changed&&(n.changed=!1,Ku(this,"onRest",r,this))}}};function Gu(e,t){const n=gf(t),r=gf(e.get());return ko(r,n)}function yj(e,t=e.loop,n=e.to){const r=tr(t);if(r){const i=r!==!0&&Zw(r),o=(i||e).reverse,s=!i||i.reset;return ig({...e,loop:t,default:!1,pause:void 0,to:!o||O3(n)?n:void 0,from:s?e.from:void 0,reset:s,...i})}}function ig(e){const{to:t,from:n}=e=Zw(e),r=new Set;return Y.obj(t)&&mC(t,r),Y.obj(n)&&mC(n,r),e.keys=r.size?Array.from(r):null,e}function mC(e,t){co(e,(n,r)=>n!=null&&t.add(r))}var Jve=["onStart","onRest","onChange","onPause","onResume"];function vC(e,t,n){e.animation[n]=t[n]!==hj(t,n)?fj(t[n],e.key):void 0}function Ku(e,t,...n){e.animation[t]?.(...n),e.defaultProps[t]?.(...n)}var eye=["onStart","onChange","onRest"],tye=1,nye=class{constructor(t,n){this.id=tye++,this.springs={},this.queue=[],this._lastAsyncId=0,this._active=new Set,this._changed=new Set,this._started=!1,this._state={paused:!1,pauseQueue:new Set,resumeQueue:new Set,timeouts:new Set},this._events={onStart:new Map,onChange:new Map,onRest:new Map},this._onFrame=this._onFrame.bind(this),n&&(this._flush=n),t&&this.start({default:!0,...t})}get idle(){return!this._state.asyncTo&&Object.values(this.springs).every(t=>t.idle&&!t.isDelayed&&!t.isPaused)}get item(){return this._item}set item(t){this._item=t}get(){const t={};return this.each((n,r)=>t[r]=n.get()),t}set(t){for(const n in t){const r=t[n];Y.und(r)||this.springs[n].set(r)}}update(t){return t&&this.queue.push(ig(t)),this}start(t){let{queue:n}=this;return t?n=Un(t).map(ig):this.queue=[],this._flush?this._flush(this,n):(Sj(this,n),rye(this,n))}stop(t,n){if(t!==!!t&&(n=t),n){const r=this.springs;$e(Un(n),i=>r[i].stop(!!t))}else mf(this._state,this._lastAsyncId),this.each(r=>r.stop(!!t));return this}pause(t){if(Y.und(t))this.start({pause:!0});else{const n=this.springs;$e(Un(t),r=>n[r].pause())}return this}resume(t){if(Y.und(t))this.start({pause:!1});else{const n=this.springs;$e(Un(t),r=>n[r].resume())}return this}each(t){co(this.springs,t)}_onFrame(){const{onStart:t,onChange:n,onRest:r}=this._events,i=this._active.size>0,o=this._changed.size>0;(i&&!this._started||o&&!this._started)&&(this._started=!0,Id(t,([c,l])=>{l.value=this.get(),c(l,this,this._item)}));const s=!i&&this._started,a=o||s&&r.size?this.get():null;o&&n.size&&Id(n,([c,l])=>{l.value=a,c(l,this,this._item)}),s&&(this._started=!1,Id(r,([c,l])=>{l.value=a,c(l,this,this._item)}))}eventObserved(t){if(t.type=="change")this._changed.add(t.parent),t.idle||this._active.add(t.parent);else if(t.type=="idle")this._active.delete(t.parent);else return;Pe.onFrame(this._onFrame)}};function rye(e,t){return Promise.all(t.map(n=>_j(e,n))).then(n=>Qw(e,n))}async function _j(e,t,n){const{keys:r,to:i,from:o,loop:s,onRest:a,onResolve:c}=t,l=Y.obj(t.default)&&t.default;s&&(t.loop=!1),i===!1&&(t.to=null),o===!1&&(t.from=null);const u=Y.arr(i)||Y.fun(i)?i:void 0;u?(t.to=void 0,t.onRest=void 0,l&&(l.onRest=void 0)):$e(eye,m=>{const _=t[m];if(Y.fun(_)){const y=e._events[m];t[m]=({finished:w,cancelled:S})=>{const b=y.get(_);b?(w||(b.finished=!1),S&&(b.cancelled=!0)):y.set(_,{value:null,finished:w||!1,cancelled:S||!1})},l&&(l[m]=t[m])}});const d=e._state;t.pause===!d.paused?(d.paused=t.pause,rd(t.pause?d.pauseQueue:d.resumeQueue)):d.paused&&(t.pause=!0);const p=(r||Object.keys(e.springs)).map(m=>e.springs[m].start(t)),g=t.cancel===!0||hj(t,"cancel")===!0;(u||g&&d.asyncId)&&p.push(pj(++e._lastAsyncId,{props:t,state:d,actions:{pause:M3,resume:M3,start(m,_){g?(mf(d,e._lastAsyncId),_(ml(e))):(m.onRest=a,_(mj(u,m,d,e)))}}})),d.paused&&await new Promise(m=>{d.resumeQueue.add(m)});const v=Qw(e,await Promise.all(p));if(s&&v.finished&&!(n&&v.noop)){const m=yj(t,s,i);if(m)return Sj(e,[m]),_j(e,m,!0)}return c&&Pe.batchedUpdates(()=>c(v,e,e.item)),v}function iye(e,t){const n={...e.springs};return t&&$e(Un(t),r=>{Y.und(r.keys)&&(r=ig(r)),Y.obj(r.to)||(r={...r,to:void 0}),wj(n,r,i=>bj(i))}),oye(e,n),n}function oye(e,t){co(t,(n,r)=>{e.springs[r]||(e.springs[r]=n,bu(n,e))})}function bj(e,t){const n=new Qve;return n.key=e,t&&bu(n,t),n}function wj(e,t,n){t.keys&&$e(t.keys,r=>{(e[r]||(e[r]=n(r)))._prepareNode(t)})}function Sj(e,t){$e(t,n=>{wj(e.springs,n,r=>bj(r,e))})}var sye=f.createContext({pause:!1,immediate:!1}),aye=()=>{const e=[],t=function(r){Tve();const i=[];return $e(e,(o,s)=>{if(Y.und(r))i.push(o.start());else{const a=n(r,o,s);a&&i.push(o.start(a))}}),i};t.current=e,t.add=function(r){e.includes(r)||e.push(r)},t.delete=function(r){const i=e.indexOf(r);~i&&e.splice(i,1)},t.pause=function(){return $e(e,r=>r.pause(...arguments)),this},t.resume=function(){return $e(e,r=>r.resume(...arguments)),this},t.set=function(r){$e(e,(i,o)=>{const s=Y.fun(r)?r(o,i):r;s&&i.set(s)})},t.start=function(r){const i=[];return $e(e,(o,s)=>{if(Y.und(r))i.push(o.start());else{const a=this._getProps(r,o,s);a&&i.push(o.start(a))}}),i},t.stop=function(){return $e(e,r=>r.stop(...arguments)),this},t.update=function(r){return $e(e,(i,o)=>i.update(this._getProps(r,i,o))),this};const n=function(r,i,o){return Y.fun(r)?r(o,i):r};return t._getProps=n,t};function cye(e,t,n){const r=Y.fun(t)&&t,{reset:i,sort:o,trail:s=0,expires:a=!0,exitBeforeEnter:c=!1,onDestroyed:l,ref:u,config:d}=r?r():t,p=f.useMemo(()=>r||arguments.length==3?aye():void 0,[]),g=Un(e),v=[],m=f.useRef(null),_=i?null:m.current;Qc(()=>{m.current=v}),aj(()=>($e(v,O=>{p?.add(O.ctrl),O.ctrl.ref=p}),()=>{$e(m.current,O=>{O.expired&&clearTimeout(O.expirationId),lC(O.ctrl,p),O.ctrl.stop(!0)})}));const y=uye(g,r?r():t,_),w=i&&m.current||[];Qc(()=>$e(w,({ctrl:O,item:j,key:$})=>{lC(O,p),tr(l,j,$)}));const S=[];if(_&&$e(_,(O,j)=>{O.expired?(clearTimeout(O.expirationId),w.push(O)):(j=S[j]=y.indexOf(O.key),~j&&(v[j]=O))}),$e(g,(O,j)=>{v[j]||(v[j]={key:y[j],item:O,phase:"mount",ctrl:new nye},v[j].ctrl.item=O)}),S.length){let O=-1;const{leave:j}=r?r():t;$e(S,($,T)=>{const N=_[T];~$?(O=v.indexOf(N),v[O]={...N,item:g[$]}):j&&v.splice(++O,0,N)})}Y.fun(o)&&v.sort((O,j)=>o(O.item,j.item));let b=-s;const C=sj(),E=Xw(t),x=new Map,I=f.useRef(new Map),L=f.useRef(!1);$e(v,(O,j)=>{const $=O.key,T=O.phase,N=r?r():t;let M,B;const F=tr(N.delay||0,$);if(T=="mount")M=N.enter,B="enter";else{const pe=y.indexOf($)<0;if(T!="leave")if(pe)M=N.leave,B="leave";else if(M=N.update)B="update";else return;else if(!pe)M=N.enter,B="enter";else return}if(M=tr(M,O.item,j),M=Y.obj(M)?Zw(M):{to:M},!M.config){const pe=d||E.config;M.config=tr(pe,O.item,j,B)}b+=s;const K={...E,delay:F+b,ref:u,immediate:N.immediate,reset:!1,...M};if(B=="enter"&&Y.und(K.from)){const pe=r?r():t,ne=Y.und(pe.initial)||_?pe.from:pe.initial;K.from=tr(ne,O.item,j)}const{onResolve:te}=K;K.onResolve=pe=>{tr(te,pe);const ne=m.current,z=ne.find(re=>re.key===$);if(z&&!(pe.cancelled&&z.phase!="update")&&z.ctrl.idle){const re=ne.every(Re=>Re.ctrl.idle);if(z.phase=="leave"){const Re=tr(a,z.item);if(Re!==!1){const Le=Re===!0?0:Re;if(z.expired=!0,!re&&Le>0){Le<=2147483647&&(z.expirationId=setTimeout(C,Le));return}}}re&&ne.some(Re=>Re.expired)&&(I.current.delete(z),c&&(L.current=!0),C())}};const oe=iye(O.ctrl,K);B==="leave"&&c?I.current.set(O,{phase:B,springs:oe,payload:K}):x.set(O,{phase:B,springs:oe,payload:K})});const R=f.useContext(sye),k=Mve(R),A=R!==k&&Gve(R);Qc(()=>{A&&$e(v,O=>{O.ctrl.start({default:R})})},[R]),$e(x,(O,j)=>{if(I.current.size){const $=v.findIndex(T=>T.key===j.key);v.splice($,1)}}),Qc(()=>{$e(I.current.size?I.current:x,({phase:O,payload:j},$)=>{const{ctrl:T}=$;$.phase=O,p?.add(T),A&&O=="enter"&&T.start({default:R}),j&&(Kve(T,j.ref),(T.ref||p)&&!L.current?T.update(j):(T.start(j),L.current&&(L.current=!1)))})},i?void 0:n);const P=O=>f.createElement(f.Fragment,null,v.map((j,$)=>{const{springs:T}=x.get(j)||j.ctrl,N=O({...T},j.item,j,$),M=Y.str(j.key)||Y.num(j.key)?j.key:j.ctrl.id,B=f.version<"19.0.0",F=N?.props??{},K=B?N?.ref:F?.ref;return N&&N.type?f.createElement(N.type,{...F,key:M,ref:K}):N}));return p?[P,p]:P}var lye=1;function uye(e,{key:t,keys:n=t},r){if(n===null){const i=new Set;return e.map(o=>{const s=r&&r.find(a=>a.item===o&&a.phase!=="leave"&&!i.has(a));return s?(i.add(s),s.key):lye++})}return Y.und(n)?e:Y.fun(n)?e.map(n):Un(n)}var dye=class extends Jw{constructor(e,t){super(),this.source=e,this.idle=!0,this._active=new Set,this.calc=uf(...t);const n=this._get(),r=$3(n);Yw(this,r.create(n))}advance(e){const t=this._get(),n=this.get();ko(t,n)||(Zi(this).setValue(t),this._onChange(t,this.idle)),!this.idle&&yC(this._active)&&H2(this)}_get(){const e=Y.arr(this.source)?this.source.map(er):Un(er(this.source));return this.calc(...e)}_start(){this.idle&&!yC(this._active)&&(this.idle=!1,$e(Wm(this),e=>{e.done=!1}),Oi.skipAnimation?(Pe.batchedUpdates(()=>this.advance()),H2(this)):Vm.start(this))}_attach(){let e=1;$e(Un(this.source),t=>{Wr(t)&&bu(t,this),D3(t)&&(t.idle||this._active.add(t),e=Math.max(e,t.priority+1))}),this.priority=e,this._start()}_detach(){$e(Un(this.source),e=>{Wr(e)&&hf(e,this)}),this._active.clear(),H2(this)}eventObserved(e){e.type=="change"?e.idle?this.advance():(this._active.add(e.parent),this._start()):e.type=="idle"?this._active.delete(e.parent):e.type=="priority"&&(this.priority=Un(this.source).reduce((t,n)=>Math.max(t,(D3(n)?n.priority:0)+1),0))}};function fye(e){return e.idle!==!1}function yC(e){return!e.size||Array.from(e).every(fye)}function H2(e){e.idle||(e.idle=!0,$e(Wm(e),t=>{t.done=!0}),ff(e,{type:"idle",parent:e}))}Oi.assign({createStringInterpolator:ij,to:(e,t)=>new dye(e,t)});var Cj=/^--/;function hye(e,t){return t==null||typeof t=="boolean"||t===""?"":typeof t=="number"&&t!==0&&!Cj.test(e)&&!(kd.hasOwnProperty(e)&&kd[e])?t+"px":(""+t).trim()}var _C={};function pye(e,t){if(!e.nodeType||!e.setAttribute)return!1;const n=e.nodeName==="filter"||e.parentNode&&e.parentNode.nodeName==="filter",{className:r,style:i,children:o,scrollTop:s,scrollLeft:a,viewBox:c,...l}=t,u=Object.values(l),d=Object.keys(l).map(p=>n||e.hasAttribute(p)?p:_C[p]||(_C[p]=p.replace(/([A-Z])/g,g=>"-"+g.toLowerCase())));o!==void 0&&(e.textContent=o);for(const p in i)if(i.hasOwnProperty(p)){const g=hye(p,i[p]);Cj.test(p)?e.style.setProperty(p,g):e.style[p]=g}d.forEach((p,g)=>{e.setAttribute(p,u[g])}),r!==void 0&&(e.className=r),s!==void 0&&(e.scrollTop=s),a!==void 0&&(e.scrollLeft=a),c!==void 0&&e.setAttribute("viewBox",c)}var kd={animationIterationCount:!0,borderImageOutset:!0,borderImageSlice:!0,borderImageWidth:!0,boxFlex:!0,boxFlexGroup:!0,boxOrdinalGroup:!0,columnCount:!0,columns:!0,flex:!0,flexGrow:!0,flexPositive:!0,flexShrink:!0,flexNegative:!0,flexOrder:!0,gridRow:!0,gridRowEnd:!0,gridRowSpan:!0,gridRowStart:!0,gridColumn:!0,gridColumnEnd:!0,gridColumnSpan:!0,gridColumnStart:!0,fontWeight:!0,lineClamp:!0,lineHeight:!0,opacity:!0,order:!0,orphans:!0,tabSize:!0,widows:!0,zIndex:!0,zoom:!0,fillOpacity:!0,floodOpacity:!0,stopOpacity:!0,strokeDasharray:!0,strokeDashoffset:!0,strokeMiterlimit:!0,strokeOpacity:!0,strokeWidth:!0},gye=(e,t)=>e+t.charAt(0).toUpperCase()+t.substring(1),mye=["Webkit","Ms","Moz","O"];kd=Object.keys(kd).reduce((e,t)=>(mye.forEach(n=>e[gye(n,t)]=e[t]),e),kd);var vye=/^(matrix|translate|scale|rotate|skew)/,yye=/^(translate)/,_ye=/^(rotate|skew)/,U2=(e,t)=>Y.num(e)&&e!==0?e+t:e,Bp=(e,t)=>Y.arr(e)?e.every(n=>Bp(n,t)):Y.num(e)?e===t:parseFloat(e)===t,bye=class extends Ym{constructor({x:e,y:t,z:n,...r}){const i=[],o=[];(e||t||n)&&(i.push([e||0,t||0,n||0]),o.push(s=>[`translate3d(${s.map(a=>U2(a,"px")).join(",")})`,Bp(s,0)])),co(r,(s,a)=>{if(a==="transform")i.push([s||""]),o.push(c=>[c,c===""]);else if(vye.test(a)){if(delete r[a],Y.und(s))return;const c=yye.test(a)?"px":_ye.test(a)?"deg":"";i.push(Un(s)),o.push(a==="rotate3d"?([l,u,d,p])=>[`rotate3d(${l},${u},${d},${U2(p,c)})`,Bp(p,0)]:l=>[`${a}(${l.map(u=>U2(u,c)).join(",")})`,Bp(l,a.startsWith("scale")?1:0)])}}),i.length&&(r.transform=new wye(i,o)),super(r)}},wye=class extends tj{constructor(e,t){super(),this.inputs=e,this.transforms=t,this._value=null}get(){return this._value||(this._value=this._get())}_get(){let e="",t=!0;return $e(this.inputs,(n,r)=>{const i=er(n[0]),[o,s]=this.transforms[r](Y.arr(i)?i:n.map(er));e+=" "+o,t=t&&s}),t?"none":e}observerAdded(e){e==1&&$e(this.inputs,t=>$e(t,n=>Wr(n)&&bu(n,this)))}observerRemoved(e){e==0&&$e(this.inputs,t=>$e(t,n=>Wr(n)&&hf(n,this)))}eventObserved(e){e.type=="change"&&(this._value=null),ff(this,e)}},Sye=["a","abbr","address","area","article","aside","audio","b","base","bdi","bdo","big","blockquote","body","br","button","canvas","caption","cite","code","col","colgroup","data","datalist","dd","del","details","dfn","dialog","div","dl","dt","em","embed","fieldset","figcaption","figure","footer","form","h1","h2","h3","h4","h5","h6","head","header","hgroup","hr","html","i","iframe","img","input","ins","kbd","keygen","label","legend","li","link","main","map","mark","menu","menuitem","meta","meter","nav","noscript","object","ol","optgroup","option","output","p","param","picture","pre","progress","q","rp","rt","ruby","s","samp","script","section","select","small","source","span","strong","style","sub","summary","sup","table","tbody","td","textarea","tfoot","th","thead","time","title","tr","track","u","ul","var","video","wbr","circle","clipPath","defs","ellipse","foreignObject","g","image","line","linearGradient","mask","path","pattern","polygon","polyline","radialGradient","rect","stop","svg","text","tspan"];Oi.assign({batchedUpdates:Ya.unstable_batchedUpdates,createStringInterpolator:ij,colors:cve});var Cye=Hve(Sye,{applyAnimatedValues:pye,createAnimatedStyle:e=>new bye(e),getComponentProps:({scrollTop:e,scrollLeft:t,...n})=>n}),Ej=Cye.animated;const Eye="_media_1yzvo_8",xye="_mirror_1yzvo_27",Iye="_bg_1yzvo_39",Rye="_avatar_1yzvo_47",Lye="_fg_1yzvo_72",kye="_nameTag_1yzvo_86",Tye="_status_1yzvo_103",Aye="_reactions_1yzvo_122",Pye="_name_1yzvo_86",Mye="_errorIcon_1yzvo_141",Si={media:Eye,mirror:xye,bg:Iye,avatar:Rye,fg:Lye,nameTag:kye,status:Tye,reactions:Aye,name:Pye,errorIcon:Mye},Nye="_reactionIndicatorWidget_14f9a_1",$ye="_reactionIndicatorWidgetLarge_14f9a_21",Oye="_reactionLarge_14f9a_28",jye="_reaction_14f9a_1",Jh={reactionIndicatorWidget:Nye,reactionIndicatorWidgetLarge:$ye,reactionLarge:Oye,reaction:jye};function xj({emoji:e,miniature:t,children:n}){const{t:r}=he();return h.jsxs("div",{className:Z(Jh.reactionIndicatorWidget,{[Jh.reactionIndicatorWidgetLarge]:!t}),children:[h.jsx("div",{className:Z(Jh.reaction,{[Jh.reactionLarge]:!t}),children:h.jsx("span",{role:"img","aria-label":r("common.reaction"),children:e})}),n]})}function Dye({raisedHandTime:e,miniature:t,showTimer:n,onClick:r,tabIndex:i}){const{t:o}=he(),[s,a]=f.useState(""),c=f.useMemo(()=>new Intl.DurationFormat(void 0,{minutesDisplay:"always",secondsDisplay:"always",hoursDisplay:"auto",style:"digital"}),[]),l=f.useCallback(d=>{r&&(d.preventDefault(),r())},[r]);if(f.useEffect(()=>{if(!e||!n)return;const d=()=>{const g=Math.ceil((new Date().getTime()-e.getTime())/1e3);a(c.format({seconds:g%60,minutes:Math.floor(g/60)}))};d();const p=setInterval(d,1e3);return()=>clearInterval(p)},[a,e,n,c]),!e)return;const u=h.jsx(xj,{emoji:"âœ‹",miniature:t,children:n&&h.jsx("p",{children:s})});return r?h.jsx("button",{"aria-label":o("action.lower_hand"),style:{display:"contents",background:"none"},onClick:l,tabIndex:i,children:u}):u}const Fye="_modal_13thw_8",Hye="_statsPill_13thw_12",bC={modal:Fye,statsPill:Hye},Uye=e=>{try{return new URL(e).hostname}catch(t){return console.error("Invalid URL:",t),e}},Bye=({audio:e,video:t,focusUrl:n,rtcBackendIdentity:r,...i})=>{const[o,s]=f.useState(!1),[a,c]=f.useState("none"),l=d=>{s(!0),c(d)},u=()=>{s(!1),c("none")};return h.jsxs("div",{className:Z(Si.nameTag,bC.statsPill),children:[h.jsx(lc,{title:"RTC Connection Stats",open:o,onDismiss:u,children:h.jsx("div",{className:bC.modal,children:h.jsx("pre",{children:a!=="none"&&JSON.stringify(a==="video"?t:e,null,2)})})}),h.jsxs(Ye,{as:"span",size:"xs",title:"rtcBackendIdentity",children:["rtcBackendIdentity:",r]}),n&&h.jsx("div",{children:h.jsxs(Ye,{as:"span",size:"xs",title:"focusURL",children:["Â ",Uye(n)]})}),e&&h.jsx("div",{children:h.jsx(De,{onClick:()=>l("audio"),size:"sm",kind:"tertiary",Icon:O_,children:"jitter"in e&&typeof e.jitter=="number"&&h.jsxs(Ye,{as:"span",size:"xs",title:"jitter",children:["Â ",(e.jitter*1e3).toFixed(0),"ms"]})})}),t&&h.jsx("div",{children:h.jsxs(De,{onClick:()=>l("video"),size:"sm",kind:"tertiary",Icon:HA,children:[!!t?.framesPerSecond&&h.jsxs(Ye,{as:"span",size:"xs",title:"frame rate",children:["Â ",t.framesPerSecond.toFixed(0),"fps"]}),"jitter"in t&&typeof t.jitter=="number"&&h.jsxs(Ye,{as:"span",size:"xs",title:"jitter",children:["Â ",(t.jitter*1e3).toFixed(0),"ms"]}),"frameHeight"in t&&typeof t.frameHeight=="number"&&"frameWidth"in t&&typeof t.frameWidth=="number"&&h.jsxs(Ye,{as:"span",size:"xs",title:"frame size",children:["Â ",t.frameWidth,"x",t.frameHeight]}),"qualityLimitationReason"in t&&typeof t.qualityLimitationReason=="string"&&t.qualityLimitationReason!=="none"&&h.jsxs(Ye,{as:"span",size:"xs",title:"quality limitation reason",children:["Â ",t.qualityLimitationReason]})]})})]})},ih=({ref:e,className:t,style:n,targetWidth:r,targetHeight:i,video:o,videoFit:s,mirror:a,userId:c,videoEnabled:l,unencryptedWarning:u,nameTagLeadingIcon:d,displayName:p,mxcAvatarUrl:g,focusable:v,primaryButton:m,encryptionStatus:_,raisedHandTime:y,currentReaction:w,raisedHandOnClick:S,waitingForMedia:b,audioStreamStats:C,videoStreamStats:E,rtcBackendIdentity:x,focusUrl:I,...L})=>{const{t:R}=he(),[k]=qt(HM),[A]=qt(Pl),P=Math.round(Math.min(r,i)/2);return h.jsxs(Ej.div,{className:Z(Si.media,t,{[Si.mirror]:a}),style:n,ref:e,"data-testid":"videoTile","data-video-fit":s,...L,children:[h.jsxs("div",{className:Si.bg,children:[h.jsx(sc,{id:c,name:p,size:P,src:g,className:Si.avatar,style:{display:o&&l?"none":"initial"}}),o?.publication!==void 0&&h.jsx(UD,{trackRef:o,tabIndex:-1,style:{display:o&&l?"block":"none"},"data-testid":"video"})]}),h.jsxs("div",{className:Si.fg,children:[h.jsxs("div",{className:Si.reactions,children:[h.jsx(Dye,{raisedHandTime:y,miniature:P<96,showTimer:k,onClick:S,tabIndex:v?void 0:-1}),w&&h.jsx(xj,{miniature:P<96,emoji:w.emoji})]}),b&&h.jsxs("div",{className:Si.status,children:[R("video_tile.waiting_for_media"),A?" "+x:""]}),(C||E)&&h.jsx(h.Fragment,{children:h.jsx(Bye,{audio:C,video:E,focusUrl:I,rtcBackendIdentity:x})}),h.jsxs("div",{className:Si.nameTag,children:[d,h.jsx(Ye,{as:"span",size:"sm",weight:"medium",className:Si.name,"data-testid":"name_tag",children:p}),u&&h.jsx(sn,{label:R("common.unencrypted"),placement:"bottom",isTriggerInteractive:!1,nonInteractiveTriggerTabIndex:v?void 0:-1,children:h.jsx(If,{width:20,height:20,className:Si.errorIcon,role:"img","aria-label":R("common.unencrypted")})})]}),m]})]})};ih.displayName="MediaView";function Wa(e){const t=f.useRef(e);return t.current=e,t}const wu=(...e)=>f.useCallback(t=>e.forEach(n=>{typeof n=="function"?n(t):n&&(n.current=t)}),e),e6=({ref:e,vm:t,showSpeakingIndicators:n,locallyMuted:r,waitingForMedia:i,primaryButton:o,menuStart:s,menuEnd:a,className:c,focusUrl:l,displayName:u,mxcAvatarUrl:d,focusable:p,...g})=>{const{toggleRaisedHand:v}=eb(),{t:m}=he(),_=J(t.video$),y=J(t.livekitRoom$),w=J(t.unencryptedWarning$),S=J(t.encryptionStatus$),b=dr(t.audioStreamStats$),C=dr(t.videoStreamStats$),E=J(t.audioEnabled$),x=J(t.videoEnabled$),I=J(t.speaking$),L=J(t.participant$),R=J(t.cropVideo$),k=J(t.connection$),A=f.useRef(null),P=wu(A,e),O=f.useCallback(z=>{z.preventDefault(),t.toggleFitContain()},[t]),j=f.useCallback(z=>{console.log(_),console.log(l),console.log(t),console.log(y),console.log(L),console.log(y.regionUrlProvider),console.log(k);let re=A.current?.querySelector("video");if(!re){console.log("No video to popout!");return}let Le=new URL(window.location.origin+window.location.pathname.split("/").slice(0,-1).join("/")+"/popout.html").searchParams;Le.append("mediaType",_.publication.source),Le.append("participantId",L.identity),Le.append("displayName",u),window.setTimeout(()=>{let xt=window.open("","_blank","popup").document,ct=Object.assign(xt.createElement("video"),{controls:!0,muted:!0,preload:"none"});xt.body.style.justifyContent="center",xt.body.style.display="flex",xt.body.style.height="100%",ct.style.width="100%",ct.style.height="100%",xt.body.appendChild(ct),ct.srcObject=re.srcObject,ct.play()},0)},[t,_,A,l,L]),$=t.rtcBackendIdentity,T=J(t.handRaised$),N=J(t.reaction$),M=r?Wie:E?O_:bA,B=m(r?"video_tile.muted_for_me":E?"microphone_on":"microphone_off"),[F,K]=f.useState(!1),te=h.jsxs(h.Fragment,{children:[s,h.jsx(M_,{Icon:hA,label:m("video_tile.change_fit_contain"),checked:R,onSelect:O}),h.jsx(Ha,{icon:j_,label:"pop-out",onSelect:j}),a]}),oe=t.local?()=>{v()}:void 0,pe=n&&I,ne=h.jsx(ih,{ref:P,video:_,userId:t.userId,unencryptedWarning:w,encryptionStatus:S,videoEnabled:x,videoFit:R?"cover":"contain",className:Z(c,Xc.tile,{[Xc.speaking]:pe,[Xc.handRaised]:!pe&&T}),nameTagLeadingIcon:h.jsx(M,{width:20,height:20,"aria-label":B,"data-muted":r||!E,className:Xc.muteIcon}),displayName:u,mxcAvatarUrl:d,focusable:p,primaryButton:o??h.jsx(C_,{open:F,onOpenChange:K,title:u,trigger:h.jsx("button",{"aria-label":m("common.options"),tabIndex:p?void 0:-1,children:h.jsx($ie,{"aria-hidden":!0,width:20,height:20})}),side:"left",align:"start",children:te}),raisedHandTime:T??void 0,currentReaction:N??void 0,raisedHandOnClick:oe,waitingForMedia:i,focusUrl:l,audioStreamStats:b,videoStreamStats:C,rtcBackendIdentity:$,...g});return h.jsx(AJ,{title:u,trigger:ne,hasAccessibleAlternative:!0,children:te})};e6.displayName="UserMediaTile";const Ij=({ref:e,vm:t,onOpenProfile:n,focusable:r,...i})=>{const{t:o}=he(),s=J(t.mirror$),a=J(t.alwaysShow$),c=J(t.switchCamera$),l=Wa(a),u=f.useCallback(d=>{d.preventDefault(),t.setAlwaysShow(!l.current)},[t,l]);return h.jsx(e6,{ref:e,vm:t,locallyMuted:!1,mirror:s,primaryButton:c===null?void 0:h.jsx("button",{className:Xc.switchCamera,"aria-label":o("switch_camera"),onClick:c,tabIndex:r?void 0:-1,children:h.jsx(Uie,{"aria-hidden":!0,width:20,height:20})}),menuStart:h.jsx(M_,{Icon:yre,label:o("video_tile.always_show"),checked:a,onSelect:u}),menuEnd:n&&h.jsx(Ha,{Icon:jA,label:o("common.profile"),onSelect:n}),focusable:r,...i})};Ij.displayName="LocalUserMediaTile";const Rj=({ref:e,vm:t,...n})=>{const{t:r}=he(),i=J(t.waitingForMedia$),o=J(t.locallyMuted$),s=J(t.localVolume$),a=f.useCallback(d=>{d.preventDefault(),t.toggleLocallyMuted()},[t]),c=f.useCallback(d=>t.setLocalVolume(d),[t]),l=f.useCallback(()=>t.commitLocalVolume(),[t]),u=o?zie:Xie;return h.jsx(e6,{ref:e,vm:t,waitingForMedia:i,locallyMuted:o,mirror:!1,menuStart:h.jsxs(h.Fragment,{children:[h.jsx(M_,{Icon:Mie,label:r("video_tile.mute_for_me"),checked:o,onSelect:a}),h.jsx(Ha,{as:"div",Icon:u,label:null,onSelect:null,children:h.jsx(kN,{className:Xc.volumeSlider,label:r("video_tile.volume"),value:s,onValueChange:c,onValueCommit:l,min:0,max:1,step:.01})})]}),...n})};Rj.displayName="RemoteUserMediaTile";const Lj=({ref:e,vm:t,onOpenProfile:n,...r})=>{const i=f.useRef(null),o=wu(i,e),s=J(t.media$),a=J(s.focusUrl$),c=J(s.displayName$),l=J(s.mxcAvatarUrl$);return s instanceof Vl?h.jsx(Ij,{ref:o,vm:s,onOpenProfile:n,focusUrl:a,displayName:c,mxcAvatarUrl:l,...r}):h.jsx(Rj,{ref:o,vm:s,focusUrl:a,displayName:c,mxcAvatarUrl:l,...r})};Lj.displayName="GridTile";const Vye=({rageshakeRequestId:e,roomId:t,open:n,onDismiss:r})=>{const{t:i}=he(),{submitRageshake:o,sending:s,sent:a,error:c}=Qg();return f.useEffect(()=>{a&&r()},[a,r]),h.jsxs(lc,{title:i("rageshake_request_modal.title"),open:n,onDismiss:r,children:[h.jsx(Ye,{children:i("rageshake_request_modal.body")}),h.jsx(je,{children:h.jsx(De,{onClick:()=>{o({sendLogs:!0,rageshakeRequestId:e,roomId:t})},disabled:s,children:i(s?"rageshake_sending_logs":"rageshake_send_logs")})}),c&&h.jsx(je,{children:h.jsx(sa,{error:c})})]})};function qye(){f.useEffect(()=>{if("wakeLock"in navigator){let e=!0,t=null;const n=()=>{document.visibilityState==="visible"&&navigator.wakeLock.request("screen").then(r=>{t=r,e||t.release().catch(i=>U.warn("Can't release wake lock",i))},r=>{U.warn("Can't acquire wake lock",r)})};return n(),document.addEventListener("visibilitychange",n),()=>{e=!1,t!==null&&t.release().catch(r=>U.warn("Can't release wake lock",r)),document.removeEventListener("visibilitychange",n)}}},[])}const Gye="_toggle_z1rxf_8",Kye={toggle:Gye},Wye=({layout:e,setLayout:t,className:n,onTouchEnd:r})=>{const{t:i}=he(),o=f.useCallback(s=>t(s.target.value),[t]);return h.jsxs("div",{className:Z(Kye.toggle,n),children:[h.jsx(sn,{label:i("layout_spotlight_label"),children:h.jsx("input",{type:"radio",name:"layout",value:"spotlight",checked:e==="spotlight",onChange:o,onTouchEnd:r})}),h.jsx(Hie,{"aria-hidden":!0,width:24,height:24}),h.jsx(sn,{label:i("layout_grid_label"),children:h.jsx("input",{type:"radio",name:"layout",value:"grid",checked:e==="grid",onChange:o,onTouchEnd:r})}),h.jsx(Lie,{"aria-hidden":!0,width:24,height:24})]})};let zye=0;function Yye(){return(zye++).toString()}class kj{constructor(t){this.media$=t,this.id=Yye()}}class Xye{constructor(t,n){this.media$=t,this.maximised$=n}}function Zye(e,t){return{[Symbol.iterator](){const n=e[Symbol.iterator](),r=t[Symbol.iterator]();return{next(){let i;do{if(i=n.next(),!i.done&&i.value!==void 0)return i;const o=r.next();if(!o.done)return o}while(!i.done);return i}}}}}function ep(e){return e.map(t=>t.media.displayName$.value)}let id=!1;vb.value$.subscribe(e=>id=e);class Qye{get media(){return this.media$.value}set media(t){this.media$.next(t)}get maximised(){return this.maximised$.value}set maximised(t){this.maximised$.next(t)}constructor(t,n){this.media$=new Pt(t),this.maximised$=new Pt(n),this.vm=new Xye(this.media$,this.maximised$)}}class B2{get media(){return this.media$.value}set media(t){this.media$.next(t)}constructor(t){this.media$=new Pt(t),this.vm=new kj(this.media$)}}class og{constructor(t,n,r){this.spotlight=t,this.grid=n,this.generation=r,this.spotlightTile=this.spotlight?.vm,this.gridTiles=this.grid.map(({vm:i})=>i),this.gridTilesByMedia=new Map(this.grid.map(({vm:i,media:o})=>[o,i]))}static empty(){return new og(null,[],0)}from(t){return new Jye(this.spotlight,this.grid,(n,r)=>new og(n,r,this.generation+1),t,this.generation)}}class Jye{constructor(t,n,r,i,o){this.prevSpotlight=t,this.prevGrid=n,this.construct=r,this.visibleTiles=i,this.generation=o,this.spotlight=null,this.prevSpotlightSpeaker=this.prevSpotlight?.media.length===1&&"speaking$"in this.prevSpotlight.media[0]?this.prevSpotlight.media[0]:null,this.prevGridByMedia=new Map(this.prevGrid.map((s,a)=>[s.media,[s,a]])),this.numGridEntries=0,this.stationaryGridEntries=new Array(this.prevGrid.length),this.visibleGridEntries=[],this.invisibleGridEntries=[]}registerSpotlight(t,n){if(id&&U.debug(`[TileStore, ${this.generation}] register spotlight: ${t.map(r=>r.displayName$.value)}`),this.spotlight!==null)throw new Error("Spotlight already set");if(this.numGridEntries>0)throw new Error("Spotlight must be registered before grid tiles");this.prevSpotlight===null?this.spotlight=new Qye(t,n):(this.spotlight=this.prevSpotlight,this.spotlight.media=t,this.spotlight.maximised=n)}registerGridTile(t){if(id&&U.debug(`[TileStore, ${this.generation}] register grid tile: ${t.displayName$.value}`),this.spotlight!==null){if(!t.local&&this.spotlight.media.includes(t))return;if(t===this.prevSpotlightSpeaker&&this.spotlight.media.length===1&&"speaking$"in this.spotlight.media[0]&&this.prevSpotlightSpeaker!==this.spotlight.media[0]){const r=this.prevGridByMedia.get(this.spotlight.media[0]);if(r!==void 0){const[i,o]=r,s=o<this.visibleTiles,a=this.numGridEntries<this.visibleTiles;s===a?(this.stationaryGridEntries[o]=i,i.media=t,this.prevGridByMedia.delete(this.spotlight.media[0]),this.prevGridByMedia.set(t,r)):(a?this.visibleGridEntries:this.invisibleGridEntries).push(new B2(t)),this.numGridEntries++;return}}}const n=this.prevGridByMedia.get(t);if(n===void 0)(this.numGridEntries<this.visibleTiles?this.visibleGridEntries:this.invisibleGridEntries).push(new B2(t));else{const[r,i]=n,o=i<this.visibleTiles,s=this.numGridEntries<this.visibleTiles;o===s?this.stationaryGridEntries[i]=r:(s?this.visibleGridEntries:this.invisibleGridEntries).push(r)}this.numGridEntries++}registerPipTile(t){if(id&&U.debug(`[TileStore, ${this.generation}] register PiP tile: ${t.displayName$.value}`),this.prevGrid.length===1){const n=this.prevGrid[0];this.stationaryGridEntries[0]=n,n.media=t,this.prevGridByMedia.delete(n.media),this.prevGridByMedia.set(t,[n,0])}else this.visibleGridEntries.push(new B2(t));this.numGridEntries++}build(){const t=[...Zye(this.stationaryGridEntries,[...this.visibleGridEntries,...this.invisibleGridEntries])];return id&&(U.debug(`[TileStore, ${this.generation}] stationary: ${ep(this.stationaryGridEntries)}`),U.debug(`[TileStore, ${this.generation}] visible: ${ep(this.visibleGridEntries)}`),U.debug(`[TileStore, ${this.generation}] invisible: ${ep(this.invisibleGridEntries)}`),U.debug(`[TileStore, ${this.generation}] result: ${ep(t)}`)),this.construct(this.spotlight,t)}}function e3e(e,t,n,r){const i=r.from(t);e.spotlight!==void 0&&i.registerSpotlight(e.spotlight,e.type==="spotlight-portrait");for(const s of e.grid)i.registerGridTile(s);const o=i.build();return[{type:e.type,spotlight:o.spotlightTile,grid:o.gridTiles,setVisibleTiles:n},o]}function t3e(e,t){const n=t.from(1);n.registerSpotlight(e.spotlight,!0),e.pip!==void 0&&n.registerPipTile(e.pip);const r=n.build();return[{type:e.type,spotlight:r.spotlightTile,pip:r.gridTiles[0]},r]}function n3e(e,t){const n=t.from(2);n.registerGridTile(e.local),n.registerGridTile(e.remote);const r=n.build();return[{type:e.type,local:r.gridTilesByMedia.get(e.local),remote:r.gridTilesByMedia.get(e.remote)},r]}function r3e(e,t){const n=t.from(0);n.registerSpotlight(e.spotlight,!0);const r=n.build();return[{type:e.type,spotlight:r.spotlightTile},r]}function wC(e,t){if(e.length!==t.length)return!1;for(let n=0;n<e.length;n++)if(e[n]!==t[n])return!1;return!0}const SC=U.getChild("[MatrixKeyProvider]");class i3e extends BD{constructor(){super({ratchetWindowSize:10,keyringSize:256}),this.onEncryptionKeyChanged=(t,n,r,i)=>{crypto.subtle.importKey("raw",t,"HKDF",!1,["deriveBits","deriveKey"]).then(o=>{this.onSetEncryptionKey(o,i,n),SC.debug(`Sent new key to livekit room=${this.rtcSession?.room.roomId} participantId=${i} (before hash: ${r.userId}:${r.deviceId}) encryptionKeyIndex=${n}`)},o=>{SC.error(`Failed to create key material from buffer for livekit room=${this.rtcSession?.room.roomId} participantId before hash=${r.userId}:${r.deviceId} encryptionKeyIndex=${n}`,o)})}}setRTCSession(t){this.rtcSession&&this.rtcSession.off(Us.EncryptionKeyChanged,this.onEncryptionKeyChanged),this.rtcSession=t,this.rtcSession.on(Us.EncryptionKeyChanged,this.onEncryptionKeyChanged),this.rtcSession.reemitEncryptionKeys()}}function o3e(e){const t=e.pipe(ar());return t.pipe(AM(n=>Vo(Os(n?1e3:6e4),t.pipe(zt(r=>r!==n)))),lt(!1),ar())}class Tj{constructor(t,n,r,i,o,s,a,c,l,u,d){this.scope=t,this.vm=new Zc(this.scope,n,r,i,Ce(o),s,a,c,l,u,d,o.isLocal)}}class s3e{constructor(t,n,r,i,o,s,a,c,l,u,d,p,g,v,m){this.scope=t,this.id=n,this.userId=r,this.rtcBackendIdentity=i,this.participant=o,this.encryptionSystem=s,this.livekitRoom$=a,this.focusUrl$=c,this.mediaDevices=l,this.pretendToBeDisconnected$=u,this.displayName$=d,this.mxcAvatarUrl$=p,this.handRaised$=g,this.reaction$=v,this.connection$=m,this.vm=this.participant.type==="local"?new Vl(this.scope,this.id,this.userId,this.rtcBackendIdentity,this.participant.value$,this.encryptionSystem,this.livekitRoom$,this.focusUrl$,this.mediaDevices,this.displayName$,this.mxcAvatarUrl$,this.scope.behavior(this.handRaised$),this.scope.behavior(this.reaction$),this.connection$):new eve(this.scope,this.id,this.userId,this.rtcBackendIdentity,this.participant.value$,this.encryptionSystem,this.livekitRoom$,this.focusUrl$,this.pretendToBeDisconnected$,this.displayName$,this.mxcAvatarUrl$,this.scope.behavior(this.handRaised$),this.scope.behavior(this.reaction$),this.connection$),this.speaker$=this.scope.behavior(o3e(this.vm.speaking$)),this.participant$=this.participant.value$,this.screenShares$=this.scope.behavior(this.participant$.pipe(Ee(_=>_===null?Ce([]):am(_,Te.TrackPublished,Te.TrackUnpublished,Te.LocalTrackPublished,Te.LocalTrackUnpublished).pipe(aN(`${this.id} screenShares$`,function*(y){y.isScreenShareEnabled&&(yield{keys:["screen-share"],data:void 0})},(y,w,S)=>new Tj(y,`${this.id}:${S}`,this.userId,this.rtcBackendIdentity,_,this.encryptionSystem,this.livekitRoom$,this.focusUrl$,this.pretendToBeDisconnected$,this.displayName$,this.mxcAvatarUrl$)))))),this.presenter$=this.scope.behavior(this.screenShares$.pipe(V(_=>_.length>0))),this.bin$=ge([this.speaker$,this.presenter$,this.vm.videoEnabled$,this.vm.handRaised$,this.vm instanceof Vl?this.vm.alwaysShow$:Ce(!1)],(_,y,w,S,b)=>this.vm.local?b?0:6:y?1:_?2:S?3:w?4:5)}}var Aj=(e=>(e.MISSING_MATRIX_RTC_TRANSPORT="MISSING_MATRIX_RTC_TRANSPORT",e.CONNECTION_LOST_ERROR="CONNECTION_LOST_ERROR",e.INTERNAL_MEMBERSHIP_MANAGER="INTERNAL_MEMBERSHIP_MANAGER",e.FAILED_TO_START_LIVEKIT="FAILED_TO_START_LIVEKIT",e.INSUFFICIENT_CAPACITY_ERROR="INSUFFICIENT_CAPACITY_ERROR",e.E2EE_NOT_SUPPORTED="E2EE_NOT_SUPPORTED",e.OPEN_ID_ERROR="OPEN_ID_ERROR",e.NO_MATRIX_2_AUTHORIZATION_SERVICE="NO_MATRIX_2_0_AUTHORIZATION_SERVICE",e.SFU_ERROR="SFU_ERROR",e.UNKNOWN_ERROR="UNKNOWN_ERROR",e))(Aj||{}),Vp=(e=>(e.CONFIGURATION_ISSUE="CONFIGURATION_ISSUE",e.NETWORK_CONNECTIVITY="NETWORK_CONNECTIVITY",e.CLIENT_CONFIGURATION="CLIENT_CONFIGURATION",e.UNKNOWN="UNKNOWN",e.SYSTEM_FAILURE="SYSTEM_FAILURE",e))(Vp||{});class gn extends Error{constructor(t,n,r,i,o){super(t,{cause:o}),this.localisedTitle=t,this.localisedMessage=i,this.category=r,this.code=n}}class a3e extends gn{constructor(t){super(vn("error.call_is_not_supported"),"MISSING_MATRIX_RTC_TRANSPORT","CONFIGURATION_ISSUE",vn("error.matrix_rtc_transport_missing",{domain:t,brand:"Element Call",errorCode:"MISSING_MATRIX_RTC_TRANSPORT"})),this.domain=t}}class Pj extends gn{constructor(){super(vn("error.connection_lost"),"CONNECTION_LOST_ERROR","NETWORK_CONNECTIVITY",vn("error.connection_lost_description"))}}class c3e extends gn{constructor(t){super(vn("error.membership_manager"),"INTERNAL_MEMBERSHIP_MANAGER","SYSTEM_FAILURE",vn("error.membership_manager_description"),t)}}class l3e extends gn{constructor(){super(vn("error.e2ee_unsupported"),"E2EE_NOT_SUPPORTED","CLIENT_CONFIGURATION",vn("error.e2ee_unsupported_description"))}}class za extends gn{constructor(t){super(vn("error.generic"),"UNKNOWN_ERROR","UNKNOWN",void 0,t)}}let qp=class extends gn{constructor(t){super(vn("error.generic"),"OPEN_ID_ERROR","CONFIGURATION_ISSUE",void 0,t)}};class Mj extends gn{constructor(t){super(vn("error.generic"),"NO_MATRIX_2_0_AUTHORIZATION_SERVICE","CONFIGURATION_ISSUE",vn("error.no_matrix_2_authorization_service"),t)}}class u3e extends gn{constructor(t){super(vn("error.failed_to_start_livekit"),"FAILED_TO_START_LIVEKIT","NETWORK_CONNECTIVITY",t)}}class d3e extends gn{constructor(){super(vn("error.insufficient_capacity"),"INSUFFICIENT_CAPACITY_ERROR","UNKNOWN",vn("error.insufficient_capacity_description"))}}class f3e extends gn{constructor(){super(vn("error.room_creation_restricted"),"SFU_ERROR","CONFIGURATION_ISSUE",vn("error.room_creation_restricted_description"))}}const h3e=U.getChild("[HomeserverConnected]");function p3e(e,t,n){const r=Pn(t,ei.Sync).pipe(lt([t.getSyncState()]),V(([c])=>c===Rv.Syncing)),i=e.behavior(Pn(n,Lv.StatusChanged).pipe(V(()=>n.membershipStatus??cp.Unknown)),cp.Unknown),o=i.pipe(V(c=>c===cp.Connected)),s=Pn(n,Lv.ProbablyLeft).pipe(lt(null),V(()=>n.probablyLeft!==!0));return{combined$:e.behavior(sN(r,o,s).pipe(Ta(c=>{h3e.info(`Homeserver connected update: ${c}`)}))),rtsSession$:i}}function g3e({scope:e,membershipsWithTransport$:t,connectionManager:n}){return e.behavior(ge([t,n.connectionManagerData$]).pipe(zt(r=>r.every(i=>i.epoch===r[0].epoch)),V(([r,i])=>new Ti([r.value,i.value],r.epoch)),cN("MatrixLivekitMembers",function*([r,i]){for(const{membership:o,transport:s}of r){const c=(s?i.getParticipantsForTransport(s):[]).find(u=>u.identity==o.rtcBackendIdentity)??null,l=s?i.getConnectionForTransport(s):null;yield{keys:[o.userId,o.deviceId,o.memberId,o.rtcBackendIdentity],data:{membership:o,participant:c,connection:l}}}},(r,i,o,s,a,c)=>{const{participant$:l,...u}=r.splitBehavior(i);return{userId:o,participant:{type:"remote",value$:l},...u}})),new Ti([],-1))}function t6(e,t){return e&&t?e.livekit_service_url===t.livekit_service_url:!e&&!t}const Sr=U.getChild("[LocalTransport]");var sg=(e=>(e.Legacy="legacy",e.Matrix_2_0="matrix_2_0",e))(sg||{});function m3e(e){return"transport"in e&&"sfuConfig"in e}const v3e=({scope:e,memberships$:t,ownMembershipIdentity:n,client:r,roomId:i,useOldestMember$:o,forceJwtEndpoint$:s,delayId$:a})=>{const c=e.behavior(ge([t,o]).pipe(V(([u,d])=>{if(!d)return null;const p=u.value[0],g=p?.getTransport(p);return g||null}),Ee(u=>u!==null&&z3(u)?ns((async()=>({transport:u,sfuConfig:await ag(r,n,u.livekit_service_url,i,{forceJwtEndpoint:"legacy"},Sr)}))()):Ce(null))),null),l=e.behavior(ge([KM.value$,a,s]).pipe(Ee(([u,d,p])=>(Sr.info("Creating preferred transport based on: ","customUrl: ",u,"delayId: ",d,"forceEndpoint: ",p),ns(_3e(r,n,i,u,p,d??void 0))))),null);return e.behavior(ge([o,c,l]).pipe(V(([u,d,p])=>u?d??p:p),ar((u,d)=>(Sr.info("Local Transport Update from:",u?.transport.livekit_service_url," to ",d?.transport.livekit_service_url),t6(u?.transport??null,d?.transport??null)))))},y3e="org.matrix.msc4143.rtc_foci";async function _3e(e,t,n,r,i,o){Sr.trace("Searching for a preferred transport");async function s(u){const d=await ag(e,t,u,n,{forceJwtEndpoint:i,delayEndpointBaseUrl:e.baseUrl,delayId:o},Sr);return{transport:{type:"livekit",livekit_service_url:u},sfuConfig:d}}if(r!==null)return Sr.info("Using LiveKit transport from dev tools: ",r),await s(r);async function a(u){for(const d of u)if(z3(d))try{return await s(d.livekit_service_url)}catch(p){if(p instanceof qp||p instanceof Mj)throw p;Sr.debug(`Could not use SFU service "${d.livekit_service_url}" as SFU`,p)}return null}if("_unstable_getRTCTransports"in e)try{const u=await e._unstable_getRTCTransports(),d=await a(u);if(d)return Sr.info("Using backend-configured (client.getRTCTransports) SFU",d),d}catch(u){if(u instanceof AE&&u.httpStatus===404)Sr.debug("Matrix homeserver does not provide any RTC transports via `/rtc/transports` (will retry with well-known.)");else{if(u instanceof qp)throw u;Sr.error("Unexpected error fetching RTC transports from backend",u)}}const c=e.getDomain();if(c){const u=(await VD.getRawClientConfig(c))?.[y3e],d=Array.isArray(u)?await a(u):null;if(d)return Sr.info("Using .well-known SFU",d),d}const l=it.get().livekit?.livekit_service_url;if(l)try{return Sr.info("Using config SFU",l),await s(l)}catch(u){if(u instanceof qp)throw u;Sr.error("Failed to validate config SFU",u)}throw new a3e(c??"")}async function ag(e,t,n,r,i,o){let s;try{s=await NO(async()=>e.getOpenIdToken())}catch(p){throw new qp(p instanceof Error?p:new Error("Unknown error"))}o?.debug("Got openID token",s),o?.info(`Trying to get JWT for focus ${n}...`);let a;const c=i?.forceJwtEndpoint===void 0,l=i?.forceJwtEndpoint===sg.Matrix_2_0;if(c||l)try{a=await w3e(t,n,r,s,i?.delayEndpointBaseUrl,i?.delayId),o?.info("Got JWT from call's active focus URL.")}catch(p){if(p instanceof Nj)o?.warn("Failed fetching jwt with matrix 2.0 endpoint (retry with legacy) Not supported",p),a=void 0;else if(o?.warn("Failed fetching jwt with matrix 2.0 endpoint other issues ->","(not going to try with legacy endpoint: forceOldJwtEndpoint is set to false, we did not get a not supported error from the sfu)",p),l)throw new Mj(p)}if(a===void 0&&(a=await b3e(t.deviceId,n,r,s),o?.info("Got JWT from call's active focus URL.")),!a)throw new Error("No `sfuConfig` after trying with old and new endpoints");const[,u]=a.jwt.split("."),d=JSON.parse(global.atob(u));return{jwt:a.jwt,url:a.url,livekitAlias:d.video.room,livekitIdentity:d.sub}}const cg=4;async function b3e(e,t,n,r){let i;if(await PE(cg,async()=>{i=await fetch(t+"/sfu/get",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({room:n,openid_token:r,device_id:e})})}),!i)throw new Error(`Network error while connecting to jwt service after ${cg} retries`);if(!i.ok)throw new Error("SFU Config fetch failed with status code "+i.status);return await i.json()}class Nj extends Error{constructor(t){super(t),this.name="NotSupported"}}async function w3e(e,t,n,r,i,o){const{userId:s,deviceId:a,memberId:c}=e,l={room_id:n,slot_id:"m.call#ROOM",openid_token:r,member:{id:c,claimed_user_id:s,claimed_device_id:a}};let u={};if(o&&i){const p=it.get().matrix_rtc_session?.delayed_leave_event_delay_ms??1e3;u={delay_id:o,delay_timeout:p,delay_cs_api_url:i}}let d;if(await PE(cg,async()=>{d=await fetch(t+"/get_token",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({...l,...u})})}),!d)throw new Error(`Network error while connecting to jwt service after ${cg} retries`);if(!d.ok){const p="SFU Config fetch failed with status code "+d.status;throw d.status===404?new Nj(p):new Error(p)}return await d.json()}var U3=(e=>(e.Initialized="Initialized",e.FetchingConfig="FetchingConfig",e.Stopped="Stopped",e.LivekitDisconnected="disconnected",e.LivekitConnecting="connecting",e.LivekitConnected="connected",e.LivekitReconnecting="reconnecting",e.LivekitSignalReconnecting="signalReconnecting",e))(U3||{});class S3e{constructor(t,n){this._state$=new Pt("Initialized"),this.state$=this._state$,this.stopped=!1,this.ownMembershipIdentity=t.ownMembershipIdentity,this.existingSFUConfig=t.existingSFUConfig,this.roomId=t.roomId,this.logger=n.getChild("[Connection "+t.transport.livekit_service_url+"]"),this.logger.info(`constructor: ${t.transport.livekit_service_url} roomId: ${this.roomId} withSfuConfig?: ${t.existingSFUConfig?JSON.stringify(t.existingSFUConfig):"undefined"}`);const{transport:r,client:i,scope:o}=t;this.scope=o,this.livekitRoom=t.livekitRoomFactory(),this.transport=r,this.client=i,this.remoteParticipants$=o.behavior(Vpe(this.livekitRoom)),o.onEnd(()=>{this.logger.info("Connection scope ended, stopping connection"),this.stop()})}get livekitAlias(){return this._livekitAlias}async start(){this.logger.debug("Starting Connection"),this.stopped=!1;try{this._state$.next("FetchingConfig");const{url:t,jwt:n,livekitAlias:r}=this.existingSFUConfig??await this.getSFUConfigForRemoteConnection();if(this.logger.debug("Starting Connection to: ",this.transport.livekit_service_url,"jwt: ",n,"wss: ",t,"livekitAlias: ",r),this._livekitAlias=r,this.stopped)return;Bpe(this.livekitRoom).pipe(this.scope.bind(),V(i=>i)).subscribe(i=>{this._state$.next(i)});try{this.logger.info(`livekitRoom.connect ${t}`),await this.livekitRoom.connect(t,n),this.logger.info(`livekitRoom.connect SUCCESS ${t}`)}catch(i){if(this.logger.info(`livekitRoom.connect FAILED ${t}`,i),i instanceof qD){if(i.status===503||i.status===200||i.status===429)throw new d3e;if(i.status===404)throw new f3e}throw i}if(this.stopped)return}catch(t){throw this.logger.debug(`Failed to connect to LiveKit room: ${t}`),this._state$.next(t instanceof gn?t:t instanceof Error?new za(t):new za(new Error(`${t}`))),t}}async getSFUConfigForRemoteConnection(){return await ag(this.client,this.ownMembershipIdentity,this.transport.livekit_service_url,this.roomId,{},this.logger)}async stop(){this.logger.debug(`stop: disconnecing from lk room ${this.transport.livekit_service_url}`),!this.stopped&&(await this.livekitRoom.disconnect(),this._state$.next("Stopped"),this.stopped=!0,this.logger.debug(`stop: DONE disconnecing from lk room ${this.transport.livekit_service_url}`))}async createPopoutToken(){let t;try{t=await NO(async()=>this.client.getOpenIdToken())}catch(n){throw new FailToGetOpenIdToken(n instanceof Error?n:new Error("Unknown error"))}return await ag(this.client,this.ownMembershipIdentity,this.transport.livekit_service_url,this.roomId,{},this.logger)}}var $j=(e=>(e.Waiting="transport_waiting",e))($j||{});const C3e=({scope:e,connectionManager:t,localTransport$:n,homeserverConnected:r,createPublisherFactory:i,joinMatrixRTC:o,logger:s,muteStates:a,matrixRTCSession:c})=>{const l=s.getChild("[LocalMembership]");l.debug("Creating local membership..");const u=e.behavior(n.pipe(im(T=>{let N;return T instanceof gn?N=T:N=new za(T instanceof Error?T:new Error("Unknown error from localTransport")),E(N),Ce(null)}))),d=e.behavior(ge([t.connectionManagerData$,u]).pipe(V(([{value:T},N])=>N===null?null:T.getConnectionForTransport(N.transport)),Ta(T=>{l.info(`Local connection updated: ${T?.transport?.livekit_service_url}`)})));d.pipe(Ee(T=>T?Pn(T.livekitRoom,ht.MediaDevicesError,N=>GD.getFailure(N)??null):Ce(null))).pipe(e.bind()).subscribe(T=>{T&&l.error("Failed to create local tracks:",T)});const g=Promise.withResolvers(),v=new Pt(!1),m=new Pt(null),_=()=>{g.resolve()},y=()=>{g.resolve(),v.next(!0)},w=()=>{v.next(!1)};e.reconcile(d,async T=>{if(l.info("reconcile based on new localConnection:",T?.transport.livekit_service_url),T!==null){const N=i(T);return m.next(N),Promise.resolve(async()=>{await N.destroy()})}}),e.reconcile(e.behavior(ge([m,ns(g.promise)]),null),async T=>{if(!T)return;const[N]=T;N&&await N.createAndSetupTracks().catch(M=>l.error(M))}),e.reconcile(e.behavior(ge([m,v])),async([T,N])=>{const M=T?.shouldPublish===!0;if(N&&!M)try{await T?.startPublishing()}catch(B){const F=B instanceof Error?B.message:String(B);b(new u3e(F))}else if(M)try{await T?.stopPublishing()}catch(B){b(new za(B))}});const S=new Pt(null),b=T=>{S.value!==null?l.error("Multiple Media Errors:",T):S.next(T)},C=new Pt(null),E=T=>{C.value!==null?l.error("Multiple Transport Errors:",T):C.next(T)},x=d.pipe(Ee(T=>T?T.state$:Ce(null))),I=e.behavior(ge([x,u,v,ns(g.promise).pipe(V(()=>!0),lt(!1))]).pipe(V(([T,N,M,B])=>{if(!N)return null;const F=B?"tracks_ready":"tracks_waiting_for_user";return T!==U3.LivekitConnected||F!=="tracks_ready"?{connection:T,tracks:F}:M?"publish_publishing":"publish_waiting_for_user"}),ar(KD))),L=new Pt(null),R=T=>{L.value!==null?l.error("Multiple Matrix Errors:",T):L.next(T)},k=e.behavior(ge([I,r.rtsSession$,L,C,S]).pipe(V(([T,N,M,B,F])=>B!==null?B:T&&N?{matrix:M??N,media:F??T}:"transport_waiting"))),A=e.behavior(sN(r.combined$,x.pipe(V(T=>T===U3.LivekitConnected))).pipe(Ta(T=>l.debug("livekit+matrix: Connected state changed",T)))),P=e.behavior(A.pipe(Al(),V(([T,N])=>T===!0&&N===!1)),!1);e.behavior(v.pipe(Al(),e.bind()),[void 0,v.value]).subscribe(([T,N])=>{Ae&&(!T&&N&&Ae.api.transport.send(io.JoinCall,{}).catch(M=>{l.error("Failed to send join action",M)}),T&&!N&&Ae.api.transport.send(io.HangupCall,{}).catch(M=>{l.error("Failed to send hangup action",M)}))}),a.video.enabled$.pipe(e.bind()).subscribe(T=>{c.updateCallIntent(T?"video":"audio").catch(N=>{if(N instanceof Error&&N.message==="Not connected yet")l.debug("'not connected yet' while updating the call intent (this is expected on startup)");else throw N})}),e.reconcile(e.behavior(ge([u,v])),async([T,N])=>{if(T&&N){try{o(T.transport)}catch(M){l.error("Error entering RTC session",M),M instanceof Error&&R(new c3e(M))}return Promise.resolve(async()=>{try{await c.leaveRoomSession(1e3)}catch(M){l.error("Error leaving RTC session",M)}})}});const O=e.behavior(d.pipe(V(T=>T?.livekitRoom?.localParticipant??null),Ta(T=>{l.debug("participant$ updated:",T?.identity)})));ge([O,r.combined$]).pipe(e.bind()).subscribe(([T,N])=>{if(!T)return;const M=T.trackPublications.values();if(N){for(const B of M)if(B.track?.isUpstreamPaused===!0){const F=B.track.kind;l.info(`Resuming ${F} track (MatrixRTC connection present)`),B.track.resumeUpstream().catch(K=>l.error(`Failed to resume ${F} track after MatrixRTC reconnection`,K))}}else for(const B of M)if(B.track?.isUpstreamPaused===!1){const F=B.track.kind;l.info(`Pausing ${F} track (uncertain MatrixRTC connection)`),B.track.pauseUpstream().catch(K=>l.error(`Failed to pause ${F} track after entering uncertain MatrixRTC connection`,K))}});const j=e.behavior(O.pipe(Ee(T=>T!==null?E3e(T):Ce(!1))));let $=null;return"getDisplayMedia"in(navigator.mediaDevices??{})&&!kt().hideScreensharing&&($=()=>{const T={audio:!0,selfBrowserSurface:"include",surfaceSwitching:"include",systemAudio:"include"},N=!j.value;l.info(`toggleScreenSharing called. Switching ${N?"On":"Off"}`),O.value?.setScreenShareEnabled(N,T).catch(l.error)}),{startTracks:_,requestJoinAndPublish:y,requestDisconnect:w,localMemberState$:k,participant$:O,reconnecting$:P,connected$:A,disconnected$:e.behavior(r.rtsSession$.pipe(V(T=>T===cp.Disconnected))),sharingScreen$:j,toggleScreenSharing:$,connection$:d,internalLoggerRef:l}};function E3e(e){return am(e,Te.TrackPublished,Te.TrackUnpublished,Te.LocalTrackPublished,Te.LocalTrackUnpublished).pipe(V(t=>t.isScreenShareEnabled))}function x3e(e,t,n,r){const{encryptMedia:i,matrixRTCMode:o}=r;Ke.instance.eventCallEnded.cacheStartCall(new Date),Ke.instance.eventCallStarted.track(e.room.roomId);const{features:s,matrix_rtc_session:a}=it.get(),c=s?.feature_use_device_session_member_events,{sendNotificationType:l,callIntent:u}=kt(),d=o===rr.Compatibility||o===rr.Matrix_2_0;let p;o===rr.Matrix_2_0?p=n:p={livekit_alias:e.room.roomId,...n},e.joinRTCSession(t,d?[]:[p],d?p:void 0,{notificationType:l,callIntent:u,manageMediaKeys:i,...c!==void 0&&{useLegacyMemberEvents:!c},delayedLeaveEventRestartMs:a?.delayed_leave_event_restart_ms,delayedLeaveEventDelayMs:a?.delayed_leave_event_delay_ms,delayedLeaveEventRestartLocalTimeoutMs:a?.delayed_leave_event_restart_local_timeout_ms,networkErrorRetryMs:a?.network_error_retry_ms,makeKeyDelay:a?.wait_for_key_rotation_ms,membershipEventExpiryMs:a?.membership_event_expiry_ms,useExperimentalToDeviceTransport:!0,unstableSendStickyEvents:o===rr.Matrix_2_0})}const I3e=(e,t)=>{const n=e.behavior(t.pipe(l3(i=>i.map(o=>{const s=i[0]??o,a=o.getTransport(s);return{membership:o,transport:z3(a)?a:void 0}})))),r=e.behavior(n.pipe(l3(i=>i.flatMap(({transport:o})=>o?[o]:[]))));return{membershipsWithTransport$:n,transports$:r}},R3e=(e,t)=>e.behavior(Pn(t,Us.MembershipsChanged,(n,r)=>r).pipe(qpe()),new Ti(t.memberships)),Oj=`function C(e,t,n,r){function o(i){return i instanceof n?i:new n(function(c){c(i)})}return new(n||(n=Promise))(function(i,c){function g(b){try{y(r.next(b))}catch(S){c(S)}}function v(b){try{y(r.throw(b))}catch(S){c(S)}}function y(b){b.done?i(b.value):o(b.value).then(g,v)}y((r=r.apply(e,t||[])).next())})}var X={exports:{}},ke=X.exports,ie;function Re(){return ie||(ie=1,(function(e){(function(t,n){e.exports?e.exports=n():t.log=n()})(ke,function(){var t=function(){},n="undefined",r=typeof window!==n&&typeof window.navigator!==n&&/Trident\\/|MSIE /.test(window.navigator.userAgent),o=["trace","debug","info","warn","error"],i={},c=null;function g(I,R){var h=I[R];if(typeof h.bind=="function")return h.bind(I);try{return Function.prototype.bind.call(h,I)}catch{return function(){return Function.prototype.apply.apply(h,[I,arguments])}}}function v(){console.log&&(console.log.apply?console.log.apply(console,arguments):Function.prototype.apply.apply(console.log,[console,arguments])),console.trace&&console.trace()}function y(I){return I==="debug"&&(I="log"),typeof console===n?!1:I==="trace"&&r?v:console[I]!==void 0?g(console,I):console.log!==void 0?g(console,"log"):t}function b(){for(var I=this.getLevel(),R=0;R<o.length;R++){var h=o[R];this[h]=R<I?t:this.methodFactory(h,I,this.name)}if(this.log=this.debug,typeof console===n&&I<this.levels.SILENT)return"No console available for logging"}function S(I){return function(){typeof console!==n&&(b.call(this),this[I].apply(this,arguments))}}function m(I,R,h){return y(I)||S.apply(this,arguments)}function E(I,R){var h=this,O,A,a,s="loglevel";typeof I=="string"?s+=":"+I:typeof I=="symbol"&&(s=void 0);function u(w){var k=(o[w]||"silent").toUpperCase();if(!(typeof window===n||!s)){try{window.localStorage[s]=k;return}catch{}try{window.document.cookie=encodeURIComponent(s)+"="+k+";"}catch{}}}function d(){var w;if(!(typeof window===n||!s)){try{w=window.localStorage[s]}catch{}if(typeof w===n)try{var k=window.document.cookie,T=encodeURIComponent(s),j=k.indexOf(T+"=");j!==-1&&(w=/^([^;]+)/.exec(k.slice(j+T.length+1))[1])}catch{}return h.levels[w]===void 0&&(w=void 0),w}}function l(){if(!(typeof window===n||!s)){try{window.localStorage.removeItem(s)}catch{}try{window.document.cookie=encodeURIComponent(s)+"=; expires=Thu, 01 Jan 1970 00:00:00 UTC"}catch{}}}function _(w){var k=w;if(typeof k=="string"&&h.levels[k.toUpperCase()]!==void 0&&(k=h.levels[k.toUpperCase()]),typeof k=="number"&&k>=0&&k<=h.levels.SILENT)return k;throw new TypeError("log.setLevel() called with invalid level: "+w)}h.name=I,h.levels={TRACE:0,DEBUG:1,INFO:2,WARN:3,ERROR:4,SILENT:5},h.methodFactory=R||m,h.getLevel=function(){return a??A??O},h.setLevel=function(w,k){return a=_(w),k!==!1&&u(a),b.call(h)},h.setDefaultLevel=function(w){A=_(w),d()||h.setLevel(w,!1)},h.resetLevel=function(){a=null,l(),b.call(h)},h.enableAll=function(w){h.setLevel(h.levels.TRACE,w)},h.disableAll=function(w){h.setLevel(h.levels.SILENT,w)},h.rebuild=function(){if(c!==h&&(O=_(c.getLevel())),b.call(h),c===h)for(var w in i)i[w].rebuild()},O=_(c?c.getLevel():"WARN");var p=d();p!=null&&(a=_(p)),b.call(h)}c=new E,c.getLogger=function(R){if(typeof R!="symbol"&&typeof R!="string"||R==="")throw new TypeError("You must supply a name when creating a logger.");var h=i[R];return h||(h=i[R]=new E(R,c.methodFactory)),h};var P=typeof window!==n?window.log:void 0;return c.noConflict=function(){return typeof window!==n&&window.log===c&&(window.log=P),c},c.getLoggers=function(){return i},c.default=c,c})})(X)),X.exports}var te=Re(),H;(function(e){e[e.trace=0]="trace",e[e.debug=1]="debug",e[e.info=2]="info",e[e.warn=3]="warn",e[e.error=4]="error",e[e.silent=5]="silent"})(H||(H={}));var ee;(function(e){e.Default="livekit",e.Room="livekit-room",e.TokenSource="livekit-token-source",e.Participant="livekit-participant",e.Track="livekit-track",e.Publication="livekit-track-publication",e.Engine="livekit-engine",e.Signal="livekit-signal",e.PCManager="livekit-pc-manager",e.PCTransport="livekit-pc-transport",e.E2EE="lk-e2ee"})(ee||(ee={}));let Ce=te.getLogger("livekit");Object.values(ee).map(e=>te.getLogger(e));Ce.setDefaultLevel(H.info);const f=te.getLogger("lk-e2ee");var Le=Object.defineProperty,Pe=(e,t,n)=>t in e?Le(e,t,{enumerable:!0,configurable:!0,writable:!0,value:n}):e[t]=n,se=(e,t,n)=>Pe(e,typeof t!="symbol"?t+"":t,n);class Ke{constructor(){se(this,"_locking"),se(this,"_locks"),this._locking=Promise.resolve(),this._locks=0}isLocked(){return this._locks>0}lock(){this._locks+=1;let t;const n=new Promise(o=>t=()=>{this._locks-=1,o()}),r=this._locking.then(()=>t);return this._locking=this._locking.then(()=>n),r}}var N;(function(e){e[e.WAITING=0]="WAITING",e[e.RUNNING=1]="RUNNING",e[e.COMPLETED=2]="COMPLETED"})(N||(N={}));class xe{constructor(){this.pendingTasks=new Map,this.taskMutex=new Ke,this.nextTaskIndex=0}run(t){return C(this,void 0,void 0,function*(){const n={id:this.nextTaskIndex++,enqueuedAt:Date.now(),status:N.WAITING};this.pendingTasks.set(n.id,n);const r=yield this.taskMutex.lock();try{return n.executedAt=Date.now(),n.status=N.RUNNING,yield t()}finally{n.status=N.COMPLETED,this.pendingTasks.delete(n.id),r()}})}flush(){return C(this,void 0,void 0,function*(){return this.run(()=>C(this,void 0,void 0,function*(){}))})}snapshot(){return Array.from(this.pendingTasks.values())}}const F="AES-GCM",Oe=10,$={key:10,delta:3,audio:1,empty:0},oe=12,Ae="LKFrameEncryptionKey",Me={sharedKey:!1,ratchetSalt:Ae,ratchetWindowSize:8,failureTolerance:Oe,keyringSize:16};class Te extends Error{constructor(t,n){super(n||"an error has occured"),this.name="LiveKitError",this.code=t}}var ae;(function(e){e[e.NotAllowed=0]="NotAllowed",e[e.ServerUnreachable=1]="ServerUnreachable",e[e.InternalError=2]="InternalError",e[e.Cancelled=3]="Cancelled",e[e.LeaveRequest=4]="LeaveRequest",e[e.Timeout=5]="Timeout"})(ae||(ae={}));var ce;(function(e){e[e.AlreadyOpened=0]="AlreadyOpened",e[e.AbnormalEnd=1]="AbnormalEnd",e[e.DecodeFailed=2]="DecodeFailed",e[e.LengthExceeded=3]="LengthExceeded",e[e.Incomplete=4]="Incomplete",e[e.HandlerAlreadyRegistered=7]="HandlerAlreadyRegistered",e[e.EncryptionTypeMismatch=8]="EncryptionTypeMismatch"})(ce||(ce={}));var G;(function(e){e.PermissionDenied="PermissionDenied",e.NotFound="NotFound",e.DeviceInUse="DeviceInUse",e.Other="Other"})(G||(G={}));(function(e){function t(n){if(n&&"name"in n)return n.name==="NotFoundError"||n.name==="DevicesNotFoundError"?e.NotFound:n.name==="NotAllowedError"||n.name==="PermissionDeniedError"?e.PermissionDenied:n.name==="NotReadableError"||n.name==="TrackStartError"?e.DeviceInUse:e.Other}e.getFailure=t})(G||(G={}));var K;(function(e){e[e.InvalidKey=0]="InvalidKey",e[e.MissingKey=1]="MissingKey",e[e.InternalError=2]="InternalError"})(K||(K={}));class x extends Te{constructor(t){let n=arguments.length>1&&arguments[1]!==void 0?arguments[1]:K.InternalError,r=arguments.length>2?arguments[2]:void 0;super(40,t),this.reason=n,this.participantIdentity=r}}var ue;(function(e){e.SetKey="setKey",e.RatchetRequest="ratchetRequest",e.KeyRatcheted="keyRatcheted"})(ue||(ue={}));var Y;(function(e){e.KeyRatcheted="keyRatcheted"})(Y||(Y={}));var de;(function(e){e.ParticipantEncryptionStatusChanged="participantEncryptionStatusChanged",e.EncryptionError="encryptionError"})(de||(de={}));var U;(function(e){e.Error="cryptorError"})(U||(U={}));function De(e){return"type"in e}function Fe(e){return C(this,arguments,void 0,function(t){let n=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{name:F},r=arguments.length>2&&arguments[2]!==void 0?arguments[2]:"encrypt";return(function*(){return crypto.subtle.importKey("raw",t,n,!1,r==="derive"?["deriveBits","deriveKey"]:["encrypt","decrypt"])})()})}function ye(e,t){const r=new TextEncoder().encode(t);switch(e){case"HKDF":return{name:"HKDF",salt:r,hash:"SHA-256",info:new ArrayBuffer(128)};case"PBKDF2":return{name:"PBKDF2",salt:r,hash:"SHA-256",iterations:1e5};default:throw new Error("algorithm ".concat(e," is currently unsupported"))}}function ne(e,t){return C(this,void 0,void 0,function*(){const n=ye(e.algorithm.name,t),r=yield crypto.subtle.deriveKey(n,e,{name:F,length:128},!1,["encrypt","decrypt"]);return{material:e,encryptionKey:r}})}function Be(e,t){return C(this,void 0,void 0,function*(){const n=ye(e.algorithm.name,t);return crypto.subtle.deriveBits(n,e,256)})}function Ne(e){for(var t=0;t<e.length-3;t++)if(e[t]==0&&e[t+1]==0&&e[t+2]==3)return!0;return!1}function Ue(e){const t=[];for(var n=e.length,r=0;r<e.length;)n-r>=3&&!e[r]&&!e[r+1]&&e[r+2]==3?(t.push(e[r++]),t.push(e[r++]),r++):t.push(e[r++]);return new Uint8Array(t)}const qe=2,le=3;function We(e){const t=[];for(var n=0,r=0;r<e.length;++r){var o=e[r];o<=le&&n>=qe&&(t.push(le),n=0),t.push(o),o==0?++n:n=0}return new Uint8Array(t)}class M{static makeIV(t){const n=new ArrayBuffer(12),r=new DataView(n),o=crypto.getRandomValues(new Uint32Array(1));return r.setUint32(0,o[0]),r.setUint32(4,t),r.setUint32(8,t-M.sendCount%65535),M.sendCount++,n}static encrypt(t,n){return C(this,void 0,void 0,function*(){const r=M.makeIV(performance.now()),o=yield n.getKeySet();if(!o)throw new Error("No key set found");const i=yield crypto.subtle.encrypt({name:F,iv:r},o.encryptionKey,new Uint8Array(t));return{payload:new Uint8Array(i),iv:new Uint8Array(r),keyIndex:n.getCurrentKeyIndex()}})}static decrypt(t,n,r){return C(this,arguments,void 0,function(o,i,c){let g=arguments.length>3&&arguments[3]!==void 0?arguments[3]:0,v=arguments.length>4?arguments[4]:void 0,y=arguments.length>5&&arguments[5]!==void 0?arguments[5]:{ratchetCount:0};return(function*(){const b=yield c.getKeySet(g);if(!b)throw new Error("No key set found");try{const S=yield crypto.subtle.decrypt({name:F,iv:i},b.encryptionKey,new Uint8Array(o));return{payload:new Uint8Array(S)}}catch(S){if(c.keyProviderOptions.ratchetWindowSize>0)if(y.ratchetCount<c.keyProviderOptions.ratchetWindowSize){f.debug("DataCryptor: ratcheting key attempt ".concat(y.ratchetCount," of ").concat(c.keyProviderOptions.ratchetWindowSize,", for data packet"));let m,E;(v??b)===c.getKeySet(g)&&(E=yield c.ratchetKey(g,!1),m=yield ne(E.cryptoKey,c.keyProviderOptions.ratchetSalt));const P=yield M.decrypt(o,i,c,g,v,{ratchetCount:y.ratchetCount+1,encryptionKey:m?.encryptionKey});return P&&m&&(v??b)===c.getKeySet(g)&&(c.setKeySet(m,g,E),c.setCurrentKeyIndex(g)),P}else throw f.warn("DataCryptor: maximum ratchet attempts exceeded"),new x("DataCryptor: valid key missing for participant ".concat(c.participantIdentity),K.InvalidKey,c.participantIdentity);else throw new x("DataCryptor: Decryption failed: ".concat(S.message),K.InvalidKey,c.participantIdentity)}})()})}}M.sendCount=0;var V={exports:{}},fe;function je(){if(fe)return V.exports;fe=1;var e=typeof Reflect=="object"?Reflect:null,t=e&&typeof e.apply=="function"?e.apply:function(s,u,d){return Function.prototype.apply.call(s,u,d)},n;e&&typeof e.ownKeys=="function"?n=e.ownKeys:Object.getOwnPropertySymbols?n=function(s){return Object.getOwnPropertyNames(s).concat(Object.getOwnPropertySymbols(s))}:n=function(s){return Object.getOwnPropertyNames(s)};function r(a){console&&console.warn&&console.warn(a)}var o=Number.isNaN||function(s){return s!==s};function i(){i.init.call(this)}V.exports=i,V.exports.once=h,i.EventEmitter=i,i.prototype._events=void 0,i.prototype._eventsCount=0,i.prototype._maxListeners=void 0;var c=10;function g(a){if(typeof a!="function")throw new TypeError('The "listener" argument must be of type Function. Received type '+typeof a)}Object.defineProperty(i,"defaultMaxListeners",{enumerable:!0,get:function(){return c},set:function(a){if(typeof a!="number"||a<0||o(a))throw new RangeError('The value of "defaultMaxListeners" is out of range. It must be a non-negative number. Received '+a+".");c=a}}),i.init=function(){(this._events===void 0||this._events===Object.getPrototypeOf(this)._events)&&(this._events=Object.create(null),this._eventsCount=0),this._maxListeners=this._maxListeners||void 0},i.prototype.setMaxListeners=function(s){if(typeof s!="number"||s<0||o(s))throw new RangeError('The value of "n" is out of range. It must be a non-negative number. Received '+s+".");return this._maxListeners=s,this};function v(a){return a._maxListeners===void 0?i.defaultMaxListeners:a._maxListeners}i.prototype.getMaxListeners=function(){return v(this)},i.prototype.emit=function(s){for(var u=[],d=1;d<arguments.length;d++)u.push(arguments[d]);var l=s==="error",_=this._events;if(_!==void 0)l=l&&_.error===void 0;else if(!l)return!1;if(l){var p;if(u.length>0&&(p=u[0]),p instanceof Error)throw p;var w=new Error("Unhandled error."+(p?" ("+p.message+")":""));throw w.context=p,w}var k=_[s];if(k===void 0)return!1;if(typeof k=="function")t(k,this,u);else for(var T=k.length,j=P(k,T),d=0;d<T;++d)t(j[d],this,u);return!0};function y(a,s,u,d){var l,_,p;if(g(u),_=a._events,_===void 0?(_=a._events=Object.create(null),a._eventsCount=0):(_.newListener!==void 0&&(a.emit("newListener",s,u.listener?u.listener:u),_=a._events),p=_[s]),p===void 0)p=_[s]=u,++a._eventsCount;else if(typeof p=="function"?p=_[s]=d?[u,p]:[p,u]:d?p.unshift(u):p.push(u),l=v(a),l>0&&p.length>l&&!p.warned){p.warned=!0;var w=new Error("Possible EventEmitter memory leak detected. "+p.length+" "+String(s)+" listeners added. Use emitter.setMaxListeners() to increase limit");w.name="MaxListenersExceededWarning",w.emitter=a,w.type=s,w.count=p.length,r(w)}return a}i.prototype.addListener=function(s,u){return y(this,s,u,!1)},i.prototype.on=i.prototype.addListener,i.prototype.prependListener=function(s,u){return y(this,s,u,!0)};function b(){if(!this.fired)return this.target.removeListener(this.type,this.wrapFn),this.fired=!0,arguments.length===0?this.listener.call(this.target):this.listener.apply(this.target,arguments)}function S(a,s,u){var d={fired:!1,wrapFn:void 0,target:a,type:s,listener:u},l=b.bind(d);return l.listener=u,d.wrapFn=l,l}i.prototype.once=function(s,u){return g(u),this.on(s,S(this,s,u)),this},i.prototype.prependOnceListener=function(s,u){return g(u),this.prependListener(s,S(this,s,u)),this},i.prototype.removeListener=function(s,u){var d,l,_,p,w;if(g(u),l=this._events,l===void 0)return this;if(d=l[s],d===void 0)return this;if(d===u||d.listener===u)--this._eventsCount===0?this._events=Object.create(null):(delete l[s],l.removeListener&&this.emit("removeListener",s,d.listener||u));else if(typeof d!="function"){for(_=-1,p=d.length-1;p>=0;p--)if(d[p]===u||d[p].listener===u){w=d[p].listener,_=p;break}if(_<0)return this;_===0?d.shift():I(d,_),d.length===1&&(l[s]=d[0]),l.removeListener!==void 0&&this.emit("removeListener",s,w||u)}return this},i.prototype.off=i.prototype.removeListener,i.prototype.removeAllListeners=function(s){var u,d,l;if(d=this._events,d===void 0)return this;if(d.removeListener===void 0)return arguments.length===0?(this._events=Object.create(null),this._eventsCount=0):d[s]!==void 0&&(--this._eventsCount===0?this._events=Object.create(null):delete d[s]),this;if(arguments.length===0){var _=Object.keys(d),p;for(l=0;l<_.length;++l)p=_[l],p!=="removeListener"&&this.removeAllListeners(p);return this.removeAllListeners("removeListener"),this._events=Object.create(null),this._eventsCount=0,this}if(u=d[s],typeof u=="function")this.removeListener(s,u);else if(u!==void 0)for(l=u.length-1;l>=0;l--)this.removeListener(s,u[l]);return this};function m(a,s,u){var d=a._events;if(d===void 0)return[];var l=d[s];return l===void 0?[]:typeof l=="function"?u?[l.listener||l]:[l]:u?R(l):P(l,l.length)}i.prototype.listeners=function(s){return m(this,s,!0)},i.prototype.rawListeners=function(s){return m(this,s,!1)},i.listenerCount=function(a,s){return typeof a.listenerCount=="function"?a.listenerCount(s):E.call(a,s)},i.prototype.listenerCount=E;function E(a){var s=this._events;if(s!==void 0){var u=s[a];if(typeof u=="function")return 1;if(u!==void 0)return u.length}return 0}i.prototype.eventNames=function(){return this._eventsCount>0?n(this._events):[]};function P(a,s){for(var u=new Array(s),d=0;d<s;++d)u[d]=a[d];return u}function I(a,s){for(;s+1<a.length;s++)a[s]=a[s+1];a.pop()}function R(a){for(var s=new Array(a.length),u=0;u<s.length;++u)s[u]=a[u].listener||a[u];return s}function h(a,s){return new Promise(function(u,d){function l(p){a.removeListener(s,_),d(p)}function _(){typeof a.removeListener=="function"&&a.removeListener("error",l),u([].slice.call(arguments))}A(a,s,_,{once:!0}),s!=="error"&&O(a,l,{once:!0})})}function O(a,s,u){typeof a.on=="function"&&A(a,"error",s,u)}function A(a,s,u,d){if(typeof a.on=="function")d.once?a.once(s,u):a.on(s,u);else if(typeof a.addEventListener=="function")a.addEventListener(s,function l(_){d.once&&a.removeEventListener(s,l),u(_)});else throw new TypeError('The "emitter" argument must be of type EventEmitter. Received type '+typeof a)}return V.exports}var pe=je();const Ve=31;var Z;(function(e){e[e.SLICE_NON_IDR=1]="SLICE_NON_IDR",e[e.SLICE_PARTITION_A=2]="SLICE_PARTITION_A",e[e.SLICE_PARTITION_B=3]="SLICE_PARTITION_B",e[e.SLICE_PARTITION_C=4]="SLICE_PARTITION_C",e[e.SLICE_IDR=5]="SLICE_IDR",e[e.SEI=6]="SEI",e[e.SPS=7]="SPS",e[e.PPS=8]="PPS",e[e.AUD=9]="AUD",e[e.END_SEQ=10]="END_SEQ",e[e.END_STREAM=11]="END_STREAM",e[e.FILLER_DATA=12]="FILLER_DATA",e[e.SPS_EXT=13]="SPS_EXT",e[e.PREFIX_NALU=14]="PREFIX_NALU",e[e.SUBSET_SPS=15]="SUBSET_SPS",e[e.DPS=16]="DPS",e[e.SLICE_AUX=19]="SLICE_AUX",e[e.SLICE_EXT=20]="SLICE_EXT",e[e.SLICE_LAYER_EXT=21]="SLICE_LAYER_EXT"})(Z||(Z={}));var L;(function(e){e[e.TRAIL_N=0]="TRAIL_N",e[e.TRAIL_R=1]="TRAIL_R",e[e.TSA_N=2]="TSA_N",e[e.TSA_R=3]="TSA_R",e[e.STSA_N=4]="STSA_N",e[e.STSA_R=5]="STSA_R",e[e.RADL_N=6]="RADL_N",e[e.RADL_R=7]="RADL_R",e[e.RASL_N=8]="RASL_N",e[e.RASL_R=9]="RASL_R",e[e.BLA_W_LP=16]="BLA_W_LP",e[e.BLA_W_RADL=17]="BLA_W_RADL",e[e.BLA_N_LP=18]="BLA_N_LP",e[e.IDR_W_RADL=19]="IDR_W_RADL",e[e.IDR_N_LP=20]="IDR_N_LP",e[e.CRA_NUT=21]="CRA_NUT",e[e.VPS_NUT=32]="VPS_NUT",e[e.SPS_NUT=33]="SPS_NUT",e[e.PPS_NUT=34]="PPS_NUT",e[e.AUD_NUT=35]="AUD_NUT",e[e.EOS_NUT=36]="EOS_NUT",e[e.EOB_NUT=37]="EOB_NUT",e[e.FD_NUT=38]="FD_NUT",e[e.PREFIX_SEI_NUT=39]="PREFIX_SEI_NUT",e[e.SUFFIX_SEI_NUT=40]="SUFFIX_SEI_NUT"})(L||(L={}));function ge(e){return e&Ve}function ve(e){return e>>1&63}function we(e){return e===Z.SLICE_IDR||e===Z.SLICE_NON_IDR}function me(e){return e===L.TRAIL_N||e===L.TRAIL_R||e===L.TSA_N||e===L.TSA_R||e===L.STSA_N||e===L.STSA_R||e===L.RADL_N||e===L.RADL_R||e===L.RASL_N||e===L.RASL_R||e===L.BLA_W_LP||e===L.BLA_W_RADL||e===L.BLA_N_LP||e===L.IDR_W_RADL||e===L.IDR_N_LP||e===L.CRA_NUT}function Xe(e,t){for(const n of t){if(we(ge(e[n])))return"h264";if(me(ve(e[n])))return"h265"}return"unknown"}function ze(e,t,n){for(const r of t)if(n==="h265"){const o=ve(e[r]);if(me(o))return r+2}else{const o=ge(e[r]);if(we(o))return r+2}return null}function Ge(e){const t=[];let n=0,r=0,o=e.length-3;for(;r<o;){for(;r<o&&!(r<o-1&&e[r]===0&&e[r+1]===0&&e[r+2]===0&&e[r+3]===1||e[r]===0&&e[r+1]===0&&e[r+2]===1);)r++;r>=o&&(r=e.length);let i=r;for(;i>n&&e[i-1]===0;)i--;if(n===0){if(i!==n)throw TypeError("byte stream contains leading data")}else t.push(n);let c=3;r<e.length-3&&e[r]===0&&e[r+1]===0&&e[r+2]===0&&e[r+3]===1&&(c=4),n=r=r+c}return t}function Ye(e,t){const n=Ge(e),r=t??Xe(e,n);if(r==="unknown")return{unencryptedBytes:0,detectedCodec:r,requiresNALUProcessing:!1};const o=ze(e,n,r);if(o===null)throw new TypeError("Could not find NALU");return{unencryptedBytes:o,detectedCodec:r,requiresNALUProcessing:!0}}function Ze(e){return C(this,void 0,void 0,function*(){const t=yield crypto.subtle.digest("SHA-256",e),n=new Uint8Array(t);return Array.from(n).map(r=>r.toString(16).padStart(2,"0")).join("")})}const B={VP8KeyFrame8x8:"ef0161653d8b2b23aad46624b420af1d03ce48950e9fc85718028f91b50f9219",H264KeyFrame2x2SPS:"f0a0e09647d891d6d50aa898bce7108090375d0d55e50a2bb21147afee558e44",H264KeyFrame2x2PPS:"61d9665eed71b6d424ae9539330a3bdd5cb386d4d781c808219a6e36750493a7",H264KeyFrame2x2IDR:"faffc26b68a2fc09096fa20f3351e706398b6f838a7500c8063472c2e476e90d",OpusSilenceFrame:"aad8d31fc56b2802ca500e58c2fb9d0b29ad71bb7cb52cd6530251eade188988"};function Je(e){return C(this,void 0,void 0,function*(){switch(yield Ze(e)){case B.VP8KeyFrame8x8:return"vp8";case B.H264KeyFrame2x2SPS:return"h264";case B.H264KeyFrame2x2PPS:return"h264";case B.H264KeyFrame2x2IDR:return"h264";case B.OpusSilenceFrame:return"opus";default:return null}})}const Ie=new Map;class $e extends pe.EventEmitter{encodeFunction(t,n){throw Error("not implemented for subclass")}decodeFunction(t,n){throw Error("not implemented for subclass")}}class Qe extends $e{constructor(t){var n;super(),this.isTransformActive=!1,this.lastErrorTimestamp=new Map,this.errorCounts=new Map,this.ERROR_THROTTLE_MS=1e3,this.MAX_ERRORS_PER_MINUTE=5,this.ERROR_WINDOW_MS=6e4,this.sendCounts=new Map,this.keys=t.keys,this.participantIdentity=t.participantIdentity,this.rtpMap=new Map,this.keyProviderOptions=t.keyProviderOptions,this.sifTrailer=(n=t.sifTrailer)!==null&&n!==void 0?n:Uint8Array.from([])}get logContext(){return{participant:this.participantIdentity,mediaTrackId:this.trackId,fallbackCodec:this.videoCodec}}setParticipant(t,n){f.debug("setting new participant on cryptor",Object.assign(Object.assign({},this.logContext),{participant:t})),this.participantIdentity&&f.error("cryptor has already a participant set, participant should have been unset before",Object.assign({},this.logContext)),this.participantIdentity=t,this.keys=n}unsetParticipant(){f.debug("unsetting participant",this.logContext),this.participantIdentity=void 0,this.lastErrorTimestamp=new Map,this.errorCounts=new Map}isEnabled(){if(this.participantIdentity)return Ie.get(this.participantIdentity)}getParticipantIdentity(){return this.participantIdentity}getTrackId(){return this.trackId}setVideoCodec(t){this.videoCodec=t}setRtpMap(t){this.rtpMap=t}setupTransform(t,n,r,o,i,c){if(c&&(f.info("setting codec on cryptor to",{codec:c}),this.videoCodec=c),f.debug("Setting up frame cryptor transform",Object.assign({operation:t,passedTrackId:o,codec:c},this.logContext)),i&&this.isTransformActive){f.debug("reuse transform",Object.assign({},this.logContext));return}const g=t==="encode"?this.encodeFunction:this.decodeFunction,v=new TransformStream({transform:g.bind(this)});this.isTransformActive=!0,n.pipeThrough(v).pipeTo(r).catch(y=>{f.warn(y),this.emit(U.Error,y instanceof x?y:new x(y.message,void 0,this.participantIdentity))}).finally(()=>{this.isTransformActive=!1}),this.trackId=o}setSifTrailer(t){f.debug("setting SIF trailer",Object.assign(Object.assign({},this.logContext),{trailer:t})),this.sifTrailer=t}shouldEmitError(t){var n,r;const o=Date.now(),i=(n=this.lastErrorTimestamp.get(t))!==null&&n!==void 0?n:0,c=(r=this.errorCounts.get(t))!==null&&r!==void 0?r:0;return o-i>this.ERROR_WINDOW_MS?(this.errorCounts.set(t,0),this.lastErrorTimestamp.set(t,o),!0):o-i<this.ERROR_THROTTLE_MS?!1:c>=this.MAX_ERRORS_PER_MINUTE?(c===this.MAX_ERRORS_PER_MINUTE&&(f.warn("Suppressing further decryption errors for ".concat(this.participantIdentity),Object.assign(Object.assign({},this.logContext),{errorKey:t})),this.errorCounts.set(t,c+1)),!1):(this.lastErrorTimestamp.set(t,o),this.errorCounts.set(t,c+1),!0)}emitThrottledError(t){var n;const r="".concat(this.participantIdentity,"-").concat(t.reason,"-decrypt");if(this.shouldEmitError(r)){const o=(n=this.errorCounts.get(r))!==null&&n!==void 0?n:0;o>1&&f.debug("Decryption error (".concat(o," occurrences in window)"),Object.assign(Object.assign({},this.logContext),{reason:K[t.reason]})),this.emit(U.Error,t)}}encodeFunction(t,n){return C(this,void 0,void 0,function*(){var r;if(!this.isEnabled()||t.data.byteLength===0)return n.enqueue(t);const o=this.keys.getKeySet();if(!o){this.emitThrottledError(new x("key set not found for ".concat(this.participantIdentity," at index ").concat(this.keys.getCurrentKeyIndex()),K.MissingKey,this.participantIdentity));return}const{encryptionKey:i}=o,c=this.keys.getCurrentKeyIndex();if(i){const v=this.makeIV((r=t.getMetadata().synchronizationSource)!==null&&r!==void 0?r:-1,t.timestamp);let y=this.getUnencryptedBytes(t);const b=new Uint8Array(t.data,0,y.unencryptedBytes),S=new Uint8Array(2);S[0]=oe,S[1]=c;try{const m=yield crypto.subtle.encrypt({name:F,iv:v,additionalData:new Uint8Array(t.data,0,b.byteLength)},i,new Uint8Array(t.data,y.unencryptedBytes));let E=new Uint8Array(m.byteLength+v.byteLength+S.byteLength);E.set(new Uint8Array(m)),E.set(new Uint8Array(v),m.byteLength),E.set(S,m.byteLength+v.byteLength),y.requiresNALUProcessing&&(E=We(E));var g=new Uint8Array(b.byteLength+E.byteLength);return g.set(b),g.set(E,b.byteLength),t.data=g.buffer,n.enqueue(t)}catch(m){f.error(m)}}else f.debug("failed to encrypt, emitting error",this.logContext),this.emitThrottledError(new x("encryption key missing for encoding",K.MissingKey,this.participantIdentity))})}decodeFunction(t,n){return C(this,void 0,void 0,function*(){if(!this.isEnabled()||t.data.byteLength===0)return n.enqueue(t);if(He(t.data,this.sifTrailer)){if(t.data=t.data.slice(0,t.data.byteLength-this.sifTrailer.byteLength),yield Je(t.data))return f.debug("enqueue SIF",this.logContext),n.enqueue(t);f.warn("Unexpected SIF frame payload, dropping frame",this.logContext);return}const o=new Uint8Array(t.data)[t.data.byteLength-1];if(!this.keys.hasInvalidKeyAtIndex(o))if(this.keys.getKeySet(o))try{const i=yield this.decryptFrame(t,o);if(this.keys.decryptionSuccess(o),i)return n.enqueue(i)}catch(i){i instanceof x&&i.reason===K.InvalidKey?this.keys.hasValidKey&&(this.emitThrottledError(i),this.keys.decryptionFailure(o)):f.warn("decoding frame failed",{error:i})}else f.warn("skipping decryption due to missing key at index ".concat(o)),this.emitThrottledError(new x("missing key at index ".concat(o," for participant ").concat(this.participantIdentity),K.MissingKey,this.participantIdentity)),this.keys.decryptionFailure(o)})}decryptFrame(t,n){return C(this,arguments,void 0,function(r,o){var i=this;let c=arguments.length>2&&arguments[2]!==void 0?arguments[2]:void 0,g=arguments.length>3&&arguments[3]!==void 0?arguments[3]:{ratchetCount:0};return(function*(){var v;const y=i.keys.getKeySet(o);if(!g.encryptionKey&&!y)throw new TypeError("no encryption key found for decryption of ".concat(i.participantIdentity));let b=i.getUnencryptedBytes(r);try{const m=new Uint8Array(r.data,0,b.unencryptedBytes);var S=new Uint8Array(r.data,m.length,r.data.byteLength-m.length);if(b.requiresNALUProcessing&&Ne(S)){S=Ue(S);const s=new Uint8Array(m.byteLength+S.byteLength);s.set(m),s.set(S,m.byteLength),r.data=s.buffer}const E=new Uint8Array(r.data,r.data.byteLength-2,2),P=E[0],I=new Uint8Array(r.data,r.data.byteLength-P-E.byteLength,P),R=m.byteLength,h=r.data.byteLength-(m.byteLength+P+E.byteLength),O=yield crypto.subtle.decrypt({name:F,iv:I,additionalData:new Uint8Array(r.data,0,m.byteLength)},(v=g.encryptionKey)!==null&&v!==void 0?v:y.encryptionKey,new Uint8Array(r.data,R,h)),A=new ArrayBuffer(m.byteLength+O.byteLength),a=new Uint8Array(A);return a.set(new Uint8Array(r.data,0,m.byteLength)),a.set(new Uint8Array(O),m.byteLength),r.data=A,r}catch(m){if(i.keyProviderOptions.ratchetWindowSize>0)if(g.ratchetCount<i.keyProviderOptions.ratchetWindowSize){f.debug("ratcheting key attempt ".concat(g.ratchetCount," of ").concat(i.keyProviderOptions.ratchetWindowSize,", for kind ").concat(r instanceof RTCEncodedAudioFrame?"audio":"video"));let E,P;(c??y)===i.keys.getKeySet(o)&&(P=yield i.keys.ratchetKey(o,!1),E=yield ne(P.cryptoKey,i.keyProviderOptions.ratchetSalt));const I=yield i.decryptFrame(r,o,c||y,{ratchetCount:g.ratchetCount+1,encryptionKey:E?.encryptionKey});return I&&E&&(c??y)===i.keys.getKeySet(o)&&(i.keys.setKeySet(E,o,P),i.keys.setCurrentKeyIndex(o)),I}else throw f.warn("maximum ratchet attempts exceeded"),new x("valid key missing for participant ".concat(i.participantIdentity),K.InvalidKey,i.participantIdentity);else throw new x("Decryption failed: ".concat(m.message),K.InvalidKey,i.participantIdentity)}})()})}makeIV(t,n){var r;const o=new ArrayBuffer(oe),i=new DataView(o);this.sendCounts.has(t)||this.sendCounts.set(t,Math.floor(Math.random()*65535));const c=(r=this.sendCounts.get(t))!==null&&r!==void 0?r:0;return i.setUint32(0,t),i.setUint32(4,n),i.setUint32(8,n-c%65535),this.sendCounts.set(t,c+1),o}getUnencryptedBytes(t){var n;if(!De(t))return{unencryptedBytes:$.audio,requiresNALUProcessing:!1};const r=(n=this.getVideoCodec(t))!==null&&n!==void 0?n:this.videoCodec;if(r!==this.detectedCodec&&(f.debug("detected different codec",Object.assign({detectedCodec:r,oldCodec:this.detectedCodec},this.logContext)),this.detectedCodec=r),r==="av1")throw new Error("".concat(r," is not yet supported for end to end encryption"));if(r==="vp8")return{unencryptedBytes:$[t.type],requiresNALUProcessing:!1};if(r==="vp9")return{unencryptedBytes:0,requiresNALUProcessing:!1};try{const o=r==="h264"||r==="h265"?r:void 0,i=Ye(new Uint8Array(t.data),o);if(i.requiresNALUProcessing)return{unencryptedBytes:i.unencryptedBytes,requiresNALUProcessing:!0}}catch(o){f.debug("NALU processing failed, falling back to VP8 handling",Object.assign({error:o},this.logContext))}return{unencryptedBytes:$[t.type],requiresNALUProcessing:!1}}getVideoCodec(t){if(this.rtpMap.size===0)return;const n=t.getMetadata().payloadType;return n?this.rtpMap.get(n):void 0}}function He(e,t){if(t.byteLength===0)return!1;const n=new Uint8Array(e.slice(e.byteLength-t.byteLength));return t.every((r,o)=>r===n[o])}class _e extends pe.EventEmitter{get hasValidKey(){return!this.hasInvalidKeyAtIndex(this.currentKeyIndex)}constructor(t,n){if(super(),this.currentKeyIndex=0,n.keyringSize<1||n.keyringSize>256)throw new TypeError("Keyring size needs to be between 1 and 256");this.cryptoKeyRing=new Array(n.keyringSize).fill(void 0),this.decryptionFailureCounts=new Array(n.keyringSize).fill(0),this.keyProviderOptions=n,this.ratchetPromiseMap=new Map,this.participantIdentity=t}hasInvalidKeyAtIndex(t){return this.keyProviderOptions.failureTolerance>=0&&this.decryptionFailureCounts[t]>this.keyProviderOptions.failureTolerance}decryptionFailure(){let t=arguments.length>0&&arguments[0]!==void 0?arguments[0]:this.currentKeyIndex;this.keyProviderOptions.failureTolerance<0||(this.decryptionFailureCounts[t]+=1,this.decryptionFailureCounts[t]>this.keyProviderOptions.failureTolerance&&f.warn("key for ".concat(this.participantIdentity," at index ").concat(t," is being marked as invalid")))}decryptionSuccess(){let t=arguments.length>0&&arguments[0]!==void 0?arguments[0]:this.currentKeyIndex;this.resetKeyStatus(t)}resetKeyStatus(t){t===void 0?this.decryptionFailureCounts.fill(0):this.decryptionFailureCounts[t]=0}ratchetKey(t){let n=arguments.length>1&&arguments[1]!==void 0?arguments[1]:!0;const r=t??this.getCurrentKeyIndex(),o=this.ratchetPromiseMap.get(r);if(typeof o<"u")return o;const i=new Promise((c,g)=>C(this,void 0,void 0,function*(){try{const v=this.getKeySet(r);if(!v)throw new TypeError("Cannot ratchet key without a valid keyset of participant ".concat(this.participantIdentity));const y=v.material,b=yield Be(y,this.keyProviderOptions.ratchetSalt),S=yield Fe(b,y.algorithm.name,"derive"),m={chainKey:b,cryptoKey:S};n&&(yield this.setKeyFromMaterial(S,r,m)),c(m)}catch(v){g(v)}finally{this.ratchetPromiseMap.delete(r)}}));return this.ratchetPromiseMap.set(r,i),i}setKey(t){return C(this,arguments,void 0,function(n){var r=this;let o=arguments.length>1&&arguments[1]!==void 0?arguments[1]:0;return(function*(){yield r.setKeyFromMaterial(n,o),r.resetKeyStatus(o)})()})}setKeyFromMaterial(t,n){return C(this,arguments,void 0,function(r,o){var i=this;let c=arguments.length>2&&arguments[2]!==void 0?arguments[2]:null;return(function*(){const g=yield ne(r,i.keyProviderOptions.ratchetSalt),v=o>=0?o%i.cryptoKeyRing.length:i.currentKeyIndex;f.debug("setting new key with index ".concat(o),{usage:r.usages,algorithm:r.algorithm,ratchetSalt:i.keyProviderOptions.ratchetSalt}),i.setKeySet(g,v,c),v>=0&&(i.currentKeyIndex=v)})()})}setKeySet(t,n){let r=arguments.length>2&&arguments[2]!==void 0?arguments[2]:null;this.cryptoKeyRing[n%this.cryptoKeyRing.length]=t,r&&this.emit(Y.KeyRatcheted,r,this.participantIdentity,n)}setCurrentKeyIndex(t){return C(this,void 0,void 0,function*(){this.currentKeyIndex=t%this.cryptoKeyRing.length,this.resetKeyStatus(t)})}getCurrentKeyIndex(){return this.currentKeyIndex}getKeySet(t){return this.cryptoKeyRing[t??this.currentKeyIndex]}}const q=[],he=new Map;let Q,et=new xe,tt=!1,J=!1,be,W=Me,Ee=new Map;f.setDefaultLevel("info");onmessage=e=>{et.run(()=>C(void 0,void 0,void 0,function*(){const{kind:t,data:n}=e.data;switch(t){case"init":f.setLevel(n.loglevel),f.info("worker initialized"),W=n.keyProviderOptions,J=!!n.keyProviderOptions.sharedKey,postMessage({kind:"initAck",data:{enabled:tt}});break;case"enable":it(n.enabled,n.participantIdentity),f.info("updated e2ee enabled status for ".concat(n.participantIdentity," to ").concat(n.enabled)),postMessage(e.data);break;case"decode":z(n.participantIdentity,n.trackId).setupTransform(t,n.readableStream,n.writableStream,n.trackId,n.isReuse,n.codec);break;case"encode":z(n.participantIdentity,n.trackId).setupTransform(t,n.readableStream,n.writableStream,n.trackId,n.isReuse,n.codec);break;case"encryptDataRequest":const{payload:c,iv:g,keyIndex:v}=yield M.encrypt(n.payload,D(n.participantIdentity));console.log("encrypted payload",{original:n.payload,encrypted:c,iv:g}),postMessage({kind:"encryptDataResponse",data:{payload:c,iv:g,keyIndex:v,uuid:n.uuid}});break;case"decryptDataRequest":try{const{payload:y}=yield M.decrypt(n.payload,n.iv,D(n.participantIdentity),n.keyIndex);postMessage({kind:"decryptDataResponse",data:{payload:y,uuid:n.uuid}})}catch(y){f.error("DataCryptor decryption failed",{error:y,participantIdentity:n.participantIdentity,uuid:n.uuid}),postMessage({kind:"error",data:{error:y instanceof Error?y:new Error(String(y)),uuid:n.uuid}})}break;case"setKey":J?yield st(n.key,n.keyIndex):n.participantIdentity?(f.info("set participant sender key ".concat(n.participantIdentity," index ").concat(n.keyIndex)),yield D(n.participantIdentity).setKey(n.key,n.keyIndex)):f.error("no participant Id was provided and shared key usage is disabled");break;case"removeTransform":rt(n.trackId,n.participantIdentity);break;case"updateCodec":z(n.participantIdentity,n.trackId).setVideoCodec(n.codec),f.info("updated codec",{participantIdentity:n.participantIdentity,trackId:n.trackId,codec:n.codec});break;case"setRTPMap":Ee=n.map,q.forEach(y=>{y.getParticipantIdentity()===n.participantIdentity&&y.setRtpMap(n.map)});break;case"ratchetRequest":nt(n);break;case"setSifTrailer":ct(n.trailer);break}}))};function nt(e){return C(this,void 0,void 0,function*(){if(J){const t=re();yield t.ratchetKey(e.keyIndex),t.resetKeyStatus()}else if(e.participantIdentity){const t=D(e.participantIdentity);yield t.ratchetKey(e.keyIndex),t.resetKeyStatus()}else f.error("no participant Id was provided for ratchet request and shared key usage is disabled")})}function z(e,t){let n=q.filter(o=>o.getTrackId()===t);if(n.length>1){const o=n.map(i=>({participant:i.getParticipantIdentity()})).join(",");f.error("Found multiple cryptors for the same trackID ".concat(t,". target participant: ").concat(e," "),{participants:o})}let r=n[0];if(r)e!==r.getParticipantIdentity()&&r.setParticipant(e,D(e));else{if(f.info("creating new cryptor for",{participantIdentity:e,trackId:t}),!W)throw Error("Missing keyProvider options");r=new Qe({participantIdentity:e,keys:D(e),keyProviderOptions:W,sifTrailer:be}),r.setRtpMap(Ee),ot(r),q.push(r)}return r}function D(e){if(J)return re();let t=he.get(e);return t||(t=new _e(e,W),t.on(Y.KeyRatcheted,at),he.set(e,t)),t}function re(){return Q||(f.debug("creating new shared key handler"),Q=new _e("shared-key",W)),Q}function rt(e,t){const n=q.filter(o=>o.getParticipantIdentity()===t&&o.getTrackId()===e);n.length>1&&f.error("Found multiple cryptors for the same participant and trackID combination",{trackId:e,participantIdentity:t});const r=n[0];r?r.unsetParticipant():f.warn("Could not unset participant on cryptor",{trackId:e,participantIdentity:t})}function it(e,t){f.debug("setting encryption enabled for all tracks of ".concat(t),{enable:e}),Ie.set(t,e)}function st(e,t){return C(this,void 0,void 0,function*(){f.info("set shared key",{index:t}),yield re().setKey(e,t)})}function ot(e){e.on(U.Error,t=>{const n={kind:"error",data:{error:new Error("".concat(K[t.reason],": ").concat(t.message)),participantIdentity:t.participantIdentity}};postMessage(n)})}function at(e,t,n){postMessage({kind:"ratchetKey",data:{participantIdentity:t,keyIndex:n,ratchetResult:e}})}function ct(e){be=e,q.forEach(t=>{t.setSifTrailer(e)})}self.RTCTransformEvent&&(f.debug("setup transform event"),self.onrtctransform=e=>{const t=e.transformer;f.debug("transformer",t);const{kind:n,participantIdentity:r,trackId:o,codec:i}=t.options,c=z(r,o);f.debug("transform",{codec:i}),c.setupTransform(n,t.readable,t.writable,o,!1,i)});
//# sourceMappingURL=livekit-client.e2ee.worker-Bmrtztct.js.map
`,CC=typeof self<"u"&&self.Blob&&new Blob(["URL.revokeObjectURL(import.meta.url);",Oj],{type:"text/javascript;charset=utf-8"});function L3e(e){let t;try{if(t=CC&&(self.URL||self.webkitURL).createObjectURL(CC),!t)throw"";const n=new Worker(t,{type:"module",name:e?.name});return n.addEventListener("error",()=>{(self.URL||self.webkitURL).revokeObjectURL(t)}),n}catch{return new Worker("data:text/javascript;charset=utf-8,"+encodeURIComponent(Oj),{type:"module",name:e?.name})}}const k3e={audioPreset:zD.music,dtx:!0,red:!1,forceStereo:!1,simulcast:!0,videoSimulcastLayers:[Yu.h180,Yu.h360],screenShareEncoding:WD.h1080fps30.encoding,stopMicTrackOnMute:!1,videoCodec:"vp8",videoEncoding:Yu.h720.encoding,backupCodec:{codec:"vp8",encoding:Yu.h720.encoding}},V2={adaptiveStream:!0,dynacast:!0,videoCaptureDefaults:{resolution:Yu.h720.resolution},publishDefaults:k3e,stopLocalTrackOnUnpublish:!0,reconnectPolicy:new YD,disconnectOnPageLeave:!0,webAudioMix:!1};class T3e{constructor(t,n,r,i,o,s,a,c=!0,l=!0){this.client=t,this.roomId=n,this.devices=r,this.processorState$=i,this.controlledAudioDevices=s;const u=()=>new Yp(A3e({devices:this.devices,processorState:this.processorState$.value,e2eeLivekitOptions:o&&{keyProvider:o,worker:new L3e},controlledAudioDevices:this.controlledAudioDevices,echoCancellation:c,noiseSuppression:l}));this.livekitRoomFactory=a??u}createConnection(t,n,r,i,o){return new S3e({existingSFUConfig:o,roomId:this.roomId,transport:n,client:this.client,scope:t,livekitRoomFactory:this.livekitRoomFactory,ownMembershipIdentity:r},i)}}function A3e({devices:e,processorState:t,e2eeLivekitOptions:n,controlledAudioDevices:r,echoCancellation:i,noiseSuppression:o}){return{...V2,videoCaptureDefaults:{...V2.videoCaptureDefaults,deviceId:e.videoInput.selected$.value?.id,processor:t.processor},audioCaptureDefaults:{...V2.audioCaptureDefaults,deviceId:e.audioInput.selected$.value?.id,echoCancellation:i,noiseSuppression:o},audioOutput:{deviceId:r?void 0:e.audioOutput.selected$.value?.id},e2ee:n}}class q2{constructor(){this.store=new Map}add(t,n){const r=this.getKey(t.transport),i=this.store.get(r);i?i.participants.push(...n):this.store.set(r,{connection:t,participants:n})}getKey(t){return t.livekit_service_url}getConnections(){return Array.from(this.store.values()).map(({connection:t})=>t)}getConnectionForTransport(t){return this.store.get(this.getKey(t))?.connection??null}getParticipantsForTransport(t){const n=this.getKey(t),r=this.store.get(n);return r?r.participants:[]}}function P3e({scope:e,connectionFactory:t,localTransport$:n,remoteTransports$:r,logger:i,ownMembershipIdentity:o}){const s=i.getChild("[ConnectionManager]"),a=e.behavior(ge([r,n]).pipe(V(([u,d])=>{let p=[];d&&(p=[d]);const v=M3e(u.value).filter(m=>!p.find(_=>t6(_.transport,m)));return s.debug("remoteWithoutLocal",v,"localTransportAsArray",p),new Ti([...p,...v],u.epoch)}))),c=e.behavior(a.pipe(cN("ConnectionManager connections$",function*(u){for(const d of u)if(m3e(d)){const{transport:p,sfuConfig:g}=d;yield{keys:[p.livekit_service_url,g],data:void 0}}else yield{keys:[d.livekit_service_url,void 0],data:void 0}},(u,d,p,g)=>{const v=t.createConnection(u,{type:"livekit",livekit_service_url:p},o,s,g);return v.start(),v})));return{connectionManagerData$:e.behavior(c.pipe(Ee(u=>{const d=u.epoch,p=u.value.map(g=>g.remoteParticipants$.pipe(V(v=>({connection:g,participants:v}))));return p.length===0?Ce(new Ti(new q2,d)):ge(p).pipe(V(g=>new Ti(g.reduce((v,{connection:m,participants:_})=>(v.add(m,_),v),new q2),d)))})),new Ti(new q2,-1))}}function M3e(e){return e.reduce((t,n)=>(t.some(r=>t6(r,n))||t.push(n),t),[])}function N3e(e,t){return e.behavior(Pn(t,Us.DidSendCallNotification),null)}function $3e(e){return Pn(e,Cr.Timeline).pipe(zt(([t])=>t.getType()===He.RTCDecline))}function O3e({scope:e,memberships$:t,sentCallNotification$:n,receivedDecline$:r,options:i,localUser:o}){const s=t.pipe(Al(),zt(([{value:d},{value:p}])=>p.every(g=>g.userId===o.userId)&&d.some(g=>g.userId!==o.userId)),V(()=>{})),a=t.pipe(l3(d=>d.some(p=>p.userId!==o.userId))),c=e.behavior(n.pipe(zt(d=>d?.notification_type==="ring"),V(d=>d),Ee(d=>{const p=d?.lifetime??0;return Tl(p===0?Ce(null):Os(p).pipe(Dhe(),lt("ringing")),Ce("timeout"),wd).pipe(NM(r.pipe(zt(([g])=>g.getRelation()?.rel_type==="m.reference"&&g.getRelation()?.event_id===d.event_id&&g.getSender()!==o.userId&&l.value!=="timeout"))),PM("decline"))})),null),l=e.behavior(i.waitForCallPickup===!0?ge([a,c],(d,p)=>d.value===!0?"success":p??"unknown"):wd,null);return{autoLeave$:Vo(i.autoLeaveWhenOthersLeft===!0?s.pipe(V(()=>"allOthersLeft")):wd,l.pipe(zt(d=>d==="timeout"||d==="decline"))),callPickupState$:l}}const Wu=new Map;function B3(e){if(Wu.has(e))return Wu.get(e);const t=ZD(e);return Wu.size>500&&Wu.clear(),Wu.set(e,t),t}function j3e(e,t,n){const{rawDisplayName:r,userId:i}=e;if(!r||r===i)return!1;const o=B3(r);return o?/@.+:.+/.test(r)||/[\u200E\u200F\u202A-\u202F]/.test(r)?!0:t.map(s=>s.userId&&n.get(s.userId)).filter(s=>!!s).filter(s=>s.userId!==i).some(s=>B3(jj(s,!1))===o):!1}function jj(e,t){const{rawDisplayName:n,userId:r}=e;if(!n||n===r)return r;const i=XD(n);return t?i+" ("+r+")":B3(n)?i:r}const D3e=U.getChild("[MatrixMemberMetadata]");function EC(e){return e.getMembersWithMembership(tn.Join).concat(e.getMembersWithMembership(tn.Invite)).reduce((n,r)=>(n.set(r.userId,{userId:r.userId,getMxcAvatarUrl:r.getMxcAvatarUrl.bind(r),rawDisplayName:r.rawDisplayName}),n),new Map)}function F3e(e,t){return e.behavior(Pn(t,ME.Members).pipe(V(()=>EC(t))),EC(t))}function H3e(e,t,n){return e.behavior(t.pipe(V(r=>r.size===2?n.getMember(n.guessDMUserId()):null)))}const U3e=(e,t,n)=>{const r=new Set;return e.behavior(ge([t,n]).pipe(V(([i,o])=>{const s=new Map;for(const a of i){const c=o.get(a.userId);if(!c){D3e.error(`Could not find member for user ${a.userId}`);continue}const l=j3e(c,i,o),u=r.has(a.userId)||l;u&&r.add(a.userId),s.set(a.userId,jj(c,u))}return s})))},B3e=(e,t,n)=>{const r=U3e(e,t,n),i=e.behavior(n.pipe(V(o=>Array.from(o.keys()).reduce((s,a)=>(s.set(a,o.get(a)?.getMxcAvatarUrl()),s),new Map))));return{createDisplayNameBehavior$:o=>e.behavior(r.pipe(V(s=>s.get(o)))),createAvatarUrlBehavior$:o=>e.behavior(n.pipe(V(s=>s.get(o)?.getMxcAvatarUrl()))),displaynameMap$:r,avatarMap$:i}};class V3e{constructor(t,n,r,i,o){this.connection=t,this.muteStates=r,this.logger=o,this.shouldPublish=!1,this.scope=new Wf;const{controlledAudioDevices:s}=kt(),a=t.livekitRoom;a.setE2EEEnabled(a.options.e2ee!==void 0)?.catch(c=>{this.logger.error("Failed to set E2EE enabled on room",c)}),this.observeTrackProcessors(this.scope,a,i),this.observeMediaDevices(this.scope,n,s),this.workaroundRestartAudioInputTrackChrome(n,this.scope),this.connection.livekitRoom.localParticipant.on(Te.LocalTrackPublished,this.onLocalTrackPublished.bind(this))}async destroy(){this.scope.end(),this.logger.info("Scope ended -> unset handler"),this.muteStates.audio.unsetHandler(),this.muteStates.video.unsetHandler(),this.logger.info("Start to stop tracks");try{await this.stopTracks(),this.logger.info("Done to stop tracks")}catch(t){this.logger.error(`Failed to stop tracks: ${t}`)}}onLocalTrackPublished(t){this.logger.info("Local track published",t);const n=this.connection.livekitRoom;if(this.shouldPublish||this.pauseUpstreams(n,[t.source]).catch(r=>{this.logger.error("Failed to pause upstreams",r)}),t.source===Ve.Source.Microphone){const r=this.muteStates.audio.enabled$.value;n.localParticipant.setMicrophoneEnabled(r).catch(i=>{this.logger.error(`Failed to enable microphone track, enabled:${r}`,i)})}else if(t.source===Ve.Source.Camera){const r=this.muteStates.video.enabled$.value;n.localParticipant.setCameraEnabled(r).catch(i=>{this.logger.error(`Failed to enable camera track, enabled:${r}`,i)})}}async createAndSetupTracks(){this.logger.debug("createAndSetupTracks called");const t=this.connection.livekitRoom;this.observeMuteStates();const n=this.muteStates.audio.enabled$.value,r=this.muteStates.video.enabled$.value;return n&&r?t.localParticipant.enableCameraAndMicrophone():n?t.localParticipant.setMicrophoneEnabled(!0):r&&t.localParticipant.setCameraEnabled(!0),Promise.resolve()}async pauseUpstreams(t,n){for(const r of n){const i=t.localParticipant.getTrackPublication(r)?.track;i?await i.pauseUpstream():this.logger.warn(`No track found for source ${r} to pause upstream`)}}async resumeUpstreams(t,n){for(const r of n){const i=t.localParticipant.getTrackPublication(r)?.track;i?await i.resumeUpstream():this.logger.warn(`No track found for source ${r} to resume upstream`)}}async startPublishing(){if(this.shouldPublish){this.logger.debug("Already publishing, ignoring startPublishing call");return}this.shouldPublish=!0,this.logger.debug("startPublishing called");const t=this.connection.livekitRoom;try{await this.resumeUpstreams(t,[Ve.Source.Microphone,Ve.Source.Camera])}catch(n){this.logger.error("Failed to resume upstreams",n)}}async stopPublishing(){this.logger.debug("stopPublishing called"),this.shouldPublish=!1,await this.pauseUpstreams(this.connection.livekitRoom,[Ve.Source.Microphone,Ve.Source.Camera,Ve.Source.ScreenShare])}async stopTracks(){const t=this.connection.livekitRoom;for(const n of[Ve.Source.Microphone,Ve.Source.Camera,Ve.Source.ScreenShare]){const r=t.localParticipant.getTrackPublication(n);r?.track&&await t.localParticipant.unpublishTrack(r.track,!0)}}workaroundRestartAudioInputTrackChrome(t,n){const r=this.connection.livekitRoom;t.audioInput.selected$.pipe(Ee(i=>i?.hardwareDeviceChange$??wd),n.bind()).subscribe(()=>{if(r.state!=l6.Connected)return;const i=Array.from(r.localParticipant.audioTrackPublications.values()).find(o=>o.source===Ve.Source.Microphone)?.track;i&&i.mediaStreamTrack.readyState!=="ended"&&(this.logger?.info("Restarting audio device track due to active media device changed (workaroundRestartAudioInputTrackChrome)"),r.localParticipant.getTrackPublication(Ve.Source.Microphone)?.audioTrack?.restartTrack().catch(o=>{this.logger.error("Failed to restart audio device track",o)}))})}observeMediaDevices(t,n,r){const i=this.connection.livekitRoom,o=(s,a)=>a.pipe(t.bind()).subscribe(c=>{i.state==l6.Connected&&(this.logger.info("[LivekitRoom] syncDevice room.getActiveDevice(kind) !== d.id :",i.getActiveDevice(s)," !== ",c?.id),c!==void 0&&i.getActiveDevice(s)!==c.id&&i.switchActiveDevice(s,c.id).catch(l=>this.logger.error(`Failed to sync ${s} device with LiveKit`,l)))});o("audioinput",n.audioInput.selected$),r||o("audiooutput",n.audioOutput.selected$),o("videoinput",n.videoInput.selected$)}observeMuteStates(){const t=this.connection.livekitRoom;this.muteStates.audio.setHandler(async n=>{try{this.logger.debug(`handler: Setting LiveKit microphone enabled: ${n}`),await t.localParticipant.setMicrophoneEnabled(n),!this.shouldPublish&&n&&await this.pauseUpstreams(t,[Ve.Source.Microphone])}catch(r){this.logger.error("Failed to update LiveKit audio input mute state",r)}return t.localParticipant.isMicrophoneEnabled}),this.muteStates.video.setHandler(async n=>{try{this.logger.debug(`handler: Setting LiveKit camera enabled: ${n}`),await t.localParticipant.setCameraEnabled(n),!this.shouldPublish&&n&&await this.pauseUpstreams(t,[Ve.Source.Camera])}catch(r){this.logger.error("Failed to update LiveKit video input mute state",r)}return t.localParticipant.isCameraEnabled})}observeTrackProcessors(t,n,r){const i=t.behavior(Fw(n.localParticipant,Ve.Source.Camera).pipe(V(o=>{const s=o?.publication.track;return s instanceof TE?s:null})),null);Eme(t,i,r)}}function q3e(e,t,n){const r=new Ht,i=a=>r.next(a),o=e.behavior(ge([n,t],(a,c)=>a||c==="flat"?"spotlight":"grid"));return{gridMode$:e.behavior(r.pipe(V(a=>a==="grid"?o.pipe(MM(c=>c!==a),lt(a)):a===o.value?o:cm(a)),lt(o),Ee(a=>a))),setGridMode:i}}const _a=U.getChild("[CallViewModel]"),xC=8,IC=500,G3e=3,G2=4e3;function K3e(e,t,n,r,i,o,s,a,c){const l=n.client,u=l.getUserId(),d=l.getDeviceId();if(!(u&&d))throw new za(new Error("userId and deviceId are required"));const p=W3e(o.encryptionSystem,t),g=o.matrixRTCMode$??cm(rr.Legacy),v=R3e(e,t),m=I3e(e,v),_={userId:u,deviceId:d,memberId:QD()},y=v3e({scope:e,memberships$:v,ownMembershipIdentity:_,client:l,delayId$:e.behavior(Pn(t,Lv.DelayIdChanged).pipe(V(([D])=>D??null)),t.delayId??null),roomId:n.roomId,forceJwtEndpoint$:e.behavior(g.pipe(V(D=>D===rr.Matrix_2_0?sg.Matrix_2_0:sg.Legacy))),useOldestMember$:e.behavior(g.pipe(V(D=>D===rr.Legacy)))}),w=new T3e(l,n.roomId,r,c,p,kt().controlledAudioDevices,o.livekitRoomFactory,kt().echoCancellation,kt().noiseSuppression),S=P3e({scope:e,connectionFactory:w,localTransport$:e.behavior(y.pipe(im(D=>(_a.info("could not pass local transport to createConnectionManager$. localTransport$ threw an error",D),Ce(null))))),remoteTransports$:m.transports$,logger:_a,ownMembershipIdentity:_}),b=g3e({scope:e,membershipsWithTransport$:m.membershipsWithTransport$,connectionManager:S}),C=e.behavior(g.pipe(V(D=>({encryptMedia:p!==void 0,matrixRTCMode:D})))),E=C3e({scope:e,homeserverConnected:p3e(e,l,t),muteStates:i,joinMatrixRTC:D=>x3e(t,_,D,C.value),createPublisherFactory:D=>new V3e(D,r,i,c,_a.getChild("[Publisher "+D.transport.livekit_service_url+"]")),connectionManager:S,matrixRTCSession:t,localTransport$:y,logger:_a.getChild(`[${Date.now()}]`)}),x=e.behavior(v.pipe(V(D=>D.value.find(G=>G.userId===u&&G.deviceId===d)??null))),I=e.behavior(x.pipe(zpe(D=>D!==null),V(D=>D===null?null:{membership$:D,participant:{type:"local",value$:E.participant$},connection$:E.connection$,userId:u}))),{callPickupState$:L,autoLeave$:R}=O3e({scope:e,memberships$:v,sentCallNotification$:N3e(e,t),receivedDecline$:$3e(n),options:o,localUser:{userId:u}}),k=F3e(e,n),A=B3e(e,e.behavior(v.pipe(V(D=>D.value))),k),P=H3e(e,k,n),O=e.behavior(k.pipe(V(D=>D.size===1&&D.get(u)!==void 0))),j=e.behavior(ge([O,P,L]).pipe(V(([D,G,le])=>{if(le!=="ringing"||D)return null;const ke=G?G.rawDisplayName:n.name,Me=G?G.userId:n.roomId,_n=G?`Waiting for ${ke} to joinâ€¦`:"Waiting for other participantsâ€¦",vr=G?G.getMxcAvatarUrl?.()??void 0:n.getMxcAvatarUrl()??void 0;return{name:ke??Me,idForAvatar:Me,text:_n,avatarMxc:vr}}))),$=e.behavior(S.connectionManagerData$.pipe(V(D=>D.value))),T=e.behavior(b.pipe(Ee(D=>ge(D.value.map(le=>ge([le.connection$,le.participant.value$]).pipe(V(([ke,Me])=>{if(!ke||!Me||Me.isLocal)return null;const _n=ke.livekitRoom;return{url:ke.transport.livekit_service_url,livekitRoom:_n,participant:Me.identity}}))))),V(D=>D.reduce((G,le)=>{if(!le)return G;const ke=G.find(Me=>Me.url===le.url);return ke?ke.participants.push(le.participant):G.push({livekitRoom:le.livekitRoom,participants:[le.participant],url:le.url}),G},[]))),[]),N=e.behavior(s.pipe(L9(E.reconnecting$))),M=e.behavior(a.pipe(V(D=>Object.fromEntries(Object.entries(D).map(([G,{reactionOption:le}])=>[G,le]))),L9(E.reconnecting$))),B=e.behavior(ge([I,b,DM.value$]).pipe(aN("CallViewModel userMedia$",function*([D,G,le]){const ke=_o=>`${_o.userId}:${_o.membership$.value.deviceId}`,Me=D?ke(D):void 0,_n=D?[D]:[],vr=G.value.filter(_o=>ke(_o)!==Me),Jm=[..._n,...vr];for(const _o of Jm){const{userId:e0,participant:t0,connection$:wi,membership$:mD}=_o,vD=mD.value.rtcBackendIdentity,yD=ke(_o);for(let n0=0;n0<1+le;n0++)yield{keys:[n0,yD,e0,t0,wi,vD],data:void 0}}},(D,G,le,ke,Me,_n,vr,Jm)=>{const _o=D.behavior(vr.pipe(V(wi=>wi?.livekitRoom))),e0=D.behavior(vr.pipe(V(wi=>wi?.transport.livekit_service_url))),t0=D.behavior(A.createDisplayNameBehavior$(Me).pipe(V(wi=>wi??Me)));return new s3e(D,`${ke}:${le}`,Me,Jm,_n,o.encryptionSystem,_o,e0,r,E.reconnecting$,t0,A.createAvatarUrlBehavior$(Me),N.pipe(V(wi=>wi[ke]?.time??null)),M.pipe(V(wi=>wi[ke]??void 0)),vr)}))),F=e.behavior(B.pipe(Ee(D=>D.length===0?Ce([]):ge(D.map(G=>G.screenShares$),(...G)=>[...D,...G.flat(1)])))),K=e.behavior(F.pipe(V(D=>D.filter(G=>G instanceof Tj)))),te=B.pipe(Al(),zt(([D,G])=>G.length<=xC&&G.length>D.length),V(()=>{}),a3(IC)),oe=e.behavior(b.pipe(V(D=>D.value.length))),pe=ge([L,B]).pipe(MM(([D])=>D!==null&&D!=="success"),V(([,D])=>D),Al(),zt(([D,G])=>G.length<=xC&&G.length<D.length),V(()=>{}),a3(IC)),ne=new Ht,z=Ae===null?wd:Pn(Ae.lazyActions,io.HangupCall).pipe(Ta(D=>{Ae.api.transport.reply(D.detail,{})})),re=Vo(R,Vo(ne,z).pipe(V(()=>"user"))).pipe(e.share),Re=e.behavior(B.pipe(Ee(D=>D.length===0?Ce([]):ge(D.map(G=>G.vm.speaking$.pipe(V(le=>[G,le]))))),To((D,G)=>{const[le,ke]=!D?.vm.local&&G.find(([Me])=>Me===D)||[];return ke?le:G.find(([Me,_n])=>!Me.vm.local&&_n)?.[0]??le??G.find(([Me])=>!Me.vm.local)?.[0]??G.find(([Me])=>Me.vm.local)?.[0]},null),V(D=>D?.vm??null))),Le=e.behavior(B.pipe(Ee(D=>{const G=D.map(le=>le.bin$.pipe(V(ke=>[le,ke])));return G.length===0?Ce([]):ge(G,(...le)=>le.sort(([,ke],[,Me])=>ke-Me).map(([ke])=>ke.vm))}),ar(wC))),Se=e.behavior(K.pipe(Ee(D=>D.length>0?Ce(D.map(G=>G.vm)):Re.pipe(V(G=>G?[G]:[]))),ar(wC))),xt=e.behavior(ge([K,Re,F]).pipe(Ee(([D,G,le])=>{if(D.length>0)return Re;if(!G||G.local)return Ce(null);const Me=le.find(_n=>_n.vm instanceof Vl)?.vm;return Me?Me.alwaysShow$.pipe(V(_n=>_n?Me:null)):Ce(null)}))),ct=e.behavior(Se.pipe(V(D=>D.some(G=>!G.local&&G instanceof Zc)))),we=e.behavior(Vc,!1),Rn=o.windowSize$??e.behavior(Pn(window,"resize").pipe(lt(null),V(()=>({width:window.innerWidth,height:window.innerHeight})))),go=e.behavior(Rn.pipe(V(({width:D,height:G})=>G<=400&&D<=340?"pip":G<=600?"flat":D<=600?"narrow":"normal"))),cn=e.behavior(we.pipe(Ee(D=>D?Ce("pip"):go))),gc=new Ht,mc=e.behavior(gc.pipe(oN(!1,D=>!D))),{setGridMode:yi,gridMode$:mo}=q3e(e,cn,ct),vo=ge([Le,Se],(D,G)=>({type:"grid",spotlight:G.some(le=>le instanceof Zc)?G:void 0,grid:D})),qi=ge([Le,Se],(D,G)=>({type:"spotlight-landscape",spotlight:G,grid:D})),vc=ge([Le,Se],(D,G)=>({type:"spotlight-portrait",spotlight:G,grid:D})),_i=ge([Se,xt],(D,G)=>({type:"spotlight-expanded",spotlight:D,pip:G??void 0})),ua=F.pipe(V(D=>{if(D.length!==2)return null;const G=D.find(ke=>ke.vm.local)?.vm,le=D.find(ke=>!ke.vm.local)?.vm;return!le||!G?null:{type:"one-on-one",local:G,remote:le}})),yc=Se.pipe(V(D=>({type:"pip",spotlight:D}))),yo=e.behavior(cn.pipe(Ee(D=>{switch(D){case"normal":return mo.pipe(Ee(G=>{switch(G){case"grid":return ua.pipe(Ee(le=>le===null?vo:Ce(le)));case"spotlight":return mc.pipe(Ee(le=>le?_i:qi))}}));case"narrow":return ua.pipe(Ee(G=>G===null?ge([Le,Se],(le,ke)=>le.length>G3e||ke.some(Me=>Me instanceof Zc)?vc:vo).pipe(Ghe()):_i));case"flat":return mo.pipe(Ee(G=>{switch(G){case"grid":return qi;case"spotlight":return _i}}));case"pip":return yc}}))),_c=new Ht,bc=D=>_c.next(D),fs=e.behavior(ge([yo,_c.pipe(lt(0),ar())]).pipe(To(({tiles:D},[G,le])=>{let ke,Me;switch(G.type){case"grid":case"spotlight-landscape":case"spotlight-portrait":[ke,Me]=e3e(G,le,bc,D);break;case"spotlight-expanded":[ke,Me]=t3e(G,D);break;case"one-on-one":[ke,Me]=n3e(G,D);break;case"pip":[ke,Me]=r3e(G,D);break}return{layout:ke,tiles:Me}},{layout:null,tiles:og.empty()}))),Or=e.behavior(fs.pipe(V(({layout:D})=>D))),wc=e.behavior(fs.pipe(V(({tiles:D})=>D.generation))),Cu=e.behavior(Or.pipe(V(D=>D.type!=="grid"))),bi=e.behavior(Or.pipe(Ee(D=>{switch(D.type){case"spotlight-landscape":case"spotlight-portrait":return D.spotlight.media$.pipe(V(G=>G.some(le=>le instanceof Zc)));case"spotlight-expanded":case"one-on-one":return Ce(!1);default:return Ce(!0)}}))),Sc=e.behavior(cn.pipe(Ee(D=>D==="normal"?Or.pipe(V(G=>G.type==="spotlight-landscape"||G.type==="spotlight-expanded")):Ce(!1)),ar(),V(D=>D?()=>gc.next():null))),Cc=new Ht,Ec=new Ht,ye=new Ht,Oe=new Ht,nt=e.behavior(cn.pipe(V(D=>D!=="pip"&&D!=="flat"))),Fe=e.behavior(cn.pipe(Ee(D=>{switch(D){case"pip":return Ce(!1);case"normal":case"narrow":return Ce(!0);case"flat":return sle()?Ce(!0):Vo(Cc.pipe(V(()=>"tap screen")),Ec.pipe(V(()=>"tap controls")),ye.pipe(V(()=>"hover"))).pipe(Khe((G,le)=>{switch(le){case"tap screen":return G?Ce(!1):Os(G2).pipe(V(()=>!1),lt(!0));case"tap controls":return Os(G2).pipe(V(()=>!1),lt(!0));case"hover":return $he(Os(G2),Oe.pipe(mb(1))).pipe(V(()=>!1),lt(!0))}},!1),lt(!1))}}))),se=e.behavior(ge([r.audioOutput.available$,r.audioOutput.selected$],(D,G)=>G!==void 0&&D.get(G.id)?.type==="earpiece")),Ge=e.behavior(ge([r.audioOutput.available$,r.audioOutput.selected$],(D,G)=>{const ke=(G&&D.get(G.id)?.type)==="speaker"?"earpiece":"speaker",Me=[...D].find(([,vr])=>vr.type===ke);if(Me===void 0)return null;const[_n]=Me;return{targetOutput:ke,switch:()=>r.audioOutput.select(_n)}})),st=e.behavior(UM.value$.pipe(Ee(D=>D?M:Ce({})),To((D,G)=>{const le=[];for(const[ke,Me]of Object.entries(G)){const _n=D.find(vr=>vr.sender===ke&&vr.emoji)?.startX??Math.ceil(Math.random()*80)+10;le.push({sender:ke,emoji:Me.emoji,startX:_n})}return le},[]))),$n=yb.value$.pipe(Ee(D=>D?M:Ce({})),V(D=>Object.values(D).map(G=>G.name)),To((D,G)=>({playing:G.filter(le=>D.playing.includes(le)||D.newSounds.includes(le)),newSounds:G.filter(le=>!D.playing.includes(le)&&!D.newSounds.includes(le))}),{playing:[],newSounds:[]}),V(D=>D.newSounds)),Ln=N.pipe(V(D=>Object.keys(D).length),To((D,G)=>({value:G,playSounds:G>D.value}),{value:0,playSounds:!1}),zt(D=>D.playSounds)),jr=K.pipe(V(D=>D.length),To((D,G)=>({value:G,playSounds:G>D.value}),{value:0,playSounds:!1}),zt(D=>D.playSounds)),Yn=E.sharingScreen$,Xn=E.toggleScreenSharing,hs=e.behavior(E.localMemberState$.pipe(V(D=>{const G={};return D instanceof gn?{transportError:D}:D===$j.Waiting?null:(D.matrix instanceof gn&&(G.matrixError=D.matrix),D.media instanceof gn?G.publishError=D.media:typeof D.media=="object"&&D.media.connection instanceof gn&&(G.connectionError=D.media.connection),G)})),null);return{autoLeave$:R,callPickupState$:L,ringOverlay$:j,leave$:re,hangup:()=>ne.next(),join:E.requestJoinAndPublish,leave:E.requestDisconnect,toggleScreenSharing:Xn,sharingScreen$:Yn,tapScreen:()=>Cc.next(),tapControls:()=>Ec.next(),hoverScreen:()=>ye.next(),unhoverScreen:()=>Oe.next(),fatalError$:e.behavior(hs.pipe(V(D=>(_a.debug("errors$ to compute any fatal errors:",D),D?.transportError??D?.matrixError??D?.connectionError??null)),zt(D=>D!==null)),null),allConnections$:$,participantCount$:oe,handsRaised$:N,reactions$:M,joinSoundEffect$:te,leaveSoundEffect$:pe,newHandRaised$:Ln,newScreenShare$:jr,audibleReactions$:$n,visibleReactions$:st,windowMode$:cn,spotlightExpanded$:mc,toggleSpotlightExpanded$:Sc,gridMode$:mo,setGridMode:yi,grid$:Le,spotlight$:Se,pip$:xt,layout$:Or,userMedia$:B,localMatrixLivekitMember$:I,localConnection$:E.connection$,matrixLivekitMembers$:e.behavior(b.pipe(V(D=>D.value),Ta(D=>{const G=D.map(le=>le.membership$.value.userId+"|"+le.membership$.value.deviceId).join(",");_a.debug(`matrixLivekitMembers$ updated (exported) [${G}]`)}))),tileStoreGeneration$:wc,showSpotlightIndicators$:Cu,showSpeakingIndicators$:bi,showHeader$:nt,showFooter$:Fe,earpieceMode$:se,audioOutputSwitcher$:Ge,reconnecting$:E.reconnecting$,livekitRoomItems$:T,connected$:E.connected$}}function W3e(e,t){if(e.kind!==mt.NONE){if(e.kind===mt.PER_PARTICIPANT){const n=new i3e;return n.setRTCSession(t),n}else if(e.kind===mt.SHARED_KEY&&e.secret){const n=new JD;return n.setKey(e.secret).catch(r=>_a.error("Failed to set shared key for E2EE",r)),n}}}function z3e(e,t,n){return Math.max(t,Math.min(e,n))}const mn={toVector(e,t){return e===void 0&&(e=t),Array.isArray(e)?e:[e,e]},add(e,t){return[e[0]+t[0],e[1]+t[1]]},sub(e,t){return[e[0]-t[0],e[1]-t[1]]},addTo(e,t){e[0]+=t[0],e[1]+=t[1]},subTo(e,t){e[0]-=t[0],e[1]-=t[1]}};function RC(e,t,n){return t===0||Math.abs(t)===1/0?Math.pow(e,n*5):e*t*n/(t+n*e)}function LC(e,t,n,r=.15){return r===0?z3e(e,t,n):e<t?-RC(t-e,n-t,r)+t:e>n?+RC(e-n,n-t,r)+n:e}function Y3e(e,[t,n],[r,i]){const[[o,s],[a,c]]=e;return[LC(t,o,s,r),LC(n,a,c,i)]}function X3e(e,t){if(typeof e!="object"||e===null)return e;var n=e[Symbol.toPrimitive];if(n!==void 0){var r=n.call(e,t);if(typeof r!="object")return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return(t==="string"?String:Number)(e)}function Z3e(e){var t=X3e(e,"string");return typeof t=="symbol"?t:String(t)}function Dn(e,t,n){return t=Z3e(t),t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function kC(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter(function(i){return Object.getOwnPropertyDescriptor(e,i).enumerable})),n.push.apply(n,r)}return n}function Mt(e){for(var t=1;t<arguments.length;t++){var n=arguments[t]!=null?arguments[t]:{};t%2?kC(Object(n),!0).forEach(function(r){Dn(e,r,n[r])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):kC(Object(n)).forEach(function(r){Object.defineProperty(e,r,Object.getOwnPropertyDescriptor(n,r))})}return e}const Dj={pointer:{start:"down",change:"move",end:"up"},mouse:{start:"down",change:"move",end:"up"},touch:{start:"start",change:"move",end:"end"},gesture:{start:"start",change:"change",end:"end"}};function TC(e){return e?e[0].toUpperCase()+e.slice(1):""}const Q3e=["enter","leave"];function J3e(e=!1,t){return e&&!Q3e.includes(t)}function e4e(e,t="",n=!1){const r=Dj[e],i=r&&r[t]||t;return"on"+TC(e)+TC(i)+(J3e(n,i)?"Capture":"")}const t4e=["gotpointercapture","lostpointercapture"];function n4e(e){let t=e.substring(2).toLowerCase();const n=!!~t.indexOf("passive");n&&(t=t.replace("passive",""));const r=t4e.includes(t)?"capturecapture":"capture",i=!!~t.indexOf(r);return i&&(t=t.replace("capture","")),{device:t,capture:i,passive:n}}function r4e(e,t=""){const n=Dj[e],r=n&&n[t]||t;return e+r}function Xm(e){return"touches"in e}function Fj(e){return Xm(e)?"touch":"pointerType"in e?e.pointerType:"mouse"}function i4e(e){return Array.from(e.touches).filter(t=>{var n,r;return t.target===e.currentTarget||((n=e.currentTarget)===null||n===void 0||(r=n.contains)===null||r===void 0?void 0:r.call(n,t.target))})}function o4e(e){return e.type==="touchend"||e.type==="touchcancel"?e.changedTouches:e.targetTouches}function Hj(e){return Xm(e)?o4e(e)[0]:e}function s4e(e){return i4e(e).map(t=>t.identifier)}function K2(e){const t=Hj(e);return Xm(e)?t.identifier:t.pointerId}function AC(e){const t=Hj(e);return[t.clientX,t.clientY]}function a4e(e){var t,n;const{scrollX:r,scrollY:i,scrollLeft:o,scrollTop:s}=e.currentTarget;return[(t=r??o)!==null&&t!==void 0?t:0,(n=i??s)!==null&&n!==void 0?n:0]}function c4e(e){const t={};if("buttons"in e&&(t.buttons=e.buttons),"shiftKey"in e){const{shiftKey:n,altKey:r,metaKey:i,ctrlKey:o}=e;Object.assign(t,{shiftKey:n,altKey:r,metaKey:i,ctrlKey:o})}return t}function lg(e,...t){return typeof e=="function"?e(...t):e}function l4e(){}function u4e(...e){return e.length===0?l4e:e.length===1?e[0]:function(){let t;for(const n of e)t=n.apply(this,arguments)||t;return t}}function PC(e,t){return Object.assign({},t,e||{})}const d4e=32;class f4e{constructor(t,n,r){this.ctrl=t,this.args=n,this.key=r,this.state||(this.state={},this.computeValues([0,0]),this.computeInitial(),this.init&&this.init(),this.reset())}get state(){return this.ctrl.state[this.key]}set state(t){this.ctrl.state[this.key]=t}get shared(){return this.ctrl.state.shared}get eventStore(){return this.ctrl.gestureEventStores[this.key]}get timeoutStore(){return this.ctrl.gestureTimeoutStores[this.key]}get config(){return this.ctrl.config[this.key]}get sharedConfig(){return this.ctrl.config.shared}get handler(){return this.ctrl.handlers[this.key]}reset(){const{state:t,shared:n,ingKey:r,args:i}=this;n[r]=t._active=t.active=t._blocked=t._force=!1,t._step=[!1,!1],t.intentional=!1,t._movement=[0,0],t._distance=[0,0],t._direction=[0,0],t._delta=[0,0],t._bounds=[[-1/0,1/0],[-1/0,1/0]],t.args=i,t.axis=void 0,t.memo=void 0,t.elapsedTime=t.timeDelta=0,t.direction=[0,0],t.distance=[0,0],t.overflow=[0,0],t._movementBound=[!1,!1],t.velocity=[0,0],t.movement=[0,0],t.delta=[0,0],t.timeStamp=0}start(t){const n=this.state,r=this.config;n._active||(this.reset(),this.computeInitial(),n._active=!0,n.target=t.target,n.currentTarget=t.currentTarget,n.lastOffset=r.from?lg(r.from,n):n.offset,n.offset=n.lastOffset,n.startTime=n.timeStamp=t.timeStamp)}computeValues(t){const n=this.state;n._values=t,n.values=this.config.transform(t)}computeInitial(){const t=this.state;t._initial=t._values,t.initial=t.values}compute(t){const{state:n,config:r,shared:i}=this;n.args=this.args;let o=0;if(t&&(n.event=t,r.preventDefault&&t.cancelable&&n.event.preventDefault(),n.type=t.type,i.touches=this.ctrl.pointerIds.size||this.ctrl.touchIds.size,i.locked=!!document.pointerLockElement,Object.assign(i,c4e(t)),i.down=i.pressed=i.buttons%2===1||i.touches>0,o=t.timeStamp-n.timeStamp,n.timeStamp=t.timeStamp,n.elapsedTime=n.timeStamp-n.startTime),n._active){const E=n._delta.map(Math.abs);mn.addTo(n._distance,E)}this.axisIntent&&this.axisIntent(t);const[s,a]=n._movement,[c,l]=r.threshold,{_step:u,values:d}=n;if(r.hasCustomTransform?(u[0]===!1&&(u[0]=Math.abs(s)>=c&&d[0]),u[1]===!1&&(u[1]=Math.abs(a)>=l&&d[1])):(u[0]===!1&&(u[0]=Math.abs(s)>=c&&Math.sign(s)*c),u[1]===!1&&(u[1]=Math.abs(a)>=l&&Math.sign(a)*l)),n.intentional=u[0]!==!1||u[1]!==!1,!n.intentional)return;const p=[0,0];if(r.hasCustomTransform){const[E,x]=d;p[0]=u[0]!==!1?E-u[0]:0,p[1]=u[1]!==!1?x-u[1]:0}else p[0]=u[0]!==!1?s-u[0]:0,p[1]=u[1]!==!1?a-u[1]:0;this.restrictToAxis&&!n._blocked&&this.restrictToAxis(p);const g=n.offset,v=n._active&&!n._blocked||n.active;v&&(n.first=n._active&&!n.active,n.last=!n._active&&n.active,n.active=i[this.ingKey]=n._active,t&&(n.first&&("bounds"in r&&(n._bounds=lg(r.bounds,n)),this.setup&&this.setup()),n.movement=p,this.computeOffset()));const[m,_]=n.offset,[[y,w],[S,b]]=n._bounds;n.overflow=[m<y?-1:m>w?1:0,_<S?-1:_>b?1:0],n._movementBound[0]=n.overflow[0]?n._movementBound[0]===!1?n._movement[0]:n._movementBound[0]:!1,n._movementBound[1]=n.overflow[1]?n._movementBound[1]===!1?n._movement[1]:n._movementBound[1]:!1;const C=n._active?r.rubberband||[0,0]:[0,0];if(n.offset=Y3e(n._bounds,n.offset,C),n.delta=mn.sub(n.offset,g),this.computeMovement(),v&&(!n.last||o>d4e)){n.delta=mn.sub(n.offset,g);const E=n.delta.map(Math.abs);mn.addTo(n.distance,E),n.direction=n.delta.map(Math.sign),n._direction=n._delta.map(Math.sign),!n.first&&o>0&&(n.velocity=[E[0]/o,E[1]/o],n.timeDelta=o)}}emit(){const t=this.state,n=this.shared,r=this.config;if(t._active||this.clean(),(t._blocked||!t.intentional)&&!t._force&&!r.triggerAllEvents)return;const i=this.handler(Mt(Mt(Mt({},n),t),{},{[this.aliasKey]:t.values}));i!==void 0&&(t.memo=i)}clean(){this.eventStore.clean(),this.timeoutStore.clean()}}function h4e([e,t],n){const r=Math.abs(e),i=Math.abs(t);if(r>i&&r>n)return"x";if(i>r&&i>n)return"y"}class Uj extends f4e{constructor(...t){super(...t),Dn(this,"aliasKey","xy")}reset(){super.reset(),this.state.axis=void 0}init(){this.state.offset=[0,0],this.state.lastOffset=[0,0]}computeOffset(){this.state.offset=mn.add(this.state.lastOffset,this.state.movement)}computeMovement(){this.state.movement=mn.sub(this.state.offset,this.state.lastOffset)}axisIntent(t){const n=this.state,r=this.config;if(!n.axis&&t){const i=typeof r.axisThreshold=="object"?r.axisThreshold[Fj(t)]:r.axisThreshold;n.axis=h4e(n._movement,i)}n._blocked=(r.lockDirection||!!r.axis)&&!n.axis||!!r.axis&&r.axis!==n.axis}restrictToAxis(t){if(this.config.axis||this.config.lockDirection)switch(this.state.axis){case"x":t[1]=0;break;case"y":t[0]=0;break}}}const p4e=e=>e,MC=.15,Bj={enabled(e=!0){return e},eventOptions(e,t,n){return Mt(Mt({},n.shared.eventOptions),e)},preventDefault(e=!1){return e},triggerAllEvents(e=!1){return e},rubberband(e=0){switch(e){case!0:return[MC,MC];case!1:return[0,0];default:return mn.toVector(e)}},from(e){if(typeof e=="function")return e;if(e!=null)return mn.toVector(e)},transform(e,t,n){const r=e||n.shared.transform;return this.hasCustomTransform=!!r,r||p4e},threshold(e){return mn.toVector(e,0)}},g4e=0,Su=Mt(Mt({},Bj),{},{axis(e,t,{axis:n}){if(this.lockDirection=n==="lock",!this.lockDirection)return n},axisThreshold(e=g4e){return e},bounds(e={}){if(typeof e=="function")return o=>Su.bounds(e(o));if("current"in e)return()=>e.current;if(typeof HTMLElement=="function"&&e instanceof HTMLElement)return e;const{left:t=-1/0,right:n=1/0,top:r=-1/0,bottom:i=1/0}=e;return[[t,n],[r,i]]}}),NC={ArrowRight:(e,t=1)=>[e*t,0],ArrowLeft:(e,t=1)=>[-1*e*t,0],ArrowUp:(e,t=1)=>[0,-1*e*t],ArrowDown:(e,t=1)=>[0,e*t]};class m4e extends Uj{constructor(...t){super(...t),Dn(this,"ingKey","dragging")}reset(){super.reset();const t=this.state;t._pointerId=void 0,t._pointerActive=!1,t._keyboardActive=!1,t._preventScroll=!1,t._delayed=!1,t.swipe=[0,0],t.tap=!1,t.canceled=!1,t.cancel=this.cancel.bind(this)}setup(){const t=this.state;if(t._bounds instanceof HTMLElement){const n=t._bounds.getBoundingClientRect(),r=t.currentTarget.getBoundingClientRect(),i={left:n.left-r.left+t.offset[0],right:n.right-r.right+t.offset[0],top:n.top-r.top+t.offset[1],bottom:n.bottom-r.bottom+t.offset[1]};t._bounds=Su.bounds(i)}}cancel(){const t=this.state;t.canceled||(t.canceled=!0,t._active=!1,setTimeout(()=>{this.compute(),this.emit()},0))}setActive(){this.state._active=this.state._pointerActive||this.state._keyboardActive}clean(){this.pointerClean(),this.state._pointerActive=!1,this.state._keyboardActive=!1,super.clean()}pointerDown(t){const n=this.config,r=this.state;if(t.buttons!=null&&(Array.isArray(n.pointerButtons)?!n.pointerButtons.includes(t.buttons):n.pointerButtons!==-1&&n.pointerButtons!==t.buttons))return;const i=this.ctrl.setEventIds(t);n.pointerCapture&&t.target.setPointerCapture(t.pointerId),!(i&&i.size>1&&r._pointerActive)&&(this.start(t),this.setupPointer(t),r._pointerId=K2(t),r._pointerActive=!0,this.computeValues(AC(t)),this.computeInitial(),n.preventScrollAxis&&Fj(t)!=="mouse"?(r._active=!1,this.setupScrollPrevention(t)):n.delay>0?(this.setupDelayTrigger(t),n.triggerAllEvents&&(this.compute(t),this.emit())):this.startPointerDrag(t))}startPointerDrag(t){const n=this.state;n._active=!0,n._preventScroll=!0,n._delayed=!1,this.compute(t),this.emit()}pointerMove(t){const n=this.state,r=this.config;if(!n._pointerActive)return;const i=K2(t);if(n._pointerId!==void 0&&i!==n._pointerId)return;const o=AC(t);if(document.pointerLockElement===t.target?n._delta=[t.movementX,t.movementY]:(n._delta=mn.sub(o,n._values),this.computeValues(o)),mn.addTo(n._movement,n._delta),this.compute(t),n._delayed&&n.intentional){this.timeoutStore.remove("dragDelay"),n.active=!1,this.startPointerDrag(t);return}if(r.preventScrollAxis&&!n._preventScroll)if(n.axis)if(n.axis===r.preventScrollAxis||r.preventScrollAxis==="xy"){n._active=!1,this.clean();return}else{this.timeoutStore.remove("startPointerDrag"),this.startPointerDrag(t);return}else return;this.emit()}pointerUp(t){this.ctrl.setEventIds(t);try{this.config.pointerCapture&&t.target.hasPointerCapture(t.pointerId)&&t.target.releasePointerCapture(t.pointerId)}catch{}const n=this.state,r=this.config;if(!n._active||!n._pointerActive)return;const i=K2(t);if(n._pointerId!==void 0&&i!==n._pointerId)return;this.state._pointerActive=!1,this.setActive(),this.compute(t);const[o,s]=n._distance;if(n.tap=o<=r.tapsThreshold&&s<=r.tapsThreshold,n.tap&&r.filterTaps)n._force=!0;else{const[a,c]=n._delta,[l,u]=n._movement,[d,p]=r.swipe.velocity,[g,v]=r.swipe.distance,m=r.swipe.duration;if(n.elapsedTime<m){const _=Math.abs(a/n.timeDelta),y=Math.abs(c/n.timeDelta);_>d&&Math.abs(l)>g&&(n.swipe[0]=Math.sign(a)),y>p&&Math.abs(u)>v&&(n.swipe[1]=Math.sign(c))}}this.emit()}pointerClick(t){!this.state.tap&&t.detail>0&&(t.preventDefault(),t.stopPropagation())}setupPointer(t){const n=this.config,r=n.device;n.pointerLock&&t.currentTarget.requestPointerLock(),n.pointerCapture||(this.eventStore.add(this.sharedConfig.window,r,"change",this.pointerMove.bind(this)),this.eventStore.add(this.sharedConfig.window,r,"end",this.pointerUp.bind(this)),this.eventStore.add(this.sharedConfig.window,r,"cancel",this.pointerUp.bind(this)))}pointerClean(){this.config.pointerLock&&document.pointerLockElement===this.state.currentTarget&&document.exitPointerLock()}preventScroll(t){this.state._preventScroll&&t.cancelable&&t.preventDefault()}setupScrollPrevention(t){this.state._preventScroll=!1,v4e(t);const n=this.eventStore.add(this.sharedConfig.window,"touch","change",this.preventScroll.bind(this),{passive:!1});this.eventStore.add(this.sharedConfig.window,"touch","end",n),this.eventStore.add(this.sharedConfig.window,"touch","cancel",n),this.timeoutStore.add("startPointerDrag",this.startPointerDrag.bind(this),this.config.preventScrollDelay,t)}setupDelayTrigger(t){this.state._delayed=!0,this.timeoutStore.add("dragDelay",()=>{this.state._step=[0,0],this.startPointerDrag(t)},this.config.delay)}keyDown(t){const n=NC[t.key];if(n){const r=this.state,i=t.shiftKey?10:t.altKey?.1:1;this.start(t),r._delta=n(this.config.keyboardDisplacement,i),r._keyboardActive=!0,mn.addTo(r._movement,r._delta),this.compute(t),this.emit()}}keyUp(t){t.key in NC&&(this.state._keyboardActive=!1,this.setActive(),this.compute(t),this.emit())}bind(t){const n=this.config.device;t(n,"start",this.pointerDown.bind(this)),this.config.pointerCapture&&(t(n,"change",this.pointerMove.bind(this)),t(n,"end",this.pointerUp.bind(this)),t(n,"cancel",this.pointerUp.bind(this)),t("lostPointerCapture","",this.pointerUp.bind(this))),this.config.keys&&(t("key","down",this.keyDown.bind(this)),t("key","up",this.keyUp.bind(this))),this.config.filterTaps&&t("click","",this.pointerClick.bind(this),{capture:!0,passive:!1})}}function v4e(e){"persist"in e&&typeof e.persist=="function"&&e.persist()}const oh=typeof window<"u"&&window.document&&window.document.createElement;function Vj(){return oh&&"ontouchstart"in window}function y4e(){return Vj()||oh&&window.navigator.maxTouchPoints>1}function _4e(){return oh&&"onpointerdown"in window}function b4e(){return oh&&"exitPointerLock"in window.document}function w4e(){try{return"constructor"in GestureEvent}catch{return!1}}const zr={isBrowser:oh,gesture:w4e(),touch:Vj(),touchscreen:y4e(),pointer:_4e(),pointerLock:b4e()},S4e=250,C4e=180,E4e=.5,x4e=50,I4e=250,R4e=10,$C={mouse:0,touch:0,pen:8},L4e=Mt(Mt({},Su),{},{device(e,t,{pointer:{touch:n=!1,lock:r=!1,mouse:i=!1}={}}){return this.pointerLock=r&&zr.pointerLock,zr.touch&&n?"touch":this.pointerLock?"mouse":zr.pointer&&!i?"pointer":zr.touch?"touch":"mouse"},preventScrollAxis(e,t,{preventScroll:n}){if(this.preventScrollDelay=typeof n=="number"?n:n||n===void 0&&e?S4e:void 0,!(!zr.touchscreen||n===!1))return e||(n!==void 0?"y":void 0)},pointerCapture(e,t,{pointer:{capture:n=!0,buttons:r=1,keys:i=!0}={}}){return this.pointerButtons=r,this.keys=i,!this.pointerLock&&this.device==="pointer"&&n},threshold(e,t,{filterTaps:n=!1,tapsThreshold:r=3,axis:i=void 0}){const o=mn.toVector(e,n?r:i?1:0);return this.filterTaps=n,this.tapsThreshold=r,o},swipe({velocity:e=E4e,distance:t=x4e,duration:n=I4e}={}){return{velocity:this.transform(mn.toVector(e)),distance:this.transform(mn.toVector(t)),duration:n}},delay(e=0){switch(e){case!0:return C4e;case!1:return 0;default:return e}},axisThreshold(e){return e?Mt(Mt({},$C),e):$C},keyboardDisplacement(e=R4e){return e}});Mt(Mt({},Bj),{},{device(e,t,{shared:n,pointer:{touch:r=!1}={}}){if(n.target&&!zr.touch&&zr.gesture)return"gesture";if(zr.touch&&r)return"touch";if(zr.touchscreen){if(zr.pointer)return"pointer";if(zr.touch)return"touch"}},bounds(e,t,{scaleBounds:n={},angleBounds:r={}}){const i=s=>{const a=PC(lg(n,s),{min:-1/0,max:1/0});return[a.min,a.max]},o=s=>{const a=PC(lg(r,s),{min:-1/0,max:1/0});return[a.min,a.max]};return typeof n!="function"&&typeof r!="function"?[i(),o()]:s=>[i(s),o(s)]},threshold(e,t,n){return this.lockDirection=n.axis==="lock",mn.toVector(e,this.lockDirection?[.1,3]:0)},modifierKey(e){return e===void 0?"ctrlKey":e},pinchOnWheel(e=!0){return e}});Mt(Mt({},Su),{},{mouseOnly:(e=!0)=>e});class k4e extends Uj{constructor(...t){super(...t),Dn(this,"ingKey","scrolling")}scroll(t){this.state._active||this.start(t),this.scrollChange(t),this.timeoutStore.add("scrollEnd",this.scrollEnd.bind(this))}scrollChange(t){t.cancelable&&t.preventDefault();const n=this.state,r=a4e(t);n._delta=mn.sub(r,n._values),mn.addTo(n._movement,n._delta),this.computeValues(r),this.compute(t),this.emit()}scrollEnd(){this.state._active&&(this.state._active=!1,this.compute(),this.emit())}bind(t){t("scroll","",this.scroll.bind(this))}}const T4e=Su;Mt(Mt({},Su),{},{mouseOnly:(e=!0)=>e});const qj=new Map,V3=new Map;function Gj(e){qj.set(e.key,e.engine),V3.set(e.key,e.resolver)}const A4e={key:"drag",engine:m4e,resolver:L4e},P4e={key:"scroll",engine:k4e,resolver:T4e};function M4e(e,t){if(e==null)return{};var n={},r=Object.keys(e),i,o;for(o=0;o<r.length;o++)i=r[o],!(t.indexOf(i)>=0)&&(n[i]=e[i]);return n}function N4e(e,t){if(e==null)return{};var n=M4e(e,t),r,i;if(Object.getOwnPropertySymbols){var o=Object.getOwnPropertySymbols(e);for(i=0;i<o.length;i++)r=o[i],!(t.indexOf(r)>=0)&&Object.prototype.propertyIsEnumerable.call(e,r)&&(n[r]=e[r])}return n}const $4e={target(e){if(e)return()=>"current"in e?e.current:e},enabled(e=!0){return e},window(e=zr.isBrowser?window:void 0){return e},eventOptions({passive:e=!0,capture:t=!1}={}){return{passive:e,capture:t}},transform(e){return e}},O4e=["target","eventOptions","window","enabled","transform"];function Gp(e={},t){const n={};for(const[r,i]of Object.entries(t))switch(typeof i){case"function":n[r]=i.call(n,e[r],r,e);break;case"object":n[r]=Gp(e[r],i);break;case"boolean":i&&(n[r]=e[r]);break}return n}function j4e(e,t,n={}){const r=e,{target:i,eventOptions:o,window:s,enabled:a,transform:c}=r,l=N4e(r,O4e);if(n.shared=Gp({target:i,eventOptions:o,window:s,enabled:a,transform:c},$4e),t){const u=V3.get(t);n[t]=Gp(Mt({shared:n.shared},l),u)}else for(const u in l){const d=V3.get(u);d&&(n[u]=Gp(Mt({shared:n.shared},l[u]),d))}return n}class Kj{constructor(t,n){Dn(this,"_listeners",new Set),this._ctrl=t,this._gestureKey=n}add(t,n,r,i,o){const s=this._listeners,a=r4e(n,r),c=this._gestureKey?this._ctrl.config[this._gestureKey].eventOptions:{},l=Mt(Mt({},c),o);t.addEventListener(a,i,l);const u=()=>{t.removeEventListener(a,i,l),s.delete(u)};return s.add(u),u}clean(){this._listeners.forEach(t=>t()),this._listeners.clear()}}class D4e{constructor(){Dn(this,"_timeouts",new Map)}add(t,n,r=140,...i){this.remove(t),this._timeouts.set(t,window.setTimeout(n,r,...i))}remove(t){const n=this._timeouts.get(t);n&&window.clearTimeout(n)}clean(){this._timeouts.forEach(t=>{window.clearTimeout(t)}),this._timeouts.clear()}}class F4e{constructor(t){Dn(this,"gestures",new Set),Dn(this,"_targetEventStore",new Kj(this)),Dn(this,"gestureEventStores",{}),Dn(this,"gestureTimeoutStores",{}),Dn(this,"handlers",{}),Dn(this,"config",{}),Dn(this,"pointerIds",new Set),Dn(this,"touchIds",new Set),Dn(this,"state",{shared:{shiftKey:!1,metaKey:!1,ctrlKey:!1,altKey:!1}}),H4e(this,t)}setEventIds(t){if(Xm(t))return this.touchIds=new Set(s4e(t)),this.touchIds;if("pointerId"in t)return t.type==="pointerup"||t.type==="pointercancel"?this.pointerIds.delete(t.pointerId):t.type==="pointerdown"&&this.pointerIds.add(t.pointerId),this.pointerIds}applyHandlers(t,n){this.handlers=t,this.nativeHandlers=n}applyConfig(t,n){this.config=j4e(t,n,this.config)}clean(){this._targetEventStore.clean();for(const t of this.gestures)this.gestureEventStores[t].clean(),this.gestureTimeoutStores[t].clean()}effect(){return this.config.shared.target&&this.bind(),()=>this._targetEventStore.clean()}bind(...t){const n=this.config.shared,r={};let i;if(!(n.target&&(i=n.target(),!i))){if(n.enabled){for(const s of this.gestures){const a=this.config[s],c=OC(r,a.eventOptions,!!i);if(a.enabled){const l=qj.get(s);new l(this,t,s).bind(c)}}const o=OC(r,n.eventOptions,!!i);for(const s in this.nativeHandlers)o(s,"",a=>this.nativeHandlers[s](Mt(Mt({},this.state.shared),{},{event:a,args:t})),void 0,!0)}for(const o in r)r[o]=u4e(...r[o]);if(!i)return r;for(const o in r){const{device:s,capture:a,passive:c}=n4e(o);this._targetEventStore.add(i,s,"",r[o],{capture:a,passive:c})}}}}function jc(e,t){e.gestures.add(t),e.gestureEventStores[t]=new Kj(e,t),e.gestureTimeoutStores[t]=new D4e}function H4e(e,t){t.drag&&jc(e,"drag"),t.wheel&&jc(e,"wheel"),t.scroll&&jc(e,"scroll"),t.move&&jc(e,"move"),t.pinch&&jc(e,"pinch"),t.hover&&jc(e,"hover")}const OC=(e,t,n)=>(r,i,o,s={},a=!1)=>{var c,l;const u=(c=s.capture)!==null&&c!==void 0?c:t.capture,d=(l=s.passive)!==null&&l!==void 0?l:t.passive;let p=a?r:e4e(r,i,u);n&&d&&(p+="Passive"),e[p]=e[p]||[],e[p].push(o)};function Wj(e,t={},n,r){const i=X.useMemo(()=>new F4e(e),[]);if(i.applyHandlers(e,r),i.applyConfig(t,n),X.useEffect(i.effect.bind(i)),X.useEffect(()=>i.clean.bind(i),[]),t.target===void 0)return i.bind.bind(i)}function U4e(e,t){return Gj(A4e),Wj({drag:e},t||{},"drag")}function B4e(e,t){return Gj(P4e),Wj({scroll:e},t||{},"scroll")}const V4e="_grid_19qx5_8",q4e="_slot_19qx5_12",W2={grid:V4e,slot:q4e},G4e="_tile_lwkx2_8",K4e="_draggable_lwkx2_8",jC={tile:G4e,draggable:K4e},zj=f.memo(({id:e,onDrag:t,targetWidth:n,targetHeight:r,model:i,Tile:o,opacity:s,scale:a,zIndex:c,x:l,y:u,width:d,height:p})=>{const g=f.useRef(null);return U4e(v=>t?.current(e,v),{target:g,filterTaps:!0}),h.jsx(o,{ref:g,className:Z(jC.tile,{[jC.draggable]:t}),style:{opacity:s,scale:a,zIndex:c,x:l,y:u,width:d,height:p},targetWidth:n,targetHeight:r,model:i})});zj.displayName="TileWrapper";const W4e=zj,z4e=()=>Kg("(prefers-reduced-motion)");function Yj(e,t){if(!(e.offsetParent instanceof HTMLElement)||e.offsetParent===t)return{x:e.offsetLeft,y:e.offsetTop};{const n=Yj(e.offsetParent,t);return n.x+=e.offsetLeft,n.y+=e.offsetTop,n}}const Xj=f.createContext(null);function Zj(){const e=f.use(Xj);if(e===null)throw new Error("useUpdateLayout called outside a Grid layout context");return e}function lo(){const{setGeneration:e}=Zj();f.useEffect(()=>e(t=>t===null?0:t+1))}function n6(e){const{setVisibleTilesCallback:t}=Zj();f.useEffect(()=>t(()=>e),[e,t]),f.useEffect(()=>()=>t(null),[t])}function DC({model:e,Layout:t,Tile:n,className:r,style:i}){const[o,s]=xd(),[a,c]=f.useState(null),l=wu(o,c),u=f.useSyncExternalStore(f.useCallback(j=>(window.addEventListener("resize",j),()=>window.removeEventListener("resize",j)),[]),f.useCallback(()=>window.innerHeight,[])),[d,p]=f.useState(null),[g,v]=f.useState(null),[m,_]=f.useState(null),y=Fs(()=>new Map),w=z4e(),S=f.useMemo(()=>function({id:$,model:T,onDrag:N,style:M,className:B,...F}){const K=f.useRef(null);return f.useEffect(()=>(y.set($,{id:$,model:T,onDrag:N}),()=>{y.delete($)}),[$,T,N]),h.jsx("div",{ref:K,className:Z(B,W2.slot),"data-id":$,style:M,...F})},[y]),b=f.useMemo(()=>f.memo(function({ref:$,Layout:T,...N}){return h.jsx(T,{...N,ref:$})}),[]),C=f.useMemo(()=>({setGeneration:v,setVisibleTilesCallback:_}),[_]),E=f.useMemo(()=>{const j=[];if(a!==null&&d!==null){const $=d.getElementsByClassName(W2.slot);for(const T of $){const N=T.getAttribute("data-id");T.offsetWidth>0&&T.offsetHeight>0&&j.push({...y.get(N),...Yj(T,a),width:T.offsetWidth,height:T.offsetHeight})}}return j},[a,d,y,s,g]),x=f.useMemo(()=>Math.min(s.bottom,u)-s.top,[s,u]);f.useEffect(()=>{m?.(E.filter(j=>j.y+j.height<=x).length)},[E,m,x]);const I=f.useRef(null),[L,R]=cye(E,()=>({key:({id:j})=>j,from:({x:j,y:$,width:T,height:N})=>({opacity:0,scale:0,zIndex:1,x:j,y:$,width:T,height:N,immediate:w}),enter:{opacity:1,scale:1,immediate:w},update:({id:j,x:$,y:T,width:N,height:M})=>j===I.current?.tileId?null:{x:$,y:T,width:N,height:M,immediate:w},leave:{opacity:0,scale:0,immediate:w},config:{mass:.7,tension:252,friction:25}}));f.useEffect(()=>{R.start().forEach(j=>{j.catch(U.error)})},[E,R]);const k=(j,$)=>{const{tileId:T,tileX:N,tileY:M}=I.current,B=E.find(F=>F.id===T);R.current.find(F=>F.item.id===T)?.start(j?{scale:1,zIndex:1,x:B.x,y:B.y,width:B.width,height:B.height,immediate:w||(F=>F==="zIndex"),delay:F=>F==="zIndex"?500:0}:{scale:1.1,zIndex:2,x:N,y:M,immediate:w||(F=>F==="zIndex"||F==="x"||F==="y")}).catch(U.error),j&&$({x:N,y:M,xRatio:N/(s.width-B.width),yRatio:M/(s.height-B.height)})},A=(j,{tap:$,initial:[T,N],delta:[M,B],last:F})=>{if(!$){const K=R.current.find(oe=>oe.item.id===j),te=y.get(K.item.id).onDrag;if(te!=null){if(I.current===null){const oe=K.get();I.current={tileId:j,tileX:oe.x,tileY:oe.y,cursorX:T-s.x,cursorY:N-s.y+O.current}}I.current.tileX+=M,I.current.tileY+=B,I.current.cursorX+=M,I.current.cursorY+=B,k(F,te),F&&(I.current=null)}}},P=f.useRef(A);P.current=A;const O=f.useRef(0);return B4e(({xy:[,j],delta:[,$]})=>{O.current=j,I.current!==null&&(I.current.tileY+=$,I.current.cursorY+=$,k(!1,y.get(I.current.tileId).onDrag))},{target:a??void 0}),h.jsxs("div",{ref:l,className:Z(r,W2.grid),style:i,children:[h.jsx(Xj,{value:C,children:h.jsx(b,{ref:p,Layout:t,model:e,Slot:S})}),L((j,{id:$,model:T,onDrag:N,width:M,height:B})=>h.jsx(W4e,{id:$,onDrag:N?P:null,targetWidth:M,targetHeight:B,model:T,Tile:n,...j},$))]})}const Y4e=(e,t)=>f.createElement("svg",{width:24,height:24,fill:"currentColor",viewBox:"0 0 24 24",xmlns:"http://www.w3.org/2000/svg",ref:t,...e},f.createElement("path",{d:"M4 14C4.55228 14 5 14.4477 5 15V19H9C9.55228 19 10 19.4477 10 20C10 20.5523 9.55228 21 9 21H3V15C3 14.4477 3.44772 14 4 14Z"}),f.createElement("path",{d:"M20 14C20.5523 14 21 14.4477 21 15V21H15C14.4477 21 14 20.5523 14 20C14 19.4477 14.4477 19 15 19H19V15C19 14.4477 19.4477 14 20 14Z"}),f.createElement("path",{d:"M9 3C9.55228 3 10 3.44772 10 4C10 4.55228 9.55228 5 9 5H5V9C5 9.55228 4.55228 10 4 10C3.44772 10 3 9.55228 3 9V3H9Z"}),f.createElement("path",{d:"M21 9C21 9.55228 20.5523 10 20 10C19.4477 10 19 9.55228 19 9V5H15C14.4477 5 14 4.55228 14 4C14 3.44772 14.4477 3 15 3H21V9Z"})),X4e=f.forwardRef(Y4e),Z4e=(e,t)=>f.createElement("svg",{width:24,height:24,fill:"currentColor",viewBox:"0 0 24 24",xmlns:"http://www.w3.org/2000/svg",ref:t,...e},f.createElement("path",{d:"M10 20C10 20.5523 9.55228 21 9 21C8.44772 21 8 20.5523 8 20V16H4C3.44772 16 3 15.5523 3 15C3 14.4477 3.44772 14 4 14H10V20Z"}),f.createElement("path",{d:"M20 14C20.5523 14 21 14.4477 21 15C21 15.5523 20.5523 16 20 16H16V20C16 20.5523 15.5523 21 15 21C14.4477 21 14 20.5523 14 20V14H20Z"}),f.createElement("path",{d:"M9 3C9.55228 3 10 3.44772 10 4V10H4C3.44772 10 3 9.55228 3 9C3 8.44772 3.44772 8 4 8H8V4C8 3.44772 8.44772 3 9 3Z"}),f.createElement("path",{d:"M15 3C15.5523 3 16 3.44772 16 4V8H20C20.5523 8 21 8.44772 21 9C21 9.55228 20.5523 10 20 10H14V4C14 3.44772 14.4477 3 15 3Z"})),Q4e=f.forwardRef(Z4e),J4e="_contents_18q5h_8",e_e="_tile_18q5h_25",t_e="_maximised_18q5h_25",n_e="_item_18q5h_29",r_e="_snap_18q5h_36",i_e="_advance_18q5h_40",o_e="_back_18q5h_76",s_e="_next_18q5h_80",a_e="_expand_18q5h_84",c_e="_bottomRightButtons_18q5h_102",l_e="_indicators_18q5h_136",u_e="_show_18q5h_148",jn={contents:J4e,tile:e_e,maximised:t_e,item:n_e,snap:r_e,advance:i_e,back:o_e,next:s_e,expand:a_e,bottomRightButtons:c_e,indicators:l_e,show:u_e},Qj=(e,t)=>{const n=f.useRef(void 0);n.current===void 0&&(n.current=e());const r=f.useRef(void 0),[,i]=f.useState(0);return(r.current===void 0||t.length!==r.current.length||t.some((o,s)=>!Object.is(o,r.current[s])))&&(n.current=e(n.current)),r.current=t,[n.current,f.useCallback(o=>{typeof o=="function"?n.current=o(n.current):n.current=o,i(s=>s+1)},[i])]},Jj=({vm:e,...t})=>{const n=J(e.mirror$);return h.jsx(ih,{mirror:n,...t})};Jj.displayName="SpotlightLocalUserMediaItem";const d_e=({vm:e,...t})=>{const n=J(e.waitingForMedia$);return h.jsx(ih,{waitingForMedia:n,mirror:!1,...t})},eD=({vm:e,...t})=>{const r={videoFit:J(e.cropVideo$)?"cover":"contain",...t};return e instanceof Vl?h.jsx(Jj,{vm:e,...r}):h.jsx(d_e,{vm:e,...r})};eD.displayName="SpotlightUserMediaItem";const tD=({ref:e,vm:t,targetWidth:n,targetHeight:r,focusable:i,intersectionObserver$:o,snap:s,"aria-hidden":a})=>{const c=f.useRef(null),l=wu(c,e),u=J(t.focusUrl$),d=J(t.displayName$),p=J(t.mxcAvatarUrl$),g=J(t.video$),v=J(t.videoEnabled$),m=J(t.unencryptedWarning$),_=J(t.encryptionStatus$);f.useEffect(()=>{const w=c.current;let S=null;const b=o.subscribe(C=>{S?.unobserve(w),C.observe(w),S=C});return()=>{b.unsubscribe(),S?.unobserve(w)}},[o]);const y={ref:l,"data-id":t.id,className:Z(jn.item,{[jn.snap]:s}),targetWidth:n,targetHeight:r,video:g??void 0,videoEnabled:v,userId:t.userId,unencryptedWarning:m,focusUrl:u,displayName:d,mxcAvatarUrl:p,focusable:i,encryptionStatus:_,"aria-hidden":a};return t instanceof Zc?h.jsx(ih,{videoFit:"contain",mirror:!1,...y}):h.jsx(eD,{vm:t,...y})};tD.displayName="SpotlightItem";const q3=({ref:e,vm:t,expanded:n,onToggleExpanded:r,targetWidth:i,targetHeight:o,showIndicators:s,focusable:a=!0,className:c,style:l})=>{const{t:u}=he(),[d,p]=i1e(null),g=wu(d,e),v=J(t.maximised$),m=J(t.media$),[_,y]=f.useState(m[0]?.id),w=Wa(m),S=Wa(_),b=m.findIndex($=>$.id===_),C=b>0,E=b!==-1&&b<m.length-1,x=f.useCallback(()=>!!(document.body&&document.fullscreenElement),[]),I=x()?Q4e:X4e,L=f.useCallback(()=>{const $=document.body;$&&(x()?document?.exitFullscreen():$.requestFullscreen())},[x]),R=Fs(()=>p.pipe(V($=>new IntersectionObserver(T=>{const N=T.find(M=>M.isIntersecting);N!==void 0&&y(N.target.getAttribute("data-id"))},{root:$,threshold:.5})))),[k,A]=Qj($=>$==null||$===_||m.every(T=>T.id!==$)?null:$,[_]),P=f.useCallback(()=>{const $=w.current,T=$.findIndex(N=>N.id===S.current);T>0&&A($[T-1].id)},[S,w,A]),O=f.useCallback(()=>{const $=w.current,T=$.findIndex(N=>N.id===S.current);T!==-1&&T!==$.length-1&&A($[T+1].id)},[S,w,A]),j=n?aA:hA;return h.jsxs(Ej.div,{ref:g,className:Z(c,jn.tile,{[jn.maximised]:v}),style:l,children:[C&&h.jsx("button",{className:Z(jn.advance,jn.back),"aria-label":u("common.back"),onClick:P,tabIndex:a?void 0:-1,children:h.jsx(Pre,{"aria-hidden":!0,width:24,height:24})}),h.jsx("div",{className:jn.contents,children:m.map($=>h.jsx(tD,{vm:$,targetWidth:i,targetHeight:o,focusable:a,intersectionObserver$:R,snap:k===null||k===$.id,"aria-hidden":(k??_)!==$.id},$.id))}),h.jsxs("div",{className:jn.bottomRightButtons,children:[h.jsx("button",{className:Z(jn.expand),"aria-label":"maximise",onClick:L,tabIndex:a?void 0:-1,children:h.jsx(I,{"aria-hidden":!0,width:20,height:20})}),r&&h.jsx("button",{className:Z(jn.expand),"aria-label":u(n?"video_tile.collapse":"video_tile.expand"),onClick:r,tabIndex:a?void 0:-1,children:h.jsx(j,{"aria-hidden":!0,width:20,height:20})})]}),E&&h.jsx("button",{className:Z(jn.advance,jn.next),"aria-label":u("common.next"),onClick:O,tabIndex:a?void 0:-1,children:h.jsx(CT,{"aria-hidden":!0,width:24,height:24})}),!n&&h.jsx("div",{className:Z(jn.indicators,{[jn.show]:s&&m.length>1}),children:m.map($=>h.jsx("div",{className:jn.item,"data-visible":$.id===_},$.id))})]})};q3.displayName="SpotlightTile";const f_e="_fixed_r39jt_8",h_e="_scrolling_r39jt_9",p_e="_slot_r39jt_21",tp={fixed:f_e,scrolling:h_e,slot:p_e},g_e={inline:"end",block:"end"},m_e={inline:"end",block:"start"},FC=17/9,z2=4/3;function r6(e,t,n){const r=e<800?16:20,i=e*t,o=Math.pow(Math.sqrt(i)/8+125,2),s=Math.min(n,i/o);let a=Math.min(s,Math.round(Math.sqrt(e/t/z2*s))),c=s/a;s===n&&(c=Math.ceil(c),a=Math.ceil(n/c));let l=(e-(a+1)*r)/a,u=(t-(c-1)*r)/c;const d=l/u;return d>FC?l=u*FC:d<z2&&(u=l/z2),{tileWidth:l,tileHeight:u,gap:r,columns:a}}const v_e=({minBounds$:e,spotlightAlignment$:t})=>({scrollingOnTop:!1,fixed:function({ref:r,model:i,Slot:o}){lo();const s=dr(Fs(()=>t.pipe(ar((c,l)=>c.block===l.block&&c.inline===l.inline)))),a=f.useCallback(({xRatio:c,yRatio:l})=>t.next({block:l<.5?"start":"end",inline:c<.5?"start":"end"}),[]);return h.jsx("div",{ref:r,className:tp.fixed,children:i.spotlight&&h.jsx(o,{className:tp.slot,id:"spotlight",model:i.spotlight,onDrag:a,"data-block-alignment":s.block,"data-inline-alignment":s.inline})})},scrolling:function({ref:r,model:i,Slot:o}){lo(),n6(i.setVisibleTiles);const{width:s,height:a}=dr(e),{gap:c,tileWidth:l,tileHeight:u}=f.useMemo(()=>r6(s,a,i.grid.length),[s,a,i.grid.length]);return h.jsx("div",{ref:r,className:tp.scrolling,style:{width:s,"--gap":`${c}px`,"--width":`${Math.floor(l)}px`,"--height":`${Math.floor(u)}px`},children:i.grid.map(d=>h.jsx(o,{className:tp.slot,id:d.id,model:d},d.id))})}}),y_e="_layer_mc5gk_8",__e="_container_mc5gk_14",b_e="_local_mc5gk_18",w_e="_slot_mc5gk_31",np={layer:y_e,container:__e,local:b_e,slot:w_e},S_e=({minBounds$:e,pipAlignment$:t})=>({scrollingOnTop:!1,fixed:function({ref:r}){return lo(),h.jsx("div",{ref:r})},scrolling:function({ref:r,model:i,Slot:o}){lo();const{width:s,height:a}=dr(e),c=J(t),{tileWidth:l,tileHeight:u}=f.useMemo(()=>r6(s,a,1),[s,a]),d=f.useCallback(({xRatio:p,yRatio:g})=>t.next({block:g<.5?"start":"end",inline:p<.5?"start":"end"}),[]);return h.jsx("div",{ref:r,className:np.layer,children:h.jsx(o,{id:i.remote.id,model:i.remote,className:np.container,style:{width:l,height:u},children:h.jsx(o,{className:Z(np.slot,np.local),id:i.local.id,model:i.local,onDrag:d,"data-block-alignment":c.block,"data-inline-alignment":c.inline})})})}}),C_e="_layer_1swii_8",E_e="_spotlight_1swii_12",x_e="_pip_1swii_17",rp={layer:C_e,spotlight:E_e,pip:x_e},I_e=({pipAlignment$:e})=>({scrollingOnTop:!0,fixed:function({ref:n,model:r,Slot:i}){return lo(),h.jsx("div",{ref:n,className:rp.layer,children:h.jsx(i,{className:rp.spotlight,id:"spotlight",model:r.spotlight})})},scrolling:function({ref:n,model:r,Slot:i}){lo();const o=J(e),s=f.useCallback(({xRatio:a,yRatio:c})=>e.next({block:c<.5?"start":"end",inline:a<.5?"start":"end"}),[]);return h.jsx("div",{ref:n,className:rp.layer,children:r.pip&&h.jsx(i,{className:rp.pip,id:r.pip.id,model:r.pip,onDrag:s,"data-block-alignment":o.block,"data-inline-alignment":o.inline})})}}),R_e="_layer_jsvx2_8",L_e="_spotlight_jsvx2_19",k_e="_slot_jsvx2_28",T_e="_grid_jsvx2_34",So={layer:R_e,spotlight:L_e,slot:k_e,grid:T_e},A_e=({minBounds$:e})=>({scrollingOnTop:!1,fixed:function({ref:n,model:r,Slot:i}){return lo(),dr(e),h.jsxs("div",{ref:n,className:So.layer,children:[h.jsx("div",{className:So.spotlight,children:h.jsx(i,{className:So.slot,id:"spotlight",model:r.spotlight})}),h.jsx("div",{className:So.grid})]})},scrolling:function({ref:n,model:r,Slot:i}){lo(),n6(r.setVisibleTiles),dr(e);const o=dr(r.spotlight.media$).length>1;return h.jsxs("div",{ref:n,className:So.layer,children:[h.jsx("div",{className:Z(So.spotlight,{[So.withIndicators]:o})}),h.jsx("div",{className:So.grid,children:r.grid.map(s=>h.jsx(i,{className:So.slot,id:s.id,model:s},s.id))})]})}}),P_e="_layer_1q32d_8",M_e="_spotlight_1q32d_17",N_e="_withIndicators_1q32d_26",$_e="_slot_1q32d_30",O_e="_grid_1q32d_35",vs={layer:P_e,spotlight:M_e,withIndicators:N_e,slot:$_e,grid:O_e},j_e=({minBounds$:e})=>({scrollingOnTop:!1,fixed:function({ref:n,model:r,Slot:i}){return lo(),h.jsx("div",{ref:n,className:vs.layer,children:h.jsx("div",{className:vs.spotlight,children:h.jsx(i,{className:vs.slot,id:"spotlight",model:r.spotlight})})})},scrolling:function({ref:n,model:r,Slot:i}){lo(),n6(r.setVisibleTiles);const{width:o}=dr(e),{gap:s,tileWidth:a,tileHeight:c}=r6(o,o,r.grid.length),l=J(r.spotlight.media$).length>1;return h.jsxs("div",{ref:n,className:vs.layer,style:{"--grid-gap":`${s}px`,"--grid-tile-width":`${Math.floor(a)}px`,"--grid-tile-height":`${Math.floor(c)}px`},children:[h.jsx("div",{className:Z(vs.spotlight,{[vs.withIndicators]:l})}),h.jsx("div",{className:vs.grid,children:r.grid.map(u=>h.jsx(i,{className:vs.slot,id:u.id,model:u},u.id))})]})}});async function nD(e,t,n,r,i=0,o){const s=e.createGain();s.gain.setValueAtTime(n,0);const a=e.createStereoPanner();a.pan.setValueAtTime(r,0);const c=e.createBufferSource();c.buffer=t,o?.signal.addEventListener("abort",()=>{c.disconnect()});const l=new Promise(u=>c.addEventListener("ended",()=>u()));return c.connect(s).connect(a).connect(e.destination),rN(),c.start(e.currentTime+i),l}function D_e(e,t,n,r,i){if(i===0)throw Error("Looping sounds must have a delay");let o,s,a;return(async()=>{a=new AbortController,o=Promise.resolve();do s=nD(e,t,n,r,i,a),await o,o=s;while(!a.signal.aborted)})(),async()=>{a?.abort(),await o,await s}}function Zm(e){const[t]=qt(BM),[n,r]=f.useState(),[i,o]=f.useState();f.useEffect(()=>{const u=e.sounds;if(!u)return;const d=new AudioContext({latencyHint:e.latencyHint});return(async()=>{const p={};for(const[g,v]of Object.entries(await u)){const m=await d.decodeAudioData(v.slice(0));p[g]=m}o(p)})().catch(p=>{U.debug("Failed to setup audio context",p)}),r(d),()=>{d.close().catch(p=>{U.debug("Failed to close audio engine",p)}),r(void 0)}},[e.sounds,e.latencyHint]);const s=dr(dc().audioOutput.selected$)?.id,{controlledAudioDevices:a}=gi();f.useEffect(()=>{n&&"setSinkId"in n&&!a&&n.setSinkId(s).catch(u=>{U.warn("Unable to change sink for audio context",u)})},[n,s,a]);const{pan:c,volume:l}=hN();return!n||!i||e.muted?null:{playSound:async u=>{if(!i[u]){U.debug(`Tried to play a sound that wasn't buffered (${u})`);return}return nD(n,i[u],t*l,c)},playSoundLooping:(u,d)=>{if(!i[u])throw Error(`Tried to play a sound that wasn't buffered (${u})`);return D_e(n,i[u],t*l,c,d)},soundDuration:Object.fromEntries(Object.entries(i).map(([u,d])=>[u,d.duration]))}}function F_e(){return document.createElement("audio").canPlayType("audio/ogg")==="maybe"?"ogg":"mp3"}const H_e=F_e();async function i6(e){const t={};return await Promise.all(Object.entries(e).map(async([n,r])=>{const{mp3:i,ogg:o}=r,s=await fetch(H_e==="ogg"?o:i??o);if(X_(s)){U.warn(`Could not load sound ${n}, response was not okay`);return}t[n]=await s.arrayBuffer()})),t}const HC=Object.fromEntries([...Xd.filter(e=>e.sound!==void 0).map(e=>[e.name,e.sound]),[Py.name,Py.sound]]);function U_e({vm:e,muted:t}){const[n]=qt(yb),[r,i]=f.useState(null),o=Zm({sounds:r,latencyHint:"interactive",muted:t}),s=Wa(o);return f.useEffect(()=>{!n||r||i(i6(HC))},[r,n]),f.useEffect(()=>{const a=e.audibleReactions$.subscribe(c=>{for(const l of c)HC[l]?s.current?.playSound(l):s.current?.playSound("generic")});return()=>{a.unsubscribe()}},[e,s]),null}const B_e="_container_1ux8r_1",V_e="_reaction_1ux8r_12",UC={container:B_e,reaction:V_e};function q_e({vm:e}){const t=J(e.visibleReactions$);return h.jsx("div",{className:UC.container,children:t.map(({sender:n,emoji:r,startX:i})=>h.jsx("span",{role:"presentation",style:{left:`${i}vw`},className:UC.reaction,children:r},n))})}const G_e=""+new URL("join_call-dEJCP2wD.mp3",import.meta.url).href,K_e=""+new URL("join_call-DlMV9nHk.ogg",import.meta.url).href,W_e=""+new URL("left_call-BbqmRgnC.mp3",import.meta.url).href,z_e=""+new URL("left_call-C7NMl6WI.ogg",import.meta.url).href,Y_e=""+new URL("raise_hand-CUbxEnt9.ogg",import.meta.url).href,X_e=""+new URL("raise_hand-Bzqn65WB.mp3",import.meta.url).href,Z_e=""+new URL("screen_share_started-IZDL-kAw.ogg",import.meta.url).href,Q_e=""+new URL("screen_share_started-DH3qxml5.mp3",import.meta.url).href,J_e=""+new URL("call_declined-1jWRbd4p.mp3",import.meta.url).href,ebe=""+new URL("call_declined-C6gHsCGH.ogg",import.meta.url).href,tbe=""+new URL("call_timeout-BCxXxRD8.mp3",import.meta.url).href,nbe=""+new URL("call_timeout-DPKAj6sz.ogg",import.meta.url).href,rD=i6({join:{mp3:G_e,ogg:K_e},left:{mp3:W_e,ogg:z_e},raiseHand:{mp3:X_e,ogg:Y_e},screenshareStarted:{mp3:Q_e,ogg:Z_e},decline:{mp3:J_e,ogg:ebe},timeout:{mp3:tbe,ogg:nbe}});function rbe({vm:e,muted:t}){const n=Zm({sounds:rD,latencyHint:"interactive",muted:t}),r=Wa(n);return f.useEffect(()=>{const i=e.joinSoundEffect$.subscribe(()=>{r.current?.playSound("join")}),o=e.leaveSoundEffect$.subscribe(()=>{r.current?.playSound("left")}),s=e.newHandRaised$.subscribe(()=>{r.current?.playSound("raiseHand")}),a=e.newScreenShare$.subscribe(()=>{r.current?.playSound("screenshareStarted")});return()=>{i.unsubscribe(),o.unsubscribe(),s.unsubscribe(),a.unsubscribe()}},[r,e]),h.jsx(h.Fragment,{})}const BC=3e3;class ibe{constructor(t,n){this.scope=t,this.rtcSession=n,this.raisedHandsSubject$=new Pt({}),this.reactionsSubject$=new Pt({}),this.raisedHands$=this.raisedHandsSubject$.asObservable(),this.reactions$=this.reactionsSubject$.asObservable(),this.onMembershipsChanged=r=>{for(const i of Object.keys(this.raisedHandsSubject$.value).filter(o=>r.find(s=>s.userId==o)))this.removeRaisedHand(i);for(const i of this.rtcSession.memberships){if(!i.userId||!i.eventId)continue;const o=`${i.userId}:${i.deviceId}`;this.raisedHandsSubject$.value[o]&&this.raisedHandsSubject$.value[o].membershipEventId!==i.eventId&&this.removeRaisedHand(o);const s=this.getLastReactionEvent(i.eventId,i.userId);if(s){const a=s?.getId();if(!a)continue;this.addRaisedHand(`${i.userId}:${i.deviceId}`,{membershipEventId:i.eventId,reactionEventId:a,time:new Date(s.localTimestamp)})}}},this.handleReactionEvent=r=>{const i=this.rtcSession.room;if(r.getRoomId()!==i.roomId||r.isSending())return;const o=r.getSender(),s=r.getId();if(!(!o||!s)&&(i.client.decryptEventIfNeeded(r).catch(a=>U.warn(`Failed to decrypt ${r.getId()}`,a)),!(r.isBeingDecrypted()||r.isDecryptionFailure()))){if(r.getType()===J_){const a=r.getContent(),c=a?.["m.relates_to"]?.event_id,l=this.rtcSession.memberships.find(m=>m.eventId===c&&m.userId===o);if(!l){U.warn(`Reaction target was not a membership event for ${o}, ignoring`);return}const u=`${l.userId}:${l.deviceId}`;if(!a.emoji){U.warn(`Reaction had no emoji from ${s}`);return}const p=new Intl.Segmenter(void 0,{granularity:"grapheme"}).segment(a.emoji)[Symbol.iterator]().next().value?.segment;if(!p?.trim()){U.warn(`Reaction had no emoji from ${s} after splitting`);return}const g={...Py,emoji:p,...Xd.find(m=>m.name===a.name)},v=this.reactionsSubject$.value;if(v[u]){U.warn(`Got reaction from ${u} but one is still playing`);return}this.reactionsSubject$.next({...v,[u]:{reactionOption:g,expireAfter:new Date(Date.now()+BC)}})}else if(r.getType()===He.Reaction){const a=r.getContent(),c=a["m.relates_to"].event_id,l=this.rtcSession.memberships.find(u=>u.eventId===c&&u.userId===o);if(!l){U.warn(`Reaction target was not a membership event for ${o}, ignoring`);return}a?.["m.relates_to"].key==="ðŸ–ï¸"&&this.addRaisedHand(`${l.userId}:${l.deviceId}`,{reactionEventId:s,membershipEventId:c,time:new Date(r.localTimestamp)})}else if(r.getType()===He.RoomRedaction){const a=r.event.redacts,c=Object.entries(this.raisedHandsSubject$.value).find(([l,u])=>u.reactionEventId===a)?.[0];if(!c)return;this.removeRaisedHand(c)}}},this.reactionsSubject$.pipe(Uhe(BC),this.scope.bind()).subscribe(r=>{const i=new Date,o=Object.fromEntries(Object.entries(r).filter(([s,a])=>a.expireAfter>i));Object.keys(r).length!==Object.keys(o).length&&this.reactionsSubject$.next(o)}),this.rtcSession.room.on(Cr.Timeline,this.handleReactionEvent),this.scope.onEnd(()=>this.rtcSession.room.off(Cr.Timeline,this.handleReactionEvent)),this.rtcSession.room.on(Cr.Redaction,this.handleReactionEvent),this.scope.onEnd(()=>this.rtcSession.room.off(Cr.Redaction,this.handleReactionEvent)),this.rtcSession.room.client.on(u6.Decrypted,this.handleReactionEvent),this.scope.onEnd(()=>this.rtcSession.room.client.off(u6.Decrypted,this.handleReactionEvent)),this.rtcSession.room.on(Cr.LocalEchoUpdated,this.handleReactionEvent),this.scope.onEnd(()=>this.rtcSession.room.off(Cr.LocalEchoUpdated,this.handleReactionEvent)),this.rtcSession.on(Us.MembershipsChanged,this.onMembershipsChanged),this.scope.onEnd(()=>this.rtcSession.off(Us.MembershipsChanged,this.onMembershipsChanged)),this.onMembershipsChanged([])}getLastReactionEvent(t,n){return(this.rtcSession.room.relations.getChildEventsForEvent(t,Cv.Annotation,He.Reaction)?.getRelations()??[]).find(o=>o.event.sender===n&&o.getType()===He.Reaction&&o.getContent()?.["m.relates_to"]?.key==="ðŸ–ï¸")}addRaisedHand(t,n){this.raisedHandsSubject$.next({...this.raisedHandsSubject$.value,[t]:n})}removeRaisedHand(t){this.raisedHandsSubject$.next(Object.fromEntries(Object.entries(this.raisedHandsSubject$.value).filter(([n])=>n!==t)))}}const obe=U.getChild("[MatrixAudioRenderer]");function sbe({url:e,livekitRoom:t,validIdentities:n,muted:r}){const i=V0e([Ve.Source.Microphone,Ve.Source.ScreenShareAudio,Ve.Source.Unknown],{updateOnlyOn:[],onlySubscribed:!0,room:t}).filter(d=>d.publication.kind===Ve.Kind.Audio).filter(d=>n.includes(d.participant.identity)?!0:(obe.warn(`Audio track ${d.participant.identity} from ${e} has no matching matrix call member`,`current members: ${n.join()}`,"track will not get rendered"),!1)),{pan:o,volume:s}=hN(),a=o!==0,[c,l]=f.useState(void 0);f.useEffect(()=>{const d=new AudioContext;return l(d),()=>{d.close()}},[]);const u=f.useMemo(()=>({gain:c?.createGain(),pan:c?.createStereoPanner()}),[c]);return f.useEffect(()=>{u.pan&&(u.pan.pan.value=o)},[u.pan,o]),f.useEffect(()=>{u.gain&&(u.gain.gain.value=s)},[u.gain,s]),h.jsx("div",{style:{display:"none"},children:i.map(d=>h.jsx(abe,{trackRef:d,muted:r,audioContext:a?c:void 0,audioNodes:u},Ope(d)))})}function abe({trackRef:e,muted:t,audioContext:n,audioNodes:r,...i}){const[o,s]=Qj(()=>!1,[n&&r]);return f.useEffect(()=>{if(!e||o)return;const a=e.publication.track,c=n&&r.gain&&r.pan;a.setAudioContext(c?n:void 0),a.setWebAudioPlugins(c?[r.gain,r.pan]:[]),s(!0),rN()},[n,r,s,o,e]),o&&h.jsx(eF,{trackRef:e,muted:t,...i})}const iD=iN.behavior(ge([c3.pipe(lt(!0)),VM.value$],(e,t)=>!e||t)),cbe="_overlay_kh5c3_1",lbe="_icon_kh5c3_32",ube="_spacer_kh5c3_47",Y2={overlay:cbe,icon:lbe,spacer:ube},dbe=({show:e,onBackToVideoPressed:t})=>{const{t:n}=he();return h.jsxs("div",{className:Y2.overlay,"data-show":e,"aria-hidden":!e,children:[h.jsx(qT,{className:Y2.icon,children:h.jsx(Kie,{"aria-hidden":!0})}),h.jsx(Fi,{as:"h2",weight:"semibold",size:"md",children:n("handset.overlay_title")}),h.jsx(Ye,{children:n("handset.overlay_description")}),h.jsx(De,{kind:"primary",size:"sm",onClick:()=>{t?.()},children:n("handset.overlay_back_button")}),h.jsx("div",{className:Y2.spacer})]})},fbe="_bar_32sbm_1",hbe={bar:fbe},Qm=f.createContext(null),pbe=({children:e})=>{const{t}=he(),n=f.useCallback(u=>{u.preventDefault(),window.controls.onBackButtonPressed?.()},[]),[r,i]=f.useState(""),[o,s]=f.useState(!1),[a,c]=f.useState(null),l=f.useMemo(()=>({setTitle:i,setSecondaryButton:c,setHidden:s}),[i,s,c]);return h.jsxs(h.Fragment,{children:[h.jsx("div",{style:{display:o?"none":"block"},className:hbe.bar,children:h.jsxs(as,{disconnectedBanner:!1,children:[h.jsx(ra,{children:h.jsx(sn,{label:t("common.back"),children:h.jsx(kg,{onClick:n,children:h.jsx(aA,{})})})}),r&&h.jsx(Fi,{type:"body",size:"lg",weight:Pi==="android"?"medium":"semibold",children:r}),h.jsx(ia,{children:a})]})}),h.jsx(Qm,{value:l,children:e})]})};function gbe(e){const t=f.use(Qm)?.setTitle;f.useEffect(()=>{if(t!==void 0)return t(e),()=>t("")},[e,t])}function mbe(e){const t=f.use(Qm)?.setHidden;f.useEffect(()=>{if(t!==void 0)return t(e),()=>t(!1)},[t,e])}function vbe(e){const t=f.use(Qm)?.setSecondaryButton;f.useEffect(()=>{if(t!==void 0)return t(e),()=>t("")},[e,t])}const ybe="_toast_z5w27_8",_be={toast:ybe},oD=({open:e,onDismiss:t,autoDismiss:n,children:r,Icon:i,modal:o=!0})=>{const s=f.useCallback(c=>{c||t()},[t]);f.useEffect(()=>{if(e&&n!==void 0){const c=setTimeout(t,n);return()=>clearTimeout(c)}},[e,n,t]);const a=h.jsxs(h.Fragment,{children:[h.jsx(s_,{className:Z(nr.bg,nr.animate)}),h.jsx(a_,{"aria-describedby":void 0,asChild:!0,children:h.jsxs(rk,{className:Z(nr.overlay,nr.animate,_be.toast),children:[h.jsx(c_,{asChild:!0,children:h.jsx(Ye,{as:"h3",size:"sm",weight:"semibold",children:r})}),i&&h.jsx(i,{width:20,height:20,"aria-hidden":!0})]})})]});return h.jsx(i_,{open:e,onOpenChange:s,modal:o,children:o?h.jsx(o_,{children:a}):a})},bbe="_overlay_128zq_1",wbe="_content_128zq_10",Sbe="_pulse_128zq_17",Cbe="_text_128zq_33",ip={overlay:bbe,content:wbe,pulse:Sbe,text:Cbe},Ebe=""+new URL("ringtone-B2csBdU4.mp3",import.meta.url).href,xbe=""+new URL("ringtone-B-nJXbbw.ogg",import.meta.url).href,Td=U.getChild("[InCallView]"),Ibe=400,Rbe=e=>{const[t,n]=f.useState(null),r=gi(),i=dc(),o=Cme();return f.useEffect(()=>{Td.info("START CALL VIEW SCOPE");const s=new Wf,a=new ibe(s,e.rtcSession),{autoLeaveWhenOthersLeft:c,waitForCallPickup:l,sendNotificationType:u}=r,d=K3e(s,e.rtcSession,e.matrixRoom,i,e.muteStates,{encryptionSystem:e.e2eeSystem,autoLeaveWhenOthersLeft:c,waitForCallPickup:l&&u==="ring",matrixRTCMode$:GM.value$},a.raisedHands$,a.reactions$,s.behavior(o));return d.join(),n(d),d.leave$.pipe(s.bind()).subscribe(e.onLeft),()=>{Td.info("END CALL VIEW SCOPE"),s.end()}},[e.rtcSession,e.matrixRoom,e.muteStates,e.e2eeSystem,e.onLeft,r,i,o]),t===null?null:h.jsx(sue,{vm:t,rtcSession:e.rtcSession,children:h.jsx(Lbe,{...e,vm:t})})},Lbe=({client:e,vm:t,matrixInfo:n,matrixRoom:r,muteStates:i,header:o,onShareClick:s})=>{const{t:a}=he(),{supportsReactions:c,sendReaction:l,toggleRaisedHand:u}=eb();qye();const d=f.useRef(null),[p,g]=xd(),v=wu(d,p),{showControls:m}=gi(),_=J(iD),y=J(t.callPickupState$),w=Fs(async()=>i6({waiting:{mp3:Ebe,ogg:xbe}})),S=Zm({sounds:w,latencyHint:"interactive",muted:_}),b=J(i.audio.enabled$),C=J(i.video.enabled$),E=J(i.audio.toggle$),x=J(i.video.toggle$),I=J(i.audio.setEnabled$);W2e(d,E,x,I,se=>{l(se)},()=>{u()});const L=J(t.livekitRoomItems$),R=J(t.participantCount$),k=J(t.reconnecting$),A=J(t.windowMode$),P=J(t.layout$),O=J(t.tileStoreGeneration$),[j]=qt(vb),$=J(t.gridMode$),T=J(t.showHeader$),N=J(t.showFooter$),M=J(t.earpieceMode$),B=J(t.audioOutputSwitcher$),F=J(t.sharingScreen$),K=J(t.localConnection$),te=J(t.ringOverlay$),oe=J(t.fatalError$);if(oe)throw Td.debug("fatalCallError stop rendering",oe),oe;const pe=S?.soundDuration.waiting??1;f.useEffect(()=>(window.document.body.style.setProperty("--call-ring-duration-s",`${pe*2}s`),window.document.body.style.setProperty("--call-ring-delay-s",`${pe}s`),()=>{window.document.body.style.removeProperty("--call-ring-duration-s"),window.document.body.style.removeProperty("--call-ring-delay-s")}),[S?.soundDuration,pe]),f.useEffect(()=>{if(y!=="ringing"||!S)return;const se=S.playSoundLooping("waiting",pe);return()=>{se().catch(Ge=>{Td.error("Failed to stop ringing sound",Ge)})}},[y,S,pe]);const ne=f.useMemo(()=>te?h.jsx("div",{className:Z(nr.bg,ip.overlay),children:h.jsxs("div",{className:Z(nr.content,ip.content),children:[h.jsx("div",{className:ip.pulse,children:h.jsx(sc,{id:te.idForAvatar,name:te.name,src:te.avatarMxc,size:oc.XL})}),h.jsx(Ye,{size:"md",className:ip.text,children:te.text})]})}):null,[te]),z=f.useRef(null),re=f.useCallback(()=>z.current=Date.now(),[]),Re=f.useCallback(()=>{const se=z.current;se!==null&&Date.now()-se<=Ibe&&t.tapScreen(),z.current=null},[t]),Le=f.useCallback(()=>z.current=null,[]),Se=f.useCallback(se=>{N?(se.stopPropagation(),t.tapControls()):se.preventDefault()},[t,N]),xt=f.useCallback(se=>{se.pointerType==="mouse"&&t.hoverScreen()},[t]),ct=f.useCallback(()=>t.unhoverScreen(),[t]),[we,Rn]=f.useState(!1),[go,cn]=f.useState(Nw),gc=f.useCallback(()=>Rn(!0),[Rn]),mc=f.useCallback(()=>Rn(!1),[Rn]),yi=f.useMemo(()=>Ae===null?()=>{cn("profile"),Rn(!0)}:null,[cn,Rn]),[mo,vo]=xd(),[qi,vc]=xd(),_i=f.useMemo(()=>({width:g.width,height:g.height-vo.height-(A==="flat"?0:vc.height)}),[g.width,g.height,vo.height,vc.height,A]),ua=dN(se=>se.pipe(V(([Ge])=>Ge)),[_i]),yc=Fs(()=>new Pt(g_e)),yo=Fs(()=>new Pt(m_e)),_c=f.useCallback(se=>t.setGridMode(se),[t]),bc=f.useRef(null);f.useEffect(()=>{const se=new BroadcastChannel("popout-token-request");return bc.current=se,se.onmessage=Ge=>{Ge.data.type==="popout_token_request"&&(K?K.createPopoutToken().then(st=>se.postMessage({type:"popout_token",sfuConfig:st})):Td.error("No local connection, but popout token requested!"))},()=>{se.close()}},[K]),vbe(f.useMemo(()=>{if(B===null)return null;const se=B.targetOutput==="earpiece",Ge=se?Gie:Yie,st=a(se?"settings.devices.handset":"settings.devices.loudspeaker");return h.jsx(sn,{label:st,children:h.jsx(kg,{onClick:$n=>{$n.preventDefault(),B.switch()},children:h.jsx(Ge,{})})})},[a,B])),mbe(!T);let fs=null;if(T)switch(o){case"none":fs=h.jsx("div",{className:Z(Ft.header,Ft.filler),ref:mo});break;case"standard":fs=h.jsxs(as,{className:Ft.header,ref:mo,disconnectedBanner:!1,children:[h.jsx(ra,{children:h.jsx(zA,{id:n.roomId,name:n.roomName,avatarUrl:n.roomAvatar,encrypted:n.e2eeSystem.kind!==mt.NONE,participantCount:R})}),h.jsx(ia,{children:m&&s!==null&&h.jsx(UO,{className:Ft.invite,onClick:s})})]})}const Or=f.useCallback(()=>{},[]),wc=h.jsxs(h.Fragment,{children:[h.jsx("div",{className:Z(nr.bg,nr.animate),"data-state":k?"open":"closed"}),h.jsx(oD,{onDismiss:Or,open:k,modal:!1,children:a("common.reconnecting")})]}),Cu=h.jsx(dbe,{show:M&&!k,onBackToVideoPressed:B?.switch}),bi=k||M,Sc=f.useMemo(()=>function({ref:Ge,className:st,style:$n,targetWidth:Ln,targetHeight:jr,model:Yn}){const Xn=J(t.spotlightExpanded$),hs=J(t.toggleSpotlightExpanded$),D=J(t.showSpeakingIndicators$),G=J(t.showSpotlightIndicators$);return Yn instanceof kj?h.jsx(Lj,{ref:Ge,vm:Yn,onOpenProfile:yi,targetWidth:Ln,targetHeight:jr,className:Z(st,Ft.tile),style:$n,showSpeakingIndicators:D,focusable:!bi}):h.jsx(q3,{ref:Ge,vm:Yn,expanded:Xn,onToggleExpanded:hs,targetWidth:Ln,targetHeight:jr,showIndicators:G,focusable:!bi,className:Z(st,Ft.tile),style:$n})},[t,yi,bi]),Cc=f.useMemo(()=>{const se={minBounds$:ua,spotlightAlignment$:yc,pipAlignment$:yo};return{grid:v_e(se),"spotlight-landscape":A_e(se),"spotlight-portrait":j_e(se),"spotlight-expanded":I_e(se),"one-on-one":S_e(se)}},[ua,yc,yo]),Ec=()=>{if(P.type==="pip")return h.jsx(q3,{className:Z(Ft.tile,Ft.maximised),vm:P.spotlight,expanded:!0,onToggleExpanded:null,targetWidth:_i.height,targetHeight:_i.width,showIndicators:!1,focusable:!bi,"aria-hidden":bi});const se=Cc[P.type],Ge=h.jsx(DC,{className:Ft.fixedGrid,style:{insetBlockStart:vo.height>0?vo.bottom:g.top,height:_i.height},model:P,Layout:se.fixed,Tile:Sc,"aria-hidden":bi},"fixed"),st=h.jsx(DC,{className:Ft.scrollingGrid,model:P,Layout:se.scrolling,Tile:Sc,"aria-hidden":bi},"scrolling");return P.type==="spotlight-expanded"?h.jsxs(h.Fragment,{children:[Ge,st]}):h.jsxs(h.Fragment,{children:[st,Ge]})},ye=Lle(r.roomId),Oe=[];Oe.push(h.jsx(mP,{muted:!b,onClick:E??void 0,onTouchEnd:Se,disabled:E===null,"data-testid":"incall_mute"},"audio"),h.jsx(vP,{muted:!C,onClick:x??void 0,onTouchEnd:Se,disabled:x===null,"data-testid":"incall_videomute"},"video")),t.toggleScreenSharing!==null&&Oe.push(h.jsx(Nle,{className:Ft.shareScreen,enabled:F,onClick:t.toggleScreenSharing,onTouchEnd:Se,"data-testid":"incall_screenshare"},"share_screen")),c&&Oe.push(h.jsx(Bue,{vm:t,className:Ft.raiseHand,identifier:`${e.getUserId()}:${e.getDeviceId()}`,onTouchEnd:Se},"raise_hand")),P.type!=="pip"&&Oe.push(h.jsx(_P,{onClick:gc,onTouchEnd:Se},"settings")),Oe.push(h.jsx(yP,{onClick:function(){t.hangup()},onTouchEnd:Se,"data-testid":"incall_leave"},"end_call"));const nt=h.jsxs("div",{ref:qi,className:Z(Ft.footer,{[Ft.overlay]:A==="flat",[Ft.hidden]:!N||!m&&o==="none"}),children:[o!=="none"&&h.jsxs("div",{className:Ft.logo,children:[h.jsx(q2e,{width:24,height:24,"aria-hidden":!0}),h.jsx(K2e,{width:80,height:11,"aria-label":"Element Call"}),j?`Tiles generation: ${O}`:void 0]}),m&&h.jsx("div",{className:Ft.buttons,children:Oe}),m&&h.jsx(Wye,{className:Ft.layout,layout:$,setLayout:_c,onTouchEnd:Se})]}),Fe=J(t.allConnections$);return h.jsxs("div",{className:Ft.inRoom,ref:v,onTouchStart:re,onTouchEnd:Re,onTouchCancel:Le,onPointerMove:xt,onPointerOut:ct,children:[fs,L.map(({livekitRoom:se,url:Ge,participants:st})=>h.jsx(sbe,{url:Ge,livekitRoom:se,validIdentities:st,muted:_},Ge)),Ec(),h.jsx(rbe,{vm:t,muted:_}),h.jsx(U_e,{vm:t,muted:_}),wc,Cu,h.jsx(q_e,{vm:t}),ne,nt,P.type!=="pip"&&h.jsxs(h.Fragment,{children:[h.jsx(Vye,{...ye}),h.jsx($w,{client:e,roomId:r.roomId,open:we,onDismiss:mc,tab:go,onTabChange:cn,livekitRooms:Fe.getConnections().map(se=>({room:se.livekitRoom,livekitAlias:se.livekitAlias,isLocal:void 0,url:se.transport.livekit_service_url}))})]})]})};function sD(e,t){const n=Yd(e,Cr.CurrentStateUpdated,f.useCallback(()=>e.currentState,[e]));return Yd(n,ME.Update,f.useCallback(()=>t(n),[t,n]))}function kbe(e){return sD(e,f.useCallback(()=>e.getMxcAvatarUrl(),[e]))}function Tbe(e){return Yd(e,Cr.Name,f.useCallback(()=>e.name,[e]))}function Abe(e){return sD(e,f.useCallback(t=>t.getJoinRule(),[]))}var X2,VC;function Pbe(){return VC||(VC=1,X2=function(){var e=document.getSelection();if(!e.rangeCount)return function(){};for(var t=document.activeElement,n=[],r=0;r<e.rangeCount;r++)n.push(e.getRangeAt(r));switch(t.tagName.toUpperCase()){case"INPUT":case"TEXTAREA":t.blur();break;default:t=null;break}return e.removeAllRanges(),function(){e.type==="Caret"&&e.removeAllRanges(),e.rangeCount||n.forEach(function(i){e.addRange(i)}),t&&t.focus()}}),X2}var Z2,qC;function Mbe(){if(qC)return Z2;qC=1;var e=Pbe(),t={"text/plain":"Text","text/html":"Url",default:"Text"},n="Copy to clipboard: #{key}, Enter";function r(o){var s=(/mac os x/i.test(navigator.userAgent)?"âŒ˜":"Ctrl")+"+C";return o.replace(/#{\s*key\s*}/g,s)}function i(o,s){var a,c,l,u,d,p,g=!1;s||(s={}),a=s.debug||!1;try{l=e(),u=document.createRange(),d=document.getSelection(),p=document.createElement("span"),p.textContent=o,p.ariaHidden="true",p.style.all="unset",p.style.position="fixed",p.style.top=0,p.style.clip="rect(0, 0, 0, 0)",p.style.whiteSpace="pre",p.style.webkitUserSelect="text",p.style.MozUserSelect="text",p.style.msUserSelect="text",p.style.userSelect="text",p.addEventListener("copy",function(m){if(m.stopPropagation(),s.format)if(m.preventDefault(),typeof m.clipboardData>"u"){a&&console.warn("unable to use e.clipboardData"),a&&console.warn("trying IE specific stuff"),window.clipboardData.clearData();var _=t[s.format]||t.default;window.clipboardData.setData(_,o)}else m.clipboardData.clearData(),m.clipboardData.setData(s.format,o);s.onCopy&&(m.preventDefault(),s.onCopy(m.clipboardData))}),document.body.appendChild(p),u.selectNodeContents(p),d.addRange(u);var v=document.execCommand("copy");if(!v)throw new Error("copy command was unsuccessful");g=!0}catch(m){a&&console.error("unable to copy using execCommand: ",m),a&&console.warn("trying IE specific stuff");try{window.clipboardData.setData(s.format||"text",o),s.onCopy&&s.onCopy(window.clipboardData),g=!0}catch(_){a&&console.error("unable to copy using clipboardData: ",_),a&&console.error("falling back to prompt"),c=r("message"in s?s.message:n),window.prompt(c,o)}}finally{d&&(typeof d.removeRange=="function"?d.removeRange(u):d.removeAllRanges()),p&&document.body.removeChild(p),l()}return g}return Z2=i,Z2}var Nbe=Mbe();const $be=Gl(Nbe),Obe="_url_1ibuh_8",jbe="_button_1ibuh_15",Dbe="_qrCode_1ibuh_19",Q2={url:Obe,button:jbe,qrCode:Dbe};var Dc={},J2,GC;function Fbe(){return GC||(GC=1,J2=function(){return typeof Promise=="function"&&Promise.prototype&&Promise.prototype.then}),J2}var ev={},ys={},KC;function hc(){if(KC)return ys;KC=1;let e;const t=[0,26,44,70,100,134,172,196,242,292,346,404,466,532,581,655,733,815,901,991,1085,1156,1258,1364,1474,1588,1706,1828,1921,2051,2185,2323,2465,2611,2761,2876,3034,3196,3362,3532,3706];return ys.getSymbolSize=function(r){if(!r)throw new Error('"version" cannot be null or undefined');if(r<1||r>40)throw new Error('"version" should be in range from 1 to 40');return r*4+17},ys.getSymbolTotalCodewords=function(r){return t[r]},ys.getBCHDigit=function(n){let r=0;for(;n!==0;)r++,n>>>=1;return r},ys.setToSJISFunction=function(r){if(typeof r!="function")throw new Error('"toSJISFunc" is not a valid function.');e=r},ys.isKanjiModeEnabled=function(){return typeof e<"u"},ys.toSJIS=function(r){return e(r)},ys}var tv={},WC;function o6(){return WC||(WC=1,(function(e){e.L={bit:1},e.M={bit:0},e.Q={bit:3},e.H={bit:2};function t(n){if(typeof n!="string")throw new Error("Param is not a string");switch(n.toLowerCase()){case"l":case"low":return e.L;case"m":case"medium":return e.M;case"q":case"quartile":return e.Q;case"h":case"high":return e.H;default:throw new Error("Unknown EC Level: "+n)}}e.isValid=function(r){return r&&typeof r.bit<"u"&&r.bit>=0&&r.bit<4},e.from=function(r,i){if(e.isValid(r))return r;try{return t(r)}catch{return i}}})(tv)),tv}var nv,zC;function Hbe(){if(zC)return nv;zC=1;function e(){this.buffer=[],this.length=0}return e.prototype={get:function(t){const n=Math.floor(t/8);return(this.buffer[n]>>>7-t%8&1)===1},put:function(t,n){for(let r=0;r<n;r++)this.putBit((t>>>n-r-1&1)===1)},getLengthInBits:function(){return this.length},putBit:function(t){const n=Math.floor(this.length/8);this.buffer.length<=n&&this.buffer.push(0),t&&(this.buffer[n]|=128>>>this.length%8),this.length++}},nv=e,nv}var rv,YC;function Ube(){if(YC)return rv;YC=1;function e(t){if(!t||t<1)throw new Error("BitMatrix size must be defined and greater than 0");this.size=t,this.data=new Uint8Array(t*t),this.reservedBit=new Uint8Array(t*t)}return e.prototype.set=function(t,n,r,i){const o=t*this.size+n;this.data[o]=r,i&&(this.reservedBit[o]=!0)},e.prototype.get=function(t,n){return this.data[t*this.size+n]},e.prototype.xor=function(t,n,r){this.data[t*this.size+n]^=r},e.prototype.isReserved=function(t,n){return this.reservedBit[t*this.size+n]},rv=e,rv}var iv={},XC;function Bbe(){return XC||(XC=1,(function(e){const t=hc().getSymbolSize;e.getRowColCoords=function(r){if(r===1)return[];const i=Math.floor(r/7)+2,o=t(r),s=o===145?26:Math.ceil((o-13)/(2*i-2))*2,a=[o-7];for(let c=1;c<i-1;c++)a[c]=a[c-1]-s;return a.push(6),a.reverse()},e.getPositions=function(r){const i=[],o=e.getRowColCoords(r),s=o.length;for(let a=0;a<s;a++)for(let c=0;c<s;c++)a===0&&c===0||a===0&&c===s-1||a===s-1&&c===0||i.push([o[a],o[c]]);return i}})(iv)),iv}var ov={},ZC;function Vbe(){if(ZC)return ov;ZC=1;const e=hc().getSymbolSize,t=7;return ov.getPositions=function(r){const i=e(r);return[[0,0],[i-t,0],[0,i-t]]},ov}var sv={},QC;function qbe(){return QC||(QC=1,(function(e){e.Patterns={PATTERN000:0,PATTERN001:1,PATTERN010:2,PATTERN011:3,PATTERN100:4,PATTERN101:5,PATTERN110:6,PATTERN111:7};const t={N1:3,N2:3,N3:40,N4:10};e.isValid=function(i){return i!=null&&i!==""&&!isNaN(i)&&i>=0&&i<=7},e.from=function(i){return e.isValid(i)?parseInt(i,10):void 0},e.getPenaltyN1=function(i){const o=i.size;let s=0,a=0,c=0,l=null,u=null;for(let d=0;d<o;d++){a=c=0,l=u=null;for(let p=0;p<o;p++){let g=i.get(d,p);g===l?a++:(a>=5&&(s+=t.N1+(a-5)),l=g,a=1),g=i.get(p,d),g===u?c++:(c>=5&&(s+=t.N1+(c-5)),u=g,c=1)}a>=5&&(s+=t.N1+(a-5)),c>=5&&(s+=t.N1+(c-5))}return s},e.getPenaltyN2=function(i){const o=i.size;let s=0;for(let a=0;a<o-1;a++)for(let c=0;c<o-1;c++){const l=i.get(a,c)+i.get(a,c+1)+i.get(a+1,c)+i.get(a+1,c+1);(l===4||l===0)&&s++}return s*t.N2},e.getPenaltyN3=function(i){const o=i.size;let s=0,a=0,c=0;for(let l=0;l<o;l++){a=c=0;for(let u=0;u<o;u++)a=a<<1&2047|i.get(l,u),u>=10&&(a===1488||a===93)&&s++,c=c<<1&2047|i.get(u,l),u>=10&&(c===1488||c===93)&&s++}return s*t.N3},e.getPenaltyN4=function(i){let o=0;const s=i.data.length;for(let c=0;c<s;c++)o+=i.data[c];return Math.abs(Math.ceil(o*100/s/5)-10)*t.N4};function n(r,i,o){switch(r){case e.Patterns.PATTERN000:return(i+o)%2===0;case e.Patterns.PATTERN001:return i%2===0;case e.Patterns.PATTERN010:return o%3===0;case e.Patterns.PATTERN011:return(i+o)%3===0;case e.Patterns.PATTERN100:return(Math.floor(i/2)+Math.floor(o/3))%2===0;case e.Patterns.PATTERN101:return i*o%2+i*o%3===0;case e.Patterns.PATTERN110:return(i*o%2+i*o%3)%2===0;case e.Patterns.PATTERN111:return(i*o%3+(i+o)%2)%2===0;default:throw new Error("bad maskPattern:"+r)}}e.applyMask=function(i,o){const s=o.size;for(let a=0;a<s;a++)for(let c=0;c<s;c++)o.isReserved(c,a)||o.xor(c,a,n(i,c,a))},e.getBestMask=function(i,o){const s=Object.keys(e.Patterns).length;let a=0,c=1/0;for(let l=0;l<s;l++){o(l),e.applyMask(l,i);const u=e.getPenaltyN1(i)+e.getPenaltyN2(i)+e.getPenaltyN3(i)+e.getPenaltyN4(i);e.applyMask(l,i),u<c&&(c=u,a=l)}return a}})(sv)),sv}var op={},JC;function aD(){if(JC)return op;JC=1;const e=o6(),t=[1,1,1,1,1,1,1,1,1,1,2,2,1,2,2,4,1,2,4,4,2,4,4,4,2,4,6,5,2,4,6,6,2,5,8,8,4,5,8,8,4,5,8,11,4,8,10,11,4,9,12,16,4,9,16,16,6,10,12,18,6,10,17,16,6,11,16,19,6,13,18,21,7,14,21,25,8,16,20,25,8,17,23,25,9,17,23,34,9,18,25,30,10,20,27,32,12,21,29,35,12,23,34,37,12,25,34,40,13,26,35,42,14,28,38,45,15,29,40,48,16,31,43,51,17,33,45,54,18,35,48,57,19,37,51,60,19,38,53,63,20,40,56,66,21,43,59,70,22,45,62,74,24,47,65,77,25,49,68,81],n=[7,10,13,17,10,16,22,28,15,26,36,44,20,36,52,64,26,48,72,88,36,64,96,112,40,72,108,130,48,88,132,156,60,110,160,192,72,130,192,224,80,150,224,264,96,176,260,308,104,198,288,352,120,216,320,384,132,240,360,432,144,280,408,480,168,308,448,532,180,338,504,588,196,364,546,650,224,416,600,700,224,442,644,750,252,476,690,816,270,504,750,900,300,560,810,960,312,588,870,1050,336,644,952,1110,360,700,1020,1200,390,728,1050,1260,420,784,1140,1350,450,812,1200,1440,480,868,1290,1530,510,924,1350,1620,540,980,1440,1710,570,1036,1530,1800,570,1064,1590,1890,600,1120,1680,1980,630,1204,1770,2100,660,1260,1860,2220,720,1316,1950,2310,750,1372,2040,2430];return op.getBlocksCount=function(i,o){switch(o){case e.L:return t[(i-1)*4+0];case e.M:return t[(i-1)*4+1];case e.Q:return t[(i-1)*4+2];case e.H:return t[(i-1)*4+3];default:return}},op.getTotalCodewordsCount=function(i,o){switch(o){case e.L:return n[(i-1)*4+0];case e.M:return n[(i-1)*4+1];case e.Q:return n[(i-1)*4+2];case e.H:return n[(i-1)*4+3];default:return}},op}var av={},zu={},eE;function Gbe(){if(eE)return zu;eE=1;const e=new Uint8Array(512),t=new Uint8Array(256);return(function(){let r=1;for(let i=0;i<255;i++)e[i]=r,t[r]=i,r<<=1,r&256&&(r^=285);for(let i=255;i<512;i++)e[i]=e[i-255]})(),zu.log=function(r){if(r<1)throw new Error("log("+r+")");return t[r]},zu.exp=function(r){return e[r]},zu.mul=function(r,i){return r===0||i===0?0:e[t[r]+t[i]]},zu}var tE;function Kbe(){return tE||(tE=1,(function(e){const t=Gbe();e.mul=function(r,i){const o=new Uint8Array(r.length+i.length-1);for(let s=0;s<r.length;s++)for(let a=0;a<i.length;a++)o[s+a]^=t.mul(r[s],i[a]);return o},e.mod=function(r,i){let o=new Uint8Array(r);for(;o.length-i.length>=0;){const s=o[0];for(let c=0;c<i.length;c++)o[c]^=t.mul(i[c],s);let a=0;for(;a<o.length&&o[a]===0;)a++;o=o.slice(a)}return o},e.generateECPolynomial=function(r){let i=new Uint8Array([1]);for(let o=0;o<r;o++)i=e.mul(i,new Uint8Array([1,t.exp(o)]));return i}})(av)),av}var cv,nE;function Wbe(){if(nE)return cv;nE=1;const e=Kbe();function t(n){this.genPoly=void 0,this.degree=n,this.degree&&this.initialize(this.degree)}return t.prototype.initialize=function(r){this.degree=r,this.genPoly=e.generateECPolynomial(this.degree)},t.prototype.encode=function(r){if(!this.genPoly)throw new Error("Encoder not initialized");const i=new Uint8Array(r.length+this.degree);i.set(r);const o=e.mod(i,this.genPoly),s=this.degree-o.length;if(s>0){const a=new Uint8Array(this.degree);return a.set(o,s),a}return o},cv=t,cv}var lv={},uv={},dv={},rE;function cD(){return rE||(rE=1,dv.isValid=function(t){return!isNaN(t)&&t>=1&&t<=40}),dv}var Yi={},iE;function lD(){if(iE)return Yi;iE=1;const e="[0-9]+",t="[A-Z $%*+\\-./:]+";let n="(?:[u3000-u303F]|[u3040-u309F]|[u30A0-u30FF]|[uFF00-uFFEF]|[u4E00-u9FAF]|[u2605-u2606]|[u2190-u2195]|u203B|[u2010u2015u2018u2019u2025u2026u201Cu201Du2225u2260]|[u0391-u0451]|[u00A7u00A8u00B1u00B4u00D7u00F7])+";n=n.replace(/u/g,"\\u");const r="(?:(?![A-Z0-9 $%*+\\-./:]|"+n+`)(?:.|[\r
]))+`;Yi.KANJI=new RegExp(n,"g"),Yi.BYTE_KANJI=new RegExp("[^A-Z0-9 $%*+\\-./:]+","g"),Yi.BYTE=new RegExp(r,"g"),Yi.NUMERIC=new RegExp(e,"g"),Yi.ALPHANUMERIC=new RegExp(t,"g");const i=new RegExp("^"+n+"$"),o=new RegExp("^"+e+"$"),s=new RegExp("^[A-Z0-9 $%*+\\-./:]+$");return Yi.testKanji=function(c){return i.test(c)},Yi.testNumeric=function(c){return o.test(c)},Yi.testAlphanumeric=function(c){return s.test(c)},Yi}var oE;function pc(){return oE||(oE=1,(function(e){const t=cD(),n=lD();e.NUMERIC={id:"Numeric",bit:1,ccBits:[10,12,14]},e.ALPHANUMERIC={id:"Alphanumeric",bit:2,ccBits:[9,11,13]},e.BYTE={id:"Byte",bit:4,ccBits:[8,16,16]},e.KANJI={id:"Kanji",bit:8,ccBits:[8,10,12]},e.MIXED={bit:-1},e.getCharCountIndicator=function(o,s){if(!o.ccBits)throw new Error("Invalid mode: "+o);if(!t.isValid(s))throw new Error("Invalid version: "+s);return s>=1&&s<10?o.ccBits[0]:s<27?o.ccBits[1]:o.ccBits[2]},e.getBestModeForData=function(o){return n.testNumeric(o)?e.NUMERIC:n.testAlphanumeric(o)?e.ALPHANUMERIC:n.testKanji(o)?e.KANJI:e.BYTE},e.toString=function(o){if(o&&o.id)return o.id;throw new Error("Invalid mode")},e.isValid=function(o){return o&&o.bit&&o.ccBits};function r(i){if(typeof i!="string")throw new Error("Param is not a string");switch(i.toLowerCase()){case"numeric":return e.NUMERIC;case"alphanumeric":return e.ALPHANUMERIC;case"kanji":return e.KANJI;case"byte":return e.BYTE;default:throw new Error("Unknown mode: "+i)}}e.from=function(o,s){if(e.isValid(o))return o;try{return r(o)}catch{return s}}})(uv)),uv}var sE;function zbe(){return sE||(sE=1,(function(e){const t=hc(),n=aD(),r=o6(),i=pc(),o=cD(),s=7973,a=t.getBCHDigit(s);function c(p,g,v){for(let m=1;m<=40;m++)if(g<=e.getCapacity(m,v,p))return m}function l(p,g){return i.getCharCountIndicator(p,g)+4}function u(p,g){let v=0;return p.forEach(function(m){const _=l(m.mode,g);v+=_+m.getBitsLength()}),v}function d(p,g){for(let v=1;v<=40;v++)if(u(p,v)<=e.getCapacity(v,g,i.MIXED))return v}e.from=function(g,v){return o.isValid(g)?parseInt(g,10):v},e.getCapacity=function(g,v,m){if(!o.isValid(g))throw new Error("Invalid QR Code version");typeof m>"u"&&(m=i.BYTE);const _=t.getSymbolTotalCodewords(g),y=n.getTotalCodewordsCount(g,v),w=(_-y)*8;if(m===i.MIXED)return w;const S=w-l(m,g);switch(m){case i.NUMERIC:return Math.floor(S/10*3);case i.ALPHANUMERIC:return Math.floor(S/11*2);case i.KANJI:return Math.floor(S/13);case i.BYTE:default:return Math.floor(S/8)}},e.getBestVersionForData=function(g,v){let m;const _=r.from(v,r.M);if(Array.isArray(g)){if(g.length>1)return d(g,_);if(g.length===0)return 1;m=g[0]}else m=g;return c(m.mode,m.getLength(),_)},e.getEncodedBits=function(g){if(!o.isValid(g)||g<7)throw new Error("Invalid QR Code version");let v=g<<12;for(;t.getBCHDigit(v)-a>=0;)v^=s<<t.getBCHDigit(v)-a;return g<<12|v}})(lv)),lv}var fv={},aE;function Ybe(){if(aE)return fv;aE=1;const e=hc(),t=1335,n=21522,r=e.getBCHDigit(t);return fv.getEncodedBits=function(o,s){const a=o.bit<<3|s;let c=a<<10;for(;e.getBCHDigit(c)-r>=0;)c^=t<<e.getBCHDigit(c)-r;return(a<<10|c)^n},fv}var hv={},pv,cE;function Xbe(){if(cE)return pv;cE=1;const e=pc();function t(n){this.mode=e.NUMERIC,this.data=n.toString()}return t.getBitsLength=function(r){return 10*Math.floor(r/3)+(r%3?r%3*3+1:0)},t.prototype.getLength=function(){return this.data.length},t.prototype.getBitsLength=function(){return t.getBitsLength(this.data.length)},t.prototype.write=function(r){let i,o,s;for(i=0;i+3<=this.data.length;i+=3)o=this.data.substr(i,3),s=parseInt(o,10),r.put(s,10);const a=this.data.length-i;a>0&&(o=this.data.substr(i),s=parseInt(o,10),r.put(s,a*3+1))},pv=t,pv}var gv,lE;function Zbe(){if(lE)return gv;lE=1;const e=pc(),t=["0","1","2","3","4","5","6","7","8","9","A","B","C","D","E","F","G","H","I","J","K","L","M","N","O","P","Q","R","S","T","U","V","W","X","Y","Z"," ","$","%","*","+","-",".","/",":"];function n(r){this.mode=e.ALPHANUMERIC,this.data=r}return n.getBitsLength=function(i){return 11*Math.floor(i/2)+6*(i%2)},n.prototype.getLength=function(){return this.data.length},n.prototype.getBitsLength=function(){return n.getBitsLength(this.data.length)},n.prototype.write=function(i){let o;for(o=0;o+2<=this.data.length;o+=2){let s=t.indexOf(this.data[o])*45;s+=t.indexOf(this.data[o+1]),i.put(s,11)}this.data.length%2&&i.put(t.indexOf(this.data[o]),6)},gv=n,gv}var mv,uE;function Qbe(){if(uE)return mv;uE=1;const e=pc();function t(n){this.mode=e.BYTE,typeof n=="string"?this.data=new TextEncoder().encode(n):this.data=new Uint8Array(n)}return t.getBitsLength=function(r){return r*8},t.prototype.getLength=function(){return this.data.length},t.prototype.getBitsLength=function(){return t.getBitsLength(this.data.length)},t.prototype.write=function(n){for(let r=0,i=this.data.length;r<i;r++)n.put(this.data[r],8)},mv=t,mv}var vv,dE;function Jbe(){if(dE)return vv;dE=1;const e=pc(),t=hc();function n(r){this.mode=e.KANJI,this.data=r}return n.getBitsLength=function(i){return i*13},n.prototype.getLength=function(){return this.data.length},n.prototype.getBitsLength=function(){return n.getBitsLength(this.data.length)},n.prototype.write=function(r){let i;for(i=0;i<this.data.length;i++){let o=t.toSJIS(this.data[i]);if(o>=33088&&o<=40956)o-=33088;else if(o>=57408&&o<=60351)o-=49472;else throw new Error("Invalid SJIS character: "+this.data[i]+`
Make sure your charset is UTF-8`);o=(o>>>8&255)*192+(o&255),r.put(o,13)}},vv=n,vv}var yv={exports:{}},fE;function ewe(){return fE||(fE=1,(function(e){var t={single_source_shortest_paths:function(n,r,i){var o={},s={};s[r]=0;var a=t.PriorityQueue.make();a.push(r,0);for(var c,l,u,d,p,g,v,m,_;!a.empty();){c=a.pop(),l=c.value,d=c.cost,p=n[l]||{};for(u in p)p.hasOwnProperty(u)&&(g=p[u],v=d+g,m=s[u],_=typeof s[u]>"u",(_||m>v)&&(s[u]=v,a.push(u,v),o[u]=l))}if(typeof i<"u"&&typeof s[i]>"u"){var y=["Could not find a path from ",r," to ",i,"."].join("");throw new Error(y)}return o},extract_shortest_path_from_predecessor_list:function(n,r){for(var i=[],o=r;o;)i.push(o),n[o],o=n[o];return i.reverse(),i},find_path:function(n,r,i){var o=t.single_source_shortest_paths(n,r,i);return t.extract_shortest_path_from_predecessor_list(o,i)},PriorityQueue:{make:function(n){var r=t.PriorityQueue,i={},o;n=n||{};for(o in r)r.hasOwnProperty(o)&&(i[o]=r[o]);return i.queue=[],i.sorter=n.sorter||r.default_sorter,i},default_sorter:function(n,r){return n.cost-r.cost},push:function(n,r){var i={value:n,cost:r};this.queue.push(i),this.queue.sort(this.sorter)},pop:function(){return this.queue.shift()},empty:function(){return this.queue.length===0}}};e.exports=t})(yv)),yv.exports}var hE;function twe(){return hE||(hE=1,(function(e){const t=pc(),n=Xbe(),r=Zbe(),i=Qbe(),o=Jbe(),s=lD(),a=hc(),c=ewe();function l(y){return unescape(encodeURIComponent(y)).length}function u(y,w,S){const b=[];let C;for(;(C=y.exec(S))!==null;)b.push({data:C[0],index:C.index,mode:w,length:C[0].length});return b}function d(y){const w=u(s.NUMERIC,t.NUMERIC,y),S=u(s.ALPHANUMERIC,t.ALPHANUMERIC,y);let b,C;return a.isKanjiModeEnabled()?(b=u(s.BYTE,t.BYTE,y),C=u(s.KANJI,t.KANJI,y)):(b=u(s.BYTE_KANJI,t.BYTE,y),C=[]),w.concat(S,b,C).sort(function(x,I){return x.index-I.index}).map(function(x){return{data:x.data,mode:x.mode,length:x.length}})}function p(y,w){switch(w){case t.NUMERIC:return n.getBitsLength(y);case t.ALPHANUMERIC:return r.getBitsLength(y);case t.KANJI:return o.getBitsLength(y);case t.BYTE:return i.getBitsLength(y)}}function g(y){return y.reduce(function(w,S){const b=w.length-1>=0?w[w.length-1]:null;return b&&b.mode===S.mode?(w[w.length-1].data+=S.data,w):(w.push(S),w)},[])}function v(y){const w=[];for(let S=0;S<y.length;S++){const b=y[S];switch(b.mode){case t.NUMERIC:w.push([b,{data:b.data,mode:t.ALPHANUMERIC,length:b.length},{data:b.data,mode:t.BYTE,length:b.length}]);break;case t.ALPHANUMERIC:w.push([b,{data:b.data,mode:t.BYTE,length:b.length}]);break;case t.KANJI:w.push([b,{data:b.data,mode:t.BYTE,length:l(b.data)}]);break;case t.BYTE:w.push([{data:b.data,mode:t.BYTE,length:l(b.data)}])}}return w}function m(y,w){const S={},b={start:{}};let C=["start"];for(let E=0;E<y.length;E++){const x=y[E],I=[];for(let L=0;L<x.length;L++){const R=x[L],k=""+E+L;I.push(k),S[k]={node:R,lastCount:0},b[k]={};for(let A=0;A<C.length;A++){const P=C[A];S[P]&&S[P].node.mode===R.mode?(b[P][k]=p(S[P].lastCount+R.length,R.mode)-p(S[P].lastCount,R.mode),S[P].lastCount+=R.length):(S[P]&&(S[P].lastCount=R.length),b[P][k]=p(R.length,R.mode)+4+t.getCharCountIndicator(R.mode,w))}}C=I}for(let E=0;E<C.length;E++)b[C[E]].end=0;return{map:b,table:S}}function _(y,w){let S;const b=t.getBestModeForData(y);if(S=t.from(w,b),S!==t.BYTE&&S.bit<b.bit)throw new Error('"'+y+'" cannot be encoded with mode '+t.toString(S)+`.
 Suggested mode is: `+t.toString(b));switch(S===t.KANJI&&!a.isKanjiModeEnabled()&&(S=t.BYTE),S){case t.NUMERIC:return new n(y);case t.ALPHANUMERIC:return new r(y);case t.KANJI:return new o(y);case t.BYTE:return new i(y)}}e.fromArray=function(w){return w.reduce(function(S,b){return typeof b=="string"?S.push(_(b,null)):b.data&&S.push(_(b.data,b.mode)),S},[])},e.fromString=function(w,S){const b=d(w,a.isKanjiModeEnabled()),C=v(b),E=m(C,S),x=c.find_path(E.map,"start","end"),I=[];for(let L=1;L<x.length-1;L++)I.push(E.table[x[L]].node);return e.fromArray(g(I))},e.rawSplit=function(w){return e.fromArray(d(w,a.isKanjiModeEnabled()))}})(hv)),hv}var pE;function nwe(){if(pE)return ev;pE=1;const e=hc(),t=o6(),n=Hbe(),r=Ube(),i=Bbe(),o=Vbe(),s=qbe(),a=aD(),c=Wbe(),l=zbe(),u=Ybe(),d=pc(),p=twe();function g(E,x){const I=E.size,L=o.getPositions(x);for(let R=0;R<L.length;R++){const k=L[R][0],A=L[R][1];for(let P=-1;P<=7;P++)if(!(k+P<=-1||I<=k+P))for(let O=-1;O<=7;O++)A+O<=-1||I<=A+O||(P>=0&&P<=6&&(O===0||O===6)||O>=0&&O<=6&&(P===0||P===6)||P>=2&&P<=4&&O>=2&&O<=4?E.set(k+P,A+O,!0,!0):E.set(k+P,A+O,!1,!0))}}function v(E){const x=E.size;for(let I=8;I<x-8;I++){const L=I%2===0;E.set(I,6,L,!0),E.set(6,I,L,!0)}}function m(E,x){const I=i.getPositions(x);for(let L=0;L<I.length;L++){const R=I[L][0],k=I[L][1];for(let A=-2;A<=2;A++)for(let P=-2;P<=2;P++)A===-2||A===2||P===-2||P===2||A===0&&P===0?E.set(R+A,k+P,!0,!0):E.set(R+A,k+P,!1,!0)}}function _(E,x){const I=E.size,L=l.getEncodedBits(x);let R,k,A;for(let P=0;P<18;P++)R=Math.floor(P/3),k=P%3+I-8-3,A=(L>>P&1)===1,E.set(R,k,A,!0),E.set(k,R,A,!0)}function y(E,x,I){const L=E.size,R=u.getEncodedBits(x,I);let k,A;for(k=0;k<15;k++)A=(R>>k&1)===1,k<6?E.set(k,8,A,!0):k<8?E.set(k+1,8,A,!0):E.set(L-15+k,8,A,!0),k<8?E.set(8,L-k-1,A,!0):k<9?E.set(8,15-k-1+1,A,!0):E.set(8,15-k-1,A,!0);E.set(L-8,8,1,!0)}function w(E,x){const I=E.size;let L=-1,R=I-1,k=7,A=0;for(let P=I-1;P>0;P-=2)for(P===6&&P--;;){for(let O=0;O<2;O++)if(!E.isReserved(R,P-O)){let j=!1;A<x.length&&(j=(x[A]>>>k&1)===1),E.set(R,P-O,j),k--,k===-1&&(A++,k=7)}if(R+=L,R<0||I<=R){R-=L,L=-L;break}}}function S(E,x,I){const L=new n;I.forEach(function(O){L.put(O.mode.bit,4),L.put(O.getLength(),d.getCharCountIndicator(O.mode,E)),O.write(L)});const R=e.getSymbolTotalCodewords(E),k=a.getTotalCodewordsCount(E,x),A=(R-k)*8;for(L.getLengthInBits()+4<=A&&L.put(0,4);L.getLengthInBits()%8!==0;)L.putBit(0);const P=(A-L.getLengthInBits())/8;for(let O=0;O<P;O++)L.put(O%2?17:236,8);return b(L,E,x)}function b(E,x,I){const L=e.getSymbolTotalCodewords(x),R=a.getTotalCodewordsCount(x,I),k=L-R,A=a.getBlocksCount(x,I),P=L%A,O=A-P,j=Math.floor(L/A),$=Math.floor(k/A),T=$+1,N=j-$,M=new c(N);let B=0;const F=new Array(A),K=new Array(A);let te=0;const oe=new Uint8Array(E.buffer);for(let Re=0;Re<A;Re++){const Le=Re<O?$:T;F[Re]=oe.slice(B,B+Le),K[Re]=M.encode(F[Re]),B+=Le,te=Math.max(te,Le)}const pe=new Uint8Array(L);let ne=0,z,re;for(z=0;z<te;z++)for(re=0;re<A;re++)z<F[re].length&&(pe[ne++]=F[re][z]);for(z=0;z<N;z++)for(re=0;re<A;re++)pe[ne++]=K[re][z];return pe}function C(E,x,I,L){let R;if(Array.isArray(E))R=p.fromArray(E);else if(typeof E=="string"){let j=x;if(!j){const $=p.rawSplit(E);j=l.getBestVersionForData($,I)}R=p.fromString(E,j||40)}else throw new Error("Invalid data");const k=l.getBestVersionForData(R,I);if(!k)throw new Error("The amount of data is too big to be stored in a QR Code");if(!x)x=k;else if(x<k)throw new Error(`
The chosen QR Code version cannot contain this amount of data.
Minimum version required to store current data is: `+k+`.
`);const A=S(x,I,R),P=e.getSymbolSize(x),O=new r(P);return g(O,x),v(O),m(O,x),y(O,I,0),x>=7&&_(O,x),w(O,A),isNaN(L)&&(L=s.getBestMask(O,y.bind(null,O,I))),s.applyMask(L,O),y(O,I,L),{modules:O,version:x,errorCorrectionLevel:I,maskPattern:L,segments:R}}return ev.create=function(x,I){if(typeof x>"u"||x==="")throw new Error("No input text");let L=t.M,R,k;return typeof I<"u"&&(L=t.from(I.errorCorrectionLevel,t.M),R=l.from(I.version),k=s.from(I.maskPattern),I.toSJISFunc&&e.setToSJISFunction(I.toSJISFunc)),C(x,R,L,k)},ev}var _v={},bv={},gE;function uD(){return gE||(gE=1,(function(e){function t(n){if(typeof n=="number"&&(n=n.toString()),typeof n!="string")throw new Error("Color should be defined as hex string");let r=n.slice().replace("#","").split("");if(r.length<3||r.length===5||r.length>8)throw new Error("Invalid hex color: "+n);(r.length===3||r.length===4)&&(r=Array.prototype.concat.apply([],r.map(function(o){return[o,o]}))),r.length===6&&r.push("F","F");const i=parseInt(r.join(""),16);return{r:i>>24&255,g:i>>16&255,b:i>>8&255,a:i&255,hex:"#"+r.slice(0,6).join("")}}e.getOptions=function(r){r||(r={}),r.color||(r.color={});const i=typeof r.margin>"u"||r.margin===null||r.margin<0?4:r.margin,o=r.width&&r.width>=21?r.width:void 0,s=r.scale||4;return{width:o,scale:o?4:s,margin:i,color:{dark:t(r.color.dark||"#000000ff"),light:t(r.color.light||"#ffffffff")},type:r.type,rendererOpts:r.rendererOpts||{}}},e.getScale=function(r,i){return i.width&&i.width>=r+i.margin*2?i.width/(r+i.margin*2):i.scale},e.getImageWidth=function(r,i){const o=e.getScale(r,i);return Math.floor((r+i.margin*2)*o)},e.qrToImageData=function(r,i,o){const s=i.modules.size,a=i.modules.data,c=e.getScale(s,o),l=Math.floor((s+o.margin*2)*c),u=o.margin*c,d=[o.color.light,o.color.dark];for(let p=0;p<l;p++)for(let g=0;g<l;g++){let v=(p*l+g)*4,m=o.color.light;if(p>=u&&g>=u&&p<l-u&&g<l-u){const _=Math.floor((p-u)/c),y=Math.floor((g-u)/c);m=d[a[_*s+y]?1:0]}r[v++]=m.r,r[v++]=m.g,r[v++]=m.b,r[v]=m.a}}})(bv)),bv}var mE;function rwe(){return mE||(mE=1,(function(e){const t=uD();function n(i,o,s){i.clearRect(0,0,o.width,o.height),o.style||(o.style={}),o.height=s,o.width=s,o.style.height=s+"px",o.style.width=s+"px"}function r(){try{return document.createElement("canvas")}catch{throw new Error("You need to specify a canvas element")}}e.render=function(o,s,a){let c=a,l=s;typeof c>"u"&&(!s||!s.getContext)&&(c=s,s=void 0),s||(l=r()),c=t.getOptions(c);const u=t.getImageWidth(o.modules.size,c),d=l.getContext("2d"),p=d.createImageData(u,u);return t.qrToImageData(p.data,o,c),n(d,l,u),d.putImageData(p,0,0),l},e.renderToDataURL=function(o,s,a){let c=a;typeof c>"u"&&(!s||!s.getContext)&&(c=s,s=void 0),c||(c={});const l=e.render(o,s,c),u=c.type||"image/png",d=c.rendererOpts||{};return l.toDataURL(u,d.quality)}})(_v)),_v}var wv={},vE;function iwe(){if(vE)return wv;vE=1;const e=uD();function t(i,o){const s=i.a/255,a=o+'="'+i.hex+'"';return s<1?a+" "+o+'-opacity="'+s.toFixed(2).slice(1)+'"':a}function n(i,o,s){let a=i+o;return typeof s<"u"&&(a+=" "+s),a}function r(i,o,s){let a="",c=0,l=!1,u=0;for(let d=0;d<i.length;d++){const p=Math.floor(d%o),g=Math.floor(d/o);!p&&!l&&(l=!0),i[d]?(u++,d>0&&p>0&&i[d-1]||(a+=l?n("M",p+s,.5+g+s):n("m",c,0),c=0,l=!1),p+1<o&&i[d+1]||(a+=n("h",u),u=0)):c++}return a}return wv.render=function(o,s,a){const c=e.getOptions(s),l=o.modules.size,u=o.modules.data,d=l+c.margin*2,p=c.color.light.a?"<path "+t(c.color.light,"fill")+' d="M0 0h'+d+"v"+d+'H0z"/>':"",g="<path "+t(c.color.dark,"stroke")+' d="'+r(u,l,c.margin)+'"/>',v='viewBox="0 0 '+d+" "+d+'"',_='<svg xmlns="http://www.w3.org/2000/svg" '+(c.width?'width="'+c.width+'" height="'+c.width+'" ':"")+v+' shape-rendering="crispEdges">'+p+g+`</svg>
`;return typeof a=="function"&&a(null,_),_},wv}var yE;function owe(){if(yE)return Dc;yE=1;const e=Fbe(),t=nwe(),n=rwe(),r=iwe();function i(o,s,a,c,l){const u=[].slice.call(arguments,1),d=u.length,p=typeof u[d-1]=="function";if(!p&&!e())throw new Error("Callback required as last argument");if(p){if(d<2)throw new Error("Too few arguments provided");d===2?(l=a,a=s,s=c=void 0):d===3&&(s.getContext&&typeof l>"u"?(l=c,c=void 0):(l=c,c=a,a=s,s=void 0))}else{if(d<1)throw new Error("Too few arguments provided");return d===1?(a=s,s=c=void 0):d===2&&!s.getContext&&(c=a,a=s,s=void 0),new Promise(function(g,v){try{const m=t.create(a,c);g(o(m,s,c))}catch(m){v(m)}})}try{const g=t.create(a,c);l(null,o(g,s,c))}catch(g){l(g)}}return Dc.create=t.create,Dc.toCanvas=i.bind(null,n.render),Dc.toDataURL=i.bind(null,n.renderToDataURL),Dc.toString=i.bind(null,function(o,s,a){return r.render(o,a)}),Dc}var swe=owe();const awe="_qrCode_h54ia_8",cwe={qrCode:awe},lwe=({data:e,className:t})=>{const[n,r]=f.useState(null);return f.useEffect(()=>{let i=!1;return swe.toDataURL(e,{errorCorrectionLevel:"L"}).then(o=>{i||r(o)}).catch(o=>{i||r(null)}),()=>{i=!0}},[e]),h.jsx("div",{className:Z(cwe.qrCode,t),children:n&&h.jsx("img",{src:n,alt:vn("qr_code")})})},uwe=({room:e,open:t,onDismiss:n})=>{const{t:r}=he(),i=Fm(e.roomId),o=f.useMemo(()=>MO(e.roomId,i,e.name),[i,e.name,e.roomId]),[s,a]=f.useState(!1),c=f.useCallback(()=>a(!1),[a]),l=f.useCallback(u=>{u.stopPropagation(),$be(o),n(),a(!0)},[o,n]);return h.jsxs(h.Fragment,{children:[h.jsxs(lc,{title:r("invite_modal.title"),open:t,onDismiss:n,children:[h.jsx(lwe,{className:Q2.qrCode,data:o}),h.jsx(Ye,{className:Q2.url,size:"sm",weight:"semibold",children:o}),h.jsx(De,{className:Q2.button,Icon:Tie,onClick:l,"data-testid":"modal_inviteLink",children:r("action.copy_link")})]}),h.jsx(oD,{open:s,onDismiss:c,autoDismiss:2e3,Icon:N_,children:r("invite_modal.link_copied_toast")})]})},dwe=({error:e,recoveryActionHandler:t,widget:n})=>{const{t:r}=he();U.error("Error boundary caught:",e);let i;switch(e.category){case Vp.CONFIGURATION_ISSUE:i=kie;break;case Vp.NETWORK_CONNECTIVITY:i=Nie;break;case Vp.CLIENT_CONFIGURATION:i=Zie;break;default:i=If}const o=[];return e instanceof Pj&&o.push({label:r("call_ended_view.reconnect_button"),onClick:()=>{t("reconnect")}}),h.jsx(il,{children:h.jsxs(Zd,{Icon:i,title:e.localisedTitle,rageshake:e.code==Aj.UNKNOWN_ERROR,widget:n,children:[h.jsx("p",{children:e.localisedMessage??h.jsx(lr,{i18nKey:"error.unexpected_ec_error",components:[h.jsx("b",{}),h.jsx("code",{})],values:{errorCode:e.code}})}),o&&o.map((s,a)=>h.jsx(De,{kind:"secondary",onClick:s.onClick,children:s.label},`action${a}`))]})})},fwe=({recoveryActionHandler:e,onError:t,children:n,widget:r})=>{const i=f.useCallback(({error:o,resetError:s})=>{const a=o instanceof gn?o:new za(o instanceof Error?o:new Error);return h.jsx(dwe,{widget:r??null,error:a,resetError:s,recoveryActionHandler:async c=>{await e(c),s()}})},[e,r]);return h.jsx(Eg,{fallback:i,onError:o=>t?.(o),children:n})},hwe=8,pwe=({client:e,isPasswordlessUser:t,confineToRoom:n,preload:r,skipLobby:i,header:o,rtcSession:s,joined:a,setJoined:c,muteStates:l,widget:u})=>{const[d,p]=f.useState(null),g=wP(s),v=J(iD),m=Wa(Zm({sounds:rD,latencyHint:"interactive",muted:v}));f.useEffect(()=>{g.length>=hwe&&l.audio.setEnabled$.value?.(!1)},[]),f.useEffect(()=>(U.info("[Lifecycle] GroupCallView Component mounted"),()=>{U.info("[Lifecycle] GroupCallView Component unmounted")}),[]),f.useEffect(()=>(document.body.classList.add("no-scroll-body"),()=>{document.body.classList.remove("no-scroll-body")}),[]),f.useEffect(()=>(window.rtcSession=s,()=>{delete window.rtcSession}),[s]),jle(s,Us.MembershipManagerError,z=>p(new Pj)),f.useEffect(()=>{e.getRoom(s.room.roomId)!==s.room&&U.warn(`We've ended up with multiple rooms for the same ID (${s.room.roomId}). This indicates a bug in the group call loading code, and may lead to incomplete room state.`)},[e,s.room]);const _=s.room,{displayName:y,avatarUrl:w}=Kf(e),S=Tbe(_),b=kbe(_),{perParticipantE2EE:C,returnToLobby:E,password:x}=gi(),I=Fm(_.roomId);f.useEffect(()=>{x&&LO(_.roomId,x)},[x,_.roomId]),th(S),gbe(S);const L=f.useMemo(()=>({userId:e.getUserId(),displayName:y,avatarUrl:w,roomId:_.roomId,roomName:S,roomAlias:_.getCanonicalAlias(),roomAvatar:b,e2eeSystem:I}),[e,y,w,S,_,b,I]),R=f.useMemo(()=>new Set(g.map(z=>z.userId)).size,[g]),k=dc(),A=Wa(l),P=f.useCallback(async z=>{try{c(!0)}catch(re){if(re instanceof gn)p(re);else{U.error("Unknown Error while entering RTC session",re);const Re=new za(re instanceof Error?re:new Error("Unknown error",{cause:re}));p(Re)}}return Promise.resolve()},[c]);f.useEffect(()=>{const z=async({audioInput:re,videoInput:Re})=>{const Le=await Yp.getLocalDevices(void 0,!0);if(re){const Se=XS(re,"audioinput",Le);Se?(U.debug(`Found audio input ID ${Se} for name ${re}`),k.audioInput.select(Se)):(U.warn("Unknown audio input: "+re),A.current.audio.setEnabled$.value?.(!1))}if(Re){const Se=XS(Re,"videoinput",Le);Se?(U.debug(`Found video input ID ${Se} for name ${Re}`),k.videoInput.select(Se)):(U.warn("Unknown video input: "+Re),A.current.video.setEnabled$.value?.(!1))}};if(i)if(u&&r){const re=Re=>{(async()=>{await z(Re.detail.data),c(!0),u.api.transport.reply(Re.detail,{})})().catch(Le=>{U.error("Error joining RTC session on preload",Le)})};return u.lazyActions.on(io.JoinCall,re),()=>{u.lazyActions.off(io.JoinCall,re)}}else c(!0)},[u,s,r,i,C,k,A,c]);const[O,j]=f.useState(!1),$=uo(),T=f.useCallback(z=>{let re="left";(z==="timeout"||z==="decline")&&(re=z),c(!1),j(!0);const Re=m.current?.playSound(re),Le=new Promise(Se=>{const xt=u!==null;Ke.instance.eventCallEnded.track(_.roomId,s.memberships.length,xt,s),window.setTimeout(Se,10)});Promise.all([Re,Le]).catch(Se=>U.error("Failed to play leave audio and/or send PostHog leave event",Se)).then(async()=>{if(!t&&!n&&!Ke.instance.isEnabled()&&$("/"),u){try{await u.api.setAlwaysOnScreen(!1)}catch(Se){U.error("Failed to set call widget `alwaysOnScreen` to false",Se)}if(z!="error"&&!kt().returnToLobby){try{await u.api.transport.send(io.Close,{})}catch(Se){U.error("Failed to send close action",Se)}u.api.transport.stop()}}})},[c,m,u,_.roomId,s,t,n,$]);f.useEffect(()=>{u&&a&&u.api.setAlwaysOnScreen(!0).catch(z=>{U.error("Error calling setAlwaysOnScreen(true)",z)})},[u,a,s]);const N=Abe(_),[M,B]=f.useState(!1),F=f.useCallback(()=>B(!1),[B]),K=f.useCallback(()=>B(!0),[B]),te=N===Jc.Public?K:null;if(!tF()&&I.kind!==mt.NONE)throw new l3e;const oe=h.jsx(uwe,{room:_,open:M,onDismiss:F}),pe=h.jsxs(h.Fragment,{children:[oe,h.jsx(BO,{client:e,matrixInfo:L,muteStates:l,onEnter:()=>c(!0),confineToRoom:n,hideHeader:o===zd.None,participantCount:R,onShareClick:te})]});let ne;if(d){const z=()=>{throw d};ne=h.jsx(z,{})}else a?ne=h.jsxs(h.Fragment,{children:[oe,h.jsx(Rbe,{client:e,matrixInfo:L,rtcSession:s,matrixRoom:_,onLeft:T,header:o,muteStates:l,e2eeSystem:I,onShareClick:te})]}):O&&u===null?t||Ke.instance.isEnabled()&&u===null?ne=h.jsx(B2e,{endedCallId:s.room.roomId,client:e,isPasswordlessUser:t,hideHeader:o===zd.None,confineToRoom:n}):ne=null:O&&u!==null?ne=E?pe:null:r||i?ne=null:ne=pe;return h.jsx(fwe,{widget:u,recoveryActionHandler:async z=>{p(null),z=="reconnect"&&(j(!1),await P(s).catch(re=>{U.error("Error re-entering RTC session",re)}))},onError:()=>{s.isJoined()&&T("error")},children:ne})},gwe="_modal_1tnec_8",mwe={modal:gwe},vwe=({roomId:e})=>{const{t}=he(),[n,r]=f.useState(!0),i=f.useCallback(a=>{a.preventDefault(),a.stopPropagation(),r(!1)},[r]),o=Fm(e);o.kind===mt.NONE&&U.error("Generating app redirect URL for encrypted room but don't have key available!");const s=f.useMemo(()=>{const a=new URL(e===null?window.location.href:MO(e,o));a.hash=ale(a.hash,l=>(l.set("appPrompt","false"),l.set("confineToRoom","true"),l));const c=new URL("io.element.call:/");return c.searchParams.set("url",a.toString()),c.toString()},[o,e]);return h.jsxs(lc,{className:mwe.modal,title:t("app_selection_modal.title"),open:n,children:[h.jsx(Ye,{size:"md",weight:"semibold",children:t("app_selection_modal.text")}),h.jsx(De,{kind:"secondary",onClick:i,children:t("app_selection_modal.continue_in_browser")}),h.jsx(De,{as:"a",href:s,Icon:j_,children:t("app_selection_modal.open_in_app")})]})},ywe=3,_we=3e3;async function dD(e,t=0,...n){try{return await e.joinRoom(...n)}catch(r){if(r instanceof AE&&r.errcode==="M_FORBIDDEN"&&t<ywe)return await new Promise(i=>setTimeout(i,_we)),dD(e,t+1,...n);throw r}}class Kp extends Error{constructor(t,n,r,i){super(n),this.icon=t,this.messageBody=r,this.reason=i}}const bwe=(e,t,n)=>{const[r,i]=f.useState({kind:"loading"}),o=f.useRef(void 0),{t:s}=he(),a=f.useCallback(()=>new Kp(xie,s("group_call_loader.banned_heading"),s("group_call_loader.banned_body"),u()),[s]),c=f.useCallback(()=>new Kp(Rf,s("group_call_loader.knock_reject_heading"),s("group_call_loader.knock_reject_body"),u()),[s]),l=f.useCallback(()=>new Kp(dA,s("group_call_loader.call_ended_heading"),s("group_call_loader.call_ended_body"),u()),[s]),u=()=>o.current?.currentState.getStateEvents(He.RoomMember,o.current?.myUserId)?.getContent().reason;return f.useEffect(()=>{if(!e||!t)return;const d=async y=>{let w=null;const S=await e.getRoomIdForAlias(y.toLowerCase());return U.info(`${y} resolved to ${S.room_id}`),w=e.getRoom(S.room_id),w?U.info(`Already in room ${S.room_id}, not rejoining.`):(U.info(`Room ${S.room_id} not found, joining.`),w=await e.joinRoom(S.room_id,{viaServers:S.servers})),w},p=async(y,w,S)=>(await e.knockRoom(y,{viaServers:w}),S(),await new Promise((b,C)=>{e.on(Cr.MyMembership,(E,x,I)=>{y===E.roomId&&(o.current=E,x===tn.Invite&&I===tn.Knock&&dD(e,0,E.roomId,{viaServers:w}).then(L=>{U.log("Auto-joined %s",L.roomId),b(L)},C),x===tn.Ban&&C(a()),x===tn.Leave&&C(c()))})})),g=async()=>{let y=null;if(t[0]==="#")y=await d(t),o.current=y;else{const w=t;y=e.getRoom(w),o.current=y??void 0;const S=y?.getMyMembership();if(S===tn.Join)return y;if(Ae)throw new Error("Room not found. The widget-api did not pass over the relevant room events/information.");if(S===tn.Ban)throw a();if(S===tn.Invite)y=await e.joinRoom(w,{viaServers:n});else{let b;try{b=await e.getRoomSummary(w,n)}catch(C){U.warn("Could not load room summary to decide whether we want to join or knock.\n              EC will fallback to join as if this would be a public room.\n              Reach out to your homeserver admin to ask them about supporting the `/summary` endpoint (im.nheko.summary):",C)}if(b===void 0||b.join_rule===Jc.Public)y=await e.joinRoom(w,{viaServers:n});else if(b.join_rule===Jc.Knock){const C=b;let E=()=>{};const x=new Promise(I=>{C.membership!==tn.Knock?E=I:I()});i({kind:"canKnock",roomSummary:C,knock:E}),await x,y=await p(b.room_id,n,()=>i({kind:"waitForInvite",roomSummary:C}))}else throw new Error(`Room ${b.room_id} is not joinable. This likely means, that the conference owner has changed the room settings to private.`)}}return U.info(`Joined ${t}, waiting room to be ready for group calls`),await e.waitUntilRoomReadyForGroupCalls(y.roomId),U.info(`${t}, is ready for group calls`),y},v=async()=>{const y=await g();return o.current=y,U.debug(`Fetched / joined room ${t}`),e.matrixRTC.getRoomSession(y)},m=async()=>{e.getSyncState()!==Rv.Syncing&&(U.debug("useLoadGroupCall: waiting for client to start syncing..."),await new Promise(y=>{const w=()=>{if(e.getSyncState()===Rv.Syncing)return e.off(ei.Sync,w),y()};e.on(ei.Sync,w)}),U.debug("useLoadGroupCall: client is now syncing."))},_=async()=>{await new Promise((y,w)=>{e.on(Cr.MyMembership,(S,b)=>{b===tn.Leave&&w(l()),b===tn.Ban&&w(a())})})};r.kind==="loading"&&(U.log("Start loading group call"),m().then(v).then(y=>i({kind:"loaded",rtcSession:y})).then(_).catch(y=>i({kind:"failed",error:y})))},[a,e,c,l,t,r,s,n]),r},Sv=async e=>Promise.resolve(e);class _E{constructor(t,n,r,i){this.scope=t,this.device=n,this.enabledByDefault=r,this.forceMute$=i,this.handler$=new Pt(Sv),this.canControlDevices$=ge([this.device.available$,this.forceMute$]).pipe(V(([o,s])=>!s&&o.size>0)),this.data$=this.scope.behavior(this.canControlDevices$.pipe(ar(),V(o=>{if(U.info(`MuteState: canControlDevices: ${o}, enabled by default: ${this.enabledByDefault}`),!o)return U.info(`MuteState: devices connected: ${o}, disabling`),this.handler$.value(!1).catch(d=>{U.error("MuteState-disable: handler error",d)}),{enabled$:Ce(!1),set:null,toggle:null};let s=this.enabledByDefault;const a=new Ht,c=new Ht,l=Vo(a,c.pipe(V(()=>!s))),u=new Ct(d=>{d.next(s);let p=this.enabledByDefault,g=!1;const v=async()=>{if(s===p)g=!1;else{const _=s;s=await dhe(this.handler$.pipe(Ee(async y=>y(p)))),s===_?g=!1:(d.next(s),g=!0,v().catch(y=>{U.error("MuteState: handler error",y)}))}},m=l.subscribe(_=>{p=_,g===!1&&(g=!0,v().catch(y=>{U.error("MuteState: handler error",y)}))});return()=>m.unsubscribe()});return{set:d=>a.next(d),toggle:()=>c.next(),enabled$:u}}))),this.enabled$=this.scope.behavior(this.data$.pipe(Ee(({enabled$:o})=>o))),this.setEnabled$=this.scope.behavior(this.data$.pipe(V(({set:o})=>o))),this.toggle$=this.scope.behavior(this.data$.pipe(V(({toggle:o})=>o)))}setHandler(t){if(this.handler$.value!==Sv)throw new Error("Multiple mute state handlers are not supported");this.handler$.next(t)}unsetHandler(){this.handler$.next(Sv)}}class wwe{constructor(t,n,r){if(this.scope=t,this.mediaDevices=n,this.initialMuteState=r,this.isEarpiece$=ge([this.mediaDevices.audioOutput.available$,this.mediaDevices.audioOutput.selected$]).pipe(V(([i,o])=>{if(!o?.id)return!1;const s=i.get(o.id);return U.info("MuteStates: selected audio output device:",s),s?.type==="earpiece"})),this.audio=new _E(this.scope,this.mediaDevices.audioInput,this.initialMuteState.audioEnabled,cm(!1)),this.video=new _E(this.scope,this.mediaDevices.videoInput,this.initialMuteState.videoEnabled,this.isEarpiece$),Ae!==null){const i=ge([this.audio.enabled$,this.video.enabled$],(s,a)=>({audio_enabled:s,video_enabled:a}));i.pipe(this.scope.bind()).subscribe(s=>{Ae.api.transport.send(io.DeviceMute,s).catch(a=>U.warn("Could not send DeviceMute action to widget",a))}),Pn(Ae.lazyActions,io.DeviceMute).pipe($M(i,this.audio.setEnabled$,this.video.setEnabled$),this.scope.bind()).subscribe(([s,a,c,l])=>{const u={...a};s.detail.data.audio_enabled!=null&&typeof s.detail.data.audio_enabled=="boolean"&&c!==null&&(u.audio_enabled=s.detail.data.audio_enabled,c(u.audio_enabled)),s.detail.data.video_enabled!=null&&typeof s.detail.data.video_enabled=="boolean"&&l!==null&&(u.video_enabled=s.detail.data.video_enabled,l(u.video_enabled)),Ae.api.transport.reply(s.detail,u)})}}}function Swe(e,t,n){return U.debug(`calculateInitialMuteState: skipLobby=${e}, callIntent=${t} isWidgetMode=${n}`),e&&!n?{audioEnabled:!1,videoEnabled:!1}:{audioEnabled:!0,videoEnabled:t!="audio"}}const Cwe=()=>{const e=gi(),{confineToRoom:t,appPrompt:n,preload:r,header:i,displayName:o,skipLobby:s}=e,{t:a}=he(),{roomAlias:c,roomId:l,viaServers:u}=ule(),d=l??c;d||U.error("No room specified");const{registerPasswordlessUser:p}=FO(),[g,v]=f.useState(!1),{loading:m,authenticated:_,client:y,error:w,passwordlessUser:S}=bb(),{avatarUrl:b,displayName:C}=Kf(y),E=bwe(y,d,u),[x,I]=f.useState(!1),L=dc(),[R,k]=f.useState(null);f.useEffect(()=>{const T=new Wf;return k(new wwe(T,L,Swe(e.skipLobby,e.callIntent,Ae!==null))),()=>T.end()},[L,e]),f.useEffect(()=>{!m&&!_&&o&&!Ae&&(v(!0),p(o).catch(T=>{U.error("Failed to register passwordless user",T)}).finally(()=>{v(!1)}))},[m,_,o,v,p]);const[A,P]=om();f.useEffect(()=>{A===null&&P&&P(!0)},[A,P]);const O=f.useRef(!1);f.useEffect(()=>{E.kind==="loaded"&&O.current&&U.log("Play join sound 'Not yet implemented'")},[E.kind]);const j=()=>{switch(E.kind){case"loaded":return R&&h.jsx(pwe,{widget:Ae,client:y,rtcSession:E.rtcSession,joined:x,setJoined:I,isPasswordlessUser:S,confineToRoom:t,preload:r,skipLobby:s||O.current,header:i,muteStates:R});case"waitForInvite":case"canKnock":{O.current=O.current||E.kind==="waitForInvite";const T=E.kind==="canKnock"?E.knock:null,N=E.kind==="canKnock"?a("lobby.ask_to_join"):h.jsxs(h.Fragment,{children:[a("lobby.waiting_for_invite"),h.jsx(N_,{})]});return R&&h.jsx(BO,{client:y,matrixInfo:{userId:y.getUserId()??"",displayName:C??"",avatarUrl:b??"",roomAlias:null,roomId:E.roomSummary.room_id,roomName:E.roomSummary.name??"",roomAvatar:E.roomSummary.avatar_url??null,e2eeSystem:{kind:E.roomSummary["im.nheko.summary.encryption"]?mt.PER_PARTICIPANT:mt.NONE}},onEnter:()=>T?.(),enterLabel:N,waitingForInvite:E.kind==="waitForInvite",confineToRoom:t,hideHeader:i!=="standard",participantCount:null,muteStates:R,onShareClick:null})}case"loading":return h.jsx(il,{children:h.jsx("h1",{children:a("common.loading")})});case"failed":return O.current=!1,E.error.errcode==="M_NOT_FOUND"?h.jsx(il,{children:h.jsx(Zd,{Icon:Bie,title:a("error.call_not_found"),widget:Ae,children:h.jsx(lr,{i18nKey:"error.call_not_found_description",children:h.jsxs("p",{children:["That link doesn't appear to belong to any existing call. Check that you have the right link, or"," ",h.jsx(so,{to:"/",children:"create a new one"}),"."]})})})}):E.error instanceof Kp?h.jsx(il,{children:h.jsxs(Zd,{Icon:E.error.icon,title:E.error.message,widget:Ae,children:[h.jsx("p",{children:E.error.messageBody}),E.error.reason&&h.jsx("p",{children:a("group_call_loader.reason",{reason:E.error.reason})})]})}):h.jsx(Qd,{widget:Ae,error:E.error});default:return h.jsx(h.Fragment,{children:" "})}};let $;return m||g?$=h.jsx(Jg,{}):w?$=h.jsx(Qd,{widget:Ae,error:w}):y?d?$=j():$=h.jsx(jO,{}):$=h.jsx(B0e,{}),h.jsxs(h.Fragment,{children:[$,n&&it.get().app_prompt&&(Pi==="android"||Pi==="ios")&&l&&h.jsx(vwe,{roomId:l})]})},Ewe="data:application/json;base64,ewogICJhMTF5IjogewogICAgInVzZXJfbWVudSI6ICLQn9C+0YLRgNC10LHQuNGC0LXQu9GB0LrQviDQvNC10L3RjiIKICB9LAogICJhY3Rpb24iOiB7CiAgICAiY2xvc2UiOiAi0JfQsNGC0LLQvtGA0LgiLAogICAgImNvcHlfbGluayI6ICLQmtC+0L/QuNGA0LDQvdC1INC90LAg0LLRgNGK0LfQutCw0YLQsCIsCiAgICAiZ28iOiAi0J3QsNC/0YDQtdC0IiwKICAgICJpbnZpdGUiOiAi0J/QvtC60LDQvdCwIiwKICAgICJubyI6ICLQndC1IiwKICAgICJyZWdpc3RlciI6ICLQoNC10LPQuNGB0YLRgNCw0YbQuNGPIiwKICAgICJyZW1vdmUiOiAi0J/RgNC10LzQsNGF0L3QuCIsCiAgICAic2lnbl9pbiI6ICLQktC70LXQtyIsCiAgICAic2lnbl9vdXQiOiAi0JjQt9C70LXQtyIKICB9LAogICJjYWxsX2VuZGVkX3ZpZXciOiB7CiAgICAiY3JlYXRlX2FjY291bnRfYnV0dG9uIjogItCh0YrQt9C00LDQuSDQsNC60LDRg9C90YIiLAogICAgImNyZWF0ZV9hY2NvdW50X3Byb21wdCI6ICI8MD7Ql9Cw0YnQviDQvdC1INC90LDRgdGC0YDQvtC50YLQtSDQv9Cw0YDQvtC70LAg0LfQsCDQtNCwINC30LDQv9Cw0LfQuNGC0LUg0LDQutCw0YPQvdGC0LAg0YHQuD88LzA+PDE+0KnQtSDQvNC+0LbQtdGC0LUg0LTQsCDQt9Cw0L/QsNC30LjRgtC1INC40LzQtdGC0L4g0Lgg0LDQstCw0YLQsNGA0LAg0YHQuCDQt9CwINCx0YrQtNC10YnQuCDRgNCw0LfQs9C+0LLQvtGA0Lg8LzE+IiwKICAgICJub3Rfbm93X2J1dHRvbiI6ICLQndC1INGB0LXQs9CwLCDQstGK0YDQvdC4INGB0LUg0L3QsCDQvdCw0YfQsNC70L3QuNGPINC10LrRgNCw0L0iCiAgfSwKICAiY29tbW9uIjogewogICAgImF1ZGlvIjogItCX0LLRg9C6IiwKICAgICJhdmF0YXIiOiAi0JDQstCw0YLQsNGAIiwKICAgICJkaXNwbGF5X25hbWUiOiAi0JjQvNC1L9C/0YHQtdCy0LTQvtC90LjQvCIsCiAgICAiaG9tZSI6ICLQndCw0YfQsNC70L4iLAogICAgImxvYWRpbmciOiAi0JfQsNGA0LXQttC00LDQvdC14oCmIiwKICAgICJwYXNzd29yZCI6ICLQn9Cw0YDQvtC70LAiLAogICAgInByb2ZpbGUiOiAi0J/RgNC+0YTQuNC7IiwKICAgICJzZXR0aW5ncyI6ICLQndCw0YHRgtGA0L7QudC60LgiLAogICAgInVzZXJuYW1lIjogItCf0L7RgtGA0LXQsdC40YLQtdC70YHQutC+INC40LzQtSIsCiAgICAidmlkZW8iOiAi0JLQuNC00LXQviIKICB9LAogICJqb2luX2V4aXN0aW5nX2NhbGxfbW9kYWwiOiB7CiAgICAiam9pbl9idXR0b24iOiAi0JTQsCwg0L/RgNC40YHRitC10LTQuNC90Lgg0YHQtSIsCiAgICAidGV4dCI6ICLQotC+0LfQuCDRgNCw0LfQs9C+0LLQvtGAINCy0LXRh9C1INGB0YrRidC10YHRgtCy0YPQstCwLCDQuNGB0LrQsNGC0LUg0LvQuCDQtNCwINGB0LUg0L/RgNC40YHRitC10LTQuNC90LjRgtC1PyIsCiAgICAidGl0bGUiOiAi0J/RgNC40YHRitC10LTQuNC90Y/QstCw0L3QtSDQutGK0Lwg0YHRitGJ0LXRgdGC0LLRg9Cy0LDRiSDRgNCw0LfQs9C+0LLQvtGAPyIKICB9LAogICJsYXlvdXRfc3BvdGxpZ2h0X2xhYmVsIjogItCf0YDQvtC20LXQutGC0L7RgCIsCiAgImxvYmJ5IjogewogICAgImpvaW5fYnV0dG9uIjogItCS0LvQtdC3INCyINGA0LDQt9Cz0L7QstC+0YDQsCIKICB9LAogICJsb2dnaW5nX2luIjogItCS0LvQuNC30LDQvdC14oCmIiwKICAibG9naW5fYXV0aF9saW5rcyI6ICI8MD7QodGK0LfQtNCw0LnRgtC1INCw0LrQsNGD0L3RgjwvMD4g0LjQu9C4IDwyPtCS0LvQtdC30YLQtSDQutCw0YLQviDQs9C+0YHRgjwvMj4iLAogICJsb2dpbl90aXRsZSI6ICLQktC70LXQtyIsCiAgInJhZ2VzaGFrZV9yZXF1ZXN0X21vZGFsIjogewogICAgImJvZHkiOiAi0JTRgNGD0LMg0L/QvtGC0YDQtdCx0LjRgtC10Lsg0LIg0YLQvtC30Lgg0YDQsNC30LPQvtCy0L7RgCDQuNC80LAg0L/RgNC+0LHQu9C10LwuINCX0LAg0LTQsCDQtNC40LDQs9C90L7RgdGC0LjRhtC40YDQsNC80LUg0YLQvtC30Lgg0L/RgNC+0LHQu9C10Lwg0L/Qvi3QtNC+0LHRgNC1INC90Lgg0YHQtSDQuNGB0LrQsCDQtNCwINGB0YrQsdC10YDQtdC8IGRlYnVnINC70L7Qs9C+0LLQtS4iLAogICAgInRpdGxlIjogItCX0LDRj9Cy0LrQsCDQt9CwIGRlYnVnINC70L7Qs9C+0LLQtSIKICB9LAogICJyYWdlc2hha2Vfc2VuZF9sb2dzIjogItCY0LfQv9GA0LDRgtC10YLQtSBkZWJ1ZyDQu9C+0LPQvtCy0LUiLAogICJyYWdlc2hha2Vfc2VuZGluZyI6ICLQmNC30L/RgNCw0YnQsNC90LXigKYiLAogICJyZWNhcHRjaGFfZGlzbWlzc2VkIjogIlJlY2FwdGNoYSDQvtGC0YXQstGK0YDQu9C10L3QsCIsCiAgInJlY2FwdGNoYV9ub3RfbG9hZGVkIjogIlJlY2FwdGNoYSDQvdC1INC1INC30LDRgNC10LTQtdC90LAiLAogICJyZWdpc3RlciI6IHsKICAgICJwYXNzd29yZHNfbXVzdF9tYXRjaCI6ICLQn9Cw0YDQvtC70LjRgtC1INC90LUg0YHRitCy0L/QsNC00LDRgiIsCiAgICAicmVnaXN0ZXJpbmciOiAi0KDQtdCz0LjRgdGC0YDQuNGA0LDQvdC14oCmIgogIH0sCiAgInJlZ2lzdGVyX2F1dGhfbGlua3MiOiAiPDA+0JLQtdGH0LUg0LjQvNCw0YLQtSDQsNC60LDRg9C90YI/PC8wPjwxPjwwPtCS0LvQtdC30YLQtSDRgSDQvdC10LPQvjwvMD4g0LjQu9C4IDwyPtCS0LvQtdC30YLQtSDQutCw0YLQviDQs9C+0YHRgjwvMj48LzE+IiwKICAicmVnaXN0ZXJfY29uZmlybV9wYXNzd29yZF9sYWJlbCI6ICLQn9C+0YLQstGK0YDQtNC4INC/0LDRgNC+0LvQsNGC0LAiLAogICJyZXR1cm5faG9tZV9idXR0b24iOiAi0JLRgNGK0YnQsNC90LUg0L3QsCDQvdCw0YfQsNC70L3QuNGPINC10LrRgNCw0L0iLAogICJzY3JlZW5zaGFyZV9idXR0b25fbGFiZWwiOiAi0KHQv9C+0LTQtdC70Lgg0LXQutGA0LDQvdCwIiwKICAic2V0dGluZ3MiOiB7CiAgICAiZGV2ZWxvcGVyX3RhYl90aXRsZSI6ICLQoNCw0LfRgNCw0LHQvtGC0YfQuNC6IiwKICAgICJmZWVkYmFja190YWJfaDQiOiAi0JjQt9C/0YDQsNGC0Lgg0L7QsdGA0LDRgtC90LAg0LLRgNGK0LfQutCwIiwKICAgICJmZWVkYmFja190YWJfc2VuZF9sb2dzX2xhYmVsIjogItCS0LrQu9GO0YfQuCBkZWJ1ZyDQu9C+0LPQvtCy0LUiCiAgfSwKICAidW5hdXRoZW50aWNhdGVkX3ZpZXdfYm9keSI6ICLQktGB0LUg0L7RidC1INC90LUg0YHRgtC1INGA0LXQs9C40YHRgtGA0LjRgNCw0L3QuD8gPDI+0KHRitC30LTQsNC50YLQtSDQsNC60LDRg9C90YI8LzI+IiwKICAidW5hdXRoZW50aWNhdGVkX3ZpZXdfbG9naW5fYnV0dG9uIjogItCS0LvQtdC30YLQtSDQsiDQsNC60LDRg9C90YLQsCDRgdC4IiwKICAidmVyc2lvbiI6ICLQktC10YDRgdC40Y86IHt7dmVyc2lvbn19Igp9Cg==",xwe=""+new URL("cs-app-Du_5mVg3.json",import.meta.url).href,Iwe=""+new URL("da-app-BBz-lePm.json",import.meta.url).href,Rwe=""+new URL("de-app-DjOuqT-j.json",import.meta.url).href,Lwe=""+new URL("el-app-BBr3LLTK.json",import.meta.url).href,kwe=""+new URL("en-app-B0mg0RDM.json",import.meta.url).href,Twe=""+new URL("es-app-Q3c7lmEj.json",import.meta.url).href,Awe=""+new URL("et-app-DLvuR7m2.json",import.meta.url).href,Pwe="data:application/json;base64,ewogICJhMTF5IjogewogICAgInVzZXJfbWVudSI6ICLZgdmH2LHYs9iqINqp2KfYsdio2LEiCiAgfSwKICAiYWN0aW9uIjogewogICAgImNsb3NlIjogItio2LPYqtmGIiwKICAgICJnbyI6ICLYsdmB2KrZhiIsCiAgICAibm8iOiAi2K7bjNixIiwKICAgICJyZWdpc3RlciI6ICLYq9io2KrigIzZhtin2YUiLAogICAgInJlbW92ZSI6ICLYrdiw2YEiLAogICAgInNpZ25faW4iOiAi2YjYsdmI2K8iLAogICAgInNpZ25fb3V0IjogItiu2LHZiNisIgogIH0sCiAgImNhbGxfZW5kZWRfdmlldyI6IHsKICAgICJjcmVhdGVfYWNjb3VudF9idXR0b24iOiAi2LPYp9iu2Kog2K3Ys9in2Kgg2qnYp9ix2KjYsduMIiwKICAgICJjcmVhdGVfYWNjb3VudF9wcm9tcHQiOiAiPDA+2obYsdinINuM2qkg2LHZhdiyINi52KjZiNixINio2LHYp9uMINit2LPYp9ioINqp2KfYsdio2LHbjCDYrtmI2K8g2KrZhti424zZhSDZhtmF24zigIzaqdmG24zYr9ifPC8wPjwxPti02YXYpyDZhduM4oCM2KrZiNin2YbbjNivINmG2KfZhSDYrtmI2K8g2LHYpyDYrdmB2Lgg2qnZhtuM2K8g2Ygg24zaqSDYotmI2KfYqtin2LEg2KjYsdin24wg2KrZhdin2LPigIzZh9in24wg2KLbjNmG2K/ZhyDYqNiz2KfYstuM2K88LzE+IiwKICAgICJub3Rfbm93X2J1dHRvbiI6ICLYp9mE2KfZhiDZhtmH2Iwg2KjZhyDYtdmB2K3ZhyDYp9i12YTbjCDYqNix2q/Ysdiv24zYryIKICB9LAogICJjb21tb24iOiB7CiAgICAiYXVkaW8iOiAi2LXYr9inIiwKICAgICJhdmF0YXIiOiAi2KLZiNin2KrYp9ixIiwKICAgICJkaXNwbGF5X25hbWUiOiAi2YbYp9mFINmG2YXYp9uM2LTbjCIsCiAgICAiaG9tZSI6ICLYrtin2YbZhyIsCiAgICAibG9hZGluZyI6ICLYqNin2LHar9iy2KfYsduM4oCmIiwKICAgICJwYXNzd29yZCI6ICLYsdmF2LIg2LnYqNmI2LEiLAogICAgInByb2ZpbGUiOiAi2b7YsdmI2YHYp9uM2YQiLAogICAgInNldHRpbmdzIjogItiq2YbYuNuM2YXYp9iqIiwKICAgICJ1c2VybmFtZSI6ICLZhtin2YUg2qnYp9ix2KjYsduMIiwKICAgICJ2aWRlbyI6ICLZiNuM2K/bjNmIIgogIH0sCiAgImhlYWRlcl9sYWJlbCI6ICLYrtin2YbZh9mUINiq2YXYp9izINin2YTZhdmG2KoiLAogICJqb2luX2V4aXN0aW5nX2NhbGxfbW9kYWwiOiB7CiAgICAiam9pbl9idXR0b24iOiAi2KjZhNmH2Iwg2KjZhyDYqtmF2KfYsyDYqNm+24zZiNmG2K/bjNivIiwKICAgICJ0ZXh0IjogItin24zZhiDYqtmF2KfYsyDYp9iyINmC2KjZhCDZiNis2YjYryDYr9in2LHYr9iMINmF24zigIzYrtmI2KfZh9uM2K8g2KjZvtuM2YjZhtiv24zYr9ifIiwKICAgICJ0aXRsZSI6ICLZvtuM2YjYs9iqINio2Ycg2KrZhdin2LPYnyIKICB9LAogICJsYXlvdXRfc3BvdGxpZ2h0X2xhYmVsIjogItmG2YjYsSDYp9mB2qnZhiIsCiAgImxvYmJ5IjogewogICAgImpvaW5fYnV0dG9uIjogItm+24zZiNiz2KrZhiDYqNmHINiq2YXYp9izIgogIH0sCiAgImxvZ2dpbmdfaW4iOiAi2YjYsdmI2K/igKYiLAogICJsb2dpbl9hdXRoX2xpbmtzIjogIjwwPtiz2KfYrtiqINit2LPYp9ioINqp2KfYsdio2LHbjDwvMD4gT3IgPDI+2K/Ys9iq2LHYs9uMINio2Ycg2LnZhtmI2KfZhiDZhduM2YfZhdin2YY8LzI+IiwKICAibG9naW5fdGl0bGUiOiAi2YjYsdmI2K8iLAogICJyYWdlc2hha2VfcmVxdWVzdF9tb2RhbCI6IHsKICAgICJib2R5IjogItqp2KfYsdio2LEg2K/bjNqv2LHbjCDYr9ixINin24zZhiDYqtmF2KfYsyDZhdi02qnZhNuMINiv2KfYsdivLiDYqNix2KfbjCDYqti02K7bjNi1INio2YfYqtixINmF2LTaqdmE2Iwg2KjZh9iq2LEg2KfYs9iqINmF2Kcg2YTYp9qvINi524zYqOKAjNuM2KfYqNuMINix2Kcg2KzZhdi54oCM2KLZiNix24wg2qnZhtuM2YUuIiwKICAgICJ0aXRsZSI6ICLYr9ix2K7ZiNin2LPYqiDZhNin2q8g2LnbjNio4oCM24zYp9io24wiCiAgfSwKICAicmFnZXNoYWtlX3NlbmRfbG9ncyI6ICLYp9ix2LPYp9mEINmE2Kfar+KAjNmH2KfbjCDYuduM2KjigIzbjNin2KjbjCIsCiAgInJhZ2VzaGFrZV9zZW5kaW5nIjogItiv2LEg2K3Yp9mEINin2LHYs9in2YTigKYiLAogICJyYWdlc2hha2Vfc2VuZGluZ19sb2dzIjogItiv2LEg2K3Yp9mEINin2LHYs9in2YQg2KjYp9qv4oCM2YfYp9uMINi524zYqOKAjNuM2KfYqNuM4oCmIiwKICAicmVjYXB0Y2hhX2Rpc21pc3NlZCI6ICLYsduM2qnZvtqG2Kcg2LHYryDYtNivIiwKICAicmVjYXB0Y2hhX25vdF9sb2FkZWQiOiAi2qnZvtqG2Kcg2KjYp9ix2q/bjNix24wg2YbYtNivIiwKICAicmVnaXN0ZXIiOiB7CiAgICAicGFzc3dvcmRzX211c3RfbWF0Y2giOiAi2LHZhdiyINi52KjZiNixINio2KfbjNivINmH2YXYrtmI2KfZhtuMINiv2KfYtNiq2Ycg2KjYp9i02K8iLAogICAgInJlZ2lzdGVyaW5nIjogItir2KjYquKAjNmG2KfZheKApiIKICB9LAogICJyZWdpc3Rlcl9hdXRoX2xpbmtzIjogIjwwPtin2LIg2YLYqNmEINit2LPYp9ioINqp2KfYsdio2LHbjCDYr9in2LHbjNiv2J88LzA+PDE+PDA+2YjYsdmI2K88LzA+IE9yIDwyPtio2Ycg2LnZhtmI2KfZhiDbjNqpINmF24zZh9mF2KfZhiDZiNin2LHYryDYtNmI24zYrzwvMj48LzE+IiwKICAicmVnaXN0ZXJfY29uZmlybV9wYXNzd29yZF9sYWJlbCI6ICLYqtin24zbjNivINix2YXYsti52KjZiNixIiwKICAicmV0dXJuX2hvbWVfYnV0dG9uIjogItio2LHar9i02Kog2KjZhyDYtdmB2K3ZhyDYp9i12YTbjCIsCiAgInNjcmVlbnNoYXJlX2J1dHRvbl9sYWJlbCI6ICLYp9i02KrYsdin2qkg2q/YsNin2LHbjCDYtdmB2K3ZhyDZhtmF2KfbjNi0IiwKICAic2V0dGluZ3MiOiB7CiAgICAiZGV2ZWxvcGVyX3RhYl90aXRsZSI6ICLYqtmI2LPYudmHINiv2YfZhtiv2YciLAogICAgImZlZWRiYWNrX3RhYl9oNCI6ICLYqNin2LLYrtmI2LHYryDYp9ix2KfYptmHINiv2YfbjNivIiwKICAgICJmZWVkYmFja190YWJfc2VuZF9sb2dzX2xhYmVsIjogIti02KfZhdmEINmE2Kfar+KAjNmH2KfbjCDYuduM2KjigIzbjNin2KjbjCIKICB9LAogICJ1bmF1dGhlbnRpY2F0ZWRfdmlld19ib2R5IjogItmH2YbZiNiyINir2KjYquKAjNmG2KfZhSDZhtqp2LHYr9mH4oCM2KfbjNiv2J8gPDI+2LPYp9iu2Kog2K3Ys9in2Kgg2qnYp9ix2KjYsduMPC8yPiIsCiAgInVuYXV0aGVudGljYXRlZF92aWV3X2xvZ2luX2J1dHRvbiI6ICLYqNmHINit2LPYp9ioINqp2KfYsdio2LHbjCDYrtmI2K8g2YjYp9ix2K8g2LTZiNuM2K8iLAogICJ2ZXJzaW9uIjogItmG2LPYrtmHOiB7e9mG2LPYrtmHfX0iCn0K",Mwe=""+new URL("fi-app-tnO3DMdi.json",import.meta.url).href,Nwe=""+new URL("fr-app-BxTYbDfK.json",import.meta.url).href,$we=""+new URL("id-app-BEz8ptLJ.json",import.meta.url).href,Owe=""+new URL("it-app-Cik25Qgd.json",import.meta.url).href,jwe=""+new URL("ja-app-Cp_00ujI.json",import.meta.url).href,Dwe=""+new URL("lv-app-D-ZV3Ytk.json",import.meta.url).href,Fwe=""+new URL("pl-app-CUkXVSZk.json",import.meta.url).href,Hwe=""+new URL("ro-app-CdYgKCOW.json",import.meta.url).href,Uwe=""+new URL("ru-app-CIijOjFj.json",import.meta.url).href,Bwe=""+new URL("sk-app-DaVEeQWZ.json",import.meta.url).href,Vwe=""+new URL("sv-app-DHLBEOTp.json",import.meta.url).href,qwe=""+new URL("tr-app-Dk--6BpP.json",import.meta.url).href,Gwe=""+new URL("uk-app-DZD01h76.json",import.meta.url).href,Kwe="data:application/json;base64,ewogICJhY3Rpb24iOiB7CiAgICAiY2xvc2UiOiAixJDDs25nIiwKICAgICJubyI6ICJLaMO0bmciLAogICAgInJlZ2lzdGVyIjogIsSQxINuZyBrw70iLAogICAgInNpZ25faW4iOiAixJDEg25nIG5o4bqtcCIsCiAgICAic2lnbl9vdXQiOiAixJDEg25nIHh14bqldCIsCiAgICAic3VibWl0IjogIkfhu61pIgogIH0sCiAgImNhbGxfZW5kZWRfdmlldyI6IHsKICAgICJjcmVhdGVfYWNjb3VudF9idXR0b24iOiAiVOG6oW8gdMOgaSBraG/huqNuIiwKICAgICJjcmVhdGVfYWNjb3VudF9wcm9tcHQiOiAiPDA+VOG6oWkgc2FvIGzhuqFpIGtow7RuZyBob8OgbiB0aGnhu4duIGLhurFuZyBjw6FjaCDEkeG6t3QgbeG6rXQga2jhuql1IMSR4buDIGdp4buvIHTDoGkga2hv4bqjbiBj4bunYSBi4bqhbj88LzA+PDE+QuG6oW4gc+G6vSBjw7MgdGjhu4MgZ2nhu68gdMOqbiB2w6AgxJHhurd0IOG6o25oIMSR4bqhaSBkaeG7h24gY2hvIG5o4buvbmcgY3Xhu5ljIGfhu41pIHRp4bq/cCB0aGVvLjwvMT4iLAogICAgImZlZWRiYWNrX2RvbmUiOiAiPDA+Q+G6o20gaMahbiB2w6wgxJHDoyBwaOG6o24gaOG7k2khPC8wPiIsCiAgICAiZmVlZGJhY2tfcHJvbXB0IjogIjwwPkNow7puZyB0w7RpIG114buRbiBuZ2hlIHBo4bqjbiBo4buTaSBj4bunYSBi4bqhbiDEkeG7gyBjw7JuIGPhuqNpIHRoaeG7h24gdHLhuqNpIG5naGnhu4dtIGNobyBi4bqhbi48LzA+IiwKICAgICJoZWFkbGluZSI6ICJ7e2Rpc3BsYXlOYW1lfX0sIGN14buZYyBn4buNaSDEkcOjIGvhur90IHRow7pjLiIKICB9LAogICJjb21tb24iOiB7CiAgICAiYXVkaW8iOiAiw4JtIHRoYW5oIiwKICAgICJhdmF0YXIiOiAi4bqibmggxJHhuqFpIGRp4buHbiIsCiAgICAiZGlzcGxheV9uYW1lIjogIlTDqm4gaGnhu4NuIHRo4buLIiwKICAgICJsb2FkaW5nIjogIsSQYW5nIHThuqNp4oCmIiwKICAgICJwYXNzd29yZCI6ICJN4bqtdCBraOG6qXUiLAogICAgInByb2ZpbGUiOiAiSOG7kyBzxqEiLAogICAgInNldHRpbmdzIjogIkPDoGkgxJHhurd0IiwKICAgICJ1c2VybmFtZSI6ICJUw6puIG5nxrDhu51pIGTDuW5nIiwKICAgICJ2aWRlbyI6ICJUcnV54buBbiBow6xuaCIKICB9LAogICJqb2luX2V4aXN0aW5nX2NhbGxfbW9kYWwiOiB7CiAgICAiam9pbl9idXR0b24iOiAiVsOibmcsIHRoYW0gZ2lhIGN14buZYyBn4buNaSIsCiAgICAidGV4dCI6ICJDdeG7mWMgZ+G7jWkgxJHDoyB04buTbiB04bqhaSwgYuG6oW4gY8OzIG114buRbiB0aGFtIGdpYSBraMO0bmc/IiwKICAgICJ0aXRsZSI6ICJUaGFtIGdpYSBjdeG7mWMgZ+G7jWk/IgogIH0sCiAgImxheW91dF9zcG90bGlnaHRfbGFiZWwiOiAiVGnDqnUgxJFp4buDbSIsCiAgImxvYmJ5IjogewogICAgImpvaW5fYnV0dG9uIjogIlRoYW0gZ2lhIGN14buZYyBn4buNaSIKICB9LAogICJsb2dnaW5nX2luIjogIsSQYW5nIMSRxINuZyBuaOG6rXDigKYiLAogICJsb2dpbl9hdXRoX2xpbmtzIjogIjwwPlThuqFvIHTDoGkga2hv4bqjbjwvMD4gSGF5IDwyPlRoYW0gZ2lhIGTGsOG7m2kgdMOqbiBraMOhYzwvMj4iLAogICJsb2dpbl90aXRsZSI6ICLEkMSDbmcgbmjhuq1wIiwKICAicmFnZXNoYWtlX3JlcXVlc3RfbW9kYWwiOiB7CiAgICAiYm9keSI6ICJN4buZdCBuZ8aw4budaSBkw7luZyBraMOhYyB0cm9uZyBjdeG7mWMgZ+G7jWkgxJFhbmcgZ+G6t3AgduG6pW4gxJHhu4EuIMSQ4buDIGPDsyB0aOG7gyBjaOG6qW4gxJFvw6FuIHThu5F0IGjGoW4gY2jDum5nIHTDtGkgbXXhu5FuIHRodSB0aOG6rXAgbmjhuq10IGvDvSBn4buhIGzhu5dpLiIsCiAgICAidGl0bGUiOiAiWcOqdSBj4bqndSBuaOG6rXQga8O9IGfhu6EgbOG7l2kiCiAgfSwKICAicmFnZXNoYWtlX3NlbmRpbmciOiAixJBhbmcgZ+G7rWnigKYiLAogICJyZWNhcHRjaGFfbm90X2xvYWRlZCI6ICJDaMawYSB04bqjaSDEkcaw4bujYyBSZWNhcHRjaGEiLAogICJyZWdpc3RlciI6IHsKICAgICJwYXNzd29yZHNfbXVzdF9tYXRjaCI6ICJN4bqtdCBraOG6qXUgcGjhuqNpIGto4bubcCIsCiAgICAicmVnaXN0ZXJpbmciOiAixJBhbmcgxJHEg25nIGvDveKApiIKICB9LAogICJyZWdpc3Rlcl9hdXRoX2xpbmtzIjogIjwwPsSQw6MgY8OzIHTDoGkga2hv4bqjbj88LzA+PDE+PDA+xJDEg25nIG5o4bqtcDwvMD4gSGF5IDwyPlRoYW0gZ2lhIGTGsOG7m2kgdMOqbiBLaMOhY2g8LzI+PC8xPiIsCiAgInJlZ2lzdGVyX2NvbmZpcm1fcGFzc3dvcmRfbGFiZWwiOiAiWMOhYyBuaOG6rW4gbeG6rXQga2jhuql1IiwKICAic2NyZWVuc2hhcmVfYnV0dG9uX2xhYmVsIjogIkNoaWEgc+G6uyBtw6BuIGjDrG5oIiwKICAic2V0dGluZ3MiOiB7CiAgICAiZGV2ZWxvcGVyX3RhYl90aXRsZSI6ICJOaMOgIHBow6F0IHRyaeG7g24iLAogICAgImZlZWRiYWNrX3RhYl9kZXNjcmlwdGlvbl9sYWJlbCI6ICJQaOG6o24gaOG7k2kgY+G7p2EgYuG6oW4iLAogICAgImZlZWRiYWNrX3RhYl9oNCI6ICJH4butaSBwaOG6o24gaOG7k2kiLAogICAgImZlZWRiYWNrX3RhYl9zZW5kX2xvZ3NfbGFiZWwiOiAiS8OobSB0aGVvIG5o4bqtdCBrw70gZ+G7oSBs4buXaSIsCiAgICAiZmVlZGJhY2tfdGFiX3RoYW5rX3lvdSI6ICJD4bqjbSDGoW4sIGNow7puZyB0w7RpIMSRw6Mgbmjhuq1uIMSRxrDhu6NjIHBo4bqjbiBo4buTaSEiLAogICAgImZlZWRiYWNrX3RhYl90aXRsZSI6ICJQaOG6o24gaOG7k2kiCiAgfSwKICAic3VibWl0dGluZyI6ICLEkGFuZyBn4butaeKApiIsCiAgInVuYXV0aGVudGljYXRlZF92aWV3X2JvZHkiOiAiQ2jGsGEgxJHEg25nIGvDvT8gPDI+VOG6oW8gdMOgaSBraG/huqNuPC8yPiIsCiAgInVuYXV0aGVudGljYXRlZF92aWV3X2xvZ2luX2J1dHRvbiI6ICLEkMSDbmcgbmjhuq1wIHbDoG8gdMOgaSBraG/huqNuIGPhu6dhIGLhuqFuIiwKICAidmVyc2lvbiI6ICJQaGnDqm4gYuG6o246IHt7dmVyc2lvbn19Igp9Cg==",Wwe=""+new URL("zh-Hans-app-BY5jJGyr.json",import.meta.url).href,zwe=""+new URL("zh-Hant-app-BV1LKS_j.json",import.meta.url).href,{slice:Ywe,forEach:Xwe}=[];function Zwe(e){return Xwe.call(Ywe.call(arguments,1),t=>{if(t)for(const n in t)e[n]===void 0&&(e[n]=t[n])}),e}function Qwe(e){return typeof e!="string"?!1:[/<\s*script.*?>/i,/<\s*\/\s*script\s*>/i,/<\s*img.*?on\w+\s*=/i,/<\s*\w+\s*on\w+\s*=.*?>/i,/javascript\s*:/i,/vbscript\s*:/i,/expression\s*\(/i,/eval\s*\(/i,/alert\s*\(/i,/document\.cookie/i,/document\.write\s*\(/i,/window\.location/i,/innerHTML/i].some(n=>n.test(e))}const bE=/^[\u0009\u0020-\u007e\u0080-\u00ff]+$/,Jwe=function(e,t){const r=arguments.length>2&&arguments[2]!==void 0?arguments[2]:{path:"/"},i=encodeURIComponent(t);let o=`${e}=${i}`;if(r.maxAge>0){const s=r.maxAge-0;if(Number.isNaN(s))throw new Error("maxAge should be a Number");o+=`; Max-Age=${Math.floor(s)}`}if(r.domain){if(!bE.test(r.domain))throw new TypeError("option domain is invalid");o+=`; Domain=${r.domain}`}if(r.path){if(!bE.test(r.path))throw new TypeError("option path is invalid");o+=`; Path=${r.path}`}if(r.expires){if(typeof r.expires.toUTCString!="function")throw new TypeError("option expires is invalid");o+=`; Expires=${r.expires.toUTCString()}`}if(r.httpOnly&&(o+="; HttpOnly"),r.secure&&(o+="; Secure"),r.sameSite)switch(typeof r.sameSite=="string"?r.sameSite.toLowerCase():r.sameSite){case!0:o+="; SameSite=Strict";break;case"lax":o+="; SameSite=Lax";break;case"strict":o+="; SameSite=Strict";break;case"none":o+="; SameSite=None";break;default:throw new TypeError("option sameSite is invalid")}return r.partitioned&&(o+="; Partitioned"),o},wE={create(e,t,n,r){let i=arguments.length>4&&arguments[4]!==void 0?arguments[4]:{path:"/",sameSite:"strict"};n&&(i.expires=new Date,i.expires.setTime(i.expires.getTime()+n*60*1e3)),r&&(i.domain=r),document.cookie=Jwe(e,t,i)},read(e){const t=`${e}=`,n=document.cookie.split(";");for(let r=0;r<n.length;r++){let i=n[r];for(;i.charAt(0)===" ";)i=i.substring(1,i.length);if(i.indexOf(t)===0)return i.substring(t.length,i.length)}return null},remove(e,t){this.create(e,"",-1,t)}};var e6e={name:"cookie",lookup(e){let{lookupCookie:t}=e;if(t&&typeof document<"u")return wE.read(t)||void 0},cacheUserLanguage(e,t){let{lookupCookie:n,cookieMinutes:r,cookieDomain:i,cookieOptions:o}=t;n&&typeof document<"u"&&wE.create(n,e,r,i,o)}},t6e={name:"querystring",lookup(e){let{lookupQuerystring:t}=e,n;if(typeof window<"u"){let{search:r}=window.location;!window.location.search&&window.location.hash?.indexOf("?")>-1&&(r=window.location.hash.substring(window.location.hash.indexOf("?")));const o=r.substring(1).split("&");for(let s=0;s<o.length;s++){const a=o[s].indexOf("=");a>0&&o[s].substring(0,a)===t&&(n=o[s].substring(a+1))}}return n}},n6e={name:"hash",lookup(e){let{lookupHash:t,lookupFromHashIndex:n}=e,r;if(typeof window<"u"){const{hash:i}=window.location;if(i&&i.length>2){const o=i.substring(1);if(t){const s=o.split("&");for(let a=0;a<s.length;a++){const c=s[a].indexOf("=");c>0&&s[a].substring(0,c)===t&&(r=s[a].substring(c+1))}}if(r)return r;if(!r&&n>-1){const s=i.match(/\/([a-zA-Z-]*)/g);return Array.isArray(s)?s[typeof n=="number"?n:0]?.replace("/",""):void 0}}}return r}};let Fc=null;const SE=()=>{if(Fc!==null)return Fc;try{if(Fc=typeof window<"u"&&window.localStorage!==null,!Fc)return!1;const e="i18next.translate.boo";window.localStorage.setItem(e,"foo"),window.localStorage.removeItem(e)}catch{Fc=!1}return Fc};var r6e={name:"localStorage",lookup(e){let{lookupLocalStorage:t}=e;if(t&&SE())return window.localStorage.getItem(t)||void 0},cacheUserLanguage(e,t){let{lookupLocalStorage:n}=t;n&&SE()&&window.localStorage.setItem(n,e)}};let Hc=null;const CE=()=>{if(Hc!==null)return Hc;try{if(Hc=typeof window<"u"&&window.sessionStorage!==null,!Hc)return!1;const e="i18next.translate.boo";window.sessionStorage.setItem(e,"foo"),window.sessionStorage.removeItem(e)}catch{Hc=!1}return Hc};var i6e={name:"sessionStorage",lookup(e){let{lookupSessionStorage:t}=e;if(t&&CE())return window.sessionStorage.getItem(t)||void 0},cacheUserLanguage(e,t){let{lookupSessionStorage:n}=t;n&&CE()&&window.sessionStorage.setItem(n,e)}},o6e={name:"navigator",lookup(e){const t=[];if(typeof navigator<"u"){const{languages:n,userLanguage:r,language:i}=navigator;if(n)for(let o=0;o<n.length;o++)t.push(n[o]);r&&t.push(r),i&&t.push(i)}return t.length>0?t:void 0}},s6e={name:"htmlTag",lookup(e){let{htmlTag:t}=e,n;const r=t||(typeof document<"u"?document.documentElement:null);return r&&typeof r.getAttribute=="function"&&(n=r.getAttribute("lang")),n}},a6e={name:"path",lookup(e){let{lookupFromPathIndex:t}=e;if(typeof window>"u")return;const n=window.location.pathname.match(/\/([a-zA-Z-]*)/g);return Array.isArray(n)?n[typeof t=="number"?t:0]?.replace("/",""):void 0}},c6e={name:"subdomain",lookup(e){let{lookupFromSubdomainIndex:t}=e;const n=typeof t=="number"?t+1:1,r=typeof window<"u"&&window.location?.hostname?.match(/^(\w{2,5})\.(([a-z0-9-]{1,63}\.[a-z]{2,6})|localhost)/i);if(r)return r[n]}};let fD=!1;try{document.cookie,fD=!0}catch{}const hD=["querystring","cookie","localStorage","sessionStorage","navigator","htmlTag"];fD||hD.splice(1,1);const l6e=()=>({order:hD,lookupQuerystring:"lng",lookupCookie:"i18next",lookupLocalStorage:"i18nextLng",lookupSessionStorage:"i18nextLng",caches:["localStorage"],excludeCacheFor:["cimode"],convertDetectedLanguage:e=>e});class pD{constructor(t){let n=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{};this.type="languageDetector",this.detectors={},this.init(t,n)}init(){let t=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{languageUtils:{}},n=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{},r=arguments.length>2&&arguments[2]!==void 0?arguments[2]:{};this.services=t,this.options=Zwe(n,this.options||{},l6e()),typeof this.options.convertDetectedLanguage=="string"&&this.options.convertDetectedLanguage.indexOf("15897")>-1&&(this.options.convertDetectedLanguage=i=>i.replace("-","_")),this.options.lookupFromUrlIndex&&(this.options.lookupFromPathIndex=this.options.lookupFromUrlIndex),this.i18nOptions=r,this.addDetector(e6e),this.addDetector(t6e),this.addDetector(r6e),this.addDetector(i6e),this.addDetector(o6e),this.addDetector(s6e),this.addDetector(a6e),this.addDetector(c6e),this.addDetector(n6e)}addDetector(t){return this.detectors[t.name]=t,this}detect(){let t=arguments.length>0&&arguments[0]!==void 0?arguments[0]:this.options.order,n=[];return t.forEach(r=>{if(this.detectors[r]){let i=this.detectors[r].lookup(this.options);i&&typeof i=="string"&&(i=[i]),i&&(n=n.concat(i))}}),n=n.filter(r=>r!=null&&!Qwe(r)).map(r=>this.options.convertDetectedLanguage(r)),this.services&&this.services.languageUtils&&this.services.languageUtils.getBestMatchFromCodes?n:n.length>0?n[0]:null}cacheUserLanguage(t){let n=arguments.length>1&&arguments[1]!==void 0?arguments[1]:this.options.caches;n&&(this.options.excludeCacheFor&&this.options.excludeCacheFor.indexOf(t)>-1||n.forEach(r=>{this.detectors[r]&&this.detectors[r].cacheUserLanguage(t,this.options)}))}}pD.type="languageDetector";var sp={},EE;function u6e(){if(EE)return sp;EE=1,Object.defineProperty(sp,"__esModule",{value:!0}),sp.shouldPolyfill=e;function e(){return!Intl.Segmenter}return sp}var d6e=u6e();function f6e(){return typeof Intl>"u"||!("DurationFormat"in Intl)}const gD=Object.assign({"../locales/bg/app.json":Ewe,"../locales/cs/app.json":xwe,"../locales/da/app.json":Iwe,"../locales/de/app.json":Rwe,"../locales/el/app.json":Lwe,"../locales/en/app.json":kwe,"../locales/es/app.json":Twe,"../locales/et/app.json":Awe,"../locales/fa/app.json":Pwe,"../locales/fi/app.json":Mwe,"../locales/fr/app.json":Nwe,"../locales/id/app.json":$we,"../locales/it/app.json":Owe,"../locales/ja/app.json":jwe,"../locales/lv/app.json":Dwe,"../locales/pl/app.json":Fwe,"../locales/ro/app.json":Hwe,"../locales/ru/app.json":Uwe,"../locales/sk/app.json":Bwe,"../locales/sv/app.json":Vwe,"../locales/tr/app.json":qwe,"../locales/uk/app.json":Gwe,"../locales/vi/app.json":Kwe,"../locales/zh-Hans/app.json":Wwe,"../locales/zh-Hant/app.json":zwe}),h6e=(e,t)=>gD[`../locales/${e}/${t}.json`],p6e=[...new Set(Object.keys(gD).map(e=>{const t=e.match(/\/([^/]+)\/[^/]+\.json$/)?.[1];if(!t)throw new Error(`Could not parse locale URL ${e}`);return t}))],g6e={type:"backend",init(){},read(e,t,n){(async()=>{const r=h6e(e,t);if(!r)throw new Error(`Namespace ${t} for locale ${e} not found`);const i=await fetch(r,{credentials:"omit",headers:{Accept:"application/json"}});if(X_(i))throw Error(`Failed to fetch ${r}`);return await i.json()})().then(r=>n(null,r),r=>n(r,null))}};class m6e{constructor(){this.config=0,this.sentry=0}allDepsAreLoaded(){return!Object.values(this).some(t=>t!==2)}}class xi{constructor(){this.isInitialized=!1,this.loadStates=new m6e}static isInitialized(){return!!xi.internalInstance?.isInitialized}static async initBeforeReact(){que();const t=[];d6e.shouldPolyfill()&&t.push(zp(()=>import("./polyfill-force-B9rLScZD.js").then(o=>o.p),__vite__mapDeps([2,1,3]),import.meta.url)),f6e()&&t.push(zp(()=>import("./polyfill-force-BfFSVkNa.js"),__vite__mapDeps([4,3,1]),import.meta.url)),await Promise.all(t);const n=new pD;n.addDetector({name:"urlFragment",lookup:()=>kt().lang??void 0}),Mn.on("languageChanged",o=>{document.documentElement.lang=o}),await Mn.use(g6e).use(n).use(wie).init({fallbackLng:"en",defaultNS:"app",keySeparator:".",nsSeparator:!1,pluralSeparator:"_",contextSeparator:"|",supportedLngs:p6e,interpolation:{escapeValue:!1},detection:{order:["urlFragment","navigator"],caches:[]}});const{fonts:r,fontScale:i}=kt();i!==null&&document.documentElement.style.setProperty("--font-scale",i.toString()),r.length>0&&document.documentElement.style.setProperty("--font-family",r.map(o=>`"${o}"`).join(", ")),document.body.setAttribute("data-platform",Pi)}static init(){return xi?.internalInstance?.initPromise?null:(xi.internalInstance=new xi,xi.internalInstance.initPromise=new Promise(t=>{xi.internalInstance?.initStep(t)}),xi.internalInstance.initPromise)}static reset(){xi.internalInstance=void 0}initStep(t){if(this.loadStates.config===0&&(this.loadStates.config=1,it.init().then(()=>{this.loadStates.config=2,this.initStep(t)},n=>{U.error("Failed to load config",n)})),this.loadStates.sentry===0&&this.loadStates.config===2){let n,r;n=kt().sentryDsn??void 0,r=kt().sentryEnvironment??void 0,n&&kK({dsn:n,environment:r,integrations:[zK({useEffect:X.useEffect,useLocation:Nn,useNavigationType:DF,createRoutesFromChildren:Zp,matchRoutes:Y3})],tracesSampleRate:1}),this.loadStates.sentry=2}this.loadStates.allDepsAreLoaded()&&(t(),this.isInitialized=!0)}}const v6e=()=>{const[e,t]=f.useState(()=>kt().theme),n=f.useRef(document.body.classList.item(0));f.useEffect(()=>{if(Ae){const r=i=>{i.preventDefault(),"name"in i.detail.data&&typeof i.detail.data.name=="string"&&t(i.detail.data.name),Ae.api.transport.reply(i.detail,{})};return Ae.lazyActions.on(Ev.ThemeChange,r),()=>{Ae.lazyActions.off(Ev.ThemeChange,r)}}},[]),f.useLayoutEffect(()=>{const r=e?.includes("light")?"light":"dark",i=e?.includes("high-contrast")?"-hc":"",o="cpd-theme-"+r+i;o!==n.current&&(document.body.classList.remove("cpd-theme-light","cpd-theme-dark","cpd-theme-light-hc","cpd-theme-dark-hc"),document.body.classList.add(o),n.current=o),document.body.classList.remove("no-theme")},[n,e])},ap=YK(ZE),y6e=({children:e})=>{const{pathname:t}=Nn();return f.useEffect(()=>{let n="";!["/login","/register"].includes(t)&&!Ae&&(n="var(--background-gradient)"),document.getElementsByTagName("body")[0].style.backgroundImage=n},[t]),h.jsx(h.Fragment,{children:e})},_6e=({children:e})=>(v6e(),e),b6e=({vm:e})=>{const[t,n]=f.useState(!1);f.useEffect(()=>{xi.init()?.then(async()=>{t||(n(!0),await Ae?.api.sendContentLoaded())}).catch(U.error)});const{header:r}=f.useMemo(kt,[]),i=t?h.jsx(Yhe,{children:h.jsx(fN,{value:e.mediaDevices,children:h.jsx(Ime,{children:h.jsx(Eg,{fallback:o=>h.jsx(Qd,{error:o,widget:Ae}),children:h.jsxs(eH,{children:[h.jsx(ap,{path:"/",element:h.jsx(jO,{})}),h.jsx(ap,{path:"/login",element:h.jsx($0e,{})}),h.jsx(ap,{path:"/register",element:h.jsx(O0e,{})}),h.jsx(ap,{path:"*",element:h.jsx(Cwe,{})})]})})})})}):h.jsx(Jg,{});return h.jsx(EH,{children:h.jsx(y6e,{children:h.jsx(_6e,{children:h.jsx(uR,{children:h.jsx(f.Suspense,{fallback:null,children:r===zd.AppBar?h.jsx(pbe,{children:i}):i})})})})})};class w6e{constructor(t){this.scope=t,this.mediaDevices=new Jpe(this.scope)}}window.setLKLogLevel=NE;yle().catch(e=>{U.error("Failed to initialize rageshake",e)});NE("info");nF((e,t,n)=>{global.mx_rage_logger.log(e,"livekit",t,n)});U.info("Element Call dev");const G3=rF.createRoot(document.getElementById("root"));let Ad=null;window.isSecureContext?navigator.mediaDevices||(Ad=new Error("Your browser does not support WebRTC.")):Ad=new Error(`This app cannot run in an insecure context. To fix this, access the app via a local loopback address, or serve it over HTTPS.
https://developer.mozilla.org/en-US/docs/Web/Security/Secure_Contexts`);if(Ad!==null)throw G3.render(Ad.message),Ad;xi.initBeforeReact().then(()=>{G3.render(h.jsx(f.StrictMode,{children:h.jsx(b6e,{vm:new w6e(iN)})}))}).catch(e=>{U.error("Failed to initialize app",e),G3.render(e.message)});export{it as C,Ar as _,ji as a,VS as f,TO as i,C6e as t};
//# sourceMappingURL=index-B10kaxux.js.map
